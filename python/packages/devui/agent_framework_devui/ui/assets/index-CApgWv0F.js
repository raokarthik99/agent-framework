function sD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const c=Object.getOwnPropertyDescriptor(r,a);c&&Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function KE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function aD(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Qw={exports:{}},_m={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function cD(){if(PS)return _m;PS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,c){var d=null;if(c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),"key"in a){c={};for(var m in a)m!=="key"&&(c[m]=a[m])}else c=a;return a=c.ref,{$$typeof:t,type:r,key:d,ref:a!==void 0?a:null,props:c}}return _m.Fragment=e,_m.jsx=n,_m.jsxs=n,_m}var DS;function lD(){return DS||(DS=1,Qw.exports=cD()),Qw.exports}var h=lD(),Ww={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS;function uD(){if(LS)return ut;LS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function E(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function N(z,W,ue){this.props=z,this.context=W,this.refs=k,this.updater=ue||x}N.prototype.isReactComponent={},N.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},N.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function M(){}M.prototype=N.prototype;function j(z,W,ue){this.props=z,this.context=W,this.refs=k,this.updater=ue||x}var O=j.prototype=new M;O.constructor=j,I(O,N.prototype),O.isPureReactComponent=!0;var U=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function Q(z,W,ue,de,ge,Ne){return ue=Ne.ref,{$$typeof:t,type:z,key:W,ref:ue!==void 0?ue:null,props:Ne}}function Y(z,W){return Q(z.type,W,void 0,void 0,void 0,z.props)}function ee(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function se(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ue){return W[ue]})}var ce=/\/+/g;function te(z,W){return typeof z=="object"&&z!==null&&z.key!=null?se(""+z.key):W.toString(36)}function re(){}function G(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(re,re):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function J(z,W,ue,de,ge){var Ne=typeof z;(Ne==="undefined"||Ne==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(Ne){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case t:case e:Ee=!0;break;case v:return Ee=z._init,J(Ee(z._payload),W,ue,de,ge)}}if(Ee)return ge=ge(z),Ee=de===""?"."+te(z,0):de,U(ge)?(ue="",Ee!=null&&(ue=Ee.replace(ce,"$&/")+"/"),J(ge,W,ue,"",function(De){return De})):ge!=null&&(ee(ge)&&(ge=Y(ge,ue+(ge.key==null||z&&z.key===ge.key?"":(""+ge.key).replace(ce,"$&/")+"/")+Ee)),W.push(ge)),1;Ee=0;var le=de===""?".":de+":";if(U(z))for(var Ce=0;Ce<z.length;Ce++)de=z[Ce],Ne=le+te(de,Ce),Ee+=J(de,W,ue,Ne,ge);else if(Ce=E(z),typeof Ce=="function")for(z=Ce.call(z),Ce=0;!(de=z.next()).done;)de=de.value,Ne=le+te(de,Ce++),Ee+=J(de,W,ue,Ne,ge);else if(Ne==="object"){if(typeof z.then=="function")return J(G(z),W,ue,de,ge);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function D(z,W,ue){if(z==null)return z;var de=[],ge=0;return J(z,de,"","",function(Ne){return W.call(ue,Ne,ge++)}),de}function F(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ue){(z._status===0||z._status===-1)&&(z._status=1,z._result=ue)},function(ue){(z._status===0||z._status===-1)&&(z._status=2,z._result=ue)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var $=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function X(){}return ut.Children={map:D,forEach:function(z,W,ue){D(z,function(){W.apply(this,arguments)},ue)},count:function(z){var W=0;return D(z,function(){W++}),W},toArray:function(z){return D(z,function(W){return W})||[]},only:function(z){if(!ee(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},ut.Component=N,ut.Fragment=n,ut.Profiler=a,ut.PureComponent=j,ut.StrictMode=r,ut.Suspense=p,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ut.__COMPILER_RUNTIME={__proto__:null,c:function(z){return H.H.useMemoCache(z)}},ut.cache=function(z){return function(){return z.apply(null,arguments)}},ut.cloneElement=function(z,W,ue){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var de=I({},z.props),ge=z.key,Ne=void 0;if(W!=null)for(Ee in W.ref!==void 0&&(Ne=void 0),W.key!==void 0&&(ge=""+W.key),W)!V.call(W,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&W.ref===void 0||(de[Ee]=W[Ee]);var Ee=arguments.length-2;if(Ee===1)de.children=ue;else if(1<Ee){for(var le=Array(Ee),Ce=0;Ce<Ee;Ce++)le[Ce]=arguments[Ce+2];de.children=le}return Q(z.type,ge,void 0,void 0,Ne,de)},ut.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:c,_context:z},z},ut.createElement=function(z,W,ue){var de,ge={},Ne=null;if(W!=null)for(de in W.key!==void 0&&(Ne=""+W.key),W)V.call(W,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ge[de]=W[de]);var Ee=arguments.length-2;if(Ee===1)ge.children=ue;else if(1<Ee){for(var le=Array(Ee),Ce=0;Ce<Ee;Ce++)le[Ce]=arguments[Ce+2];ge.children=le}if(z&&z.defaultProps)for(de in Ee=z.defaultProps,Ee)ge[de]===void 0&&(ge[de]=Ee[de]);return Q(z,Ne,void 0,void 0,null,ge)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(z){return{$$typeof:m,render:z}},ut.isValidElement=ee,ut.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:F}},ut.memo=function(z,W){return{$$typeof:y,type:z,compare:W===void 0?null:W}},ut.startTransition=function(z){var W=H.T,ue={};H.T=ue;try{var de=z(),ge=H.S;ge!==null&&ge(ue,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(X,$)}catch(Ne){$(Ne)}finally{H.T=W}},ut.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ut.use=function(z){return H.H.use(z)},ut.useActionState=function(z,W,ue){return H.H.useActionState(z,W,ue)},ut.useCallback=function(z,W){return H.H.useCallback(z,W)},ut.useContext=function(z){return H.H.useContext(z)},ut.useDebugValue=function(){},ut.useDeferredValue=function(z,W){return H.H.useDeferredValue(z,W)},ut.useEffect=function(z,W,ue){var de=H.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(z,W)},ut.useId=function(){return H.H.useId()},ut.useImperativeHandle=function(z,W,ue){return H.H.useImperativeHandle(z,W,ue)},ut.useInsertionEffect=function(z,W){return H.H.useInsertionEffect(z,W)},ut.useLayoutEffect=function(z,W){return H.H.useLayoutEffect(z,W)},ut.useMemo=function(z,W){return H.H.useMemo(z,W)},ut.useOptimistic=function(z,W){return H.H.useOptimistic(z,W)},ut.useReducer=function(z,W,ue){return H.H.useReducer(z,W,ue)},ut.useRef=function(z){return H.H.useRef(z)},ut.useState=function(z){return H.H.useState(z)},ut.useSyncExternalStore=function(z,W,ue){return H.H.useSyncExternalStore(z,W,ue)},ut.useTransition=function(){return H.H.useTransition()},ut.version="19.1.1",ut}var US;function Eg(){return US||(US=1,Ww.exports=uD()),Ww.exports}var _=Eg();const js=KE(_),N_=sD({__proto__:null,default:js},[_]);var Xw={exports:{}},km={},Jw={exports:{}},Zw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function dD(){return jS||(jS=1,(function(t){function e(D,F){var $=D.length;D.push(F);e:for(;0<$;){var X=$-1>>>1,z=D[X];if(0<a(z,F))D[X]=F,D[$]=z,$=X;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],$=D.pop();if($!==F){D[0]=$;e:for(var X=0,z=D.length,W=z>>>1;X<W;){var ue=2*(X+1)-1,de=D[ue],ge=ue+1,Ne=D[ge];if(0>a(de,$))ge<z&&0>a(Ne,de)?(D[X]=Ne,D[ge]=$,X=ge):(D[X]=de,D[ue]=$,X=ue);else if(ge<z&&0>a(Ne,$))D[X]=Ne,D[ge]=$,X=ge;else break e}}return F}function a(D,F){var $=D.sortIndex-F.sortIndex;return $!==0?$:D.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var p=[],y=[],v=1,b=null,E=3,x=!1,I=!1,k=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function U(D){for(var F=n(y);F!==null;){if(F.callback===null)r(y);else if(F.startTime<=D)r(y),F.sortIndex=F.expirationTime,e(p,F);else break;F=n(y)}}function H(D){if(k=!1,U(D),!I)if(n(p)!==null)I=!0,V||(V=!0,te());else{var F=n(y);F!==null&&J(H,F.startTime-D)}}var V=!1,Q=-1,Y=5,ee=-1;function se(){return N?!0:!(t.unstable_now()-ee<Y)}function ce(){if(N=!1,V){var D=t.unstable_now();ee=D;var F=!0;try{e:{I=!1,k&&(k=!1,j(Q),Q=-1),x=!0;var $=E;try{t:{for(U(D),b=n(p);b!==null&&!(b.expirationTime>D&&se());){var X=b.callback;if(typeof X=="function"){b.callback=null,E=b.priorityLevel;var z=X(b.expirationTime<=D);if(D=t.unstable_now(),typeof z=="function"){b.callback=z,U(D),F=!0;break t}b===n(p)&&r(p),U(D)}else r(p);b=n(p)}if(b!==null)F=!0;else{var W=n(y);W!==null&&J(H,W.startTime-D),F=!1}}break e}finally{b=null,E=$,x=!1}F=void 0}}finally{F?te():V=!1}}}var te;if(typeof O=="function")te=function(){O(ce)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,G=re.port2;re.port1.onmessage=ce,te=function(){G.postMessage(null)}}else te=function(){M(ce,0)};function J(D,F){Q=M(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(D){switch(E){case 1:case 2:case 3:var F=3;break;default:F=E}var $=E;E=F;try{return D()}finally{E=$}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=E;E=D;try{return F()}finally{E=$}},t.unstable_scheduleCallback=function(D,F,$){var X=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?X+$:X):$=X,D){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=$+z,D={id:v++,callback:F,priorityLevel:D,startTime:$,expirationTime:z,sortIndex:-1},$>X?(D.sortIndex=$,e(y,D),n(p)===null&&D===n(y)&&(k?(j(Q),Q=-1):k=!0,J(H,$-X))):(D.sortIndex=z,e(p,D),I||x||(I=!0,V||(V=!0,te()))),D},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(D){var F=E;return function(){var $=E;E=F;try{return D.apply(this,arguments)}finally{E=$}}}})(Zw)),Zw}var HS;function hD(){return HS||(HS=1,Jw.exports=dD()),Jw.exports}var eb={exports:{}},Dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS;function fD(){if(BS)return Dr;BS=1;var t=Eg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Dr.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(p,y,null,v)},Dr.flushSync=function(p){var y=d.T,v=r.p;try{if(d.T=null,r.p=2,p)return p()}finally{d.T=y,r.p=v,r.d.f()}},Dr.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Dr.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Dr.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,x=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:x}):v==="script"&&r.d.X(p,{crossOrigin:b,integrity:E,fetchPriority:x,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Dr.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Dr.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);r.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Dr.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=m(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Dr.requestFormReset=function(p){r.d.r(p)},Dr.unstable_batchedUpdates=function(p,y){return p(y)},Dr.useFormState=function(p,y,v){return d.H.useFormState(p,y,v)},Dr.useFormStatus=function(){return d.H.useHostTransitionStatus()},Dr.version="19.1.1",Dr}var zS;function O_(){if(zS)return eb.exports;zS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),eb.exports=fD(),eb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function mD(){if(FS)return km;FS=1;var t=hD(),e=Eg(),n=O_();function r(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function c(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function d(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function m(o){if(c(o)!==o)throw Error(r(188))}function p(o){var s=o.alternate;if(!s){if(s=c(o),s===null)throw Error(r(188));return s!==o?null:o}for(var l=o,f=s;;){var C=l.return;if(C===null)break;var A=C.alternate;if(A===null){if(f=C.return,f!==null){l=f;continue}break}if(C.child===A.child){for(A=C.child;A;){if(A===l)return m(C),o;if(A===f)return m(C),s;A=A.sibling}throw Error(r(188))}if(l.return!==f.return)l=C,f=A;else{for(var P=!1,B=C.child;B;){if(B===l){P=!0,l=C,f=A;break}if(B===f){P=!0,f=C,l=A;break}B=B.sibling}if(!P){for(B=A.child;B;){if(B===l){P=!0,l=A,f=C;break}if(B===f){P=!0,f=A,l=C;break}B=B.sibling}if(!P)throw Error(r(189))}}if(l.alternate!==f)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?o:s}function y(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=y(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),O=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function te(o){return o===null||typeof o!="object"?null:(o=ce&&o[ce]||o["@@iterator"],typeof o=="function"?o:null)}var re=Symbol.for("react.client.reference");function G(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===re?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case I:return"Fragment";case N:return"Profiler";case k:return"StrictMode";case H:return"Suspense";case V:return"SuspenseList";case ee:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case O:return(o.displayName||"Context")+".Provider";case j:return(o._context.displayName||"Context")+".Consumer";case U:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Q:return s=o.displayName||null,s!==null?s:G(o.type)||"Memo";case Y:s=o._payload,o=o._init;try{return G(o(s))}catch{}}return null}var J=Array.isArray,D=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},X=[],z=-1;function W(o){return{current:o}}function ue(o){0>z||(o.current=X[z],X[z]=null,z--)}function de(o,s){z++,X[z]=o.current,o.current=s}var ge=W(null),Ne=W(null),Ee=W(null),le=W(null);function Ce(o,s){switch(de(Ee,s),de(Ne,o),de(ge,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?cS(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=cS(s),o=lS(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(ge),de(ge,o)}function De(){ue(ge),ue(Ne),ue(Ee)}function we(o){o.memoizedState!==null&&de(le,o);var s=ge.current,l=lS(s,o.type);s!==l&&(de(Ne,o),de(ge,l))}function be(o){Ne.current===o&&(ue(ge),ue(Ne)),le.current===o&&(ue(le),Em._currentValue=$)}var Oe=Object.prototype.hasOwnProperty,Le=t.unstable_scheduleCallback,fe=t.unstable_cancelCallback,Me=t.unstable_shouldYield,He=t.unstable_requestPaint,Ke=t.unstable_now,ze=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,lt=t.unstable_UserBlockingPriority,Tt=t.unstable_NormalPriority,gt=t.unstable_LowPriority,Pt=t.unstable_IdlePriority,yt=t.log,Nn=t.unstable_setDisableYieldValue,tn=null,Ht=null;function Fn(o){if(typeof yt=="function"&&Nn(o),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(tn,o)}catch{}}var _n=Math.clz32?Math.clz32:Za,yo=Math.log,cs=Math.LN2;function Za(o){return o>>>=0,o===0?32:31-(yo(o)/cs|0)|0}var mi=256,gi=4194304;function On(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function pi(o,s,l){var f=o.pendingLanes;if(f===0)return 0;var C=0,A=o.suspendedLanes,P=o.pingedLanes;o=o.warmLanes;var B=f&134217727;return B!==0?(f=B&~A,f!==0?C=On(f):(P&=B,P!==0?C=On(P):l||(l=B&~o,l!==0&&(C=On(l))))):(B=f&~A,B!==0?C=On(B):P!==0?C=On(P):l||(l=f&~o,l!==0&&(C=On(l)))),C===0?0:s!==0&&s!==C&&(s&A)===0&&(A=C&-C,l=s&-s,A>=l||A===32&&(l&4194048)!==0)?s:C}function vo(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function ea(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var o=mi;return mi<<=1,(mi&4194048)===0&&(mi=256),o}function ls(){var o=gi;return gi<<=1,(gi&62914560)===0&&(gi=4194304),o}function Bo(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Co(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ta(o,s,l,f,C,A){var P=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var B=o.entanglements,Z=o.expirationTimes,me=o.hiddenUpdates;for(l=P&~l;0<l;){var Te=31-_n(l),Re=1<<Te;B[Te]=0,Z[Te]=-1;var pe=me[Te];if(pe!==null)for(me[Te]=null,Te=0;Te<pe.length;Te++){var ye=pe[Te];ye!==null&&(ye.lane&=-536870913)}l&=~Re}f!==0&&na(o,f,0),A!==0&&C===0&&o.tag!==0&&(o.suspendedLanes|=A&~(P&~s))}function na(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var f=31-_n(s);o.entangledLanes|=s,o.entanglements[f]=o.entanglements[f]|1073741824|l&4194090}function st(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var f=31-_n(l),C=1<<f;C&s|o[f]&s&&(o[f]|=s),l&=~C}}function zo(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Sl(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function nt(){var o=F.p;return o!==0?o:(o=window.event,o===void 0?32:kS(o.type))}function af(o,s){var l=F.p;try{return F.p=o,s()}finally{F.p=l}}var Mn=Math.random().toString(36).slice(2),ke="__reactFiber$"+Mn,Cn="__reactProps$"+Mn,Pn="__reactContainer$"+Mn,ec="__reactEvents$"+Mn,xl="__reactListeners$"+Mn,tc="__reactHandles$"+Mn,us="__reactResources$"+Mn,Fo="__reactMarker$"+Mn;function vi(o){delete o[ke],delete o[Cn],delete o[ec],delete o[xl],delete o[tc]}function lr(o){var s=o[ke];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Pn]||l[ke]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=fS(o);o!==null;){if(l=o[ke])return l;o=fS(o)}return s}o=l,l=o.parentNode}return null}function jr(o){if(o=o[ke]||o[Pn]){var s=o.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return o}return null}function eo(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(r(33))}function br(o){var s=o[us];return s||(s=o[us]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nn(o){o[Fo]=!0}var ds=new Set,ra={};function Er(o,s){Hr(o,s),Hr(o+"Capture",s)}function Hr(o,s){for(ra[o]=s,o=0;o<s.length;o++)ds.add(s[o])}var oa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ci={},Ko={};function ia(o){return Oe.call(Ko,o)?!0:Oe.call(Ci,o)?!1:oa.test(o)?Ko[o]=!0:(Ci[o]=!0,!1)}function Go(o,s,l){if(ia(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var f=s.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function wo(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function ur(o,s,l,f){if(f===null)o.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+f)}}var wi,hs;function Br(o){if(wi===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);wi=s&&s[1]||"",hs=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wi+o+hs}var bi=!1;function _l(o,s){if(!o||bi)return"";bi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(s){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ye){var pe=ye}Reflect.construct(o,[],Re)}else{try{Re.call()}catch(ye){pe=ye}o.call(Re.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(Re=o())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=f.DetermineComponentFrameRoot(),P=A[0],B=A[1];if(P&&B){var Z=P.split(`
`),me=B.split(`
`);for(C=f=0;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;for(;C<me.length&&!me[C].includes("DetermineComponentFrameRoot");)C++;if(f===Z.length||C===me.length)for(f=Z.length-1,C=me.length-1;1<=f&&0<=C&&Z[f]!==me[C];)C--;for(;1<=f&&0<=C;f--,C--)if(Z[f]!==me[C]){if(f!==1||C!==1)do if(f--,C--,0>C||Z[f]!==me[C]){var Te=`
`+Z[f].replace(" at new "," at ");return o.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",o.displayName)),Te}while(1<=f&&0<=C);break}}}finally{bi=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Br(l):""}function Gt(o){switch(o.tag){case 26:case 27:case 5:return Br(o.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 15:return _l(o.type,!1);case 11:return _l(o.type.render,!1);case 1:return _l(o.type,!0);case 31:return Br("Activity");default:return""}}function ed(o){try{var s="";do s+=Gt(o),o=o.return;while(o);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Kn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function bt(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Gn(o){var s=bt(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),f=""+o[s];if(!o.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var C=l.get,A=l.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return C.call(this)},set:function(P){f=""+P,A.call(this,P)}}),Object.defineProperty(o,s,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(P){f=""+P},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function rn(o){o._valueTracker||(o._valueTracker=Gn(o))}function nc(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return o&&(f=bt(o)?o.checked?"true":"false":o.value),o=f,o!==l?(s.setValue(o),!0):!1}function Ei(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var kl=/[\n"\\]/g;function wn(o){return o.replace(kl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function sa(o,s,l,f,C,A,P,B){o.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?o.type=P:o.removeAttribute("type"),s!=null?P==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Kn(s)):o.value!==""+Kn(s)&&(o.value=""+Kn(s)):P!=="submit"&&P!=="reset"||o.removeAttribute("value"),s!=null?rc(o,P,Kn(s)):l!=null?rc(o,P,Kn(l)):f!=null&&o.removeAttribute("value"),C==null&&A!=null&&(o.defaultChecked=!!A),C!=null&&(o.checked=C&&typeof C!="function"&&typeof C!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?o.name=""+Kn(B):o.removeAttribute("name")}function Il(o,s,l,f,C,A,P,B){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.type=A),s!=null||l!=null){if(!(A!=="submit"&&A!=="reset"||s!=null))return;l=l!=null?""+Kn(l):"",s=s!=null?""+Kn(s):l,B||s===o.value||(o.value=s),o.defaultValue=s}f=f??C,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=B?o.checked:!!f,o.defaultChecked=!!f,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(o.name=P)}function rc(o,s,l){s==="number"&&Ei(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function qo(o,s,l,f){if(o=o.options,s){s={};for(var C=0;C<l.length;C++)s["$"+l[C]]=!0;for(l=0;l<o.length;l++)C=s.hasOwnProperty("$"+o[l].value),o[l].selected!==C&&(o[l].selected=C),C&&f&&(o[l].defaultSelected=!0)}else{for(l=""+Kn(l),s=null,C=0;C<o.length;C++){if(o[C].value===l){o[C].selected=!0,f&&(o[C].defaultSelected=!0);return}s!==null||o[C].disabled||(s=o[C])}s!==null&&(s.selected=!0)}}function Rl(o,s,l){if(s!=null&&(s=""+Kn(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Kn(l):""}function oc(o,s,l,f){if(s==null){if(f!=null){if(l!=null)throw Error(r(92));if(J(f)){if(1<f.length)throw Error(r(93));f=f[0]}l=f}l==null&&(l=""),s=l}l=Kn(s),o.defaultValue=l,f=o.textContent,f===l&&f!==""&&f!==null&&(o.value=f)}function aa(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cf(o,s,l){var f=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":f?o.setProperty(s,l):typeof l!="number"||l===0||Et.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function lf(o,s,l){if(s!=null&&typeof s!="object")throw Error(r(62));if(o=o.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||s!=null&&s.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var C in s)f=s[C],s.hasOwnProperty(C)&&l[C]!==f&&cf(o,C,f)}else for(var A in s)s.hasOwnProperty(A)&&cf(o,A,s[A])}function Nl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ol(o){return HC.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var uf=null;function ic(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ai=null,fs=null;function td(o){var s=jr(o);if(s&&(o=s.stateNode)){var l=o[Cn]||null;e:switch(o=s.stateNode,s.type){case"input":if(sa(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==o&&f.form===o.form){var C=f[Cn]||null;if(!C)throw Error(r(90));sa(f,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(s=0;s<l.length;s++)f=l[s],f.form===o.form&&nc(f)}break e;case"textarea":Rl(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&qo(o,!!l.multiple,s,!1)}}}var Ti=!1;function nd(o,s,l){if(Ti)return o(s,l);Ti=!0;try{var f=o(s);return f}finally{if(Ti=!1,(Ai!==null||fs!==null)&&(ih(),Ai&&(s=Ai,o=fs,fs=Ai=null,td(s),o)))for(s=0;s<o.length;s++)td(o[s])}}function ca(o,s){var l=o.stateNode;if(l===null)return null;var f=l[Cn]||null;if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(r(231,s,typeof l));return l}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(Si)try{var q={};Object.defineProperty(q,"passive",{get:function(){qn=!0}}),window.addEventListener("test",q,q),window.removeEventListener("test",q,q)}catch{qn=!1}var ms=null,Ml=null,rd=null;function od(){if(rd)return rd;var o,s=Ml,l=s.length,f,C="value"in ms?ms.value:ms.textContent,A=C.length;for(o=0;o<l&&s[o]===C[o];o++);var P=l-o;for(f=1;f<=P&&s[l-f]===C[A-f];f++);return rd=C.slice(o,1<f?1-f:void 0)}function la(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Pl(){return!0}function Hg(){return!1}function Ar(o){function s(l,f,C,A,P){this._reactName=l,this._targetInst=C,this.type=f,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(l=o[B],this[B]=l?l(A):A[B]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Pl:Hg,this.isPropagationStopped=Hg,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),s}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=Ar(ua),Dl=v({},ua,{view:0,detail:0}),BC=Ar(Dl),df,hf,Ll,Ul=v({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ff,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ll&&(Ll&&o.type==="mousemove"?(df=o.screenX-Ll.screenX,hf=o.screenY-Ll.screenY):hf=df=0,Ll=o),df)},movementY:function(o){return"movementY"in o?o.movementY:hf}}),to=Ar(Ul),sd=v({},Ul,{dataTransfer:0}),sc=Ar(sd),da=v({},Dl,{relatedTarget:0}),ad=Ar(da),zC=v({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),FC=Ar(zC),KC=v({},ua,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),GC=Ar(KC),qC=v({},ua,{data:0}),Bg=Ar(qC),$C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QC(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=YC[o])?!!s[o]:!1}function ff(){return QC}var WC=v({},Dl,{key:function(o){if(o.key){var s=$C[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=la(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?VC[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ff,charCode:function(o){return o.type==="keypress"?la(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?la(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),XC=Ar(WC),JC=v({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zg=Ar(JC),ZC=v({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ff}),ew=Ar(ZC),tw=v({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=Ar(tw),rw=v({},Ul,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ow=Ar(rw),iw=v({},ua,{newState:0,oldState:0}),sw=Ar(iw),aw=[9,13,27,32],mf=Si&&"CompositionEvent"in window,jl=null;Si&&"documentMode"in document&&(jl=document.documentMode);var cw=Si&&"TextEvent"in window&&!jl,Fg=Si&&(!mf||jl&&8<jl&&11>=jl),gf=" ",pf=!1;function yf(o,s){switch(o){case"keyup":return aw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ac=!1;function lw(o,s){switch(o){case"compositionend":return Kg(s);case"keypress":return s.which!==32?null:(pf=!0,gf);case"textInput":return o=s.data,o===gf&&pf?null:o;default:return null}}function uw(o,s){if(ac)return o==="compositionend"||!mf&&yf(o,s)?(o=od(),rd=Ml=ms=null,ac=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Fg&&s.locale!=="ko"?null:s.data;default:return null}}var dw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!dw[o.type]:s==="textarea"}function Hl(o,s,l,f){Ai?fs?fs.push(f):fs=[f]:Ai=f,s=Hp(s,"onChange"),0<s.length&&(l=new id("onChange","change",null,l,f),o.push({event:l,listeners:s}))}var gs=null,ha=null;function hw(o){rS(o,0)}function cd(o){var s=eo(o);if(nc(s))return o}function Bl(o,s){if(o==="change")return s}var ld=!1;if(Si){var vf;if(Si){var Cf="oninput"in document;if(!Cf){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),Cf=typeof ud.oninput=="function"}vf=Cf}else vf=!1;ld=vf&&(!document.documentMode||9<document.documentMode)}function dd(){gs&&(gs.detachEvent("onpropertychange",hd),ha=gs=null)}function hd(o){if(o.propertyName==="value"&&cd(ha)){var s=[];Hl(s,ha,o,ic(o)),nd(hw,s)}}function fw(o,s,l){o==="focusin"?(dd(),gs=s,ha=l,gs.attachEvent("onpropertychange",hd)):o==="focusout"&&dd()}function mw(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return cd(ha)}function gw(o,s){if(o==="click")return cd(s)}function fd(o,s){if(o==="input"||o==="change")return cd(s)}function md(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var $n=typeof Object.is=="function"?Object.is:md;function cc(o,s){if($n(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var C=l[f];if(!Oe.call(s,C)||!$n(o[C],s[C]))return!1}return!0}function gd(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function pd(o,s){var l=gd(o);o=0;for(var f;l;){if(l.nodeType===3){if(f=o+l.textContent.length,o<=s&&f>=s)return{node:l,offset:s-o};o=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gd(l)}}function yd(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?yd(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function vd(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Ei(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Ei(o.document)}return s}function wf(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var qg=Si&&"documentMode"in document&&11>=document.documentMode,lc=null,Cd=null,zl=null,bf=!1;function $g(o,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bf||lc==null||lc!==Ei(f)||(f=lc,"selectionStart"in f&&wf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),zl&&cc(zl,f)||(zl=f,f=Hp(Cd,"onSelect"),0<f.length&&(s=new id("onSelect","select",null,s,l),o.push({event:s,listeners:f}),s.target=lc)))}function ps(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var fa={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},wd={},Ef={};Si&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function xi(o){if(wd[o])return wd[o];if(!fa[o])return o;var s=fa[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ef)return wd[o]=s[l];return o}var Af=xi("animationend"),_i=xi("animationiteration"),bd=xi("animationstart"),Tf=xi("transitionrun"),Vg=xi("transitionstart"),Yg=xi("transitioncancel"),Sf=xi("transitionend"),Qg=new Map,uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uc.push("scrollEnd");function bo(o,s){Qg.set(o,s),Er(s,[o])}var Wg=new WeakMap;function un(o,s){if(typeof o=="object"&&o!==null){var l=Wg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:ed(s)},Wg.set(o,s),s)}return{value:o,source:s,stack:ed(s)}}var no=[],dc=0,xf=0;function Vn(){for(var o=dc,s=xf=dc=0;s<o;){var l=no[s];no[s++]=null;var f=no[s];no[s++]=null;var C=no[s];no[s++]=null;var A=no[s];if(no[s++]=null,f!==null&&C!==null){var P=f.pending;P===null?C.next=C:(C.next=P.next,P.next=C),f.pending=C}A!==0&&_f(l,C,A)}}function Ae(o,s,l,f){no[dc++]=o,no[dc++]=s,no[dc++]=l,no[dc++]=f,xf|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function hc(o,s,l,f){return Ae(o,s,l,f),ro(o)}function bn(o,s){return Ae(o,null,null,s),ro(o)}function _f(o,s,l){o.lanes|=l;var f=o.alternate;f!==null&&(f.lanes|=l);for(var C=!1,A=o.return;A!==null;)A.childLanes|=l,f=A.alternate,f!==null&&(f.childLanes|=l),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(C=!0)),o=A,A=A.return;return o.tag===3?(A=o.stateNode,C&&s!==null&&(C=31-_n(l),o=A.hiddenUpdates,f=o[C],f===null?o[C]=[s]:f.push(s),s.lane=l|536870912),A):null}function ro(o){if(50<wu)throw wu=0,lm=null,Error(r(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var $o={};function pw(o,s,l,f){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(o,s,l,f){return new pw(o,s,l,f)}function fc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function oo(o,s){var l=o.alternate;return l===null?(l=Tr(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function kf(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function mc(o,s,l,f,C,A){var P=0;if(f=o,typeof o=="function")fc(o)&&(P=1);else if(typeof o=="string")P=V1(o,l,ge.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ee:return o=Tr(31,l,s,C),o.elementType=ee,o.lanes=A,o;case I:return ys(l.children,C,A,s);case k:P=8,C|=24;break;case N:return o=Tr(12,l,s,C|2),o.elementType=N,o.lanes=A,o;case H:return o=Tr(13,l,s,C),o.elementType=H,o.lanes=A,o;case V:return o=Tr(19,l,s,C),o.elementType=V,o.lanes=A,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:case O:P=10;break e;case j:P=9;break e;case U:P=11;break e;case Q:P=14;break e;case Y:P=16,f=null;break e}P=29,l=Error(r(130,o===null?"null":typeof o,"")),f=null}return s=Tr(P,l,s,C),s.elementType=o,s.type=f,s.lanes=A,s}function ys(o,s,l,f){return o=Tr(7,o,f,s),o.lanes=l,o}function If(o,s,l){return o=Tr(6,o,null,s),o.lanes=l,o}function Ed(o,s,l){return s=Tr(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var gc=[],pc=0,Ad=null,Td=0,io=[],zr=0,Vo=null,Eo=1,Yo="";function dn(o,s){gc[pc++]=Td,gc[pc++]=Ad,Ad=o,Td=s}function Xg(o,s,l){io[zr++]=Eo,io[zr++]=Yo,io[zr++]=Vo,Vo=o;var f=Eo;o=Yo;var C=32-_n(f)-1;f&=~(1<<C),l+=1;var A=32-_n(s)+C;if(30<A){var P=C-C%5;A=(f&(1<<P)-1).toString(32),f>>=P,C-=P,Eo=1<<32-_n(s)+C|l<<C|f,Yo=A+o}else Eo=1<<A|l<<C|f,Yo=o}function Sd(o){o.return!==null&&(dn(o,1),Xg(o,1,0))}function xd(o){for(;o===Ad;)Ad=gc[--pc],gc[pc]=null,Td=gc[--pc],gc[pc]=null;for(;o===Vo;)Vo=io[--zr],io[zr]=null,Yo=io[--zr],io[zr]=null,Eo=io[--zr],io[zr]=null}var er=null,kt=null,vt=!1,tr=null,Fr=!1,ma=Error(r(519));function ki(o){var s=Error(r(418,""));throw vs(un(s,o)),ma}function Rf(o){var s=o.stateNode,l=o.type,f=o.memoizedProps;switch(s[ke]=o,s[Cn]=f,l){case"dialog":pt("cancel",s),pt("close",s);break;case"iframe":case"object":case"embed":pt("load",s);break;case"video":case"audio":for(l=0;l<pm.length;l++)pt(pm[l],s);break;case"source":pt("error",s);break;case"img":case"image":case"link":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"input":pt("invalid",s),Il(s,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),rn(s);break;case"select":pt("invalid",s);break;case"textarea":pt("invalid",s),oc(s,f.value,f.defaultValue,f.children),rn(s)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||f.suppressHydrationWarning===!0||aS(s.textContent,l)?(f.popover!=null&&(pt("beforetoggle",s),pt("toggle",s)),f.onScroll!=null&&pt("scroll",s),f.onScrollEnd!=null&&pt("scrollend",s),f.onClick!=null&&(s.onclick=Bp),s=!0):s=!1,s||ki(o)}function Sr(o){for(er=o.return;er;)switch(er.tag){case 5:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:er=er.return}}function Ao(o){if(o!==er)return!1;if(!vt)return Sr(o),vt=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Dw(o.type,o.memoizedProps)),l=!l),l&&kt&&ki(o),Sr(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(s===0){kt=Vi(o.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;o=o.nextSibling}kt=null}}else s===27?(s=kt,Qc(o.type)?(o=Hw,Hw=null,kt=o):kt=s):kt=er?Vi(o.stateNode.nextSibling):null;return!0}function Ii(){kt=er=null,vt=!1}function Fl(){var o=tr;return o!==null&&(sr===null?sr=o:sr.push.apply(sr,o),tr=null),o}function vs(o){tr===null?tr=[o]:tr.push(o)}var _d=W(null),Cs=null,Qo=null;function xr(o,s,l){de(_d,s._currentValue),s._currentValue=l}function Ri(o){o._currentValue=_d.current,ue(_d)}function kd(o,s,l){for(;o!==null;){var f=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),o===l)break;o=o.return}}function Nf(o,s,l,f){var C=o.child;for(C!==null&&(C.return=o);C!==null;){var A=C.dependencies;if(A!==null){var P=C.child;A=A.firstContext;e:for(;A!==null;){var B=A;A=C;for(var Z=0;Z<s.length;Z++)if(B.context===s[Z]){A.lanes|=l,B=A.alternate,B!==null&&(B.lanes|=l),kd(A.return,l,o),f||(P=null);break e}A=B.next}}else if(C.tag===18){if(P=C.return,P===null)throw Error(r(341));P.lanes|=l,A=P.alternate,A!==null&&(A.lanes|=l),kd(P,l,o),P=null}else P=C.child;if(P!==null)P.return=C;else for(P=C;P!==null;){if(P===o){P=null;break}if(C=P.sibling,C!==null){C.return=P.return,P=C;break}P=P.return}C=P}}function ws(o,s,l,f){o=null;for(var C=s,A=!1;C!==null;){if(!A){if((C.flags&524288)!==0)A=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var P=C.alternate;if(P===null)throw Error(r(387));if(P=P.memoizedProps,P!==null){var B=C.type;$n(C.pendingProps.value,P.value)||(o!==null?o.push(B):o=[B])}}else if(C===le.current){if(P=C.alternate,P===null)throw Error(r(387));P.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(o!==null?o.push(Em):o=[Em])}C=C.return}o!==null&&Nf(s,o,l,f),s.flags|=262144}function Id(o){for(o=o.firstContext;o!==null;){if(!$n(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function kn(o){Cs=o,Qo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Yn(o){return pa(Cs,o)}function ga(o,s){return Cs===null&&kn(o),pa(o,s)}function pa(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Qo===null){if(o===null)throw Error(r(308));Qo=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Qo=Qo.next=s;return l}var yw=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,f){o.push(f)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},ya=t.unstable_scheduleCallback,vw=t.unstable_NormalPriority,Xt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kl(){return{controller:new yw,data:new Map,refCount:0}}function yc(o){o.refCount--,o.refCount===0&&ya(vw,function(){o.controller.abort()})}var vc=null,Of=0,Cc=0,wc=null;function Cw(o,s){if(vc===null){var l=vc=[];Of=0,Cc=Ut(),wc={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Of++,s.then(Jg,Jg),s}function Jg(){if(--Of===0&&vc!==null){wc!==null&&(wc.status="fulfilled");var o=vc;vc=null,Cc=0,wc=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function Mf(o,s){var l=[],f={status:"pending",value:null,reason:null,then:function(C){l.push(C)}};return o.then(function(){f.status="fulfilled",f.value=s;for(var C=0;C<l.length;C++)(0,l[C])(s)},function(C){for(f.status="rejected",f.reason=C,C=0;C<l.length;C++)(0,l[C])(void 0)}),f}var Zg=D.S;D.S=function(o,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Cw(o,s),Zg!==null&&Zg(o,s)};var bs=W(null);function Pf(){var o=bs.current;return o!==null?o:$t.pooledCache}function Rd(o,s){s===null?de(bs,bs.current):de(bs,s.pool)}function ep(){var o=Pf();return o===null?null:{parent:Xt._currentValue,pool:o}}var Gl=Error(r(460)),Df=Error(r(474)),ql=Error(r(542)),Lf={then:function(){}};function tp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Es(){}function Uf(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(Es,Es),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Nd(o),o;default:if(typeof s.status=="string")s.then(Es,Es);else{if(o=$t,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=s,o.status="pending",o.then(function(f){if(s.status==="pending"){var C=s;C.status="fulfilled",C.value=f}},function(f){if(s.status==="pending"){var C=s;C.status="rejected",C.reason=f}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Nd(o),o}throw bc=s,Gl}}var bc=null;function np(){if(bc===null)throw Error(r(459));var o=bc;return bc=null,o}function Nd(o){if(o===Gl||o===ql)throw Error(r(483))}var Ni=!1;function $l(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function As(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ts(o,s,l){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Dt&2)!==0){var C=f.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),f.pending=s,s=ro(o),_f(o,null,l),s}return Ae(o,f,s,l),ro(o)}function Vl(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,st(o,l)}}function Yl(o,s){var l=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var C=null,A=null;if(l=l.firstBaseUpdate,l!==null){do{var P={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};A===null?C=A=P:A=A.next=P,l=l.next}while(l!==null);A===null?C=A=s:A=A.next=s}else C=A=s;l={baseState:f.baseState,firstBaseUpdate:C,lastBaseUpdate:A,shared:f.shared,callbacks:f.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Hf=!1;function Ql(){if(Hf){var o=wc;if(o!==null)throw o}}function Wo(o,s,l,f){Hf=!1;var C=o.updateQueue;Ni=!1;var A=C.firstBaseUpdate,P=C.lastBaseUpdate,B=C.shared.pending;if(B!==null){C.shared.pending=null;var Z=B,me=Z.next;Z.next=null,P===null?A=me:P.next=me,P=Z;var Te=o.alternate;Te!==null&&(Te=Te.updateQueue,B=Te.lastBaseUpdate,B!==P&&(B===null?Te.firstBaseUpdate=me:B.next=me,Te.lastBaseUpdate=Z))}if(A!==null){var Re=C.baseState;P=0,Te=me=Z=null,B=A;do{var pe=B.lane&-536870913,ye=pe!==B.lane;if(ye?(Ct&pe)===pe:(f&pe)===pe){pe!==0&&pe===Cc&&(Hf=!0),Te!==null&&(Te=Te.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var it=o,tt=B;pe=s;var Yt=l;switch(tt.tag){case 1:if(it=tt.payload,typeof it=="function"){Re=it.call(Yt,Re,pe);break e}Re=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=tt.payload,pe=typeof it=="function"?it.call(Yt,Re,pe):it,pe==null)break e;Re=v({},Re,pe);break e;case 2:Ni=!0}}pe=B.callback,pe!==null&&(o.flags|=64,ye&&(o.flags|=8192),ye=C.callbacks,ye===null?C.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Te===null?(me=Te=ye,Z=Re):Te=Te.next=ye,P|=pe;if(B=B.next,B===null){if(B=C.shared.pending,B===null)break;ye=B,B=ye.next,ye.next=null,C.lastBaseUpdate=ye,C.shared.pending=null}}while(!0);Te===null&&(Z=Re),C.baseState=Z,C.firstBaseUpdate=me,C.lastBaseUpdate=Te,A===null&&(C.shared.lanes=0),ai|=P,o.lanes=P,o.memoizedState=Re}}function Wl(o,s){if(typeof o!="function")throw Error(r(191,o));o.call(s)}function Od(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)Wl(l[o],s)}var To=W(null),Xo=W(0);function Ec(o,s){o=ho,de(Xo,o),de(To,s),ho=o|s.baseLanes}function Ss(){de(Xo,ho),de(To,To.current)}function va(){ho=Xo.current,ue(To),ue(Xo)}var so=0,at=null,St=null,on=null,xs=!1,Kr=!1,Jo=!1,_s=0,Oi=0,Zo=null,Xl=0;function sn(){throw Error(r(321))}function Mi(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!$n(o[l],s[l]))return!1;return!0}function Ca(o,s,l,f,C,A){return so=A,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,D.H=o===null||o.memoizedState===null?Bd:lp,Jo=!1,A=l(f,C),Jo=!1,Kr&&(A=Ac(s,l,f,C)),Jl(o),A}function Jl(o){D.H=iu;var s=St!==null&&St.next!==null;if(so=0,on=St=at=null,xs=!1,Oi=0,Zo=null,s)throw Error(r(300));o===null||Dn||(o=o.dependencies,o!==null&&Id(o)&&(Dn=!0))}function Ac(o,s,l,f){at=o;var C=0;do{if(Kr&&(Zo=null),Oi=0,Kr=!1,25<=C)throw Error(r(301));if(C+=1,on=St=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}D.H=ww,A=s(l,f)}while(Kr);return A}function Zl(){var o=D.H,s=o.useState()[0];return s=typeof s.then=="function"?Di(s):s,o=o.useState()[0],(St!==null?St.memoizedState:null)!==o&&(at.flags|=1024),s}function Tc(){var o=_s!==0;return _s=0,o}function Sc(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function Pi(o){if(xs){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}xs=!1}so=0,on=St=at=null,Kr=!1,Oi=_s=0,Zo=null}function hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?at.memoizedState=on=o:on=on.next=o,on}function qt(){if(St===null){var o=at.alternate;o=o!==null?o.memoizedState:null}else o=St.next;var s=on===null?at.memoizedState:on.next;if(s!==null)on=s,St=o;else{if(o===null)throw at.alternate===null?Error(r(467)):Error(r(310));St=o,o={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},on===null?at.memoizedState=on=o:on=on.next=o}return on}function wa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Di(o){var s=Oi;return Oi+=1,Zo===null&&(Zo=[]),o=Uf(Zo,o,s),s=at,(on===null?s.memoizedState:on.next)===null&&(s=s.alternate,D.H=s===null||s.memoizedState===null?Bd:lp),o}function Li(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Di(o);if(o.$$typeof===O)return Yn(o)}throw Error(r(438,String(o)))}function ba(o){var s=null,l=at.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var f=at.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(s={data:f.data.map(function(C){return C.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=wa(),at.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),f=0;f<o;f++)l[f]=se;return s.index++,l}function _r(o,s){return typeof s=="function"?s(o):s}function ks(o){var s=qt();return Ea(s,St,o)}function Ea(o,s,l){var f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var C=o.baseQueue,A=f.pending;if(A!==null){if(C!==null){var P=C.next;C.next=A.next,A.next=P}s.baseQueue=C=A,f.pending=null}if(A=o.baseState,C===null)o.memoizedState=A;else{s=C.next;var B=P=null,Z=null,me=s,Te=!1;do{var Re=me.lane&-536870913;if(Re!==me.lane?(Ct&Re)===Re:(so&Re)===Re){var pe=me.revertLane;if(pe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Re===Cc&&(Te=!0);else if((so&pe)===pe){me=me.next,pe===Cc&&(Te=!0);continue}else Re={lane:0,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Z===null?(B=Z=Re,P=A):Z=Z.next=Re,at.lanes|=pe,ai|=pe;Re=me.action,Jo&&l(A,Re),A=me.hasEagerState?me.eagerState:l(A,Re)}else pe={lane:Re,revertLane:me.revertLane,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},Z===null?(B=Z=pe,P=A):Z=Z.next=pe,at.lanes|=Re,ai|=Re;me=me.next}while(me!==null&&me!==s);if(Z===null?P=A:Z.next=B,!$n(A,o.memoizedState)&&(Dn=!0,Te&&(l=wc,l!==null)))throw l;o.memoizedState=A,o.baseState=P,o.baseQueue=Z,f.lastRenderedState=A}return C===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function Aa(o){var s=qt(),l=s.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var f=l.dispatch,C=l.pending,A=s.memoizedState;if(C!==null){l.pending=null;var P=C=C.next;do A=o(A,P.action),P=P.next;while(P!==C);$n(A,s.memoizedState)||(Dn=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),l.lastRenderedState=A}return[A,f]}function Ta(o,s,l){var f=at,C=qt(),A=vt;if(A){if(l===void 0)throw Error(r(407));l=l()}else l=s();var P=!$n((St||C).memoizedState,l);P&&(C.memoizedState=l,Dn=!0),C=C.queue;var B=kc.bind(null,f,C,o);if(ao(2048,8,B,[o]),C.getSnapshot!==s||P||on!==null&&on.memoizedState.tag&1){if(f.flags|=2048,Qn(9,Is(),_c.bind(null,f,C,l,s),null),$t===null)throw Error(r(349));A||(so&124)!==0||xc(f,s,l)}return l}function xc(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=at.updateQueue,s===null?(s=wa(),at.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function _c(o,s,l,f){s.value=l,s.getSnapshot=f,Sa(s)&&Ui(o)}function kc(o,s,l){return l(function(){Sa(s)&&Ui(o)})}function Sa(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!$n(o,l)}catch{return!0}}function Ui(o){var s=bn(o,2);s!==null&&Pr(s,o,2)}function xa(o){var s=hn();if(typeof o=="function"){var l=o;if(o=l(),Jo){Fn(!0);try{l()}finally{Fn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:o},s}function Ic(o,s,l,f){return o.baseState=l,Ea(o,St,typeof f=="function"?f:_r)}function eu(o,s,l,f,C){if(ou(o))throw Error(r(485));if(o=s.action,o!==null){var A={payload:C,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){A.listeners.push(P)}};D.T!==null?l(!0):A.isTransition=!1,f(A),l=s.pending,l===null?(A.next=s.pending=A,Md(s,A)):(A.next=l.next,s.pending=l.next=A)}}function Md(o,s){var l=s.action,f=s.payload,C=o.state;if(s.isTransition){var A=D.T,P={};D.T=P;try{var B=l(C,f),Z=D.S;Z!==null&&Z(P,B),Pd(o,s,B)}catch(me){_a(o,s,me)}finally{D.T=A}}else try{A=l(C,f),Pd(o,s,A)}catch(me){_a(o,s,me)}}function Pd(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){Rc(o,s,f)},function(f){return _a(o,s,f)}):Rc(o,s,l)}function Rc(o,s,l){s.status="fulfilled",s.value=l,rp(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,Md(o,l)))}function _a(o,s,l){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do s.status="rejected",s.reason=l,rp(s),s=s.next;while(s!==f)}o.action=null}function rp(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function ei(o,s){return s}function ot(o,s){if(vt){var l=$t.formState;if(l!==null){e:{var f=at;if(vt){if(kt){t:{for(var C=kt,A=Fr;C.nodeType!==8;){if(!A){C=null;break t}if(C=Vi(C.nextSibling),C===null){C=null;break t}}A=C.data,C=A==="F!"||A==="F"?C:null}if(C){kt=Vi(C.nextSibling),f=C.data==="F!";break e}}ki(f)}f=!1}f&&(s=l[0])}}return l=hn(),l.memoizedState=l.baseState=s,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:s},l.queue=f,l=jd.bind(null,at,f),f.dispatch=l,f=xa(!1),A=Gf.bind(null,at,!1,f.queue),f=hn(),C={state:s,dispatch:null,action:o,pending:null},f.queue=C,l=eu.bind(null,at,C,A,l),C.dispatch=l,f.memoizedState=o,[s,l,!1]}function op(o){var s=qt();return ka(s,St,o)}function ka(o,s,l){if(s=Ea(o,s,ei)[0],o=ks(_r)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var f=Di(s)}catch(P){throw P===Gl?ql:P}else f=s;s=qt();var C=s.queue,A=C.dispatch;return l!==s.memoizedState&&(at.flags|=2048,Qn(9,Is(),Be.bind(null,C,l),null)),[f,A,o]}function Be(o,s){o.action=s}function nr(o){var s=qt(),l=St;if(l!==null)return ka(s,l,o);qt(),s=s.memoizedState,l=qt();var f=l.queue.dispatch;return l.memoizedState=o,[s,f,!1]}function Qn(o,s,l,f){return o={tag:o,create:l,deps:f,inst:s,next:null},s=at.updateQueue,s===null&&(s=wa(),at.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(f=l.next,l.next=o,o.next=f,s.lastEffect=o),o}function Is(){return{destroy:void 0,resource:void 0}}function fn(){return qt().memoizedState}function tu(o,s,l,f){var C=hn();f=f===void 0?null:f,at.flags|=o,C.memoizedState=Qn(1|s,Is(),l,f)}function ao(o,s,l,f){var C=qt();f=f===void 0?null:f;var A=C.memoizedState.inst;St!==null&&f!==null&&Mi(f,St.memoizedState.deps)?C.memoizedState=Qn(s,A,l,f):(at.flags|=o,C.memoizedState=Qn(1|s,A,l,f))}function En(o,s){tu(8390656,8,o,s)}function nu(o,s){ao(2048,8,o,s)}function Rt(o,s){return ao(4,2,o,s)}function rr(o,s){return ao(4,4,o,s)}function Dd(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function Bf(o,s,l){l=l!=null?l.concat([o]):null,ao(4,4,Dd.bind(null,s,o),l)}function zf(){}function Ld(o,s){var l=qt();s=s===void 0?null:s;var f=l.memoizedState;return s!==null&&Mi(s,f[1])?f[0]:(l.memoizedState=[o,s],o)}function ip(o,s){var l=qt();s=s===void 0?null:s;var f=l.memoizedState;if(s!==null&&Mi(s,f[1]))return f[0];if(f=o(),Jo){Fn(!0);try{o()}finally{Fn(!1)}}return l.memoizedState=[f,s],f}function Ff(o,s,l){return l===void 0||(so&1073741824)!==0?o.memoizedState=s:(o.memoizedState=l,o=kp(),at.lanes|=o,ai|=o,l)}function An(o,s,l,f){return $n(l,s)?l:To.current!==null?(o=Ff(o,l,f),$n(o,s)||(Dn=!0),o):(so&42)===0?(Dn=!0,o.memoizedState=l):(o=kp(),at.lanes|=o,ai|=o,s)}function sp(o,s,l,f,C){var A=F.p;F.p=A!==0&&8>A?A:8;var P=D.T,B={};D.T=B,Gf(o,!1,s,l);try{var Z=C(),me=D.S;if(me!==null&&me(B,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Te=Mf(Z,f);ru(o,s,Te,Yr(o))}else ru(o,s,f,Yr(o))}catch(Re){ru(o,s,{then:function(){},status:"rejected",reason:Re},Yr())}finally{F.p=A,D.T=P}}function Ud(){}function ti(o,s,l,f){if(o.tag!==5)throw Error(r(476));var C=Nc(o).queue;sp(o,C,s,$,l===null?Ud:function(){return Kf(o),l(f)})}function Nc(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:$},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_r,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function Kf(o){var s=Nc(o).next.queue;ru(o,s,{},Yr())}function Gr(){return Yn(Em)}function ji(){return qt().memoizedState}function ap(){return qt().memoizedState}function Oc(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Yr();o=As(l);var f=Ts(s,o,l);f!==null&&(Pr(f,s,l),Vl(f,s,l)),s={cache:Kl()},o.payload=s;return}s=s.return}}function cp(o,s,l){var f=Yr();l={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ou(o)?qf(s,l):(l=hc(o,s,l,f),l!==null&&(Pr(l,o,f),Hd(l,s,f)))}function jd(o,s,l){var f=Yr();ru(o,s,l,f)}function ru(o,s,l,f){var C={lane:f,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ou(o))qf(s,C);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var P=s.lastRenderedState,B=A(P,l);if(C.hasEagerState=!0,C.eagerState=B,$n(B,P))return Ae(o,s,C,0),$t===null&&Vn(),!1}catch{}finally{}if(l=hc(o,s,C,f),l!==null)return Pr(l,o,f),Hd(l,s,f),!0}return!1}function Gf(o,s,l,f){if(f={lane:2,revertLane:Ut(),action:f,hasEagerState:!1,eagerState:null,next:null},ou(o)){if(s)throw Error(r(479))}else s=hc(o,l,f,2),s!==null&&Pr(s,o,2)}function ou(o){var s=o.alternate;return o===at||s!==null&&s===at}function qf(o,s){Kr=xs=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function Hd(o,s,l){if((l&4194048)!==0){var f=s.lanes;f&=o.pendingLanes,l|=f,s.lanes=l,st(o,l)}}var iu={readContext:Yn,use:Li,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn},Bd={readContext:Yn,use:Li,useCallback:function(o,s){return hn().memoizedState=[o,s===void 0?null:s],o},useContext:Yn,useEffect:En,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,tu(4194308,4,Dd.bind(null,s,o),l)},useLayoutEffect:function(o,s){return tu(4194308,4,o,s)},useInsertionEffect:function(o,s){tu(4,2,o,s)},useMemo:function(o,s){var l=hn();s=s===void 0?null:s;var f=o();if(Jo){Fn(!0);try{o()}finally{Fn(!1)}}return l.memoizedState=[f,s],f},useReducer:function(o,s,l){var f=hn();if(l!==void 0){var C=l(s);if(Jo){Fn(!0);try{l(s)}finally{Fn(!1)}}}else C=s;return f.memoizedState=f.baseState=C,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:C},f.queue=o,o=o.dispatch=cp.bind(null,at,o),[f.memoizedState,o]},useRef:function(o){var s=hn();return o={current:o},s.memoizedState=o},useState:function(o){o=xa(o);var s=o.queue,l=jd.bind(null,at,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:zf,useDeferredValue:function(o,s){var l=hn();return Ff(l,o,s)},useTransition:function(){var o=xa(!1);return o=sp.bind(null,at,o.queue,!0,!1),hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var f=at,C=hn();if(vt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=s(),$t===null)throw Error(r(349));(Ct&124)!==0||xc(f,s,l)}C.memoizedState=l;var A={value:l,getSnapshot:s};return C.queue=A,En(kc.bind(null,f,A,o),[o]),f.flags|=2048,Qn(9,Is(),_c.bind(null,f,A,l,s),null),l},useId:function(){var o=hn(),s=$t.identifierPrefix;if(vt){var l=Yo,f=Eo;l=(f&~(1<<32-_n(f)-1)).toString(32)+l,s="«"+s+"R"+l,l=_s++,0<l&&(s+="H"+l.toString(32)),s+="»"}else l=Xl++,s="«"+s+"r"+l.toString(32)+"»";return o.memoizedState=s},useHostTransitionStatus:Gr,useFormState:ot,useActionState:ot,useOptimistic:function(o){var s=hn();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Gf.bind(null,at,!0,l),l.dispatch=s,[o,s]},useMemoCache:ba,useCacheRefresh:function(){return hn().memoizedState=Oc.bind(null,at)}},lp={readContext:Yn,use:Li,useCallback:Ld,useContext:Yn,useEffect:nu,useImperativeHandle:Bf,useInsertionEffect:Rt,useLayoutEffect:rr,useMemo:ip,useReducer:ks,useRef:fn,useState:function(){return ks(_r)},useDebugValue:zf,useDeferredValue:function(o,s){var l=qt();return An(l,St.memoizedState,o,s)},useTransition:function(){var o=ks(_r)[0],s=qt().memoizedState;return[typeof o=="boolean"?o:Di(o),s]},useSyncExternalStore:Ta,useId:ji,useHostTransitionStatus:Gr,useFormState:op,useActionState:op,useOptimistic:function(o,s){var l=qt();return Ic(l,St,o,s)},useMemoCache:ba,useCacheRefresh:ap},ww={readContext:Yn,use:Li,useCallback:Ld,useContext:Yn,useEffect:nu,useImperativeHandle:Bf,useInsertionEffect:Rt,useLayoutEffect:rr,useMemo:ip,useReducer:Aa,useRef:fn,useState:function(){return Aa(_r)},useDebugValue:zf,useDeferredValue:function(o,s){var l=qt();return St===null?Ff(l,o,s):An(l,St.memoizedState,o,s)},useTransition:function(){var o=Aa(_r)[0],s=qt().memoizedState;return[typeof o=="boolean"?o:Di(o),s]},useSyncExternalStore:Ta,useId:ji,useHostTransitionStatus:Gr,useFormState:nr,useActionState:nr,useOptimistic:function(o,s){var l=qt();return St!==null?Ic(l,St,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:ba,useCacheRefresh:ap},Rs=null,su=0;function au(o){var s=su;return su+=1,Rs===null&&(Rs=[]),Uf(Rs,o,s)}function cu(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Mc(o,s){throw s.$$typeof===b?Error(r(525)):(o=Object.prototype.toString.call(s),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function or(o){var s=o._init;return s(o._payload)}function up(o){function s(ae,oe){if(o){var he=ae.deletions;he===null?(ae.deletions=[oe],ae.flags|=16):he.push(oe)}}function l(ae,oe){if(!o)return null;for(;oe!==null;)s(ae,oe),oe=oe.sibling;return null}function f(ae){for(var oe=new Map;ae!==null;)ae.key!==null?oe.set(ae.key,ae):oe.set(ae.index,ae),ae=ae.sibling;return oe}function C(ae,oe){return ae=oo(ae,oe),ae.index=0,ae.sibling=null,ae}function A(ae,oe,he){return ae.index=he,o?(he=ae.alternate,he!==null?(he=he.index,he<oe?(ae.flags|=67108866,oe):he):(ae.flags|=67108866,oe)):(ae.flags|=1048576,oe)}function P(ae){return o&&ae.alternate===null&&(ae.flags|=67108866),ae}function B(ae,oe,he,xe){return oe===null||oe.tag!==6?(oe=If(he,ae.mode,xe),oe.return=ae,oe):(oe=C(oe,he),oe.return=ae,oe)}function Z(ae,oe,he,xe){var qe=he.type;return qe===I?Te(ae,oe,he.props.children,xe,he.key):oe!==null&&(oe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&or(qe)===oe.type)?(oe=C(oe,he.props),cu(oe,he),oe.return=ae,oe):(oe=mc(he.type,he.key,he.props,null,ae.mode,xe),cu(oe,he),oe.return=ae,oe)}function me(ae,oe,he,xe){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==he.containerInfo||oe.stateNode.implementation!==he.implementation?(oe=Ed(he,ae.mode,xe),oe.return=ae,oe):(oe=C(oe,he.children||[]),oe.return=ae,oe)}function Te(ae,oe,he,xe,qe){return oe===null||oe.tag!==7?(oe=ys(he,ae.mode,xe,qe),oe.return=ae,oe):(oe=C(oe,he),oe.return=ae,oe)}function Re(ae,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=If(""+oe,ae.mode,he),oe.return=ae,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case E:return he=mc(oe.type,oe.key,oe.props,null,ae.mode,he),cu(he,oe),he.return=ae,he;case x:return oe=Ed(oe,ae.mode,he),oe.return=ae,oe;case Y:var xe=oe._init;return oe=xe(oe._payload),Re(ae,oe,he)}if(J(oe)||te(oe))return oe=ys(oe,ae.mode,he,null),oe.return=ae,oe;if(typeof oe.then=="function")return Re(ae,au(oe),he);if(oe.$$typeof===O)return Re(ae,ga(ae,oe),he);Mc(ae,oe)}return null}function pe(ae,oe,he,xe){var qe=oe!==null?oe.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return qe!==null?null:B(ae,oe,""+he,xe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case E:return he.key===qe?Z(ae,oe,he,xe):null;case x:return he.key===qe?me(ae,oe,he,xe):null;case Y:return qe=he._init,he=qe(he._payload),pe(ae,oe,he,xe)}if(J(he)||te(he))return qe!==null?null:Te(ae,oe,he,xe,null);if(typeof he.then=="function")return pe(ae,oe,au(he),xe);if(he.$$typeof===O)return pe(ae,oe,ga(ae,he),xe);Mc(ae,he)}return null}function ye(ae,oe,he,xe,qe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ae=ae.get(he)||null,B(oe,ae,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case E:return ae=ae.get(xe.key===null?he:xe.key)||null,Z(oe,ae,xe,qe);case x:return ae=ae.get(xe.key===null?he:xe.key)||null,me(oe,ae,xe,qe);case Y:var mt=xe._init;return xe=mt(xe._payload),ye(ae,oe,he,xe,qe)}if(J(xe)||te(xe))return ae=ae.get(he)||null,Te(oe,ae,xe,qe,null);if(typeof xe.then=="function")return ye(ae,oe,he,au(xe),qe);if(xe.$$typeof===O)return ye(ae,oe,he,ga(oe,xe),qe);Mc(oe,xe)}return null}function it(ae,oe,he,xe){for(var qe=null,mt=null,Xe=oe,rt=oe=0,ar=null;Xe!==null&&rt<he.length;rt++){Xe.index>rt?(ar=Xe,Xe=null):ar=Xe.sibling;var Nt=pe(ae,Xe,he[rt],xe);if(Nt===null){Xe===null&&(Xe=ar);break}o&&Xe&&Nt.alternate===null&&s(ae,Xe),oe=A(Nt,oe,rt),mt===null?qe=Nt:mt.sibling=Nt,mt=Nt,Xe=ar}if(rt===he.length)return l(ae,Xe),vt&&dn(ae,rt),qe;if(Xe===null){for(;rt<he.length;rt++)Xe=Re(ae,he[rt],xe),Xe!==null&&(oe=A(Xe,oe,rt),mt===null?qe=Xe:mt.sibling=Xe,mt=Xe);return vt&&dn(ae,rt),qe}for(Xe=f(Xe);rt<he.length;rt++)ar=ye(Xe,ae,rt,he[rt],xe),ar!==null&&(o&&ar.alternate!==null&&Xe.delete(ar.key===null?rt:ar.key),oe=A(ar,oe,rt),mt===null?qe=ar:mt.sibling=ar,mt=ar);return o&&Xe.forEach(function(el){return s(ae,el)}),vt&&dn(ae,rt),qe}function tt(ae,oe,he,xe){if(he==null)throw Error(r(151));for(var qe=null,mt=null,Xe=oe,rt=oe=0,ar=null,Nt=he.next();Xe!==null&&!Nt.done;rt++,Nt=he.next()){Xe.index>rt?(ar=Xe,Xe=null):ar=Xe.sibling;var el=pe(ae,Xe,Nt.value,xe);if(el===null){Xe===null&&(Xe=ar);break}o&&Xe&&el.alternate===null&&s(ae,Xe),oe=A(el,oe,rt),mt===null?qe=el:mt.sibling=el,mt=el,Xe=ar}if(Nt.done)return l(ae,Xe),vt&&dn(ae,rt),qe;if(Xe===null){for(;!Nt.done;rt++,Nt=he.next())Nt=Re(ae,Nt.value,xe),Nt!==null&&(oe=A(Nt,oe,rt),mt===null?qe=Nt:mt.sibling=Nt,mt=Nt);return vt&&dn(ae,rt),qe}for(Xe=f(Xe);!Nt.done;rt++,Nt=he.next())Nt=ye(Xe,ae,rt,Nt.value,xe),Nt!==null&&(o&&Nt.alternate!==null&&Xe.delete(Nt.key===null?rt:Nt.key),oe=A(Nt,oe,rt),mt===null?qe=Nt:mt.sibling=Nt,mt=Nt);return o&&Xe.forEach(function(iD){return s(ae,iD)}),vt&&dn(ae,rt),qe}function Yt(ae,oe,he,xe){if(typeof he=="object"&&he!==null&&he.type===I&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case E:e:{for(var qe=he.key;oe!==null;){if(oe.key===qe){if(qe=he.type,qe===I){if(oe.tag===7){l(ae,oe.sibling),xe=C(oe,he.props.children),xe.return=ae,ae=xe;break e}}else if(oe.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===Y&&or(qe)===oe.type){l(ae,oe.sibling),xe=C(oe,he.props),cu(xe,he),xe.return=ae,ae=xe;break e}l(ae,oe);break}else s(ae,oe);oe=oe.sibling}he.type===I?(xe=ys(he.props.children,ae.mode,xe,he.key),xe.return=ae,ae=xe):(xe=mc(he.type,he.key,he.props,null,ae.mode,xe),cu(xe,he),xe.return=ae,ae=xe)}return P(ae);case x:e:{for(qe=he.key;oe!==null;){if(oe.key===qe)if(oe.tag===4&&oe.stateNode.containerInfo===he.containerInfo&&oe.stateNode.implementation===he.implementation){l(ae,oe.sibling),xe=C(oe,he.children||[]),xe.return=ae,ae=xe;break e}else{l(ae,oe);break}else s(ae,oe);oe=oe.sibling}xe=Ed(he,ae.mode,xe),xe.return=ae,ae=xe}return P(ae);case Y:return qe=he._init,he=qe(he._payload),Yt(ae,oe,he,xe)}if(J(he))return it(ae,oe,he,xe);if(te(he)){if(qe=te(he),typeof qe!="function")throw Error(r(150));return he=qe.call(he),tt(ae,oe,he,xe)}if(typeof he.then=="function")return Yt(ae,oe,au(he),xe);if(he.$$typeof===O)return Yt(ae,oe,ga(ae,he),xe);Mc(ae,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,oe!==null&&oe.tag===6?(l(ae,oe.sibling),xe=C(oe,he),xe.return=ae,ae=xe):(l(ae,oe),xe=If(he,ae.mode,xe),xe.return=ae,ae=xe),P(ae)):l(ae,oe)}return function(ae,oe,he,xe){try{su=0;var qe=Yt(ae,oe,he,xe);return Rs=null,qe}catch(Xe){if(Xe===Gl||Xe===ql)throw Xe;var mt=Tr(29,Xe,null,ae.mode);return mt.lanes=xe,mt.return=ae,mt}finally{}}}var Ns=up(!0),dp=up(!1),co=W(null),lo=null;function Os(o){var s=o.alternate;de(In,In.current&1),de(co,o),lo===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(lo=o)}function hp(o){if(o.tag===22){if(de(In,In.current),de(co,o),lo===null){var s=o.alternate;s!==null&&s.memoizedState!==null&&(lo=o)}}else Hi()}function Hi(){de(In,In.current),de(co,co.current)}function ni(o){ue(co),lo===o&&(lo=null),ue(In)}var In=W(0);function zd(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||jw(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Fd(o,s,l,f){s=o.memoizedState,l=l(f,s),l=l==null?s:v({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Kd={enqueueSetState:function(o,s,l){o=o._reactInternals;var f=Yr(),C=As(f);C.payload=s,l!=null&&(C.callback=l),s=Ts(o,C,f),s!==null&&(Pr(s,o,f),Vl(s,o,f))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var f=Yr(),C=As(f);C.tag=1,C.payload=s,l!=null&&(C.callback=l),s=Ts(o,C,f),s!==null&&(Pr(s,o,f),Vl(s,o,f))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Yr(),f=As(l);f.tag=2,s!=null&&(f.callback=s),s=Ts(o,f,l),s!==null&&(Pr(s,o,l),Vl(s,o,l))}};function Ia(o,s,l,f,C,A,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,A,P):s.prototype&&s.prototype.isPureReactComponent?!cc(l,f)||!cc(C,A):!0}function mn(o,s,l,f){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==o&&Kd.enqueueReplaceState(s,s.state,null)}function So(o,s){var l=s;if("ref"in s){l={};for(var f in s)f!=="ref"&&(l[f]=s[f])}if(o=o.defaultProps){l===s&&(l=v({},l));for(var C in o)l[C]===void 0&&(l[C]=o[C])}return l}var Gd=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function lu(o){Gd(o)}function fp(o){console.error(o)}function uu(o){Gd(o)}function cn(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(f){setTimeout(function(){throw f})}}function qd(o,s,l){try{var f=o.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function $d(o,s,l){return l=As(l),l.tag=3,l.payload={element:null},l.callback=function(){cn(o,s)},l}function du(o){return o=As(o),o.tag=3,o}function $f(o,s,l,f){var C=l.type.getDerivedStateFromError;if(typeof C=="function"){var A=f.value;o.payload=function(){return C(A)},o.callback=function(){qd(s,l,f)}}var P=l.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(o.callback=function(){qd(s,l,f),typeof C!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var B=f.stack;this.componentDidCatch(f.value,{componentStack:B!==null?B:""})})}function ri(o,s,l,f,C){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(s=l.alternate,s!==null&&ws(s,l,C,!0),l=co.current,l!==null){switch(l.tag){case 13:return lo===null?$c():l.alternate===null&&an===0&&(an=3),l.flags&=-257,l.flags|=65536,l.lanes=C,f===Lf?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([f]):s.add(f),ah(o,f,C)),!1;case 22:return l.flags|=65536,f===Lf?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([f]):l.add(f)),ah(o,f,C)),!1}throw Error(r(435,l.tag))}return ah(o,f,C),$c(),!1}if(vt)return s=co.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=C,f!==ma&&(o=Error(r(422),{cause:f}),vs(un(o,l)))):(f!==ma&&(s=Error(r(423),{cause:f}),vs(un(s,l))),o=o.current.alternate,o.flags|=65536,C&=-C,o.lanes|=C,f=un(f,l),C=$d(o.stateNode,f,C),Yl(o,C),an!==4&&(an=2)),!1;var A=Error(r(520),{cause:f});if(A=un(A,l),Ds===null?Ds=[A]:Ds.push(A),an!==4&&(an=2),s===null)return!0;f=un(f,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=C&-C,l.lanes|=o,o=$d(l.stateNode,f,o),Yl(l,o),!1;case 1:if(s=l.type,A=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ko===null||!ko.has(A))))return l.flags|=65536,C&=-C,l.lanes|=C,C=du(C),$f(C,o,l,f),Yl(l,C),!1}l=l.return}while(l!==null);return!1}var Vf=Error(r(461)),Dn=!1;function jn(o,s,l,f){s.child=o===null?dp(s,null,l,f):Ns(s,o.child,l,f)}function Yf(o,s,l,f,C){l=l.render;var A=s.ref;if("ref"in f){var P={};for(var B in f)B!=="ref"&&(P[B]=f[B])}else P=f;return kn(s),f=Ca(o,s,l,P,A,C),B=Tc(),o!==null&&!Dn?(Sc(o,s,C),Bt(o,s,C)):(vt&&B&&Sd(s),s.flags|=1,jn(o,s,f,C),s.child)}function It(o,s,l,f,C){if(o===null){var A=l.type;return typeof A=="function"&&!fc(A)&&A.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=A,xt(o,s,A,f,C)):(o=mc(l.type,null,f,s,s.mode,C),o.ref=s.ref,o.return=s,s.child=o)}if(A=o.child,!Uc(o,C)){var P=A.memoizedProps;if(l=l.compare,l=l!==null?l:cc,l(P,f)&&o.ref===s.ref)return Bt(o,s,C)}return s.flags|=1,o=oo(A,f),o.ref=s.ref,o.return=s,s.child=o}function xt(o,s,l,f,C){if(o!==null){var A=o.memoizedProps;if(cc(A,f)&&o.ref===s.ref)if(Dn=!1,s.pendingProps=f=A,Uc(o,C))(o.flags&131072)!==0&&(Dn=!0);else return s.lanes=o.lanes,Bt(o,s,C)}return Yd(o,s,l,f,C)}function hu(o,s,l){var f=s.pendingProps,C=f.children,A=o!==null?o.memoizedState:null;if(f.mode==="hidden"){if((s.flags&128)!==0){if(f=A!==null?A.baseLanes|l:l,o!==null){for(C=s.child=o.child,A=0;C!==null;)A=A|C.lanes|C.childLanes,C=C.sibling;s.childLanes=A&~f}else s.childLanes=0,s.child=null;return Vd(o,s,f,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Rd(s,A!==null?A.cachePool:null),A!==null?Ec(s,A):Ss(),hp(s);else return s.lanes=s.childLanes=536870912,Vd(o,s,A!==null?A.baseLanes|l:l,l)}else A!==null?(Rd(s,A.cachePool),Ec(s,A),Hi(),s.memoizedState=null):(o!==null&&Rd(s,null),Ss(),Hi());return jn(o,s,C,l),s.child}function Vd(o,s,l,f){var C=Pf();return C=C===null?null:{parent:Xt._currentValue,pool:C},s.memoizedState={baseLanes:l,cachePool:C},o!==null&&Rd(s,null),Ss(),hp(s),o!==null&&ws(o,s,f,!0),null}function Pc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Yd(o,s,l,f,C){return kn(s),l=Ca(o,s,l,f,void 0,C),f=Tc(),o!==null&&!Dn?(Sc(o,s,C),Bt(o,s,C)):(vt&&f&&Sd(s),s.flags|=1,jn(o,s,l,C),s.child)}function bw(o,s,l,f,C,A){return kn(s),s.updateQueue=null,l=Ac(s,f,l,C),Jl(o),f=Tc(),o!==null&&!Dn?(Sc(o,s,A),Bt(o,s,A)):(vt&&f&&Sd(s),s.flags|=1,jn(o,s,l,A),s.child)}function mp(o,s,l,f,C){if(kn(s),s.stateNode===null){var A=$o,P=l.contextType;typeof P=="object"&&P!==null&&(A=Yn(P)),A=new l(f,A),s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Kd,s.stateNode=A,A._reactInternals=s,A=s.stateNode,A.props=f,A.state=s.memoizedState,A.refs={},$l(s),P=l.contextType,A.context=typeof P=="object"&&P!==null?Yn(P):$o,A.state=s.memoizedState,P=l.getDerivedStateFromProps,typeof P=="function"&&(Fd(s,l,P,f),A.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(P=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),P!==A.state&&Kd.enqueueReplaceState(A,A.state,null),Wo(s,f,A,C),Ql(),A.state=s.memoizedState),typeof A.componentDidMount=="function"&&(s.flags|=4194308),f=!0}else if(o===null){A=s.stateNode;var B=s.memoizedProps,Z=So(l,B);A.props=Z;var me=A.context,Te=l.contextType;P=$o,typeof Te=="object"&&Te!==null&&(P=Yn(Te));var Re=l.getDerivedStateFromProps;Te=typeof Re=="function"||typeof A.getSnapshotBeforeUpdate=="function",B=s.pendingProps!==B,Te||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B||me!==P)&&mn(s,A,f,P),Ni=!1;var pe=s.memoizedState;A.state=pe,Wo(s,f,A,C),Ql(),me=s.memoizedState,B||pe!==me||Ni?(typeof Re=="function"&&(Fd(s,l,Re,f),me=s.memoizedState),(Z=Ni||Ia(s,l,Z,f,pe,me,P))?(Te||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=me),A.props=f,A.state=me,A.context=P,f=Z):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{A=s.stateNode,jf(o,s),P=s.memoizedProps,Te=So(l,P),A.props=Te,Re=s.pendingProps,pe=A.context,me=l.contextType,Z=$o,typeof me=="object"&&me!==null&&(Z=Yn(me)),B=l.getDerivedStateFromProps,(me=typeof B=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P!==Re||pe!==Z)&&mn(s,A,f,Z),Ni=!1,pe=s.memoizedState,A.state=pe,Wo(s,f,A,C),Ql();var ye=s.memoizedState;P!==Re||pe!==ye||Ni||o!==null&&o.dependencies!==null&&Id(o.dependencies)?(typeof B=="function"&&(Fd(s,l,B,f),ye=s.memoizedState),(Te=Ni||Ia(s,l,Te,f,pe,ye,Z)||o!==null&&o.dependencies!==null&&Id(o.dependencies))?(me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(f,ye,Z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(f,ye,Z)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||P===o.memoizedProps&&pe===o.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&pe===o.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ye),A.props=f,A.state=ye,A.context=Z,f=Te):(typeof A.componentDidUpdate!="function"||P===o.memoizedProps&&pe===o.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===o.memoizedProps&&pe===o.memoizedState||(s.flags|=1024),f=!1)}return A=f,Pc(o,s),f=(s.flags&128)!==0,A||f?(A=s.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:A.render(),s.flags|=1,o!==null&&f?(s.child=Ns(s,o.child,null,C),s.child=Ns(s,null,l,C)):jn(o,s,l,C),s.memoizedState=A.state,o=s.child):o=Bt(o,s,C),o}function Dc(o,s,l,f){return Ii(),s.flags|=256,jn(o,s,l,f),s.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qd(o){return{baseLanes:o,cachePool:ep()}}function Wd(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=Vr),o}function gp(o,s,l){var f=s.pendingProps,C=!1,A=(s.flags&128)!==0,P;if((P=A)||(P=o!==null&&o.memoizedState===null?!1:(In.current&2)!==0),P&&(C=!0,s.flags&=-129),P=(s.flags&32)!==0,s.flags&=-33,o===null){if(vt){if(C?Os(s):Hi(),vt){var B=kt,Z;if(Z=B){e:{for(Z=B,B=Fr;Z.nodeType!==8;){if(!B){B=null;break e}if(Z=Vi(Z.nextSibling),Z===null){B=null;break e}}B=Z}B!==null?(s.memoizedState={dehydrated:B,treeContext:Vo!==null?{id:Eo,overflow:Yo}:null,retryLane:536870912,hydrationErrors:null},Z=Tr(18,null,null,0),Z.stateNode=B,Z.return=s,s.child=Z,er=s,kt=null,Z=!0):Z=!1}Z||ki(s)}if(B=s.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return jw(B)?s.lanes=32:s.lanes=536870912,null;ni(s)}return B=f.children,f=f.fallback,C?(Hi(),C=s.mode,B=Xd({mode:"hidden",children:B},C),f=ys(f,C,l,null),B.return=s,f.return=s,B.sibling=f,s.child=B,C=s.child,C.memoizedState=Qd(l),C.childLanes=Wd(o,P,l),s.memoizedState=Qf,f):(Os(s),Lc(s,B))}if(Z=o.memoizedState,Z!==null&&(B=Z.dehydrated,B!==null)){if(A)s.flags&256?(Os(s),s.flags&=-257,s=Jd(o,s,l)):s.memoizedState!==null?(Hi(),s.child=o.child,s.flags|=128,s=null):(Hi(),C=f.fallback,B=s.mode,f=Xd({mode:"visible",children:f.children},B),C=ys(C,B,l,null),C.flags|=2,f.return=s,C.return=s,f.sibling=C,s.child=f,Ns(s,o.child,null,l),f=s.child,f.memoizedState=Qd(l),f.childLanes=Wd(o,P,l),s.memoizedState=Qf,s=C);else if(Os(s),jw(B)){if(P=B.nextSibling&&B.nextSibling.dataset,P)var me=P.dgst;P=me,f=Error(r(419)),f.stack="",f.digest=P,vs({value:f,source:null,stack:null}),s=Jd(o,s,l)}else if(Dn||ws(o,s,l,!1),P=(l&o.childLanes)!==0,Dn||P){if(P=$t,P!==null&&(f=l&-l,f=(f&42)!==0?1:zo(f),f=(f&(P.suspendedLanes|l))!==0?0:f,f!==0&&f!==Z.retryLane))throw Z.retryLane=f,bn(o,f),Pr(P,o,f),Vf;B.data==="$?"||$c(),s=Jd(o,s,l)}else B.data==="$?"?(s.flags|=192,s.child=o.child,s=null):(o=Z.treeContext,kt=Vi(B.nextSibling),er=s,vt=!0,tr=null,Fr=!1,o!==null&&(io[zr++]=Eo,io[zr++]=Yo,io[zr++]=Vo,Eo=o.id,Yo=o.overflow,Vo=s),s=Lc(s,f.children),s.flags|=4096);return s}return C?(Hi(),C=f.fallback,B=s.mode,Z=o.child,me=Z.sibling,f=oo(Z,{mode:"hidden",children:f.children}),f.subtreeFlags=Z.subtreeFlags&65011712,me!==null?C=oo(me,C):(C=ys(C,B,l,null),C.flags|=2),C.return=s,f.return=s,f.sibling=C,s.child=f,f=C,C=s.child,B=o.child.memoizedState,B===null?B=Qd(l):(Z=B.cachePool,Z!==null?(me=Xt._currentValue,Z=Z.parent!==me?{parent:me,pool:me}:Z):Z=ep(),B={baseLanes:B.baseLanes|l,cachePool:Z}),C.memoizedState=B,C.childLanes=Wd(o,P,l),s.memoizedState=Qf,f):(Os(s),l=o.child,o=l.sibling,l=oo(l,{mode:"visible",children:f.children}),l.return=s,l.sibling=null,o!==null&&(P=s.deletions,P===null?(s.deletions=[o],s.flags|=16):P.push(o)),s.child=l,s.memoizedState=null,l)}function Lc(o,s){return s=Xd({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Xd(o,s){return o=Tr(22,o,null,s),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Jd(o,s,l){return Ns(s,o.child,null,l),o=Lc(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function pp(o,s,l){o.lanes|=s;var f=o.alternate;f!==null&&(f.lanes|=s),kd(o.return,s,l)}function Ra(o,s,l,f,C){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:C}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=f,A.tail=l,A.tailMode=C)}function kr(o,s,l){var f=s.pendingProps,C=f.revealOrder,A=f.tail;if(jn(o,s,f.children,l),f=In.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&pp(o,l,s);else if(o.tag===19)pp(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}switch(de(In,f),C){case"forwards":for(l=s.child,C=null;l!==null;)o=l.alternate,o!==null&&zd(o)===null&&(C=l),l=l.sibling;l=C,l===null?(C=s.child,s.child=null):(C=l.sibling,l.sibling=null),Ra(s,!1,C,l,A);break;case"backwards":for(l=null,C=s.child,s.child=null;C!==null;){if(o=C.alternate,o!==null&&zd(o)===null){s.child=C;break}o=C.sibling,C.sibling=l,l=C,C=o}Ra(s,!0,l,null,A);break;case"together":Ra(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Bt(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),ai|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(ws(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(r(153));if(s.child!==null){for(o=s.child,l=oo(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=oo(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function Uc(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Id(o)))}function Wf(o,s,l){switch(s.tag){case 3:Ce(s,s.stateNode.containerInfo),xr(s,Xt,o.memoizedState.cache),Ii();break;case 27:case 5:we(s);break;case 4:Ce(s,s.stateNode.containerInfo);break;case 10:xr(s,s.type,s.memoizedProps.value);break;case 13:var f=s.memoizedState;if(f!==null)return f.dehydrated!==null?(Os(s),s.flags|=128,null):(l&s.child.childLanes)!==0?gp(o,s,l):(Os(s),o=Bt(o,s,l),o!==null?o.sibling:null);Os(s);break;case 19:var C=(o.flags&128)!==0;if(f=(l&s.childLanes)!==0,f||(ws(o,s,l,!1),f=(l&s.childLanes)!==0),C){if(f)return kr(o,s,l);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),de(In,In.current),f)break;return null;case 22:case 23:return s.lanes=0,hu(o,s,l);case 24:xr(s,Xt,o.memoizedState.cache)}return Bt(o,s,l)}function Bi(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)Dn=!0;else{if(!Uc(o,l)&&(s.flags&128)===0)return Dn=!1,Wf(o,s,l);Dn=(o.flags&131072)!==0}else Dn=!1,vt&&(s.flags&1048576)!==0&&Xg(s,Td,s.index);switch(s.lanes=0,s.tag){case 16:e:{o=s.pendingProps;var f=s.elementType,C=f._init;if(f=C(f._payload),s.type=f,typeof f=="function")fc(f)?(o=So(f,o),s.tag=1,s=mp(null,s,f,o,l)):(s.tag=0,s=Yd(null,s,f,o,l));else{if(f!=null){if(C=f.$$typeof,C===U){s.tag=11,s=Yf(null,s,f,o,l);break e}else if(C===Q){s.tag=14,s=It(null,s,f,o,l);break e}}throw s=G(f)||f,Error(r(306,s,""))}}return s;case 0:return Yd(o,s,s.type,s.pendingProps,l);case 1:return f=s.type,C=So(f,s.pendingProps),mp(o,s,f,C,l);case 3:e:{if(Ce(s,s.stateNode.containerInfo),o===null)throw Error(r(387));f=s.pendingProps;var A=s.memoizedState;C=A.element,jf(o,s),Wo(s,f,null,l);var P=s.memoizedState;if(f=P.cache,xr(s,Xt,f),f!==A.cache&&Nf(s,[Xt],l,!0),Ql(),f=P.element,A.isDehydrated)if(A={element:f,isDehydrated:!1,cache:P.cache},s.updateQueue.baseState=A,s.memoizedState=A,s.flags&256){s=Dc(o,s,f,l);break e}else if(f!==C){C=un(Error(r(424)),s),vs(C),s=Dc(o,s,f,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(kt=Vi(o.firstChild),er=s,vt=!0,tr=null,Fr=!0,l=dp(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ii(),f===C){s=Bt(o,s,l);break e}jn(o,s,f,l)}s=s.child}return s;case 26:return Pc(o,s),o===null?(l=yS(s.type,null,s.pendingProps,null))?s.memoizedState=l:vt||(l=s.type,o=s.pendingProps,f=zp(Ee.current).createElement(l),f[ke]=s,f[Cn]=o,mr(f,l,o),nn(f),s.stateNode=f):s.memoizedState=yS(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return we(s),o===null&&vt&&(f=s.stateNode=mS(s.type,s.pendingProps,Ee.current),er=s,Fr=!0,C=kt,Qc(s.type)?(Hw=C,kt=Vi(f.firstChild)):kt=C),jn(o,s,s.pendingProps.children,l),Pc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&vt&&((C=f=kt)&&(f=P1(f,s.type,s.pendingProps,Fr),f!==null?(s.stateNode=f,er=s,kt=Vi(f.firstChild),Fr=!1,C=!0):C=!1),C||ki(s)),we(s),C=s.type,A=s.pendingProps,P=o!==null?o.memoizedProps:null,f=A.children,Dw(C,A)?f=null:P!==null&&Dw(C,P)&&(s.flags|=32),s.memoizedState!==null&&(C=Ca(o,s,Zl,null,null,l),Em._currentValue=C),Pc(o,s),jn(o,s,f,l),s.child;case 6:return o===null&&vt&&((o=l=kt)&&(l=D1(l,s.pendingProps,Fr),l!==null?(s.stateNode=l,er=s,kt=null,o=!0):o=!1),o||ki(s)),null;case 13:return gp(o,s,l);case 4:return Ce(s,s.stateNode.containerInfo),f=s.pendingProps,o===null?s.child=Ns(s,null,f,l):jn(o,s,f,l),s.child;case 11:return Yf(o,s,s.type,s.pendingProps,l);case 7:return jn(o,s,s.pendingProps,l),s.child;case 8:return jn(o,s,s.pendingProps.children,l),s.child;case 12:return jn(o,s,s.pendingProps.children,l),s.child;case 10:return f=s.pendingProps,xr(s,s.type,f.value),jn(o,s,f.children,l),s.child;case 9:return C=s.type._context,f=s.pendingProps.children,kn(s),C=Yn(C),f=f(C),s.flags|=1,jn(o,s,f,l),s.child;case 14:return It(o,s,s.type,s.pendingProps,l);case 15:return xt(o,s,s.type,s.pendingProps,l);case 19:return kr(o,s,l);case 31:return f=s.pendingProps,l=s.mode,f={mode:f.mode,children:f.children},o===null?(l=Xd(f,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=oo(o.child,f),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return hu(o,s,l);case 24:return kn(s),f=Yn(Xt),o===null?(C=Pf(),C===null&&(C=$t,A=Kl(),C.pooledCache=A,A.refCount++,A!==null&&(C.pooledCacheLanes|=l),C=A),s.memoizedState={parent:f,cache:C},$l(s),xr(s,Xt,C)):((o.lanes&l)!==0&&(jf(o,s),Wo(s,null,null,l),Ql()),C=o.memoizedState,A=s.memoizedState,C.parent!==f?(C={parent:f,cache:f},s.memoizedState=C,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=C),xr(s,Xt,f)):(f=A.cache,xr(s,Xt,f),f!==C.cache&&Nf(s,[Xt],l,!0))),jn(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function xo(o){o.flags|=4}function yp(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!ES(s)){if(s=co.current,s!==null&&((Ct&4194048)===Ct?lo!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||s!==lo))throw bc=Lf,Df;o.flags|=8192}}function Zd(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?ls():536870912,o.lanes|=s,Oa|=s)}function fu(o,s){if(!vt)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function ln(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,f=0;if(s)for(var C=o.child;C!==null;)l|=C.lanes|C.childLanes,f|=C.subtreeFlags&65011712,f|=C.flags&65011712,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)l|=C.lanes|C.childLanes,f|=C.subtreeFlags,f|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=f,o.childLanes=l,s}function vp(o,s,l){var f=s.pendingProps;switch(xd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(s),null;case 1:return ln(s),null;case 3:return l=s.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Ri(Xt),De(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(Ao(s)?xo(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fl())),ln(s),null;case 26:return l=s.memoizedState,o===null?(xo(s),l!==null?(ln(s),yp(s,l)):(ln(s),s.flags&=-16777217)):l?l!==o.memoizedState?(xo(s),ln(s),yp(s,l)):(ln(s),s.flags&=-16777217):(o.memoizedProps!==f&&xo(s),ln(s),s.flags&=-16777217),null;case 27:be(s),l=Ee.current;var C=s.type;if(o!==null&&s.stateNode!=null)o.memoizedProps!==f&&xo(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return ln(s),null}o=ge.current,Ao(s)?Rf(s):(o=mS(C,f,l),s.stateNode=o,xo(s))}return ln(s),null;case 5:if(be(s),l=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==f&&xo(s);else{if(!f){if(s.stateNode===null)throw Error(r(166));return ln(s),null}if(o=ge.current,Ao(s))Rf(s);else{switch(C=zp(Ee.current),o){case 1:o=C.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=C.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=C.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=C.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?o.multiple=!0:f.size&&(o.size=f.size);break;default:o=typeof f.is=="string"?C.createElement(l,{is:f.is}):C.createElement(l)}}o[ke]=s,o[Cn]=f;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)o.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=o;e:switch(mr(o,l,f),l){case"button":case"input":case"select":case"textarea":o=!!f.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&xo(s)}}return ln(s),s.flags&=-16777217,null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==f&&xo(s);else{if(typeof f!="string"&&s.stateNode===null)throw Error(r(166));if(o=Ee.current,Ao(s)){if(o=s.stateNode,l=s.memoizedProps,f=null,C=er,C!==null)switch(C.tag){case 27:case 5:f=C.memoizedProps}o[ke]=s,o=!!(o.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||aS(o.nodeValue,l)),o||ki(s)}else o=zp(o).createTextNode(f),o[ke]=s,s.stateNode=o}return ln(s),null;case 13:if(f=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(C=Ao(s),f!==null&&f.dehydrated!==null){if(o===null){if(!C)throw Error(r(318));if(C=s.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[ke]=s}else Ii(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ln(s),C=!1}else C=Fl(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=C),C=!0;if(!C)return s.flags&256?(ni(s),s):(ni(s),null)}if(ni(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=f!==null,o=o!==null&&o.memoizedState!==null,l){f=s.child,C=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(C=f.alternate.memoizedState.cachePool.pool);var A=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==C&&(f.flags|=2048)}return l!==o&&l&&(s.child.flags|=8192),Zd(s,s.updateQueue),ln(s),null;case 4:return De(),o===null&&Rw(s.stateNode.containerInfo),ln(s),null;case 10:return Ri(s.type),ln(s),null;case 19:if(ue(In),C=s.memoizedState,C===null)return ln(s),null;if(f=(s.flags&128)!==0,A=C.rendering,A===null)if(f)fu(C,!1);else{if(an!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(A=zd(o),A!==null){for(s.flags|=128,fu(C,!1),o=A.updateQueue,s.updateQueue=o,Zd(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)kf(l,o),l=l.sibling;return de(In,In.current&1|2),s.child}o=o.sibling}C.tail!==null&&Ke()>nh&&(s.flags|=128,f=!0,fu(C,!1),s.lanes=4194304)}else{if(!f)if(o=zd(A),o!==null){if(s.flags|=128,f=!0,o=o.updateQueue,s.updateQueue=o,Zd(s,o),fu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!A.alternate&&!vt)return ln(s),null}else 2*Ke()-C.renderingStartTime>nh&&l!==536870912&&(s.flags|=128,f=!0,fu(C,!1),s.lanes=4194304);C.isBackwards?(A.sibling=s.child,s.child=A):(o=C.last,o!==null?o.sibling=A:s.child=A,C.last=A)}return C.tail!==null?(s=C.tail,C.rendering=s,C.tail=s.sibling,C.renderingStartTime=Ke(),s.sibling=null,o=In.current,de(In,f?o&1|2:o&1),s):(ln(s),null);case 22:case 23:return ni(s),va(),f=s.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(s.flags|=8192):f&&(s.flags|=8192),f?(l&536870912)!==0&&(s.flags&128)===0&&(ln(s),s.subtreeFlags&6&&(s.flags|=8192)):ln(s),l=s.updateQueue,l!==null&&Zd(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),f=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),f!==l&&(s.flags|=2048),o!==null&&ue(bs),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ri(Xt),ln(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Cp(o,s){switch(xd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Ri(Xt),De(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return be(s),null;case 13:if(ni(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ii()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return ue(In),null;case 4:return De(),null;case 10:return Ri(s.type),null;case 22:case 23:return ni(s),va(),o!==null&&ue(bs),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Ri(Xt),null;case 25:return null;default:return null}}function Xf(o,s){switch(xd(s),s.tag){case 3:Ri(Xt),De();break;case 26:case 27:case 5:be(s);break;case 4:De();break;case 13:ni(s);break;case 19:ue(In);break;case 10:Ri(s.type);break;case 22:case 23:ni(s),va(),o!==null&&ue(bs);break;case 24:Ri(Xt)}}function Ir(o,s){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var C=f.next;l=C;do{if((l.tag&o)===o){f=void 0;var A=l.create,P=l.inst;f=A(),P.destroy=f}l=l.next}while(l!==C)}}catch(B){zt(s,s.return,B)}}function Rr(o,s,l){try{var f=s.updateQueue,C=f!==null?f.lastEffect:null;if(C!==null){var A=C.next;f=A;do{if((f.tag&o)===o){var P=f.inst,B=P.destroy;if(B!==void 0){P.destroy=void 0,C=s;var Z=l,me=B;try{me()}catch(Te){zt(C,Z,Te)}}}f=f.next}while(f!==A)}}catch(Te){zt(s,s.return,Te)}}function jc(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{Od(s,l)}catch(f){zt(o,o.return,f)}}}function oi(o,s,l){l.props=So(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(f){zt(o,s,f)}}function Ln(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof l=="function"?o.refCleanup=l(f):l.current=f}}catch(C){zt(o,s,C)}}function ir(o,s){var l=o.ref,f=o.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(C){zt(o,s,C)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(C){zt(o,s,C)}else l.current=null}function zi(o){var s=o.type,l=o.memoizedProps,f=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(C){zt(o,o.return,C)}}function Jf(o,s,l){try{var f=o.stateNode;I1(f,o.type,l,s),f[Cn]=s}catch(C){zt(o,o.return,C)}}function Hc(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Qc(o.type)||o.tag===4}function Zf(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Hc(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Qc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Nr(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Bp));else if(f!==4&&(f===27&&Qc(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(Nr(o,s,l),o=o.sibling;o!==null;)Nr(o,s,l),o=o.sibling}function mu(o,s,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(f!==4&&(f===27&&Qc(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(mu(o,s,l),o=o.sibling;o!==null;)mu(o,s,l),o=o.sibling}function wp(o){var s=o.stateNode,l=o.memoizedProps;try{for(var f=o.type,C=s.attributes;C.length;)s.removeAttributeNode(C[0]);mr(s,f,l),s[ke]=o,s[Cn]=l}catch(A){zt(o,o.return,A)}}var _o=!1,gn=!1,em=!1,Bc=typeof WeakSet=="function"?WeakSet:Set,pn=null;function tm(o,s){if(o=o.containerInfo,Mw=Vp,o=vd(o),wf(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var C=f.anchorOffset,A=f.focusNode;f=f.focusOffset;try{l.nodeType,A.nodeType}catch{l=null;break e}var P=0,B=-1,Z=-1,me=0,Te=0,Re=o,pe=null;t:for(;;){for(var ye;Re!==l||C!==0&&Re.nodeType!==3||(B=P+C),Re!==A||f!==0&&Re.nodeType!==3||(Z=P+f),Re.nodeType===3&&(P+=Re.nodeValue.length),(ye=Re.firstChild)!==null;)pe=Re,Re=ye;for(;;){if(Re===o)break t;if(pe===l&&++me===C&&(B=P),pe===A&&++Te===f&&(Z=P),(ye=Re.nextSibling)!==null)break;Re=pe,pe=Re.parentNode}Re=ye}l=B===-1||Z===-1?null:{start:B,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Pw={focusedElem:o,selectionRange:l},Vp=!1,pn=s;pn!==null;)if(s=pn,o=s.child,(s.subtreeFlags&1024)!==0&&o!==null)o.return=s,pn=o;else for(;pn!==null;){switch(s=pn,A=s.alternate,o=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&A!==null){o=void 0,l=s,C=A.memoizedProps,A=A.memoizedState,f=l.stateNode;try{var it=So(l.type,C,l.elementType===l.type);o=f.getSnapshotBeforeUpdate(it,A),f.__reactInternalSnapshotBeforeUpdate=o}catch(tt){zt(l,l.return,tt)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)Uw(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Uw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=s.sibling,o!==null){o.return=s.return,pn=o;break}pn=s.return}}function nm(o,s,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Fi(o,l),f&4&&Ir(5,l);break;case 1:if(Fi(o,l),f&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(P){zt(l,l.return,P)}else{var C=So(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(C,s,o.__reactInternalSnapshotBeforeUpdate)}catch(P){zt(l,l.return,P)}}f&64&&jc(l),f&512&&Ln(l,l.return);break;case 3:if(Fi(o,l),f&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Od(o,s)}catch(P){zt(l,l.return,P)}}break;case 27:s===null&&f&4&&wp(l);case 26:case 5:Fi(o,l),s===null&&f&4&&zi(l),f&512&&Ln(l,l.return);break;case 12:Fi(o,l);break;case 13:Fi(o,l),f&4&&zc(o,l),f&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=_w.bind(null,l),L1(o,l))));break;case 22:if(f=l.memoizedState!==null||_o,!f){s=s!==null&&s.memoizedState!==null||gn,C=_o;var A=gn;_o=f,(gn=s)&&!A?Ps(o,l,(l.subtreeFlags&8772)!==0):Fi(o,l),_o=C,gn=A}break;case 30:break;default:Fi(o,l)}}function bp(o){var s=o.alternate;s!==null&&(o.alternate=null,bp(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&vi(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Jt=null,dr=!1;function Ue(o,s,l){for(l=l.child;l!==null;)rm(o,s,l),l=l.sibling}function rm(o,s,l){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(tn,l)}catch{}switch(l.tag){case 26:gn||ir(l,s),Ue(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:gn||ir(l,s);var f=Jt,C=dr;Qc(l.type)&&(Jt=l.stateNode,dr=!1),Ue(o,s,l),vm(l.stateNode),Jt=f,dr=C;break;case 5:gn||ir(l,s);case 6:if(f=Jt,C=dr,Jt=null,Ue(o,s,l),Jt=f,dr=C,Jt!==null)if(dr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(l.stateNode)}catch(A){zt(l,s,A)}else try{Jt.removeChild(l.stateNode)}catch(A){zt(l,s,A)}break;case 18:Jt!==null&&(dr?(o=Jt,hS(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),xm(o)):hS(Jt,l.stateNode));break;case 4:f=Jt,C=dr,Jt=l.stateNode.containerInfo,dr=!0,Ue(o,s,l),Jt=f,dr=C;break;case 0:case 11:case 14:case 15:gn||Rr(2,l,s),gn||Rr(4,l,s),Ue(o,s,l);break;case 1:gn||(ir(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"&&oi(l,s,f)),Ue(o,s,l);break;case 21:Ue(o,s,l);break;case 22:gn=(f=gn)||l.memoizedState!==null,Ue(o,s,l),gn=f;break;default:Ue(o,s,l)}}function zc(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{xm(o)}catch(l){zt(s,s.return,l)}}function Ep(o){switch(o.tag){case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Bc),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Bc),s;default:throw Error(r(435,o.tag))}}function gu(o,s){var l=Ep(o);s.forEach(function(f){var C=Qr.bind(null,o,f);l.has(f)||(l.add(f),f.then(C,C))})}function Or(o,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var C=l[f],A=o,P=s,B=P;e:for(;B!==null;){switch(B.tag){case 27:if(Qc(B.type)){Jt=B.stateNode,dr=!1;break e}break;case 5:Jt=B.stateNode,dr=!1;break e;case 3:case 4:Jt=B.stateNode.containerInfo,dr=!0;break e}B=B.return}if(Jt===null)throw Error(r(160));rm(A,P,C),Jt=null,dr=!1,A=C.alternate,A!==null&&(A.return=null),C.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)om(s,o),s=s.sibling}var qr=null;function om(o,s){var l=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Or(s,o),Mr(o),f&4&&(Rr(3,o,o.return),Ir(3,o),Rr(5,o,o.return));break;case 1:Or(s,o),Mr(o),f&512&&(gn||l===null||ir(l,l.return)),f&64&&_o&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var C=qr;if(Or(s,o),Mr(o),f&512&&(gn||l===null||ir(l,l.return)),f&4){var A=l!==null?l.memoizedState:null;if(f=o.memoizedState,l===null)if(f===null)if(o.stateNode===null){e:{f=o.type,l=o.memoizedProps,C=C.ownerDocument||C;t:switch(f){case"title":A=C.getElementsByTagName("title")[0],(!A||A[Fo]||A[ke]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=C.createElement(f),C.head.insertBefore(A,C.querySelector("head > title"))),mr(A,f,l),A[ke]=o,nn(A),f=A;break e;case"link":var P=wS("link","href",C).get(f+(l.href||""));if(P){for(var B=0;B<P.length;B++)if(A=P[B],A.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&A.getAttribute("rel")===(l.rel==null?null:l.rel)&&A.getAttribute("title")===(l.title==null?null:l.title)&&A.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){P.splice(B,1);break t}}A=C.createElement(f),mr(A,f,l),C.head.appendChild(A);break;case"meta":if(P=wS("meta","content",C).get(f+(l.content||""))){for(B=0;B<P.length;B++)if(A=P[B],A.getAttribute("content")===(l.content==null?null:""+l.content)&&A.getAttribute("name")===(l.name==null?null:l.name)&&A.getAttribute("property")===(l.property==null?null:l.property)&&A.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&A.getAttribute("charset")===(l.charSet==null?null:l.charSet)){P.splice(B,1);break t}}A=C.createElement(f),mr(A,f,l),C.head.appendChild(A);break;default:throw Error(r(468,f))}A[ke]=o,nn(A),f=A}o.stateNode=f}else bS(C,o.type,o.stateNode);else o.stateNode=CS(C,f,o.memoizedProps);else A!==f?(A===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):A.count--,f===null?bS(C,o.type,o.stateNode):CS(C,f,o.memoizedProps)):f===null&&o.stateNode!==null&&Jf(o,o.memoizedProps,l.memoizedProps)}break;case 27:Or(s,o),Mr(o),f&512&&(gn||l===null||ir(l,l.return)),l!==null&&f&4&&Jf(o,o.memoizedProps,l.memoizedProps);break;case 5:if(Or(s,o),Mr(o),f&512&&(gn||l===null||ir(l,l.return)),o.flags&32){C=o.stateNode;try{aa(C,"")}catch(ye){zt(o,o.return,ye)}}f&4&&o.stateNode!=null&&(C=o.memoizedProps,Jf(o,C,l!==null?l.memoizedProps:C)),f&1024&&(em=!0);break;case 6:if(Or(s,o),Mr(o),f&4){if(o.stateNode===null)throw Error(r(162));f=o.memoizedProps,l=o.stateNode;try{l.nodeValue=f}catch(ye){zt(o,o.return,ye)}}break;case 3:if(Gp=null,C=qr,qr=Fp(s.containerInfo),Or(s,o),qr=C,Mr(o),f&4&&l!==null&&l.memoizedState.isDehydrated)try{xm(s.containerInfo)}catch(ye){zt(o,o.return,ye)}em&&(em=!1,im(o));break;case 4:f=qr,qr=Fp(o.stateNode.containerInfo),Or(s,o),Mr(o),qr=f;break;case 12:Or(s,o),Mr(o);break;case 13:Or(s,o),Mr(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Kc=Ke()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,gu(o,f)));break;case 22:C=o.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,me=_o,Te=gn;if(_o=me||C,gn=Te||Z,Or(s,o),gn=Te,_o=me,Mr(o),f&8192)e:for(s=o.stateNode,s._visibility=C?s._visibility&-2:s._visibility|1,C&&(l===null||Z||_o||gn||Ms(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){Z=l=s;try{if(A=Z.stateNode,C)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{B=Z.stateNode;var Re=Z.memoizedProps.style,pe=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;B.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ye){zt(Z,Z.return,ye)}}}else if(s.tag===6){if(l===null){Z=s;try{Z.stateNode.nodeValue=C?"":Z.memoizedProps}catch(ye){zt(Z,Z.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}f&4&&(f=o.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,gu(o,l))));break;case 19:Or(s,o),Mr(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,gu(o,f)));break;case 30:break;case 21:break;default:Or(s,o),Mr(o)}}function Mr(o){var s=o.flags;if(s&2){try{for(var l,f=o.return;f!==null;){if(Hc(f)){l=f;break}f=f.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var C=l.stateNode,A=Zf(o);mu(o,A,C);break;case 5:var P=l.stateNode;l.flags&32&&(aa(P,""),l.flags&=-33);var B=Zf(o);mu(o,B,P);break;case 3:case 4:var Z=l.stateNode.containerInfo,me=Zf(o);Nr(o,me,Z);break;default:throw Error(r(161))}}catch(Te){zt(o,o.return,Te)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function im(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;im(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function Fi(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)nm(o,s.alternate,s),s=s.sibling}function Ms(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Rr(4,s,s.return),Ms(s);break;case 1:ir(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&oi(s,s.return,l),Ms(s);break;case 27:vm(s.stateNode);case 26:case 5:ir(s,s.return),Ms(s);break;case 22:s.memoizedState===null&&Ms(s);break;case 30:Ms(s);break;default:Ms(s)}o=o.sibling}}function Ps(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var f=s.alternate,C=o,A=s,P=A.flags;switch(A.tag){case 0:case 11:case 15:Ps(C,A,l),Ir(4,A);break;case 1:if(Ps(C,A,l),f=A,C=f.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(me){zt(f,f.return,me)}if(f=A,C=f.updateQueue,C!==null){var B=f.stateNode;try{var Z=C.shared.hiddenCallbacks;if(Z!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Z.length;C++)Wl(Z[C],B)}catch(me){zt(f,f.return,me)}}l&&P&64&&jc(A),Ln(A,A.return);break;case 27:wp(A);case 26:case 5:Ps(C,A,l),l&&f===null&&P&4&&zi(A),Ln(A,A.return);break;case 12:Ps(C,A,l);break;case 13:Ps(C,A,l),l&&P&4&&zc(C,A);break;case 22:A.memoizedState===null&&Ps(C,A,l),Ln(A,A.return);break;case 30:break;default:Ps(C,A,l)}s=s.sibling}}function Fc(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&yc(l))}function eh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yc(o))}function uo(o,s,l,f){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ap(o,s,l,f),s=s.sibling}function Ap(o,s,l,f){var C=s.flags;switch(s.tag){case 0:case 11:case 15:uo(o,s,l,f),C&2048&&Ir(9,s);break;case 1:uo(o,s,l,f);break;case 3:uo(o,s,l,f),C&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&yc(o)));break;case 12:if(C&2048){uo(o,s,l,f),o=s.stateNode;try{var A=s.memoizedProps,P=A.id,B=A.onPostCommit;typeof B=="function"&&B(P,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Z){zt(s,s.return,Z)}}else uo(o,s,l,f);break;case 13:uo(o,s,l,f);break;case 23:break;case 22:A=s.stateNode,P=s.alternate,s.memoizedState!==null?A._visibility&2?uo(o,s,l,f):ii(o,s):A._visibility&2?uo(o,s,l,f):(A._visibility|=2,Na(o,s,l,f,(s.subtreeFlags&10256)!==0)),C&2048&&Fc(P,s);break;case 24:uo(o,s,l,f),C&2048&&eh(s.alternate,s);break;default:uo(o,s,l,f)}}function Na(o,s,l,f,C){for(C=C&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var A=o,P=s,B=l,Z=f,me=P.flags;switch(P.tag){case 0:case 11:case 15:Na(A,P,B,Z,C),Ir(8,P);break;case 23:break;case 22:var Te=P.stateNode;P.memoizedState!==null?Te._visibility&2?Na(A,P,B,Z,C):ii(A,P):(Te._visibility|=2,Na(A,P,B,Z,C)),C&&me&2048&&Fc(P.alternate,P);break;case 24:Na(A,P,B,Z,C),C&&me&2048&&eh(P.alternate,P);break;default:Na(A,P,B,Z,C)}s=s.sibling}}function ii(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,f=s,C=f.flags;switch(f.tag){case 22:ii(l,f),C&2048&&Fc(f.alternate,f);break;case 24:ii(l,f),C&2048&&eh(f.alternate,f);break;default:ii(l,f)}s=s.sibling}}var pu=8192;function si(o){if(o.subtreeFlags&pu)for(o=o.child;o!==null;)Tp(o),o=o.sibling}function Tp(o){switch(o.tag){case 26:si(o),o.flags&pu&&o.memoizedState!==null&&Q1(qr,o.memoizedState,o.memoizedProps);break;case 5:si(o);break;case 3:case 4:var s=qr;qr=Fp(o.stateNode.containerInfo),si(o),qr=s;break;case 22:o.memoizedState===null&&(s=o.alternate,s!==null&&s.memoizedState!==null?(s=pu,pu=16777216,si(o),pu=s):si(o));break;default:si(o)}}function sm(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function yu(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];pn=f,xp(f,o)}sm(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Sp(o),o=o.sibling}function Sp(o){switch(o.tag){case 0:case 11:case 15:yu(o),o.flags&2048&&Rr(9,o,o.return);break;case 3:yu(o);break;case 12:yu(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,vu(o)):yu(o);break;default:yu(o)}}function vu(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];pn=f,xp(f,o)}sm(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Rr(8,s,s.return),vu(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,vu(s));break;default:vu(s)}o=o.sibling}}function xp(o,s){for(;pn!==null;){var l=pn;switch(l.tag){case 0:case 11:case 15:Rr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:yc(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,pn=f;else e:for(l=o;pn!==null;){f=pn;var C=f.sibling,A=f.return;if(bp(f),f===l){pn=null;break e}if(C!==null){C.return=A,pn=C;break e}pn=A}}}var Ew={getCacheForType:function(o){var s=Yn(Xt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l}},Aw=typeof WeakMap=="function"?WeakMap:Map,Dt=0,$t=null,ht=null,Ct=0,Lt=0,yn=null,$r=!1,Ki=!1,th=!1,ho=0,an=0,ai=0,Gi=0,Cu=0,Vr=0,Oa=0,Ds=null,sr=null,am=!1,Kc=0,nh=1/0,rh=null,ko=null,Un=0,Ls=null,Ma=null,Gc=0,Pa=0,cm=null,_p=null,wu=0,lm=null;function Yr(){if((Dt&2)!==0&&Ct!==0)return Ct&-Ct;if(D.T!==null){var o=Cc;return o!==0?o:Ut()}return nt()}function kp(){Vr===0&&(Vr=(Ct&536870912)===0||vt?yi():536870912);var o=co.current;return o!==null&&(o.flags|=32),Vr}function Pr(o,s,l){(o===$t&&(Lt===2||Lt===9)||o.cancelPendingCommit!==null)&&(qc(o,0),Us(o,Ct,Vr,!1)),Co(o,l),((Dt&2)===0||o!==$t)&&(o===$t&&((Dt&2)===0&&(Gi|=l),an===4&&Us(o,Ct,Vr,!1)),R(o))}function Ip(o,s,l){if((Dt&6)!==0)throw Error(r(327));var f=!l&&(s&124)===0&&(s&o.expiredLanes)===0||vo(o,s),C=f?Sw(o,s):Da(o,s,!0),A=f;do{if(C===0){Ki&&!f&&Us(o,s,0,!1);break}else{if(l=o.current.alternate,A&&!oh(l)){C=Da(o,s,!1),A=!1;continue}if(C===2){if(A=s,o.errorRecoveryDisabledLanes&A)var P=0;else P=o.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){s=P;e:{var B=o;C=Ds;var Z=B.current.memoizedState.isDehydrated;if(Z&&(qc(B,P).flags|=256),P=Da(B,P,!1),P!==2){if(th&&!Z){B.errorRecoveryDisabledLanes|=A,Gi|=A,C=4;break e}A=sr,sr=C,A!==null&&(sr===null?sr=A:sr.push.apply(sr,A))}C=P}if(A=!1,C!==2)continue}}if(C===1){qc(o,0),Us(o,s,0,!0);break}e:{switch(f=o,A=C,A){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Us(f,s,Vr,!$r);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(C=Kc+300-Ke(),10<C)){if(Us(f,s,Vr,!$r),pi(f,0,!0)!==0)break e;f.timeoutHandle=uS(Rp.bind(null,f,l,sr,rh,am,s,Vr,Gi,Oa,$r,A,2,-0,0),C);break e}Rp(f,l,sr,rh,am,s,Vr,Gi,Oa,$r,A,0,-0,0)}}break}while(!0);R(o)}function Rp(o,s,l,f,C,A,P,B,Z,me,Te,Re,pe,ye){if(o.timeoutHandle=-1,Re=s.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(bm={stylesheets:null,count:0,unsuspend:Y1},Tp(s),Re=W1(),Re!==null)){o.cancelPendingCommit=Re(Vc.bind(null,o,s,A,l,f,C,P,B,Z,Te,1,pe,ye)),Us(o,A,P,!me);return}Vc(o,s,A,l,f,C,P,B,Z)}function oh(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var C=l[f],A=C.getSnapshot;C=C.value;try{if(!$n(A(),C))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Us(o,s,l,f){s&=~Cu,s&=~Gi,o.suspendedLanes|=s,o.pingedLanes&=~s,f&&(o.warmLanes|=s),f=o.expirationTimes;for(var C=s;0<C;){var A=31-_n(C),P=1<<A;f[A]=-1,C&=~P}l!==0&&na(o,l,s)}function ih(){return(Dt&6)===0?(L(0),!1):!0}function um(){if(ht!==null){if(Lt===0)var o=ht.return;else o=ht,Qo=Cs=null,Pi(o),Rs=null,su=0,o=ht;for(;o!==null;)Xf(o.alternate,o),o=o.return;ht=null}}function qc(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,N1(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),um(),$t=o,ht=l=oo(o.current,null),Ct=s,Lt=0,yn=null,$r=!1,Ki=vo(o,s),th=!1,Oa=Vr=Cu=Gi=ai=an=0,sr=Ds=null,am=!1,(s&8)!==0&&(s|=s&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=s;0<f;){var C=31-_n(f),A=1<<C;s|=o[C],f&=~A}return ho=s,Vn(),l}function Np(o,s){at=null,D.H=iu,s===Gl||s===ql?(s=np(),Lt=3):s===Df?(s=np(),Lt=4):Lt=s===Vf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yn=s,ht===null&&(an=1,cn(o,un(s,o.current)))}function Op(){var o=D.H;return D.H=iu,o===null?iu:o}function Mp(){var o=D.A;return D.A=Ew,o}function $c(){an=4,$r||(Ct&4194048)!==Ct&&co.current!==null||(Ki=!0),(ai&134217727)===0&&(Gi&134217727)===0||$t===null||Us($t,Ct,Vr,!1)}function Da(o,s,l){var f=Dt;Dt|=2;var C=Op(),A=Mp();($t!==o||Ct!==s)&&(rh=null,qc(o,s)),s=!1;var P=an;e:do try{if(Lt!==0&&ht!==null){var B=ht,Z=yn;switch(Lt){case 8:um(),P=6;break e;case 3:case 2:case 9:case 6:co.current===null&&(s=!0);var me=Lt;if(Lt=0,yn=null,qi(o,B,Z,me),l&&Ki){P=0;break e}break;default:me=Lt,Lt=0,yn=null,qi(o,B,Z,me)}}Tw(),P=an;break}catch(Te){Np(o,Te)}while(!0);return s&&o.shellSuspendCounter++,Qo=Cs=null,Dt=f,D.H=C,D.A=A,ht===null&&($t=null,Ct=0,Vn()),P}function Tw(){for(;ht!==null;)dm(ht)}function Sw(o,s){var l=Dt;Dt|=2;var f=Op(),C=Mp();$t!==o||Ct!==s?(rh=null,nh=Ke()+500,qc(o,s)):Ki=vo(o,s);e:do try{if(Lt!==0&&ht!==null){s=ht;var A=yn;t:switch(Lt){case 1:Lt=0,yn=null,qi(o,s,A,1);break;case 2:case 9:if(tp(A)){Lt=0,yn=null,Rn(s);break}s=function(){Lt!==2&&Lt!==9||$t!==o||(Lt=7),R(o)},A.then(s,s);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:tp(A)?(Lt=0,yn=null,Rn(s)):(Lt=0,yn=null,qi(o,s,A,7));break;case 5:var P=null;switch(ht.tag){case 26:P=ht.memoizedState;case 5:case 27:var B=ht;if(!P||ES(P)){Lt=0,yn=null;var Z=B.sibling;if(Z!==null)ht=Z;else{var me=B.return;me!==null?(ht=me,sh(me)):ht=null}break t}}Lt=0,yn=null,qi(o,s,A,5);break;case 6:Lt=0,yn=null,qi(o,s,A,6);break;case 8:um(),an=6;break e;default:throw Error(r(462))}}xw();break}catch(Te){Np(o,Te)}while(!0);return Qo=Cs=null,D.H=f,D.A=C,Dt=l,ht!==null?0:($t=null,Ct=0,Vn(),an)}function xw(){for(;ht!==null&&!Me();)dm(ht)}function dm(o){var s=Bi(o.alternate,o,ho);o.memoizedProps=o.pendingProps,s===null?sh(o):ht=s}function Rn(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=bw(l,s,s.pendingProps,s.type,void 0,Ct);break;case 11:s=bw(l,s,s.pendingProps,s.type.render,s.ref,Ct);break;case 5:Pi(s);default:Xf(l,s),s=ht=kf(s,ho),s=Bi(l,s,ho)}o.memoizedProps=o.pendingProps,s===null?sh(o):ht=s}function qi(o,s,l,f){Qo=Cs=null,Pi(s),Rs=null,su=0;var C=s.return;try{if(ri(o,C,s,l,Ct)){an=1,cn(o,un(l,o.current)),ht=null;return}}catch(A){if(C!==null)throw ht=C,A;an=1,cn(o,un(l,o.current)),ht=null;return}s.flags&32768?(vt||f===1?o=!0:Ki||(Ct&536870912)!==0?o=!1:($r=o=!0,(f===2||f===9||f===3||f===6)&&(f=co.current,f!==null&&f.tag===13&&(f.flags|=16384))),hm(s,o)):sh(s)}function sh(o){var s=o;do{if((s.flags&32768)!==0){hm(s,$r);return}o=s.return;var l=vp(s.alternate,s,ho);if(l!==null){ht=l;return}if(s=s.sibling,s!==null){ht=s;return}ht=s=o}while(s!==null);an===0&&(an=5)}function hm(o,s){do{var l=Cp(o.alternate,o);if(l!==null){l.flags&=32767,ht=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){ht=o;return}ht=o=l}while(o!==null);an=6,ht=null}function Vc(o,s,l,f,C,A,P,B,Z){o.cancelPendingCommit=null;do Ua();while(Un!==0);if((Dt&6)!==0)throw Error(r(327));if(s!==null){if(s===o.current)throw Error(r(177));if(A=s.lanes|s.childLanes,A|=xf,ta(o,l,A,P,B,Z),o===$t&&(ht=$t=null,Ct=0),Ma=s,Ls=o,Gc=l,Pa=A,cm=C,_p=f,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,kw(Tt,function(){return Dp(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||f){f=D.T,D.T=null,C=F.p,F.p=2,P=Dt,Dt|=4;try{tm(o,s,l)}finally{Dt=P,F.p=C,D.T=f}}Un=1,Pp(),fm(),mm()}}function Pp(){if(Un===1){Un=0;var o=Ls,s=Ma,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=D.T,D.T=null;var f=F.p;F.p=2;var C=Dt;Dt|=4;try{om(s,o);var A=Pw,P=vd(o.containerInfo),B=A.focusedElem,Z=A.selectionRange;if(P!==B&&B&&B.ownerDocument&&yd(B.ownerDocument.documentElement,B)){if(Z!==null&&wf(B)){var me=Z.start,Te=Z.end;if(Te===void 0&&(Te=me),"selectionStart"in B)B.selectionStart=me,B.selectionEnd=Math.min(Te,B.value.length);else{var Re=B.ownerDocument||document,pe=Re&&Re.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),it=B.textContent.length,tt=Math.min(Z.start,it),Yt=Z.end===void 0?tt:Math.min(Z.end,it);!ye.extend&&tt>Yt&&(P=Yt,Yt=tt,tt=P);var ae=pd(B,tt),oe=pd(B,Yt);if(ae&&oe&&(ye.rangeCount!==1||ye.anchorNode!==ae.node||ye.anchorOffset!==ae.offset||ye.focusNode!==oe.node||ye.focusOffset!==oe.offset)){var he=Re.createRange();he.setStart(ae.node,ae.offset),ye.removeAllRanges(),tt>Yt?(ye.addRange(he),ye.extend(oe.node,oe.offset)):(he.setEnd(oe.node,oe.offset),ye.addRange(he))}}}}for(Re=[],ye=B;ye=ye.parentNode;)ye.nodeType===1&&Re.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Re.length;B++){var xe=Re[B];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Vp=!!Mw,Pw=Mw=null}finally{Dt=C,F.p=f,D.T=l}}o.current=s,Un=2}}function fm(){if(Un===2){Un=0;var o=Ls,s=Ma,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=D.T,D.T=null;var f=F.p;F.p=2;var C=Dt;Dt|=4;try{nm(o,s.alternate,s)}finally{Dt=C,F.p=f,D.T=l}}Un=3}}function mm(){if(Un===4||Un===3){Un=0,He();var o=Ls,s=Ma,l=Gc,f=_p;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Un=5:(Un=0,Ma=Ls=null,La(o,o.pendingLanes));var C=o.pendingLanes;if(C===0&&(ko=null),Sl(l),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(tn,s,void 0,(s.current.flags&128)===128)}catch{}if(f!==null){s=D.T,C=F.p,F.p=2,D.T=null;try{for(var A=o.onRecoverableError,P=0;P<f.length;P++){var B=f[P];A(B.value,{componentStack:B.stack})}}finally{D.T=s,F.p=C}}(Gc&3)!==0&&Ua(),R(o),C=o.pendingLanes,(l&4194090)!==0&&(C&42)!==0?o===lm?wu++:(wu=0,lm=o):wu=0,L(0)}}function La(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,yc(s)))}function Ua(o){return Pp(),fm(),mm(),Dp()}function Dp(){if(Un!==5)return!1;var o=Ls,s=Pa;Pa=0;var l=Sl(Gc),f=D.T,C=F.p;try{F.p=32>l?32:l,D.T=null,l=cm,cm=null;var A=Ls,P=Gc;if(Un=0,Ma=Ls=null,Gc=0,(Dt&6)!==0)throw Error(r(331));var B=Dt;if(Dt|=4,Sp(A.current),Ap(A,A.current,P,l),Dt=B,L(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(tn,A)}catch{}return!0}finally{F.p=C,D.T=f,La(o,s)}}function Lp(o,s,l){s=un(l,s),s=$d(o.stateNode,s,2),o=Ts(o,s,2),o!==null&&(Co(o,2),R(o))}function zt(o,s,l){if(o.tag===3)Lp(o,o,l);else for(;s!==null;){if(s.tag===3){Lp(s,o,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ko===null||!ko.has(f))){o=un(l,o),l=du(2),f=Ts(s,l,2),f!==null&&($f(l,f,s,o),Co(f,2),R(f));break}}s=s.return}}function ah(o,s,l){var f=o.pingCache;if(f===null){f=o.pingCache=new Aw;var C=new Set;f.set(s,C)}else C=f.get(s),C===void 0&&(C=new Set,f.set(s,C));C.has(l)||(th=!0,C.add(l),o=ch.bind(null,o,s,l),s.then(o,o))}function ch(o,s,l){var f=o.pingCache;f!==null&&f.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,$t===o&&(Ct&l)===l&&(an===4||an===3&&(Ct&62914560)===Ct&&300>Ke()-Kc?(Dt&2)===0&&qc(o,0):Cu|=l,Oa===Ct&&(Oa=0)),R(o)}function Up(o,s){s===0&&(s=ls()),o=bn(o,s),o!==null&&(Co(o,s),R(o))}function _w(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),Up(o,l)}function Qr(o,s){var l=0;switch(o.tag){case 13:var f=o.stateNode,C=o.memoizedState;C!==null&&(l=C.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(s),Up(o,l)}function kw(o,s){return Le(o,s)}var S=null,i=null,u=!1,g=!1,w=!1,T=0;function R(o){o!==i&&o.next===null&&(i===null?S=i=o:i=i.next=o),g=!0,u||(u=!0,Ye())}function L(o,s){if(!w&&g){w=!0;do for(var l=!1,f=S;f!==null;){if(o!==0){var C=f.pendingLanes;if(C===0)var A=0;else{var P=f.suspendedLanes,B=f.pingedLanes;A=(1<<31-_n(42|o)+1)-1,A&=C&~(P&~B),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(l=!0,je(f,A))}else A=Ct,A=pi(f,f===$t?A:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(A&3)===0||vo(f,A)||(l=!0,je(f,A));f=f.next}while(l);w=!1}}function K(){ne()}function ne(){g=u=!1;var o=0;T!==0&&(R1()&&(o=T),T=0);for(var s=Ke(),l=null,f=S;f!==null;){var C=f.next,A=ve(f,s);A===0?(f.next=null,l===null?S=C:l.next=C,C===null&&(i=l)):(l=f,(o!==0||(A&3)!==0)&&(g=!0)),f=C}L(o)}function ve(o,s){for(var l=o.suspendedLanes,f=o.pingedLanes,C=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var P=31-_n(A),B=1<<P,Z=C[P];Z===-1?((B&l)===0||(B&f)!==0)&&(C[P]=ea(B,s)):Z<=s&&(o.expiredLanes|=B),A&=~B}if(s=$t,l=Ct,l=pi(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,l===0||o===s&&(Lt===2||Lt===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&fe(f),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||vo(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(f!==null&&fe(f),Sl(l)){case 2:case 8:l=lt;break;case 32:l=Tt;break;case 268435456:l=Pt;break;default:l=Tt}return f=Se.bind(null,o),l=Le(l,f),o.callbackPriority=s,o.callbackNode=l,s}return f!==null&&f!==null&&fe(f),o.callbackPriority=2,o.callbackNode=null,2}function Se(o,s){if(Un!==0&&Un!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Ua()&&o.callbackNode!==l)return null;var f=Ct;return f=pi(o,o===$t?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(Ip(o,f,s),ve(o,Ke()),o.callbackNode!=null&&o.callbackNode===l?Se.bind(null,o):null)}function je(o,s){if(Ua())return null;Ip(o,s,!0)}function Ye(){O1(function(){(Dt&6)!==0?Le(et,K):ne()})}function Ut(){return T===0&&(T=yi()),T}function jt(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ol(""+o)}function hr(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function $i(o,s,l,f,C){if(s==="submit"&&l&&l.stateNode===C){var A=jt((C[Cn]||null).action),P=f.submitter;P&&(s=(s=P[Cn]||null)?jt(s.formAction):P.getAttribute("formAction"),s!==null&&(A=s,P=null));var B=new id("action","action",null,f,C);o.push({event:B,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(T!==0){var Z=P?hr(C,P):new FormData(C);ti(l,{pending:!0,data:Z,method:C.method,action:A},null,Z)}}else typeof A=="function"&&(B.preventDefault(),Z=P?hr(C,P):new FormData(C),ti(l,{pending:!0,data:Z,method:C.method,action:A},A,Z))},currentTarget:C}]})}}for(var fr=0;fr<uc.length;fr++){var Yc=uc[fr],gm=Yc.toLowerCase(),lh=Yc[0].toUpperCase()+Yc.slice(1);bo(gm,"on"+lh)}bo(Af,"onAnimationEnd"),bo(_i,"onAnimationIteration"),bo(bd,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(Tf,"onTransitionRun"),bo(Vg,"onTransitionStart"),bo(Yg,"onTransitionCancel"),bo(Sf,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pm));function rS(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var f=o[l],C=f.event;f=f.listeners;e:{var A=void 0;if(s)for(var P=f.length-1;0<=P;P--){var B=f[P],Z=B.instance,me=B.currentTarget;if(B=B.listener,Z!==A&&C.isPropagationStopped())break e;A=B,C.currentTarget=me;try{A(C)}catch(Te){Gd(Te)}C.currentTarget=null,A=Z}else for(P=0;P<f.length;P++){if(B=f[P],Z=B.instance,me=B.currentTarget,B=B.listener,Z!==A&&C.isPropagationStopped())break e;A=B,C.currentTarget=me;try{A(C)}catch(Te){Gd(Te)}C.currentTarget=null,A=Z}}}}function pt(o,s){var l=s[ec];l===void 0&&(l=s[ec]=new Set);var f=o+"__bubble";l.has(f)||(oS(s,o,2,!1),l.add(f))}function Iw(o,s,l){var f=0;s&&(f|=4),oS(l,o,f,s)}var jp="_reactListening"+Math.random().toString(36).slice(2);function Rw(o){if(!o[jp]){o[jp]=!0,ds.forEach(function(l){l!=="selectionchange"&&(x1.has(l)||Iw(l,!1,o),Iw(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[jp]||(s[jp]=!0,Iw("selectionchange",!1,s))}}function oS(o,s,l,f){switch(kS(s)){case 2:var C=Z1;break;case 8:C=eD;break;default:C=Gw}l=C.bind(null,s,l,o),C=void 0,!qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),f?C!==void 0?o.addEventListener(s,l,{capture:!0,passive:C}):o.addEventListener(s,l,!0):C!==void 0?o.addEventListener(s,l,{passive:C}):o.addEventListener(s,l,!1)}function Nw(o,s,l,f,C){var A=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var P=f.tag;if(P===3||P===4){var B=f.stateNode.containerInfo;if(B===C)break;if(P===4)for(P=f.return;P!==null;){var Z=P.tag;if((Z===3||Z===4)&&P.stateNode.containerInfo===C)return;P=P.return}for(;B!==null;){if(P=lr(B),P===null)return;if(Z=P.tag,Z===5||Z===6||Z===26||Z===27){f=A=P;continue e}B=B.parentNode}}f=f.return}nd(function(){var me=A,Te=ic(l),Re=[];e:{var pe=Qg.get(o);if(pe!==void 0){var ye=id,it=o;switch(o){case"keypress":if(la(l)===0)break e;case"keydown":case"keyup":ye=XC;break;case"focusin":it="focus",ye=ad;break;case"focusout":it="blur",ye=ad;break;case"beforeblur":case"afterblur":ye=ad;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=to;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=ew;break;case Af:case _i:case bd:ye=FC;break;case Sf:ye=nw;break;case"scroll":case"scrollend":ye=BC;break;case"wheel":ye=ow;break;case"copy":case"cut":case"paste":ye=GC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=zg;break;case"toggle":case"beforetoggle":ye=sw}var tt=(s&4)!==0,Yt=!tt&&(o==="scroll"||o==="scrollend"),ae=tt?pe!==null?pe+"Capture":null:pe;tt=[];for(var oe=me,he;oe!==null;){var xe=oe;if(he=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||he===null||ae===null||(xe=ca(oe,ae),xe!=null&&tt.push(ym(oe,xe,he))),Yt)break;oe=oe.return}0<tt.length&&(pe=new ye(pe,it,null,l,Te),Re.push({event:pe,listeners:tt}))}}if((s&7)===0){e:{if(pe=o==="mouseover"||o==="pointerover",ye=o==="mouseout"||o==="pointerout",pe&&l!==uf&&(it=l.relatedTarget||l.fromElement)&&(lr(it)||it[Pn]))break e;if((ye||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(it=l.relatedTarget||l.toElement,ye=me,it=it?lr(it):null,it!==null&&(Yt=c(it),tt=it.tag,it!==Yt||tt!==5&&tt!==27&&tt!==6)&&(it=null)):(ye=null,it=me),ye!==it)){if(tt=to,xe="onMouseLeave",ae="onMouseEnter",oe="mouse",(o==="pointerout"||o==="pointerover")&&(tt=zg,xe="onPointerLeave",ae="onPointerEnter",oe="pointer"),Yt=ye==null?pe:eo(ye),he=it==null?pe:eo(it),pe=new tt(xe,oe+"leave",ye,l,Te),pe.target=Yt,pe.relatedTarget=he,xe=null,lr(Te)===me&&(tt=new tt(ae,oe+"enter",it,l,Te),tt.target=he,tt.relatedTarget=Yt,xe=tt),Yt=xe,ye&&it)t:{for(tt=ye,ae=it,oe=0,he=tt;he;he=uh(he))oe++;for(he=0,xe=ae;xe;xe=uh(xe))he++;for(;0<oe-he;)tt=uh(tt),oe--;for(;0<he-oe;)ae=uh(ae),he--;for(;oe--;){if(tt===ae||ae!==null&&tt===ae.alternate)break t;tt=uh(tt),ae=uh(ae)}tt=null}else tt=null;ye!==null&&iS(Re,pe,ye,tt,!1),it!==null&&Yt!==null&&iS(Re,Yt,it,tt,!0)}}e:{if(pe=me?eo(me):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var qe=Bl;else if(Gg(pe))if(ld)qe=fd;else{qe=mw;var mt=fw}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?me&&Nl(me.elementType)&&(qe=Bl):qe=gw;if(qe&&(qe=qe(o,me))){Hl(Re,qe,l,Te);break e}mt&&mt(o,pe,me),o==="focusout"&&me&&pe.type==="number"&&me.memoizedProps.value!=null&&rc(pe,"number",pe.value)}switch(mt=me?eo(me):window,o){case"focusin":(Gg(mt)||mt.contentEditable==="true")&&(lc=mt,Cd=me,zl=null);break;case"focusout":zl=Cd=lc=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,$g(Re,l,Te);break;case"selectionchange":if(qg)break;case"keydown":case"keyup":$g(Re,l,Te)}var Xe;if(mf)e:{switch(o){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else ac?yf(o,l)&&(rt="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(rt="onCompositionStart");rt&&(Fg&&l.locale!=="ko"&&(ac||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&ac&&(Xe=od()):(ms=Te,Ml="value"in ms?ms.value:ms.textContent,ac=!0)),mt=Hp(me,rt),0<mt.length&&(rt=new Bg(rt,o,null,l,Te),Re.push({event:rt,listeners:mt}),Xe?rt.data=Xe:(Xe=Kg(l),Xe!==null&&(rt.data=Xe)))),(Xe=cw?lw(o,l):uw(o,l))&&(rt=Hp(me,"onBeforeInput"),0<rt.length&&(mt=new Bg("onBeforeInput","beforeinput",null,l,Te),Re.push({event:mt,listeners:rt}),mt.data=Xe)),$i(Re,o,me,l,Te)}rS(Re,s)})}function ym(o,s,l){return{instance:o,listener:s,currentTarget:l}}function Hp(o,s){for(var l=s+"Capture",f=[];o!==null;){var C=o,A=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||A===null||(C=ca(o,l),C!=null&&f.unshift(ym(o,C,A)),C=ca(o,s),C!=null&&f.push(ym(o,C,A))),o.tag===3)return f;o=o.return}return[]}function uh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function iS(o,s,l,f,C){for(var A=s._reactName,P=[];l!==null&&l!==f;){var B=l,Z=B.alternate,me=B.stateNode;if(B=B.tag,Z!==null&&Z===f)break;B!==5&&B!==26&&B!==27||me===null||(Z=me,C?(me=ca(l,A),me!=null&&P.unshift(ym(l,me,Z))):C||(me=ca(l,A),me!=null&&P.push(ym(l,me,Z)))),l=l.return}P.length!==0&&o.push({event:s,listeners:P})}var _1=/\r\n?/g,k1=/\u0000|\uFFFD/g;function sS(o){return(typeof o=="string"?o:""+o).replace(_1,`
`).replace(k1,"")}function aS(o,s){return s=sS(s),sS(o)===s}function Bp(){}function Vt(o,s,l,f,C,A){switch(l){case"children":typeof f=="string"?s==="body"||s==="textarea"&&f===""||aa(o,f):(typeof f=="number"||typeof f=="bigint")&&s!=="body"&&aa(o,""+f);break;case"className":wo(o,"class",f);break;case"tabIndex":wo(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":wo(o,l,f);break;case"style":lf(o,f,A);break;case"data":if(s!=="object"){wo(o,"data",f);break}case"src":case"href":if(f===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=Ol(""+f),o.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(l==="formAction"?(s!=="input"&&Vt(o,s,"name",C.name,C,null),Vt(o,s,"formEncType",C.formEncType,C,null),Vt(o,s,"formMethod",C.formMethod,C,null),Vt(o,s,"formTarget",C.formTarget,C,null)):(Vt(o,s,"encType",C.encType,C,null),Vt(o,s,"method",C.method,C,null),Vt(o,s,"target",C.target,C,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(l);break}f=Ol(""+f),o.setAttribute(l,f);break;case"onClick":f!=null&&(o.onclick=Bp);break;case"onScroll":f!=null&&pt("scroll",o);break;case"onScrollEnd":f!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(C.children!=null)throw Error(r(60));o.innerHTML=l}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}l=Ol(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""+f):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":f===!0?o.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(l,f):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(l,f):o.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(l):o.setAttribute(l,f);break;case"popover":pt("beforetoggle",o),pt("toggle",o),Go(o,"popover",f);break;case"xlinkActuate":ur(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ur(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ur(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ur(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ur(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ur(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ur(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ur(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ur(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Go(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=jg.get(l)||l,Go(o,l,f))}}function Ow(o,s,l,f,C,A){switch(l){case"style":lf(o,f,A);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(l=f.__html,l!=null){if(C.children!=null)throw Error(r(60));o.innerHTML=l}}break;case"children":typeof f=="string"?aa(o,f):(typeof f=="number"||typeof f=="bigint")&&aa(o,""+f);break;case"onScroll":f!=null&&pt("scroll",o);break;case"onScrollEnd":f!=null&&pt("scrollend",o);break;case"onClick":f!=null&&(o.onclick=Bp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(C=l.endsWith("Capture"),s=l.slice(2,C?l.length-7:void 0),A=o[Cn]||null,A=A!=null?A[l]:null,typeof A=="function"&&o.removeEventListener(s,A,C),typeof f=="function")){typeof A!="function"&&A!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,f,C);break e}l in o?o[l]=f:f===!0?o.setAttribute(l,""):Go(o,l,f)}}}function mr(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var f=!1,C=!1,A;for(A in l)if(l.hasOwnProperty(A)){var P=l[A];if(P!=null)switch(A){case"src":f=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(o,s,A,P,l,null)}}C&&Vt(o,s,"srcSet",l.srcSet,l,null),f&&Vt(o,s,"src",l.src,l,null);return;case"input":pt("invalid",o);var B=A=P=C=null,Z=null,me=null;for(f in l)if(l.hasOwnProperty(f)){var Te=l[f];if(Te!=null)switch(f){case"name":C=Te;break;case"type":P=Te;break;case"checked":Z=Te;break;case"defaultChecked":me=Te;break;case"value":A=Te;break;case"defaultValue":B=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,s));break;default:Vt(o,s,f,Te,l,null)}}Il(o,A,B,Z,me,P,C,!1),rn(o);return;case"select":pt("invalid",o),f=P=A=null;for(C in l)if(l.hasOwnProperty(C)&&(B=l[C],B!=null))switch(C){case"value":A=B;break;case"defaultValue":P=B;break;case"multiple":f=B;default:Vt(o,s,C,B,l,null)}s=A,l=P,o.multiple=!!f,s!=null?qo(o,!!f,s,!1):l!=null&&qo(o,!!f,l,!0);return;case"textarea":pt("invalid",o),A=C=f=null;for(P in l)if(l.hasOwnProperty(P)&&(B=l[P],B!=null))switch(P){case"value":f=B;break;case"defaultValue":C=B;break;case"children":A=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Vt(o,s,P,B,l,null)}oc(o,f,C,A),rn(o);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(f=l[Z],f!=null))switch(Z){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Vt(o,s,Z,f,l,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(f=0;f<pm.length;f++)pt(pm[f],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in l)if(l.hasOwnProperty(me)&&(f=l[me],f!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Vt(o,s,me,f,l,null)}return;default:if(Nl(s)){for(Te in l)l.hasOwnProperty(Te)&&(f=l[Te],f!==void 0&&Ow(o,s,Te,f,l,void 0));return}}for(B in l)l.hasOwnProperty(B)&&(f=l[B],f!=null&&Vt(o,s,B,f,l,null))}function I1(o,s,l,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,A=null,P=null,B=null,Z=null,me=null,Te=null;for(ye in l){var Re=l[ye];if(l.hasOwnProperty(ye)&&Re!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":Z=Re;default:f.hasOwnProperty(ye)||Vt(o,s,ye,null,f,Re)}}for(var pe in f){var ye=f[pe];if(Re=l[pe],f.hasOwnProperty(pe)&&(ye!=null||Re!=null))switch(pe){case"type":A=ye;break;case"name":C=ye;break;case"checked":me=ye;break;case"defaultChecked":Te=ye;break;case"value":P=ye;break;case"defaultValue":B=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,s));break;default:ye!==Re&&Vt(o,s,pe,ye,f,Re)}}sa(o,P,B,Z,me,Te,A,C);return;case"select":ye=P=B=pe=null;for(A in l)if(Z=l[A],l.hasOwnProperty(A)&&Z!=null)switch(A){case"value":break;case"multiple":ye=Z;default:f.hasOwnProperty(A)||Vt(o,s,A,null,f,Z)}for(C in f)if(A=f[C],Z=l[C],f.hasOwnProperty(C)&&(A!=null||Z!=null))switch(C){case"value":pe=A;break;case"defaultValue":B=A;break;case"multiple":P=A;default:A!==Z&&Vt(o,s,C,A,f,Z)}s=B,l=P,f=ye,pe!=null?qo(o,!!l,pe,!1):!!f!=!!l&&(s!=null?qo(o,!!l,s,!0):qo(o,!!l,l?[]:"",!1));return;case"textarea":ye=pe=null;for(B in l)if(C=l[B],l.hasOwnProperty(B)&&C!=null&&!f.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Vt(o,s,B,null,f,C)}for(P in f)if(C=f[P],A=l[P],f.hasOwnProperty(P)&&(C!=null||A!=null))switch(P){case"value":pe=C;break;case"defaultValue":ye=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==A&&Vt(o,s,P,C,f,A)}Rl(o,pe,ye);return;case"option":for(var it in l)if(pe=l[it],l.hasOwnProperty(it)&&pe!=null&&!f.hasOwnProperty(it))switch(it){case"selected":o.selected=!1;break;default:Vt(o,s,it,null,f,pe)}for(Z in f)if(pe=f[Z],ye=l[Z],f.hasOwnProperty(Z)&&pe!==ye&&(pe!=null||ye!=null))switch(Z){case"selected":o.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Vt(o,s,Z,pe,f,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in l)pe=l[tt],l.hasOwnProperty(tt)&&pe!=null&&!f.hasOwnProperty(tt)&&Vt(o,s,tt,null,f,pe);for(me in f)if(pe=f[me],ye=l[me],f.hasOwnProperty(me)&&pe!==ye&&(pe!=null||ye!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,s));break;default:Vt(o,s,me,pe,f,ye)}return;default:if(Nl(s)){for(var Yt in l)pe=l[Yt],l.hasOwnProperty(Yt)&&pe!==void 0&&!f.hasOwnProperty(Yt)&&Ow(o,s,Yt,void 0,f,pe);for(Te in f)pe=f[Te],ye=l[Te],!f.hasOwnProperty(Te)||pe===ye||pe===void 0&&ye===void 0||Ow(o,s,Te,pe,f,ye);return}}for(var ae in l)pe=l[ae],l.hasOwnProperty(ae)&&pe!=null&&!f.hasOwnProperty(ae)&&Vt(o,s,ae,null,f,pe);for(Re in f)pe=f[Re],ye=l[Re],!f.hasOwnProperty(Re)||pe===ye||pe==null&&ye==null||Vt(o,s,Re,pe,f,ye)}var Mw=null,Pw=null;function zp(o){return o.nodeType===9?o:o.ownerDocument}function cS(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lS(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Dw(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lw=null;function R1(){var o=window.event;return o&&o.type==="popstate"?o===Lw?!1:(Lw=o,!0):(Lw=null,!1)}var uS=typeof setTimeout=="function"?setTimeout:void 0,N1=typeof clearTimeout=="function"?clearTimeout:void 0,dS=typeof Promise=="function"?Promise:void 0,O1=typeof queueMicrotask=="function"?queueMicrotask:typeof dS<"u"?function(o){return dS.resolve(null).then(o).catch(M1)}:uS;function M1(o){setTimeout(function(){throw o})}function Qc(o){return o==="head"}function hS(o,s){var l=s,f=0,C=0;do{var A=l.nextSibling;if(o.removeChild(l),A&&A.nodeType===8)if(l=A.data,l==="/$"){if(0<f&&8>f){l=f;var P=o.ownerDocument;if(l&1&&vm(P.documentElement),l&2&&vm(P.body),l&4)for(l=P.head,vm(l),P=l.firstChild;P;){var B=P.nextSibling,Z=P.nodeName;P[Fo]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&P.rel.toLowerCase()==="stylesheet"||l.removeChild(P),P=B}}if(C===0){o.removeChild(A),xm(s);return}C--}else l==="$"||l==="$?"||l==="$!"?C++:f=l.charCodeAt(0)-48;else f=0;l=A}while(l);xm(s)}function Uw(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Uw(l),vi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function P1(o,s,l,f){for(;o.nodeType===1;){var C=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[Fo])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(A=o.getAttribute("rel"),A==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(A!==C.rel||o.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||o.getAttribute("title")!==(C.title==null?null:C.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(A=o.getAttribute("src"),(A!==(C.src==null?null:C.src)||o.getAttribute("type")!==(C.type==null?null:C.type)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&A&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var A=C.name==null?null:""+C.name;if(C.type==="hidden"&&o.getAttribute("name")===A)return o}else return o;if(o=Vi(o.nextSibling),o===null)break}return null}function D1(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Vi(o.nextSibling),o===null))return null;return o}function jw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function L1(o,s){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")s();else{var f=function(){s(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function Vi(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return o}var Hw=null;function fS(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return o;s--}else l==="/$"&&s++}o=o.previousSibling}return null}function mS(o,s,l){switch(s=zp(l),o){case"html":if(o=s.documentElement,!o)throw Error(r(452));return o;case"head":if(o=s.head,!o)throw Error(r(453));return o;case"body":if(o=s.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function vm(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);vi(o)}var ci=new Map,gS=new Set;function Fp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ja=F.d;F.d={f:U1,r:j1,D:H1,C:B1,L:z1,m:F1,X:G1,S:K1,M:q1};function U1(){var o=ja.f(),s=ih();return o||s}function j1(o){var s=jr(o);s!==null&&s.tag===5&&s.type==="form"?Kf(s):ja.r(o)}var dh=typeof document>"u"?null:document;function pS(o,s,l){var f=dh;if(f&&typeof s=="string"&&s){var C=wn(s);C='link[rel="'+o+'"][href="'+C+'"]',typeof l=="string"&&(C+='[crossorigin="'+l+'"]'),gS.has(C)||(gS.add(C),o={rel:o,crossOrigin:l,href:s},f.querySelector(C)===null&&(s=f.createElement("link"),mr(s,"link",o),nn(s),f.head.appendChild(s)))}}function H1(o){ja.D(o),pS("dns-prefetch",o,null)}function B1(o,s){ja.C(o,s),pS("preconnect",o,s)}function z1(o,s,l){ja.L(o,s,l);var f=dh;if(f&&o&&s){var C='link[rel="preload"][as="'+wn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(C+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(C+='[imagesizes="'+wn(l.imageSizes)+'"]')):C+='[href="'+wn(o)+'"]';var A=C;switch(s){case"style":A=hh(o);break;case"script":A=fh(o)}ci.has(A)||(o=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),ci.set(A,o),f.querySelector(C)!==null||s==="style"&&f.querySelector(Cm(A))||s==="script"&&f.querySelector(wm(A))||(s=f.createElement("link"),mr(s,"link",o),nn(s),f.head.appendChild(s)))}}function F1(o,s){ja.m(o,s);var l=dh;if(l&&o){var f=s&&typeof s.as=="string"?s.as:"script",C='link[rel="modulepreload"][as="'+wn(f)+'"][href="'+wn(o)+'"]',A=C;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=fh(o)}if(!ci.has(A)&&(o=v({rel:"modulepreload",href:o},s),ci.set(A,o),l.querySelector(C)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(wm(A)))return}f=l.createElement("link"),mr(f,"link",o),nn(f),l.head.appendChild(f)}}}function K1(o,s,l){ja.S(o,s,l);var f=dh;if(f&&o){var C=br(f).hoistableStyles,A=hh(o);s=s||"default";var P=C.get(A);if(!P){var B={loading:0,preload:null};if(P=f.querySelector(Cm(A)))B.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},l),(l=ci.get(A))&&Bw(o,l);var Z=P=f.createElement("link");nn(Z),mr(Z,"link",o),Z._p=new Promise(function(me,Te){Z.onload=me,Z.onerror=Te}),Z.addEventListener("load",function(){B.loading|=1}),Z.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Kp(P,s,f)}P={type:"stylesheet",instance:P,count:1,state:B},C.set(A,P)}}}function G1(o,s){ja.X(o,s);var l=dh;if(l&&o){var f=br(l).hoistableScripts,C=fh(o),A=f.get(C);A||(A=l.querySelector(wm(C)),A||(o=v({src:o,async:!0},s),(s=ci.get(C))&&zw(o,s),A=l.createElement("script"),nn(A),mr(A,"link",o),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},f.set(C,A))}}function q1(o,s){ja.M(o,s);var l=dh;if(l&&o){var f=br(l).hoistableScripts,C=fh(o),A=f.get(C);A||(A=l.querySelector(wm(C)),A||(o=v({src:o,async:!0,type:"module"},s),(s=ci.get(C))&&zw(o,s),A=l.createElement("script"),nn(A),mr(A,"link",o),l.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},f.set(C,A))}}function yS(o,s,l,f){var C=(C=Ee.current)?Fp(C):null;if(!C)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=hh(l.href),l=br(C).hoistableStyles,f=l.get(s),f||(f={type:"style",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=hh(l.href);var A=br(C).hoistableStyles,P=A.get(o);if(P||(C=C.ownerDocument||C,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(o,P),(A=C.querySelector(Cm(o)))&&!A._p&&(P.instance=A,P.state.loading=5),ci.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ci.set(o,l),A||$1(C,o,l,P.state))),s&&f===null)throw Error(r(528,""));return P}if(s&&f!==null)throw Error(r(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=fh(l),l=br(C).hoistableScripts,f=l.get(s),f||(f={type:"script",instance:null,count:0,state:null},l.set(s,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function hh(o){return'href="'+wn(o)+'"'}function Cm(o){return'link[rel="stylesheet"]['+o+"]"}function vS(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function $1(o,s,l,f){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?f.loading=1:(s=o.createElement("link"),f.preload=s,s.addEventListener("load",function(){return f.loading|=1}),s.addEventListener("error",function(){return f.loading|=2}),mr(s,"link",l),nn(s),o.head.appendChild(s))}function fh(o){return'[src="'+wn(o)+'"]'}function wm(o){return"script[async]"+o}function CS(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var f=o.querySelector('style[data-href~="'+wn(l.href)+'"]');if(f)return s.instance=f,nn(f),f;var C=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),nn(f),mr(f,"style",C),Kp(f,l.precedence,o),s.instance=f;case"stylesheet":C=hh(l.href);var A=o.querySelector(Cm(C));if(A)return s.state.loading|=4,s.instance=A,nn(A),A;f=vS(l),(C=ci.get(C))&&Bw(f,C),A=(o.ownerDocument||o).createElement("link"),nn(A);var P=A;return P._p=new Promise(function(B,Z){P.onload=B,P.onerror=Z}),mr(A,"link",f),s.state.loading|=4,Kp(A,l.precedence,o),s.instance=A;case"script":return A=fh(l.src),(C=o.querySelector(wm(A)))?(s.instance=C,nn(C),C):(f=l,(C=ci.get(A))&&(f=v({},l),zw(f,C)),o=o.ownerDocument||o,C=o.createElement("script"),nn(C),mr(C,"link",f),o.head.appendChild(C),s.instance=C);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(f=s.instance,s.state.loading|=4,Kp(f,l.precedence,o));return s.instance}function Kp(o,s,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=f.length?f[f.length-1]:null,A=C,P=0;P<f.length;P++){var B=f[P];if(B.dataset.precedence===s)A=B;else if(A!==C)break}A?A.parentNode.insertBefore(o,A.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function Bw(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function zw(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Gp=null;function wS(o,s,l){if(Gp===null){var f=new Map,C=Gp=new Map;C.set(l,f)}else C=Gp,f=C.get(l),f||(f=new Map,C.set(l,f));if(f.has(o))return f;for(f.set(o,null),l=l.getElementsByTagName(o),C=0;C<l.length;C++){var A=l[C];if(!(A[Fo]||A[ke]||o==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var P=A.getAttribute(s)||"";P=o+P;var B=f.get(P);B?B.push(A):f.set(P,[A])}}return f}function bS(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function V1(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ES(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var bm=null;function Y1(){}function Q1(o,s,l){if(bm===null)throw Error(r(475));var f=bm;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var C=hh(l.href),A=o.querySelector(Cm(C));if(A){o=A._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(f.count++,f=qp.bind(f),o.then(f,f)),s.state.loading|=4,s.instance=A,nn(A);return}A=o.ownerDocument||o,l=vS(l),(C=ci.get(C))&&Bw(l,C),A=A.createElement("link"),nn(A);var P=A;P._p=new Promise(function(B,Z){P.onload=B,P.onerror=Z}),mr(A,"link",l),s.instance=A}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(f.count++,s=qp.bind(f),o.addEventListener("load",s),o.addEventListener("error",s))}}function W1(){if(bm===null)throw Error(r(475));var o=bm;return o.stylesheets&&o.count===0&&Fw(o,o.stylesheets),0<o.count?function(s){var l=setTimeout(function(){if(o.stylesheets&&Fw(o,o.stylesheets),o.unsuspend){var f=o.unsuspend;o.unsuspend=null,f()}},6e4);return o.unsuspend=s,function(){o.unsuspend=null,clearTimeout(l)}}:null}function qp(){if(this.count--,this.count===0){if(this.stylesheets)Fw(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var $p=null;function Fw(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,$p=new Map,s.forEach(X1,o),$p=null,qp.call(o))}function X1(o,s){if(!(s.state.loading&4)){var l=$p.get(o);if(l)var f=l.get(null);else{l=new Map,$p.set(o,l);for(var C=o.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<C.length;A++){var P=C[A];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(l.set(P.dataset.precedence,P),f=P)}f&&l.set(null,f)}C=s.instance,P=C.getAttribute("data-precedence"),A=l.get(P)||f,A===f&&l.set(null,C),l.set(P,C),this.count++,f=qp.bind(this),C.addEventListener("load",f),C.addEventListener("error",f),A?A.parentNode.insertBefore(C,A.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(C,o.firstChild)),s.state.loading|=4}}var Em={$$typeof:O,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function J1(o,s,l,f,C,A,P,B){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.hiddenUpdates=Bo(null),this.identifierPrefix=f,this.onUncaughtError=C,this.onCaughtError=A,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function AS(o,s,l,f,C,A,P,B,Z,me,Te,Re){return o=new J1(o,s,l,P,B,Z,me,Re),s=1,A===!0&&(s|=24),A=Tr(3,null,null,s),o.current=A,A.stateNode=o,s=Kl(),s.refCount++,o.pooledCache=s,s.refCount++,A.memoizedState={element:f,isDehydrated:l,cache:s},$l(A),o}function TS(o){return o?(o=$o,o):$o}function SS(o,s,l,f,C,A){C=TS(C),f.context===null?f.context=C:f.pendingContext=C,f=As(s),f.payload={element:l},A=A===void 0?null:A,A!==null&&(f.callback=A),l=Ts(o,f,s),l!==null&&(Pr(l,o,s),Vl(l,o,s))}function xS(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function Kw(o,s){xS(o,s),(o=o.alternate)&&xS(o,s)}function _S(o){if(o.tag===13){var s=bn(o,67108864);s!==null&&Pr(s,o,67108864),Kw(o,67108864)}}var Vp=!0;function Z1(o,s,l,f){var C=D.T;D.T=null;var A=F.p;try{F.p=2,Gw(o,s,l,f)}finally{F.p=A,D.T=C}}function eD(o,s,l,f){var C=D.T;D.T=null;var A=F.p;try{F.p=8,Gw(o,s,l,f)}finally{F.p=A,D.T=C}}function Gw(o,s,l,f){if(Vp){var C=qw(f);if(C===null)Nw(o,s,f,Yp,l),IS(o,f);else if(nD(C,o,s,l,f))f.stopPropagation();else if(IS(o,f),s&4&&-1<tD.indexOf(o)){for(;C!==null;){var A=jr(C);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var P=On(A.pendingLanes);if(P!==0){var B=A;for(B.pendingLanes|=2,B.entangledLanes|=2;P;){var Z=1<<31-_n(P);B.entanglements[1]|=Z,P&=~Z}R(A),(Dt&6)===0&&(nh=Ke()+500,L(0))}}break;case 13:B=bn(A,2),B!==null&&Pr(B,A,2),ih(),Kw(A,2)}if(A=qw(f),A===null&&Nw(o,s,f,Yp,l),A===C)break;C=A}C!==null&&f.stopPropagation()}else Nw(o,s,f,null,l)}}function qw(o){return o=ic(o),$w(o)}var Yp=null;function $w(o){if(Yp=null,o=lr(o),o!==null){var s=c(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=d(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Yp=o,null}function kS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case et:return 2;case lt:return 8;case Tt:case gt:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Vw=!1,Wc=null,Xc=null,Jc=null,Am=new Map,Tm=new Map,Zc=[],tD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IS(o,s){switch(o){case"focusin":case"focusout":Wc=null;break;case"dragenter":case"dragleave":Xc=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":Am.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tm.delete(s.pointerId)}}function Sm(o,s,l,f,C,A){return o===null||o.nativeEvent!==A?(o={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:A,targetContainers:[C]},s!==null&&(s=jr(s),s!==null&&_S(s)),o):(o.eventSystemFlags|=f,s=o.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),o)}function nD(o,s,l,f,C){switch(s){case"focusin":return Wc=Sm(Wc,o,s,l,f,C),!0;case"dragenter":return Xc=Sm(Xc,o,s,l,f,C),!0;case"mouseover":return Jc=Sm(Jc,o,s,l,f,C),!0;case"pointerover":var A=C.pointerId;return Am.set(A,Sm(Am.get(A)||null,o,s,l,f,C)),!0;case"gotpointercapture":return A=C.pointerId,Tm.set(A,Sm(Tm.get(A)||null,o,s,l,f,C)),!0}return!1}function RS(o){var s=lr(o.target);if(s!==null){var l=c(s);if(l!==null){if(s=l.tag,s===13){if(s=d(l),s!==null){o.blockedOn=s,af(o.priority,function(){if(l.tag===13){var f=Yr();f=zo(f);var C=bn(l,f);C!==null&&Pr(C,l,f),Kw(l,f)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qp(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=qw(o.nativeEvent);if(l===null){l=o.nativeEvent;var f=new l.constructor(l.type,l);uf=f,l.target.dispatchEvent(f),uf=null}else return s=jr(l),s!==null&&_S(s),o.blockedOn=l,!1;s.shift()}return!0}function NS(o,s,l){Qp(o)&&l.delete(s)}function rD(){Vw=!1,Wc!==null&&Qp(Wc)&&(Wc=null),Xc!==null&&Qp(Xc)&&(Xc=null),Jc!==null&&Qp(Jc)&&(Jc=null),Am.forEach(NS),Tm.forEach(NS)}function Wp(o,s){o.blockedOn===s&&(o.blockedOn=null,Vw||(Vw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,rD)))}var Xp=null;function OS(o){Xp!==o&&(Xp=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xp===o&&(Xp=null);for(var s=0;s<o.length;s+=3){var l=o[s],f=o[s+1],C=o[s+2];if(typeof f!="function"){if($w(f||l)===null)continue;break}var A=jr(l);A!==null&&(o.splice(s,3),s-=3,ti(A,{pending:!0,data:C,method:l.method,action:f},f,C))}}))}function xm(o){function s(Z){return Wp(Z,o)}Wc!==null&&Wp(Wc,o),Xc!==null&&Wp(Xc,o),Jc!==null&&Wp(Jc,o),Am.forEach(s),Tm.forEach(s);for(var l=0;l<Zc.length;l++){var f=Zc[l];f.blockedOn===o&&(f.blockedOn=null)}for(;0<Zc.length&&(l=Zc[0],l.blockedOn===null);)RS(l),l.blockedOn===null&&Zc.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var C=l[f],A=l[f+1],P=C[Cn]||null;if(typeof A=="function")P||OS(l);else if(P){var B=null;if(A&&A.hasAttribute("formAction")){if(C=A,P=A[Cn]||null)B=P.formAction;else if($w(C)!==null)continue}else B=P.action;typeof B=="function"?l[f+1]=B:(l.splice(f,3),f-=3),OS(l)}}}function Yw(o){this._internalRoot=o}Jp.prototype.render=Yw.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(r(409));var l=s.current,f=Yr();SS(l,f,o,s,null,null)},Jp.prototype.unmount=Yw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;SS(o.current,2,null,o,null,null),ih(),s[Pn]=null}};function Jp(o){this._internalRoot=o}Jp.prototype.unstable_scheduleHydration=function(o){if(o){var s=nt();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Zc.length&&s!==0&&s<Zc[l].priority;l++);Zc.splice(l,0,o),l===0&&RS(o)}};var MS=e.version;if(MS!=="19.1.1")throw Error(r(527,MS,"19.1.1"));F.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=p(s),o=o!==null?y(o):null,o=o===null?null:o.stateNode,o};var oD={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zp.isDisabled&&Zp.supportsFiber)try{tn=Zp.inject(oD),Ht=Zp}catch{}}return km.createRoot=function(o,s){if(!a(o))throw Error(r(299));var l=!1,f="",C=lu,A=fp,P=uu,B=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(C=s.onUncaughtError),s.onCaughtError!==void 0&&(A=s.onCaughtError),s.onRecoverableError!==void 0&&(P=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(B=s.unstable_transitionCallbacks)),s=AS(o,1,!1,null,null,l,f,C,A,P,B,null),o[Pn]=s.current,Rw(o),new Yw(s)},km.hydrateRoot=function(o,s,l){if(!a(o))throw Error(r(299));var f=!1,C="",A=lu,P=fp,B=uu,Z=null,me=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onUncaughtError!==void 0&&(A=l.onUncaughtError),l.onCaughtError!==void 0&&(P=l.onCaughtError),l.onRecoverableError!==void 0&&(B=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(me=l.formState)),s=AS(o,1,!0,s,l??null,f,C,A,P,B,Z,me),s.context=TS(null),l=s.current,f=Yr(),f=zo(f),C=As(f),C.callback=null,Ts(l,C,f),l=f,s.current.lanes=l,Co(s,l),R(s),o[Pn]=s.current,Rw(o),new Jp(s)},km.version="19.1.1",km}var KS;function gD(){if(KS)return Xw.exports;KS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xw.exports=mD(),Xw.exports}var pD=gD();/*! @azure/msal-common v15.13.0 2025-09-24 */const Ie={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},dl={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},xu={GET:"GET",POST:"POST"},Wh=[Ie.OPENID_SCOPE,Ie.PROFILE_SCOPE,Ie.OFFLINE_ACCESS_SCOPE],GS=[...Wh,Ie.EMAIL_SCOPE],Xr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},qS={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},hl={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ey={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},vr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},GE={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Lv={QUERY:"query",FRAGMENT:"fragment"},yD={QUERY:"query"},M_={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},ty={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Zm={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},pr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},qE="appmetadata",vD="client_info",Hy="1",By={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Io={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},gr={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Kt={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Fm={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},$S={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},mh={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},tb={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Tu={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},CD={Pop:"pop"},P_=300;/*! @azure/msal-common v15.13.0 2025-09-24 */const zy="unexpected_error",wD="post_request_failed";/*! @azure/msal-common v15.13.0 2025-09-24 */const VS={[zy]:"Unexpected error in authentication.",[wD]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Wt extends Error{constructor(e,n,r){const a=n?`${e}: ${n}`:e;super(a),Object.setPrototypeOf(this,Wt.prototype),this.errorCode=e||Ie.EMPTY_STRING,this.errorMessage=n||Ie.EMPTY_STRING,this.subError=r||Ie.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Hb(t,e){return new Wt(t,e?`${VS[t]} ${e}`:VS[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */const $E="client_info_decoding_error",D_="client_info_empty_error",VE="token_parsing_error",L_="null_or_empty_token",Fa="endpoints_resolution_error",U_="network_error",j_="openid_config_error",H_="hash_not_deserialized",Oh="invalid_state",B_="state_mismatch",Bb="state_not_found",z_="nonce_mismatch",YE="auth_time_not_found",F_="max_age_transpired",bD="multiple_matching_tokens",ED="multiple_matching_accounts",K_="multiple_matching_appMetadata",G_="request_cannot_be_made",q_="cannot_remove_empty_scope",$_="cannot_append_scopeset",zb="empty_input_scopeset",AD="device_code_polling_cancelled",TD="device_code_expired",SD="device_code_unknown_error",QE="no_account_in_silent_request",V_="invalid_cache_record",WE="invalid_cache_environment",Fb="no_account_found",Kb="no_crypto_object",xD="unexpected_credential_type",_D="invalid_assertion",kD="invalid_client_credential",fl="token_refresh_required",ID="user_timeout_reached",Y_="token_claims_cnf_required_for_signedjwt",Q_="authorization_code_missing_from_server_response",W_="binding_key_not_removed",X_="end_session_endpoint_not_supported",XE="key_id_missing",RD="no_network_connectivity",ND="user_canceled",OD="missing_tenant_id_error",dt="method_not_implemented",MD="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.13.0 2025-09-24 */const YS={[$E]:"The client info could not be parsed/decoded correctly",[D_]:"The client info was empty",[VE]:"Token cannot be parsed",[L_]:"The token is null or empty",[Fa]:"Endpoints cannot be resolved",[U_]:"Network request failed",[j_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[H_]:"The hash parameters could not be deserialized",[Oh]:"State was not the expected format",[B_]:"State mismatch error",[Bb]:"State not found",[z_]:"Nonce mismatch error",[YE]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[F_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[bD]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ED]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[K_]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[G_]:"Token request cannot be made without authorization code or refresh token.",[q_]:"Cannot remove null or empty scope from ScopeSet",[$_]:"Cannot append ScopeSet",[zb]:"Empty input ScopeSet cannot be processed",[AD]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[TD]:"Device code is expired.",[SD]:"Device code stopped polling for unknown reasons.",[QE]:"Please pass an account object, silent flow is not supported without account information",[V_]:"Cache record object was null or undefined.",[WE]:"Invalid environment when attempting to create cache entry",[Fb]:"No account found in cache for given key.",[Kb]:"No crypto object detected.",[xD]:"Unexpected credential type.",[_D]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[kD]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[fl]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[ID]:"User defined timeout for device code polling reached",[Y_]:"Cannot generate a POP jwt if the token_claims are not populated",[Q_]:"Server response does not contain an authorization code to proceed",[W_]:"Could not remove the credential's binding key from storage.",[X_]:"The provided authority does not support logout",[XE]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[RD]:"No network connectivity. Check your internet connection.",[ND]:"User cancelled the flow.",[OD]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[dt]:"This method has not been implemented",[MD]:"The nested app auth bridge is disabled"};class JE extends Wt{constructor(e,n){super(e,n?`${YS[e]}: ${n}`:YS[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,JE.prototype)}}function Pe(t,e){return new JE(t,e)}/*! @azure/msal-common v15.13.0 2025-09-24 */const Fy={createNewGuid:()=>{throw Pe(dt)},base64Decode:()=>{throw Pe(dt)},base64Encode:()=>{throw Pe(dt)},base64UrlEncode:()=>{throw Pe(dt)},encodeKid:()=>{throw Pe(dt)},async getPublicKeyThumbprint(){throw Pe(dt)},async removeTokenBindingKey(){throw Pe(dt)},async clearKeystore(){throw Pe(dt)},async signJwt(){throw Pe(dt)},async hashString(){throw Pe(dt)}};/*! @azure/msal-common v15.13.0 2025-09-24 */var Zt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Zt||(Zt={}));class $a{constructor(e,n,r){this.level=Zt.Info;const a=()=>{},c=e||$a.createDefaultLoggerOptions();this.localCallback=c.loggerCallback||a,this.piiLoggingEnabled=c.piiLoggingEnabled||!1,this.level=typeof c.logLevel=="number"?c.logLevel:Zt.Info,this.correlationId=c.correlationId||Ie.EMPTY_STRING,this.packageName=n||Ie.EMPTY_STRING,this.packageVersion=r||Ie.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Zt.Info}}clone(e,n,r){return new $a({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const c=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Zt[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,c,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:Zt.Error,containsPii:!1,correlationId:n||Ie.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:Zt.Error,containsPii:!0,correlationId:n||Ie.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:Zt.Warning,containsPii:!1,correlationId:n||Ie.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:Zt.Warning,containsPii:!0,correlationId:n||Ie.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:Zt.Info,containsPii:!1,correlationId:n||Ie.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:Zt.Info,containsPii:!0,correlationId:n||Ie.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:Zt.Verbose,containsPii:!1,correlationId:n||Ie.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:Zt.Verbose,containsPii:!0,correlationId:n||Ie.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:Zt.Trace,containsPii:!1,correlationId:n||Ie.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:Zt.Trace,containsPii:!0,correlationId:n||Ie.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.13.0 2025-09-24 */const J_="@azure/msal-common",ZE="15.13.0";/*! @azure/msal-common v15.13.0 2025-09-24 */const eA={None:"none"};/*! @azure/msal-common v15.13.0 2025-09-24 */const Z_="redirect_uri_empty",PD="claims_request_parsing_error",ek="authority_uri_insecure",Dm="url_parse_error",tk="empty_url_error",nk="empty_input_scopes_error",tA="invalid_claims",rk="token_request_empty",ok="logout_request_empty",DD="invalid_code_challenge_method",nA="pkce_params_missing",rA="invalid_cloud_discovery_metadata",ik="invalid_authority_metadata",sk="untrusted_authority",Uv="missing_ssh_jwk",ak="missing_ssh_kid",LD="missing_nonce_authentication_header",UD="invalid_authentication_header",ck="cannot_set_OIDCOptions",lk="cannot_allow_platform_broker",uk="authority_mismatch",dk="invalid_request_method_for_EAR",hk="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.0 2025-09-24 */const jD={[Z_]:"A redirect URI is required for all calls, and none has been set.",[PD]:"Could not parse the given claims request object.",[ek]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Dm]:"URL could not be parsed into appropriate segments.",[tk]:"URL was empty or null.",[nk]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[tA]:"Given claims parameter must be a stringified JSON object.",[rk]:"Token request was empty and not found in cache.",[ok]:"The logout request was null or undefined.",[DD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[nA]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[rA]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[ik]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[sk]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Uv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ak]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[LD]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[UD]:"Invalid authentication header provided",[ck]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[lk]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[uk]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[hk]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[dk]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class oA extends Wt{constructor(e){super(e,jD[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,oA.prototype)}}function en(t){return new oA(t)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Do{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),a=c=>decodeURIComponent(c.replace(/\+/g," "));return r.forEach(c=>{if(c.trim()){const[d,m]=c.split(/=(.+)/g,2);d&&m&&(n[a(d)]=a(m))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Jn{constructor(e){const n=e?Do.trimArrayEntries([...e]):[],r=n?Do.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw en(nk);this.scopes=new Set,r.forEach(a=>this.scopes.add(a))}static fromString(e){const r=(e||Ie.EMPTY_STRING).split(" ");return new Jn(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...Wh],r=new Jn(n);return r.containsOnlyOIDCScopes()?r.removeScope(Ie.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Jn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return GS.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw Pe($_)}}removeScope(e){if(!e)throw Pe(q_);this.scopes.delete(e.trim())}removeOIDCScopes(){GS.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Pe(zb);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw Pe(zb);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),a=this.getScopeCount();return n.size<a+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):Ie.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-09-24 */function QS(t,e){return!!t&&!!e&&t===e.split(".")[1]}function iA(t,e,n,r){if(r){const{oid:a,sub:c,tid:d,name:m,tfp:p,acr:y,preferred_username:v,upn:b,login_hint:E}=r,x=d||p||y||"";return{tenantId:x,localAccountId:a||c||"",name:m,username:v||b||"",loginHint:E,isHomeTenant:QS(x,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:QS(n,t)}}function sA(t,e,n,r){let a=t;if(e){const{isHomeTenant:c,...d}=e;a={...t,...d}}if(n){const{isHomeTenant:c,...d}=iA(t.homeAccountId,t.localAccountId,t.tenantId,n);return a={...a,...d,idTokenClaims:n,idToken:r},a}return a}/*! @azure/msal-common v15.13.0 2025-09-24 */function Xh(t,e){const n=HD(t);try{const r=e(n);return JSON.parse(r)}catch{throw Pe(VE)}}function HD(t){if(!t)throw Pe(L_);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Pe(VE);return n[2]}function fk(t,e){if(e===0||Date.now()-3e5>t+e)throw Pe(F_)}/*! @azure/msal-common v15.13.0 2025-09-24 */function WS(t){if(!t)return t;let e=t.toLowerCase();return Do.endsWith(e,"?")?e=e.slice(0,-1):Do.endsWith(e,"?/")&&(e=e.slice(0,-2)),Do.endsWith(e,"/")||(e+="/"),e}function mk(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Ky(t){if(!t||t.indexOf("=")<0)return null;try{const e=mk(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw Pe(H_)}return null}function eg(t,e=!0,n){const r=new Array;return t.forEach((a,c)=>{!e&&n&&c in n?r.push(`${c}=${a}`):r.push(`${c}=${encodeURIComponent(a)}`)}),r.join("&")}function XS(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return WS(r)}catch{return WS(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ot{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw en(tk);e.includes("#")||(this._urlString=Ot.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Do.endsWith(n,"?")?n=n.slice(0,-1):Do.endsWith(n,"?/")&&(n=n.slice(0,-2)),Do.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw en(Dm)}if(!e.HostNameAndPort||!e.PathSegments)throw en(Dm);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw en(ek)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return Ot.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===hl.COMMON||r[0]===hl.ORGANIZATIONS)&&(r[0]=e),Ot.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw en(Dm);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let a=r.AbsolutePath.split("/");return a=a.filter(c=>c&&c.length>0),r.PathSegments=a,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw en(Dm);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===Ie.FORWARD_SLASH){const a=new Ot(n).getUrlComponents();return a.Protocol+"//"+a.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Ot(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Ky(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const gk={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},JS=gk.endpointMetadata,aA=gk.instanceDiscoveryMetadata,pk=new Set;aA.metadata.forEach(t=>{t.aliases.forEach(e=>{pk.add(e)})});function BD(t,e){let n;const r=t.canonicalAuthority;if(r){const a=new Ot(r).getUrlComponents().HostNameAndPort;n=ZS(a,t.cloudDiscoveryMetadata?.metadata,Io.CONFIG,e)||ZS(a,aA.metadata,Io.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function ZS(t,e,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const a=Gy(e,t);if(a)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),a.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function zD(t){return Gy(aA.metadata,t)}function Gy(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.0 2025-09-24 */const qy="cache_quota_exceeded",cA="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-09-24 */const nb={[qy]:"Exceeded cache storage capacity.",[cA]:"Unexpected error occurred when using cache storage."};class Th extends Wt{constructor(e,n){const r=n||(nb[e]?nb[e]:nb[cA]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Th.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Gb(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new Th(qy):new Th(t.name,t.message):new Th(cA)}/*! @azure/msal-common v15.13.0 2025-09-24 */class qb{constructor(e,n,r,a,c){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(J_,ZE),this.staticAuthorityOptions=c,this.performanceClient=a}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(a=>!a))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(c=>c.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(a=>this.getTenantProfilesFromAccountEntity(a,n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,a,c){let d=null,m;if(c&&!this.tenantProfileMatchesFilter(r,c))return null;const p=this.getIdToken(e,a,n,r.tenantId);return p&&(m=Xh(p.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(m,c))?null:(d=sA(e,r,m,p?.secret),d)}getTenantProfilesFromAccountEntity(e,n,r,a){const c=e.getAccountInfo();let d=c.tenantProfiles||new Map;const m=this.getTokenKeys();if(r){const y=d.get(r);if(y)d=new Map([[r,y]]);else return[]}const p=[];return d.forEach(y=>{const v=this.getTenantedAccountInfoByFilter(c,m,y,n,a);v&&p.push(v)}),p}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){if(!e)throw Pe(V_);try{e.account&&await this.setAccount(e.account,n),e.idToken&&r?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&r?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(a){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),a instanceof Wt?a:Gb(a)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},a=this.getTokenKeys(),c=Jn.fromString(e.target);a.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,r,!1))return;const m=this.getAccessTokenCredential(d,n);m&&this.credentialMatchesFilter(m,r)&&Jn.fromString(m.target).intersectingScopeSets(c)&&this.removeAccessToken(d,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),a=[];return r.forEach(c=>{const d=this.getAccount(c,n);if(!d||e.homeAccountId&&!this.matchHomeAccountId(d,e.homeAccountId)||e.username&&!this.matchUsername(d.username,e.username)||e.environment&&!this.matchEnvironment(d,e.environment)||e.realm&&!this.matchRealm(d,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(d,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(d,e.authorityType))return;const m={localAccountId:e?.localAccountId,name:e?.name},p=d.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,m));p&&p.length===0||a.push(d)}),a}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===pr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Kt.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(a=>{if(!this.isAppMetadata(a))return;const c=this.getAppMetadata(a);c&&(e.environment&&!this.matchEnvironment(c,e.environment)||e.clientId&&!this.matchClientId(c,e.clientId)||(r[a]=c))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(a=>{if(!this.isAuthorityMetadata(a)||a.indexOf(this.clientId)===-1)return;const c=this.getAuthorityMetadata(a);c&&c.aliases.indexOf(e)!==-1&&(r=c)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),a=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);r.filter(a).forEach(c=>{this.removeItem(c,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),a=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);r.idToken.filter(a).forEach(c=>{this.removeIdToken(c,n)}),r.accessToken.filter(a).forEach(c=>{this.removeAccessToken(c,n)}),r.refreshToken.filter(a).forEach(c=>{this.removeRefreshToken(c,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==pr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Kt.POP)return;const a=r.keyId;a&&this.cryptoImpl.removeTokenBindingKey(a).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${a}`,n),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,a,c){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:pr.ID_TOKEN,clientId:this.clientId,realm:a},m=this.getIdTokensByFilter(d,n,r),p=m.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(p>1){let y=m;if(!a){const v=new Map;m.forEach((E,x)=>{E.realm===e.tenantId&&v.set(x,E)});const b=v.size;if(b<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),m.values().next().value;if(b===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),v.values().next().value;y=v}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((v,b)=>{this.removeIdToken(b,n)}),c&&n&&c.addFields({multiMatchedID:m.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),m.values().next().value}getIdTokensByFilter(e,n,r){const a=r&&r.idToken||this.getTokenKeys().idToken,c=new Map;return a.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...e}))return;const m=this.getIdTokenCredential(d,n);m&&this.credentialMatchesFilter(m,e)&&c.set(d,m)}),c}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,a){const c=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",c);const d=Jn.createSearchScopes(n.scopes),m=n.authenticationScheme||Kt.BEARER,p=m.toLowerCase()!==Kt.BEARER.toLowerCase()?pr.ACCESS_TOKEN_WITH_AUTH_SCHEME:pr.ACCESS_TOKEN,y={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:p,clientId:this.clientId,realm:a||e.tenantId,target:d,tokenType:m,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},v=r&&r.accessToken||this.getTokenKeys().accessToken,b=[];v.forEach(x=>{if(this.accessTokenKeyMatchesFilter(x,y,!0)){const I=this.getAccessTokenCredential(x,c);I&&this.credentialMatchesFilter(I,y)&&b.push(I)}});const E=b.length;return E<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",c),null):E>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",c),b.forEach(x=>{this.removeAccessToken(this.generateCredentialKey(x),c)}),this.performanceClient.addFields({multiMatchedAT:b.length},c),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",c),b[0])}accessTokenKeyMatchesFilter(e,n,r){const a=e.toLowerCase();if(n.clientId&&a.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&a.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&a.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&a.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const c=n.target.asArray();for(let d=0;d<c.length;d++){if(r&&!a.includes(c[d].toLowerCase()))return!1;if(!r&&a.includes(c[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),a=[];return r.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,e,!0))return;const d=this.getAccessTokenCredential(c,n);d&&this.credentialMatchesFilter(d,e)&&a.push(d)}),a}getRefreshToken(e,n,r,a,c){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=n?Hy:void 0,m={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:pr.REFRESH_TOKEN,clientId:this.clientId,familyId:d},p=a&&a.refreshToken||this.getTokenKeys().refreshToken,y=[];p.forEach(b=>{if(this.refreshTokenKeyMatchesFilter(b,m)){const E=this.getRefreshTokenCredential(b,r);E&&this.credentialMatchesFilter(E,m)&&y.push(E)}});const v=y.length;return v<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(v>1&&c&&r&&c.addFields({multiMatchedRT:v},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),a=Object.keys(r).map(d=>r[d]),c=a.length;if(c<1)return null;if(c>1)throw Pe(K_);return a[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Hy)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!!(e&&typeof e=="string"&&n?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const a=BD(this.staticAuthorityOptions,this.commonLogger);if(a.includes(n)&&a.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==pr.ACCESS_TOKEN&&e.credentialType!==pr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Jn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(qE)!==-1}isAuthorityMetadata(e){return e.indexOf(By.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${By.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class FD extends qb{async setAccount(){throw Pe(dt)}getAccount(){throw Pe(dt)}async setIdTokenCredential(){throw Pe(dt)}getIdTokenCredential(){throw Pe(dt)}async setAccessTokenCredential(){throw Pe(dt)}getAccessTokenCredential(){throw Pe(dt)}async setRefreshTokenCredential(){throw Pe(dt)}getRefreshTokenCredential(){throw Pe(dt)}setAppMetadata(){throw Pe(dt)}getAppMetadata(){throw Pe(dt)}setServerTelemetry(){throw Pe(dt)}getServerTelemetry(){throw Pe(dt)}setAuthorityMetadata(){throw Pe(dt)}getAuthorityMetadata(){throw Pe(dt)}getAuthorityMetadataKeys(){throw Pe(dt)}setThrottlingCache(){throw Pe(dt)}getThrottlingCache(){throw Pe(dt)}removeItem(){throw Pe(dt)}getKeys(){throw Pe(dt)}getAccountKeys(){throw Pe(dt)}getTokenKeys(){throw Pe(dt)}generateCredentialKey(){throw Pe(dt)}generateAccountKey(){throw Pe(dt)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const go={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-09-24 */const ie={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},KD={InProgress:1};/*! @azure/msal-common v15.13.0 2025-09-24 */class ex{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class yk{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:KD.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new ex}}startPerformanceMeasurement(){return new ex}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-09-24 */const vk={tokenRenewalOffsetSeconds:P_,preventCorsPreflight:!1},GD={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Zt.Info,correlationId:Ie.EMPTY_STRING},qD={claimsBasedCachingEnabled:!1},$D={async sendGetRequestAsync(){throw Pe(dt)},async sendPostRequestAsync(){throw Pe(dt)}},VD={sku:Ie.SKU,version:ZE,cpu:Ie.EMPTY_STRING,os:Ie.EMPTY_STRING},YD={clientSecret:Ie.EMPTY_STRING,clientAssertion:void 0},QD={azureCloudInstance:eA.None,tenant:`${Ie.DEFAULT_COMMON_TENANT}`},WD={application:{appName:"",appVersion:""}};function XD({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:a,networkInterface:c,cryptoInterface:d,clientCredentials:m,libraryInfo:p,telemetry:y,serverTelemetryManager:v,persistencePlugin:b,serializableCache:E}){const x={...GD,...n};return{authOptions:JD(t),systemOptions:{...vk,...e},loggerOptions:x,cacheOptions:{...qD,...r},storageInterface:a||new FD(t.clientId,Fy,new $a(x),new yk),networkInterface:c||$D,cryptoInterface:d||Fy,clientCredentials:m||YD,libraryInfo:{...VD,...p},telemetry:{...WD,...y},serverTelemetryManager:v||null,persistencePlugin:b||null,serializableCache:E||null}}function JD(t){return{clientCapabilities:[],azureCloudOptions:QD,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function Ck(t){return t.authOptions.authority.options.protocolMode===go.OIDC}/*! @azure/msal-common v15.13.0 2025-09-24 */const Zi={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-09-24 */function $y(t,e){if(!t)throw Pe(D_);try{const n=e(t);return JSON.parse(n)}catch{throw Pe($E)}}function Sh(t){if(!t)throw Pe($E);const e=t.split(Zm.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Ie.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Nu="client_id",wk="redirect_uri",ZD="response_type",e2="response_mode",t2="grant_type",n2="claims",r2="scope",o2="refresh_token",i2="state",s2="nonce",a2="prompt",c2="code",l2="code_challenge",u2="code_challenge_method",d2="code_verifier",h2="client-request-id",f2="x-client-SKU",m2="x-client-VER",g2="x-client-OS",p2="x-client-CPU",y2="x-client-current-telemetry",v2="x-client-last-telemetry",C2="x-ms-lib-capability",w2="x-app-name",b2="x-app-ver",E2="post_logout_redirect_uri",A2="id_token_hint",T2="client_secret",S2="client_assertion",x2="client_assertion_type",bk="token_type",Ek="req_cnf",tx="return_spa_code",_2="nativebroker",k2="logout_hint",I2="sid",R2="login_hint",N2="domain_hint",O2="x-client-xtra-sku",Vy="brk_client_id",Yy="brk_redirect_uri",$b="instance_aware",M2="ear_jwk",P2="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-09-24 */function jv(t,e,n){if(!e)return;const r=t.get(Nu);r&&t.has(Vy)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(wk)},e)}function lA(t,e){t.set(ZD,e)}function D2(t,e){t.set(e2,e||yD.QUERY)}function L2(t){t.set(_2,"1")}function uA(t,e,n=!0,r=Wh){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const a=n?[...e||[],...r]:e||[],c=new Jn(a);t.set(r2,c.printScopes())}function dA(t,e){t.set(Nu,e)}function hA(t,e){t.set(wk,e)}function U2(t,e){t.set(E2,e)}function j2(t,e){t.set(A2,e)}function H2(t,e){t.set(N2,e)}function ny(t,e){t.set(R2,e)}function Qy(t,e){t.set(Xr.CCS_HEADER,`UPN:${e}`)}function Km(t,e){t.set(Xr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function nx(t,e){t.set(I2,e)}function fA(t,e,n){const r=q2(e,n);try{JSON.parse(r)}catch{throw en(tA)}t.set(n2,r)}function mA(t,e){t.set(h2,e)}function gA(t,e){t.set(f2,e.sku),t.set(m2,e.version),e.os&&t.set(g2,e.os),e.cpu&&t.set(p2,e.cpu)}function pA(t,e){e?.appName&&t.set(w2,e.appName),e?.appVersion&&t.set(b2,e.appVersion)}function B2(t,e){t.set(a2,e)}function Ak(t,e){e&&t.set(i2,e)}function z2(t,e){t.set(s2,e)}function Tk(t,e,n){if(e&&n)t.set(l2,e),t.set(u2,n);else throw en(nA)}function F2(t,e){t.set(c2,e)}function K2(t,e){t.set(o2,e)}function G2(t,e){t.set(d2,e)}function Sk(t,e){t.set(T2,e)}function xk(t,e){e&&t.set(S2,e)}function _k(t,e){e&&t.set(x2,e)}function kk(t,e){t.set(t2,e)}function yA(t){t.set(vD,"1")}function Ik(t){t.has($b)||t.set($b,"true")}function ml(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function q2(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw en(tA)}return e&&e.length>0&&(n.hasOwnProperty(ey.ACCESS_TOKEN)||(n[ey.ACCESS_TOKEN]={}),n[ey.ACCESS_TOKEN][ey.XMS_CC]={values:e}),JSON.stringify(n)}function vA(t,e){e&&(t.set(bk,Kt.POP),t.set(Ek,e))}function Rk(t,e){e&&(t.set(bk,Kt.SSH),t.set(Ek,e))}function Nk(t,e){t.set(y2,e.generateCurrentRequestHeaderValue()),t.set(v2,e.generateLastRequestHeaderValue())}function Ok(t){t.set(C2,Fm.X_MS_LIB_CAPABILITY_VALUE)}function $2(t,e){t.set(k2,e)}function Hv(t,e,n){t.has(Vy)||t.set(Vy,e),t.has(Yy)||t.set(Yy,n)}function V2(t,e){t.set(M2,encodeURIComponent(e)),t.set(P2,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Y2(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.13.0 2025-09-24 */const Qi={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-09-24 */function Q2(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-09-24 */function W2(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-09-24 */function X2(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-09-24 */const Lo=(t,e,n,r,a)=>(...c)=>{n.trace(`Executing function ${e}`);const d=r?.startMeasurement(e,a);if(a){const m=e+"CallCount";r?.incrementFields({[m]:1},a)}try{const m=t(...c);return d?.end({success:!0}),n.trace(`Returning result from ${e}`),m}catch(m){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(m))}catch{n.trace("Unable to print error message.")}throw d?.end({success:!1},m),m}},_e=(t,e,n,r,a)=>(...c)=>{n.trace(`Executing function ${e}`);const d=r?.startMeasurement(e,a);if(a){const m=e+"CallCount";r?.incrementFields({[m]:1},a)}return r?.setPreQueueTime(e,a),t(...c).then(m=>(n.trace(`Returning result from ${e}`),d?.end({success:!0}),m)).catch(m=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(m))}catch{n.trace("Unable to print error message.")}throw d?.end({success:!1},m),m})};/*! @azure/msal-common v15.13.0 2025-09-24 */class Bv{constructor(e,n,r,a){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=a}async detectRegion(e,n){this.performanceClient?.addQueueMeasurement(ie.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=mh.ENVIRONMENT_VARIABLE;else{const a=Bv.IMDS_OPTIONS;try{const c=await _e(this.getRegionFromIMDS.bind(this),ie.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Ie.IMDS_VERSION,a);if(c.status===dl.SUCCESS&&(r=c.body,n.region_source=mh.IMDS),c.status===dl.BAD_REQUEST){const d=await _e(this.getCurrentVersion.bind(this),ie.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(a);if(!d)return n.region_source=mh.FAILED_AUTO_DETECTION,null;const m=await _e(this.getRegionFromIMDS.bind(this),ie.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,a);m.status===dl.SUCCESS&&(r=m.body,n.region_source=mh.IMDS)}}catch{return n.region_source=mh.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=mh.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){return this.performanceClient?.addQueueMeasurement(ie.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Ie.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,Ie.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(ie.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const n=await this.networkInterface.sendGetRequestAsync(`${Ie.IMDS_ENDPOINT}?format=json`,e);return n.status===dl.BAD_REQUEST&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}}}Bv.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-09-24 */function po(){return Math.round(new Date().getTime()/1e3)}function rx(t){return t.getTime()/1e3}function xh(t){return t?new Date(Number(t)*1e3):new Date}function Wy(t,e){const n=Number(t)||0;return po()+e>n}function J2(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function Z2(t){return Number(t)>po()}/*! @azure/msal-common v15.13.0 2025-09-24 */function zv(t,e,n,r,a){return{credentialType:pr.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:a,lastUpdatedAt:Date.now().toString()}}function Fv(t,e,n,r,a,c,d,m,p,y,v,b,E,x,I){const k={homeAccountId:t,credentialType:pr.ACCESS_TOKEN,secret:n,cachedAt:po().toString(),expiresOn:d.toString(),extendedExpiresOn:m.toString(),environment:e,clientId:r,realm:a,target:c,tokenType:v||Kt.BEARER,lastUpdatedAt:Date.now().toString()};if(b&&(k.userAssertionHash=b),y&&(k.refreshOn=y.toString()),x&&(k.requestedClaims=x,k.requestedClaimsHash=I),k.tokenType?.toLowerCase()!==Kt.BEARER.toLowerCase())switch(k.credentialType=pr.ACCESS_TOKEN_WITH_AUTH_SCHEME,k.tokenType){case Kt.POP:const N=Xh(n,p);if(!N?.cnf?.kid)throw Pe(Y_);k.keyId=N.cnf.kid;break;case Kt.SSH:k.keyId=E}return k}function Mk(t,e,n,r,a,c,d){const m={credentialType:pr.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return c&&(m.userAssertionHash=c),a&&(m.familyId=a),d&&(m.expiresOn=d.toString()),m}function CA(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function ox(t){return t?CA(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===pr.ACCESS_TOKEN||t.credentialType===pr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function eL(t){return t?CA(t)&&t.hasOwnProperty("realm")&&t.credentialType===pr.ID_TOKEN:!1}function ix(t){return t?CA(t)&&t.credentialType===pr.REFRESH_TOKEN:!1}function tL(t,e){const n=t.indexOf(gr.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function nL(t,e){let n=!1;t&&(n=t.indexOf(Fm.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function rL({environment:t,clientId:e}){return[qE,t,e].join(Zm.CACHE_KEY_SEPARATOR).toLowerCase()}function oL(t,e){return e?t.indexOf(qE)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function iL(t,e){return e?t.indexOf(By.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function sx(){return po()+By.REFRESH_TIME_SECONDS}function ry(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function rb(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function ax(t){return t.expiresAt<=po()}/*! @azure/msal-common v15.13.0 2025-09-24 */class Lr{constructor(e,n,r,a,c,d,m,p){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=a,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=c,this.performanceClient=m,this.correlationId=d,this.managedIdentity=p||!1,this.regionDiscovery=new Bv(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Ie.CIAM_AUTH_URL))return Qi.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case Ie.ADFS:return Qi.Adfs;case Ie.DSTS:return Qi.Dsts}return Qi.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Ot(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Pe(Fa)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Pe(Fa)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Pe(Fa)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Pe(X_);return this.replacePath(this.metadata.end_session_endpoint)}else throw Pe(Fa)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Pe(Fa)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Pe(Fa)}canReplaceTenant(e){return e.PathSegments.length===1&&!Lr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Qi.Default&&this.protocolMode!==go.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const a=new Ot(this.metadata.canonical_authority).getUrlComponents(),c=a.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((m,p)=>{let y=c[p];if(p===0&&this.canReplaceTenant(a)){const v=new Ot(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==v&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${v}`),y=v)}m!==y&&(n=n.replace(`/${y}/`,`/${m}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Qi.Adfs||this.protocolMode===go.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(ie.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await _e(this.updateCloudDiscoveryMetadata.bind(this),ie.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await _e(this.updateEndpointMetadata.bind(this),ie.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:sx(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Io.CACHE&&r?.source!==Io.CACHE&&(e.expiresAt=sx(),e.canonical_authority=this.canonicalAuthority);const a=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(a,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(ie.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Io.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&n.metadata){const a=await _e(this.updateMetadataWithRegionalInformation.bind(this),ie.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);ry(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await _e(this.getEndpointMetadataFromNetwork.bind(this),ie.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await _e(this.updateMetadataWithRegionalInformation.bind(this),ie.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),ry(e,r,!0),Io.NETWORK;throw Pe(j_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),ry(e,n,!1),{source:Io.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const a=this.getEndpointMetadataFromHardcodedValues();if(a)return ry(e,a,!1),{source:Io.HARDCODED_VALUES,metadata:a};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=ax(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Io.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Ot(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw en(ik)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ie.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const r=await this.networkInterface.sendGetRequestAsync(n,e);return Q2(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in JS?JS[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ie.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(n){if(n!==Ie.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=tb.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,Lr.replaceWithRegionalInformation(e,n);const r=await _e(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),ie.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=tb.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,Lr.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=tb.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(ie.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await _e(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ie.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return rb(e,r,!0),Io.NETWORK;throw en(sk)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Ie.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Ie.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Ie.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),rb(e,n,!1),Io.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const a=zD(this.hostnameAndPort);if(a)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),rb(e,a,!1),Io.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=ax(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Io.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Qi.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Gy(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),en(rA)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ie.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Ie.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const a=await this.networkInterface.sendGetRequestAsync(e,n);let c,d;if(W2(a.body))c=a.body,d=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(X2(a.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${a.status}`),c=a.body,c.error===Ie.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Gy(d,this.hostnameAndPort)}catch(a){if(a instanceof Wt)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${a.errorCode}
Error Description: ${a.errorMessage}`);else{const c=a;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&Ot.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==eA.None){const a=n.tenant?n.tenant:Ie.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${a}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Ie.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Pe(Fa)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return pk.has(e)}static isPublicCloudAuthority(e){return Ie.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const a=new Ot(e);a.validateAsUri();const c=a.getUrlComponents();let d=`${n}.${c.HostNameAndPort}`;this.isPublicCloudAuthority(c.HostNameAndPort)&&(d=`${n}.${Ie.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const m=Ot.constructAuthorityUriFromObject({...a.getUrlComponents(),HostNameAndPort:d}).urlString;return r?`${m}?${r}`:m}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Lr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Lr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Lr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const a=new Ot(e).getUrlComponents();if(a.PathSegments.length===0&&a.HostNameAndPort.endsWith(Ie.CIAM_AUTH_URL)){const c=a.HostNameAndPort.split(".")[0];n=`${n}${c}${Ie.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}Lr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",hl.COMMON,hl.CONSUMERS,hl.ORGANIZATIONS]);function sL(t){const r=new Ot(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case hl.COMMON:case hl.ORGANIZATIONS:case hl.CONSUMERS:return;default:return r}}function Pk(t){return t.endsWith(Ie.FORWARD_SLASH)?t:`${t}${Ie.FORWARD_SLASH}`}function aL(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw en(rA)}return{canonicalAuthority:t.authority?Pk(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.13.0 2025-09-24 */async function Dk(t,e,n,r,a,c,d){d?.addQueueMeasurement(ie.AuthorityFactoryCreateDiscoveredInstance,c);const m=Lr.transformCIAMAuthority(Pk(t)),p=new Lr(m,e,n,r,a,c,d);try{return await _e(p.resolveEndpointsAsync.bind(p),ie.AuthorityResolveEndpointsAsync,a,d,c)(),p}catch{throw Pe(Fa)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Xu extends Wt{constructor(e,n,r,a,c){super(e,n,r),this.name="ServerError",this.errorNo=a,this.status=c,Object.setPrototypeOf(this,Xu.prototype)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function Kv(t,e,n){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}/*! @azure/msal-common v15.13.0 2025-09-24 */class zs{static generateThrottlingStorageKey(e){return`${Fm.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){const a=zs.generateThrottlingStorageKey(n),c=e.getThrottlingCache(a);if(c){if(c.throttleTime<Date.now()){e.removeItem(a,r);return}throw new Xu(c.errorCodes?.join(" ")||Ie.EMPTY_STRING,c.errorMessage,c.subError)}}static postProcess(e,n,r,a){if(zs.checkResponseStatus(r)||zs.checkResponseForRetryAfter(r)){const c={throttleTime:zs.calculateThrottleTime(parseInt(r.headers[Xr.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(zs.generateThrottlingStorageKey(n),c,a)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Xr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Fm.DEFAULT_THROTTLE_TIME_SECONDS),r+Fm.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,a){const c=Kv(n,r,a),d=this.generateThrottlingStorageKey(c);e.removeItem(d,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Gv extends Wt{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Gv.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function Lm(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new Gv(t,e,n)}/*! @azure/msal-common v15.13.0 2025-09-24 */class wA{constructor(e,n){this.config=XD(e),this.logger=new $a(this.config.loggerOptions,J_,ZE),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Xr.CONTENT_TYPE]=Ie.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Zi.HOME_ACCOUNT_ID:try{const r=Sh(e.credential);n[Xr.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Zi.UPN:n[Xr.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,a,c,d){d&&this.performanceClient?.addQueueMeasurement(d,c);const m=await this.sendPostRequest(a,e,{body:n,headers:r},c);return this.config.serverTelemetryManager&&m.status<500&&m.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),m}async sendPostRequest(e,n,r,a){zs.preProcess(this.cacheManager,e,a);let c;try{c=await _e(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ie.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,a)(n,r);const d=c.headers||{};this.performanceClient?.addFields({refreshTokenSize:c.body.refresh_token?.length||0,httpVerToken:d[Xr.X_MS_HTTP_VERSION]||"",requestId:d[Xr.X_MS_REQUEST_ID]||""},a)}catch(d){if(d instanceof Gv){const m=d.responseHeaders;throw m&&this.performanceClient?.addFields({httpVerToken:m[Xr.X_MS_HTTP_VERSION]||"",requestId:m[Xr.X_MS_REQUEST_ID]||"",contentTypeHeader:m[Xr.CONTENT_TYPE]||void 0,contentLengthHeader:m[Xr.CONTENT_LENGTH]||void 0,httpStatus:d.httpStatus},a),d.error}throw d instanceof Wt?d:Pe(U_)}return zs.postProcess(this.cacheManager,e,c,a),c}async updateAuthority(e,n){this.performanceClient?.addQueueMeasurement(ie.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,a=await Dk(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=a}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&Hv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&ml(n,e.tokenQueryParameters),mA(n,e.correlationId),jv(n,e.correlationId,this.performanceClient),eg(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function Lk(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */class ns{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){const a=new ns;n.authorityType===Qi.Adfs?a.authorityType=ty.ADFS_ACCOUNT_TYPE:n.protocolMode===go.OIDC?a.authorityType=ty.GENERIC_ACCOUNT_TYPE:a.authorityType=ty.MSSTS_ACCOUNT_TYPE;let c;e.clientInfo&&r&&(c=$y(e.clientInfo,r),c.xms_tdbr&&(a.dataBoundary=c.xms_tdbr==="EU"?"EU":"None")),a.clientInfo=e.clientInfo,a.homeAccountId=e.homeAccountId,a.nativeAccountId=e.nativeAccountId;const d=e.environment||n&&n.getPreferredCache();if(!d)throw Pe(WE);a.environment=d,a.realm=c?.utid||Lk(e.idTokenClaims)||"",a.localAccountId=c?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const m=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,p=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(a.username=m||p||"",a.loginHint=e.idTokenClaims?.login_hint,a.name=e.idTokenClaims?.name||"",a.cloudGraphHostName=e.cloudGraphHostName,a.msGraphHost=e.msGraphHost,e.tenantProfiles)a.tenantProfiles=e.tenantProfiles;else{const y=iA(e.homeAccountId,a.localAccountId,a.realm,e.idTokenClaims);a.tenantProfiles=[y]}return a}static createFromAccountInfo(e,n,r){const a=new ns;return a.authorityType=e.authorityType||ty.GENERIC_ACCOUNT_TYPE,a.homeAccountId=e.homeAccountId,a.localAccountId=e.localAccountId,a.nativeAccountId=e.nativeAccountId,a.realm=e.tenantId,a.environment=e.environment,a.username=e.username,a.name=e.name,a.loginHint=e.loginHint,a.cloudGraphHostName=n,a.msGraphHost=r,a.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),a.dataBoundary=e.dataBoundary,a}static generateHomeAccountId(e,n,r,a,c){if(!(n===Qi.Adfs||n===Qi.Dsts)){if(e)try{const d=$y(e,a.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}r.warning("No client info in response")}return c?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let a=!0;if(r){const c=e.idTokenClaims||{},d=n.idTokenClaims||{};a=c.iat===d.iat&&c.nonce===d.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&a}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Xy="no_tokens_found",Uk="native_account_unavailable",bA="refresh_token_expired",EA="ux_not_allowed",cL="interaction_required",lL="consent_required",uL="login_required",qv="bad_token";/*! @azure/msal-common v15.13.0 2025-09-24 */const cx=[cL,lL,uL,qv,EA],dL=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],hL={[Xy]:"No refresh token found in the cache. Please sign-in.",[Uk]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[bA]:"Refresh token has expired.",[qv]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[EA]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class jo extends Wt{constructor(e,n,r,a,c,d,m,p){super(e,n,r),Object.setPrototypeOf(this,jo.prototype),this.timestamp=a||Ie.EMPTY_STRING,this.traceId=c||Ie.EMPTY_STRING,this.correlationId=d||Ie.EMPTY_STRING,this.claims=m||Ie.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=p}}function jk(t,e,n){const r=!!t&&cx.indexOf(t)>-1,a=!!n&&dL.indexOf(n)>-1,c=!!e&&cx.some(d=>e.indexOf(d)>-1);return r||c||a}function Jy(t){return new jo(t,hL[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class Jh{static setRequestState(e,n,r){const a=Jh.generateLibraryState(e,r);return n?`${a}${Ie.RESOURCE_DELIM}${n}`:a}static generateLibraryState(e,n){if(!e)throw Pe(Kb);const r={id:e.createNewGuid()};n&&(r.meta=n);const a=JSON.stringify(r);return e.base64Encode(a)}static parseRequestState(e,n){if(!e)throw Pe(Kb);if(!n)throw Pe(Oh);try{const r=n.split(Ie.RESOURCE_DELIM),a=r[0],c=r.length>1?r.slice(1).join(Ie.RESOURCE_DELIM):Ie.EMPTY_STRING,d=e.base64Decode(a),m=JSON.parse(d);return{userRequestState:c||Ie.EMPTY_STRING,libraryState:m}}catch{throw Pe(Oh)}}}/*! @azure/msal-common v15.13.0 2025-09-24 */const fL={SW:"sw"};class Mh{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){this.performanceClient?.addQueueMeasurement(ie.PopTokenGenerateCnf,e.correlationId);const r=await _e(this.generateKid.bind(this),ie.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),a=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:a}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(ie.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:fL.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,a){const{resourceRequestMethod:c,resourceRequestUri:d,shrClaims:m,shrNonce:p,shrOptions:y}=r,b=(d?new Ot(d):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:po(),m:c?.toUpperCase(),u:b?.HostNameAndPort,nonce:p||this.cryptoUtils.createNewGuid(),p:b?.AbsolutePath,q:b?.QueryString?[[],b.QueryString]:void 0,client_claims:m||void 0,...a},n,y,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class mL{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ou{constructor(e,n,r,a,c,d,m){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=a,this.serializableCache=c,this.persistencePlugin=d,this.performanceClient=m}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||Ie.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Ie.NOT_AVAILABLE} - Description: ${e.error_description||Ie.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Ie.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Ie.NOT_AVAILABLE}`,a=e.error_codes?.length?e.error_codes[0]:void 0,c=new Xu(e.error,r,e.suberror,a,e.status);if(n&&e.status&&e.status>=dl.SERVER_ERROR_RANGE_START&&e.status<=dl.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${c}`);return}else if(n&&e.status&&e.status>=dl.CLIENT_ERROR_RANGE_START&&e.status<=dl.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${c}`);return}throw jk(e.error,e.error_description,e.suberror)?new jo(e.error,e.error_description,e.suberror,e.timestamp||Ie.EMPTY_STRING,e.trace_id||Ie.EMPTY_STRING,e.correlation_id||Ie.EMPTY_STRING,e.claims||Ie.EMPTY_STRING,a):c}}async handleServerTokenResponse(e,n,r,a,c,d,m,p,y){this.performanceClient?.addQueueMeasurement(ie.HandleServerTokenResponse,e.correlation_id);let v;if(e.id_token){if(v=Xh(e.id_token||Ie.EMPTY_STRING,this.cryptoObj.base64Decode),c&&c.nonce&&v.nonce!==c.nonce)throw Pe(z_);if(a.maxAge||a.maxAge===0){const I=v.auth_time;if(!I)throw Pe(YE);fk(I,a.maxAge)}}this.homeAccountIdentifier=ns.generateHomeAccountId(e.client_info||Ie.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,v);let b;c&&c.state&&(b=Jh.parseRequestState(this.cryptoObj,c.state)),e.key_id=e.key_id||a.sshKid||void 0;const E=this.generateCacheRecord(e,n,r,a,v,d,c);let x;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),x=new mL(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(x)),m&&!p&&E.account){const I=this.cacheStorage.generateAccountKey(E.account.getAccountInfo());if(!this.cacheStorage.getAccount(I,a.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Ou.generateAuthenticationResult(this.cryptoObj,n,E,!1,a,v,b,void 0,y)}await this.cacheStorage.saveCacheRecord(E,a.correlationId,a.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&x&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(x))}return Ou.generateAuthenticationResult(this.cryptoObj,n,E,!1,a,v,b,e,y)}generateCacheRecord(e,n,r,a,c,d,m){const p=n.getPreferredCache();if(!p)throw Pe(WE);const y=Lk(c);let v,b;e.id_token&&c&&(v=zv(this.homeAccountIdentifier,p,e.id_token,this.clientId,y||""),b=AA(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,a.correlationId,c,e.client_info,p,y,m,void 0,this.logger));let E=null;if(e.access_token){const k=e.scope?Jn.fromString(e.scope):new Jn(a.scopes||[]),N=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,M=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,j=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,O=r+N,U=O+M,H=j&&j>0?r+j:void 0;E=Fv(this.homeAccountIdentifier,p,e.access_token,this.clientId,y||n.tenant||"",k.printScopes(),O,U,this.cryptoObj.base64Decode,H,e.token_type,d,e.key_id,a.claims,a.requestedClaimsHash)}let x=null;if(e.refresh_token){let k;if(e.refresh_token_expires_in){const N=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;k=r+N}x=Mk(this.homeAccountIdentifier,p,e.refresh_token,this.clientId,e.foci,d,k)}let I=null;return e.foci&&(I={clientId:this.clientId,environment:p,familyId:e.foci}),{account:b,idToken:v,accessToken:E,refreshToken:x,appMetadata:I}}static async generateAuthenticationResult(e,n,r,a,c,d,m,p,y){let v=Ie.EMPTY_STRING,b=[],E=null,x,I,k=Ie.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Kt.POP&&!c.popKid){const O=new Mh(e),{secret:U,keyId:H}=r.accessToken;if(!H)throw Pe(XE);v=await O.signPopToken(U,H,c)}else v=r.accessToken.secret;b=Jn.fromString(r.accessToken.target).asArray(),E=xh(r.accessToken.expiresOn),x=xh(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(I=xh(r.accessToken.refreshOn))}r.appMetadata&&(k=r.appMetadata.familyId===Hy?Hy:"");const N=d?.oid||d?.sub||"",M=d?.tid||"";p?.spa_accountid&&r.account&&(r.account.nativeAccountId=p?.spa_accountid);const j=r.account?sA(r.account.getAccountInfo(),void 0,d,r.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:N,tenantId:M,scopes:b,account:j,idToken:r?.idToken?.secret||"",idTokenClaims:d||{},accessToken:v,fromCache:a,expiresOn:E,extExpiresOn:x,refreshOn:I,correlationId:c.correlationId,requestId:y||Ie.EMPTY_STRING,familyId:k,tokenType:r.accessToken?.tokenType||Ie.EMPTY_STRING,state:m?m.userRequestState:Ie.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||Ie.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||Ie.EMPTY_STRING,code:p?.spa_code,fromNativeBroker:!1}}}function AA(t,e,n,r,a,c,d,m,p,y,v,b){b?.verbose("setCachedAccount called");const x=t.getAccountKeys().find(j=>j.startsWith(n));let I=null;x&&(I=t.getAccount(x,a));const k=I||ns.createAccount({homeAccountId:n,idTokenClaims:c,clientInfo:d,environment:m,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:v},e,r),N=k.tenantProfiles||[],M=p||k.realm;if(M&&!N.find(j=>j.tenantId===M)){const j=iA(n,k.localAccountId,M,c);N.push(j)}return k.tenantProfiles=N,k}/*! @azure/msal-common v15.13.0 2025-09-24 */async function Hk(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.13.0 2025-09-24 */class Bk extends wA{constructor(e,n){super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,n){if(this.performanceClient?.addQueueMeasurement(ie.AuthClientAcquireToken,e.correlationId),!e.code)throw Pe(G_);const r=po(),a=await _e(this.executeTokenRequest.bind(this),ie.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),c=a.headers?.[Xr.X_MS_REQUEST_ID],d=new Ou(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return d.validateTokenResponse(a.body),_e(d.handleServerTokenResponse.bind(d),ie.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(a.body,this.authority,r,e,n,void 0,void 0,void 0,c)}getLogoutUri(e){if(!e)throw en(ok);const n=this.createLogoutUrlQueryString(e);return Ot.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){this.performanceClient?.addQueueMeasurement(ie.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),a=Ot.appendQueryString(e.tokenEndpoint,r),c=await _e(this.createTokenRequestBody.bind(this),ie.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let d;if(n.clientInfo)try{const y=$y(n.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${y.uid}${Zm.CLIENT_INFO_SEPARATOR}${y.utid}`,type:Zi.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const m=this.createTokenRequestHeaders(d||n.ccsCredential),p=Kv(this.config.authOptions.clientId,n);return _e(this.executePostToTokenEndpoint.bind(this),ie.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(a,c,m,p,n.correlationId,ie.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ie.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(dA(n,e.embeddedClientId||e.tokenBodyParameters?.[Nu]||this.config.authOptions.clientId),this.includeRedirectUri)hA(n,e.redirectUri);else if(!e.redirectUri)throw en(Z_);if(uA(n,e.scopes,!0,this.oidcDefaultScopes),F2(n,e.code),gA(n,this.config.libraryInfo),pA(n,this.config.telemetry.application),Ok(n),this.serverTelemetryManager&&!Ck(this.config)&&Nk(n,this.serverTelemetryManager),e.codeVerifier&&G2(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&Sk(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;xk(n,await Hk(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),_k(n,a.assertionType)}if(kk(n,M_.AUTHORIZATION_CODE_GRANT),yA(n),e.authenticationScheme===Kt.POP){const a=new Mh(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await _e(a.generateCnf.bind(a),ie.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,vA(n,c)}else if(e.authenticationScheme===Kt.SSH)if(e.sshJwk)Rk(n,e.sshJwk);else throw en(Uv);(!Do.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fA(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const a=$y(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${a.uid}${Zm.CLIENT_INFO_SEPARATOR}${a.utid}`,type:Zi.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Zi.HOME_ACCOUNT_ID:try{const a=Sh(r.credential);Km(n,a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case Zi.UPN:Qy(n,r.credential);break}return e.embeddedClientId&&Hv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ml(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[tx])&&ml(n,{[tx]:"1"}),jv(n,e.correlationId,this.performanceClient),eg(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&U2(n,e.postLogoutRedirectUri),e.correlationId&&mA(n,e.correlationId),e.idTokenHint&&j2(n,e.idTokenHint),e.state&&Ak(n,e.state),e.logoutHint&&$2(n,e.logoutHint),e.extraQueryParameters&&ml(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&Ik(n),eg(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const gL=300;class pL extends wA{constructor(e,n){super(e,n)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(ie.RefreshTokenClientAcquireToken,e.correlationId);const n=po(),r=await _e(this.executeTokenRequest.bind(this),ie.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),a=r.headers?.[Xr.X_MS_REQUEST_ID],c=new Ou(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(r.body),_e(c.handleServerTokenResponse.bind(c),ie.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,a)}async acquireTokenByRefreshToken(e){if(!e)throw en(rk);if(this.performanceClient?.addQueueMeasurement(ie.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Pe(QE);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await _e(this.acquireTokenWithCachedRefreshToken.bind(this),ie.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){const a=r instanceof jo&&r.errorCode===Xy,c=r instanceof Xu&&r.errorCode===$S.INVALID_GRANT_ERROR&&r.subError===$S.CLIENT_MISMATCH_ERROR;if(a||c)return _e(this.acquireTokenWithCachedRefreshToken.bind(this),ie.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return _e(this.acquireTokenWithCachedRefreshToken.bind(this),ie.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){this.performanceClient?.addQueueMeasurement(ie.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Lo(this.cacheManager.getRefreshToken.bind(this.cacheManager),ie.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw Jy(Xy);if(r.expiresOn&&Wy(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||gL))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Jy(bA);const a={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Kt.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Zi.HOME_ACCOUNT_ID}};try{return await _e(this.acquireToken.bind(this),ie.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(a)}catch(c){if(c instanceof jo&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===qv)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const d=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(d,e.correlationId)}throw c}}async executeTokenRequest(e,n){this.performanceClient?.addQueueMeasurement(ie.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),a=Ot.appendQueryString(n.tokenEndpoint,r),c=await _e(this.createTokenRequestBody.bind(this),ie.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),d=this.createTokenRequestHeaders(e.ccsCredential),m=Kv(this.config.authOptions.clientId,e);return _e(this.executePostToTokenEndpoint.bind(this),ie.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(a,c,d,m,e.correlationId,ie.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ie.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(dA(n,e.embeddedClientId||e.tokenBodyParameters?.[Nu]||this.config.authOptions.clientId),e.redirectUri&&hA(n,e.redirectUri),uA(n,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),kk(n,M_.REFRESH_TOKEN_GRANT),yA(n),gA(n,this.config.libraryInfo),pA(n,this.config.telemetry.application),Ok(n),this.serverTelemetryManager&&!Ck(this.config)&&Nk(n,this.serverTelemetryManager),K2(n,e.refreshToken),this.config.clientCredentials.clientSecret&&Sk(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;xk(n,await Hk(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),_k(n,r.assertionType)}if(e.authenticationScheme===Kt.POP){const r=new Mh(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await _e(r.generateCnf.bind(r),ie.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,vA(n,a)}else if(e.authenticationScheme===Kt.SSH)if(e.sshJwk)Rk(n,e.sshJwk);else throw en(Uv);if((!Do.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&fA(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Zi.HOME_ACCOUNT_ID:try{const r=Sh(e.ccsCredential.credential);Km(n,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Zi.UPN:Qy(n,e.ccsCredential.credential);break}return e.embeddedClientId&&Hv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&ml(n,e.tokenBodyParameters),jv(n,e.correlationId,this.performanceClient),eg(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class yL extends wA{constructor(e,n){super(e,n)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(ie.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Tu.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Do.isEmptyObj(e.claims))throw this.setCacheOutcome(Tu.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Pe(fl);if(!e.account)throw Pe(QE);const r=e.account.tenantId||sL(e.authority),a=this.cacheManager.getTokenKeys(),c=this.cacheManager.getAccessToken(e.account,e,a,r);if(c){if(Z2(c.cachedAt)||Wy(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Tu.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Pe(fl);c.refreshOn&&Wy(c.refreshOn,0)&&(n=Tu.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Tu.NO_CACHED_ACCESS_TOKEN,e.correlationId),Pe(fl);const d=e.authority||this.authority.getPreferredCache(),m={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:c,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,a,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await _e(this.generateResultFromCacheRecord.bind(this),ie.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(m,e),n]}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),e!==Tu.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){this.performanceClient?.addQueueMeasurement(ie.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=Xh(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const a=r?.auth_time;if(!a)throw Pe(YE);fk(a,n.maxAge)}return Ou.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const vL={sendGetRequestAsync:()=>Promise.reject(Pe(dt)),sendPostRequestAsync:()=>Promise.reject(Pe(dt))};/*! @azure/msal-common v15.13.0 2025-09-24 */function CL(t,e,n,r){const a=e.correlationId,c=new Map;dA(c,e.embeddedClientId||e.extraQueryParameters?.[Nu]||t.clientId);const d=[...e.scopes||[],...e.extraScopesToConsent||[]];if(uA(c,d,!0,t.authority.options.OIDCOptions?.defaultScopes),hA(c,e.redirectUri),mA(c,a),D2(c,e.responseMode),yA(c),e.prompt&&(B2(c,e.prompt),r?.addFields({prompt:e.prompt},a)),e.domainHint&&(H2(c,e.domainHint),r?.addFields({domainHintFromRequest:!0},a)),e.prompt!==vr.SELECT_ACCOUNT)if(e.sid&&e.prompt===vr.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),nx(c,e.sid),r?.addFields({sidFromRequest:!0},a);else if(e.account){const m=EL(e.account);let p=AL(e.account);if(p&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),p=null),p){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),ny(c,p),r?.addFields({loginHintFromClaim:!0},a);try{const y=Sh(e.account.homeAccountId);Km(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(m&&e.prompt===vr.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),nx(c,m),r?.addFields({sidFromClaim:!0},a);try{const y=Sh(e.account.homeAccountId);Km(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),ny(c,e.loginHint),Qy(c,e.loginHint),r?.addFields({loginHintFromRequest:!0},a);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),ny(c,e.account.username),r?.addFields({loginHintFromUpn:!0},a);try{const y=Sh(e.account.homeAccountId);Km(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),ny(c,e.loginHint),Qy(c,e.loginHint),r?.addFields({loginHintFromRequest:!0},a));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&z2(c,e.nonce),e.state&&Ak(c,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&fA(c,e.claims,t.clientCapabilities),e.embeddedClientId&&Hv(c,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes($b))&&Ik(c),c}function TA(t,e,n,r){const a=eg(e,n,r);return Ot.appendQueryString(t.authorizationEndpoint,a)}function wL(t,e){if(zk(t,e),!t.code)throw Pe(Q_);return t}function zk(t,e){if(!t.state||!e)throw t.state?Pe(Bb,"Cached State"):Pe(Bb,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw Pe(Oh,t.state)}try{r=decodeURIComponent(e)}catch{throw Pe(Oh,t.state)}if(n!==r)throw Pe(B_);if(t.error||t.error_description||t.suberror){const a=bL(t);throw jk(t.error,t.error_description,t.suberror)?new jo(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",a):new Xu(t.error||"",t.error_description,t.suberror,a)}}function bL(t){const e="code=",n=t.error_uri?.lastIndexOf(e);return n&&n>=0?t.error_uri?.substring(n+e.length):void 0}function EL(t){return t.idTokenClaims?.sid||null}function AL(t){return t.loginHint||t.idTokenClaims?.login_hint||null}/*! @azure/msal-common v15.13.0 2025-09-24 */const lx=",",Fk="|";function TL(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:a,extensionVersion:c}=t,d=new Map([[0,[n,r]],[2,[a,c]]]);let m=[];if(e?.length){if(m=e.split(lx),m.length<4)return e}else m=Array.from({length:4},()=>Fk);return d.forEach((p,y)=>{p.length===2&&p[0]?.length&&p[1]?.length&&SL({skuArr:m,index:y,skuName:p[0],skuVersion:p[1]})}),m.join(lx)}function SL(t){const{skuArr:e,index:n,skuName:r,skuVersion:a}=t;n>=e.length||(e[n]=[r,a].join(Fk))}class tg{constructor(e,n){this.cacheOutcome=Tu.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Ie.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Ie.EMPTY_STRING,this.telemetryCacheKey=gr.CACHE_KEY+Zm.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${gr.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&n.push(`broker_error=${r}`);const a=n.join(gr.VALUE_SEPARATOR),c=this.getRegionDiscoveryFields(),d=[e,c].join(gr.VALUE_SEPARATOR);return[gr.SCHEMA_VERSION,d,a].join(gr.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=tg.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(gr.VALUE_SEPARATOR),a=e.errors.slice(0,n).join(gr.VALUE_SEPARATOR),c=e.errors.length,d=n<c?gr.OVERFLOW_TRUE:gr.OVERFLOW_FALSE,m=[c,d].join(gr.VALUE_SEPARATOR);return[gr.SCHEMA_VERSION,e.cacheHits,r,a,m].join(gr.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=gr.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Wt?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(gr.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=tg.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const a={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,a,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,a=0;const c=e.errors.length;for(n=0;n<c;n++){const d=e.failedRequests[2*n]||Ie.EMPTY_STRING,m=e.failedRequests[2*n+1]||Ie.EMPTY_STRING,p=e.errors[n]||Ie.EMPTY_STRING;if(a+=d.toString().length+m.toString().length+p.length+3,a<gr.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Ie.EMPTY_STRING),e.push(this.regionSource||Ie.EMPTY_STRING),e.push(this.regionOutcome||Ie.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return TL(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Kk="missing_kid_error",Gk="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-09-24 */const xL={[Kk]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Gk]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class SA extends Wt{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,SA.prototype)}}function ux(t){return new SA(t,xL[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class xA{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ux(Kk);if(!e.alg)throw ux(Gk);const n=new xA({typ:e.typ||CD.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const _A="pkce_not_created",kA="ear_jwk_empty",qk="ear_jwe_empty",Vb="crypto_nonexistent",$v="empty_navigate_uri",$k="hash_empty_error",IA="no_state_in_hash",Vk="hash_does_not_contain_known_properties",Yk="unable_to_parse_state",Qk="state_interaction_type_mismatch",Wk="interaction_in_progress",Xk="popup_window_error",Jk="empty_window_error",ng="user_cancelled",_L="monitor_popup_timeout",Zk="monitor_window_timeout",eI="redirect_in_iframe",tI="block_iframe_reload",nI="block_nested_popups",kL="iframe_closed_prematurely",Vv="silent_logout_unsupported",rI="no_account_error",IL="silent_prompt_value_error",oI="no_token_request_cache_error",iI="unable_to_parse_token_request_cache_error",RL="auth_request_not_set_error",NL="invalid_cache_type",Yv="non_browser_environment",wh="database_not_open",Zy="no_network_connectivity",sI="post_request_failed",aI="get_request_failed",Yb="failed_to_parse_response",cI="unable_to_load_token",RA="crypto_key_not_found",lI="auth_code_required",uI="auth_code_or_nativeAccountId_required",dI="spa_code_and_nativeAccountId_present",NA="database_unavailable",hI="unable_to_acquire_token_from_native_platform",fI="native_handshake_timeout",mI="native_extension_not_installed",OA="native_connection_not_established",Gm="uninitialized_public_client_application",gI="native_prompt_not_supported",pI="invalid_base64_string",yI="invalid_pop_token_request",vI="failed_to_build_headers",CI="failed_to_parse_headers",Sy="failed_to_decrypt_ear_response",ev="timed_out";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Ha="For more visit: aka.ms/msaljs/browser-errors",OL={[_A]:"The PKCE code challenge and verifier could not be generated.",[kA]:"No EAR encryption key provided. This is unexpected.",[qk]:"Server response does not contain ear_jwe property. This is unexpected.",[Vb]:"The crypto object or function is not available.",[$v]:"Navigation URI is empty. Please check stack trace for more info.",[$k]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ha}`,[IA]:"Hash does not contain state. Please verify that the request originated from msal.",[Vk]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ha}`,[Yk]:"Unable to parse state. Please verify that the request originated from msal.",[Qk]:"Hash contains state but the interaction type does not match the caller.",[Wk]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ha}`,[Xk]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Jk]:"window.open returned null or undefined window object.",[ng]:"User cancelled the flow.",[_L]:`Token acquisition in popup failed due to timeout.  ${Ha}`,[Zk]:`Token acquisition in iframe failed due to timeout.  ${Ha}`,[eI]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[tI]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ha}`,[nI]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[kL]:"The iframe being monitored was closed prematurely.",[Vv]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[rI]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[IL]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[oI]:"No token request found in cache.",[iI]:"The cached token request could not be parsed.",[RL]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[NL]:"Invalid cache type",[Yv]:"Login and token requests are not supported in non-browser environments.",[wh]:"Database is not open!",[Zy]:"No network connectivity. Check your internet connection.",[sI]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[aI]:"Network request failed. Please check the network trace to determine root cause.",[Yb]:"Failed to parse network response. Check network trace.",[cI]:"Error loading token to cache.",[RA]:"Cryptographic Key or Keypair not found in browser storage.",[lI]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[uI]:"An authorization code or nativeAccountId must be provided to this flow.",[dI]:"Request cannot contain both spa code and native account id.",[NA]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[hI]:`Unable to acquire token from native platform.  ${Ha}`,[fI]:"Timed out while attempting to establish connection to browser extension",[mI]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[OA]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ha}`,[Gm]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ha}`,[gI]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[pI]:"Invalid base64 encoded string.",[yI]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[vI]:"Failed to build request headers object.",[CI]:"Failed to parse response headers",[Sy]:"Failed to decrypt ear response",[ev]:"The request timed out."};class Ag extends Wt{constructor(e,n){super(e,OL[e],n),Object.setPrototypeOf(this,Ag.prototype),this.name="BrowserAuthError"}}function Fe(t,e){return new Ag(t,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const fo={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},li={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Im={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Zn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},dx={GET:"GET",POST:"POST"},cl={SIGNIN:"signin",SIGNOUT:"signout"},Bn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},oy={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Qt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Ze;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Ze||(Ze={}));const Tn={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},hx={scopes:Wh},wI="jwk",ML={React:"@azure/msal-react"},Qb="msal.db",PL=1,DL=`${Qb}.keys`,Wr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},LL=[Wr.Default,Wr.Skip,Wr.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.25.0 2025-10-09 */function iy(t){return encodeURIComponent(rg(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Cl(t){return bI(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rg(t){return bI(new TextEncoder().encode(t))}function bI(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */function ts(t){return new TextDecoder().decode(gl(t))}function gl(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Fe(pI)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const UL="RSASSA-PKCS1-v1_5",Zh="AES-GCM",EI="HKDF",MA="SHA-256",jL=2048,HL=new Uint8Array([1,0,1]),fx="0123456789abcdef",mx=new Uint32Array(1),PA="raw",AI="encrypt",DA="decrypt",BL="deriveKey",zL="crypto_subtle_undefined",LA={name:UL,hash:MA,modulusLength:jL,publicExponent:HL};function FL(t){if(!window)throw Fe(Yv);if(!window.crypto)throw Fe(Vb);if(!t&&!window.crypto.subtle)throw Fe(Vb,zL)}async function TI(t,e,n){e?.addQueueMeasurement(ie.Sha256Digest,n);const a=new TextEncoder().encode(t);return window.crypto.subtle.digest(MA,a)}function KL(t){return window.crypto.getRandomValues(t)}function ob(){return window.crypto.getRandomValues(mx),mx[0]}function rs(){const t=Date.now(),e=ob()*1024+(ob()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),a=e&2**30-1,c=ob();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|a>>>24,n[9]=a>>>16,n[10]=a>>>8,n[11]=a,n[12]=c>>>24,n[13]=c>>>16,n[14]=c>>>8,n[15]=c;let d="";for(let m=0;m<n.length;m++)d+=fx.charAt(n[m]>>>4),d+=fx.charAt(n[m]&15),(m===3||m===5||m===7||m===9)&&(d+="-");return d}async function GL(t,e){return window.crypto.subtle.generateKey(LA,t,e)}async function ib(t){return window.crypto.subtle.exportKey(wI,t)}async function qL(t,e,n){return window.crypto.subtle.importKey(wI,t,LA,e,n)}async function $L(t,e){return window.crypto.subtle.sign(LA,t,e)}async function UA(){const t=await SI(),n={alg:"dir",kty:"oct",k:Cl(new Uint8Array(t))};return rg(JSON.stringify(n))}async function VL(t){const e=ts(t),r=JSON.parse(e).k,a=gl(r);return window.crypto.subtle.importKey(PA,a,Zh,!1,[DA])}async function YL(t,e){const n=e.split(".");if(n.length!==5)throw Fe(Sy,"jwe_length");const r=await VL(t).catch(()=>{throw Fe(Sy,"import_key")});try{const a=new TextEncoder().encode(n[0]),c=gl(n[2]),d=gl(n[3]),m=gl(n[4]),p=m.byteLength*8,y=new Uint8Array(d.length+m.length);y.set(d),y.set(m,d.length);const v=await window.crypto.subtle.decrypt({name:Zh,iv:c,tagLength:p,additionalData:a},r,y);return new TextDecoder().decode(v)}catch{throw Fe(Sy,"decrypt")}}async function SI(){const t=await window.crypto.subtle.generateKey({name:Zh,length:256},!0,[AI,DA]);return window.crypto.subtle.exportKey(PA,t)}async function gx(t){return window.crypto.subtle.importKey(PA,t,EI,!1,[BL])}async function xI(t,e,n){return window.crypto.subtle.deriveKey({name:EI,salt:e,hash:MA,info:new TextEncoder().encode(n)},t,{name:Zh,length:256},!1,[AI,DA])}async function QL(t,e,n){const r=new TextEncoder().encode(e),a=window.crypto.getRandomValues(new Uint8Array(16)),c=await xI(t,a,n),d=await window.crypto.subtle.encrypt({name:Zh,iv:new Uint8Array(12)},c,r);return{data:Cl(new Uint8Array(d)),nonce:Cl(a)}}async function px(t,e,n,r){const a=gl(r),c=await xI(t,gl(e),n),d=await window.crypto.subtle.decrypt({name:Zh,iv:new Uint8Array(12)},c,a);return new TextDecoder().decode(d)}async function _I(t){const e=await TI(t),n=new Uint8Array(e);return Cl(n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Qv="storage_not_supported",Xn="stubbed_public_client_application_called",jA="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.25.0 2025-10-09 */const xy={[Qv]:"Given storage configuration option was not supported.",[Xn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[jA]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};xy[Qv],xy[Xn],xy[jA];class HA extends Wt{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,HA.prototype)}}function Hn(t){return new HA(t,xy[t])}/*! @azure/msal-browser v4.25.0 2025-10-09 */function kI(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function WL(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function BA(){return window.parent!==window}function XL(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${fo.POPUP_NAME_PREFIX}.`)===0}function Ka(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function JL(){const e=new Ot(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function ZL(){if(Ot.hashContainsKnownProperties(window.location.hash)&&BA())throw Fe(tI)}function eU(t){if(BA()&&!t)throw Fe(eI)}function tU(){if(XL())throw Fe(nI)}function II(){if(typeof window>"u")throw Fe(Yv)}function RI(t){if(!t)throw Fe(Gm)}function zA(t){II(),ZL(),tU(),RI(t)}function yx(t,e){if(zA(t),eU(e.system.allowRedirectInIframe),e.cache.cacheLocation===Zn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Hn(jA)}function NI(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function nU(){return rs()}/*! @azure/msal-browser v4.25.0 2025-10-09 */class tv{navigateInternal(e,n){return tv.defaultNavigateWindow(e,n)}navigateExternal(e,n){return tv.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,a)=>{setTimeout(()=>{a(Fe(ev,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class rU{async sendGetRequestAsync(e,n){let r,a={},c=0;const d=vx(n);try{r=await fetch(e,{method:dx.GET,headers:d})}catch(m){throw Lm(Fe(window.navigator.onLine?aI:Zy),void 0,void 0,m)}a=Cx(r.headers);try{return c=r.status,{headers:a,body:await r.json(),status:c}}catch(m){throw Lm(Fe(Yb),c,a,m)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",a=vx(n);let c,d=0,m={};try{c=await fetch(e,{method:dx.POST,headers:a,body:r})}catch(p){throw Lm(Fe(window.navigator.onLine?sI:Zy),void 0,void 0,p)}m=Cx(c.headers);try{return d=c.status,{headers:m,body:await c.json(),status:d}}catch(p){throw Lm(Fe(Yb),d,m,p)}}}function vx(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,a])=>{e.append(r,a)}),e}catch(e){throw Lm(Fe(vI),void 0,void 0,e)}}function Cx(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw Fe(CI)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const oU=6e4,Wb=1e4,iU=3e4,OI=2e3;function sU({auth:t,cache:e,system:n,telemetry:r},a){const c={clientId:Ie.EMPTY_STRING,authority:`${Ie.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Ie.EMPTY_STRING,authorityMetadata:Ie.EMPTY_STRING,redirectUri:typeof window<"u"?Ka():"",postLogoutRedirectUri:Ie.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:go.AAD,OIDCOptions:{serverResponseType:Lv.FRAGMENT,defaultScopes:[Ie.OPENID_SCOPE,Ie.PROFILE_SCOPE,Ie.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:eA.None,tenant:Ie.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},d={cacheLocation:Zn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:Zn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Zn.LocalStorage),claimsBasedCachingEnabled:!1},m={loggerCallback:()=>{},logLevel:Zt.Info,piiLoggingEnabled:!1},y={...{...vk,loggerOptions:m,networkClient:a?new rU:vL,navigationClient:new tv,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||oU,iframeHashTimeout:n?.loadFrameTimeout||Wb,navigateFrameWait:0,redirectNavigationTimeout:iU,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||OI,pollIntervalMilliseconds:fo.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:n?.loggerOptions||m},v={application:{appName:Ie.EMPTY_STRING,appVersion:Ie.EMPTY_STRING},client:new yk};if(t?.protocolMode!==go.OIDC&&t?.OIDCOptions&&new $a(y.loggerOptions).warning(JSON.stringify(en(ck))),t?.protocolMode&&t.protocolMode===go.OIDC&&y?.allowPlatformBroker)throw en(lk);return{auth:{...c,...t,OIDCOptions:{...c.OIDCOptions,...t?.OIDCOptions}},cache:{...d,...e},system:y,telemetry:{...v,...r}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const aU="@azure/msal-browser",Mu="4.25.0";/*! @azure/msal-browser v4.25.0 2025-10-09 */const cr="msal",FA="browser",sb="-",il=1,Xb=1,cU=`${cr}.${FA}.log.level`,lU=`${cr}.${FA}.log.pii`,uU=`${cr}.${FA}.platform.auth.dom`,wx=`${cr}.version`,bx="account.keys",Ex="token.keys";function Hs(t=Xb){return t<1?`${cr}.${bx}`:`${cr}.${t}.${bx}`}function _u(t,e=il){return e<1?`${cr}.${Ex}.${t}`:`${cr}.${e}.${Ex}.${t}`}/*! @azure/msal-browser v4.25.0 2025-10-09 */class KA{static loggerCallback(e,n){switch(e){case Zt.Error:console.error(n);return;case Zt.Info:console.info(n);return;case Zt.Verbose:console.debug(n);return;case Zt.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=sU(e,this.browserEnvironment);let n;try{n=window[Zn.SessionStorage]}catch{}const r=n?.getItem(cU),a=n?.getItem(lU)?.toLowerCase(),c=a==="true"?!0:a==="false"?!1:void 0,d={...this.config.system.loggerOptions},m=r&&Object.keys(Zt).includes(r)?Zt[r]:void 0;m&&(d.loggerCallback=KA.loggerCallback,d.logLevel=m),c!==void 0&&(d.piiLoggingEnabled=c),this.logger=new $a(d,aU,Mu),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Pu extends KA{getModuleName(){return Pu.MODULE_NAME}getId(){return Pu.ID}async initialize(){return this.available=typeof window<"u",this.available}}Pu.MODULE_NAME="";Pu.ID="StandardOperatingContext";/*! @azure/msal-browser v4.25.0 2025-10-09 */class dU{constructor(){this.dbName=Qb,this.version=PL,this.tableName=DL,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",a=>{a.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",a=>{const c=a;this.db=c.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(Fe(NA)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(wh));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);d.addEventListener("success",m=>{const p=m;this.closeConnection(),n(p.target.result)}),d.addEventListener("error",m=>{this.closeConnection(),r(m)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,a)=>{if(!this.db)return a(Fe(wh));const m=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);m.addEventListener("success",()=>{this.closeConnection(),r()}),m.addEventListener("error",p=>{this.closeConnection(),a(p)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(wh));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);d.addEventListener("success",()=>{this.closeConnection(),n()}),d.addEventListener("error",m=>{this.closeConnection(),r(m)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Fe(wh));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();c.addEventListener("success",d=>{const m=d;this.closeConnection(),e(m.target.result)}),c.addEventListener("error",d=>{this.closeConnection(),n(d)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(wh));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);d.addEventListener("success",m=>{const p=m;this.closeConnection(),n(p.target.result===1)}),d.addEventListener("error",m=>{this.closeConnection(),r(m)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(Qb),a=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(a),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(a),e(!0))),r.addEventListener("error",()=>(clearTimeout(a),n(!1)))})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Wv{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class hU{constructor(e){this.inMemoryCache=new Wv,this.indexedDBCache=new dU,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Ag&&e.errorCode===NA)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Va{constructor(e,n,r){this.logger=e,FL(r??!1),this.cache=new hU(this.logger),this.performanceClient=n}createNewGuid(){return rs()}base64Encode(e){return rg(e)}base64Decode(e){return ts(e)}base64UrlEncode(e){return iy(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const n=this.performanceClient?.startMeasurement(ie.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await GL(Va.EXTRACTABLE,Va.POP_KEY_USAGES),a=await ib(r.publicKey),c={e:a.e,kty:a.kty,n:a.n},d=Ax(c),m=await this.hashString(d),p=await ib(r.privateKey),y=await qL(p,!1,["sign"]);return await this.cache.setItem(m,{privateKey:y,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),m}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw Pe(W_)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,a){const c=this.performanceClient?.startMeasurement(ie.CryptoOptsSignJwt,a),d=await this.cache.getItem(n);if(!d)throw Fe(RA);const m=await ib(d.publicKey),p=Ax(m),y=iy(JSON.stringify({kid:n})),v=xA.getShrHeaderString({...r?.header,alg:m.alg,kid:y}),b=iy(v);e.cnf={jwk:JSON.parse(p)};const E=iy(JSON.stringify(e)),x=`${b}.${E}`,k=new TextEncoder().encode(x),N=await $L(d.privateKey,k),M=Cl(new Uint8Array(N)),j=`${x}.${M}`;return c&&c.end({success:!0}),j}async hashString(e){return _I(e)}}Va.POP_KEY_USAGES=["sign","verify"];Va.EXTRACTABLE=!0;function Ax(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.25.0 2025-10-09 */const fU=1440*60*1e3,Jb={Lax:"Lax",None:"None"};class MI{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let a=0;a<r.length;a++){const c=r[a],[d,...m]=decodeURIComponent(c).trim().split("="),p=m.join("=");if(d===n)return p}return""}getUserData(){throw Pe(dt)}setItem(e,n,r,a=!0,c=Jb.Lax){let d=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${c};`;if(r){const m=mU(r);d+=`expires=${m};`}(a||c===Jb.None)&&(d+="Secure;"),document.cookie=d}async setUserData(){return Promise.reject(Pe(dt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const a=decodeURIComponent(r).trim().split("=");n.push(a[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function mU(t){const e=new Date;return new Date(e.getTime()+t*fU).toUTCString()}/*! @azure/msal-browser v4.25.0 2025-10-09 */function qm(t,e){const n=t.getItem(Hs(e));return n?JSON.parse(n):[]}function $m(t,e,n){const r=e.getItem(_u(t,n));if(r){const a=JSON.parse(r);if(a&&a.hasOwnProperty("idToken")&&a.hasOwnProperty("accessToken")&&a.hasOwnProperty("refreshToken"))return a}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Zb(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Tx="msal.cache.encryption",gU="msal.broadcast.cache";class pU{constructor(e,n,r){if(!window.localStorage)throw Hn(Qv);this.memoryStorage=new Wv,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(gU)}async initialize(e){const n=new MI,r=n.getItem(Tx);let a={key:"",id:""};if(r)try{a=JSON.parse(r)}catch{}if(a.key&&a.id){const c=Lo(gl,ie.Base64Decode,this.logger,this.performanceClient,e)(a.key);this.encryptionCookie={id:a.id,key:await _e(gx,ie.GenerateHKDF,this.logger,this.performanceClient,e)(c)}}else{const c=rs(),d=await _e(SI,ie.GenerateBaseKey,this.logger,this.performanceClient,e)(),m=Lo(Cl,ie.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(d));this.encryptionCookie={id:c,key:await _e(gx,ie.GenerateHKDF,this.logger,this.performanceClient,e)(d)};const p={id:c,key:m};n.setItem(Tx,JSON.stringify(p),0,!0,Jb.None)}await _e(this.importExistingCache.bind(this),ie.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Fe(Gm);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw Fe(Gm);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const a=await _e(px,ie.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!a)return null;try{return JSON.parse(a)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,a){if(!this.initialized||!this.encryptionCookie)throw Fe(Gm);const{data:c,nonce:d}=await _e(QL,ie.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),m={id:this.encryptionCookie.id,nonce:d,data:c,lastUpdatedAt:a};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(m)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),qm(this).forEach(r=>this.removeItem(r));const n=$m(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(cr)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=qm(this);n=await this.importArray(n,e),n.length?this.setItem(Hs(),JSON.stringify(n)):this.removeItem(Hs());const r=$m(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(_u(this.clientId),JSON.stringify(r)):this.removeItem(_u(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let a;try{a=JSON.parse(r)}catch{return null}return Zb(a)?a.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):_e(px,ie.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,a.nonce,this.getContext(e),a.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),a)}async importArray(e,n){const r=[],a=[];return e.forEach(c=>{const d=this.getItemFromEncryptedCache(c,n).then(m=>{m?(this.memoryStorage.setItem(c,m),r.push(c)):this.removeItem(c)});a.push(d)}),await Promise.all(a),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(ie.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:a,context:c}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(c&&c!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${c}`),n.end({success:!1,errorCode:"contextMismatch"});return}a?(this.memoryStorage.setItem(r,a),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class yU{constructor(){if(!window.sessionStorage)throw Hn(Qv)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Ge={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.25.0 2025-10-09 */function Sx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class eE extends qb{constructor(e,n,r,a,c,d,m){super(e,r,a,c,m),this.cacheConfig=n,this.logger=a,this.internalStorage=new Wv,this.browserStorage=xx(e,n.cacheLocation,a,c),this.temporaryCacheStorage=xx(e,n.temporaryCacheLocation,a,c),this.cookieStorage=new MI,this.eventHandler=d}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=qm(this.browserStorage,0),r=$m(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const a=qm(this.browserStorage,1),c=$m(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:a.length,currAccessCount:c.accessToken.length,currIdCount:c.idToken.length,currRefreshCount:c.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(Xb,n,a,e),this.updateV0ToCurrent(il,r.idToken,c.idToken,e),this.updateV0ToCurrent(il,r.accessToken,c.accessToken,e),this.updateV0ToCurrent(il,r.refreshToken,c.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Hs(0),JSON.stringify(n)):this.browserStorage.removeItem(Hs(0)),a.length>0?this.browserStorage.setItem(Hs(1),JSON.stringify(a)):this.browserStorage.removeItem(Hs(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(c,e,1)}async updateV0ToCurrent(e,n,r,a){const c=[];for(const d of[...n]){const m=this.browserStorage.getItem(d),p=this.validateAndParseJson(m||"");if(!p){Sx(n,d);continue}p.lastUpdatedAt||(p.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(p),a));const y=Zb(p)?await this.browserStorage.decryptData(d,p,a):p;let v;if(y&&(ox(y)||ix(y))&&(v=y.expiresOn),!y||J2(p.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||v&&Wy(v,P_)){this.browserStorage.removeItem(d),Sx(n,d),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},a);continue}if(this.cacheConfig.cacheLocation!==Zn.LocalStorage||Zb(p)){const b=`${cr}.${e}${sb}${d}`,E=this.browserStorage.getItem(b);if(E){const x=this.validateAndParseJson(E);if(Number(p.lastUpdatedAt)>Number(x.lastUpdatedAt)){c.push(this.setUserData(b,JSON.stringify(y),a,p.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},a)}));continue}}else{c.push(this.setUserData(b,JSON.stringify(y),a,p.lastUpdatedAt).then(()=>{r.push(b),this.performanceClient.incrementFields({upgradedCacheCount:1},a)}));continue}}}return Promise.all(c)}trackVersionChanges(e){const n=this.browserStorage.getItem(wx);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==Mu&&this.setItem(wx,Mu,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let a=0,c=[];const d=20;for(let m=0;m<=d;m++)try{this.browserStorage.setItem(e,n),m>0&&(m<=a?this.removeAccessTokenKeys(c.slice(0,m),r,0):(this.removeAccessTokenKeys(c.slice(0,a),r,0),this.removeAccessTokenKeys(c.slice(a,m),r)));break}catch(p){const y=Gb(p);if(y.errorCode===qy&&m<d){if(!c.length){const v=e===_u(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,b=e===_u(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;c=[...v,...b],a=v.length}if(c.length<=m)throw y;this.removeAccessToken(c[m],r,!1)}else throw y}}async setUserData(e,n,r,a){let c=0,d=[];const m=20;for(let p=0;p<=m;p++)try{await _e(this.browserStorage.setUserData.bind(this.browserStorage),ie.SetUserData,this.logger,this.performanceClient)(e,n,r,a),p>0&&(p<=c?this.removeAccessTokenKeys(d.slice(0,p),r,0):(this.removeAccessTokenKeys(d.slice(0,c),r,0),this.removeAccessTokenKeys(d.slice(c,p),r)));break}catch(y){const v=Gb(y);if(v.errorCode===qy&&p<m){if(!d.length){const b=this.getTokenKeys(0).accessToken,E=this.getTokenKeys().accessToken;d=[...b,...E],c=b.length}if(d.length<=p)throw v;this.removeAccessToken(d[p],r,!1)}else throw v}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const a=this.validateAndParseJson(r);return!a||!ns.isAccountEntity(a)?null:qb.toObject(new ns,a)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(r,JSON.stringify(e),n,a);const c=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===Zn.LocalStorage&&c&&this.eventHandler.emitEvent(Ge.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return qm(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Hs(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),a=r.indexOf(e);if(a>-1){if(r.splice(a,1),r.length===0){this.removeItem(Hs());return}else this.setItem(Hs(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(a=>{a.includes(e.homeAccountId)&&a.includes(e.environment)&&this.browserStorage.removeItem(a)}),this.cacheConfig.cacheLocation===Zn.LocalStorage&&this.eventHandler.emitEvent(Ge.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),a=r.idToken.indexOf(e);a>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(a,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=il){this.logger.trace("removeAccessTokenKey called");const a=this.getTokenKeys(r);let c=0;if(e.forEach(d=>{const m=a.accessToken.indexOf(d);m>-1&&(a.accessToken.splice(m,1),c++)}),c>0){this.logger.info(`removed ${c} accessToken keys from tokenKeys map`),this.setTokenKeys(a,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),a=r.refreshToken.indexOf(e);a>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(a,1),this.setTokenKeys(r,n))}getTokenKeys(e=il){return $m(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=il){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(_u(this.clientId,r));return}else this.setItem(_u(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const a=this.validateAndParseJson(r);return!a||!eL(a)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),a)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(r,JSON.stringify(e),n,a);const c=this.getTokenKeys();c.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(r),this.setTokenKeys(c,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const a=this.validateAndParseJson(r);return!a||!ox(a)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),a)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(r,JSON.stringify(e),n,a);const c=this.getTokenKeys(),d=c.accessToken.indexOf(r);d!==-1&&c.accessToken.splice(d,1),this.logger.trace(`access token ${d===-1?"added to":"updated in"} map`),c.accessToken.push(r),this.setTokenKeys(c,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const a=this.validateAndParseJson(r);return!a||!ix(a)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),a)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),a=Date.now().toString();e.lastUpdatedAt=a,await this.setUserData(r,JSON.stringify(e),n,a);const c=this.getTokenKeys();c.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(r),this.setTokenKeys(c,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!oL(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=rL(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!tL(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&iL(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(oy.WRAPPER_SKU,e),this.internalStorage.setItem(oy.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(oy.WRAPPER_SKU)||Ie.EMPTY_STRING,n=this.internalStorage.getItem(oy.WRAPPER_VER)||Ie.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(qS.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const a=this.validateAndParseJson(r);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:a.homeAccountId,localAccountId:a.localAccountId,tenantId:a.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(qS.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const a={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:po().toString()};this.setItem(r,JSON.stringify(a),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Ge.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!nL(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const c=this.cookieStorage.getItem(r);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),c}const a=this.temporaryCacheStorage.getItem(r);if(!a){if(this.cacheConfig.cacheLocation===Zn.LocalStorage){const c=this.browserStorage.getItem(r);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),c}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),a}setTemporaryCache(e,n,r){const a=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(a,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(a,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(cr)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(cr)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(ie.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(a=>{const c=this.getAccessTokenCredential(a,e);c?.requestedClaimsHash&&a.includes(c.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(a,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Do.startsWith(e,cr)?e:`${cr}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===pr.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==Kt.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${cr}.${il}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(sb).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${cr}.${Xb}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(sb).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Bn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Bn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Bn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Bn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Bn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=rg(JSON.stringify(e));if(this.setTemporaryCache(Bn.REQUEST_PARAMS,r,!0),n){const a=rg(n);this.setTemporaryCache(Bn.VERIFIER,a,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Bn.REQUEST_PARAMS,!0);if(!e)throw Fe(oI);const n=this.getTemporaryCache(Bn.VERIFIER,!0);let r,a="";try{r=JSON.parse(ts(e)),n&&(a=ts(n))}catch(c){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${c}`),Fe(iI)}return[r,a]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Bn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress()?.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${cr}.${Bn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),kI(window),null}}setInteractionInProgress(e,n=cl.SIGNIN){const r=`${cr}.${Bn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Fe(Wk);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){const r=zv(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let a;n.claims&&(a=await this.cryptoImpl.hashString(n.claims));const c=Fv(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?rx(e.expiresOn):0,e.extExpiresOn?rx(e.extExpiresOn):0,ts,void 0,e.tokenType,void 0,n.sshKid,n.claims,a),d={idToken:r,accessToken:c};return this.saveCacheRecord(d,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(a){if(a instanceof Th&&this.performanceClient&&n)try{const c=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},n)}catch{}throw a}}}function xx(t,e,n,r){try{switch(e){case Zn.LocalStorage:return new pU(t,n,r);case Zn.SessionStorage:return new yU;case Zn.MemoryStorage:default:break}}catch(a){n.error(a)}return new Wv}const vU=(t,e,n,r)=>{const a={cacheLocation:Zn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Zn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new eE(t,a,Fy,e,n,r)};/*! @azure/msal-browser v4.25.0 2025-10-09 */function CU(t,e,n,r,a){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(a||{},r):[]}function wU(t,e,n,r){const a=n.getAccountInfoFilteredBy(t,r);return a?(e.verbose("getAccount: Account matching provided filter found, returning"),a):(e.verbose("getAccount: No matching account found, returning null"),null)}function bU(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const a=n.getAccountInfoFilteredBy({username:t},r);return a?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),a):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function EU(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const a=n.getAccountInfoFilteredBy({homeAccountId:t},r);return a?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),a):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function AU(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const a=n.getAccountInfoFilteredBy({localAccountId:t},r);return a?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),a):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function TU(t,e,n){e.setActiveAccount(t,n)}function SU(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const xU="msal.broadcast.event";class _U{constructor(e){this.eventCallbacks=new Map,this.logger=e||new $a({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(xU)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const a=r||nU();return this.eventCallbacks.has(a)?(this.logger.error(`Event callback with id: ${a} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(a,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${a}`),a)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,a){const c={eventType:e,interactionType:n||null,payload:r||null,error:a||null,timestamp:Date.now()};switch(e){case Ge.ACCOUNT_ADDED:case Ge.ACCOUNT_REMOVED:case Ge.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(c);break;default:this.invokeCallbacks(c);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],a)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${a}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class PI{constructor(e,n,r,a,c,d,m,p,y){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=c,this.navigationClient=d,this.platformAuthProvider=p,this.correlationId=y||rs(),this.logger=a.clone(fo.MSAL_SKU,Mu,this.correlationId),this.performanceClient=m}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return Ot.getAbsoluteUrl(n,Ka())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new tg(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(ie.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const a={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e.requestAuthority||this.config.auth.authority,d=r?.length?r==="true":this.config.auth.instanceAware,m=n&&d?this.config.auth.authority.replace(Ot.getDomainFromUrl(c),n.environment):c,p=Lr.generateAuthority(m,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await _e(Dk,ie.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(p,this.config.system.networkClient,this.browserStorage,a,this.logger,this.correlationId,this.performanceClient);if(n&&!y.isAlias(n.environment))throw en(uk);return y}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function GA(t,e,n,r){n.addQueueMeasurement(ie.InitializeBaseRequest,t.correlationId);const a=t.authority||e.auth.authority,c=[...t&&t.scopes||[]],d={...t,correlationId:t.correlationId,authority:a,scopes:c};if(!d.authenticationScheme)d.authenticationScheme=Kt.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(d.authenticationScheme===Kt.SSH){if(!t.sshJwk)throw en(Uv);if(!t.sshKid)throw en(ak)}r.verbose(`Authentication Scheme set to "${d.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!Do.isEmptyObj(t.claims)&&(d.requestedClaimsHash=await _I(t.claims)),d}async function kU(t,e,n,r,a){r.addQueueMeasurement(ie.InitializeSilentRequest,t.correlationId);const c=await _e(GA,ie.InitializeBaseRequest,a,r,t.correlationId)(t,n,r,a);return{...t,...c,account:e,forceRefresh:t.forceRefresh||!1}}function DI(t,e){let n;const r=t.httpMethod;if(e===go.EAR){if(n=r||xu.POST,n!==xu.POST)throw en(dk)}else n=r||xu.GET;if(t.authorizePostBodyParameters&&n!==xu.POST)throw en(hk);return n}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ef extends PI{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const n={correlationId:this.correlationId||rs(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=Ot.getAbsoluteUrl(e.postLogoutRedirectUri,Ka())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=Ot.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ka())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=Ot.getAbsoluteUrl(Ka(),Ka())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(ie.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await _e(this.getClientConfiguration.bind(this),ie.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Bk(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:c,account:d}=e;this.performanceClient.addQueueMeasurement(ie.StandardInteractionClientGetClientConfiguration,this.correlationId);const m=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:a,requestExtraQueryParameters:c,account:d}),p=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:m,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:p.loggerCallback,piiLoggingEnabled:p.piiLoggingEnabled,logLevel:p.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:fo.MSAL_SKU,version:Mu,cpu:Ie.EMPTY_STRING,os:Ie.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(ie.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),a={interactionType:n},c=Jh.setRequestState(this.browserCrypto,e&&e.state||Ie.EMPTY_STRING,a),m={...await _e(GA,ie.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:c,nonce:e.nonce||rs(),responseMode:this.config.auth.OIDCOptions.serverResponseType},p={...m,httpMethod:DI(m,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return p;const y=e.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),p.account=y),p}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function IU(t,e){if(!e)return null;try{return Jh.parseRequestState(t,e).libraryState.meta}catch{throw Pe(Oh)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Vm(t,e,n){const r=Ky(t);if(!r)throw mk(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Fe(Vk)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Fe($k));return r}function RU(t,e,n){if(!t.state)throw Fe(IA);const r=IU(e,t.state);if(!r)throw Fe(Yk);if(r.interactionType!==n)throw Fe(Qk)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class LI{constructor(e,n,r,a,c){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=a,this.performanceClient=c}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(ie.HandleCodeResponse,n.correlationId);let r;try{r=wL(e,n.state)}catch(a){throw a instanceof Xu&&a.subError===ng?Fe(ng):a}return _e(this.handleCodeResponseFromServer.bind(this),ie.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(ie.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await _e(this.authModule.updateAuthority.bind(this.authModule),ie.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const c=this.createCcsCredentials(n);c&&(this.authCodeRequest.ccsCredential=c)}return await _e(this.authModule.acquireToken.bind(this.authModule),ie.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Zi.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Zi.UPN}:null}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const NU="ContentError",OU="PageException",UI="user_switch";/*! @azure/msal-browser v4.25.0 2025-10-09 */const MU="USER_INTERACTION_REQUIRED",PU="USER_CANCEL",DU="NO_NETWORK",LU="DISABLED",UU="ACCOUNT_UNAVAILABLE",jU="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.25.0 2025-10-09 */const HU=-2147186943,BU={[UI]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Fs extends Wt{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,Fs.prototype),this.name="NativeAuthError",this.ext=r}}function bh(t){if(t.ext&&t.ext.status&&t.ext.status===LU||t.ext&&t.ext.error&&t.ext.error===HU)return!0;switch(t.errorCode){case NU:case OU:return!0;default:return!1}}function nv(t,e,n){if(n&&n.status)switch(n.status){case UU:return Jy(Uk);case MU:return new jo(t,e);case PU:return Fe(ng);case DU:return Fe(Zy);case jU:return Jy(EA)}return new Fs(t,BU[t]||e,n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class jI extends ef{async acquireToken(e){this.performanceClient.addQueueMeasurement(ie.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(Qt.acquireTokenSilent_silentFlow),r=await _e(this.getClientConfiguration.bind(this),ie.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),a=new yL(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const d=(await _e(a.acquireCachedToken.bind(a),ie.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),d}catch(c){throw c instanceof Ag&&c.errorCode===RA&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),c}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n?.account)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class _y extends PI{constructor(e,n,r,a,c,d,m,p,y,v,b,E){super(e,n,r,a,c,d,p,y,E),this.apiId=m,this.accountId=v,this.platformAuthProvider=y,this.nativeStorageManager=b,this.silentCacheClient=new jI(e,this.nativeStorageManager,r,a,c,d,p,y,E);const x=this.platformAuthProvider.getExtensionName();this.skus=tg.makeExtraSkuString({libraryName:fo.MSAL_SKU,libraryVersion:Mu,extensionName:x,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[O2]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(ie.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(ie.NativeInteractionClientAcquireToken,this.correlationId),a=po(),c=this.initializeServerTelemetryManager(this.apiId);try{const d=await this.initializeNativeRequest(e);try{const p=await this.acquireTokensFromCache(this.accountId,d);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),p}catch(p){if(n===Wr.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),p;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const m=await this.platformAuthProvider.sendMessage(d);return await this.handleNativeResponse(m,d,a).then(p=>(r.end({success:!0,isNativeBroker:!0,requestId:p.requestId}),c.clearNativeBrokerErrorCode(),p)).catch(p=>{throw r.end({success:!1,errorCode:p.errorCode,subErrorCode:p.subError}),p})}catch(d){throw d instanceof Fs&&c.setNativeBrokerErrorCode(d.errorCode),r.end({success:!1}),d}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Jn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Pe(Fb);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw Pe(Fb);try{const a=this.createSilentCacheRequest(n,r),c=await this.silentCacheClient.acquireToken(a),d={...r,idTokenClaims:c?.idTokenClaims,idToken:c?.idToken};return{...c,account:d}}catch(a){throw a}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const a=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(a)}catch(m){if(m instanceof Fs&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(m.errorCode),bh(m)))throw m}this.browserStorage.setTemporaryCache(Bn.NATIVE_REQUEST,JSON.stringify(a),!0);const c={apiId:Qt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(d,c)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:a,...c}=r;a&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Bn.NATIVE_REQUEST));const d=po();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const m=await this.platformAuthProvider.sendMessage(c),p=await this.handleNativeResponse(m,c,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),p}catch(m){throw m}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const a=Xh(e.id_token,ts),c=this.createHomeAccountIdentifier(e,a),d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId)?.homeAccountId;if(n.extraParameters?.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(c!==d&&e.account.id!==n.accountId)throw nv(UI);const m=await this.getDiscoveredAuthority({requestAuthority:n.authority}),p=AA(this.browserStorage,m,c,ts,this.correlationId,a,e.client_info,void 0,a.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const y=await this.generateAuthenticationResult(e,n,a,p,m.canonicalAuthority,r);return await this.cacheAccount(p,this.correlationId),await this.cacheNativeTokens(e,n,c,a,e.access_token,y.tenantId,r),y}createHomeAccountIdentifier(e,n){return ns.generateHomeAccountId(e.client_info||Ie.EMPTY_STRING,Qi.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?Jn.fromString(n):Jn.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===Kt.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Mh(this.browserCrypto),a={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw Pe(XE);return r.signPopToken(e.access_token,n.keyId,a)}else return e.access_token}async generateAuthenticationResult(e,n,r,a,c,d){const m=this.addTelemetryFromNativeResponse(e.properties.MATS),p=this.generateScopes(n.scope,e.scope),y=e.account.properties||{},v=y.UID||r.oid||r.sub||Ie.EMPTY_STRING,b=y.TenantId||r.tid||Ie.EMPTY_STRING,E=sA(a.getAccountInfo(),void 0,r,e.id_token);E.nativeAccountId!==e.account.id&&(E.nativeAccountId=e.account.id);const x=await this.generatePopAccessToken(e,n),I=n.tokenType===Kt.POP?Kt.POP:Kt.BEARER;return{authority:c,uniqueId:v,tenantId:b,scopes:p.asArray(),account:E,idToken:e.id_token,idTokenClaims:r,accessToken:x,fromCache:m?this.isResponseFromCache(m):!1,expiresOn:xh(d+e.expires_in),tokenType:I,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,a,c,d,m){const p=zv(r,n.authority,e.id_token||"",n.clientId,a.tid||""),y=n.tokenType===Kt.POP?Ie.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,v=m+y,b=this.generateScopes(e.scope,n.scope),E=Fv(r,n.authority,c,n.clientId,a.tid||d,b.printScopes(),v,0,ts,void 0,n.tokenType,void 0,n.keyId),x={idToken:p,accessToken:E};return this.nativeStorageManager.saveCacheRecord(x,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===Kt.POP?Ie.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...a}=e,c=new Jn(r||[]);c.appendScopes(Wh);const d={...a,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:c.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(d.signPopToken&&e.popKid)throw Fe(yI);if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=li.MATS_TELEMETRY,e.authenticationScheme===Kt.POP){const m={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},p=new Mh(this.browserCrypto);let y;if(d.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:d.keyId})),d.signPopToken=!1;else{const v=await _e(p.generateCnf.bind(p),ie.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(m,this.logger);y=v.reqCnfString,d.keyId=v.kid,d.signPopToken=!0}d.reqCnf=y}return this.addRequestSKUs(d),d}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Ot(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Qt.ssoSilent:case Qt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),vr.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case vr.NONE:case vr.CONSENT:case vr.LOGIN:case vr.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),Fe(gI)}}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Vy)&&e.extraParameters.hasOwnProperty(Yy)&&e.extraParameters.hasOwnProperty(Nu);if(!e.embeddedClientId&&!n)return;let r="";const a=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Yy],r=e.extraParameters[Nu]),e.extraParameters={child_client_id:r,child_redirect_uri:a},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:a},this.correlationId)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function qA(t,e,n,r,a){const c=CL({...t.auth,authority:e},n,r,a);if(gA(c,{sku:fo.MSAL_SKU,version:Mu,os:"",cpu:""}),t.auth.protocolMode!==go.OIDC&&pA(c,t.telemetry.application),n.platformBroker&&(L2(c),a.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===Kt.POP)){const d=new Va(r,a),m=new Mh(d);let p;n.popKid?p=d.encodeKid(n.popKid):p=(await _e(m.generateCnf.bind(m),ie.PopTokenGenerateCnf,r,a,n.correlationId)(n,r)).reqCnfString,vA(c,p)}return jv(c,n.correlationId,a),c}async function $A(t,e,n,r,a){if(!n.codeChallenge)throw en(nA);const c=await _e(qA,ie.GetStandardParams,r,a,n.correlationId)(t,e,n,r,a);return lA(c,GE.CODE),Tk(c,n.codeChallenge,Ie.S256_CODE_CHALLENGE_METHOD),ml(c,n.extraQueryParameters||{}),TA(e,c,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function VA(t,e,n,r,a,c){if(!r.earJwk)throw Fe(kA);const d=await qA(e,n,r,a,c);lA(d,GE.IDTOKEN_TOKEN_REFRESHTOKEN),V2(d,r.earJwk);const m=new Map;ml(m,r.extraQueryParameters||{});const p=TA(n,m,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return HI(t,p,d)}async function YA(t,e,n,r,a,c){const d=await qA(e,n,r,a,c);lA(d,GE.CODE),Tk(d,r.codeChallenge,r.codeChallengeMethod||Ie.S256_CODE_CHALLENGE_METHOD),Y2(d,r.authorizePostBodyParameters||{});const m=new Map;ml(m,r.extraQueryParameters||{});const p=TA(n,m,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return HI(t,p,d)}function HI(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((a,c)=>{const d=t.createElement("input");d.hidden=!0,d.name=c,d.value=a,r.appendChild(d)}),t.body.appendChild(r),r}async function BI(t,e,n,r,a,c,d,m,p,y){if(m.verbose("Account id found, calling WAM for token"),!y)throw Fe(OA);const v=new Va(m,p),b=new _y(r,a,v,m,d,r.system.navigationClient,n,p,y,e,c,t.correlationId),{userRequestState:E}=Jh.parseRequestState(v,t.state);return _e(b.acquireToken.bind(b),ie.NativeInteractionClientAcquireToken,m,p,t.correlationId)({...t,state:E,prompt:void 0})}async function rv(t,e,n,r,a,c,d,m,p,y,v,b){if(zs.removeThrottle(d,a.auth.clientId,t),e.accountId)return _e(BI,ie.HandleResponsePlatformBroker,y,v,t.correlationId)(t,e.accountId,r,a,d,m,p,y,v,b);const E={...t,code:e.code||"",codeVerifier:n},x=new LI(c,d,E,y,v);return await _e(x.handleCodeResponse.bind(x),ie.HandleCodeResponse,y,v,t.correlationId)(e,t)}async function QA(t,e,n,r,a,c,d,m,p,y,v){if(zs.removeThrottle(c,r.auth.clientId,t),zk(e,t.state),!e.ear_jwe)throw Fe(qk);if(!t.earJwk)throw Fe(kA);const b=JSON.parse(await _e(YL,ie.DecryptEarResponse,p,y,t.correlationId)(t.earJwk,e.ear_jwe));if(b.accountId)return _e(BI,ie.HandleResponsePlatformBroker,p,y,t.correlationId)(t,b.accountId,n,r,c,d,m,p,y,v);const E=new Ou(r.auth.clientId,c,new Va(p,y),p,null,null,y);E.validateTokenResponse(b);const x={code:"",state:t.state,nonce:t.nonce,client_info:b.client_info,cloud_graph_host_name:b.cloud_graph_host_name,cloud_instance_host_name:b.cloud_instance_host_name,cloud_instance_name:b.cloud_instance_name,msgraph_host:b.msgraph_host};return await _e(E.handleServerTokenResponse.bind(E),ie.HandleServerTokenResponse,p,y,t.correlationId)(b,a,po(),t,x,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const zU=32;async function Xv(t,e,n){t.addQueueMeasurement(ie.GeneratePkceCodes,n);const r=Lo(FU,ie.GenerateCodeVerifier,e,t,n)(t,e,n),a=await _e(KU,ie.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:a}}function FU(t,e,n){try{const r=new Uint8Array(zU);return Lo(KL,ie.GetRandomValues,e,t,n)(r),Cl(r)}catch{throw Fe(_A)}}async function KU(t,e,n,r){e.addQueueMeasurement(ie.GenerateCodeChallengeFromVerifier,r);try{const a=await _e(TI,ie.Sha256Digest,n,e,r)(t,e,r);return Cl(new Uint8Array(a))}catch{throw Fe(_A)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ov{constructor(e,n,r,a){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=a,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(ie.NativeMessageHandlerHandshake),this.platformAuthType=li.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:Im.GetToken,request:e},r={channel:li.CHANNEL_ID,extensionId:this.extensionId,responseId:rs(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const a=await new Promise((d,m)=>{this.resolvers.set(r.responseId,{resolve:d,reject:m})});return this.validatePlatformBrokerResponse(a)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const a=new ov(e,n,r,li.PREFERRED_EXTENSION_ID);return await a.sendHandshakeRequest(),a}catch{const c=new ov(e,n,r);return await c.sendHandshakeRequest(),c}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:li.CHANNEL_ID,extensionId:this.extensionId,responseId:rs(),body:{method:Im.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Fe(fI)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==li.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Im.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Fe(mI))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),a=this.handshakeResolvers.get(n.responseId);try{const c=n.body.method;if(c===Im.Response){if(!r)return;const d=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")r.reject(nv(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?r.reject(nv(d.result.code,d.result.description,d.result.ext)):r.resolve(d.result);else throw Hb(zy,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(c===Im.HandshakeResponse){if(!a){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),a.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(c){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${c}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(c):a&&a.reject(c)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Hb(zy,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===li.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class WA{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=li.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(li.MICROSOFT_ENTRA_BROKERID))?.includes(li.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new WA(e,n,r)}getExtensionId(){return li.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return li.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:a,scope:c,redirectUri:d,correlationId:m,state:p,storeInCache:y,embeddedClientId:v,extraParameters:b,...E}=e,x=this.getDOMExtraParams(E);return{accountId:n,brokerId:this.getExtensionId(),authority:a,clientId:r,correlationId:m||this.correlationId,extraParameters:{...b,...x},isSecurityTokenService:!1,redirectUri:d,scope:c,state:p,storeInCache:y,embeddedClientId:v}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),nv(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw Hb(zy,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((a,[c,d])=>(a[c]=String(d),a),{})}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function GU(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const a=qU();t.trace("Has client allowed platform auth via DOM API: "+a);let c;try{a&&(c=await WA.createProvider(t,e,n)),c||(t.trace("Platform auth via DOM API not available, checking for extension"),c=await ov.createProvider(t,r||OI,e))}catch(d){t.trace("Platform auth not available",d)}return c}function qU(){let t;try{return t=window[Zn.SessionStorage],t?.getItem(uU)==="true"}catch{return!1}}function og(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Kt.BEARER:case Kt.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.25.0 2025-10-09 */class $U extends ef{constructor(e,n,r,a,c,d,m,p,y,v){super(e,n,r,a,c,d,m,y,v),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=p,this.eventHandler=c}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Wh,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const c={...e,httpMethod:DI(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(c,r,n)}}catch(a){return Promise.reject(a)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},a=e&&e.authority,c=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,a,c)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,a,c))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const a=await _e(this.initializeAuthorizationRequest.bind(this),ie.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Ze.Popup);n.popup&&NI(a.authority);const c=og(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return a.platformBroker=c,this.config.auth.protocolMode===go.EAR?this.executeEarFlow(a,n):this.executeCodeFlow(a,n,r)}async executeCodeFlow(e,n,r){const a=e.correlationId,c=this.initializeServerTelemetryManager(Qt.acquireTokenPopup),d=r||await _e(Xv,ie.GeneratePkceCodes,this.logger,this.performanceClient,a)(this.performanceClient,this.logger,a),m={...e,codeChallenge:d.challenge};try{const p=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,a)({serverTelemetryManager:c,requestAuthority:m.authority,requestAzureCloudOptions:m.azureCloudOptions,requestExtraQueryParameters:m.extraQueryParameters,account:m.account});if(m.httpMethod===xu.POST)return await this.executeCodeFlowWithPost(m,n,p,d.verifier);{const y=await _e($A,ie.GetAuthCodeUrl,this.logger,this.performanceClient,a)(this.config,p.authority,m,this.logger,this.performanceClient),v=this.initiateAuthRequest(y,n);this.eventHandler.emitEvent(Ge.POPUP_OPENED,Ze.Popup,{popupWindow:v},null);const b=await this.monitorPopupForHash(v,n.popupWindowParent),E=Lo(Vm,ie.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(b,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await _e(rv,ie.HandleResponseCode,this.logger,this.performanceClient,a)(e,E,d.verifier,Qt.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(p){throw n.popup?.close(),p instanceof Wt&&(p.setCorrelationId(this.correlationId),c.cacheFailedRequest(p)),p}}async executeEarFlow(e,n){const r=e.correlationId,a=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=await _e(UA,ie.GenerateEarKey,this.logger,this.performanceClient,r)(),d={...e,earJwk:c},m=n.popup||this.openPopup("about:blank",n);(await VA(m.document,this.config,a,d,this.logger,this.performanceClient)).submit();const y=await _e(this.monitorPopupForHash.bind(this),ie.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(m,n.popupWindowParent),v=Lo(Vm,ie.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return _e(QA,ie.HandleResponseEar,this.logger,this.performanceClient,r)(d,v,Qt.acquireTokenPopup,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,a){const c=e.correlationId,d=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,c)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),m=n.popup||this.openPopup("about:blank",n);(await YA(m.document,this.config,d,e,this.logger,this.performanceClient)).submit();const y=await _e(this.monitorPopupForHash.bind(this),ie.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(m,n.popupWindowParent),v=Lo(Vm,ie.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return _e(rv,ie.HandleResponseCode,this.logger,this.performanceClient,c)(e,v,a,Qt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,a){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Ge.LOGOUT_START,Ze.Popup,e);const c=this.initializeServerTelemetryManager(Qt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const d=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===go.OIDC){if(this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,Ze.Popup,e),a){const y={apiId:Qt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=Ot.getAbsoluteUrl(a,Ka());await this.navigationClient.navigateInternal(v,y)}n.popup?.close();return}}const m=d.getLogoutUri(e);this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,Ze.Popup,e);const p=this.openPopup(m,n);if(this.eventHandler.emitEvent(Ge.POPUP_OPENED,Ze.Popup,{popupWindow:p},null),await this.monitorPopupForHash(p,n.popupWindowParent).catch(()=>{}),a){const y={apiId:Qt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=Ot.getAbsoluteUrl(a,Ka());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${v}`),await this.navigationClient.navigateInternal(v,y)}else this.logger.verbose("No main window navigation requested")}catch(d){throw n.popup?.close(),d instanceof Wt&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),this.eventHandler.emitEvent(Ge.LOGOUT_FAILURE,Ze.Popup,null,d),this.eventHandler.emitEvent(Ge.LOGOUT_END,Ze.Popup),d}this.eventHandler.emitEvent(Ge.LOGOUT_END,Ze.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Fe($v)}monitorPopupForHash(e,n){return new Promise((r,a)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const c=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(c),a(Fe(ng));return}let d="";try{d=e.location.href}catch{}if(!d||d==="about:blank")return;clearInterval(c);let m="";const p=this.config.auth.OIDCOptions.serverResponseType;e&&(p===Lv.QUERY?m=e.location.search:m=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(m)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Fe(Jk);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),Fe(Xk)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:a}){const c=a.screenLeft?a.screenLeft:a.screenX,d=a.screenTop?a.screenTop:a.screenY,m=a.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=a.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,v=r.popupSize?.height,b=r.popupPosition?.top,E=r.popupPosition?.left;return(!y||y<0||y>m)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=fo.POPUP_WIDTH),(!v||v<0||v>p)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),v=fo.POPUP_HEIGHT),(!b||b<0||b>p)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),b=Math.max(0,p/2-fo.POPUP_HEIGHT/2+d)),(!E||E<0||E>m)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),E=Math.max(0,m/2-fo.POPUP_WIDTH/2+c)),a.open(e,n,`width=${y}, height=${v}, top=${b}, left=${E}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${fo.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${fo.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function VU(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation");return(t.length?t[0]:void 0)?.type}class YU extends ef{constructor(e,n,r,a,c,d,m,p,y,v){super(e,n,r,a,c,d,m,y,v),this.nativeStorage=p}async acquireToken(e){const n=await _e(this.initializeAuthorizationRequest.bind(this),ie.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Ze.Redirect);n.platformBroker=og(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=c=>{c.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Ge.RESTORE_FROM_BFCACHE,Ze.Redirect))},a=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${a}`),this.browserStorage.setTemporaryCache(Bn.ORIGIN_URI,a,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===go.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(c){throw c instanceof Wt&&c.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),c}}async executeCodeFlow(e,n){const r=e.correlationId,a=this.initializeServerTelemetryManager(Qt.acquireTokenRedirect),c=await _e(Xv,ie.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...e,codeChallenge:c.challenge};this.browserStorage.cacheAuthorizeRequest(d,c.verifier);try{if(d.httpMethod===xu.POST)return await this.executeCodeFlowWithPost(d);{const m=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),p=await _e($A,ie.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,m.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(p,n)}}catch(m){throw m instanceof Wt&&(m.setCorrelationId(this.correlationId),a.cacheFailedRequest(m)),m}}async executeEarFlow(e){const n=e.correlationId,r=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await _e(UA,ie.GenerateEarKey,this.logger,this.performanceClient,n)(),c={...e,earJwk:a};return this.browserStorage.cacheAuthorizeRequest(c),(await VA(document,this.config,r,c,this.logger,this.performanceClient)).submit(),new Promise((m,p)=>{setTimeout(()=>{p(Fe(ev,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await YA(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((c,d)=>{setTimeout(()=>{d(Fe(ev,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,a){const c=this.initializeServerTelemetryManager(Qt.handleRedirectPromise);try{const[d,m]=this.getRedirectResponse(e||"");if(!d)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),VU()!=="back_forward"?a.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const p=this.browserStorage.getTemporaryCache(Bn.ORIGIN_URI,!0)||Ie.EMPTY_STRING,y=XS(p),v=XS(window.location.href);if(y===v&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),p.indexOf("#")>-1&&WL(p),await this.handleResponse(d,n,r,c);if(this.config.auth.navigateToLoginRequestUrl){if(!BA()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Bn.URL_HASH,m,!0);const b={apiId:Qt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let E=!0;if(!p||p==="null"){const x=JL();this.browserStorage.setTemporaryCache(Bn.ORIGIN_URI,x,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),E=await this.navigationClient.navigateInternal(x,b)}else this.logger.verbose(`Navigating to loginRequestUrl: ${p}`),E=await this.navigationClient.navigateInternal(p,b);if(!E)return await this.handleResponse(d,n,r,c)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(d,n,r,c);return null}catch(d){throw d instanceof Wt&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),d}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===Lv.QUERY?n=window.location.search:n=window.location.hash);let r=Ky(n);if(r){try{RU(r,this.browserCrypto,Ze.Redirect)}catch(c){return c instanceof Wt&&this.logger.error(`Interaction type validation failed due to ${c.errorCode}: ${c.errorMessage}`),[null,""]}return kI(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const a=this.browserStorage.getTemporaryCache(Bn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Bn.URL_HASH)),a&&(r=Ky(a),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,a]):[null,""]}async handleResponse(e,n,r,a){if(!e.state)throw Fe(IA);if(e.ear_jwe){const m=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return _e(QA,ie.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,Qt.acquireTokenRedirect,this.config,m,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const d=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:a,requestAuthority:n.authority});return _e(rv,ie.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,Qt.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Qt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=n||this.config.auth.onRedirectNavigate;if(typeof a=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),a(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Fe($v)}async logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Qt.logout);try{this.eventHandler.emitEvent(Ge.LOGOUT_START,Ze.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const a={apiId:Qt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===go.OIDC)try{c.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId){this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,Ze.Redirect,n);return}}const d=c.getLogoutUri(n);if(this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,Ze.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,cl.SIGNOUT),await this.navigationClient.navigateExternal(d,a);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,cl.SIGNOUT),await this.navigationClient.navigateExternal(d,a);return}}catch(a){throw a instanceof Wt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),this.eventHandler.emitEvent(Ge.LOGOUT_FAILURE,Ze.Redirect,null,a),this.eventHandler.emitEvent(Ge.LOGOUT_END,Ze.Redirect),a}this.eventHandler.emitEvent(Ge.LOGOUT_END,Ze.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return Ot.getAbsoluteUrl(n,Ka())}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function QU(t,e,n,r,a){if(e.addQueueMeasurement(ie.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),Fe($v);return a?_e(JU,ie.SilentHandlerLoadFrame,n,e,r)(t,a,e,r):Lo(ZU,ie.SilentHandlerLoadFrameSync,n,e,r)(t)}async function WU(t,e,n,r,a){const c=Jv();if(!c.contentDocument)throw"No document associated with iframe!";return(await YA(c.contentDocument,t,e,n,r,a)).submit(),c}async function XU(t,e,n,r,a){const c=Jv();if(!c.contentDocument)throw"No document associated with iframe!";return(await VA(c.contentDocument,t,e,n,r,a)).submit(),c}async function _x(t,e,n,r,a,c,d){return r.addQueueMeasurement(ie.SilentHandlerMonitorIframeForHash,c),new Promise((m,p)=>{e<Wb&&a.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Wb}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(v),p(Fe(Zk))},e),v=window.setInterval(()=>{let b="";const E=t.contentWindow;try{b=E?E.location.href:""}catch{}if(!b||b==="about:blank")return;let x="";E&&(d===Lv.QUERY?x=E.location.search:x=E.location.hash),window.clearTimeout(y),window.clearInterval(v),m(x)},n)}).finally(()=>{Lo(ej,ie.RemoveHiddenIframe,a,r,c)(t)})}function JU(t,e,n,r){return n.addQueueMeasurement(ie.SilentHandlerLoadFrame,r),new Promise((a,c)=>{const d=Jv();window.setTimeout(()=>{if(!d){c("Unable to load iframe");return}d.src=t,a(d)},e)})}function ZU(t){const e=Jv();return e.src=t,e}function Jv(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function ej(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class tj extends ef{constructor(e,n,r,a,c,d,m,p,y,v,b){super(e,n,r,a,c,d,p,v,b),this.apiId=m,this.nativeStorage=y}async acquireToken(e){this.performanceClient.addQueueMeasurement(ie.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==vr.NONE&&n.prompt!==vr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${vr.NONE}`),n.prompt=vr.NONE):n.prompt=vr.NONE;const r=await _e(this.initializeAuthorizationRequest.bind(this),ie.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Ze.Silent);return r.platformBroker=og(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),NI(r.authority),this.config.auth.protocolMode===go.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await _e(this.createAuthCodeClient.bind(this),ie.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await _e(this.silentTokenHelper.bind(this),ie.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(a){if(a instanceof Wt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),!n||!(a instanceof Wt)||a.errorCode!==fo.INVALID_GRANT_ERROR)throw a;return this.performanceClient.addFields({retryError:a.errorCode},this.correlationId),await _e(this.silentTokenHelper.bind(this),ie.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await _e(this.getDiscoveredAuthority.bind(this),ie.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=await _e(UA,ie.GenerateEarKey,this.logger,this.performanceClient,n)(),c={...e,earJwk:a},d=await _e(XU,ie.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,c,this.logger,this.performanceClient),m=this.config.auth.OIDCOptions.serverResponseType,p=await _e(_x,ie.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,m),y=Lo(Vm,ie.DeserializeResponse,this.logger,this.performanceClient,n)(p,m,this.logger);return _e(QA,ie.HandleResponseEar,this.logger,this.performanceClient,n)(c,y,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Fe(Vv))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(ie.SilentIframeClientTokenHelper,r);const a=await _e(Xv,ie.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...n,codeChallenge:a.challenge};let d;if(n.httpMethod===xu.POST)d=await _e(WU,ie.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,c,this.logger,this.performanceClient);else{const v=await _e($A,ie.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,c,this.logger,this.performanceClient);d=await _e(QU,ie.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(v,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const m=this.config.auth.OIDCOptions.serverResponseType,p=await _e(_x,ie.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,m),y=Lo(Vm,ie.DeserializeResponse,this.logger,this.performanceClient,r)(p,m,this.logger);return _e(rv,ie.HandleResponseCode,this.logger,this.performanceClient,r)(n,y,a.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class nj extends ef{async acquireToken(e){this.performanceClient.addQueueMeasurement(ie.SilentRefreshClientAcquireToken,e.correlationId);const n=await _e(GA,ie.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const a=this.initializeServerTelemetryManager(Qt.acquireTokenSilent_silentFlow),c=await this.createRefreshTokenClient({serverTelemetryManager:a,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return _e(c.acquireTokenByRefreshToken.bind(c),ie.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(d=>{throw d.setCorrelationId(this.correlationId),a.cacheFailedRequest(d),d})}logout(){return Promise.reject(Fe(Vv))}async createRefreshTokenClient(e){const n=await _e(this.getClientConfiguration.bind(this),ie.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new pL(n,this.performanceClient)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class rj{constructor(e,n,r,a){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=a}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Fe(Yv);const a=e.correlationId||rs(),c=n.id_token?Xh(n.id_token,ts):void 0,d={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},m=e.authority?new Lr(Lr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,d,this.logger,e.correlationId||rs()):void 0,p=await this.loadAccount(e,r.clientInfo||n.client_info||"",a,c,m),y=await this.loadIdToken(n,p.homeAccountId,p.environment,p.realm,a),v=await this.loadAccessToken(e,n,p.homeAccountId,p.environment,p.realm,r,a),b=await this.loadRefreshToken(n,p.homeAccountId,p.environment,a);return this.generateAuthenticationResult(e,{account:p,idToken:y,accessToken:v,refreshToken:b},c,m)}async loadAccount(e,n,r,a,c){if(this.logger.verbose("TokenCache - loading account"),e.account){const y=ns.createFromAccountInfo(e.account);return await this.storage.setAccount(y,r),y}else if(!c||!n&&!a)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Fe(cI);const d=ns.generateHomeAccountId(n,c.authorityType,this.logger,this.cryptoObj,a),m=a?.tid,p=AA(this.storage,c,d,ts,r,a,n,c.hostnameAndPort,m,void 0,void 0,this.logger);return await this.storage.setAccount(p,r),p}async loadIdToken(e,n,r,a,c){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const d=zv(n,r,e.id_token,this.config.auth.clientId,a);return await this.storage.setIdTokenCredential(d,c),d}async loadAccessToken(e,n,r,a,c,d,m){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const p=n.scope?Jn.fromString(n.scope):new Jn(e.scopes),y=d.expiresOn||n.expires_in+po(),v=d.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+po(),b=Fv(r,a,n.access_token,this.config.auth.clientId,c,p.printScopes(),y,v,ts);return await this.storage.setAccessTokenCredential(b,m),b}async loadRefreshToken(e,n,r,a){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const c=Mk(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(c,a),c}generateAuthenticationResult(e,n,r,a){let c="",d=[],m=null,p;n?.accessToken&&(c=n.accessToken.secret,d=Jn.fromString(n.accessToken.target).asArray(),m=xh(n.accessToken.expiresOn),p=xh(n.accessToken.extendedExpiresOn));const y=n.account;return{authority:a?a.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:d,account:y.getAccountInfo(),idToken:n.idToken?.secret||"",idTokenClaims:r||{},accessToken:c,fromCache:!0,expiresOn:m,correlationId:e.correlationId||"",requestId:"",extExpiresOn:p,familyId:n.refreshToken?.familyId||"",tokenType:n?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class oj extends Bk{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ij extends ef{constructor(e,n,r,a,c,d,m,p,y,v){super(e,n,r,a,c,d,p,y,v),this.apiId=m}async acquireToken(e){if(!e.code)throw Fe(lI);const n=await _e(this.initializeAuthorizationRequest.bind(this),ie.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Ze.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const a={...n,code:e.code},c=await _e(this.getClientConfiguration.bind(this),ie.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),d=new oj(c);this.logger.verbose("Auth code client created");const m=new LI(d,this.browserStorage,a,this.logger,this.performanceClient);return await _e(m.handleCodeResponseFromServer.bind(m),ie.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(a){throw a instanceof Wt&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}logout(){return Promise.reject(Fe(Vv))}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function sj(t,e,n){const r=window.msal?.clientIds||[],a=r.length,c=r.filter(d=>d===t).length;c>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:a,sameClientIdInstanceCount:c})}/*! @azure/msal-browser v4.25.0 2025-10-09 */function sy(t,e,n){try{zA(t)}catch(r){throw e.end({success:!1},r,n),r}}class Zv{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Va(this.logger,this.performanceClient):Fy,this.eventHandler=new _U(this.logger),this.browserStorage=this.isBrowserEnvironment?new eE(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,aL(this.config.auth)):vU(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:Zn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:Zn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new eE(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new rj(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new Zv(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Ge.INITIALIZE_END);return}const r=e?.correlationId||this.getRequestCorrelationId(),a=this.config.system.allowPlatformBroker,c=this.performanceClient.startMeasurement(ie.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Ge.INITIALIZE_START),!n)try{this.logMultipleInstances(c)}catch{}if(await _e(this.browserStorage.initialize.bind(this.browserStorage),ie.InitializeCache,this.logger,this.performanceClient,r)(r),a)try{this.platformAuthProvider=await GU(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Lo(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),ie.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Ge.INITIALIZE_END),c.end({allowPlatformBroker:a,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),RI(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===cl.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),a=this.browserStorage.getCachedNativeRequest(),c=a&&this.platformAuthProvider&&!e;let d;this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_START,Ze.Redirect);let m;try{if(c&&this.platformAuthProvider){d=this.performanceClient.startMeasurement(ie.AcquireTokenRedirect,a?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),d.add({isPlatformBrokerRequest:!0});const p=new _y(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Qt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,a.accountId,this.nativeInternalStorage,a.correlationId);m=_e(p.handleRedirectPromise.bind(p),ie.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{const[p,y]=this.browserStorage.getCachedRequest(),v=p.correlationId;d=this.performanceClient.startMeasurement(ie.AcquireTokenRedirect,v),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const b=this.createRedirectClient(v);m=_e(b.handleRedirectPromise.bind(b),ie.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(e,p,y,d)}}catch(p){throw this.browserStorage.resetRequestCache(),p}return m.then(p=>(p?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Ge.LOGIN_SUCCESS,Ze.Redirect,p),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,Ze.Redirect,p),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0},void 0,p.account)):d.event.errorCode?d.end({success:!1},void 0):d.discard(),this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_END,Ze.Redirect),p)).catch(p=>{this.browserStorage.resetRequestCache();const y=p;throw r.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,Ze.Redirect,null,y):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,Ze.Redirect,null,y),this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_END,Ze.Redirect),d.end({success:!1},y),p})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(ie.AcquireTokenPreRedirect,n);r.add({scenarioId:e.scenarioId});const a=e.onRedirectNavigate;if(a)e.onRedirectNavigate=d=>{const m=typeof a=="function"?a(d):void 0;return r.add({navigateCallbackResult:m!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,m};else{const d=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=m=>{const p=typeof d=="function"?d(m):void 0;return r.add({navigateCallbackResult:p!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,p}}const c=this.getAllAccounts().length>0;try{yx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,cl.SIGNIN),c?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,Ze.Redirect,e):this.eventHandler.emitEvent(Ge.LOGIN_START,Ze.Redirect,e);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?d=new _y(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Qt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(p=>{if(r.add({brokerErrorName:p.name,brokerErrorCode:p.errorCode}),p instanceof Fs&&bh(p))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(p instanceof jo)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw p}):d=this.createRedirectClient(n).acquireToken(e),await d}catch(d){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(ie.AcquireTokenRedirect,n).end({success:!1},d,e.account):r.end({success:!1},d,e.account),c?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,Ze.Redirect,null,d):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,Ze.Redirect,null,d),d}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ie.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",n),sy(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,cl.SIGNIN)}catch(m){return Promise.reject(m)}const a=this.getAllAccounts();a.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,Ze.Popup,e):this.eventHandler.emitEvent(Ge.LOGIN_START,Ze.Popup,e);let c;const d=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),c=this.acquireTokenNative({...e,correlationId:n},Qt.acquireTokenPopup).then(m=>(r.end({success:!0},void 0,m.account),m)).catch(m=>{if(r.add({brokerErrorName:m.name,brokerErrorCode:m.errorCode}),m instanceof Fs&&bh(m))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,d);if(m instanceof jo)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,d);throw m})):c=this.createPopupClient(n).acquireToken(e,d),c.then(m=>(a.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ge.LOGIN_SUCCESS,Ze.Popup,m):this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,Ze.Popup,m),r.end({success:!0,accessTokenSize:m.accessToken.length,idTokenSize:m.idToken.length},void 0,m.account),m)).catch(m=>(a.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,Ze.Popup,null,m):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,Ze.Popup,null,m),r.end({success:!1},m,e.account),Promise.reject(m))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ie.SsoSilent,n),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),sy(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Ge.SSO_SILENT_START,Ze.Silent,r);let a;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),a=this.acquireTokenNative(r,Qt.ssoSilent).catch(c=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof Fs&&bh(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):a=this.createSilentIframeClient(r.correlationId).acquireToken(r),a.then(c=>(this.eventHandler.emitEvent(Ge.SSO_SILENT_SUCCESS,Ze.Silent,c),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>{throw this.eventHandler.emitEvent(Ge.SSO_SILENT_FAILURE,Ze.Silent,null,c),this.ssoSilentMeasurement?.end({success:!1},c,e.account),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(ie.AcquireTokenByCode,n);sy(this.initialized,r),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_START,Ze.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Fe(dI);if(e.code){const a=e.code;let c=this.hybridAuthCodeResponses.get(a);return c?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),c=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(d=>(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Ze.Silent,d),this.hybridAuthCodeResponses.delete(a),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(a),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_FAILURE,Ze.Silent,null,d),r.end({success:!1},d),d}),this.hybridAuthCodeResponses.set(a,c)),await c}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const a=await this.acquireTokenNative({...e,correlationId:n},Qt.acquireTokenByCode,e.nativeAccountId).catch(c=>{throw c instanceof Fs&&bh(c)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c});return r.end({success:!0},void 0,a.account),a}else throw Fe(hI);else throw Fe(uI)}catch(a){throw this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_FAILURE,Ze.Silent,null,a),r.end({success:!1},a),a}}async acquireTokenByCodeAsync(e){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ie.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(a=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:a.fromCache}),a)).catch(a=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(ie.AcquireTokenFromCache,e.correlationId),n){case Wr.Default:case Wr.AccessToken:case Wr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return _e(r.acquireToken.bind(r),ie.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Pe(fl)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(ie.AcquireTokenByRefreshToken,e.correlationId),n){case Wr.Default:case Wr.AccessTokenAndRefreshToken:case Wr.RefreshToken:case Wr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return _e(r.acquireToken.bind(r),ie.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Pe(fl)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(ie.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return _e(n.acquireToken.bind(n),ie.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return yx(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,cl.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return zA(this.initialized),this.browserStorage.setInteractionInProgress(!0,cl.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return CU(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return wU(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return bU(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return EU(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return AU(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();TU(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return SU(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=ns.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,a){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Fe(OA);return new _y(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,a)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!og(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case vr.NONE:case vr.CONSENT:case vr.LOGIN:case vr.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new $U(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new YU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new tj(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Qt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new jI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new nj(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new ij(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Qt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return II(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Zn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==Zn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?rs():Ie.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||hx})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||hx})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(ie.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),sy(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",n);const a=e.account||this.getActiveAccount();if(!a)throw Fe(rI);return this.acquireTokenSilentDeduped(e,a,n).then(c=>(r.end({success:!0,fromCache:c.fromCache,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),{...c,state:e.state,correlationId:n})).catch(c=>{throw c instanceof Wt&&c.setCorrelationId(n),r.end({success:!1},c,a),c})}async acquireTokenSilentDeduped(e,n,r){const a=Kv(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),c=JSON.stringify(a),d=this.activeSilentTokenRequests.get(c);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const m=_e(this.acquireTokenSilentAsync.bind(this),ie.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(c,m),m.finally(()=>{this.activeSilentTokenRequests.delete(c)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),d}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ie.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,Ze.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const a=await _e(kU,ie.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),c=e.cacheLookupPolicy||Wr.Default;return this.acquireTokenSilentNoIframe(a,c).catch(async m=>{if(aj(m,c))if(this.activeIframeRequest)if(c!==Wr.Skip){const[y,v]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${v}`,a.correlationId);const b=this.performanceClient.startMeasurement(ie.AwaitConcurrentIframe,a.correlationId);b.add({awaitIframeCorrelationId:v});const E=await y;if(b.end({success:E}),E)return this.logger.verbose(`Parallel iframe request with correlationId: ${v} succeeded. Retrying cache and/or RT redemption`,a.correlationId),this.acquireTokenSilentNoIframe(a,c);throw this.logger.info(`Iframe request with correlationId: ${v} failed. Interaction is required.`),m}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",a.correlationId),_e(this.acquireTokenBySilentIframe.bind(this),ie.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a);else{let y;return this.activeIframeRequest=[new Promise(v=>{y=v}),a.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",a.correlationId),_e(this.acquireTokenBySilentIframe.bind(this),ie.AcquireTokenBySilentIframe,this.logger,this.performanceClient,a.correlationId)(a).then(v=>(y(!0),v)).catch(v=>{throw y(!1),v}).finally(()=>{this.activeIframeRequest=void 0})}else throw m}).then(m=>(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,Ze.Silent,m),this.performanceClient.addFields({fromCache:m.fromCache},e.correlationId),m)).catch(m=>{throw this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,Ze.Silent,null,m),m}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return og(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Qt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof Fs&&bh(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Pe(fl)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Wr.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),_e(this.acquireTokenFromCache.bind(this),ie.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Wr.AccessToken)throw r;return this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_NETWORK_START,Ze.Silent,e),_e(this.acquireTokenByRefreshToken.bind(this),ie.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await _e(Xv,ie.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),sj(n,e,this.logger)}}function aj(t,e){const n=!(t instanceof jo&&t.subError!==qv),r=t.errorCode===fo.INVALID_GRANT_ERROR||t.errorCode===fl,a=n&&r||t.errorCode===Xy||t.errorCode===bA,c=LL.includes(e);return a&&c}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function cj(t,e){const n=new Pu(t);return await n.initialize(),Zv.createController(n,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class XA{static async createPublicClientApplication(e){const n=await cj(e);return new XA(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new Zv(new Pu(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const lj={initialize:()=>Promise.reject(Hn(Xn)),acquireTokenPopup:()=>Promise.reject(Hn(Xn)),acquireTokenRedirect:()=>Promise.reject(Hn(Xn)),acquireTokenSilent:()=>Promise.reject(Hn(Xn)),acquireTokenByCode:()=>Promise.reject(Hn(Xn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Hn(Xn)),loginPopup:()=>Promise.reject(Hn(Xn)),loginRedirect:()=>Promise.reject(Hn(Xn)),logout:()=>Promise.reject(Hn(Xn)),logoutRedirect:()=>Promise.reject(Hn(Xn)),logoutPopup:()=>Promise.reject(Hn(Xn)),ssoSilent:()=>Promise.reject(Hn(Xn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Hn(Xn)},getLogger:()=>{throw Hn(Xn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Hn(Xn)},hydrateCache:()=>Promise.reject(Hn(Xn)),clearCache:()=>Promise.reject(Hn(Xn))};/*! @azure/msal-browser v4.25.0 2025-10-09 */class uj{static getInteractionStatusFromEvent(e,n){switch(e.eventType){case Ge.LOGIN_START:return Tn.Login;case Ge.SSO_SILENT_START:return Tn.SsoSilent;case Ge.ACQUIRE_TOKEN_START:if(e.interactionType===Ze.Redirect||e.interactionType===Ze.Popup)return Tn.AcquireToken;break;case Ge.HANDLE_REDIRECT_START:return Tn.HandleRedirect;case Ge.LOGOUT_START:return Tn.Logout;case Ge.SSO_SILENT_SUCCESS:case Ge.SSO_SILENT_FAILURE:if(n&&n!==Tn.SsoSilent)break;return Tn.None;case Ge.LOGOUT_END:if(n&&n!==Tn.Logout)break;return Tn.None;case Ge.HANDLE_REDIRECT_END:if(n&&n!==Tn.HandleRedirect)break;return Tn.None;case Ge.LOGIN_SUCCESS:case Ge.LOGIN_FAILURE:case Ge.ACQUIRE_TOKEN_SUCCESS:case Ge.ACQUIRE_TOKEN_FAILURE:case Ge.RESTORE_FROM_BFCACHE:if(e.interactionType===Ze.Redirect||e.interactionType===Ze.Popup){if(n&&n!==Tn.Login&&n!==Tn.AcquireToken)break;return Tn.None}break}return null}}/*! @azure/msal-react v3.0.20 2025-09-24 */const dj={instance:lj,inProgress:Tn.None,accounts:[],logger:new $a({})},JA=_.createContext(dj);JA.Consumer;/*! @azure/msal-react v3.0.20 2025-09-24 */function kx(t,e){if(t.length!==e.length)return!1;const n=[...e];return t.every(r=>{const a=n.shift();return!r||!a?!1:r.homeAccountId===a.homeAccountId&&r.localAccountId===a.localAccountId&&r.username===a.username})}/*! @azure/msal-react v3.0.20 2025-09-24 */const hj="@azure/msal-react",Ix="3.0.20";/*! @azure/msal-react v3.0.20 2025-09-24 */const iv={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},fj=(t,e)=>{const{type:n,payload:r}=e;let a=t.inProgress;switch(n){case iv.UNBLOCK_INPROGRESS:t.inProgress===Tn.Startup&&(a=Tn.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case iv.EVENT:const d=r.message,m=uj.getInteractionStatusFromEvent(d,t.inProgress);m&&(r.logger.info(`MsalProvider - ${d.eventType} results in setting inProgress from ${t.inProgress} to ${m}`),a=m);break;default:throw new Error(`Unknown action type: ${n}`)}if(a===Tn.Startup)return t;const c=r.instance.getAllAccounts();return a!==t.inProgress&&!kx(c,t.accounts)?{...t,inProgress:a,accounts:c}:a!==t.inProgress?{...t,inProgress:a}:kx(c,t.accounts)?t:{...t,accounts:c}};function mj({instance:t,children:e}){_.useEffect(()=>{t.initializeWrapperLibrary(ML.React,Ix)},[t]);const n=_.useMemo(()=>t.getLogger().clone(hj,Ix),[t]),[r,a]=_.useReducer(fj,void 0,()=>({inProgress:Tn.Startup,accounts:[]}));_.useEffect(()=>{const d=t.addEventCallback(m=>{a({payload:{instance:t,logger:n,message:m},type:iv.EVENT})});return n.verbose(`MsalProvider - Registered event callback with id: ${d}`),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:t,logger:n},type:iv.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{d&&(n.verbose(`MsalProvider - Removing event callback ${d}`),t.removeEventCallback(d))}},[t,n]);const c={instance:t,inProgress:r.inProgress,accounts:r.accounts,logger:n};return js.createElement(JA.Provider,{value:c},e)}/*! @azure/msal-react v3.0.20 2025-09-24 */const ZA=()=>_.useContext(JA);/*! @azure/msal-react v3.0.20 2025-09-24 */function gj(t,e){return t.length>0}function pj(t){const{accounts:e,inProgress:n}=ZA();return _.useMemo(()=>n===Tn.Startup?!1:gj(e),[e,n,t])}function Rx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function eC(...t){return e=>{let n=!1;const r=t.map(a=>{const c=Rx(a,e);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let a=0;a<r.length;a++){const c=r[a];typeof c=="function"?c():Rx(t[a],null)}}}}function Mt(...t){return _.useCallback(eC(...t),t)}function Ph(t){const e=vj(t),n=_.forwardRef((r,a)=>{const{children:c,...d}=r,m=_.Children.toArray(c),p=m.find(wj);if(p){const y=p.props.children,v=m.map(b=>b===p?_.Children.count(y)>1?_.Children.only(null):_.isValidElement(y)?y.props.children:null:b);return h.jsx(e,{...d,ref:a,children:_.isValidElement(y)?_.cloneElement(y,void 0,v):null})}return h.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}var yj=Ph("Slot");function vj(t){const e=_.forwardRef((n,r)=>{const{children:a,...c}=n;if(_.isValidElement(a)){const d=Ej(a),m=bj(c,a.props);return a.type!==_.Fragment&&(m.ref=r?eC(r,d):d),_.cloneElement(a,m)}return _.Children.count(a)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Cj=Symbol("radix.slottable");function wj(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Cj}function bj(t,e){const n={...e};for(const r in e){const a=t[r],c=e[r];/^on[A-Z]/.test(r)?a&&c?n[r]=(...m)=>{const p=c(...m);return a(...m),p}:a&&(n[r]=a):r==="style"?n[r]={...a,...c}:r==="className"&&(n[r]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function Ej(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function zI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=zI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function FI(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=zI(t))&&(r&&(r+=" "),r+=e);return r}const Nx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ox=FI,KI=(t,e)=>n=>{var r;if(e?.variants==null)return Ox(t,n?.class,n?.className);const{variants:a,defaultVariants:c}=e,d=Object.keys(a).map(y=>{const v=n?.[y],b=c?.[y];if(v===null)return null;const E=Nx(v)||Nx(b);return a[y][E]}),m=n&&Object.entries(n).reduce((y,v)=>{let[b,E]=v;return E===void 0||(y[b]=E),y},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((y,v)=>{let{class:b,className:E,...x}=v;return Object.entries(x).every(I=>{let[k,N]=I;return Array.isArray(N)?N.includes({...c,...m}[k]):{...c,...m}[k]===N})?[...y,b,E]:y},[]);return Ox(t,d,p,n?.class,n?.className)},eT="-",Aj=t=>{const e=Sj(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:d=>{const m=d.split(eT);return m[0]===""&&m.length!==1&&m.shift(),GI(m,e)||Tj(d)},getConflictingClassGroupIds:(d,m)=>{const p=n[d]||[];return m&&r[d]?[...p,...r[d]]:p}}},GI=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),a=r?GI(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const c=t.join(eT);return e.validators.find(({validator:d})=>d(c))?.classGroupId},Mx=/^\[(.+)\]$/,Tj=t=>{if(Mx.test(t)){const e=Mx.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Sj=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const a in n)tE(n[a],r,a,e);return r},tE=(t,e,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const c=a===""?e:Px(e,a);c.classGroupId=n;return}if(typeof a=="function"){if(xj(a)){tE(a(r),e,n,r);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([c,d])=>{tE(d,Px(e,c),n,r)})})},Px=(t,e)=>{let n=t;return e.split(eT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},xj=t=>t.isThemeGetter,_j=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const a=(c,d)=>{n.set(c,d),e++,e>t&&(e=0,r=n,n=new Map)};return{get(c){let d=n.get(c);if(d!==void 0)return d;if((d=r.get(c))!==void 0)return a(c,d),d},set(c,d){n.has(c)?n.set(c,d):a(c,d)}}},nE="!",rE=":",kj=rE.length,Ij=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const c=[];let d=0,m=0,p=0,y;for(let I=0;I<a.length;I++){let k=a[I];if(d===0&&m===0){if(k===rE){c.push(a.slice(p,I)),p=I+kj;continue}if(k==="/"){y=I;continue}}k==="["?d++:k==="]"?d--:k==="("?m++:k===")"&&m--}const v=c.length===0?a:a.substring(p),b=Rj(v),E=b!==v,x=y&&y>p?y-p:void 0;return{modifiers:c,hasImportantModifier:E,baseClassName:b,maybePostfixModifierPosition:x}};if(e){const a=e+rE,c=r;r=d=>d.startsWith(a)?c(d.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=c=>n({className:c,parseClassName:a})}return r},Rj=t=>t.endsWith(nE)?t.substring(0,t.length-1):t.startsWith(nE)?t.substring(1):t,Nj=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let c=[];return r.forEach(d=>{d[0]==="["||e[d]?(a.push(...c.sort(),d),c=[]):c.push(d)}),a.push(...c.sort()),a}},Oj=t=>({cache:_j(t.cacheSize),parseClassName:Ij(t),sortModifiers:Nj(t),...Aj(t)}),Mj=/\s+/,Pj=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:c}=e,d=[],m=t.trim().split(Mj);let p="";for(let y=m.length-1;y>=0;y-=1){const v=m[y],{isExternal:b,modifiers:E,hasImportantModifier:x,baseClassName:I,maybePostfixModifierPosition:k}=n(v);if(b){p=v+(p.length>0?" "+p:p);continue}let N=!!k,M=r(N?I.substring(0,k):I);if(!M){if(!N){p=v+(p.length>0?" "+p:p);continue}if(M=r(I),!M){p=v+(p.length>0?" "+p:p);continue}N=!1}const j=c(E).join(":"),O=x?j+nE:j,U=O+M;if(d.includes(U))continue;d.push(U);const H=a(M,N);for(let V=0;V<H.length;++V){const Q=H[V];d.push(O+Q)}p=v+(p.length>0?" "+p:p)}return p};function Dj(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=qI(e))&&(r&&(r+=" "),r+=n);return r}const qI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=qI(t[r]))&&(n&&(n+=" "),n+=e);return n};function Lj(t,...e){let n,r,a,c=d;function d(p){const y=e.reduce((v,b)=>b(v),t());return n=Oj(y),r=n.cache.get,a=n.cache.set,c=m,m(p)}function m(p){const y=r(p);if(y)return y;const v=Pj(p,n);return a(p,v),v}return function(){return c(Dj.apply(null,arguments))}}const Wn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$I=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,VI=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Uj=/^\d+\/\d+$/,jj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Hj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,zj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gh=t=>Uj.test(t),ft=t=>!!t&&!Number.isNaN(Number(t)),tl=t=>!!t&&Number.isInteger(Number(t)),ab=t=>t.endsWith("%")&&ft(t.slice(0,-1)),Ba=t=>jj.test(t),Kj=()=>!0,Gj=t=>Hj.test(t)&&!Bj.test(t),YI=()=>!1,qj=t=>zj.test(t),$j=t=>Fj.test(t),Vj=t=>!$e(t)&&!Ve(t),Yj=t=>tf(t,XI,YI),$e=t=>$I.test(t),bu=t=>tf(t,JI,Gj),cb=t=>tf(t,Zj,ft),Dx=t=>tf(t,QI,YI),Qj=t=>tf(t,WI,$j),ay=t=>tf(t,ZI,qj),Ve=t=>VI.test(t),Rm=t=>nf(t,JI),Wj=t=>nf(t,eH),Lx=t=>nf(t,QI),Xj=t=>nf(t,XI),Jj=t=>nf(t,WI),cy=t=>nf(t,ZI,!0),tf=(t,e,n)=>{const r=$I.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},nf=(t,e,n=!1)=>{const r=VI.exec(t);return r?r[1]?e(r[1]):n:!1},QI=t=>t==="position"||t==="percentage",WI=t=>t==="image"||t==="url",XI=t=>t==="length"||t==="size"||t==="bg-size",JI=t=>t==="length",Zj=t=>t==="number",eH=t=>t==="family-name",ZI=t=>t==="shadow",tH=()=>{const t=Wn("color"),e=Wn("font"),n=Wn("text"),r=Wn("font-weight"),a=Wn("tracking"),c=Wn("leading"),d=Wn("breakpoint"),m=Wn("container"),p=Wn("spacing"),y=Wn("radius"),v=Wn("shadow"),b=Wn("inset-shadow"),E=Wn("text-shadow"),x=Wn("drop-shadow"),I=Wn("blur"),k=Wn("perspective"),N=Wn("aspect"),M=Wn("ease"),j=Wn("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...U(),Ve,$e],V=()=>["auto","hidden","clip","visible","scroll"],Q=()=>["auto","contain","none"],Y=()=>[Ve,$e,p],ee=()=>[gh,"full","auto",...Y()],se=()=>[tl,"none","subgrid",Ve,$e],ce=()=>["auto",{span:["full",tl,Ve,$e]},tl,Ve,$e],te=()=>[tl,"auto",Ve,$e],re=()=>["auto","min","max","fr",Ve,$e],G=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...Y()],F=()=>[gh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Y()],$=()=>[t,Ve,$e],X=()=>[...U(),Lx,Dx,{position:[Ve,$e]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",Xj,Yj,{size:[Ve,$e]}],ue=()=>[ab,Rm,bu],de=()=>["","none","full",y,Ve,$e],ge=()=>["",ft,Rm,bu],Ne=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[ft,ab,Lx,Dx],Ce=()=>["","none",I,Ve,$e],De=()=>["none",ft,Ve,$e],we=()=>["none",ft,Ve,$e],be=()=>[ft,Ve,$e],Oe=()=>[gh,"full",...Y()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ba],breakpoint:[Ba],color:[Kj],container:[Ba],"drop-shadow":[Ba],ease:["in","out","in-out"],font:[Vj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ba],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ba],shadow:[Ba],spacing:["px",ft],text:[Ba],"text-shadow":[Ba],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gh,$e,Ve,N]}],container:["container"],columns:[{columns:[ft,$e,Ve,m]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:V()}],"overflow-x":[{"overflow-x":V()}],"overflow-y":[{"overflow-y":V()}],overscroll:[{overscroll:Q()}],"overscroll-x":[{"overscroll-x":Q()}],"overscroll-y":[{"overscroll-y":Q()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[tl,"auto",Ve,$e]}],basis:[{basis:[gh,"full","auto",m,...Y()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ft,gh,"auto","initial","none",$e]}],grow:[{grow:["",ft,Ve,$e]}],shrink:[{shrink:["",ft,Ve,$e]}],order:[{order:[tl,"first","last","none",Ve,$e]}],"grid-cols":[{"grid-cols":se()}],"col-start-end":[{col:ce()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":se()}],"row-start-end":[{row:ce()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":re()}],"auto-rows":[{"auto-rows":re()}],gap:[{gap:Y()}],"gap-x":[{"gap-x":Y()}],"gap-y":[{"gap-y":Y()}],"justify-content":[{justify:[...G(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...G()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":G()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:Y()}],px:[{px:Y()}],py:[{py:Y()}],ps:[{ps:Y()}],pe:[{pe:Y()}],pt:[{pt:Y()}],pr:[{pr:Y()}],pb:[{pb:Y()}],pl:[{pl:Y()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":Y()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Y()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[m,"screen",...F()]}],"min-w":[{"min-w":[m,"screen","none",...F()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[d]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,Rm,bu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ve,cb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ab,$e]}],"font-family":[{font:[Wj,$e,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Ve,$e]}],"line-clamp":[{"line-clamp":[ft,"none",Ve,cb]}],leading:[{leading:[c,...Y()]}],"list-image":[{"list-image":["none",Ve,$e]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ve,$e]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[ft,"from-font","auto",Ve,bu]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[ft,"auto",Ve,$e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve,$e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve,$e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},tl,Ve,$e],radial:["",Ve,$e],conic:[tl,Ve,$e]},Jj,Qj]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:ue()}],"gradient-via-pos":[{via:ue()}],"gradient-to-pos":[{to:ue()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ft,Ve,$e]}],"outline-w":[{outline:["",ft,Rm,bu]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",v,cy,ay]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",b,cy,ay]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[ft,bu]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",E,cy,ay]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[ft,Ve,$e]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[Ve,$e]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":U()}],"mask-image-conic-pos":[{"mask-conic":[ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ve,$e]}],filter:[{filter:["","none",Ve,$e]}],blur:[{blur:Ce()}],brightness:[{brightness:[ft,Ve,$e]}],contrast:[{contrast:[ft,Ve,$e]}],"drop-shadow":[{"drop-shadow":["","none",x,cy,ay]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",ft,Ve,$e]}],"hue-rotate":[{"hue-rotate":[ft,Ve,$e]}],invert:[{invert:["",ft,Ve,$e]}],saturate:[{saturate:[ft,Ve,$e]}],sepia:[{sepia:["",ft,Ve,$e]}],"backdrop-filter":[{"backdrop-filter":["","none",Ve,$e]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[ft,Ve,$e]}],"backdrop-contrast":[{"backdrop-contrast":[ft,Ve,$e]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ft,Ve,$e]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ft,Ve,$e]}],"backdrop-invert":[{"backdrop-invert":["",ft,Ve,$e]}],"backdrop-opacity":[{"backdrop-opacity":[ft,Ve,$e]}],"backdrop-saturate":[{"backdrop-saturate":[ft,Ve,$e]}],"backdrop-sepia":[{"backdrop-sepia":["",ft,Ve,$e]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Y()}],"border-spacing-x":[{"border-spacing-x":Y()}],"border-spacing-y":[{"border-spacing-y":Y()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ve,$e]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ft,"initial",Ve,$e]}],ease:[{ease:["linear","initial",M,Ve,$e]}],delay:[{delay:[ft,Ve,$e]}],animate:[{animate:["none",j,Ve,$e]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[k,Ve,$e]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:be()}],"skew-x":[{"skew-x":be()}],"skew-y":[{"skew-y":be()}],transform:[{transform:[Ve,$e,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Oe()}],"translate-x":[{"translate-x":Oe()}],"translate-y":[{"translate-y":Oe()}],"translate-z":[{"translate-z":Oe()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve,$e]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve,$e]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[ft,Rm,bu,cb]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},nH=Lj(tH);function At(...t){return nH(FI(t))}const rH=KI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function wt({className:t,variant:e,size:n,asChild:r=!1,...a}){const c=r?yj:"button";return h.jsx(c,{"data-slot":"button",className:At(rH({variant:e,size:n,className:t})),...a})}function Qe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return e?.(a)}}function Xa(t,e=[]){let n=[];function r(c,d){const m=_.createContext(d),p=n.length;n=[...n,d];const y=b=>{const{scope:E,children:x,...I}=b,k=E?.[t]?.[p]||m,N=_.useMemo(()=>I,Object.values(I));return h.jsx(k.Provider,{value:N,children:x})};y.displayName=c+"Provider";function v(b,E){const x=E?.[t]?.[p]||m,I=_.useContext(x);if(I)return I;if(d!==void 0)return d;throw new Error(`\`${b}\` must be used within \`${c}\``)}return[y,v]}const a=()=>{const c=n.map(d=>_.createContext(d));return function(m){const p=m?.[t]||c;return _.useMemo(()=>({[`__scope${t}`]:{...m,[t]:p}}),[m,p])}};return a.scopeName=t,[r,oH(a,...e)]}function oH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const d=r.reduce((m,{useScope:p,scopeName:y})=>{const b=p(c)[`__scope${y}`];return{...m,...b}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}var wr=globalThis?.document?_.useLayoutEffect:()=>{},iH=N_[" useInsertionEffect ".trim().toString()]||wr;function Dh({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[a,c,d]=sH({defaultProp:e,onChange:n}),m=t!==void 0,p=m?t:a;{const v=_.useRef(t!==void 0);_.useEffect(()=>{const b=v.current;b!==m&&console.warn(`${r} is changing from ${b?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=m},[m,r])}const y=_.useCallback(v=>{if(m){const b=aH(v)?v(t):v;b!==t&&d.current?.(b)}else c(v)},[m,t,c,d]);return[p,y]}function sH({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),a=_.useRef(n),c=_.useRef(e);return iH(()=>{c.current=e},[e]),_.useEffect(()=>{a.current!==n&&(c.current?.(n),a.current=n)},[n,a]),[n,r,c]}function aH(t){return typeof t=="function"}var Tg=O_();const cH=KE(Tg);var lH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ct=lH.reduce((t,e)=>{const n=Ph(`Primitive.${e}`),r=_.forwardRef((a,c)=>{const{asChild:d,...m}=a,p=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(p,{...m,ref:c})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function eR(t,e){t&&Tg.flushSync(()=>t.dispatchEvent(e))}function tT(t){const e=t+"CollectionProvider",[n,r]=Xa(e),[a,c]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=k=>{const{scope:N,children:M}=k,j=js.useRef(null),O=js.useRef(new Map).current;return h.jsx(a,{scope:N,itemMap:O,collectionRef:j,children:M})};d.displayName=e;const m=t+"CollectionSlot",p=Ph(m),y=js.forwardRef((k,N)=>{const{scope:M,children:j}=k,O=c(m,M),U=Mt(N,O.collectionRef);return h.jsx(p,{ref:U,children:j})});y.displayName=m;const v=t+"CollectionItemSlot",b="data-radix-collection-item",E=Ph(v),x=js.forwardRef((k,N)=>{const{scope:M,children:j,...O}=k,U=js.useRef(null),H=Mt(N,U),V=c(v,M);return js.useEffect(()=>(V.itemMap.set(U,{ref:U,...O}),()=>void V.itemMap.delete(U))),h.jsx(E,{[b]:"",ref:H,children:j})});x.displayName=v;function I(k){const N=c(t+"CollectionConsumer",k);return js.useCallback(()=>{const j=N.collectionRef.current;if(!j)return[];const O=Array.from(j.querySelectorAll(`[${b}]`));return Array.from(N.itemMap.values()).sort((V,Q)=>O.indexOf(V.ref.current)-O.indexOf(Q.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:d,Slot:y,ItemSlot:x},I,r]}var uH=_.createContext(void 0);function Sg(t){const e=_.useContext(uH);return t||e||"ltr"}function Cr(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>e.current?.(...n),[])}function dH(t,e=globalThis?.document){const n=Cr(t);_.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hH="DismissableLayer",oE="dismissableLayer.update",fH="dismissableLayer.pointerDownOutside",mH="dismissableLayer.focusOutside",Ux,tR=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nT=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:c,onInteractOutside:d,onDismiss:m,...p}=t,y=_.useContext(tR),[v,b]=_.useState(null),E=v?.ownerDocument??globalThis?.document,[,x]=_.useState({}),I=Mt(e,Q=>b(Q)),k=Array.from(y.layers),[N]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),M=k.indexOf(N),j=v?k.indexOf(v):-1,O=y.layersWithOutsidePointerEventsDisabled.size>0,U=j>=M,H=yH(Q=>{const Y=Q.target,ee=[...y.branches].some(se=>se.contains(Y));!U||ee||(a?.(Q),d?.(Q),Q.defaultPrevented||m?.())},E),V=vH(Q=>{const Y=Q.target;[...y.branches].some(se=>se.contains(Y))||(c?.(Q),d?.(Q),Q.defaultPrevented||m?.())},E);return dH(Q=>{j===y.layers.size-1&&(r?.(Q),!Q.defaultPrevented&&m&&(Q.preventDefault(),m()))},E),_.useEffect(()=>{if(v)return n&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(Ux=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(v)),y.layers.add(v),jx(),()=>{n&&y.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=Ux)}},[v,E,n,y]),_.useEffect(()=>()=>{v&&(y.layers.delete(v),y.layersWithOutsidePointerEventsDisabled.delete(v),jx())},[v,y]),_.useEffect(()=>{const Q=()=>x({});return document.addEventListener(oE,Q),()=>document.removeEventListener(oE,Q)},[]),h.jsx(ct.div,{...p,ref:I,style:{pointerEvents:O?U?"auto":"none":void 0,...t.style},onFocusCapture:Qe(t.onFocusCapture,V.onFocusCapture),onBlurCapture:Qe(t.onBlurCapture,V.onBlurCapture),onPointerDownCapture:Qe(t.onPointerDownCapture,H.onPointerDownCapture)})});nT.displayName=hH;var gH="DismissableLayerBranch",pH=_.forwardRef((t,e)=>{const n=_.useContext(tR),r=_.useRef(null),a=Mt(e,r);return _.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),h.jsx(ct.div,{...t,ref:a})});pH.displayName=gH;function yH(t,e=globalThis?.document){const n=Cr(t),r=_.useRef(!1),a=_.useRef(()=>{});return _.useEffect(()=>{const c=m=>{if(m.target&&!r.current){let p=function(){nR(fH,n,y,{discrete:!0})};const y={originalEvent:m};m.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=p,e.addEventListener("click",a.current,{once:!0})):p()}else e.removeEventListener("click",a.current);r.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",c),e.removeEventListener("click",a.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function vH(t,e=globalThis?.document){const n=Cr(t),r=_.useRef(!1);return _.useEffect(()=>{const a=c=>{c.target&&!r.current&&nR(mH,n,{originalEvent:c},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function jx(){const t=new CustomEvent(oE);document.dispatchEvent(t)}function nR(t,e,n,{discrete:r}){const a=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),r?eR(a,c):a.dispatchEvent(c)}var lb=0;function rR(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hx()),document.body.insertAdjacentElement("beforeend",t[1]??Hx()),lb++,()=>{lb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),lb--}},[])}function Hx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ub="focusScope.autoFocusOnMount",db="focusScope.autoFocusOnUnmount",Bx={bubbles:!1,cancelable:!0},CH="FocusScope",rT=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:c,...d}=t,[m,p]=_.useState(null),y=Cr(a),v=Cr(c),b=_.useRef(null),E=Mt(e,k=>p(k)),x=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let k=function(O){if(x.paused||!m)return;const U=O.target;m.contains(U)?b.current=U:sl(b.current,{select:!0})},N=function(O){if(x.paused||!m)return;const U=O.relatedTarget;U!==null&&(m.contains(U)||sl(b.current,{select:!0}))},M=function(O){if(document.activeElement===document.body)for(const H of O)H.removedNodes.length>0&&sl(m)};document.addEventListener("focusin",k),document.addEventListener("focusout",N);const j=new MutationObserver(M);return m&&j.observe(m,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",k),document.removeEventListener("focusout",N),j.disconnect()}}},[r,m,x.paused]),_.useEffect(()=>{if(m){Fx.add(x);const k=document.activeElement;if(!m.contains(k)){const M=new CustomEvent(ub,Bx);m.addEventListener(ub,y),m.dispatchEvent(M),M.defaultPrevented||(wH(SH(oR(m)),{select:!0}),document.activeElement===k&&sl(m))}return()=>{m.removeEventListener(ub,y),setTimeout(()=>{const M=new CustomEvent(db,Bx);m.addEventListener(db,v),m.dispatchEvent(M),M.defaultPrevented||sl(k??document.body,{select:!0}),m.removeEventListener(db,v),Fx.remove(x)},0)}}},[m,y,v,x]);const I=_.useCallback(k=>{if(!n&&!r||x.paused)return;const N=k.key==="Tab"&&!k.altKey&&!k.ctrlKey&&!k.metaKey,M=document.activeElement;if(N&&M){const j=k.currentTarget,[O,U]=bH(j);O&&U?!k.shiftKey&&M===U?(k.preventDefault(),n&&sl(O,{select:!0})):k.shiftKey&&M===O&&(k.preventDefault(),n&&sl(U,{select:!0})):M===j&&k.preventDefault()}},[n,r,x.paused]);return h.jsx(ct.div,{tabIndex:-1,...d,ref:E,onKeyDown:I})});rT.displayName=CH;function wH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(sl(r,{select:e}),document.activeElement!==n)return}function bH(t){const e=oR(t),n=zx(e,t),r=zx(e.reverse(),t);return[n,r]}function oR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zx(t,e){for(const n of t)if(!EH(n,{upTo:e}))return n}function EH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function AH(t){return t instanceof HTMLInputElement&&"select"in t}function sl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&AH(t)&&e&&t.select()}}var Fx=TH();function TH(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Kx(t,e),t.unshift(e)},remove(e){t=Kx(t,e),t[0]?.resume()}}}function Kx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function SH(t){return t.filter(e=>e.tagName!=="A")}var xH=N_[" useId ".trim().toString()]||(()=>{}),_H=0;function Du(t){const[e,n]=_.useState(xH());return wr(()=>{n(r=>r??String(_H++))},[t]),e?`radix-${e}`:""}const kH=["top","right","bottom","left"],wl=Math.min,Oo=Math.max,sv=Math.round,ly=Math.floor,qs=t=>({x:t,y:t}),IH={left:"right",right:"left",bottom:"top",top:"bottom"},RH={start:"end",end:"start"};function iE(t,e,n){return Oo(t,wl(e,n))}function Ya(t,e){return typeof t=="function"?t(e):t}function Qa(t){return t.split("-")[0]}function rf(t){return t.split("-")[1]}function oT(t){return t==="x"?"y":"x"}function iT(t){return t==="y"?"height":"width"}const NH=new Set(["top","bottom"]);function Ks(t){return NH.has(Qa(t))?"y":"x"}function sT(t){return oT(Ks(t))}function OH(t,e,n){n===void 0&&(n=!1);const r=rf(t),a=sT(t),c=iT(a);let d=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(d=av(d)),[d,av(d)]}function MH(t){const e=av(t);return[sE(t),e,sE(e)]}function sE(t){return t.replace(/start|end/g,e=>RH[e])}const Gx=["left","right"],qx=["right","left"],PH=["top","bottom"],DH=["bottom","top"];function LH(t,e,n){switch(t){case"top":case"bottom":return n?e?qx:Gx:e?Gx:qx;case"left":case"right":return e?PH:DH;default:return[]}}function UH(t,e,n,r){const a=rf(t);let c=LH(Qa(t),n==="start",r);return a&&(c=c.map(d=>d+"-"+a),e&&(c=c.concat(c.map(sE)))),c}function av(t){return t.replace(/left|right|bottom|top/g,e=>IH[e])}function jH(t){return{top:0,right:0,bottom:0,left:0,...t}}function iR(t){return typeof t!="number"?jH(t):{top:t,right:t,bottom:t,left:t}}function cv(t){const{x:e,y:n,width:r,height:a}=t;return{width:r,height:a,top:n,left:e,right:e+r,bottom:n+a,x:e,y:n}}function $x(t,e,n){let{reference:r,floating:a}=t;const c=Ks(e),d=sT(e),m=iT(d),p=Qa(e),y=c==="y",v=r.x+r.width/2-a.width/2,b=r.y+r.height/2-a.height/2,E=r[m]/2-a[m]/2;let x;switch(p){case"top":x={x:v,y:r.y-a.height};break;case"bottom":x={x:v,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:b};break;case"left":x={x:r.x-a.width,y:b};break;default:x={x:r.x,y:r.y}}switch(rf(e)){case"start":x[d]-=E*(n&&y?-1:1);break;case"end":x[d]+=E*(n&&y?-1:1);break}return x}const HH=async(t,e,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:c=[],platform:d}=n,m=c.filter(Boolean),p=await(d.isRTL==null?void 0:d.isRTL(e));let y=await d.getElementRects({reference:t,floating:e,strategy:a}),{x:v,y:b}=$x(y,r,p),E=r,x={},I=0;for(let k=0;k<m.length;k++){const{name:N,fn:M}=m[k],{x:j,y:O,data:U,reset:H}=await M({x:v,y:b,initialPlacement:r,placement:E,strategy:a,middlewareData:x,rects:y,platform:d,elements:{reference:t,floating:e}});v=j??v,b=O??b,x={...x,[N]:{...x[N],...U}},H&&I<=50&&(I++,typeof H=="object"&&(H.placement&&(E=H.placement),H.rects&&(y=H.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:a}):H.rects),{x:v,y:b}=$x(y,E,p)),k=-1)}return{x:v,y:b,placement:E,strategy:a,middlewareData:x}};async function ig(t,e){var n;e===void 0&&(e={});const{x:r,y:a,platform:c,rects:d,elements:m,strategy:p}=t,{boundary:y="clippingAncestors",rootBoundary:v="viewport",elementContext:b="floating",altBoundary:E=!1,padding:x=0}=Ya(e,t),I=iR(x),N=m[E?b==="floating"?"reference":"floating":b],M=cv(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(N)))==null||n?N:N.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(m.floating)),boundary:y,rootBoundary:v,strategy:p})),j=b==="floating"?{x:r,y:a,width:d.floating.width,height:d.floating.height}:d.reference,O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m.floating)),U=await(c.isElement==null?void 0:c.isElement(O))?await(c.getScale==null?void 0:c.getScale(O))||{x:1,y:1}:{x:1,y:1},H=cv(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:j,offsetParent:O,strategy:p}):j);return{top:(M.top-H.top+I.top)/U.y,bottom:(H.bottom-M.bottom+I.bottom)/U.y,left:(M.left-H.left+I.left)/U.x,right:(H.right-M.right+I.right)/U.x}}const BH=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:a,rects:c,platform:d,elements:m,middlewareData:p}=e,{element:y,padding:v=0}=Ya(t,e)||{};if(y==null)return{};const b=iR(v),E={x:n,y:r},x=sT(a),I=iT(x),k=await d.getDimensions(y),N=x==="y",M=N?"top":"left",j=N?"bottom":"right",O=N?"clientHeight":"clientWidth",U=c.reference[I]+c.reference[x]-E[x]-c.floating[I],H=E[x]-c.reference[x],V=await(d.getOffsetParent==null?void 0:d.getOffsetParent(y));let Q=V?V[O]:0;(!Q||!await(d.isElement==null?void 0:d.isElement(V)))&&(Q=m.floating[O]||c.floating[I]);const Y=U/2-H/2,ee=Q/2-k[I]/2-1,se=wl(b[M],ee),ce=wl(b[j],ee),te=se,re=Q-k[I]-ce,G=Q/2-k[I]/2+Y,J=iE(te,G,re),D=!p.arrow&&rf(a)!=null&&G!==J&&c.reference[I]/2-(G<te?se:ce)-k[I]/2<0,F=D?G<te?G-te:G-re:0;return{[x]:E[x]+F,data:{[x]:J,centerOffset:G-J-F,...D&&{alignmentOffset:F}},reset:D}}}),zH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:a,middlewareData:c,rects:d,initialPlacement:m,platform:p,elements:y}=e,{mainAxis:v=!0,crossAxis:b=!0,fallbackPlacements:E,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:k=!0,...N}=Ya(t,e);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const M=Qa(a),j=Ks(m),O=Qa(m)===m,U=await(p.isRTL==null?void 0:p.isRTL(y.floating)),H=E||(O||!k?[av(m)]:MH(m)),V=I!=="none";!E&&V&&H.push(...UH(m,k,I,U));const Q=[m,...H],Y=await ig(e,N),ee=[];let se=((r=c.flip)==null?void 0:r.overflows)||[];if(v&&ee.push(Y[M]),b){const G=OH(a,d,U);ee.push(Y[G[0]],Y[G[1]])}if(se=[...se,{placement:a,overflows:ee}],!ee.every(G=>G<=0)){var ce,te;const G=(((ce=c.flip)==null?void 0:ce.index)||0)+1,J=Q[G];if(J&&(!(b==="alignment"?j!==Ks(J):!1)||se.every($=>Ks($.placement)===j?$.overflows[0]>0:!0)))return{data:{index:G,overflows:se},reset:{placement:J}};let D=(te=se.filter(F=>F.overflows[0]<=0).sort((F,$)=>F.overflows[1]-$.overflows[1])[0])==null?void 0:te.placement;if(!D)switch(x){case"bestFit":{var re;const F=(re=se.filter($=>{if(V){const X=Ks($.placement);return X===j||X==="y"}return!0}).map($=>[$.placement,$.overflows.filter(X=>X>0).reduce((X,z)=>X+z,0)]).sort(($,X)=>$[1]-X[1])[0])==null?void 0:re[0];F&&(D=F);break}case"initialPlacement":D=m;break}if(a!==D)return{reset:{placement:D}}}return{}}}};function Vx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Yx(t){return kH.some(e=>t[e]>=0)}const FH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...a}=Ya(t,e);switch(r){case"referenceHidden":{const c=await ig(e,{...a,elementContext:"reference"}),d=Vx(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Yx(d)}}}case"escaped":{const c=await ig(e,{...a,altBoundary:!0}),d=Vx(c,n.floating);return{data:{escapedOffsets:d,escaped:Yx(d)}}}default:return{}}}}},sR=new Set(["left","top"]);async function KH(t,e){const{placement:n,platform:r,elements:a}=t,c=await(r.isRTL==null?void 0:r.isRTL(a.floating)),d=Qa(n),m=rf(n),p=Ks(n)==="y",y=sR.has(d)?-1:1,v=c&&p?-1:1,b=Ya(e,t);let{mainAxis:E,crossAxis:x,alignmentAxis:I}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return m&&typeof I=="number"&&(x=m==="end"?I*-1:I),p?{x:x*v,y:E*y}:{x:E*y,y:x*v}}const GH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:a,y:c,placement:d,middlewareData:m}=e,p=await KH(e,t);return d===((n=m.offset)==null?void 0:n.placement)&&(r=m.arrow)!=null&&r.alignmentOffset?{}:{x:a+p.x,y:c+p.y,data:{...p,placement:d}}}}},qH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:a}=e,{mainAxis:c=!0,crossAxis:d=!1,limiter:m={fn:N=>{let{x:M,y:j}=N;return{x:M,y:j}}},...p}=Ya(t,e),y={x:n,y:r},v=await ig(e,p),b=Ks(Qa(a)),E=oT(b);let x=y[E],I=y[b];if(c){const N=E==="y"?"top":"left",M=E==="y"?"bottom":"right",j=x+v[N],O=x-v[M];x=iE(j,x,O)}if(d){const N=b==="y"?"top":"left",M=b==="y"?"bottom":"right",j=I+v[N],O=I-v[M];I=iE(j,I,O)}const k=m.fn({...e,[E]:x,[b]:I});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[E]:c,[b]:d}}}}}},$H=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:a,rects:c,middlewareData:d}=e,{offset:m=0,mainAxis:p=!0,crossAxis:y=!0}=Ya(t,e),v={x:n,y:r},b=Ks(a),E=oT(b);let x=v[E],I=v[b];const k=Ya(m,e),N=typeof k=="number"?{mainAxis:k,crossAxis:0}:{mainAxis:0,crossAxis:0,...k};if(p){const O=E==="y"?"height":"width",U=c.reference[E]-c.floating[O]+N.mainAxis,H=c.reference[E]+c.reference[O]-N.mainAxis;x<U?x=U:x>H&&(x=H)}if(y){var M,j;const O=E==="y"?"width":"height",U=sR.has(Qa(a)),H=c.reference[b]-c.floating[O]+(U&&((M=d.offset)==null?void 0:M[b])||0)+(U?0:N.crossAxis),V=c.reference[b]+c.reference[O]+(U?0:((j=d.offset)==null?void 0:j[b])||0)-(U?N.crossAxis:0);I<H?I=H:I>V&&(I=V)}return{[E]:x,[b]:I}}}},VH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:a,rects:c,platform:d,elements:m}=e,{apply:p=()=>{},...y}=Ya(t,e),v=await ig(e,y),b=Qa(a),E=rf(a),x=Ks(a)==="y",{width:I,height:k}=c.floating;let N,M;b==="top"||b==="bottom"?(N=b,M=E===(await(d.isRTL==null?void 0:d.isRTL(m.floating))?"start":"end")?"left":"right"):(M=b,N=E==="end"?"top":"bottom");const j=k-v.top-v.bottom,O=I-v.left-v.right,U=wl(k-v[N],j),H=wl(I-v[M],O),V=!e.middlewareData.shift;let Q=U,Y=H;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(Y=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(Q=j),V&&!E){const se=Oo(v.left,0),ce=Oo(v.right,0),te=Oo(v.top,0),re=Oo(v.bottom,0);x?Y=I-2*(se!==0||ce!==0?se+ce:Oo(v.left,v.right)):Q=k-2*(te!==0||re!==0?te+re:Oo(v.top,v.bottom))}await p({...e,availableWidth:Y,availableHeight:Q});const ee=await d.getDimensions(m.floating);return I!==ee.width||k!==ee.height?{reset:{rects:!0}}:{}}}};function tC(){return typeof window<"u"}function of(t){return aR(t)?(t.nodeName||"").toLowerCase():"#document"}function Uo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xs(t){var e;return(e=(aR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aR(t){return tC()?t instanceof Node||t instanceof Uo(t).Node:!1}function os(t){return tC()?t instanceof Element||t instanceof Uo(t).Element:!1}function Ys(t){return tC()?t instanceof HTMLElement||t instanceof Uo(t).HTMLElement:!1}function Qx(t){return!tC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Uo(t).ShadowRoot}const YH=new Set(["inline","contents"]);function xg(t){const{overflow:e,overflowX:n,overflowY:r,display:a}=is(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!YH.has(a)}const QH=new Set(["table","td","th"]);function WH(t){return QH.has(of(t))}const XH=[":popover-open",":modal"];function nC(t){return XH.some(e=>{try{return t.matches(e)}catch{return!1}})}const JH=["transform","translate","scale","rotate","perspective"],ZH=["transform","translate","scale","rotate","perspective","filter"],e4=["paint","layout","strict","content"];function aT(t){const e=cT(),n=os(t)?is(t):t;return JH.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||ZH.some(r=>(n.willChange||"").includes(r))||e4.some(r=>(n.contain||"").includes(r))}function t4(t){let e=bl(t);for(;Ys(e)&&!Lh(e);){if(aT(e))return e;if(nC(e))return null;e=bl(e)}return null}function cT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const n4=new Set(["html","body","#document"]);function Lh(t){return n4.has(of(t))}function is(t){return Uo(t).getComputedStyle(t)}function rC(t){return os(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bl(t){if(of(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Qx(t)&&t.host||Xs(t);return Qx(e)?e.host:e}function cR(t){const e=bl(t);return Lh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ys(e)&&xg(e)?e:cR(e)}function sg(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=cR(t),c=a===((r=t.ownerDocument)==null?void 0:r.body),d=Uo(a);if(c){const m=aE(d);return e.concat(d,d.visualViewport||[],xg(a)?a:[],m&&n?sg(m):[])}return e.concat(a,sg(a,[],n))}function aE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lR(t){const e=is(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=Ys(t),c=a?t.offsetWidth:n,d=a?t.offsetHeight:r,m=sv(n)!==c||sv(r)!==d;return m&&(n=c,r=d),{width:n,height:r,$:m}}function lT(t){return os(t)?t:t.contextElement}function _h(t){const e=lT(t);if(!Ys(e))return qs(1);const n=e.getBoundingClientRect(),{width:r,height:a,$:c}=lR(e);let d=(c?sv(n.width):n.width)/r,m=(c?sv(n.height):n.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const r4=qs(0);function uR(t){const e=Uo(t);return!cT()||!e.visualViewport?r4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function o4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Uo(t)?!1:e}function Lu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),c=lT(t);let d=qs(1);e&&(r?os(r)&&(d=_h(r)):d=_h(t));const m=o4(c,n,r)?uR(c):qs(0);let p=(a.left+m.x)/d.x,y=(a.top+m.y)/d.y,v=a.width/d.x,b=a.height/d.y;if(c){const E=Uo(c),x=r&&os(r)?Uo(r):r;let I=E,k=aE(I);for(;k&&r&&x!==I;){const N=_h(k),M=k.getBoundingClientRect(),j=is(k),O=M.left+(k.clientLeft+parseFloat(j.paddingLeft))*N.x,U=M.top+(k.clientTop+parseFloat(j.paddingTop))*N.y;p*=N.x,y*=N.y,v*=N.x,b*=N.y,p+=O,y+=U,I=Uo(k),k=aE(I)}}return cv({width:v,height:b,x:p,y})}function oC(t,e){const n=rC(t).scrollLeft;return e?e.left+n:Lu(Xs(t)).left+n}function dR(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-oC(t,n),a=n.top+e.scrollTop;return{x:r,y:a}}function i4(t){let{elements:e,rect:n,offsetParent:r,strategy:a}=t;const c=a==="fixed",d=Xs(r),m=e?nC(e.floating):!1;if(r===d||m&&c)return n;let p={scrollLeft:0,scrollTop:0},y=qs(1);const v=qs(0),b=Ys(r);if((b||!b&&!c)&&((of(r)!=="body"||xg(d))&&(p=rC(r)),Ys(r))){const x=Lu(r);y=_h(r),v.x=x.x+r.clientLeft,v.y=x.y+r.clientTop}const E=d&&!b&&!c?dR(d,p):qs(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-p.scrollLeft*y.x+v.x+E.x,y:n.y*y.y-p.scrollTop*y.y+v.y+E.y}}function s4(t){return Array.from(t.getClientRects())}function a4(t){const e=Xs(t),n=rC(t),r=t.ownerDocument.body,a=Oo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),c=Oo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+oC(t);const m=-n.scrollTop;return is(r).direction==="rtl"&&(d+=Oo(e.clientWidth,r.clientWidth)-a),{width:a,height:c,x:d,y:m}}const Wx=25;function c4(t,e){const n=Uo(t),r=Xs(t),a=n.visualViewport;let c=r.clientWidth,d=r.clientHeight,m=0,p=0;if(a){c=a.width,d=a.height;const v=cT();(!v||v&&e==="fixed")&&(m=a.offsetLeft,p=a.offsetTop)}const y=oC(r);if(y<=0){const v=r.ownerDocument,b=v.body,E=getComputedStyle(b),x=v.compatMode==="CSS1Compat"&&parseFloat(E.marginLeft)+parseFloat(E.marginRight)||0,I=Math.abs(r.clientWidth-b.clientWidth-x);I<=Wx&&(c-=I)}else y<=Wx&&(c+=y);return{width:c,height:d,x:m,y:p}}const l4=new Set(["absolute","fixed"]);function u4(t,e){const n=Lu(t,!0,e==="fixed"),r=n.top+t.clientTop,a=n.left+t.clientLeft,c=Ys(t)?_h(t):qs(1),d=t.clientWidth*c.x,m=t.clientHeight*c.y,p=a*c.x,y=r*c.y;return{width:d,height:m,x:p,y}}function Xx(t,e,n){let r;if(e==="viewport")r=c4(t,n);else if(e==="document")r=a4(Xs(t));else if(os(e))r=u4(e,n);else{const a=uR(t);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return cv(r)}function hR(t,e){const n=bl(t);return n===e||!os(n)||Lh(n)?!1:is(n).position==="fixed"||hR(n,e)}function d4(t,e){const n=e.get(t);if(n)return n;let r=sg(t,[],!1).filter(m=>os(m)&&of(m)!=="body"),a=null;const c=is(t).position==="fixed";let d=c?bl(t):t;for(;os(d)&&!Lh(d);){const m=is(d),p=aT(d);!p&&m.position==="fixed"&&(a=null),(c?!p&&!a:!p&&m.position==="static"&&!!a&&l4.has(a.position)||xg(d)&&!p&&hR(t,d))?r=r.filter(v=>v!==d):a=m,d=bl(d)}return e.set(t,r),r}function h4(t){let{element:e,boundary:n,rootBoundary:r,strategy:a}=t;const d=[...n==="clippingAncestors"?nC(e)?[]:d4(e,this._c):[].concat(n),r],m=d[0],p=d.reduce((y,v)=>{const b=Xx(e,v,a);return y.top=Oo(b.top,y.top),y.right=wl(b.right,y.right),y.bottom=wl(b.bottom,y.bottom),y.left=Oo(b.left,y.left),y},Xx(e,m,a));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function f4(t){const{width:e,height:n}=lR(t);return{width:e,height:n}}function m4(t,e,n){const r=Ys(e),a=Xs(e),c=n==="fixed",d=Lu(t,!0,c,e);let m={scrollLeft:0,scrollTop:0};const p=qs(0);function y(){p.x=oC(a)}if(r||!r&&!c)if((of(e)!=="body"||xg(a))&&(m=rC(e)),r){const x=Lu(e,!0,c,e);p.x=x.x+e.clientLeft,p.y=x.y+e.clientTop}else a&&y();c&&!r&&a&&y();const v=a&&!r&&!c?dR(a,m):qs(0),b=d.left+m.scrollLeft-p.x-v.x,E=d.top+m.scrollTop-p.y-v.y;return{x:b,y:E,width:d.width,height:d.height}}function hb(t){return is(t).position==="static"}function Jx(t,e){if(!Ys(t)||is(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xs(t)===n&&(n=n.ownerDocument.body),n}function fR(t,e){const n=Uo(t);if(nC(t))return n;if(!Ys(t)){let a=bl(t);for(;a&&!Lh(a);){if(os(a)&&!hb(a))return a;a=bl(a)}return n}let r=Jx(t,e);for(;r&&WH(r)&&hb(r);)r=Jx(r,e);return r&&Lh(r)&&hb(r)&&!aT(r)?n:r||t4(t)||n}const g4=async function(t){const e=this.getOffsetParent||fR,n=this.getDimensions,r=await n(t.floating);return{reference:m4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function p4(t){return is(t).direction==="rtl"}const y4={convertOffsetParentRelativeRectToViewportRelativeRect:i4,getDocumentElement:Xs,getClippingRect:h4,getOffsetParent:fR,getElementRects:g4,getClientRects:s4,getDimensions:f4,getScale:_h,isElement:os,isRTL:p4};function mR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function v4(t,e){let n=null,r;const a=Xs(t);function c(){var m;clearTimeout(r),(m=n)==null||m.disconnect(),n=null}function d(m,p){m===void 0&&(m=!1),p===void 0&&(p=1),c();const y=t.getBoundingClientRect(),{left:v,top:b,width:E,height:x}=y;if(m||e(),!E||!x)return;const I=ly(b),k=ly(a.clientWidth-(v+E)),N=ly(a.clientHeight-(b+x)),M=ly(v),O={rootMargin:-I+"px "+-k+"px "+-N+"px "+-M+"px",threshold:Oo(0,wl(1,p))||1};let U=!0;function H(V){const Q=V[0].intersectionRatio;if(Q!==p){if(!U)return d();Q?d(!1,Q):r=setTimeout(()=>{d(!1,1e-7)},1e3)}Q===1&&!mR(y,t.getBoundingClientRect())&&d(),U=!1}try{n=new IntersectionObserver(H,{...O,root:a.ownerDocument})}catch{n=new IntersectionObserver(H,O)}n.observe(t)}return d(!0),c}function C4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,y=lT(t),v=a||c?[...y?sg(y):[],...sg(e)]:[];v.forEach(M=>{a&&M.addEventListener("scroll",n,{passive:!0}),c&&M.addEventListener("resize",n)});const b=y&&m?v4(y,n):null;let E=-1,x=null;d&&(x=new ResizeObserver(M=>{let[j]=M;j&&j.target===y&&x&&(x.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var O;(O=x)==null||O.observe(e)})),n()}),y&&!p&&x.observe(y),x.observe(e));let I,k=p?Lu(t):null;p&&N();function N(){const M=Lu(t);k&&!mR(k,M)&&n(),k=M,I=requestAnimationFrame(N)}return n(),()=>{var M;v.forEach(j=>{a&&j.removeEventListener("scroll",n),c&&j.removeEventListener("resize",n)}),b?.(),(M=x)==null||M.disconnect(),x=null,p&&cancelAnimationFrame(I)}}const w4=GH,b4=qH,E4=zH,A4=VH,T4=FH,Zx=BH,S4=$H,x4=(t,e,n)=>{const r=new Map,a={platform:y4,...n},c={...a.platform,_c:r};return HH(t,e,{...a,platform:c})};var _4=typeof document<"u",k4=function(){},ky=_4?_.useLayoutEffect:k4;function lv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!lv(t[r],e[r]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=n;r--!==0;){const c=a[r];if(!(c==="_owner"&&t.$$typeof)&&!lv(t[c],e[c]))return!1}return!0}return t!==t&&e!==e}function gR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function e0(t,e){const n=gR(t);return Math.round(e*n)/n}function fb(t){const e=_.useRef(t);return ky(()=>{e.current=t}),e}function I4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:c,floating:d}={},transform:m=!0,whileElementsMounted:p,open:y}=t,[v,b]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[E,x]=_.useState(r);lv(E,r)||x(r);const[I,k]=_.useState(null),[N,M]=_.useState(null),j=_.useCallback($=>{$!==V.current&&(V.current=$,k($))},[]),O=_.useCallback($=>{$!==Q.current&&(Q.current=$,M($))},[]),U=c||I,H=d||N,V=_.useRef(null),Q=_.useRef(null),Y=_.useRef(v),ee=p!=null,se=fb(p),ce=fb(a),te=fb(y),re=_.useCallback(()=>{if(!V.current||!Q.current)return;const $={placement:e,strategy:n,middleware:E};ce.current&&($.platform=ce.current),x4(V.current,Q.current,$).then(X=>{const z={...X,isPositioned:te.current!==!1};G.current&&!lv(Y.current,z)&&(Y.current=z,Tg.flushSync(()=>{b(z)}))})},[E,e,n,ce,te]);ky(()=>{y===!1&&Y.current.isPositioned&&(Y.current.isPositioned=!1,b($=>({...$,isPositioned:!1})))},[y]);const G=_.useRef(!1);ky(()=>(G.current=!0,()=>{G.current=!1}),[]),ky(()=>{if(U&&(V.current=U),H&&(Q.current=H),U&&H){if(se.current)return se.current(U,H,re);re()}},[U,H,re,se,ee]);const J=_.useMemo(()=>({reference:V,floating:Q,setReference:j,setFloating:O}),[j,O]),D=_.useMemo(()=>({reference:U,floating:H}),[U,H]),F=_.useMemo(()=>{const $={position:n,left:0,top:0};if(!D.floating)return $;const X=e0(D.floating,v.x),z=e0(D.floating,v.y);return m?{...$,transform:"translate("+X+"px, "+z+"px)",...gR(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:z}},[n,m,D.floating,v.x,v.y]);return _.useMemo(()=>({...v,update:re,refs:J,elements:D,floatingStyles:F}),[v,re,J,D,F])}const R4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:a}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Zx({element:r.current,padding:a}).fn(n):{}:r?Zx({element:r,padding:a}).fn(n):{}}}},N4=(t,e)=>({...w4(t),options:[t,e]}),O4=(t,e)=>({...b4(t),options:[t,e]}),M4=(t,e)=>({...S4(t),options:[t,e]}),P4=(t,e)=>({...E4(t),options:[t,e]}),D4=(t,e)=>({...A4(t),options:[t,e]}),L4=(t,e)=>({...T4(t),options:[t,e]}),U4=(t,e)=>({...R4(t),options:[t,e]});var j4="Arrow",pR=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:a=5,...c}=t;return h.jsx(ct.svg,{...c,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});pR.displayName=j4;var H4=pR;function yR(t){const[e,n]=_.useState(void 0);return wr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const c=a[0];let d,m;if("borderBoxSize"in c){const p=c.borderBoxSize,y=Array.isArray(p)?p[0]:p;d=y.inlineSize,m=y.blockSize}else d=t.offsetWidth,m=t.offsetHeight;n({width:d,height:m})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var uT="Popper",[vR,iC]=Xa(uT),[B4,CR]=vR(uT),wR=t=>{const{__scopePopper:e,children:n}=t,[r,a]=_.useState(null);return h.jsx(B4,{scope:e,anchor:r,onAnchorChange:a,children:n})};wR.displayName=uT;var bR="PopperAnchor",ER=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...a}=t,c=CR(bR,n),d=_.useRef(null),m=Mt(e,d),p=_.useRef(null);return _.useEffect(()=>{const y=p.current;p.current=r?.current||d.current,y!==p.current&&c.onAnchorChange(p.current)}),r?null:h.jsx(ct.div,{...a,ref:m})});ER.displayName=bR;var dT="PopperContent",[z4,F4]=vR(dT),AR=_.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:c="center",alignOffset:d=0,arrowPadding:m=0,avoidCollisions:p=!0,collisionBoundary:y=[],collisionPadding:v=0,sticky:b="partial",hideWhenDetached:E=!1,updatePositionStrategy:x="optimized",onPlaced:I,...k}=t,N=CR(dT,n),[M,j]=_.useState(null),O=Mt(e,le=>j(le)),[U,H]=_.useState(null),V=yR(U),Q=V?.width??0,Y=V?.height??0,ee=r+(c!=="center"?"-"+c:""),se=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},ce=Array.isArray(y)?y:[y],te=ce.length>0,re={padding:se,boundary:ce.filter(G4),altBoundary:te},{refs:G,floatingStyles:J,placement:D,isPositioned:F,middlewareData:$}=I4({strategy:"fixed",placement:ee,whileElementsMounted:(...le)=>C4(...le,{animationFrame:x==="always"}),elements:{reference:N.anchor},middleware:[N4({mainAxis:a+Y,alignmentAxis:d}),p&&O4({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?M4():void 0,...re}),p&&P4({...re}),D4({...re,apply:({elements:le,rects:Ce,availableWidth:De,availableHeight:we})=>{const{width:be,height:Oe}=Ce.reference,Le=le.floating.style;Le.setProperty("--radix-popper-available-width",`${De}px`),Le.setProperty("--radix-popper-available-height",`${we}px`),Le.setProperty("--radix-popper-anchor-width",`${be}px`),Le.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),U&&U4({element:U,padding:m}),q4({arrowWidth:Q,arrowHeight:Y}),E&&L4({strategy:"referenceHidden",...re})]}),[X,z]=xR(D),W=Cr(I);wr(()=>{F&&W?.()},[F,W]);const ue=$.arrow?.x,de=$.arrow?.y,ge=$.arrow?.centerOffset!==0,[Ne,Ee]=_.useState();return wr(()=>{M&&Ee(window.getComputedStyle(M).zIndex)},[M]),h.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:F?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(z4,{scope:n,placedSide:X,onArrowChange:H,arrowX:ue,arrowY:de,shouldHideArrow:ge,children:h.jsx(ct.div,{"data-side":X,"data-align":z,...k,ref:O,style:{...k.style,animation:F?void 0:"none"}})})})});AR.displayName=dT;var TR="PopperArrow",K4={top:"bottom",right:"left",bottom:"top",left:"right"},SR=_.forwardRef(function(e,n){const{__scopePopper:r,...a}=e,c=F4(TR,r),d=K4[c.placedSide];return h.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:h.jsx(H4,{...a,ref:n,style:{...a.style,display:"block"}})})});SR.displayName=TR;function G4(t){return t!==null}var q4=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:a}=e,d=a.arrow?.centerOffset!==0,m=d?0:t.arrowWidth,p=d?0:t.arrowHeight,[y,v]=xR(n),b={start:"0%",center:"50%",end:"100%"}[v],E=(a.arrow?.x??0)+m/2,x=(a.arrow?.y??0)+p/2;let I="",k="";return y==="bottom"?(I=d?b:`${E}px`,k=`${-p}px`):y==="top"?(I=d?b:`${E}px`,k=`${r.floating.height+p}px`):y==="right"?(I=`${-p}px`,k=d?b:`${x}px`):y==="left"&&(I=`${r.floating.width+p}px`,k=d?b:`${x}px`),{data:{x:I,y:k}}}});function xR(t){const[e,n="center"]=t.split("-");return[e,n]}var _R=wR,kR=ER,IR=AR,RR=SR,$4="Portal",hT=_.forwardRef((t,e)=>{const{container:n,...r}=t,[a,c]=_.useState(!1);wr(()=>c(!0),[]);const d=n||a&&globalThis?.document?.body;return d?cH.createPortal(h.jsx(ct.div,{...r,ref:e}),d):null});hT.displayName=$4;function V4(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var ss=t=>{const{present:e,children:n}=t,r=Y4(e),a=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),c=Mt(r.ref,Q4(a));return typeof n=="function"||r.isPresent?_.cloneElement(a,{ref:c}):null};ss.displayName="Presence";function Y4(t){const[e,n]=_.useState(),r=_.useRef(null),a=_.useRef(t),c=_.useRef("none"),d=t?"mounted":"unmounted",[m,p]=V4(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const y=uy(r.current);c.current=m==="mounted"?y:"none"},[m]),wr(()=>{const y=r.current,v=a.current;if(v!==t){const E=c.current,x=uy(y);t?p("MOUNT"):x==="none"||y?.display==="none"?p("UNMOUNT"):p(v&&E!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,p]),wr(()=>{if(e){let y;const v=e.ownerDocument.defaultView??window,b=x=>{const k=uy(r.current).includes(CSS.escape(x.animationName));if(x.target===e&&k&&(p("ANIMATION_END"),!a.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",y=v.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},E=x=>{x.target===e&&(c.current=uy(r.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",b),e.addEventListener("animationend",b),()=>{v.clearTimeout(y),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",b),e.removeEventListener("animationend",b)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:_.useCallback(y=>{r.current=y?getComputedStyle(y):null,n(y)},[])}}function uy(t){return t?.animationName||"none"}function Q4(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var mb="rovingFocusGroup.onEntryFocus",W4={bubbles:!1,cancelable:!0},_g="RovingFocusGroup",[cE,NR,X4]=tT(_g),[J4,sC]=Xa(_g,[X4]),[Z4,eB]=J4(_g),OR=_.forwardRef((t,e)=>h.jsx(cE.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(cE.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(tB,{...t,ref:e})})}));OR.displayName=_g;var tB=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:p,onEntryFocus:y,preventScrollOnEntryFocus:v=!1,...b}=t,E=_.useRef(null),x=Mt(e,E),I=Sg(c),[k,N]=Dh({prop:d,defaultProp:m??null,onChange:p,caller:_g}),[M,j]=_.useState(!1),O=Cr(y),U=NR(n),H=_.useRef(!1),[V,Q]=_.useState(0);return _.useEffect(()=>{const Y=E.current;if(Y)return Y.addEventListener(mb,O),()=>Y.removeEventListener(mb,O)},[O]),h.jsx(Z4,{scope:n,orientation:r,dir:I,loop:a,currentTabStopId:k,onItemFocus:_.useCallback(Y=>N(Y),[N]),onItemShiftTab:_.useCallback(()=>j(!0),[]),onFocusableItemAdd:_.useCallback(()=>Q(Y=>Y+1),[]),onFocusableItemRemove:_.useCallback(()=>Q(Y=>Y-1),[]),children:h.jsx(ct.div,{tabIndex:M||V===0?-1:0,"data-orientation":r,...b,ref:x,style:{outline:"none",...t.style},onMouseDown:Qe(t.onMouseDown,()=>{H.current=!0}),onFocus:Qe(t.onFocus,Y=>{const ee=!H.current;if(Y.target===Y.currentTarget&&ee&&!M){const se=new CustomEvent(mb,W4);if(Y.currentTarget.dispatchEvent(se),!se.defaultPrevented){const ce=U().filter(D=>D.focusable),te=ce.find(D=>D.active),re=ce.find(D=>D.id===k),J=[te,re,...ce].filter(Boolean).map(D=>D.ref.current);DR(J,v)}}H.current=!1}),onBlur:Qe(t.onBlur,()=>j(!1))})})}),MR="RovingFocusGroupItem",PR=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:c,children:d,...m}=t,p=Du(),y=c||p,v=eB(MR,n),b=v.currentTabStopId===y,E=NR(n),{onFocusableItemAdd:x,onFocusableItemRemove:I,currentTabStopId:k}=v;return _.useEffect(()=>{if(r)return x(),()=>I()},[r,x,I]),h.jsx(cE.ItemSlot,{scope:n,id:y,focusable:r,active:a,children:h.jsx(ct.span,{tabIndex:b?0:-1,"data-orientation":v.orientation,...m,ref:e,onMouseDown:Qe(t.onMouseDown,N=>{r?v.onItemFocus(y):N.preventDefault()}),onFocus:Qe(t.onFocus,()=>v.onItemFocus(y)),onKeyDown:Qe(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){v.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const M=oB(N,v.orientation,v.dir);if(M!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let O=E().filter(U=>U.focusable).map(U=>U.ref.current);if(M==="last")O.reverse();else if(M==="prev"||M==="next"){M==="prev"&&O.reverse();const U=O.indexOf(N.currentTarget);O=v.loop?iB(O,U+1):O.slice(U+1)}setTimeout(()=>DR(O))}}),children:typeof d=="function"?d({isCurrentTabStop:b,hasTabStop:k!=null}):d})})});PR.displayName=MR;var nB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function oB(t,e,n){const r=rB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return nB[r]}function DR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function iB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var LR=OR,UR=PR,sB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ph=new WeakMap,dy=new WeakMap,hy={},gb=0,jR=function(t){return t&&(t.host||jR(t.parentNode))},aB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=jR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},cB=function(t,e,n,r){var a=aB(e,Array.isArray(t)?t:[t]);hy[n]||(hy[n]=new WeakMap);var c=hy[n],d=[],m=new Set,p=new Set(a),y=function(b){!b||m.has(b)||(m.add(b),y(b.parentNode))};a.forEach(y);var v=function(b){!b||p.has(b)||Array.prototype.forEach.call(b.children,function(E){if(m.has(E))v(E);else try{var x=E.getAttribute(r),I=x!==null&&x!=="false",k=(ph.get(E)||0)+1,N=(c.get(E)||0)+1;ph.set(E,k),c.set(E,N),d.push(E),k===1&&I&&dy.set(E,!0),N===1&&E.setAttribute(n,"true"),I||E.setAttribute(r,"true")}catch(M){console.error("aria-hidden: cannot operate on ",E,M)}})};return v(e),m.clear(),gb++,function(){d.forEach(function(b){var E=ph.get(b)-1,x=c.get(b)-1;ph.set(b,E),c.set(b,x),E||(dy.has(b)||b.removeAttribute(r),dy.delete(b)),x||b.removeAttribute(n)}),gb--,gb||(ph=new WeakMap,ph=new WeakMap,dy=new WeakMap,hy={})}},HR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),a=sB(t);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),cB(r,a,n,"aria-hidden")):function(){return null}},lE=function(t,e){return lE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},lE(t,e)};function BR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ui=function(){return ui=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},ui.apply(this,arguments)};function aC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function zR(t,e,n,r){var a=arguments.length,c=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var m=t.length-1;m>=0;m--)(d=t[m])&&(c=(a<3?d(c):a>3?d(e,n,c):d(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c}function FR(t,e){return function(n,r){e(n,r,t)}}function KR(t,e,n,r,a,c){function d(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var m=r.kind,p=m==="getter"?"get":m==="setter"?"set":"value",y=!e&&t?r.static?t:t.prototype:null,v=e||(y?Object.getOwnPropertyDescriptor(y,r.name):{}),b,E=!1,x=n.length-1;x>=0;x--){var I={};for(var k in r)I[k]=k==="access"?{}:r[k];for(var k in r.access)I.access[k]=r.access[k];I.addInitializer=function(M){if(E)throw new TypeError("Cannot add initializers after decoration has completed");c.push(d(M||null))};var N=(0,n[x])(m==="accessor"?{get:v.get,set:v.set}:v[p],I);if(m==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(b=d(N.get))&&(v.get=b),(b=d(N.set))&&(v.set=b),(b=d(N.init))&&a.unshift(b)}else(b=d(N))&&(m==="field"?a.unshift(b):v[p]=b)}y&&Object.defineProperty(y,r.name,v),E=!0}function GR(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0}function qR(t){return typeof t=="symbol"?t:"".concat(t)}function $R(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function VR(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ft(t,e,n,r){function a(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(v){try{y(r.next(v))}catch(b){d(b)}}function p(v){try{y(r.throw(v))}catch(b){d(b)}}function y(v){v.done?c(v.value):a(v.value).then(m,p)}y((r=r.apply(t,e||[])).next())})}function YR(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=m(0),d.throw=m(1),d.return=m(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(y){return function(v){return p([y,v])}}function p(y){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(r=1,a&&(c=y[0]&2?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(v){y=[6,v],a=0}finally{r=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var cC=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function QR(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&cC(e,t,n)}function uv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fT(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,c=[],d;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)c.push(a.value)}catch(m){d={error:m}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(d)throw d.error}}return c}function WR(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fT(arguments[e]));return t}function XR(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var c=arguments[e],d=0,m=c.length;d<m;d++,a++)r[a]=c[d];return r}function mT(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,c;r<a;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))}function Uh(t){return this instanceof Uh?(this.v=t,this):new Uh(t)}function JR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,c=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",d),a[Symbol.asyncIterator]=function(){return this},a;function d(x){return function(I){return Promise.resolve(I).then(x,b)}}function m(x,I){r[x]&&(a[x]=function(k){return new Promise(function(N,M){c.push([x,k,N,M])>1||p(x,k)})},I&&(a[x]=I(a[x])))}function p(x,I){try{y(r[x](I))}catch(k){E(c[0][3],k)}}function y(x){x.value instanceof Uh?Promise.resolve(x.value.v).then(v,b):E(c[0][2],x)}function v(x){p("next",x)}function b(x){p("throw",x)}function E(x,I){x(I),c.shift(),c.length&&p(c[0][0],c[0][1])}}function ZR(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,c){e[a]=t[a]?function(d){return(n=!n)?{value:Uh(t[a](d)),done:!1}:c?c(d):d}:c}}function eN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uv=="function"?uv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(c){n[c]=t[c]&&function(d){return new Promise(function(m,p){d=t[c](d),a(m,p,d.done,d.value)})}}function a(c,d,m,p){Promise.resolve(p).then(function(y){c({value:y,done:m})},d)}}function tN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var lB=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},uE=function(t){return uE=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},uE(t)};function nN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=uE(t),r=0;r<n.length;r++)n[r]!=="default"&&cC(e,t,n[r]);return lB(e,t),e}function rN(t){return t&&t.__esModule?t:{default:t}}function oN(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function iN(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function sN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function aN(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(c){return Promise.reject(c)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var uB=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function cN(t){function e(c){t.error=t.hasError?new uB(c,t.error,"An error was suppressed during disposal."):c,t.hasError=!0}var n,r=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var c=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(c).then(a,function(d){return e(d),a()})}else r|=1}catch(d){e(d)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function lN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,c,d){return r?e?".jsx":".js":a&&(!c||!d)?n:a+c+"."+d.toLowerCase()+"js"}):t}const dB={__extends:BR,__assign:ui,__rest:aC,__decorate:zR,__param:FR,__esDecorate:KR,__runInitializers:GR,__propKey:qR,__setFunctionName:$R,__metadata:VR,__awaiter:Ft,__generator:YR,__createBinding:cC,__exportStar:QR,__values:uv,__read:fT,__spread:WR,__spreadArrays:XR,__spreadArray:mT,__await:Uh,__asyncGenerator:JR,__asyncDelegator:ZR,__asyncValues:eN,__makeTemplateObject:tN,__importStar:nN,__importDefault:rN,__classPrivateFieldGet:oN,__classPrivateFieldSet:iN,__classPrivateFieldIn:sN,__addDisposableResource:aN,__disposeResources:cN,__rewriteRelativeImportExtension:lN},hB=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:aN,get __assign(){return ui},__asyncDelegator:ZR,__asyncGenerator:JR,__asyncValues:eN,__await:Uh,__awaiter:Ft,__classPrivateFieldGet:oN,__classPrivateFieldIn:sN,__classPrivateFieldSet:iN,__createBinding:cC,__decorate:zR,__disposeResources:cN,__esDecorate:KR,__exportStar:QR,__extends:BR,__generator:YR,__importDefault:rN,__importStar:nN,__makeTemplateObject:tN,__metadata:VR,__param:FR,__propKey:qR,__read:fT,__rest:aC,__rewriteRelativeImportExtension:lN,__runInitializers:GR,__setFunctionName:$R,__spread:WR,__spreadArray:mT,__spreadArrays:XR,__values:uv,default:dB},Symbol.toStringTag,{value:"Module"}));var Iy="right-scroll-bar-position",Ry="width-before-scroll-bar",fB="with-scroll-bars-hidden",mB="--removed-body-scroll-bar-size";function pb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function gB(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=e,n.facade}var pB=typeof window<"u"?_.useLayoutEffect:_.useEffect,t0=new WeakMap;function yB(t,e){var n=gB(null,function(r){return t.forEach(function(a){return pb(a,r)})});return pB(function(){var r=t0.get(n);if(r){var a=new Set(r),c=new Set(t),d=n.current;a.forEach(function(m){c.has(m)||pb(m,null)}),c.forEach(function(m){a.has(m)||pb(m,d)})}t0.set(n,t)},[t]),n}function vB(t){return t}function CB(t,e){e===void 0&&(e=vB);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var d=e(c,r);return n.push(d),function(){n=n.filter(function(m){return m!==d})}},assignSyncMedium:function(c){for(r=!0;n.length;){var d=n;n=[],d.forEach(c)}n={push:function(m){return c(m)},filter:function(){return n}}},assignMedium:function(c){r=!0;var d=[];if(n.length){var m=n;n=[],m.forEach(c),d=n}var p=function(){var v=d;d=[],v.forEach(c)},y=function(){return Promise.resolve().then(p)};y(),n={push:function(v){d.push(v),y()},filter:function(v){return d=d.filter(v),n}}}};return a}function wB(t){t===void 0&&(t={});var e=CB(null);return e.options=ui({async:!0,ssr:!1},t),e}var uN=function(t){var e=t.sideCar,n=aC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,ui({},n))};uN.isSideCarExport=!0;function bB(t,e){return t.useMedium(e),uN}var dN=wB(),yb=function(){},lC=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:yb,onWheelCapture:yb,onTouchMoveCapture:yb}),a=r[0],c=r[1],d=t.forwardProps,m=t.children,p=t.className,y=t.removeScrollBar,v=t.enabled,b=t.shards,E=t.sideCar,x=t.noRelative,I=t.noIsolation,k=t.inert,N=t.allowPinchZoom,M=t.as,j=M===void 0?"div":M,O=t.gapMode,U=aC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=E,V=yB([n,e]),Q=ui(ui({},U),a);return _.createElement(_.Fragment,null,v&&_.createElement(H,{sideCar:dN,removeScrollBar:y,shards:b,noRelative:x,noIsolation:I,inert:k,setCallbacks:c,allowPinchZoom:!!N,lockRef:n,gapMode:O}),d?_.cloneElement(_.Children.only(m),ui(ui({},Q),{ref:V})):_.createElement(j,ui({},Q,{className:p,ref:V}),m))});lC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};lC.classNames={fullWidth:Ry,zeroRight:Iy};var EB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=EB();return e&&t.setAttribute("nonce",e),t}function TB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function SB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=AB())&&(TB(e,n),SB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_B=function(){var t=xB();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},hN=function(){var t=_B(),e=function(n){var r=n.styles,a=n.dynamic;return t(r,a),null};return e},kB={left:0,top:0,right:0,gap:0},vb=function(t){return parseInt(t||"",10)||0},IB=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[vb(n),vb(r),vb(a)]},RB=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return kB;var e=IB(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},NB=hN(),kh="data-scroll-locked",OB=function(t,e,n,r){var a=t.left,c=t.top,d=t.right,m=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(fB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(m,"px ").concat(r,`;
  }
  body[`).concat(kh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(m,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(m,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Iy,` {
    right: `).concat(m,"px ").concat(r,`;
  }
  
  .`).concat(Ry,` {
    margin-right: `).concat(m,"px ").concat(r,`;
  }
  
  .`).concat(Iy," .").concat(Iy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ry," .").concat(Ry,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kh,`] {
    `).concat(mB,": ").concat(m,`px;
  }
`)},n0=function(){var t=parseInt(document.body.getAttribute(kh)||"0",10);return isFinite(t)?t:0},MB=function(){_.useEffect(function(){return document.body.setAttribute(kh,(n0()+1).toString()),function(){var t=n0()-1;t<=0?document.body.removeAttribute(kh):document.body.setAttribute(kh,t.toString())}},[])},PB=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,a=r===void 0?"margin":r;MB();var c=_.useMemo(function(){return RB(a)},[a]);return _.createElement(NB,{styles:OB(c,!e,a,n?"":"!important")})},dE=!1;if(typeof window<"u")try{var fy=Object.defineProperty({},"passive",{get:function(){return dE=!0,!0}});window.addEventListener("test",fy,fy),window.removeEventListener("test",fy,fy)}catch{dE=!1}var yh=dE?{passive:!1}:!1,DB=function(t){return t.tagName==="TEXTAREA"},fN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!DB(t)&&n[e]==="visible")},LB=function(t){return fN(t,"overflowY")},UB=function(t){return fN(t,"overflowX")},r0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=mN(t,r);if(a){var c=gN(t,r),d=c[1],m=c[2];if(d>m)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jB=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},HB=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},mN=function(t,e){return t==="v"?LB(e):UB(e)},gN=function(t,e){return t==="v"?jB(e):HB(e)},BB=function(t,e){return t==="h"&&e==="rtl"?-1:1},zB=function(t,e,n,r,a){var c=BB(t,window.getComputedStyle(e).direction),d=c*r,m=n.target,p=e.contains(m),y=!1,v=d>0,b=0,E=0;do{if(!m)break;var x=gN(t,m),I=x[0],k=x[1],N=x[2],M=k-N-c*I;(I||M)&&mN(t,m)&&(b+=M,E+=I);var j=m.parentNode;m=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!p&&m!==document.body||p&&(e.contains(m)||e===m));return(v&&Math.abs(b)<1||!v&&Math.abs(E)<1)&&(y=!0),y},my=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},o0=function(t){return[t.deltaX,t.deltaY]},i0=function(t){return t&&"current"in t?t.current:t},FB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},KB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GB=0,vh=[];function qB(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),a=_.useState(GB++)[0],c=_.useState(hN)[0],d=_.useRef(t);_.useEffect(function(){d.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var k=mT([t.lockRef.current],(t.shards||[]).map(i0),!0).filter(Boolean);return k.forEach(function(N){return N.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),k.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var m=_.useCallback(function(k,N){if("touches"in k&&k.touches.length===2||k.type==="wheel"&&k.ctrlKey)return!d.current.allowPinchZoom;var M=my(k),j=n.current,O="deltaX"in k?k.deltaX:j[0]-M[0],U="deltaY"in k?k.deltaY:j[1]-M[1],H,V=k.target,Q=Math.abs(O)>Math.abs(U)?"h":"v";if("touches"in k&&Q==="h"&&V.type==="range")return!1;var Y=r0(Q,V);if(!Y)return!0;if(Y?H=Q:(H=Q==="v"?"h":"v",Y=r0(Q,V)),!Y)return!1;if(!r.current&&"changedTouches"in k&&(O||U)&&(r.current=H),!H)return!0;var ee=r.current||H;return zB(ee,N,k,ee==="h"?O:U)},[]),p=_.useCallback(function(k){var N=k;if(!(!vh.length||vh[vh.length-1]!==c)){var M="deltaY"in N?o0(N):my(N),j=e.current.filter(function(H){return H.name===N.type&&(H.target===N.target||N.target===H.shadowParent)&&FB(H.delta,M)})[0];if(j&&j.should){N.cancelable&&N.preventDefault();return}if(!j){var O=(d.current.shards||[]).map(i0).filter(Boolean).filter(function(H){return H.contains(N.target)}),U=O.length>0?m(N,O[0]):!d.current.noIsolation;U&&N.cancelable&&N.preventDefault()}}},[]),y=_.useCallback(function(k,N,M,j){var O={name:k,delta:N,target:M,should:j,shadowParent:$B(M)};e.current.push(O),setTimeout(function(){e.current=e.current.filter(function(U){return U!==O})},1)},[]),v=_.useCallback(function(k){n.current=my(k),r.current=void 0},[]),b=_.useCallback(function(k){y(k.type,o0(k),k.target,m(k,t.lockRef.current))},[]),E=_.useCallback(function(k){y(k.type,my(k),k.target,m(k,t.lockRef.current))},[]);_.useEffect(function(){return vh.push(c),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:E}),document.addEventListener("wheel",p,yh),document.addEventListener("touchmove",p,yh),document.addEventListener("touchstart",v,yh),function(){vh=vh.filter(function(k){return k!==c}),document.removeEventListener("wheel",p,yh),document.removeEventListener("touchmove",p,yh),document.removeEventListener("touchstart",v,yh)}},[]);var x=t.removeScrollBar,I=t.inert;return _.createElement(_.Fragment,null,I?_.createElement(c,{styles:KB(a)}):null,x?_.createElement(PB,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function $B(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const VB=bB(dN,qB);var gT=_.forwardRef(function(t,e){return _.createElement(lC,ui({},t,{ref:e,sideCar:VB}))});gT.classNames=lC.classNames;var hE=["Enter"," "],YB=["ArrowDown","PageUp","Home"],pN=["ArrowUp","PageDown","End"],QB=[...YB,...pN],WB={ltr:[...hE,"ArrowRight"],rtl:[...hE,"ArrowLeft"]},XB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},kg="Menu",[ag,JB,ZB]=tT(kg),[Ju,yN]=Xa(kg,[ZB,iC,sC]),uC=iC(),vN=sC(),[e3,Zu]=Ju(kg),[t3,Ig]=Ju(kg),CN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:a,onOpenChange:c,modal:d=!0}=t,m=uC(e),[p,y]=_.useState(null),v=_.useRef(!1),b=Cr(c),E=Sg(a);return _.useEffect(()=>{const x=()=>{v.current=!0,document.addEventListener("pointerdown",I,{capture:!0,once:!0}),document.addEventListener("pointermove",I,{capture:!0,once:!0})},I=()=>v.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",I,{capture:!0}),document.removeEventListener("pointermove",I,{capture:!0})}},[]),h.jsx(_R,{...m,children:h.jsx(e3,{scope:e,open:n,onOpenChange:b,content:p,onContentChange:y,children:h.jsx(t3,{scope:e,onClose:_.useCallback(()=>b(!1),[b]),isUsingKeyboardRef:v,dir:E,modal:d,children:r})})})};CN.displayName=kg;var n3="MenuAnchor",pT=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,a=uC(n);return h.jsx(kR,{...a,...r,ref:e})});pT.displayName=n3;var yT="MenuPortal",[r3,wN]=Ju(yT,{forceMount:void 0}),bN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:a}=t,c=Zu(yT,e);return h.jsx(r3,{scope:e,forceMount:n,children:h.jsx(ss,{present:n||c.open,children:h.jsx(hT,{asChild:!0,container:a,children:r})})})};bN.displayName=yT;var hi="MenuContent",[o3,vT]=Ju(hi),EN=_.forwardRef((t,e)=>{const n=wN(hi,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,c=Zu(hi,t.__scopeMenu),d=Ig(hi,t.__scopeMenu);return h.jsx(ag.Provider,{scope:t.__scopeMenu,children:h.jsx(ss,{present:r||c.open,children:h.jsx(ag.Slot,{scope:t.__scopeMenu,children:d.modal?h.jsx(i3,{...a,ref:e}):h.jsx(s3,{...a,ref:e})})})})}),i3=_.forwardRef((t,e)=>{const n=Zu(hi,t.__scopeMenu),r=_.useRef(null),a=Mt(e,r);return _.useEffect(()=>{const c=r.current;if(c)return HR(c)},[]),h.jsx(CT,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Qe(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),s3=_.forwardRef((t,e)=>{const n=Zu(hi,t.__scopeMenu);return h.jsx(CT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),a3=Ph("MenuContent.ScrollLock"),CT=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:m,onEntryFocus:p,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:b,onInteractOutside:E,onDismiss:x,disableOutsideScroll:I,...k}=t,N=Zu(hi,n),M=Ig(hi,n),j=uC(n),O=vN(n),U=JB(n),[H,V]=_.useState(null),Q=_.useRef(null),Y=Mt(e,Q,N.onContentChange),ee=_.useRef(0),se=_.useRef(""),ce=_.useRef(0),te=_.useRef(null),re=_.useRef("right"),G=_.useRef(0),J=I?gT:_.Fragment,D=I?{as:a3,allowPinchZoom:!0}:void 0,F=X=>{const z=se.current+X,W=U().filter(le=>!le.disabled),ue=document.activeElement,de=W.find(le=>le.ref.current===ue)?.textValue,ge=W.map(le=>le.textValue),Ne=C3(ge,z,de),Ee=W.find(le=>le.textValue===Ne)?.ref.current;(function le(Ce){se.current=Ce,window.clearTimeout(ee.current),Ce!==""&&(ee.current=window.setTimeout(()=>le(""),1e3))})(z),Ee&&setTimeout(()=>Ee.focus())};_.useEffect(()=>()=>window.clearTimeout(ee.current),[]),rR();const $=_.useCallback(X=>re.current===te.current?.side&&b3(X,te.current?.area),[]);return h.jsx(o3,{scope:n,searchRef:se,onItemEnter:_.useCallback(X=>{$(X)&&X.preventDefault()},[$]),onItemLeave:_.useCallback(X=>{$(X)||(Q.current?.focus(),V(null))},[$]),onTriggerLeave:_.useCallback(X=>{$(X)&&X.preventDefault()},[$]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:_.useCallback(X=>{te.current=X},[]),children:h.jsx(J,{...D,children:h.jsx(rT,{asChild:!0,trapped:a,onMountAutoFocus:Qe(c,X=>{X.preventDefault(),Q.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:h.jsx(nT,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:b,onInteractOutside:E,onDismiss:x,children:h.jsx(LR,{asChild:!0,...O,dir:M.dir,orientation:"vertical",loop:r,currentTabStopId:H,onCurrentTabStopIdChange:V,onEntryFocus:Qe(p,X=>{M.isUsingKeyboardRef.current||X.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(IR,{role:"menu","aria-orientation":"vertical","data-state":jN(N.open),"data-radix-menu-content":"",dir:M.dir,...j,...k,ref:Y,style:{outline:"none",...k.style},onKeyDown:Qe(k.onKeyDown,X=>{const W=X.target.closest("[data-radix-menu-content]")===X.currentTarget,ue=X.ctrlKey||X.altKey||X.metaKey,de=X.key.length===1;W&&(X.key==="Tab"&&X.preventDefault(),!ue&&de&&F(X.key));const ge=Q.current;if(X.target!==ge||!QB.includes(X.key))return;X.preventDefault();const Ee=U().filter(le=>!le.disabled).map(le=>le.ref.current);pN.includes(X.key)&&Ee.reverse(),y3(Ee)}),onBlur:Qe(t.onBlur,X=>{X.currentTarget.contains(X.target)||(window.clearTimeout(ee.current),se.current="")}),onPointerMove:Qe(t.onPointerMove,cg(X=>{const z=X.target,W=G.current!==X.clientX;if(X.currentTarget.contains(z)&&W){const ue=X.clientX>G.current?"right":"left";re.current=ue,G.current=X.clientX}}))})})})})})})});EN.displayName=hi;var c3="MenuGroup",wT=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ct.div,{role:"group",...r,ref:e})});wT.displayName=c3;var l3="MenuLabel",AN=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ct.div,{...r,ref:e})});AN.displayName=l3;var dv="MenuItem",s0="menu.itemSelect",dC=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...a}=t,c=_.useRef(null),d=Ig(dv,t.__scopeMenu),m=vT(dv,t.__scopeMenu),p=Mt(e,c),y=_.useRef(!1),v=()=>{const b=c.current;if(!n&&b){const E=new CustomEvent(s0,{bubbles:!0,cancelable:!0});b.addEventListener(s0,x=>r?.(x),{once:!0}),eR(b,E),E.defaultPrevented?y.current=!1:d.onClose()}};return h.jsx(TN,{...a,ref:p,disabled:n,onClick:Qe(t.onClick,v),onPointerDown:b=>{t.onPointerDown?.(b),y.current=!0},onPointerUp:Qe(t.onPointerUp,b=>{y.current||b.currentTarget?.click()}),onKeyDown:Qe(t.onKeyDown,b=>{const E=m.searchRef.current!=="";n||E&&b.key===" "||hE.includes(b.key)&&(b.currentTarget.click(),b.preventDefault())})})});dC.displayName=dv;var TN=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...c}=t,d=vT(dv,n),m=vN(n),p=_.useRef(null),y=Mt(e,p),[v,b]=_.useState(!1),[E,x]=_.useState("");return _.useEffect(()=>{const I=p.current;I&&x((I.textContent??"").trim())},[c.children]),h.jsx(ag.ItemSlot,{scope:n,disabled:r,textValue:a??E,children:h.jsx(UR,{asChild:!0,...m,focusable:!r,children:h.jsx(ct.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:y,onPointerMove:Qe(t.onPointerMove,cg(I=>{r?d.onItemLeave(I):(d.onItemEnter(I),I.defaultPrevented||I.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Qe(t.onPointerLeave,cg(I=>d.onItemLeave(I))),onFocus:Qe(t.onFocus,()=>b(!0)),onBlur:Qe(t.onBlur,()=>b(!1))})})})}),u3="MenuCheckboxItem",SN=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...a}=t;return h.jsx(RN,{scope:t.__scopeMenu,checked:n,children:h.jsx(dC,{role:"menuitemcheckbox","aria-checked":hv(n)?"mixed":n,...a,ref:e,"data-state":ET(n),onSelect:Qe(a.onSelect,()=>r?.(hv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});SN.displayName=u3;var xN="MenuRadioGroup",[d3,h3]=Ju(xN,{value:void 0,onValueChange:()=>{}}),_N=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...a}=t,c=Cr(r);return h.jsx(d3,{scope:t.__scopeMenu,value:n,onValueChange:c,children:h.jsx(wT,{...a,ref:e})})});_N.displayName=xN;var kN="MenuRadioItem",IN=_.forwardRef((t,e)=>{const{value:n,...r}=t,a=h3(kN,t.__scopeMenu),c=n===a.value;return h.jsx(RN,{scope:t.__scopeMenu,checked:c,children:h.jsx(dC,{role:"menuitemradio","aria-checked":c,...r,ref:e,"data-state":ET(c),onSelect:Qe(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});IN.displayName=kN;var bT="MenuItemIndicator",[RN,f3]=Ju(bT,{checked:!1}),NN=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...a}=t,c=f3(bT,n);return h.jsx(ss,{present:r||hv(c.checked)||c.checked===!0,children:h.jsx(ct.span,{...a,ref:e,"data-state":ET(c.checked)})})});NN.displayName=bT;var m3="MenuSeparator",ON=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ct.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});ON.displayName=m3;var g3="MenuArrow",MN=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,a=uC(n);return h.jsx(RR,{...a,...r,ref:e})});MN.displayName=g3;var p3="MenuSub",[oY,PN]=Ju(p3),Um="MenuSubTrigger",DN=_.forwardRef((t,e)=>{const n=Zu(Um,t.__scopeMenu),r=Ig(Um,t.__scopeMenu),a=PN(Um,t.__scopeMenu),c=vT(Um,t.__scopeMenu),d=_.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:p}=c,y={__scopeMenu:t.__scopeMenu},v=_.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return _.useEffect(()=>v,[v]),_.useEffect(()=>{const b=m.current;return()=>{window.clearTimeout(b),p(null)}},[m,p]),h.jsx(pT,{asChild:!0,...y,children:h.jsx(TN,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":jN(n.open),...t,ref:eC(e,a.onTriggerChange),onClick:b=>{t.onClick?.(b),!(t.disabled||b.defaultPrevented)&&(b.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Qe(t.onPointerMove,cg(b=>{c.onItemEnter(b),!b.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),v()},100))})),onPointerLeave:Qe(t.onPointerLeave,cg(b=>{v();const E=n.content?.getBoundingClientRect();if(E){const x=n.content?.dataset.side,I=x==="right",k=I?-5:5,N=E[I?"left":"right"],M=E[I?"right":"left"];c.onPointerGraceIntentChange({area:[{x:b.clientX+k,y:b.clientY},{x:N,y:E.top},{x:M,y:E.top},{x:M,y:E.bottom},{x:N,y:E.bottom}],side:x}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(b),b.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Qe(t.onKeyDown,b=>{const E=c.searchRef.current!=="";t.disabled||E&&b.key===" "||WB[r.dir].includes(b.key)&&(n.onOpenChange(!0),n.content?.focus(),b.preventDefault())})})})});DN.displayName=Um;var LN="MenuSubContent",UN=_.forwardRef((t,e)=>{const n=wN(hi,t.__scopeMenu),{forceMount:r=n.forceMount,...a}=t,c=Zu(hi,t.__scopeMenu),d=Ig(hi,t.__scopeMenu),m=PN(LN,t.__scopeMenu),p=_.useRef(null),y=Mt(e,p);return h.jsx(ag.Provider,{scope:t.__scopeMenu,children:h.jsx(ss,{present:r||c.open,children:h.jsx(ag.Slot,{scope:t.__scopeMenu,children:h.jsx(CT,{id:m.contentId,"aria-labelledby":m.triggerId,...a,ref:y,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{d.isUsingKeyboardRef.current&&p.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Qe(t.onFocusOutside,v=>{v.target!==m.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:Qe(t.onEscapeKeyDown,v=>{d.onClose(),v.preventDefault()}),onKeyDown:Qe(t.onKeyDown,v=>{const b=v.currentTarget.contains(v.target),E=XB[d.dir].includes(v.key);b&&E&&(c.onOpenChange(!1),m.trigger?.focus(),v.preventDefault())})})})})})});UN.displayName=LN;function jN(t){return t?"open":"closed"}function hv(t){return t==="indeterminate"}function ET(t){return hv(t)?"indeterminate":t?"checked":"unchecked"}function y3(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function v3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function C3(t,e,n){const a=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=v3(t,Math.max(c,0));a.length===1&&(d=d.filter(y=>y!==n));const p=d.find(y=>y.toLowerCase().startsWith(a.toLowerCase()));return p!==n?p:void 0}function w3(t,e){const{x:n,y:r}=t;let a=!1;for(let c=0,d=e.length-1;c<e.length;d=c++){const m=e[c],p=e[d],y=m.x,v=m.y,b=p.x,E=p.y;v>r!=E>r&&n<(b-y)*(r-v)/(E-v)+y&&(a=!a)}return a}function b3(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return w3(n,e)}function cg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var E3=CN,A3=pT,T3=bN,S3=EN,x3=wT,_3=AN,k3=dC,I3=SN,R3=_N,N3=IN,O3=NN,M3=ON,P3=MN,D3=DN,L3=UN,hC="DropdownMenu",[U3,iY]=Xa(hC,[yN]),Zr=yN(),[j3,HN]=U3(hC),BN=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:a,defaultOpen:c,onOpenChange:d,modal:m=!0}=t,p=Zr(e),y=_.useRef(null),[v,b]=Dh({prop:a,defaultProp:c??!1,onChange:d,caller:hC});return h.jsx(j3,{scope:e,triggerId:Du(),triggerRef:y,contentId:Du(),open:v,onOpenChange:b,onOpenToggle:_.useCallback(()=>b(E=>!E),[b]),modal:m,children:h.jsx(E3,{...p,open:v,onOpenChange:b,dir:r,modal:m,children:n})})};BN.displayName=hC;var zN="DropdownMenuTrigger",FN=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=t,c=HN(zN,n),d=Zr(n);return h.jsx(A3,{asChild:!0,...d,children:h.jsx(ct.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:eC(e,c.triggerRef),onPointerDown:Qe(t.onPointerDown,m=>{!r&&m.button===0&&m.ctrlKey===!1&&(c.onOpenToggle(),c.open||m.preventDefault())}),onKeyDown:Qe(t.onKeyDown,m=>{r||(["Enter"," "].includes(m.key)&&c.onOpenToggle(),m.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});FN.displayName=zN;var H3="DropdownMenuPortal",KN=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Zr(e);return h.jsx(T3,{...r,...n})};KN.displayName=H3;var GN="DropdownMenuContent",qN=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=HN(GN,n),c=Zr(n),d=_.useRef(!1);return h.jsx(S3,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...r,ref:e,onCloseAutoFocus:Qe(t.onCloseAutoFocus,m=>{d.current||a.triggerRef.current?.focus(),d.current=!1,m.preventDefault()}),onInteractOutside:Qe(t.onInteractOutside,m=>{const p=m.detail.originalEvent,y=p.button===0&&p.ctrlKey===!0,v=p.button===2||y;(!a.modal||v)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qN.displayName=GN;var B3="DropdownMenuGroup",z3=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(x3,{...a,...r,ref:e})});z3.displayName=B3;var F3="DropdownMenuLabel",$N=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(_3,{...a,...r,ref:e})});$N.displayName=F3;var K3="DropdownMenuItem",VN=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(k3,{...a,...r,ref:e})});VN.displayName=K3;var G3="DropdownMenuCheckboxItem",q3=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(I3,{...a,...r,ref:e})});q3.displayName=G3;var $3="DropdownMenuRadioGroup",V3=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(R3,{...a,...r,ref:e})});V3.displayName=$3;var Y3="DropdownMenuRadioItem",Q3=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(N3,{...a,...r,ref:e})});Q3.displayName=Y3;var W3="DropdownMenuItemIndicator",X3=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(O3,{...a,...r,ref:e})});X3.displayName=W3;var J3="DropdownMenuSeparator",YN=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(M3,{...a,...r,ref:e})});YN.displayName=J3;var Z3="DropdownMenuArrow",ez=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(P3,{...a,...r,ref:e})});ez.displayName=Z3;var tz="DropdownMenuSubTrigger",nz=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(D3,{...a,...r,ref:e})});nz.displayName=tz;var rz="DropdownMenuSubContent",oz=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,a=Zr(n);return h.jsx(L3,{...a,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oz.displayName=rz;var iz=BN,sz=FN,az=KN,cz=qN,lz=$N,uz=VN,dz=YN;/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),a0=t=>{const e=fz(t);return e.charAt(0).toUpperCase()+e.slice(1)},QN=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),mz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:c,iconNode:d,...m},p)=>_.createElement("svg",{ref:p,...gz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:QN("lucide",a),...!c&&!mz(m)&&{"aria-hidden":"true"},...m},[...d.map(([y,v])=>_.createElement(y,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const n=_.forwardRef(({className:r,...a},c)=>_.createElement(pz,{ref:c,iconNode:e,className:QN(`lucide-${hz(a0(t))}`,`lucide-${t}`,r),...a}));return n.displayName=a0(t),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],AT=We("activity",yz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Cz=We("arrow-down",vz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bz=We("arrow-left",wz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],$s=We("bot",Ez);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],TT=We("check",Az);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Qs=We("chevron-down",Tz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],WN=We("chevron-right",Sz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fv=We("chevron-up",xz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],kz=We("chevrons-down",_z);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uu=We("circle-alert",Iz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mv=We("circle-check-big",Rz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ym=We("circle-check",Nz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mz=We("circle-play",Oz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fC=We("circle-x",Pz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],XN=We("code",Dz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],lg=We("database",Lz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],c0=We("download",Uz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Hz=We("ellipsis-vertical",jz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],zz=We("external-link",Bz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ju=We("file-text",Fz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ST=We("folder-open",Kz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],xT=We("globe",Gz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],$z=We("grid-3x3",qz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Yz=We("house",Vz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Wz=We("image",Qz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gv=We("info",Xz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Zz=We("key",Jz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mC=We("loader-circle",eF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nF=We("log-out",tF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],oF=We("map",rF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],l0=We("maximize-2",iF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],aF=We("maximize",sF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],JN=We("message-square",cF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],uF=We("moon",lF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],ZN=We("music",dF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fE=We("package",hF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],mF=We("panel-right-close",fF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],pF=We("panel-right-open",gF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],vF=We("paperclip",yF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],wF=We("play",CF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],pv=We("plus",bF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_T=We("rotate-ccw",EF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ug=We("search",AF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],SF=We("send-horizontal",TF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Cb=We("send",xF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M7 2h13a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-5",key:"bt2siv"}],["path",{d:"M10 10 2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 0 0 2 2h6z",key:"1hjrv1"}],["path",{d:"M22 17v-1a2 2 0 0 0-2-2h-1",key:"1iynyr"}],["path",{d:"M4 14a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16.5l1-.5.5.5-8-8H4z",key:"161ggg"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],kF=We("server-off",_F);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mE=We("settings",IF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],NF=We("shield-check",RF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],MF=We("shuffle",OF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],DF=We("sun",PF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],eO=We("trash-2",LF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jF=We("triangle-alert",UF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BF=We("upload",HF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kT=We("user",zF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Hu=We("workflow",FF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],gC=We("wrench",KF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jh=We("x",GF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tO=We("zap",qF);function pC({...t}){return h.jsx(iz,{"data-slot":"dropdown-menu",...t})}function yC({...t}){return h.jsx(sz,{"data-slot":"dropdown-menu-trigger",...t})}function vC({className:t,sideOffset:e=4,...n}){return h.jsx(az,{children:h.jsx(cz,{"data-slot":"dropdown-menu-content",sideOffset:e,className:At("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Ur({className:t,inset:e,variant:n="default",...r}){return h.jsx(uz,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:At("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function gE({className:t,inset:e,...n}){return h.jsx(lz,{"data-slot":"dropdown-menu-label","data-inset":e,className:At("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function Hh({className:t,...e}){return h.jsx(dz,{"data-slot":"dropdown-menu-separator",className:At("bg-border -mx-1 my-1 h-px",t),...e})}const $F=KI("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Jr({className:t,variant:e,...n}){return h.jsx("div",{className:At($F({variant:e}),t),...n})}function CC({size:t="md",className:e}){return h.jsx(mC,{className:At("animate-spin",{"h-4 w-4":t==="sm","h-6 w-6":t==="md","h-8 w-8":t==="lg"},e)})}const VF=t=>t==="workflow"?Hu:$s,u0=t=>{switch(t){case"directory":return ST;case"in_memory":return lg;case"remote_gallery":return xT;default:return lg}},d0=t=>{switch(t){case"directory":return"Local";case"in_memory":return"Memory";case"remote_gallery":return"Gallery";default:return"Unknown"}};function YF({agents:t,workflows:e,selectedItem:n,onSelect:r,onRemove:a,onBrowseGallery:c,isLoading:d=!1}){const[m,p]=_.useState(!1),y=[...t,...e].sort((k,N)=>k.name?.localeCompare(N.name||k.id)||k.id.localeCompare(N.id)),v=k=>{r(k),p(!1)},b=n?VF(n.type):$s,E=n?.name||n?.id||"Select Agent or Workflow",x=n?.type==="workflow"?n.executors?.length||0:n?.tools?.length||0,I=n?.type==="workflow"?"executors":"tools";return h.jsxs(pC,{open:m,onOpenChange:p,children:[h.jsx(yC,{asChild:!0,children:h.jsx(wt,{variant:"outline",className:"w-64 justify-between font-mono text-sm",disabled:d,children:d?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(CC,{size:"sm"}),h.jsx("span",{className:"text-muted-foreground",children:"Loading..."})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(b,{className:"h-4 w-4 flex-shrink-0"}),h.jsx("span",{className:"truncate",children:E}),n&&h.jsxs(Jr,{variant:"secondary",className:"ml-auto flex-shrink-0",children:[x," ",I]})]}),h.jsx(Qs,{className:"h-4 w-4 opacity-50"})]})})}),h.jsxs(vC,{className:"w-80 font-mono",children:[t.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs(gE,{className:"flex items-center gap-2",children:[h.jsx($s,{className:"h-4 w-4"}),"Agents (",t.length,")"]}),t.map(k=>{const N=u0(k.source);return h.jsx(Ur,{className:"cursor-pointer group",children:h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",onClick:()=>v(k),children:[h.jsx($s,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"truncate font-medium",children:k.name||k.id}),k.description&&h.jsx("div",{className:"text-xs text-muted-foreground truncate",children:k.description})]})]}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h.jsx(N,{className:"h-3 w-3 opacity-60"}),h.jsx(Jr,{variant:"outline",className:"text-xs",children:d0(k.source)}),h.jsx(Jr,{variant:"outline",className:"text-xs ml-1",children:k.tools.length}),k.source==="remote_gallery"&&a&&h.jsx(wt,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 ml-1",onClick:M=>{M.stopPropagation(),a(k.id)},children:h.jsx(jh,{className:"h-3 w-3 text-destructive"})})]})]})},k.id)})]}),e.length>0&&h.jsxs(h.Fragment,{children:[t.length>0&&h.jsx(Hh,{}),h.jsxs(gE,{className:"flex items-center gap-2",children:[h.jsx(Hu,{className:"h-4 w-4"}),"Workflows (",e.length,")"]}),e.map(k=>{const N=u0(k.source);return h.jsx(Ur,{className:"cursor-pointer group",children:h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",onClick:()=>v(k),children:[h.jsx(Hu,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"truncate font-medium",children:k.name||k.id}),k.description&&h.jsx("div",{className:"text-xs text-muted-foreground truncate",children:k.description})]})]}),h.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[h.jsx(N,{className:"h-3 w-3 opacity-60"}),h.jsx(Jr,{variant:"outline",className:"text-xs",children:d0(k.source)}),h.jsx(Jr,{variant:"outline",className:"text-xs ml-1",children:k.executors.length}),k.source==="remote_gallery"&&a&&h.jsx(wt,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 ml-1",onClick:M=>{M.stopPropagation(),a(k.id)},children:h.jsx(jh,{className:"h-3 w-3 text-destructive"})})]})]})},k.id)})]}),y.length===0&&h.jsx(Ur,{disabled:!0,children:h.jsx("div",{className:"text-center text-muted-foreground py-2",children:d?"Loading agents and workflows...":"No agents or workflows found"})}),h.jsx(Hh,{}),h.jsxs(Ur,{className:"cursor-pointer text-primary",onClick:()=>{c?.(),p(!1)},children:[h.jsx(pv,{className:"h-4 w-4 mr-2"}),"Browse Gallery"]})]})]})}var QF=(t,e,n,r,a,c,d,m)=>{let p=document.documentElement,y=["light","dark"];function v(x){(Array.isArray(t)?t:[t]).forEach(I=>{let k=I==="class",N=k&&c?a.map(M=>c[M]||M):a;k?(p.classList.remove(...N),p.classList.add(c&&c[x]?c[x]:x)):p.setAttribute(I,x)}),b(x)}function b(x){m&&y.includes(x)&&(p.style.colorScheme=x)}function E(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)v(r);else try{let x=localStorage.getItem(e)||n,I=d&&x==="system"?E():x;v(I)}catch{}},h0=["light","dark"],nO="(prefers-color-scheme: dark)",WF=typeof window>"u",IT=_.createContext(void 0),XF={setTheme:t=>{},themes:[]},JF=()=>{var t;return(t=_.useContext(IT))!=null?t:XF},ZF=t=>_.useContext(IT)?_.createElement(_.Fragment,null,t.children):_.createElement(t5,{...t}),e5=["light","dark"],t5=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:a="theme",themes:c=e5,defaultTheme:d=n?"system":"light",attribute:m="data-theme",value:p,children:y,nonce:v,scriptProps:b})=>{let[E,x]=_.useState(()=>r5(a,d)),[I,k]=_.useState(()=>E==="system"?wb():E),N=p?Object.values(p):c,M=_.useCallback(H=>{let V=H;if(!V)return;H==="system"&&n&&(V=wb());let Q=p?p[V]:V,Y=e?o5(v):null,ee=document.documentElement,se=ce=>{ce==="class"?(ee.classList.remove(...N),Q&&ee.classList.add(Q)):ce.startsWith("data-")&&(Q?ee.setAttribute(ce,Q):ee.removeAttribute(ce))};if(Array.isArray(m)?m.forEach(se):se(m),r){let ce=h0.includes(d)?d:null,te=h0.includes(V)?V:ce;ee.style.colorScheme=te}Y?.()},[v]),j=_.useCallback(H=>{let V=typeof H=="function"?H(E):H;x(V);try{localStorage.setItem(a,V)}catch{}},[E]),O=_.useCallback(H=>{let V=wb(H);k(V),E==="system"&&n&&!t&&M("system")},[E,t]);_.useEffect(()=>{let H=window.matchMedia(nO);return H.addListener(O),O(H),()=>H.removeListener(O)},[O]),_.useEffect(()=>{let H=V=>{V.key===a&&(V.newValue?x(V.newValue):j(d))};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[j]),_.useEffect(()=>{M(t??E)},[t,E]);let U=_.useMemo(()=>({theme:E,setTheme:j,forcedTheme:t,resolvedTheme:E==="system"?I:E,themes:n?[...c,"system"]:c,systemTheme:n?I:void 0}),[E,j,t,I,n,c]);return _.createElement(IT.Provider,{value:U},_.createElement(n5,{forcedTheme:t,storageKey:a,attribute:m,enableSystem:n,enableColorScheme:r,defaultTheme:d,value:p,themes:c,nonce:v,scriptProps:b}),y)},n5=_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:c,value:d,themes:m,nonce:p,scriptProps:y})=>{let v=JSON.stringify([n,e,c,t,m,d,r,a]).slice(1,-1);return _.createElement("script",{...y,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${QF.toString()})(${v})`}})}),r5=(t,e)=>{if(WF)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},o5=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},wb=t=>(t||(t=window.matchMedia(nO)),t.matches?"dark":"light");function i5(){const{setTheme:t}=JF();return h.jsxs(pC,{children:[h.jsx(yC,{asChild:!0,children:h.jsxs(wt,{variant:"ghost",size:"sm",children:[h.jsx(DF,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),h.jsx(uF,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),h.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),h.jsxs(vC,{align:"end",children:[h.jsx(Ur,{onClick:()=>t("light"),children:"Light"}),h.jsx(Ur,{onClick:()=>t("dark"),children:"Dark"}),h.jsx(Ur,{onClick:()=>t("system"),children:"System"})]})]})}var Ro;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(Ro||(Ro={}));const s5="v1.0",a5="https://graph.microsoft.com/",c5=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);let yv=class pE extends Error{static setGraphClientError(e){let n;return e instanceof Error?n=e:(n=new pE,n.customError=e),n}constructor(e){super(e),Object.setPrototypeOf(this,pE.prototype)}};const l5=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],u5=t=>{const e=c=>c.replace(/\/+$/,""),n=c=>c.replace(/^\/+/,""),r=(c,d)=>[e(c),n(d)].join("/");return Array.prototype.slice.call(t).reduce(r)},bb=t=>{const e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t},rO=t=>iO(t),oO=(t,e)=>(e.forEach(n=>d5(n)),iO(t,e)),iO=(t,e=c5)=>{if(t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");const n=t.indexOf(":"),r=t.indexOf("/");let a="";if(r!==-1)return n!==-1&&n<r?(a=t.substring(0,n),e.has(a)):(a=t.substring(0,r),e.has(a))}return!1},d5=t=>{if(t.indexOf("/")!==-1)throw new yv("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class Bu{constructor(e=[]){this.middlewareOptions=new Map;for(const n of e){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,n){this.middlewareOptions.set(e,n)}}const h5=()=>{let t="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t},sO=(t,e,n)=>{let r=null;if(typeof Request<"u"&&t instanceof Request)r=t.headers.get(n);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(n);else if(e.headers instanceof Array){const a=e.headers;for(let c=0,d=a.length;c<d;c++)if(a[c][0]===n){r=a[c][1];break}}else e.headers[n]!==void 0&&(r=e.headers[n]);return r},aO=(t,e,n,r)=>{if(typeof Request<"u"&&t instanceof Request)t.headers.set(n,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(n,r);else if(e.headers instanceof Array){let a=0;const c=e.headers.length;for(;a<c;a++){const d=e.headers[a];if(d[0]===n){d[1]=r;break}}a===c&&e.headers.push([n,r])}else Object.assign(e.headers,{[n]:r})},cO=(t,e,n,r)=>{typeof Request<"u"&&t instanceof Request?t.headers.append(n,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[n]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(n,r):e.headers instanceof Array?e.headers.push([n,r]):e.headers===void 0?e.headers={[n]:r}:e.headers[n]===void 0?e.headers[n]=r:e.headers[n]+=`, ${r}`)},f5=(t,e)=>Ft(void 0,void 0,void 0,function*(){const n=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:a,referrer:c,referrerPolicy:d,mode:m,credentials:p,cache:y,redirect:v,integrity:b,keepalive:E,signal:x}=e;return new Request(t,{method:r,headers:a,body:n,referrer:c,referrerPolicy:d,mode:m,credentials:p,cache:y,redirect:v,integrity:b,keepalive:E,signal:x})});class m5{constructor(e,n){this.authenticationProvider=e,this.authenticationProviderOptions=n}}var Bh;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(Bh||(Bh={}));class pl{constructor(){this.featureUsage=Bh.NONE}static updateFeatureUsageFlag(e,n){let r;e.middlewareControl instanceof Bu?r=e.middlewareControl.getMiddlewareOptions(pl):e.middlewareControl=new Bu,typeof r>"u"&&(r=new pl,e.middlewareControl.setMiddlewareOptions(pl,r)),r.setFeatureUsage(n)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class dg{constructor(e){this.authenticationProvider=e}execute(e){return Ft(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(rO(n)||e.customHosts&&oO(n,e.customHosts)){let r;e.middlewareControl instanceof Bu&&(r=e.middlewareControl.getMiddlewareOptions(m5));let a,c;r&&(a=r.authenticationProvider,c=r.authenticationProviderOptions),a||(a=this.authenticationProvider);const m=`Bearer ${yield a.getAccessToken(c)}`;cO(e.request,e.options,dg.AUTHORIZATION_HEADER,m),pl.updateFeatureUsageFlag(e,Bh.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[dg.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}dg.AUTHORIZATION_HEADER="Authorization";class g5{execute(e){return Ft(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class Sn{constructor(e=Sn.DEFAULT_DELAY,n=Sn.DEFAULT_MAX_RETRIES,r=Sn.defaultShouldRetry){if(e>Sn.MAX_DELAY&&n>Sn.MAX_MAX_RETRIES){const a=new Error(`Delay and MaxRetries should not be more than ${Sn.MAX_DELAY} and ${Sn.MAX_MAX_RETRIES}`);throw a.name="MaxLimitExceeded",a}else if(e>Sn.MAX_DELAY){const a=new Error(`Delay should not be more than ${Sn.MAX_DELAY}`);throw a.name="MaxLimitExceeded",a}else if(n>Sn.MAX_MAX_RETRIES){const a=new Error(`MaxRetries should not be more than ${Sn.MAX_MAX_RETRIES}`);throw a.name="MaxLimitExceeded",a}else if(e<0&&n<0){const a=new Error("Delay and MaxRetries should not be negative");throw a.name="MinExpectationNotMet",a}else if(e<0){const a=new Error("Delay should not be negative");throw a.name="MinExpectationNotMet",a}else if(n<0){const a=new Error("MaxRetries should not be negative");throw a.name="MinExpectationNotMet",a}this.delay=Math.min(e,Sn.MAX_DELAY),this.maxRetries=Math.min(n,Sn.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return Sn.MAX_DELAY}}Sn.DEFAULT_DELAY=3;Sn.DEFAULT_MAX_RETRIES=3;Sn.MAX_DELAY=180;Sn.MAX_MAX_RETRIES=10;Sn.defaultShouldRetry=()=>!0;class yl{constructor(e=new Sn){this.options=e}isRetry(e){return yl.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,n){const r=typeof e=="string"?n.method:e.method;return!((r===Ro.PUT||r===Ro.PATCH||r===Ro.POST)&&sO(e,n,"Content-Type")==="application/octet-stream")}getDelay(e,n,r){const a=()=>Number(Math.random().toFixed(3)),c=e.headers!==void 0?e.headers.get(yl.RETRY_AFTER_HEADER):null;let d;return c!==null?Number.isNaN(Number(c))?d=Math.round((new Date(c).getTime()-Date.now())/1e3):d=Number(c):d=n>=2?this.getExponentialBackOffTime(n)+r+a():r+a(),Math.min(d,this.options.getMaxDelay()+a())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return Ft(this,void 0,void 0,function*(){const n=e*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(e){let n;return e.middlewareControl instanceof Bu&&(n=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new Sn,this.options)),n}executeWithRetry(e,n,r){return Ft(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),n<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,n,e.request,e.options,e.response)){++n,aO(e.request,e.options,yl.RETRY_ATTEMPT_HEADER,n.toString());const a=this.getDelay(e.response,n,r.delay);return yield this.sleep(a),yield this.executeWithRetry(e,n,r)}else return})}execute(e){return Ft(this,void 0,void 0,function*(){const r=this.getOptions(e);return pl.updateFeatureUsageFlag(e,Bh.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}yl.RETRY_STATUS_CODES=[429,503,504];yl.RETRY_ATTEMPT_HEADER="Retry-Attempt";yl.RETRY_AFTER_HEADER="Retry-After";class di{constructor(e=di.DEFAULT_MAX_REDIRECTS,n=di.defaultShouldRedirect){if(e>di.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${di.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=n}}di.DEFAULT_MAX_REDIRECTS=5;di.MAX_MAX_REDIRECTS=20;di.defaultShouldRedirect=()=>!0;class Mo{constructor(e=new di){this.options=e}isRedirect(e){return Mo.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(Mo.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(Mo.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,a=r.exec(e);let c,d;a!==null&&(c=a[0]);const m=r.exec(n);return m!==null&&(d=m[0]),typeof c<"u"&&typeof d<"u"&&c!==d}updateRequestUrl(e,n){return Ft(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?e:yield f5(e,n.request)})}getOptions(e){let n;return e.middlewareControl instanceof Bu&&(n=e.middlewareControl.getMiddlewareOptions(di)),typeof n>"u"&&(n=Object.assign(new di,this.options)),n}executeWithRedirect(e,n,r){return Ft(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const a=e.response;if(n<r.maxRedirects&&this.isRedirect(a)&&this.hasLocationHeader(a)&&r.shouldRedirect(a)){if(++n,a.status===Mo.STATUS_CODE_SEE_OTHER)e.options.method=Ro.GET,delete e.options.body;else{const c=this.getLocationHeader(a);!this.isRelativeURL(c)&&this.shouldDropAuthorizationHeader(a.url,c)&&delete e.options.headers[Mo.AUTHORIZATION_HEADER],yield this.updateRequestUrl(c,e)}yield this.executeWithRedirect(e,n,r)}else return})}execute(e){return Ft(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=Mo.MANUAL_REDIRECT,pl.updateFeatureUsageFlag(e,Bh.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}}Mo.REDIRECT_STATUS_CODES=[301,302,303,307,308];Mo.STATUS_CODE_SEE_OTHER=303;Mo.LOCATION_HEADER="Location";Mo.AUTHORIZATION_HEADER="Authorization";Mo.MANUAL_REDIRECT="manual";const p5="3.0.7";class No{execute(e){return Ft(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(rO(n)||e.customHosts&&oO(n,e.customHosts)){let r=sO(e.request,e.options,No.CLIENT_REQUEST_ID_HEADER);r||(r=h5(),aO(e.request,e.options,No.CLIENT_REQUEST_ID_HEADER,r));let a=`${No.PRODUCT_NAME}/${p5}`,c;if(e.middlewareControl instanceof Bu&&(c=e.middlewareControl.getMiddlewareOptions(pl)),c){const d=c.getFeatureUsage();a+=` (${No.FEATURE_USAGE_STRING}=${d})`}cO(e.request,e.options,No.SDK_VERSION_HEADER,a)}else delete e.options.headers[No.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[No.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}No.CLIENT_REQUEST_ID_HEADER="client-request-id";No.SDK_VERSION_HEADER="SdkVersion";No.PRODUCT_NAME="graph-js";No.FEATURE_USAGE_STRING="featureUsage";var f0;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(f0||(f0={}));var Wi;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(Wi||(Wi={}));var yE;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(yE||(yE={}));var vv;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(vv||(vv={}));var Cv;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Cv||(Cv={}));class Qm{static parseDocumentResponse(e,n){return typeof DOMParser<"u"?new Promise((r,a)=>{e.text().then(c=>{try{const m=new DOMParser().parseFromString(c,n);r(m)}catch(d){a(d)}})}):Promise.resolve(e.body)}static convertResponse(e,n){return Ft(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const a=e.headers.get("Content-type");switch(n){case Wi.ARRAYBUFFER:r=yield e.arrayBuffer();break;case Wi.BLOB:r=yield e.blob();break;case Wi.DOCUMENT:r=yield Qm.parseDocumentResponse(e,yE.TEXT_XML);break;case Wi.JSON:r=yield e.json();break;case Wi.STREAM:r=yield Promise.resolve(e.body);break;case Wi.TEXT:r=yield e.text();break;default:if(a!==null){const c=a.split(";")[0];new RegExp(Cv.DOCUMENT).test(c)?r=yield Qm.parseDocumentResponse(e,c):new RegExp(Cv.IMAGE).test(c)?r=e.blob():c===vv.TEXT_PLAIN?r=yield e.text():c===vv.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,n,r){return Ft(this,void 0,void 0,function*(){if(n===Wi.RAW)return Promise.resolve(e);{const a=yield Qm.convertResponse(e,n);if(e.ok)if(typeof r=="function")r(null,a);else return a;else throw a}})}}class y5{constructor(e){this.provider=e}getAccessToken(){return Ft(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.provider((r,a)=>Ft(this,void 0,void 0,function*(){if(a)e(a);else{if(!r){const d="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new yv(d)}const c=yield yv.setGraphClientError(r);n(c)}}))})})}}class Wm extends Error{constructor(e=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,Wm.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class wv{static constructError(e,n,r){const a=new Wm(n,"",e);return e.name!==void 0&&(a.code=e.name),a.body=e.toString(),a.date=new Date,a.headers=r?.headers,a}static constructErrorFromResponse(e,n,r){const a=e.error,c=new Wm(n,a.message);return c.code=a.code,a.innerError!==void 0&&(c.requestId=a.innerError["request-id"],c.date=new Date(a.innerError.date)),c.body=JSON.stringify(a),c.headers=r?.headers,c}static getError(e=null,n=-1,r,a){return Ft(this,void 0,void 0,function*(){let c;if(e&&e.error?c=wv.constructErrorFromResponse(e,n,a):e instanceof Error?c=wv.constructError(e,n,a):(c=new Wm(n),c.body=e),typeof r=="function")r(c,null);else return c})}}class v5{constructor(e,n,r){this.parsePath=a=>{if(a.indexOf("https://")!==-1){a=a.replace("https://","");const d=a.indexOf("/");d!==-1&&(this.urlComponents.host="https://"+a.substring(0,d),a=a.substring(d+1,a.length));const m=a.indexOf("/");m!==-1&&(this.urlComponents.version=a.substring(0,m),a=a.substring(m+1,a.length))}a.charAt(0)==="/"&&(a=a.substr(1));const c=a.indexOf("?");if(c===-1)this.urlComponents.path=a;else{this.urlComponents.path=a.substr(0,c);const d=a.substring(c+1,a.length).split("&");for(const m of d)this.parseQueryParameter(m)}},this.httpClient=e,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,n,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let a=[];r.length>1&&typeof n=="string"?a=Array.prototype.slice.call(r):typeof n=="string"?a.push(n):a=a.concat(n),this.urlComponents.oDataQueryParams[e]+=a.join(",")}buildFullUrl(){const e=u5([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,n=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&n.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&n.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const n=e.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.setURLComponentsQueryParamater(n,e[n]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const n=e.indexOf("="),r=e.substring(0,n),a=e.substring(n+1);this.setURLComponentsQueryParamater(r,a)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,n){if(l5.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],a=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=a?r+","+n:n}else this.urlComponents.otherURLQueryParams[e]=n}isValidQueryKeyValuePair(e){const n=e.indexOf("=");return!(n===-1||e.indexOf("(")!==-1&&e.indexOf("(")<n)}updateRequestOptions(e){const n=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(n,e.headers),Object.assign(n,this._headers),e.headers=n}send(e,n,r){var a;return Ft(this,void 0,void 0,function*(){let c;const d=new Bu(this._middlewareOptions);this.updateRequestOptions(n);const m=(a=this.config)===null||a===void 0?void 0:a.customHosts;try{return c=(yield this.httpClient.sendRequest({request:e,options:n,middlewareControl:d,customHosts:m})).response,yield Qm.getResponse(c,this._responseType,r)}catch(p){if(p instanceof yv)throw p;let y;throw c&&(y=c.status),yield wv.getError(p,y,r,c)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const n of e)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,n){return this._headers[e]=n,this}headers(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._headers[n]=e[n]);return this}option(e,n){return this._options[e]=n,this}options(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._options[n]=e[n]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Ft(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ro.GET};return yield this.send(n,r,e)})}post(e,n){return Ft(this,void 0,void 0,function*(){const r=this.buildFullUrl(),a={method:Ro.POST,body:bb(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?a.headers={}:(this.setHeaderContentType(),a.headers=this._headers),yield this.send(r,a,n)})}create(e,n){return Ft(this,void 0,void 0,function*(){return yield this.post(e,n)})}put(e,n){return Ft(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const a={method:Ro.PUT,body:bb(e)};return yield this.send(r,a,n)})}patch(e,n){return Ft(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const a={method:Ro.PATCH,body:bb(e)};return yield this.send(r,a,n)})}update(e,n){return Ft(this,void 0,void 0,function*(){return yield this.patch(e,n)})}delete(e){return Ft(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ro.DELETE};return yield this.send(n,r,e)})}del(e){return Ft(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return Ft(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Ro.GET};return this.responseType(Wi.STREAM),yield this.send(n,r,e)})}putStream(e,n){return Ft(this,void 0,void 0,function*(){const r=this.buildFullUrl(),a={method:Ro.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,a,n)})}}class lO{constructor(...e){if(!e||!e.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((n,r)=>{r<e.length-1&&n.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return Ft(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(e),e})}}const C5=()=>typeof process=="object"&&typeof require=="function";class RT{static createWithAuthenticationProvider(e){const n=new dg(e),r=new yl(new Sn),a=new No,c=new g5;if(n.setNext(r),C5()){const d=new Mo(new di);r.setNext(d),d.setNext(a)}else r.setNext(a);return a.setNext(c),RT.createWithMiddleware(n)}static createWithMiddleware(...e){return new lO(...e)}}const w5=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){const t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){const t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};class bv{static init(e){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=r==="authProvider"?new y5(e[r]):e[r]);return bv.initWithMiddleware(n)}static initWithMiddleware(e){return new bv(e)}constructor(e){this.config={baseUrl:a5,debugLogging:!1,defaultVersion:s5},w5();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let n;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)n=RT.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new lO(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(e){return new v5(this.httpClient,this.config,e)}}var Eb={};const NT=aD(hB);var Nm={},Ab={};/*! @azure/msal-browser v4.25.0 2025-10-09 */var m0;function b5(){return m0||(m0=1,(function(t){/*! @azure/msal-common v15.13.0 2025-10-09 */const e={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},n={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},r={GET:"GET",POST:"POST"},a=[e.OPENID_SCOPE,e.PROFILE_SCOPE,e.OFFLINE_ACCESS_SCOPE],c=[...a,e.EMAIL_SCOPE],d={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},m={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},p={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},v={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},b={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},E={QUERY:"query",FRAGMENT:"fragment"},x={QUERY:"query"},I={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},k={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},N={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},M={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},j="appmetadata",O="client_info",U="1",H={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},V={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Q={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Y={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ee={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},se={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ce={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},te={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},re={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},G={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},J=300;/*! @azure/msal-common v15.13.0 2025-10-09 */const D="unexpected_error",F="post_request_failed";var $=Object.freeze({__proto__:null,postRequestFailed:F,unexpectedError:D});/*! @azure/msal-common v15.13.0 2025-10-09 */const X={[D]:"Unexpected error in authentication.",[F]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},z={unexpectedError:{code:D,desc:X[D]},postRequestFailed:{code:F,desc:X[F]}};class W extends Error{constructor(i,u,g){const w=u?`${i}: ${u}`:i;super(w),Object.setPrototypeOf(this,W.prototype),this.errorCode=i||e.EMPTY_STRING,this.errorMessage=u||e.EMPTY_STRING,this.subError=g||e.EMPTY_STRING,this.name="AuthError"}setCorrelationId(i){this.correlationId=i}}function ue(S,i){return new W(S,i?`${X[S]} ${i}`:X[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */const de="client_info_decoding_error",ge="client_info_empty_error",Ne="token_parsing_error",Ee="null_or_empty_token",le="endpoints_resolution_error",Ce="network_error",De="openid_config_error",we="hash_not_deserialized",be="invalid_state",Oe="state_mismatch",Le="state_not_found",fe="nonce_mismatch",Me="auth_time_not_found",He="max_age_transpired",Ke="multiple_matching_tokens",ze="multiple_matching_accounts",et="multiple_matching_appMetadata",lt="request_cannot_be_made",Tt="cannot_remove_empty_scope",gt="cannot_append_scopeset",Pt="empty_input_scopeset",yt="device_code_polling_cancelled",Nn="device_code_expired",tn="device_code_unknown_error",Ht="no_account_in_silent_request",Fn="invalid_cache_record",_n="invalid_cache_environment",yo="no_account_found",cs="no_crypto_object",Za="unexpected_credential_type",mi="invalid_assertion",gi="invalid_client_credential",On="token_refresh_required",pi="user_timeout_reached",vo="token_claims_cnf_required_for_signedjwt",ea="authorization_code_missing_from_server_response",yi="binding_key_not_removed",ls="end_session_endpoint_not_supported",Bo="key_id_missing",Co="no_network_connectivity",ta="user_canceled",na="missing_tenant_id_error",st="method_not_implemented",zo="nested_app_auth_bridge_disabled";var Sl=Object.freeze({__proto__:null,authTimeNotFound:Me,authorizationCodeMissingFromServerResponse:ea,bindingKeyNotRemoved:yi,cannotAppendScopeSet:gt,cannotRemoveEmptyScope:Tt,clientInfoDecodingError:de,clientInfoEmptyError:ge,deviceCodeExpired:Nn,deviceCodePollingCancelled:yt,deviceCodeUnknownError:tn,emptyInputScopeSet:Pt,endSessionEndpointNotSupported:ls,endpointResolutionError:le,hashNotDeserialized:we,invalidAssertion:mi,invalidCacheEnvironment:_n,invalidCacheRecord:Fn,invalidClientCredential:gi,invalidState:be,keyIdMissing:Bo,maxAgeTranspired:He,methodNotImplemented:st,missingTenantIdError:na,multipleMatchingAccounts:ze,multipleMatchingAppMetadata:et,multipleMatchingTokens:Ke,nestedAppAuthBridgeDisabled:zo,networkError:Ce,noAccountFound:yo,noAccountInSilentRequest:Ht,noCryptoObject:cs,noNetworkConnectivity:Co,nonceMismatch:fe,nullOrEmptyToken:Ee,openIdConfigError:De,requestCannotBeMade:lt,stateMismatch:Oe,stateNotFound:Le,tokenClaimsCnfRequiredForSignedJwt:vo,tokenParsingError:Ne,tokenRefreshRequired:On,unexpectedCredentialType:Za,userCanceled:ta,userTimeoutReached:pi});/*! @azure/msal-common v15.13.0 2025-10-09 */const nt={[de]:"The client info could not be parsed/decoded correctly",[ge]:"The client info was empty",[Ne]:"Token cannot be parsed",[Ee]:"The token is null or empty",[le]:"Endpoints cannot be resolved",[Ce]:"Network request failed",[De]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[we]:"The hash parameters could not be deserialized",[be]:"State was not the expected format",[Oe]:"State mismatch error",[Le]:"State not found",[fe]:"Nonce mismatch error",[Me]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[He]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Ke]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ze]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[et]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[lt]:"Token request cannot be made without authorization code or refresh token.",[Tt]:"Cannot remove null or empty scope from ScopeSet",[gt]:"Cannot append ScopeSet",[Pt]:"Empty input ScopeSet cannot be processed",[yt]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Nn]:"Device code is expired.",[tn]:"Device code stopped polling for unknown reasons.",[Ht]:"Please pass an account object, silent flow is not supported without account information",[Fn]:"Cache record object was null or undefined.",[_n]:"Invalid environment when attempting to create cache entry",[yo]:"No account found in cache for given key.",[cs]:"No crypto object detected.",[Za]:"Unexpected credential type.",[mi]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[gi]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[On]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[pi]:"User defined timeout for device code polling reached",[vo]:"Cannot generate a POP jwt if the token_claims are not populated",[ea]:"Server response does not contain an authorization code to proceed",[yi]:"Could not remove the credential's binding key from storage.",[ls]:"The provided authority does not support logout",[Bo]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Co]:"No network connectivity. Check your internet connection.",[ta]:"User cancelled the flow.",[na]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[st]:"This method has not been implemented",[zo]:"The nested app auth bridge is disabled"},af={clientInfoDecodingError:{code:de,desc:nt[de]},clientInfoEmptyError:{code:ge,desc:nt[ge]},tokenParsingError:{code:Ne,desc:nt[Ne]},nullOrEmptyToken:{code:Ee,desc:nt[Ee]},endpointResolutionError:{code:le,desc:nt[le]},networkError:{code:Ce,desc:nt[Ce]},unableToGetOpenidConfigError:{code:De,desc:nt[De]},hashNotDeserialized:{code:we,desc:nt[we]},invalidStateError:{code:be,desc:nt[be]},stateMismatchError:{code:Oe,desc:nt[Oe]},stateNotFoundError:{code:Le,desc:nt[Le]},nonceMismatchError:{code:fe,desc:nt[fe]},authTimeNotFoundError:{code:Me,desc:nt[Me]},maxAgeTranspired:{code:He,desc:nt[He]},multipleMatchingTokens:{code:Ke,desc:nt[Ke]},multipleMatchingAccounts:{code:ze,desc:nt[ze]},multipleMatchingAppMetadata:{code:et,desc:nt[et]},tokenRequestCannotBeMade:{code:lt,desc:nt[lt]},removeEmptyScopeError:{code:Tt,desc:nt[Tt]},appendScopeSetError:{code:gt,desc:nt[gt]},emptyInputScopeSetError:{code:Pt,desc:nt[Pt]},DeviceCodePollingCancelled:{code:yt,desc:nt[yt]},DeviceCodeExpired:{code:Nn,desc:nt[Nn]},DeviceCodeUnknownError:{code:tn,desc:nt[tn]},NoAccountInSilentRequest:{code:Ht,desc:nt[Ht]},invalidCacheRecord:{code:Fn,desc:nt[Fn]},invalidCacheEnvironment:{code:_n,desc:nt[_n]},noAccountFound:{code:yo,desc:nt[yo]},noCryptoObj:{code:cs,desc:nt[cs]},unexpectedCredentialType:{code:Za,desc:nt[Za]},invalidAssertion:{code:mi,desc:nt[mi]},invalidClientCredential:{code:gi,desc:nt[gi]},tokenRefreshRequired:{code:On,desc:nt[On]},userTimeoutReached:{code:pi,desc:nt[pi]},tokenClaimsRequired:{code:vo,desc:nt[vo]},noAuthorizationCodeFromServer:{code:ea,desc:nt[ea]},bindingKeyNotRemovedError:{code:yi,desc:nt[yi]},logoutNotSupported:{code:ls,desc:nt[ls]},keyIdMissing:{code:Bo,desc:nt[Bo]},noNetworkConnectivity:{code:Co,desc:nt[Co]},userCanceledError:{code:ta,desc:nt[ta]},missingTenantIdError:{code:na,desc:nt[na]},nestedAppAuthBridgeDisabled:{code:zo,desc:nt[zo]}};class Mn extends W{constructor(i,u){super(i,u?`${nt[i]}: ${u}`:nt[i]),this.name="ClientAuthError",Object.setPrototypeOf(this,Mn.prototype)}}function ke(S,i){return new Mn(S,i)}/*! @azure/msal-common v15.13.0 2025-10-09 */const Cn={createNewGuid:()=>{throw ke(st)},base64Decode:()=>{throw ke(st)},base64Encode:()=>{throw ke(st)},base64UrlEncode:()=>{throw ke(st)},encodeKid:()=>{throw ke(st)},async getPublicKeyThumbprint(){throw ke(st)},async removeTokenBindingKey(){throw ke(st)},async clearKeystore(){throw ke(st)},async signJwt(){throw ke(st)},async hashString(){throw ke(st)}};/*! @azure/msal-common v15.13.0 2025-10-09 */t.LogLevel=void 0,(function(S){S[S.Error=0]="Error",S[S.Warning=1]="Warning",S[S.Info=2]="Info",S[S.Verbose=3]="Verbose",S[S.Trace=4]="Trace"})(t.LogLevel||(t.LogLevel={}));class Pn{constructor(i,u,g){this.level=t.LogLevel.Info;const w=()=>{},T=i||Pn.createDefaultLoggerOptions();this.localCallback=T.loggerCallback||w,this.piiLoggingEnabled=T.piiLoggingEnabled||!1,this.level=typeof T.logLevel=="number"?T.logLevel:t.LogLevel.Info,this.correlationId=T.correlationId||e.EMPTY_STRING,this.packageName=u||e.EMPTY_STRING,this.packageVersion=g||e.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:t.LogLevel.Info}}clone(i,u,g){return new Pn({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:g||this.correlationId},i,u)}logMessage(i,u){if(u.logLevel>this.level||!this.piiLoggingEnabled&&u.containsPii)return;const T=`${`[${new Date().toUTCString()}] : [${u.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${t.LogLevel[u.logLevel]} - ${i}`;this.executeCallback(u.logLevel,T,u.containsPii||!1)}executeCallback(i,u,g){this.localCallback&&this.localCallback(i,u,g)}error(i,u){this.logMessage(i,{logLevel:t.LogLevel.Error,containsPii:!1,correlationId:u||e.EMPTY_STRING})}errorPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Error,containsPii:!0,correlationId:u||e.EMPTY_STRING})}warning(i,u){this.logMessage(i,{logLevel:t.LogLevel.Warning,containsPii:!1,correlationId:u||e.EMPTY_STRING})}warningPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Warning,containsPii:!0,correlationId:u||e.EMPTY_STRING})}info(i,u){this.logMessage(i,{logLevel:t.LogLevel.Info,containsPii:!1,correlationId:u||e.EMPTY_STRING})}infoPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Info,containsPii:!0,correlationId:u||e.EMPTY_STRING})}verbose(i,u){this.logMessage(i,{logLevel:t.LogLevel.Verbose,containsPii:!1,correlationId:u||e.EMPTY_STRING})}verbosePii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Verbose,containsPii:!0,correlationId:u||e.EMPTY_STRING})}trace(i,u){this.logMessage(i,{logLevel:t.LogLevel.Trace,containsPii:!1,correlationId:u||e.EMPTY_STRING})}tracePii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Trace,containsPii:!0,correlationId:u||e.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.13.0 2025-10-09 */const ec="@azure/msal-common",xl="15.13.0";/*! @azure/msal-common v15.13.0 2025-10-09 */const tc={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.13.0 2025-10-09 */const us="redirect_uri_empty",Fo="claims_request_parsing_error",vi="authority_uri_insecure",lr="url_parse_error",jr="empty_url_error",eo="empty_input_scopes_error",br="invalid_claims",nn="token_request_empty",ds="logout_request_empty",ra="invalid_code_challenge_method",Er="pkce_params_missing",Hr="invalid_cloud_discovery_metadata",oa="invalid_authority_metadata",Ci="untrusted_authority",Ko="missing_ssh_jwk",ia="missing_ssh_kid",Go="missing_nonce_authentication_header",wo="invalid_authentication_header",ur="cannot_set_OIDCOptions",wi="cannot_allow_platform_broker",hs="authority_mismatch",Br="invalid_request_method_for_EAR",bi="invalid_authorize_post_body_parameters";var _l=Object.freeze({__proto__:null,authorityMismatch:hs,authorityUriInsecure:vi,cannotAllowPlatformBroker:wi,cannotSetOIDCOptions:ur,claimsRequestParsingError:Fo,emptyInputScopesError:eo,invalidAuthenticationHeader:wo,invalidAuthorityMetadata:oa,invalidAuthorizePostBodyParameters:bi,invalidClaims:br,invalidCloudDiscoveryMetadata:Hr,invalidCodeChallengeMethod:ra,invalidRequestMethodForEAR:Br,logoutRequestEmpty:ds,missingNonceAuthenticationHeader:Go,missingSshJwk:Ko,missingSshKid:ia,pkceParamsMissing:Er,redirectUriEmpty:us,tokenRequestEmpty:nn,untrustedAuthority:Ci,urlEmptyError:jr,urlParseError:lr});/*! @azure/msal-common v15.13.0 2025-10-09 */const Gt={[us]:"A redirect URI is required for all calls, and none has been set.",[Fo]:"Could not parse the given claims request object.",[vi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[lr]:"URL could not be parsed into appropriate segments.",[jr]:"URL was empty or null.",[eo]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[br]:"Given claims parameter must be a stringified JSON object.",[nn]:"Token request was empty and not found in cache.",[ds]:"The logout request was null or undefined.",[ra]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Er]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Hr]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[oa]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ci]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Ko]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ia]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Go]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[wo]:"Invalid authentication header provided",[ur]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[wi]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[hs]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[bi]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Br]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},ed={redirectUriNotSet:{code:us,desc:Gt[us]},claimsRequestParsingError:{code:Fo,desc:Gt[Fo]},authorityUriInsecure:{code:vi,desc:Gt[vi]},urlParseError:{code:lr,desc:Gt[lr]},urlEmptyError:{code:jr,desc:Gt[jr]},emptyScopesError:{code:eo,desc:Gt[eo]},invalidClaimsRequest:{code:br,desc:Gt[br]},tokenRequestEmptyError:{code:nn,desc:Gt[nn]},logoutRequestEmptyError:{code:ds,desc:Gt[ds]},invalidCodeChallengeMethod:{code:ra,desc:Gt[ra]},invalidCodeChallengeParams:{code:Er,desc:Gt[Er]},invalidCloudDiscoveryMetadata:{code:Hr,desc:Gt[Hr]},invalidAuthorityMetadata:{code:oa,desc:Gt[oa]},untrustedAuthority:{code:Ci,desc:Gt[Ci]},missingSshJwk:{code:Ko,desc:Gt[Ko]},missingSshKid:{code:ia,desc:Gt[ia]},missingNonceAuthenticationHeader:{code:Go,desc:Gt[Go]},invalidAuthenticationHeader:{code:wo,desc:Gt[wo]},cannotSetOIDCOptions:{code:ur,desc:Gt[ur]},cannotAllowPlatformBroker:{code:wi,desc:Gt[wi]},authorityMismatch:{code:hs,desc:Gt[hs]},invalidAuthorizePostBodyParameters:{code:bi,desc:Gt[bi]},invalidRequestMethodForEAR:{code:Br,desc:Gt[Br]}};class Kn extends W{constructor(i){super(i,Gt[i]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Kn.prototype)}}function bt(S){return new Kn(S)}/*! @azure/msal-common v15.13.0 2025-10-09 */class Gn{static isEmptyObj(i){if(i)try{const u=JSON.parse(i);return Object.keys(u).length===0}catch{}return!0}static startsWith(i,u){return i.indexOf(u)===0}static endsWith(i,u){return i.length>=u.length&&i.lastIndexOf(u)===i.length-u.length}static queryStringToObject(i){const u={},g=i.split("&"),w=T=>decodeURIComponent(T.replace(/\+/g," "));return g.forEach(T=>{if(T.trim()){const[R,L]=T.split(/=(.+)/g,2);R&&L&&(u[w(R)]=w(L))}}),u}static trimArrayEntries(i){return i.map(u=>u.trim())}static removeEmptyStringsFromArray(i){return i.filter(u=>!!u)}static jsonParseHelper(i){try{return JSON.parse(i)}catch{return null}}static matchPattern(i,u){return new RegExp(i.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class rn{constructor(i){const u=i?Gn.trimArrayEntries([...i]):[],g=u?Gn.removeEmptyStringsFromArray(u):[];if(!g||!g.length)throw bt(eo);this.scopes=new Set,g.forEach(w=>this.scopes.add(w))}static fromString(i){const g=(i||e.EMPTY_STRING).split(" ");return new rn(g)}static createSearchScopes(i){const u=i&&i.length>0?i:[...a],g=new rn(u);return g.containsOnlyOIDCScopes()?g.removeScope(e.OFFLINE_ACCESS_SCOPE):g.removeOIDCScopes(),g}containsScope(i){const u=this.printScopesLowerCase().split(" "),g=new rn(u);return i?g.scopes.has(i.toLowerCase()):!1}containsScopeSet(i){return!i||i.scopes.size<=0?!1:this.scopes.size>=i.scopes.size&&i.asArray().every(u=>this.containsScope(u))}containsOnlyOIDCScopes(){let i=0;return c.forEach(u=>{this.containsScope(u)&&(i+=1)}),this.scopes.size===i}appendScope(i){i&&this.scopes.add(i.trim())}appendScopes(i){try{i.forEach(u=>this.appendScope(u))}catch{throw ke(gt)}}removeScope(i){if(!i)throw ke(Tt);this.scopes.delete(i.trim())}removeOIDCScopes(){c.forEach(i=>{this.scopes.delete(i)})}unionScopeSets(i){if(!i)throw ke(Pt);const u=new Set;return i.scopes.forEach(g=>u.add(g.toLowerCase())),this.scopes.forEach(g=>u.add(g.toLowerCase())),u}intersectingScopeSets(i){if(!i)throw ke(Pt);i.containsOnlyOIDCScopes()||i.removeOIDCScopes();const u=this.unionScopeSets(i),g=i.getScopeCount(),w=this.getScopeCount();return u.size<w+g}getScopeCount(){return this.scopes.size}asArray(){const i=[];return this.scopes.forEach(u=>i.push(u)),i}printScopes(){return this.scopes?this.asArray().join(" "):e.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-10-09 */function nc(S,i){return!!S&&!!i&&S===i.split(".")[1]}function Ei(S,i,u,g){if(g){const{oid:w,sub:T,tid:R,name:L,tfp:K,acr:ne,preferred_username:ve,upn:Se,login_hint:je}=g,Ye=R||K||ne||"";return{tenantId:Ye,localAccountId:w||T||"",name:L,username:ve||Se||"",loginHint:je,isHomeTenant:nc(Ye,S)}}else return{tenantId:u,localAccountId:i,username:"",isHomeTenant:nc(u,S)}}function kl(S,i,u,g){let w=S;if(i){const{isHomeTenant:T,...R}=i;w={...S,...R}}if(u){const{isHomeTenant:T,...R}=Ei(S.homeAccountId,S.localAccountId,S.tenantId,u);return w={...w,...R,idTokenClaims:u,idToken:g},w}return w}/*! @azure/msal-common v15.13.0 2025-10-09 */function wn(S,i){const u=sa(S);try{const g=i(u);return JSON.parse(g)}catch{throw ke(Ne)}}function sa(S){if(!S)throw ke(Ee);const u=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(S);if(!u||u.length<4)throw ke(Ne);return u[2]}function Il(S,i){if(i===0||Date.now()-3e5>S+i)throw ke(He)}/*! @azure/msal-common v15.13.0 2025-10-09 */function rc(S){if(!S)return S;let i=S.toLowerCase();return Gn.endsWith(i,"?")?i=i.slice(0,-1):Gn.endsWith(i,"?/")&&(i=i.slice(0,-2)),Gn.endsWith(i,"/")||(i+="/"),i}function qo(S){return S.startsWith("#/")?S.substring(2):S.startsWith("#")||S.startsWith("?")?S.substring(1):S}function Rl(S){if(!S||S.indexOf("=")<0)return null;try{const i=qo(S),u=Object.fromEntries(new URLSearchParams(i));if(u.code||u.ear_jwe||u.error||u.error_description||u.state)return u}catch{throw ke(we)}return null}function oc(S,i=!0,u){const g=new Array;return S.forEach((w,T)=>{!i&&u&&T in u?g.push(`${T}=${w}`):g.push(`${T}=${encodeURIComponent(w)}`)}),g.join("&")}function aa(S){if(!S)return S;const i=S.split("#")[0];try{const u=new URL(i),g=u.origin+u.pathname+u.search;return rc(g)}catch{return rc(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Et{get urlString(){return this._urlString}constructor(i){if(this._urlString=i,!this._urlString)throw bt(jr);i.includes("#")||(this._urlString=Et.canonicalizeUri(i))}static canonicalizeUri(i){if(i){let u=i.toLowerCase();return Gn.endsWith(u,"?")?u=u.slice(0,-1):Gn.endsWith(u,"?/")&&(u=u.slice(0,-2)),Gn.endsWith(u,"/")||(u+="/"),u}return i}validateAsUri(){let i;try{i=this.getUrlComponents()}catch{throw bt(lr)}if(!i.HostNameAndPort||!i.PathSegments)throw bt(lr);if(!i.Protocol||i.Protocol.toLowerCase()!=="https:")throw bt(vi)}static appendQueryString(i,u){return u?i.indexOf("?")<0?`${i}?${u}`:`${i}&${u}`:i}static removeHashFromUrl(i){return Et.canonicalizeUri(i.split("#")[0])}replaceTenantPath(i){const u=this.getUrlComponents(),g=u.PathSegments;return i&&g.length!==0&&(g[0]===p.COMMON||g[0]===p.ORGANIZATIONS)&&(g[0]=i),Et.constructAuthorityUriFromObject(u)}getUrlComponents(){const i=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),u=this.urlString.match(i);if(!u)throw bt(lr);const g={Protocol:u[1],HostNameAndPort:u[4],AbsolutePath:u[5],QueryString:u[7]};let w=g.AbsolutePath.split("/");return w=w.filter(T=>T&&T.length>0),g.PathSegments=w,g.QueryString&&g.QueryString.endsWith("/")&&(g.QueryString=g.QueryString.substring(0,g.QueryString.length-1)),g}static getDomainFromUrl(i){const u=RegExp("^([^:/?#]+://)?([^/?#]*)"),g=i.match(u);if(!g)throw bt(lr);return g[2]}static getAbsoluteUrl(i,u){if(i[0]===e.FORWARD_SLASH){const w=new Et(u).getUrlComponents();return w.Protocol+"//"+w.HostNameAndPort+i}return i}static constructAuthorityUriFromObject(i){return new Et(i.Protocol+"//"+i.HostNameAndPort+"/"+i.PathSegments.join("/"))}static hashContainsKnownProperties(i){return!!Rl(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const cf={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},lf=cf.endpointMetadata,Nl=cf.instanceDiscoveryMetadata,jg=new Set;Nl.metadata.forEach(S=>{S.aliases.forEach(i=>{jg.add(i)})});function HC(S,i){let u;const g=S.canonicalAuthority;if(g){const w=new Et(g).getUrlComponents().HostNameAndPort;u=Ol(w,S.cloudDiscoveryMetadata?.metadata,V.CONFIG,i)||Ol(w,Nl.metadata,V.HARDCODED_VALUES,i)||S.knownAuthorities}return u||[]}function Ol(S,i,u,g){if(g?.trace(`getAliasesFromMetadata called with source: ${u}`),S&&i){const w=ic(i,S);if(w)return g?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${u}, returning aliases`),w.aliases;g?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${u}`)}return null}function uf(S){return ic(Nl.metadata,S)}function ic(S,i){for(let u=0;u<S.length;u++){const g=S[u];if(g.aliases.includes(i))return g}return null}/*! @azure/msal-common v15.13.0 2025-10-09 */const Ai="cache_quota_exceeded",fs="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-10-09 */const td={[Ai]:"Exceeded cache storage capacity.",[fs]:"Unexpected error occurred when using cache storage."};class Ti extends W{constructor(i,u){const g=u||(td[i]?td[i]:td[fs]);super(`${i}: ${g}`),Object.setPrototypeOf(this,Ti.prototype),this.name="CacheError",this.errorCode=i,this.errorMessage=g}}function nd(S){return S instanceof Error?S.name==="QuotaExceededError"||S.name==="NS_ERROR_DOM_QUOTA_REACHED"||S.message.includes("exceeded the quota")?new Ti(Ai):new Ti(S.name,S.message):new Ti(fs)}/*! @azure/msal-common v15.13.0 2025-10-09 */class ca{constructor(i,u,g,w,T){this.clientId=i,this.cryptoImpl=u,this.commonLogger=g.clone(ec,xl),this.staticAuthorityOptions=T,this.performanceClient=w}getAllAccounts(i,u){return this.buildTenantProfiles(this.getAccountsFilteredBy(i,u),u,i)}getAccountInfoFilteredBy(i,u){if(Object.keys(i).length===0||Object.values(i).every(w=>!w))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const g=this.getAllAccounts(i,u);return g.length>1?g.sort(T=>T.idTokenClaims?-1:1)[0]:g.length===1?g[0]:null}getBaseAccountInfo(i,u){const g=this.getAccountsFilteredBy(i,u);return g.length>0?g[0].getAccountInfo():null}buildTenantProfiles(i,u,g){return i.flatMap(w=>this.getTenantProfilesFromAccountEntity(w,u,g?.tenantId,g))}getTenantedAccountInfoByFilter(i,u,g,w,T){let R=null,L;if(T&&!this.tenantProfileMatchesFilter(g,T))return null;const K=this.getIdToken(i,w,u,g.tenantId);return K&&(L=wn(K.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(L,T))?null:(R=kl(i,g,L,K?.secret),R)}getTenantProfilesFromAccountEntity(i,u,g,w){const T=i.getAccountInfo();let R=T.tenantProfiles||new Map;const L=this.getTokenKeys();if(g){const ne=R.get(g);if(ne)R=new Map([[g,ne]]);else return[]}const K=[];return R.forEach(ne=>{const ve=this.getTenantedAccountInfoByFilter(T,L,ne,u,w);ve&&K.push(ve)}),K}tenantProfileMatchesFilter(i,u){return!(u.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(i,u.localAccountId)||u.name&&i.name!==u.name||u.isHomeTenant!==void 0&&i.isHomeTenant!==u.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(i,u){return!(u&&(u.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(i,u.localAccountId)||u.loginHint&&!this.matchLoginHintFromTokenClaims(i,u.loginHint)||u.username&&!this.matchUsername(i.preferred_username,u.username)||u.name&&!this.matchName(i,u.name)||u.sid&&!this.matchSid(i,u.sid)))}async saveCacheRecord(i,u,g){if(!i)throw ke(Fn);try{i.account&&await this.setAccount(i.account,u),i.idToken&&g?.idToken!==!1&&await this.setIdTokenCredential(i.idToken,u),i.accessToken&&g?.accessToken!==!1&&await this.saveAccessToken(i.accessToken,u),i.refreshToken&&g?.refreshToken!==!1&&await this.setRefreshTokenCredential(i.refreshToken,u),i.appMetadata&&this.setAppMetadata(i.appMetadata,u)}catch(w){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),w instanceof W?w:nd(w)}}async saveAccessToken(i,u){const g={clientId:i.clientId,credentialType:i.credentialType,environment:i.environment,homeAccountId:i.homeAccountId,realm:i.realm,tokenType:i.tokenType,requestedClaimsHash:i.requestedClaimsHash},w=this.getTokenKeys(),T=rn.fromString(i.target);w.accessToken.forEach(R=>{if(!this.accessTokenKeyMatchesFilter(R,g,!1))return;const L=this.getAccessTokenCredential(R,u);L&&this.credentialMatchesFilter(L,g)&&rn.fromString(L.target).intersectingScopeSets(T)&&this.removeAccessToken(R,u)}),await this.setAccessTokenCredential(i,u)}getAccountsFilteredBy(i,u){const g=this.getAccountKeys(),w=[];return g.forEach(T=>{const R=this.getAccount(T,u);if(!R||i.homeAccountId&&!this.matchHomeAccountId(R,i.homeAccountId)||i.username&&!this.matchUsername(R.username,i.username)||i.environment&&!this.matchEnvironment(R,i.environment)||i.realm&&!this.matchRealm(R,i.realm)||i.nativeAccountId&&!this.matchNativeAccountId(R,i.nativeAccountId)||i.authorityType&&!this.matchAuthorityType(R,i.authorityType))return;const L={localAccountId:i?.localAccountId,name:i?.name},K=R.tenantProfiles?.filter(ne=>this.tenantProfileMatchesFilter(ne,L));K&&K.length===0||w.push(R)}),w}credentialMatchesFilter(i,u){return!(u.clientId&&!this.matchClientId(i,u.clientId)||u.userAssertionHash&&!this.matchUserAssertionHash(i,u.userAssertionHash)||typeof u.homeAccountId=="string"&&!this.matchHomeAccountId(i,u.homeAccountId)||u.environment&&!this.matchEnvironment(i,u.environment)||u.realm&&!this.matchRealm(i,u.realm)||u.credentialType&&!this.matchCredentialType(i,u.credentialType)||u.familyId&&!this.matchFamilyId(i,u.familyId)||u.target&&!this.matchTarget(i,u.target)||(u.requestedClaimsHash||i.requestedClaimsHash)&&i.requestedClaimsHash!==u.requestedClaimsHash||i.credentialType===M.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(u.tokenType&&!this.matchTokenType(i,u.tokenType)||u.tokenType===Y.SSH&&u.keyId&&!this.matchKeyId(i,u.keyId)))}getAppMetadataFilteredBy(i){const u=this.getKeys(),g={};return u.forEach(w=>{if(!this.isAppMetadata(w))return;const T=this.getAppMetadata(w);T&&(i.environment&&!this.matchEnvironment(T,i.environment)||i.clientId&&!this.matchClientId(T,i.clientId)||(g[w]=T))}),g}getAuthorityMetadataByAlias(i){const u=this.getAuthorityMetadataKeys();let g=null;return u.forEach(w=>{if(!this.isAuthorityMetadata(w)||w.indexOf(this.clientId)===-1)return;const T=this.getAuthorityMetadata(w);T&&T.aliases.indexOf(i)!==-1&&(g=T)}),g}removeAllAccounts(i){this.getAllAccounts({},i).forEach(g=>{this.removeAccount(g,i)})}removeAccount(i,u){this.removeAccountContext(i,u);const g=this.getAccountKeys(),w=T=>T.includes(i.homeAccountId)&&T.includes(i.environment);g.filter(w).forEach(T=>{this.removeItem(T,u),this.performanceClient.incrementFields({accountsRemoved:1},u)})}removeAccountContext(i,u){const g=this.getTokenKeys(),w=T=>T.includes(i.homeAccountId)&&T.includes(i.environment);g.idToken.filter(w).forEach(T=>{this.removeIdToken(T,u)}),g.accessToken.filter(w).forEach(T=>{this.removeAccessToken(T,u)}),g.refreshToken.filter(w).forEach(T=>{this.removeRefreshToken(T,u)})}removeAccessToken(i,u){const g=this.getAccessTokenCredential(i,u);if(this.removeItem(i,u),this.performanceClient.incrementFields({accessTokensRemoved:1},u),!g||g.credentialType.toLowerCase()!==M.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||g.tokenType!==Y.POP)return;const w=g.keyId;w&&this.cryptoImpl.removeTokenBindingKey(w).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${w}`,u),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},u)})}removeAppMetadata(i){return this.getKeys().forEach(g=>{this.isAppMetadata(g)&&this.removeItem(g,i)}),!0}getIdToken(i,u,g,w,T){this.commonLogger.trace("CacheManager - getIdToken called");const R={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:M.ID_TOKEN,clientId:this.clientId,realm:w},L=this.getIdTokensByFilter(R,u,g),K=L.size;if(K<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(K>1){let ne=L;if(!w){const ve=new Map;L.forEach((je,Ye)=>{je.realm===i.tenantId&&ve.set(Ye,je)});const Se=ve.size;if(Se<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),L.values().next().value;if(Se===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),ve.values().next().value;ne=ve}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),ne.forEach((ve,Se)=>{this.removeIdToken(Se,u)}),T&&u&&T.addFields({multiMatchedID:L.size},u),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),L.values().next().value}getIdTokensByFilter(i,u,g){const w=g&&g.idToken||this.getTokenKeys().idToken,T=new Map;return w.forEach(R=>{if(!this.idTokenKeyMatchesFilter(R,{clientId:this.clientId,...i}))return;const L=this.getIdTokenCredential(R,u);L&&this.credentialMatchesFilter(L,i)&&T.set(R,L)}),T}idTokenKeyMatchesFilter(i,u){const g=i.toLowerCase();return!(u.clientId&&g.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&g.indexOf(u.homeAccountId.toLowerCase())===-1)}removeIdToken(i,u){this.removeItem(i,u)}removeRefreshToken(i,u){this.removeItem(i,u)}getAccessToken(i,u,g,w){const T=u.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",T);const R=rn.createSearchScopes(u.scopes),L=u.authenticationScheme||Y.BEARER,K=L&&L.toLowerCase()!==Y.BEARER.toLowerCase()?M.ACCESS_TOKEN_WITH_AUTH_SCHEME:M.ACCESS_TOKEN,ne={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:K,clientId:this.clientId,realm:w||i.tenantId,target:R,tokenType:L,keyId:u.sshKid,requestedClaimsHash:u.requestedClaimsHash},ve=g&&g.accessToken||this.getTokenKeys().accessToken,Se=[];ve.forEach(Ye=>{if(this.accessTokenKeyMatchesFilter(Ye,ne,!0)){const Ut=this.getAccessTokenCredential(Ye,T);Ut&&this.credentialMatchesFilter(Ut,ne)&&Se.push(Ut)}});const je=Se.length;return je<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",T),null):je>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",T),Se.forEach(Ye=>{this.removeAccessToken(this.generateCredentialKey(Ye),T)}),this.performanceClient.addFields({multiMatchedAT:Se.length},T),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",T),Se[0])}accessTokenKeyMatchesFilter(i,u,g){const w=i.toLowerCase();if(u.clientId&&w.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&w.indexOf(u.homeAccountId.toLowerCase())===-1||u.realm&&w.indexOf(u.realm.toLowerCase())===-1||u.requestedClaimsHash&&w.indexOf(u.requestedClaimsHash.toLowerCase())===-1)return!1;if(u.target){const T=u.target.asArray();for(let R=0;R<T.length;R++){if(g&&!w.includes(T[R].toLowerCase()))return!1;if(!g&&w.includes(T[R].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(i,u){const g=this.getTokenKeys(),w=[];return g.accessToken.forEach(T=>{if(!this.accessTokenKeyMatchesFilter(T,i,!0))return;const R=this.getAccessTokenCredential(T,u);R&&this.credentialMatchesFilter(R,i)&&w.push(R)}),w}getRefreshToken(i,u,g,w,T){this.commonLogger.trace("CacheManager - getRefreshToken called");const R=u?U:void 0,L={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:M.REFRESH_TOKEN,clientId:this.clientId,familyId:R},K=w&&w.refreshToken||this.getTokenKeys().refreshToken,ne=[];K.forEach(Se=>{if(this.refreshTokenKeyMatchesFilter(Se,L)){const je=this.getRefreshTokenCredential(Se,g);je&&this.credentialMatchesFilter(je,L)&&ne.push(je)}});const ve=ne.length;return ve<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(ve>1&&T&&g&&T.addFields({multiMatchedRT:ve},g),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),ne[0])}refreshTokenKeyMatchesFilter(i,u){const g=i.toLowerCase();return!(u.familyId&&g.indexOf(u.familyId.toLowerCase())===-1||!u.familyId&&u.clientId&&g.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&g.indexOf(u.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(i){const u={environment:i,clientId:this.clientId},g=this.getAppMetadataFilteredBy(u),w=Object.keys(g).map(R=>g[R]),T=w.length;if(T<1)return null;if(T>1)throw ke(et);return w[0]}isAppMetadataFOCI(i){const u=this.readAppMetadataFromCache(i);return!!(u&&u.familyId===U)}matchHomeAccountId(i,u){return typeof i.homeAccountId=="string"&&u===i.homeAccountId}matchLocalAccountIdFromTokenClaims(i,u){const g=i.oid||i.sub;return u===g}matchLocalAccountIdFromTenantProfile(i,u){return i.localAccountId===u}matchName(i,u){return u.toLowerCase()===i.name?.toLowerCase()}matchUsername(i,u){return!!(i&&typeof i=="string"&&u?.toLowerCase()===i.toLowerCase())}matchUserAssertionHash(i,u){return!!(i.userAssertionHash&&u===i.userAssertionHash)}matchEnvironment(i,u){if(this.staticAuthorityOptions){const w=HC(this.staticAuthorityOptions,this.commonLogger);if(w.includes(u)&&w.includes(i.environment))return!0}const g=this.getAuthorityMetadataByAlias(u);return!!(g&&g.aliases.indexOf(i.environment)>-1)}matchCredentialType(i,u){return i.credentialType&&u.toLowerCase()===i.credentialType.toLowerCase()}matchClientId(i,u){return!!(i.clientId&&u===i.clientId)}matchFamilyId(i,u){return!!(i.familyId&&u===i.familyId)}matchRealm(i,u){return i.realm?.toLowerCase()===u.toLowerCase()}matchNativeAccountId(i,u){return!!(i.nativeAccountId&&u===i.nativeAccountId)}matchLoginHintFromTokenClaims(i,u){return i.login_hint===u||i.preferred_username===u||i.upn===u}matchSid(i,u){return i.sid===u}matchAuthorityType(i,u){return!!(i.authorityType&&u.toLowerCase()===i.authorityType.toLowerCase())}matchTarget(i,u){return i.credentialType!==M.ACCESS_TOKEN&&i.credentialType!==M.ACCESS_TOKEN_WITH_AUTH_SCHEME||!i.target?!1:rn.fromString(i.target).containsScopeSet(u)}matchTokenType(i,u){return!!(i.tokenType&&i.tokenType===u)}matchKeyId(i,u){return!!(i.keyId&&i.keyId===u)}isAppMetadata(i){return i.indexOf(j)!==-1}isAuthorityMetadata(i){return i.indexOf(H.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(i){return`${H.CACHE_KEY}-${this.clientId}-${i}`}static toObject(i,u){for(const g in u)i[g]=u[g];return i}}class Si extends ca{async setAccount(){throw ke(st)}getAccount(){throw ke(st)}async setIdTokenCredential(){throw ke(st)}getIdTokenCredential(){throw ke(st)}async setAccessTokenCredential(){throw ke(st)}getAccessTokenCredential(){throw ke(st)}async setRefreshTokenCredential(){throw ke(st)}getRefreshTokenCredential(){throw ke(st)}setAppMetadata(){throw ke(st)}getAppMetadata(){throw ke(st)}setServerTelemetry(){throw ke(st)}getServerTelemetry(){throw ke(st)}setAuthorityMetadata(){throw ke(st)}getAuthorityMetadata(){throw ke(st)}getAuthorityMetadataKeys(){throw ke(st)}setThrottlingCache(){throw ke(st)}getThrottlingCache(){throw ke(st)}removeItem(){throw ke(st)}getKeys(){throw ke(st)}getAccountKeys(){throw ke(st)}getTokenKeys(){throw ke(st)}generateCredentialKey(){throw ke(st)}generateAccountKey(){throw ke(st)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const qn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-10-09 */const q={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},ms=new Map([[q.AcquireTokenByCode,"ATByCode"],[q.AcquireTokenByRefreshToken,"ATByRT"],[q.AcquireTokenSilent,"ATS"],[q.AcquireTokenSilentAsync,"ATSAsync"],[q.AcquireTokenPopup,"ATPopup"],[q.AcquireTokenRedirect,"ATRedirect"],[q.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[q.CryptoOptsSignJwt,"CryptoSignJwt"],[q.SilentCacheClientAcquireToken,"SltCacheClientAT"],[q.SilentIframeClientAcquireToken,"SltIframeClientAT"],[q.SilentRefreshClientAcquireToken,"SltRClientAT"],[q.SsoSilent,"SsoSlt"],[q.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[q.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[q.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[q.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[q.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[q.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[q.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[q.BrokerHandhshake,"BrokerHandshake"],[q.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[q.AcquireTokenByBroker,"ATByBroker"],[q.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[q.RefreshTokenClientAcquireToken,"RTClientAT"],[q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[q.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[q.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[q.AcquireTokenFromCache,"ATFromCache"],[q.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[q.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[q.AcquireTokenBySilentIframe,"ATBySltIframe"],[q.InitializeBaseRequest,"InitBaseReq"],[q.InitializeSilentRequest,"InitSltReq"],[q.InitializeClientApplication,"InitClientApplication"],[q.InitializeCache,"InitCache"],[q.ImportExistingCache,"importCache"],[q.SetUserData,"setUserData"],[q.LocalStorageUpdated,"localStorageUpdated"],[q.SilentIframeClientTokenHelper,"SIClientTHelper"],[q.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[q.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[q.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[q.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[q.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[q.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[q.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[q.GetAuthCodeUrl,"GetAuthCodeUrl"],[q.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[q.HandleCodeResponse,"HandleCodeResp"],[q.HandleResponseEar,"HandleRespEar"],[q.HandleResponseCode,"HandleRespCode"],[q.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[q.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[q.AuthClientAcquireToken,"AuthClientAT"],[q.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[q.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[q.PopTokenGenerateCnf,"PopTGenCnf"],[q.PopTokenGenerateKid,"PopTGenKid"],[q.HandleServerTokenResponse,"HandleServerTRes"],[q.DeserializeResponse,"DeserializeRes"],[q.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[q.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[q.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[q.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[q.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[q.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[q.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[q.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[q.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[q.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[q.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[q.AcquireTokenByCodeAsync,"ATByCodeAsync"],[q.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[q.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[q.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[q.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[q.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[q.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[q.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[q.NativeGenerateAuthResult,"NtvGenAuthRes"],[q.RemoveHiddenIframe,"RemoveHiddenIframe"],[q.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[q.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[q.GeneratePkceCodes,"GenPkceCodes"],[q.GenerateCodeVerifier,"GenCodeVerifier"],[q.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[q.Sha256Digest,"Sha256Digest"],[q.GetRandomValues,"GetRandomValues"],[q.GenerateHKDF,"genHKDF"],[q.GenerateBaseKey,"genBaseKey"],[q.Base64Decode,"b64Decode"],[q.UrlEncodeArr,"urlEncArr"],[q.Encrypt,"encrypt"],[q.Decrypt,"decrypt"],[q.GenerateEarKey,"genEarKey"],[q.DecryptEarResponse,"decryptEarResp"]]),Ml={InProgress:1,Completed:2},rd=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]);/*! @azure/msal-common v15.13.0 2025-10-09 */class od{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class la{generateId(){return"callback-id"}startMeasurement(i,u){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Ml.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:i,startTimeMs:Date.now(),correlationId:u||""},measurement:new od}}startPerformanceMeasurement(){return new od}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Pl={tokenRenewalOffsetSeconds:J,preventCorsPreflight:!1},Hg={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:t.LogLevel.Info,correlationId:e.EMPTY_STRING},Ar={claimsBasedCachingEnabled:!1},ua={async sendGetRequestAsync(){throw ke(st)},async sendPostRequestAsync(){throw ke(st)}},id={sku:e.SKU,version:xl,cpu:e.EMPTY_STRING,os:e.EMPTY_STRING},Dl={clientSecret:e.EMPTY_STRING,clientAssertion:void 0},BC={azureCloudInstance:tc.None,tenant:`${e.DEFAULT_COMMON_TENANT}`},df={application:{appName:"",appVersion:""}};function hf({authOptions:S,systemOptions:i,loggerOptions:u,cacheOptions:g,storageInterface:w,networkInterface:T,cryptoInterface:R,clientCredentials:L,libraryInfo:K,telemetry:ne,serverTelemetryManager:ve,persistencePlugin:Se,serializableCache:je}){const Ye={...Hg,...u};return{authOptions:Ll(S),systemOptions:{...Pl,...i},loggerOptions:Ye,cacheOptions:{...Ar,...g},storageInterface:w||new Si(S.clientId,Cn,new Pn(Ye),new la),networkInterface:T||ua,cryptoInterface:R||Cn,clientCredentials:L||Dl,libraryInfo:{...id,...K},telemetry:{...df,...ne},serverTelemetryManager:ve||null,persistencePlugin:Se||null,serializableCache:je||null}}function Ll(S){return{clientCapabilities:[],azureCloudOptions:BC,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...S}}function Ul(S){return S.authOptions.authority.options.protocolMode===qn.OIDC}/*! @azure/msal-common v15.13.0 2025-10-09 */const to={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-10-09 */function sd(S,i){if(!S)throw ke(ge);try{const u=i(S);return JSON.parse(u)}catch{throw ke(de)}}function sc(S){if(!S)throw ke(de);const i=S.split(N.CLIENT_INFO_SEPARATOR,2);return{uid:i[0],utid:i.length<2?e.EMPTY_STRING:i[1]}}/*! @azure/msal-common v15.13.0 2025-10-09 */const da="client_id",ad="redirect_uri",zC="response_type",FC="response_mode",KC="grant_type",GC="claims",qC="scope",Bg="refresh_token",$C="state",VC="nonce",YC="prompt",QC="code",ff="code_challenge",WC="code_challenge_method",XC="code_verifier",JC="client-request-id",zg="x-client-SKU",ZC="x-client-VER",ew="x-client-OS",tw="x-client-CPU",nw="x-client-current-telemetry",rw="x-client-last-telemetry",ow="x-ms-lib-capability",iw="x-app-name",sw="x-app-ver",aw="post_logout_redirect_uri",mf="id_token_hint",jl="client_secret",cw="client_assertion",Fg="client_assertion_type",gf="token_type",pf="req_cnf",yf="return_spa_code",Kg="nativebroker",ac="logout_hint",lw="sid",uw="login_hint",dw="domain_hint",Gg="x-client-xtra-sku",Hl="brk_client_id",gs="brk_redirect_uri",ha="instance_aware",hw="ear_jwk",cd="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-10-09 */function Bl(S,i,u){if(!i)return;const g=S.get(da);g&&S.has(Hl)&&u?.addFields({embeddedClientId:g,embeddedRedirectUri:S.get(ad)},i)}function ld(S,i){S.set(zC,i)}function vf(S,i){S.set(FC,i||x.QUERY)}function Cf(S){S.set(Kg,"1")}function ud(S,i,u=!0,g=a){u&&!g.includes("openid")&&!i.includes("openid")&&g.push("openid");const w=u?[...i||[],...g]:i||[],T=new rn(w);S.set(qC,T.printScopes())}function dd(S,i){S.set(da,i)}function hd(S,i){S.set(ad,i)}function fw(S,i){S.set(aw,i)}function mw(S,i){S.set(mf,i)}function gw(S,i){S.set(dw,i)}function fd(S,i){S.set(uw,i)}function md(S,i){S.set(d.CCS_HEADER,`UPN:${i}`)}function $n(S,i){S.set(d.CCS_HEADER,`Oid:${i.uid}@${i.utid}`)}function cc(S,i){S.set(lw,i)}function gd(S,i,u){const g=bd(i,u);try{JSON.parse(g)}catch{throw bt(br)}S.set(GC,g)}function pd(S,i){S.set(JC,i)}function yd(S,i){S.set(zg,i.sku),S.set(ZC,i.version),i.os&&S.set(ew,i.os),i.cpu&&S.set(tw,i.cpu)}function vd(S,i){i?.appName&&S.set(iw,i.appName),i?.appVersion&&S.set(sw,i.appVersion)}function wf(S,i){S.set(YC,i)}function qg(S,i){i&&S.set($C,i)}function lc(S,i){S.set(VC,i)}function Cd(S,i,u){if(i&&u)S.set(ff,i),S.set(WC,u);else throw bt(Er)}function zl(S,i){S.set(QC,i)}function bf(S,i){S.set(Bg,i)}function $g(S,i){S.set(XC,i)}function ps(S,i){S.set(jl,i)}function fa(S,i){i&&S.set(cw,i)}function wd(S,i){i&&S.set(Fg,i)}function Ef(S,i){S.set(KC,i)}function xi(S){S.set(O,"1")}function Af(S){S.has(ha)||S.set(ha,"true")}function _i(S,i){Object.entries(i).forEach(([u,g])=>{!S.has(u)&&g&&S.set(u,g)})}function bd(S,i){let u;if(!S)u={};else try{u=JSON.parse(S)}catch{throw bt(br)}return i&&i.length>0&&(u.hasOwnProperty(y.ACCESS_TOKEN)||(u[y.ACCESS_TOKEN]={}),u[y.ACCESS_TOKEN][y.XMS_CC]={values:i}),JSON.stringify(u)}function Tf(S,i){i&&(S.set(gf,Y.POP),S.set(pf,i))}function Vg(S,i){i&&(S.set(gf,Y.SSH),S.set(pf,i))}function Yg(S,i){S.set(nw,i.generateCurrentRequestHeaderValue()),S.set(rw,i.generateLastRequestHeaderValue())}function Sf(S){S.set(ow,ee.X_MS_LIB_CAPABILITY_VALUE)}function Qg(S,i){S.set(ac,i)}function uc(S,i,u){S.has(Hl)||S.set(Hl,i),S.has(gs)||S.set(gs,u)}function bo(S,i){S.set(hw,encodeURIComponent(i)),S.set(cd,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Wg(S,i){Object.entries(i).forEach(([u,g])=>{g&&S.set(u,g)})}/*! @azure/msal-common v15.13.0 2025-10-09 */const un={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-10-09 */function no(S){return S.hasOwnProperty("authorization_endpoint")&&S.hasOwnProperty("token_endpoint")&&S.hasOwnProperty("issuer")&&S.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-10-09 */function dc(S){return S.hasOwnProperty("tenant_discovery_endpoint")&&S.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-10-09 */function xf(S){return S.hasOwnProperty("error")&&S.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-10-09 */const Vn=(S,i,u,g,w)=>(...T)=>{u.trace(`Executing function ${i}`);const R=g?.startMeasurement(i,w);if(w){const L=i+"CallCount";g?.incrementFields({[L]:1},w)}try{const L=S(...T);return R?.end({success:!0}),u.trace(`Returning result from ${i}`),L}catch(L){u.trace(`Error occurred in ${i}`);try{u.trace(JSON.stringify(L))}catch{u.trace("Unable to print error message.")}throw R?.end({success:!1},L),L}},Ae=(S,i,u,g,w)=>(...T)=>{u.trace(`Executing function ${i}`);const R=g?.startMeasurement(i,w);if(w){const L=i+"CallCount";g?.incrementFields({[L]:1},w)}return g?.setPreQueueTime(i,w),S(...T).then(L=>(u.trace(`Returning result from ${i}`),R?.end({success:!0}),L)).catch(L=>{u.trace(`Error occurred in ${i}`);try{u.trace(JSON.stringify(L))}catch{u.trace("Unable to print error message.")}throw R?.end({success:!1},L),L})};/*! @azure/msal-common v15.13.0 2025-10-09 */class hc{constructor(i,u,g,w){this.networkInterface=i,this.logger=u,this.performanceClient=g,this.correlationId=w}async detectRegion(i,u){this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryDetectRegion,this.correlationId);let g=i;if(g)u.region_source=ce.ENVIRONMENT_VARIABLE;else{const w=hc.IMDS_OPTIONS;try{const T=await Ae(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(e.IMDS_VERSION,w);if(T.status===n.SUCCESS&&(g=T.body,u.region_source=ce.IMDS),T.status===n.BAD_REQUEST){const R=await Ae(this.getCurrentVersion.bind(this),q.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(w);if(!R)return u.region_source=ce.FAILED_AUTO_DETECTION,null;const L=await Ae(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(R,w);L.status===n.SUCCESS&&(g=L.body,u.region_source=ce.IMDS)}}catch{return u.region_source=ce.FAILED_AUTO_DETECTION,null}}return g||(u.region_source=ce.FAILED_AUTO_DETECTION),g||null}async getRegionFromIMDS(i,u){return this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${e.IMDS_ENDPOINT}?api-version=${i}&format=text`,u,e.IMDS_TIMEOUT)}async getCurrentVersion(i){this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const u=await this.networkInterface.sendGetRequestAsync(`${e.IMDS_ENDPOINT}?format=json`,i);return u.status===n.BAD_REQUEST&&u.body&&u.body["newest-versions"]&&u.body["newest-versions"].length>0?u.body["newest-versions"][0]:null}catch{return null}}}hc.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-10-09 */function bn(){return Math.round(new Date().getTime()/1e3)}function _f(S){return S.getTime()/1e3}function ro(S){return S?new Date(Number(S)*1e3):new Date}function $o(S,i){const u=Number(S)||0;return bn()+i>u}function pw(S,i){const u=Number(S)+i*24*60*60*1e3;return Date.now()>u}function Tr(S){return Number(S)>bn()}/*! @azure/msal-common v15.13.0 2025-10-09 */function fc(S,i,u,g,w){return{credentialType:M.ID_TOKEN,homeAccountId:S,environment:i,clientId:g,secret:u,realm:w,lastUpdatedAt:Date.now().toString()}}function oo(S,i,u,g,w,T,R,L,K,ne,ve,Se,je,Ye,Ut){const jt={homeAccountId:S,credentialType:M.ACCESS_TOKEN,secret:u,cachedAt:bn().toString(),expiresOn:R.toString(),extendedExpiresOn:L.toString(),environment:i,clientId:g,realm:w,target:T,tokenType:ve||Y.BEARER,lastUpdatedAt:Date.now().toString()};if(Se&&(jt.userAssertionHash=Se),ne&&(jt.refreshOn=ne.toString()),Ye&&(jt.requestedClaims=Ye,jt.requestedClaimsHash=Ut),jt.tokenType?.toLowerCase()!==Y.BEARER.toLowerCase())switch(jt.credentialType=M.ACCESS_TOKEN_WITH_AUTH_SCHEME,jt.tokenType){case Y.POP:const hr=wn(u,K);if(!hr?.cnf?.kid)throw ke(vo);jt.keyId=hr.cnf.kid;break;case Y.SSH:jt.keyId=je}return jt}function kf(S,i,u,g,w,T,R){const L={credentialType:M.REFRESH_TOKEN,homeAccountId:S,environment:i,clientId:g,secret:u,lastUpdatedAt:Date.now().toString()};return T&&(L.userAssertionHash=T),w&&(L.familyId=w),R&&(L.expiresOn=R.toString()),L}function mc(S){return S.hasOwnProperty("homeAccountId")&&S.hasOwnProperty("environment")&&S.hasOwnProperty("credentialType")&&S.hasOwnProperty("clientId")&&S.hasOwnProperty("secret")}function ys(S){return S?mc(S)&&S.hasOwnProperty("realm")&&S.hasOwnProperty("target")&&(S.credentialType===M.ACCESS_TOKEN||S.credentialType===M.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function If(S){return S?mc(S)&&S.hasOwnProperty("realm")&&S.credentialType===M.ID_TOKEN:!1}function Ed(S){return S?mc(S)&&S.credentialType===M.REFRESH_TOKEN:!1}function gc(S,i){const u=S.indexOf(Q.CACHE_KEY)===0;let g=!0;return i&&(g=i.hasOwnProperty("failedRequests")&&i.hasOwnProperty("errors")&&i.hasOwnProperty("cacheHits")),u&&g}function pc(S,i){let u=!1;S&&(u=S.indexOf(ee.THROTTLING_PREFIX)===0);let g=!0;return i&&(g=i.hasOwnProperty("throttleTime")),u&&g}function Ad({environment:S,clientId:i}){return[j,S,i].join(N.CACHE_KEY_SEPARATOR).toLowerCase()}function Td(S,i){return i?S.indexOf(j)===0&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("environment"):!1}function io(S,i){return i?S.indexOf(H.CACHE_KEY)===0&&i.hasOwnProperty("aliases")&&i.hasOwnProperty("preferred_cache")&&i.hasOwnProperty("preferred_network")&&i.hasOwnProperty("canonical_authority")&&i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("aliasesFromNetwork")&&i.hasOwnProperty("endpointsFromNetwork")&&i.hasOwnProperty("expiresAt")&&i.hasOwnProperty("jwks_uri"):!1}function zr(){return bn()+H.REFRESH_TIME_SECONDS}function Vo(S,i,u){S.authorization_endpoint=i.authorization_endpoint,S.token_endpoint=i.token_endpoint,S.end_session_endpoint=i.end_session_endpoint,S.issuer=i.issuer,S.endpointsFromNetwork=u,S.jwks_uri=i.jwks_uri}function Eo(S,i,u){S.aliases=i.aliases,S.preferred_cache=i.preferred_cache,S.preferred_network=i.preferred_network,S.aliasesFromNetwork=u}function Yo(S){return S.expiresAt<=bn()}/*! @azure/msal-common v15.13.0 2025-10-09 */class dn{constructor(i,u,g,w,T,R,L,K){this.canonicalAuthority=i,this._canonicalAuthority.validateAsUri(),this.networkInterface=u,this.cacheManager=g,this.authorityOptions=w,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=T,this.performanceClient=L,this.correlationId=R,this.managedIdentity=K||!1,this.regionDiscovery=new hc(u,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(i){if(i.HostNameAndPort.endsWith(e.CIAM_AUTH_URL))return un.Ciam;const u=i.PathSegments;if(u.length)switch(u[0].toLowerCase()){case e.ADFS:return un.Adfs;case e.DSTS:return un.Dsts}return un.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(i){this._canonicalAuthority=new Et(i),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ke(le)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ke(le)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ke(le)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ke(ls);return this.replacePath(this.metadata.end_session_endpoint)}else throw ke(le)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ke(le)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ke(le)}canReplaceTenant(i){return i.PathSegments.length===1&&!dn.reservedTenantDomains.has(i.PathSegments[0])&&this.getAuthorityType(i)===un.Default&&this.protocolMode!==qn.OIDC}replaceTenant(i){return i.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(i){let u=i;const w=new Et(this.metadata.canonical_authority).getUrlComponents(),T=w.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((L,K)=>{let ne=T[K];if(K===0&&this.canReplaceTenant(w)){const ve=new Et(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];ne!==ve&&(this.logger.verbose(`Replacing tenant domain name ${ne} with id ${ve}`),ne=ve)}L!==ne&&(u=u.replace(`/${ne}/`,`/${L}/`))}),this.replaceTenant(u)}get defaultOpenIdConfigurationEndpoint(){const i=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===un.Adfs||this.protocolMode===qn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(i)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(q.AuthorityResolveEndpointsAsync,this.correlationId);const i=this.getCurrentMetadataEntity(),u=await Ae(this.updateCloudDiscoveryMetadata.bind(this),q.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,i.preferred_network);const g=await Ae(this.updateEndpointMetadata.bind(this),q.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.updateCachedMetadata(i,u,{source:g}),this.performanceClient?.addFields({cloudDiscoverySource:u,authorityEndpointSource:g},this.correlationId)}getCurrentMetadataEntity(){let i=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return i||(i={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:zr(),jwks_uri:""}),i}updateCachedMetadata(i,u,g){u!==V.CACHE&&g?.source!==V.CACHE&&(i.expiresAt=zr(),i.canonical_authority=this.canonicalAuthority);const w=this.cacheManager.generateAuthorityMetadataCacheKey(i.preferred_cache);this.cacheManager.setAuthorityMetadata(w,i),this.metadata=i}async updateEndpointMetadata(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateEndpointMetadata,this.correlationId);const u=this.updateEndpointMetadataFromLocalSources(i);if(u){if(u.source===V.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&u.metadata){const w=await Ae(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(u.metadata);Vo(i,w,!1),i.canonical_authority=this.canonicalAuthority}return u.source}let g=await Ae(this.getEndpointMetadataFromNetwork.bind(this),q.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(g)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(g=await Ae(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(g)),Vo(i,g,!0),V.NETWORK;throw ke(De,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(i){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const u=this.getEndpointMetadataFromConfig();if(u)return this.logger.verbose("Found endpoint metadata in authority configuration"),Vo(i,u,!1),{source:V.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const w=this.getEndpointMetadataFromHardcodedValues();if(w)return Vo(i,w,!1),{source:V.HARDCODED_VALUES,metadata:w};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const g=Yo(i);return this.isAuthoritySameType(i)&&i.endpointsFromNetwork&&!g?(this.logger.verbose("Found endpoint metadata in the cache."),{source:V.CACHE}):(g&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(i){return new Et(i.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw bt(oa)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(q.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const i={},u=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${u}`);try{const g=await this.networkInterface.sendGetRequestAsync(u,i);return no(g.body)?g.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(g){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${g}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in lf?lf[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const u=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(u){if(u!==e.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=te.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=u,dn.replaceWithRegionalInformation(i,u);const g=await Ae(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),q.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(g)return this.regionDiscoveryMetadata.region_outcome=te.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=g,dn.replaceWithRegionalInformation(i,g);this.regionDiscoveryMetadata.region_outcome=te.AUTO_DETECTION_REQUESTED_FAILED}return i}async updateCloudDiscoveryMetadata(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const u=this.updateCloudDiscoveryMetadataFromLocalSources(i);if(u)return u;const g=await Ae(this.getCloudDiscoveryMetadataFromNetwork.bind(this),q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(g)return Eo(i,g,!0),V.NETWORK;throw bt(Ci)}updateCloudDiscoveryMetadataFromLocalSources(i){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||e.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||e.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${i.canonical_authority||e.NOT_APPLICABLE}`);const u=this.getCloudDiscoveryMetadataFromConfig();if(u)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Eo(i,u,!1),V.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const w=uf(this.hostnameAndPort);if(w)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Eo(i,w,!1),V.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const g=Yo(i);return this.isAuthoritySameType(i)&&i.aliasesFromNetwork&&!g?(this.logger.verbose("Found cloud discovery metadata in the cache."),V.CACHE):(g&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===un.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),dn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const i=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),u=ic(i.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),u)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),u;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),bt(Hr)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),dn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const i=`${e.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,u={};let g=null;try{const w=await this.networkInterface.sendGetRequestAsync(i,u);let T,R;if(dc(w.body))T=w.body,R=T.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${T.tenant_discovery_endpoint}`);else if(xf(w.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${w.status}`),T=w.body,T.error===e.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${T.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${T.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),R=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),g=ic(R,this.hostnameAndPort)}catch(w){if(w instanceof W)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${w.errorCode}
Error Description: ${w.errorMessage}`);else{const T=w;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${T.name}
Error Description: ${T.message}`)}return null}return g||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),g=dn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),g}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(u=>u&&Et.getDomainFromUrl(u).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(i,u){let g;if(u&&u.azureCloudInstance!==tc.None){const w=u.tenant?u.tenant:e.DEFAULT_COMMON_TENANT;g=`${u.azureCloudInstance}/${w}/`}return g||i}static createCloudDiscoveryMetadataFromHost(i){return{preferred_network:i,preferred_cache:i,aliases:[i]}}getPreferredCache(){if(this.managedIdentity)return e.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ke(le)}isAlias(i){return this.metadata.aliases.indexOf(i)>-1}isAliasOfKnownMicrosoftAuthority(i){return jg.has(i)}static isPublicCloudAuthority(i){return e.KNOWN_PUBLIC_CLOUDS.indexOf(i)>=0}static buildRegionalAuthorityString(i,u,g){const w=new Et(i);w.validateAsUri();const T=w.getUrlComponents();let R=`${u}.${T.HostNameAndPort}`;this.isPublicCloudAuthority(T.HostNameAndPort)&&(R=`${u}.${e.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const L=Et.constructAuthorityUriFromObject({...w.getUrlComponents(),HostNameAndPort:R}).urlString;return g?`${L}?${g}`:L}static replaceWithRegionalInformation(i,u){const g={...i};return g.authorization_endpoint=dn.buildRegionalAuthorityString(g.authorization_endpoint,u),g.token_endpoint=dn.buildRegionalAuthorityString(g.token_endpoint,u),g.end_session_endpoint&&(g.end_session_endpoint=dn.buildRegionalAuthorityString(g.end_session_endpoint,u)),g}static transformCIAMAuthority(i){let u=i;const w=new Et(i).getUrlComponents();if(w.PathSegments.length===0&&w.HostNameAndPort.endsWith(e.CIAM_AUTH_URL)){const T=w.HostNameAndPort.split(".")[0];u=`${u}${T}${e.AAD_TENANT_DOMAIN_SUFFIX}`}return u}}dn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",p.COMMON,p.CONSUMERS,p.ORGANIZATIONS]);function Xg(S){const g=new Et(S).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(g){case p.COMMON:case p.ORGANIZATIONS:case p.CONSUMERS:return;default:return g}}function Sd(S){return S.endsWith(e.FORWARD_SLASH)?S:`${S}${e.FORWARD_SLASH}`}function xd(S){const i=S.cloudDiscoveryMetadata;let u;if(i)try{u=JSON.parse(i)}catch{throw bt(Hr)}return{canonicalAuthority:S.authority?Sd(S.authority):void 0,knownAuthorities:S.knownAuthorities,cloudDiscoveryMetadata:u}}/*! @azure/msal-common v15.13.0 2025-10-09 */async function er(S,i,u,g,w,T,R){R?.addQueueMeasurement(q.AuthorityFactoryCreateDiscoveredInstance,T);const L=dn.transformCIAMAuthority(Sd(S)),K=new dn(L,i,u,g,w,T,R);try{return await Ae(K.resolveEndpointsAsync.bind(K),q.AuthorityResolveEndpointsAsync,w,R,T)(),K}catch{throw ke(le)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class kt extends W{constructor(i,u,g,w,T){super(i,u,g),this.name="ServerError",this.errorNo=w,this.status=T,Object.setPrototypeOf(this,kt.prototype)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function vt(S,i,u){return{clientId:S,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:u,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid,embeddedClientId:i.embeddedClientId||i.tokenBodyParameters?.clientId}}/*! @azure/msal-common v15.13.0 2025-10-09 */class tr{static generateThrottlingStorageKey(i){return`${ee.THROTTLING_PREFIX}.${JSON.stringify(i)}`}static preProcess(i,u,g){const w=tr.generateThrottlingStorageKey(u),T=i.getThrottlingCache(w);if(T){if(T.throttleTime<Date.now()){i.removeItem(w,g);return}throw new kt(T.errorCodes?.join(" ")||e.EMPTY_STRING,T.errorMessage,T.subError)}}static postProcess(i,u,g,w){if(tr.checkResponseStatus(g)||tr.checkResponseForRetryAfter(g)){const T={throttleTime:tr.calculateThrottleTime(parseInt(g.headers[d.RETRY_AFTER])),error:g.body.error,errorCodes:g.body.error_codes,errorMessage:g.body.error_description,subError:g.body.suberror};i.setThrottlingCache(tr.generateThrottlingStorageKey(u),T,w)}}static checkResponseStatus(i){return i.status===429||i.status>=500&&i.status<600}static checkResponseForRetryAfter(i){return i.headers?i.headers.hasOwnProperty(d.RETRY_AFTER)&&(i.status<200||i.status>=300):!1}static calculateThrottleTime(i){const u=i<=0?0:i,g=Date.now()/1e3;return Math.floor(Math.min(g+(u||ee.DEFAULT_THROTTLE_TIME_SECONDS),g+ee.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(i,u,g,w){const T=vt(u,g,w),R=this.generateThrottlingStorageKey(T);i.removeItem(R,g.correlationId)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Fr extends W{constructor(i,u,g){super(i.errorCode,i.errorMessage,i.subError),Object.setPrototypeOf(this,Fr.prototype),this.name="NetworkError",this.error=i,this.httpStatus=u,this.responseHeaders=g}}function ma(S,i,u,g){return S.errorMessage=`${S.errorMessage}, additionalErrorInfo: error.name:${g?.name}, error.message:${g?.message}`,new Fr(S,i,u)}/*! @azure/msal-common v15.13.0 2025-10-09 */class ki{constructor(i,u){this.config=hf(i),this.logger=new Pn(this.config.loggerOptions,ec,xl),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=u}createTokenRequestHeaders(i){const u={};if(u[d.CONTENT_TYPE]=e.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case to.HOME_ACCOUNT_ID:try{const g=sc(i.credential);u[d.CCS_HEADER]=`Oid:${g.uid}@${g.utid}`}catch(g){this.logger.verbose("Could not parse home account ID for CCS Header: "+g)}break;case to.UPN:u[d.CCS_HEADER]=`UPN: ${i.credential}`;break}return u}async executePostToTokenEndpoint(i,u,g,w,T,R){R&&this.performanceClient?.addQueueMeasurement(R,T);const L=await this.sendPostRequest(w,i,{body:u,headers:g},T);return this.config.serverTelemetryManager&&L.status<500&&L.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),L}async sendPostRequest(i,u,g,w){tr.preProcess(this.cacheManager,i,w);let T;try{T=await Ae(this.networkClient.sendPostRequestAsync.bind(this.networkClient),q.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,w)(u,g);const R=T.headers||{};this.performanceClient?.addFields({refreshTokenSize:T.body.refresh_token?.length||0,httpVerToken:R[d.X_MS_HTTP_VERSION]||"",requestId:R[d.X_MS_REQUEST_ID]||""},w)}catch(R){if(R instanceof Fr){const L=R.responseHeaders;throw L&&this.performanceClient?.addFields({httpVerToken:L[d.X_MS_HTTP_VERSION]||"",requestId:L[d.X_MS_REQUEST_ID]||"",contentTypeHeader:L[d.CONTENT_TYPE]||void 0,contentLengthHeader:L[d.CONTENT_LENGTH]||void 0,httpStatus:R.httpStatus},w),R.error}throw R instanceof W?R:ke(Ce)}return tr.postProcess(this.cacheManager,i,T,w),T}async updateAuthority(i,u){this.performanceClient?.addQueueMeasurement(q.UpdateTokenEndpointAuthority,u);const g=`https://${i}/${this.authority.tenant}/`,w=await er(g,this.networkClient,this.cacheManager,this.authority.options,this.logger,u,this.performanceClient);this.authority=w}createTokenQueryParameters(i){const u=new Map;return i.embeddedClientId&&uc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenQueryParameters&&_i(u,i.tokenQueryParameters),pd(u,i.correlationId),Bl(u,i.correlationId,this.performanceClient),oc(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function Rf(S){return S&&(S.tid||S.tfp||S.acr)||null}/*! @azure/msal-common v15.13.0 2025-10-09 */class Sr{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(i=>[i.tenantId,i])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(i,u,g){const w=new Sr;u.authorityType===un.Adfs?w.authorityType=k.ADFS_ACCOUNT_TYPE:u.protocolMode===qn.OIDC?w.authorityType=k.GENERIC_ACCOUNT_TYPE:w.authorityType=k.MSSTS_ACCOUNT_TYPE;let T;i.clientInfo&&g&&(T=sd(i.clientInfo,g),T.xms_tdbr&&(w.dataBoundary=T.xms_tdbr==="EU"?"EU":"None")),w.clientInfo=i.clientInfo,w.homeAccountId=i.homeAccountId,w.nativeAccountId=i.nativeAccountId;const R=i.environment||u&&u.getPreferredCache();if(!R)throw ke(_n);w.environment=R,w.realm=T?.utid||Rf(i.idTokenClaims)||"",w.localAccountId=T?.uid||i.idTokenClaims?.oid||i.idTokenClaims?.sub||"";const L=i.idTokenClaims?.preferred_username||i.idTokenClaims?.upn,K=i.idTokenClaims?.emails?i.idTokenClaims.emails[0]:null;if(w.username=L||K||"",w.loginHint=i.idTokenClaims?.login_hint,w.name=i.idTokenClaims?.name||"",w.cloudGraphHostName=i.cloudGraphHostName,w.msGraphHost=i.msGraphHost,i.tenantProfiles)w.tenantProfiles=i.tenantProfiles;else{const ne=Ei(i.homeAccountId,w.localAccountId,w.realm,i.idTokenClaims);w.tenantProfiles=[ne]}return w}static createFromAccountInfo(i,u,g){const w=new Sr;return w.authorityType=i.authorityType||k.GENERIC_ACCOUNT_TYPE,w.homeAccountId=i.homeAccountId,w.localAccountId=i.localAccountId,w.nativeAccountId=i.nativeAccountId,w.realm=i.tenantId,w.environment=i.environment,w.username=i.username,w.name=i.name,w.loginHint=i.loginHint,w.cloudGraphHostName=u,w.msGraphHost=g,w.tenantProfiles=Array.from(i.tenantProfiles?.values()||[]),w.dataBoundary=i.dataBoundary,w}static generateHomeAccountId(i,u,g,w,T){if(!(u===un.Adfs||u===un.Dsts)){if(i)try{const R=sd(i,w.base64Decode);if(R.uid&&R.utid)return`${R.uid}.${R.utid}`}catch{}g.warning("No client info in response")}return T?.sub||""}static isAccountEntity(i){return i?i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("realm")&&i.hasOwnProperty("localAccountId")&&i.hasOwnProperty("username")&&i.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(i,u,g){if(!i||!u)return!1;let w=!0;if(g){const T=i.idTokenClaims||{},R=u.idTokenClaims||{};w=T.iat===R.iat&&T.nonce===R.nonce}return i.homeAccountId===u.homeAccountId&&i.localAccountId===u.localAccountId&&i.username===u.username&&i.tenantId===u.tenantId&&i.loginHint===u.loginHint&&i.environment===u.environment&&i.nativeAccountId===u.nativeAccountId&&w}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Ao="no_tokens_found",Ii="native_account_unavailable",Fl="refresh_token_expired",vs="ux_not_allowed",_d="interaction_required",Cs="consent_required",Qo="login_required",xr="bad_token";var Ri=Object.freeze({__proto__:null,badToken:xr,consentRequired:Cs,interactionRequired:_d,loginRequired:Qo,nativeAccountUnavailable:Ii,noTokensFound:Ao,refreshTokenExpired:Fl,uxNotAllowed:vs});/*! @azure/msal-common v15.13.0 2025-10-09 */const kd=[_d,Cs,Qo,xr,vs],Nf=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],ws={[Ao]:"No refresh token found in the cache. Please sign-in.",[Ii]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Fl]:"Refresh token has expired.",[xr]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[vs]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Id={noTokensFoundError:{code:Ao,desc:ws[Ao]},native_account_unavailable:{code:Ii,desc:ws[Ii]},bad_token:{code:xr,desc:ws[xr]}};class kn extends W{constructor(i,u,g,w,T,R,L,K){super(i,u,g),Object.setPrototypeOf(this,kn.prototype),this.timestamp=w||e.EMPTY_STRING,this.traceId=T||e.EMPTY_STRING,this.correlationId=R||e.EMPTY_STRING,this.claims=L||e.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=K}}function Yn(S,i,u){const g=!!S&&kd.indexOf(S)>-1,w=!!u&&Nf.indexOf(u)>-1,T=!!i&&kd.some(R=>i.indexOf(R)>-1);return g||T||w}function ga(S){return new kn(S,ws[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */class pa{static setRequestState(i,u,g){const w=pa.generateLibraryState(i,g);return u?`${w}${e.RESOURCE_DELIM}${u}`:w}static generateLibraryState(i,u){if(!i)throw ke(cs);const g={id:i.createNewGuid()};u&&(g.meta=u);const w=JSON.stringify(g);return i.base64Encode(w)}static parseRequestState(i,u){if(!i)throw ke(cs);if(!u)throw ke(be);try{const g=u.split(e.RESOURCE_DELIM),w=g[0],T=g.length>1?g.slice(1).join(e.RESOURCE_DELIM):e.EMPTY_STRING,R=i.base64Decode(w),L=JSON.parse(R);return{userRequestState:T||e.EMPTY_STRING,libraryState:L}}catch{throw ke(be)}}}/*! @azure/msal-common v15.13.0 2025-10-09 */const yw={SW:"sw"};class ya{constructor(i,u){this.cryptoUtils=i,this.performanceClient=u}async generateCnf(i,u){this.performanceClient?.addQueueMeasurement(q.PopTokenGenerateCnf,i.correlationId);const g=await Ae(this.generateKid.bind(this),q.PopTokenGenerateCnf,u,this.performanceClient,i.correlationId)(i),w=this.cryptoUtils.base64UrlEncode(JSON.stringify(g));return{kid:g.kid,reqCnfString:w}}async generateKid(i){return this.performanceClient?.addQueueMeasurement(q.PopTokenGenerateKid,i.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(i),xms_ksl:yw.SW}}async signPopToken(i,u,g){return this.signPayload(i,u,g)}async signPayload(i,u,g,w){const{resourceRequestMethod:T,resourceRequestUri:R,shrClaims:L,shrNonce:K,shrOptions:ne}=g,Se=(R?new Et(R):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:i,ts:bn(),m:T?.toUpperCase(),u:Se?.HostNameAndPort,nonce:K||this.cryptoUtils.createNewGuid(),p:Se?.AbsolutePath,q:Se?.QueryString?[[],Se.QueryString]:void 0,client_claims:L||void 0,...w},u,ne,g.correlationId)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class vw{constructor(i,u){this.cache=i,this.hasChanged=u}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Xt{constructor(i,u,g,w,T,R,L){this.clientId=i,this.cacheStorage=u,this.cryptoObj=g,this.logger=w,this.serializableCache=T,this.persistencePlugin=R,this.performanceClient=L}validateTokenResponse(i,u){if(i.error||i.error_description||i.suberror){const g=`Error(s): ${i.error_codes||e.NOT_AVAILABLE} - Timestamp: ${i.timestamp||e.NOT_AVAILABLE} - Description: ${i.error_description||e.NOT_AVAILABLE} - Correlation ID: ${i.correlation_id||e.NOT_AVAILABLE} - Trace ID: ${i.trace_id||e.NOT_AVAILABLE}`,w=i.error_codes?.length?i.error_codes[0]:void 0,T=new kt(i.error,g,i.suberror,w,i.status);if(u&&i.status&&i.status>=n.SERVER_ERROR_RANGE_START&&i.status<=n.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${T}`);return}else if(u&&i.status&&i.status>=n.CLIENT_ERROR_RANGE_START&&i.status<=n.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${T}`);return}throw Yn(i.error,i.error_description,i.suberror)?new kn(i.error,i.error_description,i.suberror,i.timestamp||e.EMPTY_STRING,i.trace_id||e.EMPTY_STRING,i.correlation_id||e.EMPTY_STRING,i.claims||e.EMPTY_STRING,w):T}}async handleServerTokenResponse(i,u,g,w,T,R,L,K,ne){this.performanceClient?.addQueueMeasurement(q.HandleServerTokenResponse,i.correlation_id);let ve;if(i.id_token){if(ve=wn(i.id_token||e.EMPTY_STRING,this.cryptoObj.base64Decode),T&&T.nonce&&ve.nonce!==T.nonce)throw ke(fe);if(w.maxAge||w.maxAge===0){const Ut=ve.auth_time;if(!Ut)throw ke(Me);Il(Ut,w.maxAge)}}this.homeAccountIdentifier=Sr.generateHomeAccountId(i.client_info||e.EMPTY_STRING,u.authorityType,this.logger,this.cryptoObj,ve);let Se;T&&T.state&&(Se=pa.parseRequestState(this.cryptoObj,T.state)),i.key_id=i.key_id||w.sshKid||void 0;const je=this.generateCacheRecord(i,u,g,w,ve,R,T);let Ye;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),Ye=new vw(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(Ye)),L&&!K&&je.account){const Ut=this.cacheStorage.generateAccountKey(je.account.getAccountInfo());if(!this.cacheStorage.getAccount(Ut,w.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Xt.generateAuthenticationResult(this.cryptoObj,u,je,!1,w,ve,Se,void 0,ne)}await this.cacheStorage.saveCacheRecord(je,w.correlationId,w.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&Ye&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(Ye))}return Xt.generateAuthenticationResult(this.cryptoObj,u,je,!1,w,ve,Se,i,ne)}generateCacheRecord(i,u,g,w,T,R,L){const K=u.getPreferredCache();if(!K)throw ke(_n);const ne=Rf(T);let ve,Se;i.id_token&&T&&(ve=fc(this.homeAccountIdentifier,K,i.id_token,this.clientId,ne||""),Se=Kl(this.cacheStorage,u,this.homeAccountIdentifier,this.cryptoObj.base64Decode,w.correlationId,T,i.client_info,K,ne,L,void 0,this.logger));let je=null;if(i.access_token){const jt=i.scope?rn.fromString(i.scope):new rn(w.scopes||[]),hr=(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,$i=(typeof i.ext_expires_in=="string"?parseInt(i.ext_expires_in,10):i.ext_expires_in)||0,fr=(typeof i.refresh_in=="string"?parseInt(i.refresh_in,10):i.refresh_in)||void 0,Yc=g+hr,gm=Yc+$i,lh=fr&&fr>0?g+fr:void 0;je=oo(this.homeAccountIdentifier,K,i.access_token,this.clientId,ne||u.tenant||"",jt.printScopes(),Yc,gm,this.cryptoObj.base64Decode,lh,i.token_type,R,i.key_id,w.claims,w.requestedClaimsHash)}let Ye=null;if(i.refresh_token){let jt;if(i.refresh_token_expires_in){const hr=typeof i.refresh_token_expires_in=="string"?parseInt(i.refresh_token_expires_in,10):i.refresh_token_expires_in;jt=g+hr}Ye=kf(this.homeAccountIdentifier,K,i.refresh_token,this.clientId,i.foci,R,jt)}let Ut=null;return i.foci&&(Ut={clientId:this.clientId,environment:K,familyId:i.foci}),{account:Se,idToken:ve,accessToken:je,refreshToken:Ye,appMetadata:Ut}}static async generateAuthenticationResult(i,u,g,w,T,R,L,K,ne){let ve=e.EMPTY_STRING,Se=[],je=null,Ye,Ut,jt=e.EMPTY_STRING;if(g.accessToken){if(g.accessToken.tokenType===Y.POP&&!T.popKid){const Yc=new ya(i),{secret:gm,keyId:lh}=g.accessToken;if(!lh)throw ke(Bo);ve=await Yc.signPopToken(gm,lh,T)}else ve=g.accessToken.secret;Se=rn.fromString(g.accessToken.target).asArray(),je=ro(g.accessToken.expiresOn),Ye=ro(g.accessToken.extendedExpiresOn),g.accessToken.refreshOn&&(Ut=ro(g.accessToken.refreshOn))}g.appMetadata&&(jt=g.appMetadata.familyId===U?U:"");const hr=R?.oid||R?.sub||"",$i=R?.tid||"";K?.spa_accountid&&g.account&&(g.account.nativeAccountId=K?.spa_accountid);const fr=g.account?kl(g.account.getAccountInfo(),void 0,R,g.idToken?.secret):null;return{authority:u.canonicalAuthority,uniqueId:hr,tenantId:$i,scopes:Se,account:fr,idToken:g?.idToken?.secret||"",idTokenClaims:R||{},accessToken:ve,fromCache:w,expiresOn:je,extExpiresOn:Ye,refreshOn:Ut,correlationId:T.correlationId,requestId:ne||e.EMPTY_STRING,familyId:jt,tokenType:g.accessToken?.tokenType||e.EMPTY_STRING,state:L?L.userRequestState:e.EMPTY_STRING,cloudGraphHostName:g.account?.cloudGraphHostName||e.EMPTY_STRING,msGraphHost:g.account?.msGraphHost||e.EMPTY_STRING,code:K?.spa_code,fromNativeBroker:!1}}}function Kl(S,i,u,g,w,T,R,L,K,ne,ve,Se){Se?.verbose("setCachedAccount called");const Ye=S.getAccountKeys().find(fr=>fr.startsWith(u));let Ut=null;Ye&&(Ut=S.getAccount(Ye,w));const jt=Ut||Sr.createAccount({homeAccountId:u,idTokenClaims:T,clientInfo:R,environment:L,cloudGraphHostName:ne?.cloud_graph_host_name,msGraphHost:ne?.msgraph_host,nativeAccountId:ve},i,g),hr=jt.tenantProfiles||[],$i=K||jt.realm;if($i&&!hr.find(fr=>fr.tenantId===$i)){const fr=Ei(u,jt.localAccountId,$i,T);hr.push(fr)}return jt.tenantProfiles=hr,jt}/*! @azure/msal-common v15.13.0 2025-10-09 */async function yc(S,i,u){return typeof S=="string"?S:S({clientId:i,tokenEndpoint:u})}/*! @azure/msal-common v15.13.0 2025-10-09 */class vc extends ki{constructor(i,u){super(i,u),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(i,u){if(this.performanceClient?.addQueueMeasurement(q.AuthClientAcquireToken,i.correlationId),!i.code)throw ke(lt);const g=bn(),w=await Ae(this.executeTokenRequest.bind(this),q.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(this.authority,i),T=w.headers?.[d.X_MS_REQUEST_ID],R=new Xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return R.validateTokenResponse(w.body),Ae(R.handleServerTokenResponse.bind(R),q.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(w.body,this.authority,g,i,u,void 0,void 0,void 0,T)}getLogoutUri(i){if(!i)throw bt(ds);const u=this.createLogoutUrlQueryString(i);return Et.appendQueryString(this.authority.endSessionEndpoint,u)}async executeTokenRequest(i,u){this.performanceClient?.addQueueMeasurement(q.AuthClientExecuteTokenRequest,u.correlationId);const g=this.createTokenQueryParameters(u),w=Et.appendQueryString(i.tokenEndpoint,g),T=await Ae(this.createTokenRequestBody.bind(this),q.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,u.correlationId)(u);let R;if(u.clientInfo)try{const ne=sd(u.clientInfo,this.cryptoUtils.base64Decode);R={credential:`${ne.uid}${N.CLIENT_INFO_SEPARATOR}${ne.utid}`,type:to.HOME_ACCOUNT_ID}}catch(ne){this.logger.verbose("Could not parse client info for CCS Header: "+ne)}const L=this.createTokenRequestHeaders(R||u.ccsCredential),K=vt(this.config.authOptions.clientId,u);return Ae(this.executePostToTokenEndpoint.bind(this),q.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,u.correlationId)(w,T,L,K,u.correlationId,q.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(i){this.performanceClient?.addQueueMeasurement(q.AuthClientCreateTokenRequestBody,i.correlationId);const u=new Map;if(dd(u,i.embeddedClientId||i.tokenBodyParameters?.[da]||this.config.authOptions.clientId),this.includeRedirectUri)hd(u,i.redirectUri);else if(!i.redirectUri)throw bt(us);if(ud(u,i.scopes,!0,this.oidcDefaultScopes),zl(u,i.code),yd(u,this.config.libraryInfo),vd(u,this.config.telemetry.application),Sf(u),this.serverTelemetryManager&&!Ul(this.config)&&Yg(u,this.serverTelemetryManager),i.codeVerifier&&$g(u,i.codeVerifier),this.config.clientCredentials.clientSecret&&ps(u,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const w=this.config.clientCredentials.clientAssertion;fa(u,await yc(w.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),wd(u,w.assertionType)}if(Ef(u,I.AUTHORIZATION_CODE_GRANT),xi(u),i.authenticationScheme===Y.POP){const w=new ya(this.cryptoUtils,this.performanceClient);let T;i.popKid?T=this.cryptoUtils.encodeKid(i.popKid):T=(await Ae(w.generateCnf.bind(w),q.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,Tf(u,T)}else if(i.authenticationScheme===Y.SSH)if(i.sshJwk)Vg(u,i.sshJwk);else throw bt(Ko);(!Gn.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gd(u,i.claims,this.config.authOptions.clientCapabilities);let g;if(i.clientInfo)try{const w=sd(i.clientInfo,this.cryptoUtils.base64Decode);g={credential:`${w.uid}${N.CLIENT_INFO_SEPARATOR}${w.utid}`,type:to.HOME_ACCOUNT_ID}}catch(w){this.logger.verbose("Could not parse client info for CCS Header: "+w)}else g=i.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&g)switch(g.type){case to.HOME_ACCOUNT_ID:try{const w=sc(g.credential);$n(u,w)}catch(w){this.logger.verbose("Could not parse home account ID for CCS Header: "+w)}break;case to.UPN:md(u,g.credential);break}return i.embeddedClientId&&uc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenBodyParameters&&_i(u,i.tokenBodyParameters),i.enableSpaAuthorizationCode&&(!i.tokenBodyParameters||!i.tokenBodyParameters[yf])&&_i(u,{[yf]:"1"}),Bl(u,i.correlationId,this.performanceClient),oc(u)}createLogoutUrlQueryString(i){const u=new Map;return i.postLogoutRedirectUri&&fw(u,i.postLogoutRedirectUri),i.correlationId&&pd(u,i.correlationId),i.idTokenHint&&mw(u,i.idTokenHint),i.state&&qg(u,i.state),i.logoutHint&&Qg(u,i.logoutHint),i.extraQueryParameters&&_i(u,i.extraQueryParameters),this.config.authOptions.instanceAware&&Af(u),oc(u,this.config.authOptions.encodeExtraQueryParams,i.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Of=300;class Cc extends ki{constructor(i,u){super(i,u)}async acquireToken(i){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireToken,i.correlationId);const u=bn(),g=await Ae(this.executeTokenRequest.bind(this),q.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(i,this.authority),w=g.headers?.[d.X_MS_REQUEST_ID],T=new Xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return T.validateTokenResponse(g.body),Ae(T.handleServerTokenResponse.bind(T),q.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(g.body,this.authority,u,i,void 0,void 0,!0,i.forceCache,w)}async acquireTokenByRefreshToken(i){if(!i)throw bt(nn);if(this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireTokenByRefreshToken,i.correlationId),!i.account)throw ke(Ht);if(this.cacheManager.isAppMetadataFOCI(i.account.environment))try{return await Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!0)}catch(g){const w=g instanceof kn&&g.errorCode===Ao,T=g instanceof kt&&g.errorCode===se.INVALID_GRANT_ERROR&&g.subError===se.CLIENT_MISMATCH_ERROR;if(w||T)return Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1);throw g}return Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1)}async acquireTokenWithCachedRefreshToken(i,u){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,i.correlationId);const g=Vn(this.cacheManager.getRefreshToken.bind(this.cacheManager),q.CacheManagerGetRefreshToken,this.logger,this.performanceClient,i.correlationId)(i.account,u,i.correlationId,void 0,this.performanceClient);if(!g)throw ga(Ao);if(g.expiresOn&&$o(g.expiresOn,i.refreshTokenExpirationOffsetSeconds||Of))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(g.expiresOn)},i.correlationId),ga(Fl);const w={...i,refreshToken:g.secret,authenticationScheme:i.authenticationScheme||Y.BEARER,ccsCredential:{credential:i.account.homeAccountId,type:to.HOME_ACCOUNT_ID}};try{return await Ae(this.acquireToken.bind(this),q.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(w)}catch(T){if(T instanceof kn&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(g.expiresOn)},i.correlationId),T.subError===xr)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const R=this.cacheManager.generateCredentialKey(g);this.cacheManager.removeRefreshToken(R,i.correlationId)}throw T}}async executeTokenRequest(i,u){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientExecuteTokenRequest,i.correlationId);const g=this.createTokenQueryParameters(i),w=Et.appendQueryString(u.tokenEndpoint,g),T=await Ae(this.createTokenRequestBody.bind(this),q.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,i.correlationId)(i),R=this.createTokenRequestHeaders(i.ccsCredential),L=vt(this.config.authOptions.clientId,i);return Ae(this.executePostToTokenEndpoint.bind(this),q.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,i.correlationId)(w,T,R,L,i.correlationId,q.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(i){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientCreateTokenRequestBody,i.correlationId);const u=new Map;if(dd(u,i.embeddedClientId||i.tokenBodyParameters?.[da]||this.config.authOptions.clientId),i.redirectUri&&hd(u,i.redirectUri),ud(u,i.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Ef(u,I.REFRESH_TOKEN_GRANT),xi(u),yd(u,this.config.libraryInfo),vd(u,this.config.telemetry.application),Sf(u),this.serverTelemetryManager&&!Ul(this.config)&&Yg(u,this.serverTelemetryManager),bf(u,i.refreshToken),this.config.clientCredentials.clientSecret&&ps(u,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const g=this.config.clientCredentials.clientAssertion;fa(u,await yc(g.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),wd(u,g.assertionType)}if(i.authenticationScheme===Y.POP){const g=new ya(this.cryptoUtils,this.performanceClient);let w;i.popKid?w=this.cryptoUtils.encodeKid(i.popKid):w=(await Ae(g.generateCnf.bind(g),q.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,Tf(u,w)}else if(i.authenticationScheme===Y.SSH)if(i.sshJwk)Vg(u,i.sshJwk);else throw bt(Ko);if((!Gn.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&gd(u,i.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&i.ccsCredential)switch(i.ccsCredential.type){case to.HOME_ACCOUNT_ID:try{const g=sc(i.ccsCredential.credential);$n(u,g)}catch(g){this.logger.verbose("Could not parse home account ID for CCS Header: "+g)}break;case to.UPN:md(u,i.ccsCredential.credential);break}return i.embeddedClientId&&uc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenBodyParameters&&_i(u,i.tokenBodyParameters),Bl(u,i.correlationId,this.performanceClient),oc(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class wc extends ki{constructor(i,u){super(i,u)}async acquireCachedToken(i){this.performanceClient?.addQueueMeasurement(q.SilentFlowClientAcquireCachedToken,i.correlationId);let u=re.NOT_APPLICABLE;if(i.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Gn.isEmptyObj(i.claims))throw this.setCacheOutcome(re.FORCE_REFRESH_OR_CLAIMS,i.correlationId),ke(On);if(!i.account)throw ke(Ht);const g=i.account.tenantId||Xg(i.authority),w=this.cacheManager.getTokenKeys(),T=this.cacheManager.getAccessToken(i.account,i,w,g);if(T){if(Tr(T.cachedAt)||$o(T.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(re.CACHED_ACCESS_TOKEN_EXPIRED,i.correlationId),ke(On);T.refreshOn&&$o(T.refreshOn,0)&&(u=re.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(re.NO_CACHED_ACCESS_TOKEN,i.correlationId),ke(On);const R=i.authority||this.authority.getPreferredCache(),L={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(i.account),i.correlationId),accessToken:T,idToken:this.cacheManager.getIdToken(i.account,i.correlationId,w,g,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(R)};return this.setCacheOutcome(u,i.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ae(this.generateResultFromCacheRecord.bind(this),q.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,i.correlationId)(L,i),u]}setCacheOutcome(i,u){this.serverTelemetryManager?.setCacheOutcome(i),this.performanceClient?.addFields({cacheOutcome:i},u),i!==re.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${i}`)}async generateResultFromCacheRecord(i,u){this.performanceClient?.addQueueMeasurement(q.SilentFlowClientGenerateResultFromCacheRecord,u.correlationId);let g;if(i.idToken&&(g=wn(i.idToken.secret,this.config.cryptoInterface.base64Decode)),u.maxAge||u.maxAge===0){const w=g?.auth_time;if(!w)throw ke(Me);Il(w,u.maxAge)}return Xt.generateAuthenticationResult(this.cryptoUtils,this.authority,i,!0,u,g)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Cw={sendGetRequestAsync:()=>Promise.reject(ke(st)),sendPostRequestAsync:()=>Promise.reject(ke(st))};/*! @azure/msal-common v15.13.0 2025-10-09 */function Jg(S,i,u,g){const w=i.correlationId,T=new Map;dd(T,i.embeddedClientId||i.extraQueryParameters?.[da]||S.clientId);const R=[...i.scopes||[],...i.extraScopesToConsent||[]];if(ud(T,R,!0,S.authority.options.OIDCOptions?.defaultScopes),hd(T,i.redirectUri),pd(T,w),vf(T,i.responseMode),xi(T),i.prompt&&(wf(T,i.prompt),g?.addFields({prompt:i.prompt},w)),i.domainHint&&(gw(T,i.domainHint),g?.addFields({domainHintFromRequest:!0},w)),i.prompt!==v.SELECT_ACCOUNT)if(i.sid&&i.prompt===v.NONE)u.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),cc(T,i.sid),g?.addFields({sidFromRequest:!0},w);else if(i.account){const L=Rd(i.account);let K=ep(i.account);if(K&&i.domainHint&&(u.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),K=null),K){u.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),fd(T,K),g?.addFields({loginHintFromClaim:!0},w);try{const ne=sc(i.account.homeAccountId);$n(T,ne)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(L&&i.prompt===v.NONE){u.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),cc(T,L),g?.addFields({sidFromClaim:!0},w);try{const ne=sc(i.account.homeAccountId);$n(T,ne)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i.loginHint)u.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),fd(T,i.loginHint),md(T,i.loginHint),g?.addFields({loginHintFromRequest:!0},w);else if(i.account.username){u.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),fd(T,i.account.username),g?.addFields({loginHintFromUpn:!0},w);try{const ne=sc(i.account.homeAccountId);$n(T,ne)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else i.loginHint&&(u.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),fd(T,i.loginHint),md(T,i.loginHint),g?.addFields({loginHintFromRequest:!0},w));else u.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return i.nonce&&lc(T,i.nonce),i.state&&qg(T,i.state),(i.claims||S.clientCapabilities&&S.clientCapabilities.length>0)&&gd(T,i.claims,S.clientCapabilities),i.embeddedClientId&&uc(T,S.clientId,S.redirectUri),S.instanceAware&&(!i.extraQueryParameters||!Object.keys(i.extraQueryParameters).includes(ha))&&Af(T),T}function Mf(S,i,u,g){const w=oc(i,u,g);return Et.appendQueryString(S.authorizationEndpoint,w)}function Zg(S,i){if(bs(S,i),!S.code)throw ke(ea);return S}function bs(S,i){if(!S.state||!i)throw S.state?ke(Le,"Cached State"):ke(Le,"Server State");let u,g;try{u=decodeURIComponent(S.state)}catch{throw ke(be,S.state)}try{g=decodeURIComponent(i)}catch{throw ke(be,S.state)}if(u!==g)throw ke(Oe);if(S.error||S.error_description||S.suberror){const w=Pf(S);throw Yn(S.error,S.error_description,S.suberror)?new kn(S.error||"",S.error_description,S.suberror,S.timestamp||"",S.trace_id||"",S.correlation_id||"",S.claims||"",w):new kt(S.error||"",S.error_description,S.suberror,w)}}function Pf(S){const i="code=",u=S.error_uri?.lastIndexOf(i);return u&&u>=0?S.error_uri?.substring(u+i.length):void 0}function Rd(S){return S.idTokenClaims?.sid||null}function ep(S){return S.loginHint||S.idTokenClaims?.login_hint||null}/*! @azure/msal-common v15.13.0 2025-10-09 */class Gl{constructor(i){this.headers=i}getShrNonce(){const i=this.headers[d.AuthenticationInfo];if(i){const g=this.parseChallenges(i);if(g.nextnonce)return g.nextnonce;throw bt(wo)}const u=this.headers[d.WWWAuthenticate];if(u){const g=this.parseChallenges(u);if(g.nonce)return g.nonce;throw bt(wo)}throw bt(Go)}parseChallenges(i){const u=i.indexOf(" "),g=i.substr(u+1).split(","),w={};return g.forEach(T=>{const[R,L]=T.split("=");w[R]=unescape(L.replace(/['"]+/g,e.EMPTY_STRING))}),w}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Df=",",ql="|";function Lf(S){const{skus:i,libraryName:u,libraryVersion:g,extensionName:w,extensionVersion:T}=S,R=new Map([[0,[u,g]],[2,[w,T]]]);let L=[];if(i?.length){if(L=i.split(Df),L.length<4)return i}else L=Array.from({length:4},()=>ql);return R.forEach((K,ne)=>{K.length===2&&K[0]?.length&&K[1]?.length&&tp({skuArr:L,index:ne,skuName:K[0],skuVersion:K[1]})}),L.join(Df)}function tp(S){const{skuArr:i,index:u,skuName:g,skuVersion:w}=S;u>=i.length||(i[u]=[g,w].join(ql))}class Es{constructor(i,u){this.cacheOutcome=re.NOT_APPLICABLE,this.cacheManager=u,this.apiId=i.apiId,this.correlationId=i.correlationId,this.wrapperSKU=i.wrapperSKU||e.EMPTY_STRING,this.wrapperVer=i.wrapperVer||e.EMPTY_STRING,this.telemetryCacheKey=Q.CACHE_KEY+N.CACHE_KEY_SEPARATOR+i.clientId}generateCurrentRequestHeaderValue(){const i=`${this.apiId}${Q.VALUE_SEPARATOR}${this.cacheOutcome}`,u=[this.wrapperSKU,this.wrapperVer],g=this.getNativeBrokerErrorCode();g?.length&&u.push(`broker_error=${g}`);const w=u.join(Q.VALUE_SEPARATOR),T=this.getRegionDiscoveryFields(),R=[i,T].join(Q.VALUE_SEPARATOR);return[Q.SCHEMA_VERSION,R,w].join(Q.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const i=this.getLastRequests(),u=Es.maxErrorsToSend(i),g=i.failedRequests.slice(0,2*u).join(Q.VALUE_SEPARATOR),w=i.errors.slice(0,u).join(Q.VALUE_SEPARATOR),T=i.errors.length,R=u<T?Q.OVERFLOW_TRUE:Q.OVERFLOW_FALSE,L=[T,R].join(Q.VALUE_SEPARATOR);return[Q.SCHEMA_VERSION,i.cacheHits,g,w,L].join(Q.CATEGORY_SEPARATOR)}cacheFailedRequest(i){const u=this.getLastRequests();u.errors.length>=Q.MAX_CACHED_ERRORS&&(u.failedRequests.shift(),u.failedRequests.shift(),u.errors.shift()),u.failedRequests.push(this.apiId,this.correlationId),i instanceof Error&&i&&i.toString()?i instanceof W?i.subError?u.errors.push(i.subError):i.errorCode?u.errors.push(i.errorCode):u.errors.push(i.toString()):u.errors.push(i.toString()):u.errors.push(Q.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,u,this.correlationId)}incrementCacheHits(){const i=this.getLastRequests();return i.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId),i.cacheHits}getLastRequests(){const i={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||i}clearTelemetryCache(){const i=this.getLastRequests(),u=Es.maxErrorsToSend(i),g=i.errors.length;if(u===g)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const w={failedRequests:i.failedRequests.slice(u*2),errors:i.errors.slice(u),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,w,this.correlationId)}}static maxErrorsToSend(i){let u,g=0,w=0;const T=i.errors.length;for(u=0;u<T;u++){const R=i.failedRequests[2*u]||e.EMPTY_STRING,L=i.failedRequests[2*u+1]||e.EMPTY_STRING,K=i.errors[u]||e.EMPTY_STRING;if(w+=R.toString().length+L.toString().length+K.length+3,w<Q.MAX_LAST_HEADER_BYTES)g+=1;else break}return g}getRegionDiscoveryFields(){const i=[];return i.push(this.regionUsed||e.EMPTY_STRING),i.push(this.regionSource||e.EMPTY_STRING),i.push(this.regionOutcome||e.EMPTY_STRING),i.join(",")}updateRegionDiscoveryMetadata(i){this.regionUsed=i.region_used,this.regionSource=i.region_source,this.regionOutcome=i.region_outcome}setCacheOutcome(i){this.cacheOutcome=i}setNativeBrokerErrorCode(i){const u=this.getLastRequests();u.nativeBrokerErrorCode=i,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,u,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const i=this.getLastRequests();delete i.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}static makeExtraSkuString(i){return Lf(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Uf="missing_kid_error",bc="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-10-09 */const np={[Uf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[bc]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Nd extends W{constructor(i,u){super(i,u),this.name="JoseHeaderError",Object.setPrototypeOf(this,Nd.prototype)}}function Ni(S){return new Nd(S,np[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */class $l{constructor(i){this.typ=i.typ,this.alg=i.alg,this.kid=i.kid}static getShrHeaderString(i){if(!i.kid)throw Ni(Uf);if(!i.alg)throw Ni(bc);const u=new $l({typ:i.typ||G.Pop,kid:i.kid,alg:i.alg});return JSON.stringify(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function jf(S,i,u){u&&u.push({name:i.get(S.name)||S.name})}function As(S,i,u,g){if(!u?.length)return;const w=Ye=>Ye.length?Ye[Ye.length-1]:void 0,T=i.get(S.name)||S.name;if(w(u)?.name!==T)return;const L=u?.pop();if(!L)return;const K=g instanceof W?g.errorCode:g instanceof Error?g.name:void 0,ne=g instanceof W?g.subError:void 0;K&&L.childErr!==K&&(L.err=K,ne&&(L.subErr=ne)),delete L.name,delete L.childErr;const ve={...L,dur:S.durationMs};S.success||(ve.fail=1);const Se=w(u);if(!Se)return{[T]:ve};K&&(Se.childErr=K);let je;if(!Se[T])je=T;else{const Ye=Object.keys(Se).filter(Ut=>Ut.startsWith(T)).length;je=`${T}_${Ye+1}`}return Se[je]=ve,Se}function Ts(S,i,u,g=5){if(S instanceof Error){if(S instanceof W){u.errorCode=S.errorCode,u.subErrorCode=S.subError,(S instanceof kt||S instanceof kn)&&(u.serverErrorNo=S.errorNo);return}else if(S instanceof Ti){u.errorCode=S.errorCode;return}else if(u.errorStack?.length){i.trace("PerformanceClient.addErrorStack: Stack already exist",u.correlationId);return}else if(!S.stack?.length){i.trace("PerformanceClient.addErrorStack: Input stack is empty",u.correlationId);return}}else{i.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",u.correlationId);return}S.stack&&(u.errorStack=Vl(S.stack,g)),u.errorName=S.name}function Vl(S,i){if(i<0)return[];const u=S.split(`
`)||[],g=[],w=u[0];w.startsWith("TypeError: Cannot read property")||w.startsWith("TypeError: Cannot read properties of")||w.startsWith("TypeError: Cannot set property")||w.startsWith("TypeError: Cannot set properties of")||w.endsWith("is not a function")?g.push(Yl(w)):(w.startsWith("SyntaxError")||w.startsWith("TypeError"))&&g.push(Yl(w.replace(/['].*[']|["].*["]/g,"<redacted>")));for(let T=1;T<u.length&&!(g.length>=i);T++){const R=u[T];g.push(Yl(R))}return g}function Yl(S){const i=S.lastIndexOf(" ")+1;if(i<1)return S;const u=S.substring(i);let g=u.lastIndexOf("/");return g=g<0?u.lastIndexOf("\\"):g,g>=0?(S.substring(0,i)+"("+u.substring(g+1)+(u.charAt(u.length-1)===")"?"":")")).trimStart():S.trimStart()}function Hf(S){const i=S?.idTokenClaims;if(i?.tfp||i?.acr)return"B2C";if(i?.tid){if(i?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}class Ql{constructor(i,u,g,w,T,R,L,K){this.authority=u,this.libraryName=w,this.libraryVersion=T,this.applicationTelemetry=R,this.clientId=i,this.logger=g,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=L||new Set;for(const ne of rd)this.intFields.add(ne);this.abbreviations=K||new Map;for(const[ne,ve]of ms)this.abbreviations.set(ne,ve)}startPerformanceMeasurement(i,u){return{}}getPreQueueTime(i,u){const g=this.preQueueTimeByCorrelationId.get(u);if(g){if(g.name!==i){this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${i}, unable to add queue measurement`);return}}else{this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${u}, unable to add queue measurement`);return}return g.time}calculateQueuedTime(i,u){return i<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${i}`),0):u<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${u}`),0):u<i?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):u-i}addQueueMeasurement(i,u,g,w){if(!u){this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${i}, cannot add queue measurement`);return}if(g===0)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${i} is ${g}`);else if(!g){this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${i}`);return}const T={eventName:i,queueTime:w?0:g,manuallyCompleted:w},R=this.queueMeasurements.get(u);if(R)R.push(T),this.queueMeasurements.set(u,R);else{this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${u} to queue measurements`);const L=[T];this.queueMeasurements.set(u,L)}this.preQueueTimeByCorrelationId.delete(u)}startMeasurement(i,u){const g=u||this.generateId();u||this.logger.info(`PerformanceClient: No correlation id provided for ${i}, generating`,g),this.logger.trace(`PerformanceClient: Performance measurement started for ${i}`,g);const w={eventId:this.generateId(),status:Ml.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:i,startTimeMs:Date.now(),correlationId:g,appName:this.applicationTelemetry?.appName,appVersion:this.applicationTelemetry?.appVersion};return this.cacheEventByCorrelationId(w),jf(w,this.abbreviations,this.eventStack.get(g)),{end:(T,R,L)=>this.endMeasurement({...w,...T},R,L),discard:()=>this.discardMeasurements(w.correlationId),add:T=>this.addFields(T,w.correlationId),increment:T=>this.incrementFields(T,w.correlationId),event:w,measurement:new od}}endMeasurement(i,u,g){const w=this.eventsByCorrelationId.get(i.correlationId);if(!w)return this.logger.trace(`PerformanceClient: Measurement not found for ${i.eventId}`,i.correlationId),null;const T=i.eventId===w.eventId;let R={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};i.durationMs=Math.round(i.durationMs||this.getDurationMs(i.startTimeMs));const L=JSON.stringify(As(i,this.abbreviations,this.eventStack.get(w.correlationId),u));if(T?(R=this.getQueueInfo(i.correlationId),this.discardMeasurements(w.correlationId)):w.incompleteSubMeasurements?.delete(i.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${i.name}: ${i.durationMs} ms`,i.correlationId),u&&Ts(u,this.logger,w),!T)return w[i.name+"DurationMs"]=Math.floor(i.durationMs),{...w};T&&!u&&(w.errorCode||w.subErrorCode)&&(this.logger.trace(`PerformanceClient: Remove error and sub-error codes for root event ${i.name} as intermediate error was successfully handled`,i.correlationId),w.errorCode=void 0,w.subErrorCode=void 0);let K={...w,...i},ne=0;return K.incompleteSubMeasurements?.forEach(ve=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${ve.name} found for ${i.name}`,K.correlationId),ne++}),K.incompleteSubMeasurements=void 0,K={...K,queuedTimeMs:R.totalQueueTime,queuedCount:R.totalQueueCount,queuedManuallyCompletedCount:R.manuallyCompletedCount,status:Ml.Completed,incompleteSubsCount:ne,context:L},g&&(K.accountType=Hf(g),K.dataBoundary=g.dataBoundary),this.truncateIntegralFields(K),this.emitEvents([K],i.correlationId),K}addFields(i,u){this.logger.trace("PerformanceClient: Updating static fields");const g=this.eventsByCorrelationId.get(u);g?this.eventsByCorrelationId.set(u,{...g,...i}):this.logger.trace("PerformanceClient: Event not found for",u)}incrementFields(i,u){this.logger.trace("PerformanceClient: Updating counters");const g=this.eventsByCorrelationId.get(u);if(g)for(const w in i){if(!g.hasOwnProperty(w))g[w]=0;else if(isNaN(Number(g[w])))return;g[w]+=i[w]}else this.logger.trace("PerformanceClient: Event not found for",u)}cacheEventByCorrelationId(i){const u=this.eventsByCorrelationId.get(i.correlationId);u?(this.logger.trace(`PerformanceClient: Performance measurement for ${i.name} added/updated`,i.correlationId),u.incompleteSubMeasurements=u.incompleteSubMeasurements||new Map,u.incompleteSubMeasurements.set(i.eventId,{name:i.name,startTimeMs:i.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${i.name} started`,i.correlationId),this.eventsByCorrelationId.set(i.correlationId,{...i}),this.eventStack.set(i.correlationId,[]))}getQueueInfo(i){const u=this.queueMeasurements.get(i);u||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${i}`);let g=0,w=0,T=0;return u?.forEach(R=>{g+=R.queueTime,w++,T+=R.manuallyCompleted?1:0}),{totalQueueTime:g,totalQueueCount:w,manuallyCompletedCount:T}}discardMeasurements(i){this.logger.trace("PerformanceClient: Performance measurements discarded",i),this.eventsByCorrelationId.delete(i),this.logger.trace("PerformanceClient: QueueMeasurements discarded",i),this.queueMeasurements.delete(i),this.logger.trace("PerformanceClient: Pre-queue times discarded",i),this.preQueueTimeByCorrelationId.delete(i),this.logger.trace("PerformanceClient: Event stack discarded",i),this.eventStack.delete(i)}addPerformanceCallback(i){for(const[g,w]of this.callbacks)if(w.toString()===i.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${g}`),g;const u=this.generateId();return this.callbacks.set(u,i),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${u}`),u}removePerformanceCallback(i){const u=this.callbacks.delete(i);return u?this.logger.verbose(`PerformanceClient: Performance callback ${i} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${i} not removed.`),u}emitEvents(i,u){this.logger.verbose("PerformanceClient: Emitting performance events",u),this.callbacks.forEach((g,w)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${w}`,u),g.apply(null,[i])})}truncateIntegralFields(i){this.intFields.forEach(u=>{u in i&&typeof i[u]=="number"&&(i[u]=Math.floor(i[u]))})}getDurationMs(i){const u=Date.now()-i;return u<0?u:0}}const Wo="pkce_not_created",Wl="ear_jwk_empty",Od="ear_jwe_empty",To="crypto_nonexistent",Xo="empty_navigate_uri",Ec="hash_empty_error",Ss="no_state_in_hash",va="hash_does_not_contain_known_properties",so="unable_to_parse_state",at="state_interaction_type_mismatch",St="interaction_in_progress",on="popup_window_error",xs="empty_window_error",Kr="user_cancelled",Jo="monitor_popup_timeout",_s="monitor_window_timeout",Oi="redirect_in_iframe",Zo="block_iframe_reload",Xl="block_nested_popups",sn="iframe_closed_prematurely",Mi="silent_logout_unsupported",Ca="no_account_error",Jl="silent_prompt_value_error",Ac="no_token_request_cache_error",Zl="unable_to_parse_token_request_cache_error",Tc="auth_request_not_set_error",Sc="invalid_cache_type",Pi="non_browser_environment",hn="database_not_open",qt="no_network_connectivity",wa="post_request_failed",Di="get_request_failed",Li="failed_to_parse_response",ba="unable_to_load_token",_r="crypto_key_not_found",ks="auth_code_required",Ea="auth_code_or_nativeAccountId_required",Aa="spa_code_and_nativeAccountId_present",Ta="database_unavailable",xc="unable_to_acquire_token_from_native_platform",_c="native_handshake_timeout",kc="native_extension_not_installed",Sa="native_connection_not_established",Ui="uninitialized_public_client_application",xa="native_prompt_not_supported",Ic="invalid_base64_string",eu="invalid_pop_token_request",Md="failed_to_build_headers",Pd="failed_to_parse_headers",Rc="failed_to_decrypt_ear_response",_a="timed_out";var rp=Object.freeze({__proto__:null,authCodeOrNativeAccountIdRequired:Ea,authCodeRequired:ks,authRequestNotSetError:Tc,blockIframeReload:Zo,blockNestedPopups:Xl,cryptoKeyNotFound:_r,cryptoNonExistent:To,databaseNotOpen:hn,databaseUnavailable:Ta,earJweEmpty:Od,earJwkEmpty:Wl,emptyNavigateUri:Xo,emptyWindowError:xs,failedToBuildHeaders:Md,failedToDecryptEarResponse:Rc,failedToParseHeaders:Pd,failedToParseResponse:Li,getRequestFailed:Di,hashDoesNotContainKnownProperties:va,hashEmptyError:Ec,iframeClosedPrematurely:sn,interactionInProgress:St,invalidBase64String:Ic,invalidCacheType:Sc,invalidPopTokenRequest:eu,monitorPopupTimeout:Jo,monitorWindowTimeout:_s,nativeConnectionNotEstablished:Sa,nativeExtensionNotInstalled:kc,nativeHandshakeTimeout:_c,nativePromptNotSupported:xa,noAccountError:Ca,noNetworkConnectivity:qt,noStateInHash:Ss,noTokenRequestCacheError:Ac,nonBrowserEnvironment:Pi,pkceNotCreated:Wo,popupWindowError:on,postRequestFailed:wa,redirectInIframe:Oi,silentLogoutUnsupported:Mi,silentPromptValueError:Jl,spaCodeAndNativeAccountIdPresent:Aa,stateInteractionTypeMismatch:at,timedOut:_a,unableToAcquireTokenFromNativePlatform:xc,unableToLoadToken:ba,unableToParseState:so,unableToParseTokenRequestCacheError:Zl,uninitializedPublicClientApplication:Ui,userCancelled:Kr});const ei="For more visit: aka.ms/msaljs/browser-errors",ot={[Wo]:"The PKCE code challenge and verifier could not be generated.",[Wl]:"No EAR encryption key provided. This is unexpected.",[Od]:"Server response does not contain ear_jwe property. This is unexpected.",[To]:"The crypto object or function is not available.",[Xo]:"Navigation URI is empty. Please check stack trace for more info.",[Ec]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ei}`,[Ss]:"Hash does not contain state. Please verify that the request originated from msal.",[va]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ei}`,[so]:"Unable to parse state. Please verify that the request originated from msal.",[at]:"Hash contains state but the interaction type does not match the caller.",[St]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ei}`,[on]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[xs]:"window.open returned null or undefined window object.",[Kr]:"User cancelled the flow.",[Jo]:`Token acquisition in popup failed due to timeout.  ${ei}`,[_s]:`Token acquisition in iframe failed due to timeout.  ${ei}`,[Oi]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Zo]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ei}`,[Xl]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[sn]:"The iframe being monitored was closed prematurely.",[Mi]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Ca]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Jl]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Ac]:"No token request found in cache.",[Zl]:"The cached token request could not be parsed.",[Tc]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Sc]:"Invalid cache type",[Pi]:"Login and token requests are not supported in non-browser environments.",[hn]:"Database is not open!",[qt]:"No network connectivity. Check your internet connection.",[wa]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Di]:"Network request failed. Please check the network trace to determine root cause.",[Li]:"Failed to parse network response. Check network trace.",[ba]:"Error loading token to cache.",[_r]:"Cryptographic Key or Keypair not found in browser storage.",[ks]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ea]:"An authorization code or nativeAccountId must be provided to this flow.",[Aa]:"Request cannot contain both spa code and native account id.",[Ta]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[xc]:`Unable to acquire token from native platform.  ${ei}`,[_c]:"Timed out while attempting to establish connection to browser extension",[kc]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Sa]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ei}`,[Ui]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ei}`,[xa]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Ic]:"Invalid base64 encoded string.",[eu]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Md]:"Failed to build request headers object.",[Pd]:"Failed to parse response headers",[Rc]:"Failed to decrypt ear response",[_a]:"The request timed out."},op={pkceNotGenerated:{code:Wo,desc:ot[Wo]},cryptoDoesNotExist:{code:To,desc:ot[To]},emptyNavigateUriError:{code:Xo,desc:ot[Xo]},hashEmptyError:{code:Ec,desc:ot[Ec]},hashDoesNotContainStateError:{code:Ss,desc:ot[Ss]},hashDoesNotContainKnownPropertiesError:{code:va,desc:ot[va]},unableToParseStateError:{code:so,desc:ot[so]},stateInteractionTypeMismatchError:{code:at,desc:ot[at]},interactionInProgress:{code:St,desc:ot[St]},popupWindowError:{code:on,desc:ot[on]},emptyWindowError:{code:xs,desc:ot[xs]},userCancelledError:{code:Kr,desc:ot[Kr]},monitorPopupTimeoutError:{code:Jo,desc:ot[Jo]},monitorIframeTimeoutError:{code:_s,desc:ot[_s]},redirectInIframeError:{code:Oi,desc:ot[Oi]},blockTokenRequestsInHiddenIframeError:{code:Zo,desc:ot[Zo]},blockAcquireTokenInPopupsError:{code:Xl,desc:ot[Xl]},iframeClosedPrematurelyError:{code:sn,desc:ot[sn]},silentLogoutUnsupportedError:{code:Mi,desc:ot[Mi]},noAccountError:{code:Ca,desc:ot[Ca]},silentPromptValueError:{code:Jl,desc:ot[Jl]},noTokenRequestCacheError:{code:Ac,desc:ot[Ac]},unableToParseTokenRequestCacheError:{code:Zl,desc:ot[Zl]},authRequestNotSet:{code:Tc,desc:ot[Tc]},invalidCacheType:{code:Sc,desc:ot[Sc]},notInBrowserEnvironment:{code:Pi,desc:ot[Pi]},databaseNotOpen:{code:hn,desc:ot[hn]},noNetworkConnectivity:{code:qt,desc:ot[qt]},postRequestFailed:{code:wa,desc:ot[wa]},getRequestFailed:{code:Di,desc:ot[Di]},failedToParseNetworkResponse:{code:Li,desc:ot[Li]},unableToLoadTokenError:{code:ba,desc:ot[ba]},signingKeyNotFoundInStorage:{code:_r,desc:ot[_r]},authCodeRequired:{code:ks,desc:ot[ks]},authCodeOrNativeAccountRequired:{code:Ea,desc:ot[Ea]},spaCodeAndNativeAccountPresent:{code:Aa,desc:ot[Aa]},databaseUnavailable:{code:Ta,desc:ot[Ta]},unableToAcquireTokenFromNativePlatform:{code:xc,desc:ot[xc]},nativeHandshakeTimeout:{code:_c,desc:ot[_c]},nativeExtensionNotInstalled:{code:kc,desc:ot[kc]},nativeConnectionNotEstablished:{code:Sa,desc:ot[Sa]},uninitializedPublicClientApplication:{code:Ui,desc:ot[Ui]},nativePromptNotSupported:{code:xa,desc:ot[xa]},invalidBase64StringError:{code:Ic,desc:ot[Ic]},invalidPopTokenRequest:{code:eu,desc:ot[eu]}};class ka extends W{constructor(i,u){super(i,ot[i],u),Object.setPrototypeOf(this,ka.prototype),this.name="BrowserAuthError"}}function Be(S,i){return new ka(S,i)}const nr={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Qn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Is={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},fn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},tu={GET:"GET",POST:"POST"},ao={SIGNIN:"signin",SIGNOUT:"signout"},En={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},nu={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Rt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};t.InteractionType=void 0,(function(S){S.Redirect="redirect",S.Popup="popup",S.Silent="silent",S.None="none"})(t.InteractionType||(t.InteractionType={}));const rr={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Dd={scopes:a},Bf="jwk",zf={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Ld="msal.db",ip=1,Ff=`${Ld}.keys`,An={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},sp=[An.Default,An.Skip,An.RefreshTokenAndNetwork];function Ud(S){return encodeURIComponent(Nc(S).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function ti(S){return Kf(S).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Nc(S){return Kf(new TextEncoder().encode(S))}function Kf(S){const i=Array.from(S,u=>String.fromCodePoint(u)).join("");return btoa(i)}function Gr(S){return new TextDecoder().decode(ji(S))}function ji(S){let i=S.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw Be(Ic)}const u=atob(i);return Uint8Array.from(u,g=>g.codePointAt(0)||0)}const ap="RSASSA-PKCS1-v1_5",Oc="AES-GCM",cp="HKDF",jd="SHA-256",ru=2048,Gf=new Uint8Array([1,0,1]),ou="0123456789abcdef",qf=new Uint32Array(1),Hd="raw",iu="encrypt",Bd="decrypt",lp="deriveKey",ww="crypto_subtle_undefined",Rs={name:ap,hash:jd,modulusLength:ru,publicExponent:Gf};function su(S){if(!window)throw Be(Pi);if(!window.crypto)throw Be(To);if(!S&&!window.crypto.subtle)throw Be(To,ww)}async function au(S,i,u){i?.addQueueMeasurement(q.Sha256Digest,u);const w=new TextEncoder().encode(S);return window.crypto.subtle.digest(jd,w)}function cu(S){return window.crypto.getRandomValues(S)}function Mc(){return window.crypto.getRandomValues(qf),qf[0]}function or(){const S=Date.now(),i=Mc()*1024+(Mc()&1023),u=new Uint8Array(16),g=Math.trunc(i/2**30),w=i&2**30-1,T=Mc();u[0]=S/2**40,u[1]=S/2**32,u[2]=S/2**24,u[3]=S/2**16,u[4]=S/2**8,u[5]=S,u[6]=112|g>>>8,u[7]=g,u[8]=128|w>>>24,u[9]=w>>>16,u[10]=w>>>8,u[11]=w,u[12]=T>>>24,u[13]=T>>>16,u[14]=T>>>8,u[15]=T;let R="";for(let L=0;L<u.length;L++)R+=ou.charAt(u[L]>>>4),R+=ou.charAt(u[L]&15),(L===3||L===5||L===7||L===9)&&(R+="-");return R}async function up(S,i){return window.crypto.subtle.generateKey(Rs,S,i)}async function Ns(S){return window.crypto.subtle.exportKey(Bf,S)}async function dp(S,i,u){return window.crypto.subtle.importKey(Bf,S,Rs,i,u)}async function co(S,i){return window.crypto.subtle.sign(Rs,S,i)}async function lo(){const S=await Hi(),u={alg:"dir",kty:"oct",k:ti(new Uint8Array(S))};return Nc(JSON.stringify(u))}async function Os(S){const i=Gr(S),g=JSON.parse(i).k,w=ji(g);return window.crypto.subtle.importKey(Hd,w,Oc,!1,[Bd])}async function hp(S,i){const u=i.split(".");if(u.length!==5)throw Be(Rc,"jwe_length");const g=await Os(S).catch(()=>{throw Be(Rc,"import_key")});try{const w=new TextEncoder().encode(u[0]),T=ji(u[2]),R=ji(u[3]),L=ji(u[4]),K=L.byteLength*8,ne=new Uint8Array(R.length+L.length);ne.set(R),ne.set(L,R.length);const ve=await window.crypto.subtle.decrypt({name:Oc,iv:T,tagLength:K,additionalData:w},g,ne);return new TextDecoder().decode(ve)}catch{throw Be(Rc,"decrypt")}}async function Hi(){const S=await window.crypto.subtle.generateKey({name:Oc,length:256},!0,[iu,Bd]);return window.crypto.subtle.exportKey(Hd,S)}async function ni(S){return window.crypto.subtle.importKey(Hd,S,cp,!1,[lp])}async function In(S,i,u){return window.crypto.subtle.deriveKey({name:cp,salt:i,hash:jd,info:new TextEncoder().encode(u)},S,{name:Oc,length:256},!1,[iu,Bd])}async function zd(S,i,u){const g=new TextEncoder().encode(i),w=window.crypto.getRandomValues(new Uint8Array(16)),T=await In(S,w,u),R=await window.crypto.subtle.encrypt({name:Oc,iv:new Uint8Array(12)},T,g);return{data:ti(new Uint8Array(R)),nonce:ti(w)}}async function Fd(S,i,u,g){const w=ji(g),T=await In(S,ji(i),u),R=await window.crypto.subtle.decrypt({name:Oc,iv:new Uint8Array(12)},T,w);return new TextDecoder().decode(R)}async function Kd(S){const i=await au(S),u=new Uint8Array(i);return ti(u)}const Ia="storage_not_supported",mn="stubbed_public_client_application_called",So="in_mem_redirect_unavailable";var Gd=Object.freeze({__proto__:null,inMemRedirectUnavailable:So,storageNotSupported:Ia,stubbedPublicClientApplicationCalled:mn});const lu={[Ia]:"Given storage configuration option was not supported.",[mn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[So]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},fp={storageNotSupportedError:{code:Ia,desc:lu[Ia]},stubPcaInstanceCalled:{code:mn,desc:lu[mn]},inMemRedirectUnavailable:{code:So,desc:lu[So]}};class uu extends W{constructor(i,u){super(i,u),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,uu.prototype)}}function cn(S){return new uu(S,lu[S])}function qd(S){S.location.hash="",typeof S.history.replaceState=="function"&&S.history.replaceState(null,"",`${S.location.origin}${S.location.pathname}${S.location.search}`)}function $d(S){const i=S.split("#");i.shift(),window.location.hash=i.length>0?i.join("#"):""}function du(){return window.parent!==window}function $f(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${nr.POPUP_NAME_PREFIX}.`)===0}function ri(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Vf(){const i=new Et(window.location.href).getUrlComponents();return`${i.Protocol}//${i.HostNameAndPort}/`}function Dn(){if(Et.hashContainsKnownProperties(window.location.hash)&&du())throw Be(Zo)}function jn(S){if(du()&&!S)throw Be(Oi)}function Yf(){if($f())throw Be(Xl)}function It(){if(typeof window>"u")throw Be(Pi)}function xt(S){if(!S)throw Be(Ui)}function hu(S){It(),Dn(),Yf(),xt(S)}function Vd(S,i){if(hu(S),jn(i.system.allowRedirectInIframe),i.cache.cacheLocation===fn.MemoryStorage&&!i.cache.storeAuthStateInCookie)throw cn(So)}function Pc(S){const i=document.createElement("link");i.rel="preconnect",i.href=new URL(S).origin,i.crossOrigin="anonymous",document.head.appendChild(i),window.setTimeout(()=>{try{document.head.removeChild(i)}catch{}},1e4)}function Yd(){return or()}var mp=Object.freeze({__proto__:null,addClientCapabilitiesToClaims:bd,blockAPICallsBeforeInitialize:xt,blockAcquireTokenInPopups:Yf,blockNonBrowserEnvironment:It,blockRedirectInIframe:jn,blockReloadInHiddenIframes:Dn,clearHash:qd,createGuid:Yd,getCurrentUri:ri,getHomepage:Vf,invoke:Vn,invokeAsync:Ae,isInIframe:du,isInPopup:$f,preconnect:Pc,preflightCheck:hu,redirectPreflightCheck:Vd,replaceHash:$d});class Dc{navigateInternal(i,u){return Dc.defaultNavigateWindow(i,u)}navigateExternal(i,u){return Dc.defaultNavigateWindow(i,u)}static defaultNavigateWindow(i,u){return u.noHistory?window.location.replace(i):window.location.assign(i),new Promise((g,w)=>{setTimeout(()=>{w(Be(_a,"failed_to_redirect"))},u.timeout)})}}class Qf{async sendGetRequestAsync(i,u){let g,w={},T=0;const R=Qd(u);try{g=await fetch(i,{method:tu.GET,headers:R})}catch(L){throw ma(Be(window.navigator.onLine?Di:qt),void 0,void 0,L)}w=Wd(g.headers);try{return T=g.status,{headers:w,body:await g.json(),status:T}}catch(L){throw ma(Be(Li),T,w,L)}}async sendPostRequestAsync(i,u){const g=u&&u.body||"",w=Qd(u);let T,R=0,L={};try{T=await fetch(i,{method:tu.POST,headers:w,body:g})}catch(K){throw ma(Be(window.navigator.onLine?wa:qt),void 0,void 0,K)}L=Wd(T.headers);try{return R=T.status,{headers:L,body:await T.json(),status:R}}catch(K){throw ma(Be(Li),R,L,K)}}}function Qd(S){try{const i=new Headers;if(!(S&&S.headers))return i;const u=S.headers;return Object.entries(u).forEach(([g,w])=>{i.append(g,w)}),i}catch(i){throw ma(Be(Md),void 0,void 0,i)}}function Wd(S){try{const i={};return S.forEach((u,g)=>{i[g]=u}),i}catch{throw Be(Pd)}}const gp=6e4,Lc=1e4,Xd=3e4,Jd=2e3;function pp({auth:S,cache:i,system:u,telemetry:g},w){const T={clientId:e.EMPTY_STRING,authority:`${e.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:e.EMPTY_STRING,authorityMetadata:e.EMPTY_STRING,redirectUri:typeof window<"u"?ri():"",postLogoutRedirectUri:e.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:qn.AAD,OIDCOptions:{serverResponseType:E.FRAGMENT,defaultScopes:[e.OPENID_SCOPE,e.PROFILE_SCOPE,e.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:tc.None,tenant:e.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},R={cacheLocation:fn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:fn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(i&&i.cacheLocation===fn.LocalStorage),claimsBasedCachingEnabled:!1},L={loggerCallback:()=>{},logLevel:t.LogLevel.Info,piiLoggingEnabled:!1},ne={...{...Pl,loggerOptions:L,networkClient:w?new Qf:Cw,navigationClient:new Dc,loadFrameTimeout:0,windowHashTimeout:u?.loadFrameTimeout||gp,iframeHashTimeout:u?.loadFrameTimeout||Lc,navigateFrameWait:0,redirectNavigationTimeout:Xd,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:u?.nativeBrokerHandshakeTimeout||Jd,pollIntervalMilliseconds:nr.DEFAULT_POLL_INTERVAL_MS},...u,loggerOptions:u?.loggerOptions||L},ve={application:{appName:e.EMPTY_STRING,appVersion:e.EMPTY_STRING},client:new la};if(S?.protocolMode!==qn.OIDC&&S?.OIDCOptions&&new Pn(ne.loggerOptions).warning(JSON.stringify(bt(ur))),S?.protocolMode&&S.protocolMode===qn.OIDC&&ne?.allowPlatformBroker)throw bt(wi);return{auth:{...T,...S,OIDCOptions:{...T.OIDCOptions,...S?.OIDCOptions}},cache:{...R,...i},system:ne,telemetry:{...ve,...g}}}const Ra="@azure/msal-browser",kr="4.25.0",Bt="msal",Uc="browser",Wf="-",Bi=1,xo=1,yp=`${Bt}.${Uc}.log.level`,Zd=`${Bt}.${Uc}.log.pii`,fu=`${Bt}.${Uc}.performance.enabled`,ln=`${Bt}.${Uc}.platform.auth.dom`,vp=`${Bt}.version`,Cp="account.keys",Xf="token.keys";function Ir(S=xo){return S<1?`${Bt}.${Cp}`:`${Bt}.${S}.${Cp}`}function Rr(S,i=Bi){return i<1?`${Bt}.${Xf}.${S}`:`${Bt}.${i}.${Xf}.${S}`}class jc{static loggerCallback(i,u){switch(i){case t.LogLevel.Error:console.error(u);return;case t.LogLevel.Info:console.info(u);return;case t.LogLevel.Verbose:console.debug(u);return;case t.LogLevel.Warning:console.warn(u);return;default:console.log(u);return}}constructor(i){this.browserEnvironment=typeof window<"u",this.config=pp(i,this.browserEnvironment);let u;try{u=window[fn.SessionStorage]}catch{}const g=u?.getItem(yp),w=u?.getItem(Zd)?.toLowerCase(),T=w==="true"?!0:w==="false"?!1:void 0,R={...this.config.system.loggerOptions},L=g&&Object.keys(t.LogLevel).includes(g)?t.LogLevel[g]:void 0;L&&(R.loggerCallback=jc.loggerCallback,R.logLevel=L),T!==void 0&&(R.piiLoggingEnabled=T),this.logger=new Pn(R,Ra,kr),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}const oi={UserInteractionRequired:"USER_INTERACTION_REQUIRED",UserCancel:"USER_CANCEL",NoNetwork:"NO_NETWORK",TransientError:"TRANSIENT_ERROR",PersistentError:"PERSISTENT_ERROR",Disabled:"DISABLED",AccountUnavailable:"ACCOUNT_UNAVAILABLE",NestedAppAuthUnavailable:"NESTED_APP_AUTH_UNAVAILABLE"};class Ln{static async initializeNestedAppAuthBridge(){if(window===void 0)throw new Error("window is undefined");if(window.nestedAppAuthBridge===void 0)throw new Error("window.nestedAppAuthBridge is undefined");try{window.nestedAppAuthBridge.addEventListener("message",u=>{const g=typeof u=="string"?u:u.data,w=JSON.parse(g),T=Ln.bridgeRequests.find(R=>R.requestId===w.requestId);T!==void 0&&(Ln.bridgeRequests.splice(Ln.bridgeRequests.indexOf(T),1),w.success?T.resolve(w):T.reject(w.error))});const i=await new Promise((u,g)=>{const w=Ln.buildRequest("GetInitContext"),T={requestId:w.requestId,method:w.method,resolve:u,reject:g};Ln.bridgeRequests.push(T),window.nestedAppAuthBridge.postMessage(JSON.stringify(w))});return Ln.validateBridgeResultOrThrow(i.initContext)}catch(i){throw window.console.log(i),i}}getTokenInteractive(i){return this.getToken("GetTokenPopup",i)}getTokenSilent(i){return this.getToken("GetToken",i)}async getToken(i,u){const g=await this.sendRequest(i,{tokenParams:u});return{token:Ln.validateBridgeResultOrThrow(g.token),account:Ln.validateBridgeResultOrThrow(g.account)}}getHostCapabilities(){return this.capabilities??null}getAccountContext(){return this.accountContext?this.accountContext:null}static buildRequest(i,u){return{messageType:"NestedAppAuthRequest",method:i,requestId:or(),sendTime:Date.now(),clientLibrary:nr.MSAL_SKU,clientLibraryVersion:kr,...u}}sendRequest(i,u){const g=Ln.buildRequest(i,u);return new Promise((T,R)=>{const L={requestId:g.requestId,method:g.method,resolve:T,reject:R};Ln.bridgeRequests.push(L),window.nestedAppAuthBridge.postMessage(JSON.stringify(g))})}static validateBridgeResultOrThrow(i){if(i===void 0)throw{status:oi.NestedAppAuthUnavailable};return i}constructor(i,u,g,w){this.sdkName=i,this.sdkVersion=u,this.accountContext=g,this.capabilities=w}static async create(){const i=await Ln.initializeNestedAppAuthBridge();return new Ln(i.sdkName,i.sdkVersion,i.accountContext,i.capabilities)}}Ln.bridgeRequests=[];class ir extends jc{constructor(){super(...arguments),this.bridgeProxy=void 0,this.accountContext=null}getModuleName(){return ir.MODULE_NAME}getId(){return ir.ID}getBridgeProxy(){return this.bridgeProxy}async initialize(){try{if(typeof window<"u"){typeof window.__initializeNestedAppAuth=="function"&&await window.__initializeNestedAppAuth();const i=await Ln.create();this.accountContext=i.getAccountContext(),this.bridgeProxy=i,this.available=i!==void 0}}catch(i){this.logger.infoPii(`Could not initialize Nested App Auth bridge (${i})`)}return this.logger.info(`Nested App Auth Bridge available: ${this.available}`),this.available}}ir.MODULE_NAME="",ir.ID="NestedAppOperatingContext";class zi extends jc{getModuleName(){return zi.MODULE_NAME}getId(){return zi.ID}async initialize(){return this.available=typeof window<"u",this.available}}zi.MODULE_NAME="",zi.ID="StandardOperatingContext";class Jf{constructor(){this.dbName=Ld,this.version=ip,this.tableName=Ff,this.dbOpen=!1}async open(){return new Promise((i,u)=>{const g=window.indexedDB.open(this.dbName,this.version);g.addEventListener("upgradeneeded",w=>{w.target.result.createObjectStore(this.tableName)}),g.addEventListener("success",w=>{const T=w;this.db=T.target.result,this.dbOpen=!0,i()}),g.addEventListener("error",()=>u(Be(Ta)))})}closeConnection(){const i=this.db;i&&this.dbOpen&&(i.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(i){return await this.validateDbIsOpen(),new Promise((u,g)=>{if(!this.db)return g(Be(hn));const R=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(i);R.addEventListener("success",L=>{const K=L;this.closeConnection(),u(K.target.result)}),R.addEventListener("error",L=>{this.closeConnection(),g(L)})})}async setItem(i,u){return await this.validateDbIsOpen(),new Promise((g,w)=>{if(!this.db)return w(Be(hn));const L=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(u,i);L.addEventListener("success",()=>{this.closeConnection(),g()}),L.addEventListener("error",K=>{this.closeConnection(),w(K)})})}async removeItem(i){return await this.validateDbIsOpen(),new Promise((u,g)=>{if(!this.db)return g(Be(hn));const R=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(i);R.addEventListener("success",()=>{this.closeConnection(),u()}),R.addEventListener("error",L=>{this.closeConnection(),g(L)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((i,u)=>{if(!this.db)return u(Be(hn));const T=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();T.addEventListener("success",R=>{const L=R;this.closeConnection(),i(L.target.result)}),T.addEventListener("error",R=>{this.closeConnection(),u(R)})})}async containsKey(i){return await this.validateDbIsOpen(),new Promise((u,g)=>{if(!this.db)return g(Be(hn));const R=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(i);R.addEventListener("success",L=>{const K=L;this.closeConnection(),u(K.target.result===1)}),R.addEventListener("error",L=>{this.closeConnection(),g(L)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((i,u)=>{const g=window.indexedDB.deleteDatabase(Ld),w=setTimeout(()=>u(!1),200);g.addEventListener("success",()=>(clearTimeout(w),i(!0))),g.addEventListener("blocked",()=>(clearTimeout(w),i(!0))),g.addEventListener("error",()=>(clearTimeout(w),u(!1)))})}}class Hc{constructor(){this.cache=new Map}async initialize(){}getItem(i){return this.cache.get(i)||null}getUserData(i){return this.getItem(i)}setItem(i,u){this.cache.set(i,u)}async setUserData(i,u){this.setItem(i,u)}removeItem(i){this.cache.delete(i)}getKeys(){const i=[];return this.cache.forEach((u,g)=>{i.push(g)}),i}containsKey(i){return this.cache.has(i)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class Zf{constructor(i){this.inMemoryCache=new Hc,this.indexedDBCache=new Jf,this.logger=i}handleDatabaseAccessError(i){if(i instanceof ka&&i.errorCode===Ta)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw i}async getItem(i){const u=this.inMemoryCache.getItem(i);if(!u)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(i)}catch(g){this.handleDatabaseAccessError(g)}return u}async setItem(i,u){this.inMemoryCache.setItem(i,u);try{await this.indexedDBCache.setItem(i,u)}catch(g){this.handleDatabaseAccessError(g)}}async removeItem(i){this.inMemoryCache.removeItem(i);try{await this.indexedDBCache.removeItem(i)}catch(u){this.handleDatabaseAccessError(u)}}async getKeys(){const i=this.inMemoryCache.getKeys();if(i.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(u){this.handleDatabaseAccessError(u)}return i}async containsKey(i){const u=this.inMemoryCache.containsKey(i);if(!u)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(i)}catch(g){this.handleDatabaseAccessError(g)}return u}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const i=await this.indexedDBCache.deleteDatabase();return i&&this.logger.verbose("Persistent keystore deleted"),i}catch(i){return this.handleDatabaseAccessError(i),!1}}}class Nr{constructor(i,u,g){this.logger=i,su(g??!1),this.cache=new Zf(this.logger),this.performanceClient=u}createNewGuid(){return or()}base64Encode(i){return Nc(i)}base64Decode(i){return Gr(i)}base64UrlEncode(i){return Ud(i)}encodeKid(i){return this.base64UrlEncode(JSON.stringify({kid:i}))}async getPublicKeyThumbprint(i){const u=this.performanceClient?.startMeasurement(q.CryptoOptsGetPublicKeyThumbprint,i.correlationId),g=await up(Nr.EXTRACTABLE,Nr.POP_KEY_USAGES),w=await Ns(g.publicKey),T={e:w.e,kty:w.kty,n:w.n},R=mu(T),L=await this.hashString(R),K=await Ns(g.privateKey),ne=await dp(K,!1,["sign"]);return await this.cache.setItem(L,{privateKey:ne,publicKey:g.publicKey,requestMethod:i.resourceRequestMethod,requestUri:i.resourceRequestUri}),u&&u.end({success:!0}),L}async removeTokenBindingKey(i){if(await this.cache.removeItem(i),await this.cache.containsKey(i))throw ke(yi)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(i){return i instanceof Error?this.logger.error(`Clearing keystore failed with error: ${i.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(i,u,g,w){const T=this.performanceClient?.startMeasurement(q.CryptoOptsSignJwt,w),R=await this.cache.getItem(u);if(!R)throw Be(_r);const L=await Ns(R.publicKey),K=mu(L),ne=Ud(JSON.stringify({kid:u})),ve=$l.getShrHeaderString({...g?.header,alg:L.alg,kid:ne}),Se=Ud(ve);i.cnf={jwk:JSON.parse(K)};const je=Ud(JSON.stringify(i)),Ye=`${Se}.${je}`,jt=new TextEncoder().encode(Ye),hr=await co(R.privateKey,jt),$i=ti(new Uint8Array(hr)),fr=`${Ye}.${$i}`;return T&&T.end({success:!0}),fr}async hashString(i){return Kd(i)}}Nr.POP_KEY_USAGES=["sign","verify"],Nr.EXTRACTABLE=!0;function mu(S){return JSON.stringify(S,Object.keys(S).sort())}const wp=1440*60*1e3,_o={Lax:"Lax",None:"None"};class gn{initialize(){return Promise.resolve()}getItem(i){const u=`${encodeURIComponent(i)}`,g=document.cookie.split(";");for(let w=0;w<g.length;w++){const T=g[w],[R,...L]=decodeURIComponent(T).trim().split("="),K=L.join("=");if(R===u)return K}return""}getUserData(){throw ke(st)}setItem(i,u,g,w=!0,T=_o.Lax){let R=`${encodeURIComponent(i)}=${encodeURIComponent(u)};path=/;SameSite=${T};`;if(g){const L=em(g);R+=`expires=${L};`}(w||T===_o.None)&&(R+="Secure;"),document.cookie=R}async setUserData(){return Promise.reject(ke(st))}removeItem(i){this.setItem(i,"",-1)}getKeys(){const i=document.cookie.split(";"),u=[];return i.forEach(g=>{const w=decodeURIComponent(g).trim().split("=");u.push(w[0])}),u}containsKey(i){return this.getKeys().includes(i)}decryptData(){return Promise.resolve(null)}}function em(S){const i=new Date;return new Date(i.getTime()+S*wp).toUTCString()}function Bc(S,i){const u=S.getItem(Ir(i));return u?JSON.parse(u):[]}function pn(S,i,u){const g=i.getItem(Rr(S,u));if(g){const w=JSON.parse(g);if(w&&w.hasOwnProperty("idToken")&&w.hasOwnProperty("accessToken")&&w.hasOwnProperty("refreshToken"))return w}return{idToken:[],accessToken:[],refreshToken:[]}}function tm(S){return S.hasOwnProperty("id")&&S.hasOwnProperty("nonce")&&S.hasOwnProperty("data")}const nm="msal.cache.encryption",bp="msal.broadcast.cache";class Jt{constructor(i,u,g){if(!window.localStorage)throw cn(Ia);this.memoryStorage=new Hc,this.initialized=!1,this.clientId=i,this.logger=u,this.performanceClient=g,this.broadcast=new BroadcastChannel(bp)}async initialize(i){const u=new gn,g=u.getItem(nm);let w={key:"",id:""};if(g)try{w=JSON.parse(g)}catch{}if(w.key&&w.id){const T=Vn(ji,q.Base64Decode,this.logger,this.performanceClient,i)(w.key);this.encryptionCookie={id:w.id,key:await Ae(ni,q.GenerateHKDF,this.logger,this.performanceClient,i)(T)}}else{const T=or(),R=await Ae(Hi,q.GenerateBaseKey,this.logger,this.performanceClient,i)(),L=Vn(ti,q.UrlEncodeArr,this.logger,this.performanceClient,i)(new Uint8Array(R));this.encryptionCookie={id:T,key:await Ae(ni,q.GenerateHKDF,this.logger,this.performanceClient,i)(R)};const K={id:T,key:L};u.setItem(nm,JSON.stringify(K),0,!0,_o.None)}await Ae(this.importExistingCache.bind(this),q.ImportExistingCache,this.logger,this.performanceClient,i)(i),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(i){return window.localStorage.getItem(i)}getUserData(i){if(!this.initialized)throw Be(Ui);return this.memoryStorage.getItem(i)}async decryptData(i,u,g){if(!this.initialized||!this.encryptionCookie)throw Be(Ui);if(u.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},g),null;const w=await Ae(Fd,q.Decrypt,this.logger,this.performanceClient,g)(this.encryptionCookie.key,u.nonce,this.getContext(i),u.data);if(!w)return null;try{return JSON.parse(w)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},g),null}}setItem(i,u){window.localStorage.setItem(i,u)}async setUserData(i,u,g,w){if(!this.initialized||!this.encryptionCookie)throw Be(Ui);const{data:T,nonce:R}=await Ae(zd,q.Encrypt,this.logger,this.performanceClient,g)(this.encryptionCookie.key,u,this.getContext(i)),L={id:this.encryptionCookie.id,nonce:R,data:T,lastUpdatedAt:w};this.memoryStorage.setItem(i,u),this.setItem(i,JSON.stringify(L)),this.broadcast.postMessage({key:i,value:u,context:this.getContext(i)})}removeItem(i){this.memoryStorage.containsKey(i)&&(this.memoryStorage.removeItem(i),this.broadcast.postMessage({key:i,value:null,context:this.getContext(i)})),window.localStorage.removeItem(i)}getKeys(){return Object.keys(window.localStorage)}containsKey(i){return window.localStorage.hasOwnProperty(i)}clear(){this.memoryStorage.clear(),Bc(this).forEach(g=>this.removeItem(g));const u=pn(this.clientId,this);u.idToken.forEach(g=>this.removeItem(g)),u.accessToken.forEach(g=>this.removeItem(g)),u.refreshToken.forEach(g=>this.removeItem(g)),this.getKeys().forEach(g=>{(g.startsWith(Bt)||g.indexOf(this.clientId)!==-1)&&this.removeItem(g)})}async importExistingCache(i){if(!this.encryptionCookie)return;let u=Bc(this);u=await this.importArray(u,i),u.length?this.setItem(Ir(),JSON.stringify(u)):this.removeItem(Ir());const g=pn(this.clientId,this);g.idToken=await this.importArray(g.idToken,i),g.accessToken=await this.importArray(g.accessToken,i),g.refreshToken=await this.importArray(g.refreshToken,i),g.idToken.length||g.accessToken.length||g.refreshToken.length?this.setItem(Rr(this.clientId),JSON.stringify(g)):this.removeItem(Rr(this.clientId))}async getItemFromEncryptedCache(i,u){if(!this.encryptionCookie)return null;const g=this.getItem(i);if(!g)return null;let w;try{w=JSON.parse(g)}catch{return null}return tm(w)?w.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},u),null):Ae(Fd,q.Decrypt,this.logger,this.performanceClient,u)(this.encryptionCookie.key,w.nonce,this.getContext(i),w.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},u),w)}async importArray(i,u){const g=[],w=[];return i.forEach(T=>{const R=this.getItemFromEncryptedCache(T,u).then(L=>{L?(this.memoryStorage.setItem(T,L),g.push(T)):this.removeItem(T)});w.push(R)}),await Promise.all(w),g}getContext(i){let u="";return i.includes(this.clientId)&&(u=this.clientId),u}updateCache(i){this.logger.trace("Updating internal cache from broadcast event");const u=this.performanceClient.startMeasurement(q.LocalStorageUpdated);u.add({isBackground:!0});const{key:g,value:w,context:T}=i.data;if(!g){this.logger.error("Broadcast event missing key"),u.end({success:!1,errorCode:"noKey"});return}if(T&&T!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${T}`),u.end({success:!1,errorCode:"contextMismatch"});return}w?(this.memoryStorage.setItem(g,w),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(g),this.logger.verbose("Removed item from internal cache")),u.end({success:!0})}}class dr{constructor(){if(!window.sessionStorage)throw cn(Ia)}async initialize(){}getItem(i){return window.sessionStorage.getItem(i)}getUserData(i){return this.getItem(i)}setItem(i,u){window.sessionStorage.setItem(i,u)}async setUserData(i,u){this.setItem(i,u)}removeItem(i){window.sessionStorage.removeItem(i)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(i){return window.sessionStorage.hasOwnProperty(i)}decryptData(){return Promise.resolve(null)}}const Ue={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function rm(S,i){const u=S.indexOf(i);u>-1&&S.splice(u,1)}class zc extends ca{constructor(i,u,g,w,T,R,L){super(i,g,w,T,L),this.cacheConfig=u,this.logger=w,this.internalStorage=new Hc,this.browserStorage=Ep(i,u.cacheLocation,w,T),this.temporaryCacheStorage=Ep(i,u.temporaryCacheLocation,w,T),this.cookieStorage=new gn,this.eventHandler=R}async initialize(i){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},i),await this.browserStorage.initialize(i),await this.migrateExistingCache(i),this.trackVersionChanges(i)}async migrateExistingCache(i){const u=Bc(this.browserStorage,0),g=pn(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:u.length,oldAccessCount:g.accessToken.length,oldIdCount:g.idToken.length,oldRefreshCount:g.refreshToken.length},i);const w=Bc(this.browserStorage,1),T=pn(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:w.length,currAccessCount:T.accessToken.length,currIdCount:T.idToken.length,currRefreshCount:T.refreshToken.length},i),await Promise.all([this.updateV0ToCurrent(xo,u,w,i),this.updateV0ToCurrent(Bi,g.idToken,T.idToken,i),this.updateV0ToCurrent(Bi,g.accessToken,T.accessToken,i),this.updateV0ToCurrent(Bi,g.refreshToken,T.refreshToken,i)]),u.length>0?this.browserStorage.setItem(Ir(0),JSON.stringify(u)):this.browserStorage.removeItem(Ir(0)),w.length>0?this.browserStorage.setItem(Ir(1),JSON.stringify(w)):this.browserStorage.removeItem(Ir(1)),this.setTokenKeys(g,i,0),this.setTokenKeys(T,i,1)}async updateV0ToCurrent(i,u,g,w){const T=[];for(const R of[...u]){const L=this.browserStorage.getItem(R),K=this.validateAndParseJson(L||"");if(!K){rm(u,R);continue}K.lastUpdatedAt||(K.lastUpdatedAt=Date.now().toString(),this.setItem(R,JSON.stringify(K),w));const ne=tm(K)?await this.browserStorage.decryptData(R,K,w):K;let ve;if(ne&&(ys(ne)||Ed(ne))&&(ve=ne.expiresOn),!ne||pw(K.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||ve&&$o(ve,J)){this.browserStorage.removeItem(R),rm(u,R),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},w);continue}if(this.cacheConfig.cacheLocation!==fn.LocalStorage||tm(K)){const Se=`${Bt}.${i}${Wf}${R}`,je=this.browserStorage.getItem(Se);if(je){const Ye=this.validateAndParseJson(je);if(Number(K.lastUpdatedAt)>Number(Ye.lastUpdatedAt)){T.push(this.setUserData(Se,JSON.stringify(ne),w,K.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},w)}));continue}}else{T.push(this.setUserData(Se,JSON.stringify(ne),w,K.lastUpdatedAt).then(()=>{g.push(Se),this.performanceClient.incrementFields({upgradedCacheCount:1},w)}));continue}}}return Promise.all(T)}trackVersionChanges(i){const u=this.browserStorage.getItem(vp);u&&(this.logger.info(`MSAL.js was last initialized by version: ${u}`),this.performanceClient.addFields({previousLibraryVersion:u},i)),u!==kr&&this.setItem(vp,kr,i)}validateAndParseJson(i){if(!i)return null;try{const u=JSON.parse(i);return u&&typeof u=="object"?u:null}catch{return null}}setItem(i,u,g){let w=0,T=[];const R=20;for(let L=0;L<=R;L++)try{this.browserStorage.setItem(i,u),L>0&&(L<=w?this.removeAccessTokenKeys(T.slice(0,L),g,0):(this.removeAccessTokenKeys(T.slice(0,w),g,0),this.removeAccessTokenKeys(T.slice(w,L),g)));break}catch(K){const ne=nd(K);if(ne.errorCode===Ai&&L<R){if(!T.length){const ve=i===Rr(this.clientId,0)?JSON.parse(u).accessToken:this.getTokenKeys(0).accessToken,Se=i===Rr(this.clientId)?JSON.parse(u).accessToken:this.getTokenKeys().accessToken;T=[...ve,...Se],w=ve.length}if(T.length<=L)throw ne;this.removeAccessToken(T[L],g,!1)}else throw ne}}async setUserData(i,u,g,w){let T=0,R=[];const L=20;for(let K=0;K<=L;K++)try{await Ae(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(i,u,g,w),K>0&&(K<=T?this.removeAccessTokenKeys(R.slice(0,K),g,0):(this.removeAccessTokenKeys(R.slice(0,T),g,0),this.removeAccessTokenKeys(R.slice(T,K),g)));break}catch(ne){const ve=nd(ne);if(ve.errorCode===Ai&&K<L){if(!R.length){const Se=this.getTokenKeys(0).accessToken,je=this.getTokenKeys().accessToken;R=[...Se,...je],T=Se.length}if(R.length<=K)throw ve;this.removeAccessToken(R[K],g,!1)}else throw ve}}getAccount(i,u){this.logger.trace("BrowserCacheManager.getAccount called");const g=this.browserStorage.getUserData(i);if(!g)return this.removeAccountKeyFromMap(i,u),null;const w=this.validateAndParseJson(g);return!w||!Sr.isAccountEntity(w)?null:ca.toObject(new Sr,w)}async setAccount(i,u){this.logger.trace("BrowserCacheManager.setAccount called");const g=this.generateAccountKey(i.getAccountInfo()),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(g,JSON.stringify(i),u,w);const T=this.addAccountKeyToMap(g,u);this.cacheConfig.cacheLocation===fn.LocalStorage&&T&&this.eventHandler.emitEvent(Ue.ACCOUNT_ADDED,void 0,i.getAccountInfo())}getAccountKeys(){return Bc(this.browserStorage)}addAccountKeyToMap(i,u){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${i}`);const g=this.getAccountKeys();return g.indexOf(i)===-1?(g.push(i),this.setItem(Ir(),JSON.stringify(g),u),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(i,u){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${i}`);const g=this.getAccountKeys(),w=g.indexOf(i);if(w>-1){if(g.splice(w,1),g.length===0){this.removeItem(Ir());return}else this.setItem(Ir(),JSON.stringify(g),u);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(i,u){const g=this.getActiveAccount(u);g?.homeAccountId===i.homeAccountId&&g?.environment===i.environment&&this.setActiveAccount(null,u),super.removeAccount(i,u),this.removeAccountKeyFromMap(this.generateAccountKey(i),u),this.browserStorage.getKeys().forEach(w=>{w.includes(i.homeAccountId)&&w.includes(i.environment)&&this.browserStorage.removeItem(w)}),this.cacheConfig.cacheLocation===fn.LocalStorage&&this.eventHandler.emitEvent(Ue.ACCOUNT_REMOVED,void 0,i)}removeIdToken(i,u){super.removeIdToken(i,u);const g=this.getTokenKeys(),w=g.idToken.indexOf(i);w>-1&&(this.logger.info("idToken removed from tokenKeys map"),g.idToken.splice(w,1),this.setTokenKeys(g,u))}removeAccessToken(i,u,g=!0){super.removeAccessToken(i,u),g&&this.removeAccessTokenKeys([i],u)}removeAccessTokenKeys(i,u,g=Bi){this.logger.trace("removeAccessTokenKey called");const w=this.getTokenKeys(g);let T=0;if(i.forEach(R=>{const L=w.accessToken.indexOf(R);L>-1&&(w.accessToken.splice(L,1),T++)}),T>0){this.logger.info(`removed ${T} accessToken keys from tokenKeys map`),this.setTokenKeys(w,u,g);return}}removeRefreshToken(i,u){super.removeRefreshToken(i,u);const g=this.getTokenKeys(),w=g.refreshToken.indexOf(i);w>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),g.refreshToken.splice(w,1),this.setTokenKeys(g,u))}getTokenKeys(i=Bi){return pn(this.clientId,this.browserStorage,i)}setTokenKeys(i,u,g=Bi){if(i.idToken.length===0&&i.accessToken.length===0&&i.refreshToken.length===0){this.removeItem(Rr(this.clientId,g));return}else this.setItem(Rr(this.clientId,g),JSON.stringify(i),u)}getIdTokenCredential(i,u){const g=this.browserStorage.getUserData(i);if(!g)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(i,u),null;const w=this.validateAndParseJson(g);return!w||!If(w)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),w)}async setIdTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const g=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(g,JSON.stringify(i),u,w);const T=this.getTokenKeys();T.idToken.indexOf(g)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),T.idToken.push(g),this.setTokenKeys(T,u))}getAccessTokenCredential(i,u){const g=this.browserStorage.getUserData(i);if(!g)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([i],u),null;const w=this.validateAndParseJson(g);return!w||!ys(w)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),w)}async setAccessTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const g=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(g,JSON.stringify(i),u,w);const T=this.getTokenKeys(),R=T.accessToken.indexOf(g);R!==-1&&T.accessToken.splice(R,1),this.logger.trace(`access token ${R===-1?"added to":"updated in"} map`),T.accessToken.push(g),this.setTokenKeys(T,u)}getRefreshTokenCredential(i,u){const g=this.browserStorage.getUserData(i);if(!g)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(i,u),null;const w=this.validateAndParseJson(g);return!w||!Ed(w)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),w)}async setRefreshTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const g=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(g,JSON.stringify(i),u,w);const T=this.getTokenKeys();T.refreshToken.indexOf(g)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),T.refreshToken.push(g),this.setTokenKeys(T,u))}getAppMetadata(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const g=this.validateAndParseJson(u);return!g||!Td(i,g)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),g)}setAppMetadata(i,u){this.logger.trace("BrowserCacheManager.setAppMetadata called");const g=Ad(i);this.setItem(g,JSON.stringify(i),u)}getServerTelemetry(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const g=this.validateAndParseJson(u);return!g||!gc(i,g)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),g)}setServerTelemetry(i,u,g){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(i,JSON.stringify(u),g)}getAuthorityMetadata(i){const u=this.internalStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const g=this.validateAndParseJson(u);return g&&io(i,g)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),g):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(u=>this.isAuthorityMetadata(u))}setWrapperMetadata(i,u){this.internalStorage.setItem(nu.WRAPPER_SKU,i),this.internalStorage.setItem(nu.WRAPPER_VER,u)}getWrapperMetadata(){const i=this.internalStorage.getItem(nu.WRAPPER_SKU)||e.EMPTY_STRING,u=this.internalStorage.getItem(nu.WRAPPER_VER)||e.EMPTY_STRING;return[i,u]}setAuthorityMetadata(i,u){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(i,JSON.stringify(u))}getActiveAccount(i){const u=this.generateCacheKey(m.ACTIVE_ACCOUNT_FILTERS),g=this.browserStorage.getItem(u);if(!g)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const w=this.validateAndParseJson(g);return w?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:w.homeAccountId,localAccountId:w.localAccountId,tenantId:w.tenantId},i)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(i,u){const g=this.generateCacheKey(m.ACTIVE_ACCOUNT_FILTERS);if(i){this.logger.verbose("setActiveAccount: Active account set");const w={homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId,lastUpdatedAt:bn().toString()};this.setItem(g,JSON.stringify(w),u)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(g);this.eventHandler.emitEvent(Ue.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const g=this.validateAndParseJson(u);return!g||!pc(i,g)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),g)}setThrottlingCache(i,u,g){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(i,JSON.stringify(u),g)}getTemporaryCache(i,u){const g=u?this.generateCacheKey(i):i;if(this.cacheConfig.storeAuthStateInCookie){const T=this.cookieStorage.getItem(g);if(T)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),T}const w=this.temporaryCacheStorage.getItem(g);if(!w){if(this.cacheConfig.cacheLocation===fn.LocalStorage){const T=this.browserStorage.getItem(g);if(T)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),T}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),w}setTemporaryCache(i,u,g){const w=g?this.generateCacheKey(i):i;this.temporaryCacheStorage.setItem(w,u),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(w,u,void 0,this.cacheConfig.secureCookies))}removeItem(i){this.browserStorage.removeItem(i)}removeTemporaryItem(i){this.temporaryCacheStorage.removeItem(i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(i))}getKeys(){return this.browserStorage.getKeys()}clear(i){this.removeAllAccounts(i),this.removeAppMetadata(i),this.temporaryCacheStorage.getKeys().forEach(u=>{(u.indexOf(Bt)!==-1||u.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(u)}),this.browserStorage.getKeys().forEach(u=>{(u.indexOf(Bt)!==-1||u.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(u)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(i){this.performanceClient.addQueueMeasurement(q.ClearTokensAndKeysWithClaims,i);const u=this.getTokenKeys();let g=0;u.accessToken.forEach(w=>{const T=this.getAccessTokenCredential(w,i);T?.requestedClaimsHash&&w.includes(T.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(w,i),g++)}),g>0&&this.logger.warning(`${g} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(i){return Gn.startsWith(i,Bt)?i:`${Bt}.${this.clientId}.${i}`}generateCredentialKey(i){const u=i.credentialType===M.REFRESH_TOKEN&&i.familyId||i.clientId,g=i.tokenType&&i.tokenType.toLowerCase()!==Y.BEARER.toLowerCase()?i.tokenType.toLowerCase():"";return[`${Bt}.${Bi}`,i.homeAccountId,i.environment,i.credentialType,u,i.realm||"",i.target||"",i.requestedClaimsHash||"",g].join(Wf).toLowerCase()}generateAccountKey(i){const u=i.homeAccountId.split(".")[1];return[`${Bt}.${xo}`,i.homeAccountId,i.environment,u||i.tenantId||""].join(Wf).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(En.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(En.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(En.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(En.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(En.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(i,u){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const g=Nc(JSON.stringify(i));if(this.setTemporaryCache(En.REQUEST_PARAMS,g,!0),u){const w=Nc(u);this.setTemporaryCache(En.VERIFIER,w,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const i=this.getTemporaryCache(En.REQUEST_PARAMS,!0);if(!i)throw Be(Ac);const u=this.getTemporaryCache(En.VERIFIER,!0);let g,w="";try{g=JSON.parse(Gr(i)),u&&(w=Gr(u))}catch(T){throw this.logger.errorPii(`Attempted to parse: ${i}`),this.logger.error(`Parsing cached token request threw with error: ${T}`),Be(Zl)}return[g,w]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const i=this.getTemporaryCache(En.NATIVE_REQUEST,!0);if(!i)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const u=this.validateAndParseJson(i);return u||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(i){const u=this.getInteractionInProgress()?.clientId;return i?u===this.clientId:!!u}getInteractionInProgress(){const i=`${Bt}.${En.INTERACTION_STATUS_KEY}`,u=this.getTemporaryCache(i,!1);try{return u?JSON.parse(u):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(i),this.resetRequestCache(),qd(window),null}}setInteractionInProgress(i,u=ao.SIGNIN){const g=`${Bt}.${En.INTERACTION_STATUS_KEY}`;if(i){if(this.getInteractionInProgress())throw Be(St);this.setTemporaryCache(g,JSON.stringify({clientId:this.clientId,type:u}),!1)}else!i&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(g)}async hydrateCache(i,u){const g=fc(i.account?.homeAccountId,i.account?.environment,i.idToken,this.clientId,i.tenantId);let w;u.claims&&(w=await this.cryptoImpl.hashString(u.claims));const T=oo(i.account?.homeAccountId,i.account.environment,i.accessToken,this.clientId,i.tenantId,i.scopes.join(" "),i.expiresOn?_f(i.expiresOn):0,i.extExpiresOn?_f(i.extExpiresOn):0,Gr,void 0,i.tokenType,void 0,u.sshKid,u.claims,w),R={idToken:g,accessToken:T};return this.saveCacheRecord(R,i.correlationId)}async saveCacheRecord(i,u,g){try{await super.saveCacheRecord(i,u,g)}catch(w){if(w instanceof Ti&&this.performanceClient&&u)try{const T=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:T.refreshToken.length,cacheIdCount:T.idToken.length,cacheAtCount:T.accessToken.length},u)}catch{}throw w}}}function Ep(S,i,u,g){try{switch(i){case fn.LocalStorage:return new Jt(S,u,g);case fn.SessionStorage:return new dr;case fn.MemoryStorage:default:break}}catch(w){u.error(w)}return new Hc}const gu=(S,i,u,g)=>{const w={cacheLocation:fn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:fn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new zc(S,w,Cn,i,u,g)};function Or(S,i,u,g,w){return S.verbose("getAllAccounts called"),u?i.getAllAccounts(w||{},g):[]}function qr(S,i,u,g){const w=u.getAccountInfoFilteredBy(S,g);return w?(i.verbose("getAccount: Account matching provided filter found, returning"),w):(i.verbose("getAccount: No matching account found, returning null"),null)}function om(S,i,u,g){if(i.trace("getAccountByUsername called"),!S)return i.warning("getAccountByUsername: No username provided"),null;const w=u.getAccountInfoFilteredBy({username:S},g);return w?(i.verbose("getAccountByUsername: Account matching username found, returning"),i.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${S}`),w):(i.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Mr(S,i,u,g){if(i.trace("getAccountByHomeId called"),!S)return i.warning("getAccountByHomeId: No homeAccountId provided"),null;const w=u.getAccountInfoFilteredBy({homeAccountId:S},g);return w?(i.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),i.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${S}`),w):(i.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function im(S,i,u,g){if(i.trace("getAccountByLocalId called"),!S)return i.warning("getAccountByLocalId: No localAccountId provided"),null;const w=u.getAccountInfoFilteredBy({localAccountId:S},g);return w?(i.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),i.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${S}`),w):(i.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Fi(S,i,u){i.setActiveAccount(S,u)}function Ms(S,i){return S.getActiveAccount(i)}const Ps="msal.broadcast.event";class Fc{constructor(i){this.eventCallbacks=new Map,this.logger=i||new Pn({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Ps)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(i,u,g){if(typeof window<"u"){const w=g||Yd();return this.eventCallbacks.has(w)?(this.logger.error(`Event callback with id: ${w} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(w,[i,u||[]]),this.logger.verbose(`Event callback registered with id: ${w}`),w)}return null}removeEventCallback(i){this.eventCallbacks.delete(i),this.logger.verbose(`Event callback ${i} removed.`)}emitEvent(i,u,g,w){const T={eventType:i,interactionType:u||null,payload:g||null,error:w||null,timestamp:Date.now()};switch(i){case Ue.ACCOUNT_ADDED:case Ue.ACCOUNT_REMOVED:case Ue.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(T);break;default:this.invokeCallbacks(T);break}}invokeCallbacks(i){this.eventCallbacks.forEach(([u,g],w)=>{(g.length===0||g.includes(i.eventType))&&(this.logger.verbose(`Emitting event to callback ${w}: ${i.eventType}`),u.apply(null,[i]))})}invokeCrossTabCallbacks(i){const u=i.data;this.invokeCallbacks(u)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class eh{constructor(i,u,g,w,T,R,L,K,ne){this.config=i,this.browserStorage=u,this.browserCrypto=g,this.networkClient=this.config.system.networkClient,this.eventHandler=T,this.navigationClient=R,this.platformAuthProvider=K,this.correlationId=ne||or(),this.logger=w.clone(nr.MSAL_SKU,kr,this.correlationId),this.performanceClient=L}async clearCacheOnLogout(i,u){if(u)try{this.browserStorage.removeAccount(u,i),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(i),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(i){this.logger.verbose("getRedirectUri called");const u=i||this.config.auth.redirectUri;return Et.getAbsoluteUrl(u,ri())}initializeServerTelemetryManager(i,u){this.logger.verbose("initializeServerTelemetryManager called");const g={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:i,forceRefresh:u||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Es(g,this.browserStorage)}async getDiscoveredAuthority(i){const{account:u}=i,g=i.requestExtraQueryParameters&&i.requestExtraQueryParameters.hasOwnProperty("instance_aware")?i.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const w={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},T=i.requestAuthority||this.config.auth.authority,R=g?.length?g==="true":this.config.auth.instanceAware,L=u&&R?this.config.auth.authority.replace(Et.getDomainFromUrl(T),u.environment):T,K=dn.generateAuthority(L,i.requestAzureCloudOptions||this.config.auth.azureCloudOptions),ne=await Ae(er,q.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(K,this.config.system.networkClient,this.browserStorage,w,this.logger,this.correlationId,this.performanceClient);if(u&&!ne.isAlias(u.environment))throw bt(hs);return ne}}async function uo(S,i,u,g){u.addQueueMeasurement(q.InitializeBaseRequest,S.correlationId);const w=S.authority||i.auth.authority,T=[...S&&S.scopes||[]],R={...S,correlationId:S.correlationId,authority:w,scopes:T};if(!R.authenticationScheme)R.authenticationScheme=Y.BEARER,g.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(R.authenticationScheme===Y.SSH){if(!S.sshJwk)throw bt(Ko);if(!S.sshKid)throw bt(ia)}g.verbose(`Authentication Scheme set to "${R.authenticationScheme}" as configured in Auth request`)}return i.cache.claimsBasedCachingEnabled&&S.claims&&!Gn.isEmptyObj(S.claims)&&(R.requestedClaimsHash=await Kd(S.claims)),R}async function Ap(S,i,u,g,w){g.addQueueMeasurement(q.InitializeSilentRequest,S.correlationId);const T=await Ae(uo,q.InitializeBaseRequest,w,g,S.correlationId)(S,u,g,w);return{...S,...T,account:i,forceRefresh:S.forceRefresh||!1}}function Na(S,i){let u;const g=S.httpMethod;if(i===qn.EAR){if(u=g||r.POST,u!==r.POST)throw bt(Br)}else u=g||r.GET;if(S.authorizePostBodyParameters&&u!==r.POST)throw bt(bi);return u}class ii extends eh{initializeLogoutRequest(i){this.logger.verbose("initializeLogoutRequest called",i?.correlationId);const u={correlationId:this.correlationId||or(),...i};if(i)if(i.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(i.account){const g=this.getLogoutHintFromIdTokenClaims(i.account);g&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),u.logoutHint=g)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!i||i.postLogoutRedirectUri!==null?i&&i.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",u.correlationId),u.postLogoutRedirectUri=Et.getAbsoluteUrl(i.postLogoutRedirectUri,ri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",u.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",u.correlationId),u.postLogoutRedirectUri=Et.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",u.correlationId),u.postLogoutRedirectUri=Et.getAbsoluteUrl(ri(),ri())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",u.correlationId),u}getLogoutHintFromIdTokenClaims(i){const u=i.idTokenClaims;if(u){if(u.login_hint)return u.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(i){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const u=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(i);return new vc(u,this.performanceClient)}async getClientConfiguration(i){const{serverTelemetryManager:u,requestAuthority:g,requestAzureCloudOptions:w,requestExtraQueryParameters:T,account:R}=i;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetClientConfiguration,this.correlationId);const L=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:g,requestAzureCloudOptions:w,requestExtraQueryParameters:T,account:R}),K=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:L,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:K.loggerCallback,piiLoggingEnabled:K.piiLoggingEnabled,logLevel:K.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:u,libraryInfo:{sku:nr.MSAL_SKU,version:kr,cpu:e.EMPTY_STRING,os:e.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(i,u){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const g=this.getRedirectUri(i.redirectUri),w={interactionType:u},T=pa.setRequestState(this.browserCrypto,i&&i.state||e.EMPTY_STRING,w),L={...await Ae(uo,q.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...i,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:g,state:T,nonce:i.nonce||or(),responseMode:this.config.auth.OIDCOptions.serverResponseType},K={...L,httpMethod:Na(L,this.config.auth.protocolMode)};if(i.loginHint||i.sid)return K;const ne=i.account||this.browserStorage.getActiveAccount(this.correlationId);return ne&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${ne.homeAccountId}`,this.correlationId),K.account=ne),K}}function pu(S,i){if(!i)return null;try{return pa.parseRequestState(S,i).libraryState.meta}catch{throw ke(be)}}function si(S,i,u){const g=Rl(S);if(!g)throw qo(S)?(u.error(`A ${i} is present in the iframe but it does not contain known properties. It's likely that the ${i} has been replaced by code running on the redirectUri page.`),u.errorPii(`The ${i} detected is: ${S}`),Be(va)):(u.error(`The request has returned to the redirectUri but a ${i} is not present. It's likely that the ${i} has been removed or the page has been redirected by code running on the redirectUri page.`),Be(Ec));return g}function Tp(S,i,u){if(!S.state)throw Be(Ss);const g=pu(i,S.state);if(!g)throw Be(so);if(g.interactionType!==u)throw Be(at)}class sm{constructor(i,u,g,w,T){this.authModule=i,this.browserStorage=u,this.authCodeRequest=g,this.logger=w,this.performanceClient=T}async handleCodeResponse(i,u){this.performanceClient.addQueueMeasurement(q.HandleCodeResponse,u.correlationId);let g;try{g=Zg(i,u.state)}catch(w){throw w instanceof kt&&w.subError===Kr?Be(Kr):w}return Ae(this.handleCodeResponseFromServer.bind(this),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,u.correlationId)(g,u)}async handleCodeResponseFromServer(i,u,g=!0){if(this.performanceClient.addQueueMeasurement(q.HandleCodeResponseFromServer,u.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await Ae(this.authModule.updateAuthority.bind(this.authModule),q.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,u.correlationId)(i.cloud_instance_host_name,u.correlationId),g&&(i.nonce=u.nonce||void 0),i.state=u.state,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const T=this.createCcsCredentials(u);T&&(this.authCodeRequest.ccsCredential=T)}return await Ae(this.authModule.acquireToken.bind(this.authModule),q.AuthClientAcquireToken,this.logger,this.performanceClient,u.correlationId)(this.authCodeRequest,i)}createCcsCredentials(i){return i.account?{credential:i.account.homeAccountId,type:to.HOME_ACCOUNT_ID}:i.loginHint?{credential:i.loginHint,type:to.UPN}:null}}const yu="ContentError",Sp="PageException",vu="user_switch",xp="USER_INTERACTION_REQUIRED",Ew="USER_CANCEL",Aw="NO_NETWORK",Dt="DISABLED",$t="ACCOUNT_UNAVAILABLE",ht="UX_NOT_ALLOWED",Ct=-2147186943,Lt={[vu]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class yn extends W{constructor(i,u,g){super(i,u),Object.setPrototypeOf(this,yn.prototype),this.name="NativeAuthError",this.ext=g}}function $r(S){if(S.ext&&S.ext.status&&S.ext.status===Dt||S.ext&&S.ext.error&&S.ext.error===Ct)return!0;switch(S.errorCode){case yu:case Sp:return!0;default:return!1}}function Ki(S,i,u){if(u&&u.status)switch(u.status){case $t:return ga(Ii);case xp:return new kn(S,i);case Ew:return Be(Kr);case Aw:return Be(qt);case ht:return ga(vs)}return new yn(S,Lt[S]||i,u)}class th extends ii{async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentCacheClientAcquireToken,i.correlationId);const u=this.initializeServerTelemetryManager(Rt.acquireTokenSilent_silentFlow),g=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:u,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,account:i.account}),w=new wc(g,this.performanceClient);this.logger.verbose("Silent auth client created");try{const R=(await Ae(w.acquireCachedToken.bind(w),q.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,i.correlationId)(i))[0];return this.performanceClient.addFields({fromCache:!0},i.correlationId),R}catch(T){throw T instanceof ka&&T.errorCode===_r&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),T}}logout(i){this.logger.verbose("logoutRedirect called");const u=this.initializeLogoutRequest(i);return this.clearCacheOnLogout(u.correlationId,u?.account)}}class ho extends eh{constructor(i,u,g,w,T,R,L,K,ne,ve,Se,je){super(i,u,g,w,T,R,K,ne,je),this.apiId=L,this.accountId=ve,this.platformAuthProvider=ne,this.nativeStorageManager=Se,this.silentCacheClient=new th(i,this.nativeStorageManager,g,w,T,R,K,ne,je);const Ye=this.platformAuthProvider.getExtensionName();this.skus=Es.makeExtraSkuString({libraryName:nr.MSAL_SKU,libraryVersion:kr,extensionName:Ye,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(i){i.extraParameters={...i.extraParameters,[Gg]:this.skus}}async acquireToken(i,u){this.performanceClient.addQueueMeasurement(q.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const g=this.performanceClient.startMeasurement(q.NativeInteractionClientAcquireToken,this.correlationId),w=bn(),T=this.initializeServerTelemetryManager(this.apiId);try{const R=await this.initializeNativeRequest(i);try{const K=await this.acquireTokensFromCache(this.accountId,R);return g.end({success:!0,isNativeBroker:!1,fromCache:!0}),K}catch(K){if(u===An.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),g.end({success:!1,brokerErrorCode:"cache_request_failed"}),K;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const L=await this.platformAuthProvider.sendMessage(R);return await this.handleNativeResponse(L,R,w).then(K=>(g.end({success:!0,isNativeBroker:!0,requestId:K.requestId}),T.clearNativeBrokerErrorCode(),K)).catch(K=>{throw g.end({success:!1,errorCode:K.errorCode,subErrorCode:K.subError}),K})}catch(R){throw R instanceof yn&&T.setNativeBrokerErrorCode(R.errorCode),g.end({success:!1}),R}}createSilentCacheRequest(i,u){return{authority:i.authority,correlationId:this.correlationId,scopes:rn.fromString(i.scope).asArray(),account:u,forceRefresh:!1}}async acquireTokensFromCache(i,u){if(!i)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ke(yo);const g=this.browserStorage.getBaseAccountInfo({nativeAccountId:i},this.correlationId);if(!g)throw ke(yo);try{const w=this.createSilentCacheRequest(u,g),T=await this.silentCacheClient.acquireToken(w),R={...g,idTokenClaims:T?.idTokenClaims,idToken:T?.idToken};return{...T,account:R}}catch(w){throw w}}async acquireTokenRedirect(i,u){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...g}=i;delete g.onRedirectNavigate;const w=await this.initializeNativeRequest(g);try{await this.platformAuthProvider.sendMessage(w)}catch(L){if(L instanceof yn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(L.errorCode),$r(L)))throw L}this.browserStorage.setTemporaryCache(En.NATIVE_REQUEST,JSON.stringify(w),!0);const T={apiId:Rt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},R=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(i.redirectUri);u.end({success:!0}),await this.navigationClient.navigateExternal(R,T)}async handleRedirectPromise(i,u){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const g=this.browserStorage.getCachedNativeRequest();if(!g)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),i&&u&&i?.addFields({errorCode:"no_cached_request"},u),null;const{prompt:w,...T}=g;w&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(En.NATIVE_REQUEST));const R=bn();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const L=await this.platformAuthProvider.sendMessage(T),K=await this.handleNativeResponse(L,T,R);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),i&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),K}catch(L){throw L}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(i,u,g){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const w=wn(i.id_token,Gr),T=this.createHomeAccountIdentifier(i,w),R=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:u.accountId},this.correlationId)?.homeAccountId;if(u.extraParameters?.child_client_id&&i.account.id!==u.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(T!==R&&i.account.id!==u.accountId)throw Ki(vu);const L=await this.getDiscoveredAuthority({requestAuthority:u.authority}),K=Kl(this.browserStorage,L,T,Gr,this.correlationId,w,i.client_info,void 0,w.tid,void 0,i.account.id,this.logger);i.expires_in=Number(i.expires_in);const ne=await this.generateAuthenticationResult(i,u,w,K,L.canonicalAuthority,g);return await this.cacheAccount(K,this.correlationId),await this.cacheNativeTokens(i,u,T,w,i.access_token,ne.tenantId,g),ne}createHomeAccountIdentifier(i,u){return Sr.generateHomeAccountId(i.client_info||e.EMPTY_STRING,un.Default,this.logger,this.browserCrypto,u)}generateScopes(i,u){return u?rn.fromString(u):rn.fromString(i)}async generatePopAccessToken(i,u){if(u.tokenType===Y.POP&&u.signPopToken){if(i.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),i.shr;const g=new ya(this.browserCrypto),w={resourceRequestMethod:u.resourceRequestMethod,resourceRequestUri:u.resourceRequestUri,shrClaims:u.shrClaims,shrNonce:u.shrNonce};if(!u.keyId)throw ke(Bo);return g.signPopToken(i.access_token,u.keyId,w)}else return i.access_token}async generateAuthenticationResult(i,u,g,w,T,R){const L=this.addTelemetryFromNativeResponse(i.properties.MATS),K=this.generateScopes(u.scope,i.scope),ne=i.account.properties||{},ve=ne.UID||g.oid||g.sub||e.EMPTY_STRING,Se=ne.TenantId||g.tid||e.EMPTY_STRING,je=kl(w.getAccountInfo(),void 0,g,i.id_token);je.nativeAccountId!==i.account.id&&(je.nativeAccountId=i.account.id);const Ye=await this.generatePopAccessToken(i,u),Ut=u.tokenType===Y.POP?Y.POP:Y.BEARER;return{authority:T,uniqueId:ve,tenantId:Se,scopes:K.asArray(),account:je,idToken:i.id_token,idTokenClaims:g,accessToken:Ye,fromCache:L?this.isResponseFromCache(L):!1,expiresOn:ro(R+i.expires_in),tokenType:Ut,correlationId:this.correlationId,state:i.state,fromNativeBroker:!0}}async cacheAccount(i,u){await this.browserStorage.setAccount(i,this.correlationId),this.browserStorage.removeAccountContext(i.getAccountInfo(),u)}cacheNativeTokens(i,u,g,w,T,R,L){const K=fc(g,u.authority,i.id_token||"",u.clientId,w.tid||""),ne=u.tokenType===Y.POP?e.SHR_NONCE_VALIDITY:(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,ve=L+ne,Se=this.generateScopes(i.scope,u.scope),je=oo(g,u.authority,T,u.clientId,w.tid||R,Se.printScopes(),ve,0,Gr,void 0,u.tokenType,void 0,u.keyId),Ye={idToken:K,accessToken:je};return this.nativeStorageManager.saveCacheRecord(Ye,this.correlationId,u.storeInCache)}getExpiresInValue(i,u){return i===Y.POP?e.SHR_NONCE_VALIDITY:(typeof u=="string"?parseInt(u,10):u)||0}addTelemetryFromNativeResponse(i){const u=this.getMATSFromResponse(i);return u?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:u.broker_version,matsAccountJoinOnStart:u.account_join_on_start,matsAccountJoinOnEnd:u.account_join_on_end,matsDeviceJoin:u.device_join,matsPromptBehavior:u.prompt_behavior,matsApiErrorCode:u.api_error_code,matsUiVisible:u.ui_visible,matsSilentCode:u.silent_code,matsSilentBiSubCode:u.silent_bi_sub_code,matsSilentMessage:u.silent_message,matsSilentStatus:u.silent_status,matsHttpStatus:u.http_status,matsHttpEventCount:u.http_event_count},this.correlationId),u):null}getMATSFromResponse(i){if(i)try{return JSON.parse(i)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(i){return typeof i.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!i.is_cached}async initializeNativeRequest(i){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const u=await this.getCanonicalAuthority(i),{scopes:g,...w}=i,T=new rn(g||[]);T.appendScopes(a);const R={...w,accountId:this.accountId,clientId:this.config.auth.clientId,authority:u.urlString,scope:T.printScopes(),redirectUri:this.getRedirectUri(i.redirectUri),prompt:this.getPrompt(i.prompt),correlationId:this.correlationId,tokenType:i.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...i.extraQueryParameters,...i.tokenQueryParameters},extendedExpiryToken:!1,keyId:i.popKid};if(R.signPopToken&&i.popKid)throw Be(eu);if(this.handleExtraBrokerParams(R),R.extraParameters=R.extraParameters||{},R.extraParameters.telemetry=Qn.MATS_TELEMETRY,i.authenticationScheme===Y.POP){const L={resourceRequestUri:i.resourceRequestUri,resourceRequestMethod:i.resourceRequestMethod,shrClaims:i.shrClaims,shrNonce:i.shrNonce},K=new ya(this.browserCrypto);let ne;if(R.keyId)ne=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:R.keyId})),R.signPopToken=!1;else{const ve=await Ae(K.generateCnf.bind(K),q.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(L,this.logger);ne=ve.reqCnfString,R.keyId=ve.kid,R.signPopToken=!0}R.reqCnf=ne}return this.addRequestSKUs(R),R}async getCanonicalAuthority(i){const u=i.authority||this.config.auth.authority;i.account&&await this.getDiscoveredAuthority({requestAuthority:u,requestAzureCloudOptions:i.azureCloudOptions,account:i.account});const g=new Et(u);return g.validateAsUri(),g}getPrompt(i){switch(this.apiId){case Rt.ssoSilent:case Rt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),v.NONE}if(!i){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(i){case v.NONE:case v.CONSENT:case v.LOGIN:case v.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),i;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${i} is not compatible with native flow`),Be(xa)}}handleExtraBrokerParams(i){const u=i.extraParameters&&i.extraParameters.hasOwnProperty(Hl)&&i.extraParameters.hasOwnProperty(gs)&&i.extraParameters.hasOwnProperty(da);if(!i.embeddedClientId&&!u)return;let g="";const w=i.redirectUri;i.embeddedClientId?(i.redirectUri=this.config.auth.redirectUri,g=i.embeddedClientId):i.extraParameters&&(i.redirectUri=i.extraParameters[gs],g=i.extraParameters[da]),i.extraParameters={child_client_id:g,child_redirect_uri:w},this.performanceClient?.addFields({embeddedClientId:g,embeddedRedirectUri:w},this.correlationId)}}async function an(S,i,u,g,w){const T=Jg({...S.auth,authority:i},u,g,w);if(yd(T,{sku:nr.MSAL_SKU,version:kr,os:"",cpu:""}),S.auth.protocolMode!==qn.OIDC&&vd(T,S.telemetry.application),u.platformBroker&&(Cf(T),w.addFields({isPlatformAuthorizeRequest:!0},u.correlationId),u.authenticationScheme===Y.POP)){const R=new Nr(g,w),L=new ya(R);let K;u.popKid?K=R.encodeKid(u.popKid):K=(await Ae(L.generateCnf.bind(L),q.PopTokenGenerateCnf,g,w,u.correlationId)(u,g)).reqCnfString,Tf(T,K)}return Bl(T,u.correlationId,w),T}async function ai(S,i,u,g,w){if(!u.codeChallenge)throw bt(Er);const T=await Ae(an,q.GetStandardParams,g,w,u.correlationId)(S,i,u,g,w);return ld(T,b.CODE),Cd(T,u.codeChallenge,e.S256_CODE_CHALLENGE_METHOD),_i(T,u.extraQueryParameters||{}),Mf(i,T,S.auth.encodeExtraQueryParams,u.extraQueryParameters)}async function Gi(S,i,u,g,w,T){if(!g.earJwk)throw Be(Wl);const R=await an(i,u,g,w,T);ld(R,b.IDTOKEN_TOKEN_REFRESHTOKEN),bo(R,g.earJwk);const L=new Map;_i(L,g.extraQueryParameters||{});const K=Mf(u,L,i.auth.encodeExtraQueryParams,g.extraQueryParameters);return Vr(S,K,R)}async function Cu(S,i,u,g,w,T){const R=await an(i,u,g,w,T);ld(R,b.CODE),Cd(R,g.codeChallenge,g.codeChallengeMethod||e.S256_CODE_CHALLENGE_METHOD),Wg(R,g.authorizePostBodyParameters||{});const L=new Map;_i(L,g.extraQueryParameters||{});const K=Mf(u,L,i.auth.encodeExtraQueryParams,g.extraQueryParameters);return Vr(S,K,R)}function Vr(S,i,u){const g=S.createElement("form");return g.method="post",g.action=i,u.forEach((w,T)=>{const R=S.createElement("input");R.hidden=!0,R.name=T,R.value=w,g.appendChild(R)}),S.body.appendChild(g),g}async function Oa(S,i,u,g,w,T,R,L,K,ne){if(L.verbose("Account id found, calling WAM for token"),!ne)throw Be(Sa);const ve=new Nr(L,K),Se=new ho(g,w,ve,L,R,g.system.navigationClient,u,K,ne,i,T,S.correlationId),{userRequestState:je}=pa.parseRequestState(ve,S.state);return Ae(Se.acquireToken.bind(Se),q.NativeInteractionClientAcquireToken,L,K,S.correlationId)({...S,state:je,prompt:void 0})}async function Ds(S,i,u,g,w,T,R,L,K,ne,ve,Se){if(tr.removeThrottle(R,w.auth.clientId,S),i.accountId)return Ae(Oa,q.HandleResponsePlatformBroker,ne,ve,S.correlationId)(S,i.accountId,g,w,R,L,K,ne,ve,Se);const je={...S,code:i.code||"",codeVerifier:u},Ye=new sm(T,R,je,ne,ve);return await Ae(Ye.handleCodeResponse.bind(Ye),q.HandleCodeResponse,ne,ve,S.correlationId)(i,S)}async function sr(S,i,u,g,w,T,R,L,K,ne,ve){if(tr.removeThrottle(T,g.auth.clientId,S),bs(i,S.state),!i.ear_jwe)throw Be(Od);if(!S.earJwk)throw Be(Wl);const Se=JSON.parse(await Ae(hp,q.DecryptEarResponse,K,ne,S.correlationId)(S.earJwk,i.ear_jwe));if(Se.accountId)return Ae(Oa,q.HandleResponsePlatformBroker,K,ne,S.correlationId)(S,Se.accountId,u,g,T,R,L,K,ne,ve);const je=new Xt(g.auth.clientId,T,new Nr(K,ne),K,null,null,ne);je.validateTokenResponse(Se);const Ye={code:"",state:S.state,nonce:S.nonce,client_info:Se.client_info,cloud_graph_host_name:Se.cloud_graph_host_name,cloud_instance_host_name:Se.cloud_instance_host_name,cloud_instance_name:Se.cloud_instance_name,msgraph_host:Se.msgraph_host};return await Ae(je.handleServerTokenResponse.bind(je),q.HandleServerTokenResponse,K,ne,S.correlationId)(Se,w,bn(),S,Ye,void 0,void 0,void 0,void 0)}const am=32;async function Kc(S,i,u){S.addQueueMeasurement(q.GeneratePkceCodes,u);const g=Vn(nh,q.GenerateCodeVerifier,i,S,u)(S,i,u),w=await Ae(rh,q.GenerateCodeChallengeFromVerifier,i,S,u)(g,S,i,u);return{verifier:g,challenge:w}}function nh(S,i,u){try{const g=new Uint8Array(am);return Vn(cu,q.GetRandomValues,i,S,u)(g),ti(g)}catch{throw Be(Wo)}}async function rh(S,i,u,g){i.addQueueMeasurement(q.GenerateCodeChallengeFromVerifier,g);try{const w=await Ae(au,q.Sha256Digest,u,i,g)(S,i,g);return ti(new Uint8Array(w))}catch{throw Be(Wo)}}class ko{constructor(i,u,g,w){this.logger=i,this.handshakeTimeoutMs=u,this.extensionId=w,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=g,this.handshakeEvent=g.startMeasurement(q.NativeMessageHandlerHandshake),this.platformAuthType=Qn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(i){this.logger.trace(this.platformAuthType+" - sendMessage called.");const u={method:Is.GetToken,request:i},g={channel:Qn.CHANNEL_ID,extensionId:this.extensionId,responseId:or(),body:u};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(g)}`),this.messageChannel.port1.postMessage(g);const w=await new Promise((R,L)=>{this.resolvers.set(g.responseId,{resolve:R,reject:L})});return this.validatePlatformBrokerResponse(w)}static async createProvider(i,u,g){i.trace("PlatformAuthExtensionHandler - createProvider called.");try{const w=new ko(i,u,g,Qn.PREFERRED_EXTENSION_ID);return await w.sendHandshakeRequest(),w}catch{const T=new ko(i,u,g);return await T.sendHandshakeRequest(),T}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const i={channel:Qn.CHANNEL_ID,extensionId:this.extensionId,responseId:or(),body:{method:Is.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=u=>{this.onChannelMessage(u)},window.postMessage(i,window.origin,[this.messageChannel.port2]),new Promise((u,g)=>{this.handshakeResolvers.set(i.responseId,{resolve:u,reject:g}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),g(Be(_c)),this.handshakeResolvers.delete(i.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(i){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),i.source!==window)return;const u=i.data;if(!(!u.channel||u.channel!==Qn.CHANNEL_ID)&&!(u.extensionId&&u.extensionId!==this.extensionId)&&u.body.method===Is.HandshakeRequest){const g=this.handshakeResolvers.get(u.responseId);if(!g){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${u.responseId}`);return}this.logger.verbose(u.extensionId?`Extension with id: ${u.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),g.reject(Be(kc))}}onChannelMessage(i){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const u=i.data,g=this.resolvers.get(u.responseId),w=this.handshakeResolvers.get(u.responseId);try{const T=u.body.method;if(T===Is.Response){if(!g)return;const R=u.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(R)}`),R.status!=="Success")g.reject(Ki(R.code,R.description,R.ext));else if(R.result)R.result.code&&R.result.description?g.reject(Ki(R.result.code,R.result.description,R.result.ext)):g.resolve(R.result);else throw ue(D,"Event does not contain result.");this.resolvers.delete(u.responseId)}else if(T===Is.HandshakeResponse){if(!w){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${u.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=u.extensionId,this.extensionVersion=u.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),w.resolve(),this.handshakeResolvers.delete(u.responseId)}}catch(T){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${T}`),this.logger.errorPii(`Unable to parse ${i}`),g?g.reject(T):w&&w.reject(T)}}validatePlatformBrokerResponse(i){if(i.hasOwnProperty("access_token")&&i.hasOwnProperty("id_token")&&i.hasOwnProperty("client_info")&&i.hasOwnProperty("account")&&i.hasOwnProperty("scope")&&i.hasOwnProperty("expires_in"))return i;throw ue(D,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Qn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Un{constructor(i,u,g){this.logger=i,this.performanceClient=u,this.correlationId=g,this.platformAuthType=Qn.PLATFORM_DOM_PROVIDER}static async createProvider(i,u,g){if(i.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Qn.MICROSOFT_ENTRA_BROKERID))?.includes(Qn.PLATFORM_DOM_APIS))return i.trace("Platform auth api available in DOM"),new Un(i,u,g)}getExtensionId(){return Qn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Qn.DOM_API_NAME}async sendMessage(i){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const u=this.initializePlatformDOMRequest(i),g=await window.navigator.platformAuthentication.executeGetToken(u);return this.validatePlatformBrokerResponse(g)}catch(u){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),u}}initializePlatformDOMRequest(i){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:u,clientId:g,authority:w,scope:T,redirectUri:R,correlationId:L,state:K,storeInCache:ne,embeddedClientId:ve,extraParameters:Se,...je}=i,Ye=this.getDOMExtraParams(je);return{accountId:u,brokerId:this.getExtensionId(),authority:w,clientId:g,correlationId:L||this.correlationId,extraParameters:{...Se,...Ye},isSecurityTokenService:!1,redirectUri:R,scope:T,state:K,storeInCache:ne,embeddedClientId:ve}}validatePlatformBrokerResponse(i){if(i.hasOwnProperty("isSuccess")){if(i.hasOwnProperty("accessToken")&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("clientInfo")&&i.hasOwnProperty("account")&&i.hasOwnProperty("scopes")&&i.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(i);if(i.hasOwnProperty("error")){const u=i;if(u.isSuccess===!1&&u.error&&u.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Ki(u.error.code,u.error.description,{error:parseInt(u.error.errorCode),protocol_error:u.error.protocolError,status:u.error.status,properties:u.error.properties})}}throw ue(D,"Response missing expected properties.")}convertToPlatformBrokerResponse(i){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:i.accessToken,id_token:i.idToken,client_info:i.clientInfo,account:i.account,expires_in:i.expiresIn,scope:i.scopes,state:i.state||"",properties:i.properties||{},extendedLifetimeToken:i.extendedLifetimeToken??!1,shr:i.proofOfPossessionPayload}}getDOMExtraParams(i){return{...Object.entries(i).reduce((w,[T,R])=>(w[T]=String(R),w),{})}}}async function Ls(S,i,u){const g=new Pn(S||{},Ra,kr);g.trace("isPlatformBrokerAvailable called");const w=i||new la;return typeof window>"u"?(g.trace("Non-browser environment detected, returning false"),!1):!!await Ma(g,w,u||or())}async function Ma(S,i,u,g){S.trace("getPlatformAuthProvider called",u);const w=Gc();S.trace("Has client allowed platform auth via DOM API: "+w);let T;try{w&&(T=await Un.createProvider(S,i,u)),T||(S.trace("Platform auth via DOM API not available, checking for extension"),T=await ko.createProvider(S,g||Jd,i))}catch(R){S.trace("Platform auth not available",R)}return T}function Gc(){let S;try{return S=window[fn.SessionStorage],S?.getItem(ln)==="true"}catch{return!1}}function Pa(S,i,u,g){if(i.trace("isPlatformAuthAllowed called"),!S.system.allowPlatformBroker)return i.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!u)return i.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(g)switch(g){case Y.BEARER:case Y.POP:return i.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return i.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class cm extends ii{constructor(i,u,g,w,T,R,L,K,ne,ve){super(i,u,g,w,T,R,L,ne,ve),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=K,this.eventHandler=T}acquireToken(i,u){let g;try{if(g={popupName:this.generatePopupName(i.scopes||a,i.authority||this.config.auth.authority),popupWindowAttributes:i.popupWindowAttributes||{},popupWindowParent:i.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(i,g,u);{const T={...i,httpMethod:Na(i,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),g.popup=this.openSizedPopup("about:blank",g),this.acquireTokenPopupAsync(T,g,u)}}catch(w){return Promise.reject(w)}}logout(i){try{this.logger.verbose("logoutPopup called");const u=this.initializeLogoutRequest(i),g={popupName:this.generateLogoutPopupName(u),popupWindowAttributes:i?.popupWindowAttributes||{},popupWindowParent:i?.popupWindowParent??window},w=i&&i.authority,T=i&&i.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(u,g,w,T)):(this.logger.verbose("asyncPopup set to false, opening popup"),g.popup=this.openSizedPopup("about:blank",g),this.logoutPopupAsync(u,g,w,T))}catch(u){return Promise.reject(u)}}async acquireTokenPopupAsync(i,u,g){this.logger.verbose("acquireTokenPopupAsync called");const w=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,t.InteractionType.Popup);u.popup&&Pc(w.authority);const T=Pa(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme);return w.platformBroker=T,this.config.auth.protocolMode===qn.EAR?this.executeEarFlow(w,u):this.executeCodeFlow(w,u,g)}async executeCodeFlow(i,u,g){const w=i.correlationId,T=this.initializeServerTelemetryManager(Rt.acquireTokenPopup),R=g||await Ae(Kc,q.GeneratePkceCodes,this.logger,this.performanceClient,w)(this.performanceClient,this.logger,w),L={...i,codeChallenge:R.challenge};try{const K=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,w)({serverTelemetryManager:T,requestAuthority:L.authority,requestAzureCloudOptions:L.azureCloudOptions,requestExtraQueryParameters:L.extraQueryParameters,account:L.account});if(L.httpMethod===r.POST)return await this.executeCodeFlowWithPost(L,u,K,R.verifier);{const ne=await Ae(ai,q.GetAuthCodeUrl,this.logger,this.performanceClient,w)(this.config,K.authority,L,this.logger,this.performanceClient),ve=this.initiateAuthRequest(ne,u);this.eventHandler.emitEvent(Ue.POPUP_OPENED,t.InteractionType.Popup,{popupWindow:ve},null);const Se=await this.monitorPopupForHash(ve,u.popupWindowParent),je=Vn(si,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(Se,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Ae(Ds,q.HandleResponseCode,this.logger,this.performanceClient,w)(i,je,R.verifier,Rt.acquireTokenPopup,this.config,K,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(K){throw u.popup?.close(),K instanceof W&&(K.setCorrelationId(this.correlationId),T.cacheFailedRequest(K)),K}}async executeEarFlow(i,u){const g=i.correlationId,w=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,g)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),T=await Ae(lo,q.GenerateEarKey,this.logger,this.performanceClient,g)(),R={...i,earJwk:T},L=u.popup||this.openPopup("about:blank",u);(await Gi(L.document,this.config,w,R,this.logger,this.performanceClient)).submit();const ne=await Ae(this.monitorPopupForHash.bind(this),q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,g)(L,u.popupWindowParent),ve=Vn(si,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(ne,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Ae(sr,q.HandleResponseEar,this.logger,this.performanceClient,g)(R,ve,Rt.acquireTokenPopup,this.config,w,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(i,u,g,w){const T=i.correlationId,R=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,T)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),L=u.popup||this.openPopup("about:blank",u);(await Cu(L.document,this.config,R,i,this.logger,this.performanceClient)).submit();const ne=await Ae(this.monitorPopupForHash.bind(this),q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,T)(L,u.popupWindowParent),ve=Vn(si,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(ne,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Ae(Ds,q.HandleResponseCode,this.logger,this.performanceClient,T)(i,ve,w,Rt.acquireTokenPopup,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(i,u,g,w){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Ue.LOGOUT_START,t.InteractionType.Popup,i);const T=this.initializeServerTelemetryManager(Rt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,i.account);const R=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:T,requestAuthority:g,account:i.account||void 0});try{R.authority.endSessionEndpoint}catch{if(i.account?.homeAccountId&&i.postLogoutRedirectUri&&R.authority.protocolMode===qn.OIDC){if(this.eventHandler.emitEvent(Ue.LOGOUT_SUCCESS,t.InteractionType.Popup,i),w){const ne={apiId:Rt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ve=Et.getAbsoluteUrl(w,ri());await this.navigationClient.navigateInternal(ve,ne)}u.popup?.close();return}}const L=R.getLogoutUri(i);this.eventHandler.emitEvent(Ue.LOGOUT_SUCCESS,t.InteractionType.Popup,i);const K=this.openPopup(L,u);if(this.eventHandler.emitEvent(Ue.POPUP_OPENED,t.InteractionType.Popup,{popupWindow:K},null),await this.monitorPopupForHash(K,u.popupWindowParent).catch(()=>{}),w){const ne={apiId:Rt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ve=Et.getAbsoluteUrl(w,ri());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${ve}`),await this.navigationClient.navigateInternal(ve,ne)}else this.logger.verbose("No main window navigation requested")}catch(R){throw u.popup?.close(),R instanceof W&&(R.setCorrelationId(this.correlationId),T.cacheFailedRequest(R)),this.eventHandler.emitEvent(Ue.LOGOUT_FAILURE,t.InteractionType.Popup,null,R),this.eventHandler.emitEvent(Ue.LOGOUT_END,t.InteractionType.Popup),R}this.eventHandler.emitEvent(Ue.LOGOUT_END,t.InteractionType.Popup)}initiateAuthRequest(i,u){if(i)return this.logger.infoPii(`Navigate to: ${i}`),this.openPopup(i,u);throw this.logger.error("Navigate url is empty"),Be(Xo)}monitorPopupForHash(i,u){return new Promise((g,w)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const T=setInterval(()=>{if(i.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(T),w(Be(Kr));return}let R="";try{R=i.location.href}catch{}if(!R||R==="about:blank")return;clearInterval(T);let L="";const K=this.config.auth.OIDCOptions.serverResponseType;i&&(K===E.QUERY?L=i.location.search:L=i.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),g(L)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(i,u)})}openPopup(i,u){try{let g;if(u.popup?(g=u.popup,this.logger.verbosePii(`Navigating popup window to: ${i}`),g.location.assign(i)):typeof u.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${i}`),g=this.openSizedPopup(i,u)),!g)throw Be(xs);return g.focus&&g.focus(),this.currentWindow=g,u.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),g}catch(g){throw this.logger.error("error opening popup "+g.message),Be(on)}}openSizedPopup(i,{popupName:u,popupWindowAttributes:g,popupWindowParent:w}){const T=w.screenLeft?w.screenLeft:w.screenX,R=w.screenTop?w.screenTop:w.screenY,L=w.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,K=w.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let ne=g.popupSize?.width,ve=g.popupSize?.height,Se=g.popupPosition?.top,je=g.popupPosition?.left;return(!ne||ne<0||ne>L)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),ne=nr.POPUP_WIDTH),(!ve||ve<0||ve>K)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),ve=nr.POPUP_HEIGHT),(!Se||Se<0||Se>K)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),Se=Math.max(0,K/2-nr.POPUP_HEIGHT/2+R)),(!je||je<0||je>L)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),je=Math.max(0,L/2-nr.POPUP_WIDTH/2+T)),w.open(i,u,`width=${ne}, height=${ve}, top=${Se}, left=${je}, scrollbars=yes`)}unloadWindow(i){this.currentWindow&&this.currentWindow.close(),i.preventDefault()}cleanPopup(i,u){i.close(),u.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(i,u){return`${nr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${i.join("-")}.${u}.${this.correlationId}`}generateLogoutPopupName(i){const u=i.account&&i.account.homeAccountId;return`${nr.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${u}.${this.correlationId}`}}function _p(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const S=window.performance.getEntriesByType("navigation");return(S.length?S[0]:void 0)?.type}class wu extends ii{constructor(i,u,g,w,T,R,L,K,ne,ve){super(i,u,g,w,T,R,L,ne,ve),this.nativeStorage=K}async acquireToken(i){const u=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,t.InteractionType.Redirect);u.platformBroker=Pa(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme);const g=T=>{T.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Ue.RESTORE_FROM_BFCACHE,t.InteractionType.Redirect))},w=this.getRedirectStartPage(i.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${w}`),this.browserStorage.setTemporaryCache(En.ORIGIN_URI,w,!0),window.addEventListener("pageshow",g);try{this.config.auth.protocolMode===qn.EAR?await this.executeEarFlow(u):await this.executeCodeFlow(u,i.onRedirectNavigate)}catch(T){throw T instanceof W&&T.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",g),T}}async executeCodeFlow(i,u){const g=i.correlationId,w=this.initializeServerTelemetryManager(Rt.acquireTokenRedirect),T=await Ae(Kc,q.GeneratePkceCodes,this.logger,this.performanceClient,g)(this.performanceClient,this.logger,g),R={...i,codeChallenge:T.challenge};this.browserStorage.cacheAuthorizeRequest(R,T.verifier);try{if(R.httpMethod===r.POST)return await this.executeCodeFlowWithPost(R);{const L=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:w,requestAuthority:R.authority,requestAzureCloudOptions:R.azureCloudOptions,requestExtraQueryParameters:R.extraQueryParameters,account:R.account}),K=await Ae(ai,q.GetAuthCodeUrl,this.logger,this.performanceClient,i.correlationId)(this.config,L.authority,R,this.logger,this.performanceClient);return await this.initiateAuthRequest(K,u)}}catch(L){throw L instanceof W&&(L.setCorrelationId(this.correlationId),w.cacheFailedRequest(L)),L}}async executeEarFlow(i){const u=i.correlationId,g=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),w=await Ae(lo,q.GenerateEarKey,this.logger,this.performanceClient,u)(),T={...i,earJwk:w};return this.browserStorage.cacheAuthorizeRequest(T),(await Gi(document,this.config,g,T,this.logger,this.performanceClient)).submit(),new Promise((L,K)=>{setTimeout(()=>{K(Be(_a,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(i){const u=i.correlationId,g=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return this.browserStorage.cacheAuthorizeRequest(i),(await Cu(document,this.config,g,i,this.logger,this.performanceClient)).submit(),new Promise((T,R)=>{setTimeout(()=>{R(Be(_a,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(i="",u,g,w){const T=this.initializeServerTelemetryManager(Rt.handleRedirectPromise);try{const[R,L]=this.getRedirectResponse(i||"");if(!R)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),_p()!=="back_forward"?w.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const K=this.browserStorage.getTemporaryCache(En.ORIGIN_URI,!0)||e.EMPTY_STRING,ne=aa(K),ve=aa(window.location.href);if(ne===ve&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),K.indexOf("#")>-1&&$d(K),await this.handleResponse(R,u,g,T);if(this.config.auth.navigateToLoginRequestUrl){if(!du()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(En.URL_HASH,L,!0);const Se={apiId:Rt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let je=!0;if(!K||K==="null"){const Ye=Vf();this.browserStorage.setTemporaryCache(En.ORIGIN_URI,Ye,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),je=await this.navigationClient.navigateInternal(Ye,Se)}else this.logger.verbose(`Navigating to loginRequestUrl: ${K}`),je=await this.navigationClient.navigateInternal(K,Se);if(!je)return await this.handleResponse(R,u,g,T)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(R,u,g,T);return null}catch(R){throw R instanceof W&&(R.setCorrelationId(this.correlationId),T.cacheFailedRequest(R)),R}}getRedirectResponse(i){this.logger.verbose("getRedirectResponseHash called");let u=i;u||(this.config.auth.OIDCOptions.serverResponseType===E.QUERY?u=window.location.search:u=window.location.hash);let g=Rl(u);if(g){try{Tp(g,this.browserCrypto,t.InteractionType.Redirect)}catch(T){return T instanceof W&&this.logger.error(`Interaction type validation failed due to ${T.errorCode}: ${T.errorMessage}`),[null,""]}return qd(window),this.logger.verbose("Hash contains known properties, returning response hash"),[g,u]}const w=this.browserStorage.getTemporaryCache(En.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(En.URL_HASH)),w&&(g=Rl(w),g)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[g,w]):[null,""]}async handleResponse(i,u,g,w){if(!i.state)throw Be(Ss);if(i.ear_jwe){const L=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u.correlationId)({requestAuthority:u.authority,requestAzureCloudOptions:u.azureCloudOptions,requestExtraQueryParameters:u.extraQueryParameters,account:u.account});return Ae(sr,q.HandleResponseEar,this.logger,this.performanceClient,u.correlationId)(u,i,Rt.acquireTokenRedirect,this.config,L,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const R=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:w,requestAuthority:u.authority});return Ae(Ds,q.HandleResponseCode,this.logger,this.performanceClient,u.correlationId)(u,i,g,Rt.acquireTokenRedirect,this.config,R,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(i,u){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),i){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${i}`);const g={apiId:Rt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},w=u||this.config.auth.onRedirectNavigate;if(typeof w=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),w(i)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(i,g);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(i,g);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Be(Xo)}async logout(i){this.logger.verbose("logoutRedirect called");const u=this.initializeLogoutRequest(i),g=this.initializeServerTelemetryManager(Rt.logout);try{this.eventHandler.emitEvent(Ue.LOGOUT_START,t.InteractionType.Redirect,i),await this.clearCacheOnLogout(this.correlationId,u.account);const w={apiId:Rt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:g,requestAuthority:i&&i.authority,requestExtraQueryParameters:i?.extraQueryParameters,account:i&&i.account||void 0});if(T.authority.protocolMode===qn.OIDC)try{T.authority.endSessionEndpoint}catch{if(u.account?.homeAccountId){this.eventHandler.emitEvent(Ue.LOGOUT_SUCCESS,t.InteractionType.Redirect,u);return}}const R=T.getLogoutUri(u);if(this.eventHandler.emitEvent(Ue.LOGOUT_SUCCESS,t.InteractionType.Redirect,u),i&&typeof i.onRedirectNavigate=="function")if(i.onRedirectNavigate(R)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ao.SIGNOUT),await this.navigationClient.navigateExternal(R,w);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,ao.SIGNOUT),await this.navigationClient.navigateExternal(R,w);return}}catch(w){throw w instanceof W&&(w.setCorrelationId(this.correlationId),g.cacheFailedRequest(w)),this.eventHandler.emitEvent(Ue.LOGOUT_FAILURE,t.InteractionType.Redirect,null,w),this.eventHandler.emitEvent(Ue.LOGOUT_END,t.InteractionType.Redirect),w}this.eventHandler.emitEvent(Ue.LOGOUT_END,t.InteractionType.Redirect)}getRedirectStartPage(i){const u=i||window.location.href;return Et.getAbsoluteUrl(u,ri())}}async function lm(S,i,u,g,w){if(i.addQueueMeasurement(q.SilentHandlerInitiateAuthRequest,g),!S)throw u.info("Navigate url is empty"),Be(Xo);return w?Ae(Ip,q.SilentHandlerLoadFrame,u,i,g)(S,w,i,g):Vn(Rp,q.SilentHandlerLoadFrameSync,u,i,g)(S)}async function Yr(S,i,u,g,w){const T=oh();if(!T.contentDocument)throw"No document associated with iframe!";return(await Cu(T.contentDocument,S,i,u,g,w)).submit(),T}async function kp(S,i,u,g,w){const T=oh();if(!T.contentDocument)throw"No document associated with iframe!";return(await Gi(T.contentDocument,S,i,u,g,w)).submit(),T}async function Pr(S,i,u,g,w,T,R){return g.addQueueMeasurement(q.SilentHandlerMonitorIframeForHash,T),new Promise((L,K)=>{i<Lc&&w.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${i}ms) than the default (${Lc}ms). This may result in timeouts.`);const ne=window.setTimeout(()=>{window.clearInterval(ve),K(Be(_s))},i),ve=window.setInterval(()=>{let Se="";const je=S.contentWindow;try{Se=je?je.location.href:""}catch{}if(!Se||Se==="about:blank")return;let Ye="";je&&(R===E.QUERY?Ye=je.location.search:Ye=je.location.hash),window.clearTimeout(ne),window.clearInterval(ve),L(Ye)},u)}).finally(()=>{Vn(Us,q.RemoveHiddenIframe,w,g,T)(S)})}function Ip(S,i,u,g){return u.addQueueMeasurement(q.SilentHandlerLoadFrame,g),new Promise((w,T)=>{const R=oh();window.setTimeout(()=>{if(!R){T("Unable to load iframe");return}R.src=S,w(R)},i)})}function Rp(S){const i=oh();return i.src=S,i}function oh(){const S=document.createElement("iframe");return S.className="msalSilentIframe",S.style.visibility="hidden",S.style.position="absolute",S.style.width=S.style.height="0",S.style.border="0",S.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(S),S}function Us(S){document.body===S.parentNode&&document.body.removeChild(S)}class ih extends ii{constructor(i,u,g,w,T,R,L,K,ne,ve,Se){super(i,u,g,w,T,R,K,ve,Se),this.apiId=L,this.nativeStorage=ne}async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentIframeClientAcquireToken,i.correlationId),!i.loginHint&&!i.sid&&(!i.account||!i.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const u={...i};u.prompt?u.prompt!==v.NONE&&u.prompt!==v.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${u.prompt} with ${v.NONE}`),u.prompt=v.NONE):u.prompt=v.NONE;const g=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(u,t.InteractionType.Silent);return g.platformBroker=Pa(this.config,this.logger,this.platformAuthProvider,g.authenticationScheme),Pc(g.authority),this.config.auth.protocolMode===qn.EAR?this.executeEarFlow(g):this.executeCodeFlow(g)}async executeCodeFlow(i){let u;const g=this.initializeServerTelemetryManager(this.apiId);try{return u=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:g,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),await Ae(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,i.correlationId)(u,i)}catch(w){if(w instanceof W&&(w.setCorrelationId(this.correlationId),g.cacheFailedRequest(w)),!u||!(w instanceof W)||w.errorCode!==nr.INVALID_GRANT_ERROR)throw w;return this.performanceClient.addFields({retryError:w.errorCode},this.correlationId),await Ae(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(u,i)}}async executeEarFlow(i){const u=i.correlationId,g=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),w=await Ae(lo,q.GenerateEarKey,this.logger,this.performanceClient,u)(),T={...i,earJwk:w},R=await Ae(kp,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,u)(this.config,g,T,this.logger,this.performanceClient),L=this.config.auth.OIDCOptions.serverResponseType,K=await Ae(Pr,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,u)(R,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,u,L),ne=Vn(si,q.DeserializeResponse,this.logger,this.performanceClient,u)(K,L,this.logger);return Ae(sr,q.HandleResponseEar,this.logger,this.performanceClient,u)(T,ne,this.apiId,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Be(Mi))}async silentTokenHelper(i,u){const g=u.correlationId;this.performanceClient.addQueueMeasurement(q.SilentIframeClientTokenHelper,g);const w=await Ae(Kc,q.GeneratePkceCodes,this.logger,this.performanceClient,g)(this.performanceClient,this.logger,g),T={...u,codeChallenge:w.challenge};let R;if(u.httpMethod===r.POST)R=await Ae(Yr,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,g)(this.config,i.authority,T,this.logger,this.performanceClient);else{const ve=await Ae(ai,q.GetAuthCodeUrl,this.logger,this.performanceClient,g)(this.config,i.authority,T,this.logger,this.performanceClient);R=await Ae(lm,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,g)(ve,this.performanceClient,this.logger,g,this.config.system.navigateFrameWait)}const L=this.config.auth.OIDCOptions.serverResponseType,K=await Ae(Pr,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,g)(R,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,g,L),ne=Vn(si,q.DeserializeResponse,this.logger,this.performanceClient,g)(K,L,this.logger);return Ae(Ds,q.HandleResponseCode,this.logger,this.performanceClient,g)(u,ne,w.verifier,this.apiId,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class um extends ii{async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentRefreshClientAcquireToken,i.correlationId);const u=await Ae(uo,q.InitializeBaseRequest,this.logger,this.performanceClient,i.correlationId)(i,this.config,this.performanceClient,this.logger),g={...i,...u};i.redirectUri&&(g.redirectUri=this.getRedirectUri(i.redirectUri));const w=this.initializeServerTelemetryManager(Rt.acquireTokenSilent_silentFlow),T=await this.createRefreshTokenClient({serverTelemetryManager:w,authorityUrl:g.authority,azureCloudOptions:g.azureCloudOptions,account:g.account});return Ae(T.acquireTokenByRefreshToken.bind(T),q.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(g).catch(R=>{throw R.setCorrelationId(this.correlationId),w.cacheFailedRequest(R),R})}logout(){return Promise.reject(Be(Mi))}async createRefreshTokenClient(i){const u=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i.serverTelemetryManager,requestAuthority:i.authorityUrl,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return new Cc(u,this.performanceClient)}}class qc{constructor(i,u,g,w){this.isBrowserEnvironment=typeof window<"u",this.config=i,this.storage=u,this.logger=g,this.cryptoObj=w}async loadExternalTokens(i,u,g){if(!this.isBrowserEnvironment)throw Be(Pi);const w=i.correlationId||or(),T=u.id_token?wn(u.id_token,Gr):void 0,R={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},L=i.authority?new dn(dn.generateAuthority(i.authority,i.azureCloudOptions),this.config.system.networkClient,this.storage,R,this.logger,i.correlationId||or()):void 0,K=await this.loadAccount(i,g.clientInfo||u.client_info||"",w,T,L),ne=await this.loadIdToken(u,K.homeAccountId,K.environment,K.realm,w),ve=await this.loadAccessToken(i,u,K.homeAccountId,K.environment,K.realm,g,w),Se=await this.loadRefreshToken(u,K.homeAccountId,K.environment,w);return this.generateAuthenticationResult(i,{account:K,idToken:ne,accessToken:ve,refreshToken:Se},T,L)}async loadAccount(i,u,g,w,T){if(this.logger.verbose("TokenCache - loading account"),i.account){const ne=Sr.createFromAccountInfo(i.account);return await this.storage.setAccount(ne,g),ne}else if(!T||!u&&!w)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Be(ba);const R=Sr.generateHomeAccountId(u,T.authorityType,this.logger,this.cryptoObj,w),L=w?.tid,K=Kl(this.storage,T,R,Gr,g,w,u,T.hostnameAndPort,L,void 0,void 0,this.logger);return await this.storage.setAccount(K,g),K}async loadIdToken(i,u,g,w,T){if(!i.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const R=fc(u,g,i.id_token,this.config.auth.clientId,w);return await this.storage.setIdTokenCredential(R,T),R}async loadAccessToken(i,u,g,w,T,R,L){if(u.access_token)if(u.expires_in){if(!u.scope&&(!i.scopes||!i.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const K=u.scope?rn.fromString(u.scope):new rn(i.scopes),ne=R.expiresOn||u.expires_in+bn(),ve=R.extendedExpiresOn||(u.ext_expires_in||u.expires_in)+bn(),Se=oo(g,w,u.access_token,this.config.auth.clientId,T,K.printScopes(),ne,ve,Gr);return await this.storage.setAccessTokenCredential(Se,L),Se}async loadRefreshToken(i,u,g,w){if(!i.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const T=kf(u,g,i.refresh_token,this.config.auth.clientId,i.foci,void 0,i.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(T,w),T}generateAuthenticationResult(i,u,g,w){let T="",R=[],L=null,K;u?.accessToken&&(T=u.accessToken.secret,R=rn.fromString(u.accessToken.target).asArray(),L=ro(u.accessToken.expiresOn),K=ro(u.accessToken.extendedExpiresOn));const ne=u.account;return{authority:w?w.canonicalAuthority:"",uniqueId:u.account.localAccountId,tenantId:u.account.realm,scopes:R,account:ne.getAccountInfo(),idToken:u.idToken?.secret||"",idTokenClaims:g||{},accessToken:T,fromCache:!0,expiresOn:L,correlationId:i.correlationId||"",requestId:"",extExpiresOn:K,familyId:u.refreshToken?.familyId||"",tokenType:u?.accessToken?.tokenType||"",state:i.state||"",cloudGraphHostName:ne.cloudGraphHostName||"",msGraphHost:ne.msGraphHost||"",fromNativeBroker:!1}}}class Np extends vc{constructor(i){super(i),this.includeRedirectUri=!1}}class Op extends ii{constructor(i,u,g,w,T,R,L,K,ne,ve){super(i,u,g,w,T,R,K,ne,ve),this.apiId=L}async acquireToken(i){if(!i.code)throw Be(ks);const u=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(i,t.InteractionType.Silent),g=this.initializeServerTelemetryManager(this.apiId);try{const w={...u,code:i.code},T=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:g,requestAuthority:u.authority,requestAzureCloudOptions:u.azureCloudOptions,requestExtraQueryParameters:u.extraQueryParameters,account:u.account}),R=new Np(T);this.logger.verbose("Auth code client created");const L=new sm(R,this.browserStorage,w,this.logger,this.performanceClient);return await Ae(L.handleCodeResponseFromServer.bind(L),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,i.correlationId)({code:i.code,msgraph_host:i.msGraphHost,cloud_graph_host_name:i.cloudGraphHostName,cloud_instance_host_name:i.cloudInstanceHostName},u,!1)}catch(w){throw w instanceof W&&(w.setCorrelationId(this.correlationId),g.cacheFailedRequest(w)),w}}logout(){return Promise.reject(Be(Mi))}}function Mp(S,i,u){const g=window.msal?.clientIds||[],w=g.length,T=g.filter(R=>R===S).length;T>1&&u.warning("There is already an instance of MSAL.js in the window with the same client id."),i.add({msalInstanceCount:w,sameClientIdInstanceCount:T})}function $c(S,i,u){try{hu(S)}catch(g){throw i.end({success:!1},g,u),g}}class Da{constructor(i){this.operatingContext=i,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=i.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Nr(this.logger,this.performanceClient):Cn,this.eventHandler=new Fc(this.logger),this.browserStorage=this.isBrowserEnvironment?new zc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,xd(this.config.auth)):gu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const u={cacheLocation:fn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:fn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new zc(this.config.auth.clientId,u,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new qc(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(i,u){const g=new Da(i);return await g.initialize(u),g}trackPageVisibility(i){i&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},i))}async initialize(i,u){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Ue.INITIALIZE_END);return}const g=i?.correlationId||this.getRequestCorrelationId(),w=this.config.system.allowPlatformBroker,T=this.performanceClient.startMeasurement(q.InitializeClientApplication,g);if(this.eventHandler.emitEvent(Ue.INITIALIZE_START),!u)try{this.logMultipleInstances(T)}catch{}if(await Ae(this.browserStorage.initialize.bind(this.browserStorage),q.InitializeCache,this.logger,this.performanceClient,g)(g),w)try{this.platformAuthProvider=await Ma(this.logger,this.performanceClient,g,this.config.system.nativeBrokerHandshakeTimeout)}catch(R){this.logger.verbose(R)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Vn(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),q.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,g)(g)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(g),this.initialized=!0,this.eventHandler.emitEvent(Ue.INITIALIZE_END),T.end({allowPlatformBroker:w,success:!0})}async handleRedirectPromise(i){if(this.logger.verbose("handleRedirectPromise called"),xt(this.initialized),this.isBrowserEnvironment){const u=i||"";let g=this.redirectResponse.get(u);return typeof g>"u"?(g=this.handleRedirectPromiseInternal(i),this.redirectResponse.set(u,g),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),g}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(i){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===ao.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const g=this.getAllAccounts(),w=this.browserStorage.getCachedNativeRequest(),T=w&&this.platformAuthProvider&&!i;let R;this.eventHandler.emitEvent(Ue.HANDLE_REDIRECT_START,t.InteractionType.Redirect);let L;try{if(T&&this.platformAuthProvider){R=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,w?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),R.add({isPlatformBrokerRequest:!0});const K=new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,w.accountId,this.nativeInternalStorage,w.correlationId);L=Ae(K.handleRedirectPromise.bind(K),q.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,R.event.correlationId)(this.performanceClient,R.event.correlationId)}else{const[K,ne]=this.browserStorage.getCachedRequest(),ve=K.correlationId;R=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,ve),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const Se=this.createRedirectClient(ve);L=Ae(Se.handleRedirectPromise.bind(Se),q.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,R.event.correlationId)(i,K,ne,R)}}catch(K){throw this.browserStorage.resetRequestCache(),K}return L.then(K=>(K?(this.browserStorage.resetRequestCache(),g.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Ue.LOGIN_SUCCESS,t.InteractionType.Redirect,K),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Redirect,K),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),R.end({success:!0},void 0,K.account)):R.event.errorCode?R.end({success:!1},void 0):R.discard(),this.eventHandler.emitEvent(Ue.HANDLE_REDIRECT_END,t.InteractionType.Redirect),K)).catch(K=>{this.browserStorage.resetRequestCache();const ne=K;throw g.length>0?this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Redirect,null,ne):this.eventHandler.emitEvent(Ue.LOGIN_FAILURE,t.InteractionType.Redirect,null,ne),this.eventHandler.emitEvent(Ue.HANDLE_REDIRECT_END,t.InteractionType.Redirect),R.end({success:!1},ne),K})}async acquireTokenRedirect(i){const u=this.getRequestCorrelationId(i);this.logger.verbose("acquireTokenRedirect called",u);const g=this.performanceClient.startMeasurement(q.AcquireTokenPreRedirect,u);g.add({scenarioId:i.scenarioId});const w=i.onRedirectNavigate;if(w)i.onRedirectNavigate=R=>{const L=typeof w=="function"?w(R):void 0;return g.add({navigateCallbackResult:L!==!1}),g.event=g.end({success:!0},void 0,i.account)||g.event,L};else{const R=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=L=>{const K=typeof R=="function"?R(L):void 0;return g.add({navigateCallbackResult:K!==!1}),g.event=g.end({success:!0},void 0,i.account)||g.event,K}}const T=this.getAllAccounts().length>0;try{Vd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ao.SIGNIN),T?this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_START,t.InteractionType.Redirect,i):this.eventHandler.emitEvent(Ue.LOGIN_START,t.InteractionType.Redirect,i);let R;return this.platformAuthProvider&&this.canUsePlatformBroker(i)?R=new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(i),this.nativeInternalStorage,u).acquireTokenRedirect(i,g).catch(K=>{if(g.add({brokerErrorName:K.name,brokerErrorCode:K.errorCode}),K instanceof yn&&$r(K))return this.platformAuthProvider=void 0,this.createRedirectClient(u).acquireToken(i);if(K instanceof kn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(u).acquireToken(i);throw K}):R=this.createRedirectClient(u).acquireToken(i),await R}catch(R){throw this.browserStorage.resetRequestCache(),g.event.status===2?this.performanceClient.startMeasurement(q.AcquireTokenRedirect,u).end({success:!1},R,i.account):g.end({success:!1},R,i.account),T?this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Redirect,null,R):this.eventHandler.emitEvent(Ue.LOGIN_FAILURE,t.InteractionType.Redirect,null,R),R}}acquireTokenPopup(i){const u=this.getRequestCorrelationId(i),g=this.performanceClient.startMeasurement(q.AcquireTokenPopup,u);g.add({scenarioId:i.scenarioId});try{this.logger.verbose("acquireTokenPopup called",u),$c(this.initialized,g,i.account),this.browserStorage.setInteractionInProgress(!0,ao.SIGNIN)}catch(L){return Promise.reject(L)}const w=this.getAllAccounts();w.length>0?this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_START,t.InteractionType.Popup,i):this.eventHandler.emitEvent(Ue.LOGIN_START,t.InteractionType.Popup,i);let T;const R=this.getPreGeneratedPkceCodes(u);return this.canUsePlatformBroker(i)?(g.add({isPlatformBrokerRequest:!0}),T=this.acquireTokenNative({...i,correlationId:u},Rt.acquireTokenPopup).then(L=>(g.end({success:!0},void 0,L.account),L)).catch(L=>{if(g.add({brokerErrorName:L.name,brokerErrorCode:L.errorCode}),L instanceof yn&&$r(L))return this.platformAuthProvider=void 0,this.createPopupClient(u).acquireToken(i,R);if(L instanceof kn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(u).acquireToken(i,R);throw L})):T=this.createPopupClient(u).acquireToken(i,R),T.then(L=>(w.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ue.LOGIN_SUCCESS,t.InteractionType.Popup,L):this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Popup,L),g.end({success:!0,accessTokenSize:L.accessToken.length,idTokenSize:L.idToken.length},void 0,L.account),L)).catch(L=>(w.length>0?this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Popup,null,L):this.eventHandler.emitEvent(Ue.LOGIN_FAILURE,t.InteractionType.Popup,null,L),g.end({success:!1},L,i.account),Promise.reject(L))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(u)})}trackPageVisibilityWithMeasurement(){const i=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;i&&(this.logger.info("Perf: Visibility change detected in ",i.event.name),i.increment({visibilityChangeCount:1}))}async ssoSilent(i){const u=this.getRequestCorrelationId(i),g={...i,prompt:i.prompt,correlationId:u};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(q.SsoSilent,u),this.ssoSilentMeasurement?.add({scenarioId:i.scenarioId}),$c(this.initialized,this.ssoSilentMeasurement,i.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",u),this.eventHandler.emitEvent(Ue.SSO_SILENT_START,t.InteractionType.Silent,g);let w;return this.canUsePlatformBroker(g)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),w=this.acquireTokenNative(g,Rt.ssoSilent).catch(T=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:T.name,brokerErrorCode:T.errorCode}),T instanceof yn&&$r(T))return this.platformAuthProvider=void 0,this.createSilentIframeClient(g.correlationId).acquireToken(g);throw T})):w=this.createSilentIframeClient(g.correlationId).acquireToken(g),w.then(T=>(this.eventHandler.emitEvent(Ue.SSO_SILENT_SUCCESS,t.InteractionType.Silent,T),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:T.accessToken.length,idTokenSize:T.idToken.length},void 0,T.account),T)).catch(T=>{throw this.eventHandler.emitEvent(Ue.SSO_SILENT_FAILURE,t.InteractionType.Silent,null,T),this.ssoSilentMeasurement?.end({success:!1},T,i.account),T}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(i){const u=this.getRequestCorrelationId(i);this.logger.trace("acquireTokenByCode called",u);const g=this.performanceClient.startMeasurement(q.AcquireTokenByCode,u);$c(this.initialized,g),this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_BY_CODE_START,t.InteractionType.Silent,i),g.add({scenarioId:i.scenarioId});try{if(i.code&&i.nativeAccountId)throw Be(Aa);if(i.code){const w=i.code;let T=this.hybridAuthCodeResponses.get(w);return T?(this.logger.verbose("Existing acquireTokenByCode request found",u),g.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",u),T=this.acquireTokenByCodeAsync({...i,correlationId:u}).then(R=>(this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_BY_CODE_SUCCESS,t.InteractionType.Silent,R),this.hybridAuthCodeResponses.delete(w),g.end({success:!0,accessTokenSize:R.accessToken.length,idTokenSize:R.idToken.length},void 0,R.account),R)).catch(R=>{throw this.hybridAuthCodeResponses.delete(w),this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_BY_CODE_FAILURE,t.InteractionType.Silent,null,R),g.end({success:!1},R),R}),this.hybridAuthCodeResponses.set(w,T)),await T}else if(i.nativeAccountId)if(this.canUsePlatformBroker(i,i.nativeAccountId)){g.add({isPlatformBrokerRequest:!0});const w=await this.acquireTokenNative({...i,correlationId:u},Rt.acquireTokenByCode,i.nativeAccountId).catch(T=>{throw T instanceof yn&&$r(T)&&(this.platformAuthProvider=void 0),g.add({brokerErrorName:T.name,brokerErrorCode:T.errorCode}),T});return g.end({success:!0},void 0,w.account),w}else throw Be(xc);else throw Be(Ea)}catch(w){throw this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_BY_CODE_FAILURE,t.InteractionType.Silent,null,w),g.end({success:!1},w),w}}async acquireTokenByCodeAsync(i){return this.logger.trace("acquireTokenByCodeAsync called",i.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(q.AcquireTokenByCodeAsync,i.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(i.correlationId).acquireToken(i).then(w=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:w.fromCache}),w)).catch(w=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},w),w}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(i,u){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenFromCache,i.correlationId),u){case An.Default:case An.AccessToken:case An.AccessTokenAndRefreshToken:const g=this.createSilentCacheClient(i.correlationId);return Ae(g.acquireToken.bind(g),q.SilentCacheClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw ke(On)}}async acquireTokenByRefreshToken(i,u){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenByRefreshToken,i.correlationId),u){case An.Default:case An.AccessTokenAndRefreshToken:case An.RefreshToken:case An.RefreshTokenAndNetwork:const g=this.createSilentRefreshClient(i.correlationId);return Ae(g.acquireToken.bind(g),q.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw ke(On)}}async acquireTokenBySilentIframe(i){this.performanceClient.addQueueMeasurement(q.AcquireTokenBySilentIframe,i.correlationId);const u=this.createSilentIframeClient(i.correlationId);return Ae(u.acquireToken.bind(u),q.SilentIframeClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i)}async logout(i){const u=this.getRequestCorrelationId(i);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",u),this.logoutRedirect({correlationId:u,...i})}async logoutRedirect(i){const u=this.getRequestCorrelationId(i);return Vd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,ao.SIGNOUT),this.createRedirectClient(u).logout(i)}logoutPopup(i){try{const u=this.getRequestCorrelationId(i);return hu(this.initialized),this.browserStorage.setInteractionInProgress(!0,ao.SIGNOUT),this.createPopupClient(u).logout(i).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(u){return Promise.reject(u)}}async clearCache(i){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const u=this.getRequestCorrelationId(i);return this.createSilentCacheClient(u).logout(i)}getAllAccounts(i){const u=this.getRequestCorrelationId();return Or(this.logger,this.browserStorage,this.isBrowserEnvironment,u,i)}getAccount(i){const u=this.getRequestCorrelationId();return qr(i,this.logger,this.browserStorage,u)}getAccountByUsername(i){const u=this.getRequestCorrelationId();return om(i,this.logger,this.browserStorage,u)}getAccountByHomeId(i){const u=this.getRequestCorrelationId();return Mr(i,this.logger,this.browserStorage,u)}getAccountByLocalId(i){const u=this.getRequestCorrelationId();return im(i,this.logger,this.browserStorage,u)}setActiveAccount(i){const u=this.getRequestCorrelationId();Fi(i,this.browserStorage,u)}getActiveAccount(){const i=this.getRequestCorrelationId();return Ms(this.browserStorage,i)}async hydrateCache(i,u){this.logger.verbose("hydrateCache called");const g=Sr.createFromAccountInfo(i.account,i.cloudGraphHostName,i.msGraphHost);return await this.browserStorage.setAccount(g,i.correlationId),i.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(i,u)):this.browserStorage.hydrateCache(i,u)}async acquireTokenNative(i,u,g,w){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Be(Sa);return new ho(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,u,this.performanceClient,this.platformAuthProvider,g||this.getNativeAccountId(i),this.nativeInternalStorage,i.correlationId).acquireToken(i,w)}canUsePlatformBroker(i,u){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Pa(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(i.prompt)switch(i.prompt){case v.NONE:case v.CONSENT:case v.LOGIN:case v.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${i.prompt} is not compatible with platform broker flow, returning false`),!1}return!u&&!this.getNativeAccountId(i)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(i){const u=i.account||this.getAccount({loginHint:i.loginHint,sid:i.sid})||this.getActiveAccount();return u&&u.nativeAccountId||""}createPopupClient(i){return new cm(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createRedirectClient(i){return new wu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createSilentIframeClient(i){return new ih(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createSilentCacheClient(i){return new th(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,i)}createSilentRefreshClient(i){return new um(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,i)}createSilentAuthCodeClient(i){return new Op(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Rt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,i)}addEventCallback(i,u){return this.eventHandler.addEventCallback(i,u)}removeEventCallback(i){this.eventHandler.removeEventCallback(i)}addPerformanceCallback(i){return It(),this.performanceClient.addPerformanceCallback(i)}removePerformanceCallback(i){return this.performanceClient.removePerformanceCallback(i)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==fn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==fn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(i){this.logger=i}initializeWrapperLibrary(i,u){this.browserStorage.setWrapperMetadata(i,u)}setNavigationClient(i){this.navigationClient=i}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(i){return i?.correlationId?i.correlationId:this.isBrowserEnvironment?or():e.EMPTY_STRING}async loginRedirect(i){const u=this.getRequestCorrelationId(i);return this.logger.verbose("loginRedirect called",u),this.acquireTokenRedirect({correlationId:u,...i||Dd})}loginPopup(i){const u=this.getRequestCorrelationId(i);return this.logger.verbose("loginPopup called",u),this.acquireTokenPopup({correlationId:u,...i||Dd})}async acquireTokenSilent(i){const u=this.getRequestCorrelationId(i),g=this.performanceClient.startMeasurement(q.AcquireTokenSilent,u);g.add({cacheLookupPolicy:i.cacheLookupPolicy,scenarioId:i.scenarioId}),$c(this.initialized,g,i.account),this.logger.verbose("acquireTokenSilent called",u);const w=i.account||this.getActiveAccount();if(!w)throw Be(Ca);return this.acquireTokenSilentDeduped(i,w,u).then(T=>(g.end({success:!0,fromCache:T.fromCache,accessTokenSize:T.accessToken.length,idTokenSize:T.idToken.length},void 0,T.account),{...T,state:i.state,correlationId:u})).catch(T=>{throw T instanceof W&&T.setCorrelationId(u),g.end({success:!1},T,w),T})}async acquireTokenSilentDeduped(i,u,g){const w=vt(this.config.auth.clientId,{...i,authority:i.authority||this.config.auth.authority},u.homeAccountId),T=JSON.stringify(w),R=this.activeSilentTokenRequests.get(T);if(typeof R>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",g),this.performanceClient.addFields({deduped:!1},g);const L=Ae(this.acquireTokenSilentAsync.bind(this),q.AcquireTokenSilentAsync,this.logger,this.performanceClient,g)({...i,correlationId:g},u);return this.activeSilentTokenRequests.set(T,L),L.finally(()=>{this.activeSilentTokenRequests.delete(T)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",g),this.performanceClient.addFields({deduped:!0},g),R}async acquireTokenSilentAsync(i,u){const g=()=>this.trackPageVisibility(i.correlationId);this.performanceClient.addQueueMeasurement(q.AcquireTokenSilentAsync,i.correlationId),this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_START,t.InteractionType.Silent,i),i.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},i.correlationId),document.addEventListener("visibilitychange",g);const w=await Ae(Ap,q.InitializeSilentRequest,this.logger,this.performanceClient,i.correlationId)(i,u,this.config,this.performanceClient,this.logger),T=i.cacheLookupPolicy||An.Default;return this.acquireTokenSilentNoIframe(w,T).catch(async L=>{if(Tw(L,T))if(this.activeIframeRequest)if(T!==An.Skip){const[ne,ve]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${ve}`,w.correlationId);const Se=this.performanceClient.startMeasurement(q.AwaitConcurrentIframe,w.correlationId);Se.add({awaitIframeCorrelationId:ve});const je=await ne;if(Se.end({success:je}),je)return this.logger.verbose(`Parallel iframe request with correlationId: ${ve} succeeded. Retrying cache and/or RT redemption`,w.correlationId),this.acquireTokenSilentNoIframe(w,T);throw this.logger.info(`Iframe request with correlationId: ${ve} failed. Interaction is required.`),L}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",w.correlationId),Ae(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,w.correlationId)(w);else{let ne;return this.activeIframeRequest=[new Promise(ve=>{ne=ve}),w.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",w.correlationId),Ae(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,w.correlationId)(w).then(ve=>(ne(!0),ve)).catch(ve=>{throw ne(!1),ve}).finally(()=>{this.activeIframeRequest=void 0})}else throw L}).then(L=>(this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,L),this.performanceClient.addFields({fromCache:L.fromCache},i.correlationId),L)).catch(L=>{throw this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null,L),L}).finally(()=>{document.removeEventListener("visibilitychange",g)})}async acquireTokenSilentNoIframe(i,u){return Pa(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme)&&i.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},i.correlationId),this.acquireTokenNative(i,Rt.acquireTokenSilent_silentFlow,i.account.nativeAccountId,u).catch(async g=>{throw this.performanceClient.addFields({brokerErrorName:g.name,brokerErrorCode:g.errorCode},i.correlationId),g instanceof yn&&$r(g)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ke(On)):g})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),u===An.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Ae(this.acquireTokenFromCache.bind(this),q.AcquireTokenFromCache,this.logger,this.performanceClient,i.correlationId)(i,u).catch(g=>{if(u===An.AccessToken)throw g;return this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_NETWORK_START,t.InteractionType.Silent,i),Ae(this.acquireTokenByRefreshToken.bind(this),q.AcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,u)}))}async preGeneratePkceCodes(i){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Ae(Kc,q.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),Promise.resolve()}getPreGeneratedPkceCodes(i){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const u=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${u?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!u},i),u}logMultipleInstances(i){const u=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(u),Mp(u,i,this.logger)}}function Tw(S,i){const u=!(S instanceof kn&&S.subError!==xr),g=S.errorCode===nr.INVALID_GRANT_ERROR||S.errorCode===On,w=u&&g||S.errorCode===Ao||S.errorCode===Fl,T=sp.includes(i);return w&&T}function Sw(S){return S.status!==void 0}class xw{constructor(i,u,g,w){this.clientId=i,this.clientCapabilities=u,this.crypto=g,this.logger=w}toNaaTokenRequest(i){let u;i.extraQueryParameters===void 0?u=new Map:u=new Map(Object.entries(i.extraQueryParameters));const g=i.correlationId||this.crypto.createNewGuid(),w=bd(i.claims,this.clientCapabilities),T=i.scopes||a;return{platformBrokerId:i.account?.homeAccountId,clientId:this.clientId,authority:i.authority,scope:T.join(" "),correlationId:g,claims:Gn.isEmptyObj(w)?void 0:w,state:i.state,authenticationScheme:i.authenticationScheme||Y.BEARER,extraParameters:u}}fromNaaTokenResponse(i,u,g){if(!u.token.id_token||!u.token.access_token)throw ke(Ee);const w=ro(g+(u.token.expires_in||0)),T=wn(u.token.id_token,this.crypto.base64Decode),R=this.fromNaaAccountInfo(u.account,u.token.id_token,T),L=u.token.scope||i.scope;return{authority:u.token.authority||R.environment,uniqueId:R.localAccountId,tenantId:R.tenantId,scopes:L.split(" "),account:R,idToken:u.token.id_token,idTokenClaims:T,accessToken:u.token.access_token,fromCache:!1,expiresOn:w,tokenType:i.authenticationScheme||Y.BEARER,correlationId:i.correlationId,extExpiresOn:w,state:i.state}}fromNaaAccountInfo(i,u,g){const w=g||i.idTokenClaims,T=i.localAccountId||w?.oid||w?.sub||"",R=i.tenantId||w?.tid||"",L=i.homeAccountId||`${T}.${R}`,K=i.username||w?.preferred_username||"",ne=i.name||w?.name,ve=i.loginHint||w?.login_hint,Se=new Map,je=Ei(L,T,R,w);return Se.set(R,je),{homeAccountId:L,environment:i.environment,tenantId:R,username:K,localAccountId:T,name:ne,loginHint:ve,idToken:u,idTokenClaims:w,tenantProfiles:Se}}fromBridgeError(i){if(Sw(i))switch(i.status){case oi.UserCancel:return new Mn(ta);case oi.NoNetwork:return new Mn(Co);case oi.AccountUnavailable:return new Mn(yo);case oi.Disabled:return new Mn(zo);case oi.NestedAppAuthUnavailable:return new Mn(i.code||zo,i.description);case oi.TransientError:case oi.PersistentError:return new kt(i.code,i.description);case oi.UserInteractionRequired:return new kn(i.code,i.description);default:return new W(i.code,i.description)}else return new W("unknown_error","An unknown error occurred")}toAuthenticationResultFromCache(i,u,g,w,T){if(!u||!g)throw ke(Ee);const R=wn(u.secret,this.crypto.base64Decode),L=g.target||w.scopes.join(" ");return{authority:g.environment||i.environment,uniqueId:i.localAccountId,tenantId:i.tenantId,scopes:L.split(" "),account:i,idToken:u.secret,idTokenClaims:R||{},accessToken:g.secret,fromCache:!0,expiresOn:ro(g.expiresOn),extExpiresOn:ro(g.extendedExpiresOn),tokenType:w.authenticationScheme||Y.BEARER,correlationId:T,state:w.state}}}const dm={unsupportedMethod:{code:"unsupported_method",desc:"This method is not supported in nested app environment."}};class Rn extends W{constructor(i,u){super(i,u),Object.setPrototypeOf(this,Rn.prototype),this.name="NestedAppAuthError"}static createUnsupportedError(){return new Rn(dm.unsupportedMethod.code,dm.unsupportedMethod.desc)}}class qi{constructor(i){this.operatingContext=i;const u=this.operatingContext.getBridgeProxy();if(u!==void 0)this.bridgeProxy=u;else throw new Error("unexpected: bridgeProxy is undefined");this.config=i.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=i.isBrowserEnvironment()?new Nr(this.logger,this.performanceClient,!0):Cn,this.eventHandler=new Fc(this.logger),this.browserStorage=this.operatingContext.isBrowserEnvironment()?new zc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,xd(this.config.auth)):gu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler),this.nestedAppAuthAdapter=new xw(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger);const g=this.bridgeProxy.getAccountContext();this.currentAccountContext=g||null}static async createController(i){const u=new qi(i);return Promise.resolve(u)}async initialize(i,u){const g=i?.correlationId||or();return await this.browserStorage.initialize(g),Promise.resolve()}ensureValidRequest(i){return i?.correlationId?i:{...i,correlationId:this.browserCrypto.createNewGuid()}}async acquireTokenInteractive(i){const u=this.ensureValidRequest(i);this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_START,t.InteractionType.Popup,u);const g=this.performanceClient.startMeasurement(q.AcquireTokenPopup,u.correlationId);g.add({nestedAppAuthRequest:!0});try{const w=this.nestedAppAuthAdapter.toNaaTokenRequest(u),T=bn(),R=await this.bridgeProxy.getTokenInteractive(w),L={...this.nestedAppAuthAdapter.fromNaaTokenResponse(w,R,T)};try{await this.hydrateCache(L,i)}catch(K){this.logger.warningPii(`Failed to hydrate cache. Error: ${K}`,u.correlationId)}return this.currentAccountContext={homeAccountId:L.account.homeAccountId,environment:L.account.environment,tenantId:L.account.tenantId},this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Popup,L),g.add({accessTokenSize:L.accessToken.length,idTokenSize:L.idToken.length}),g.end({success:!0,requestId:L.requestId},void 0,L.account),L}catch(w){const T=w instanceof W?w:this.nestedAppAuthAdapter.fromBridgeError(w);throw this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Popup,null,w),g.end({success:!1},w,i.account),T}}async acquireTokenSilentInternal(i){const u=this.ensureValidRequest(i);this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_START,t.InteractionType.Silent,u);const g=await this.acquireTokenFromCache(u);if(g)return this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,g),g;const w=this.performanceClient.startMeasurement(q.SsoSilent,u.correlationId);w.increment({visibilityChangeCount:0}),w.add({nestedAppAuthRequest:!0});try{const T=this.nestedAppAuthAdapter.toNaaTokenRequest(u);T.forceRefresh=u.forceRefresh;const R=bn(),L=await this.bridgeProxy.getTokenSilent(T),K=this.nestedAppAuthAdapter.fromNaaTokenResponse(T,L,R);try{await this.hydrateCache(K,i)}catch(ne){this.logger.warningPii(`Failed to hydrate cache. Error: ${ne}`,u.correlationId)}return this.currentAccountContext={homeAccountId:K.account.homeAccountId,environment:K.account.environment,tenantId:K.account.tenantId},this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,K),w?.add({accessTokenSize:K.accessToken.length,idTokenSize:K.idToken.length}),w?.end({success:!0,requestId:K.requestId},void 0,K.account),K}catch(T){const R=T instanceof W?T:this.nestedAppAuthAdapter.fromBridgeError(T);throw this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null,T),w?.end({success:!1},T,i.account),R}}async acquireTokenFromCache(i){const u=this.performanceClient.startMeasurement(q.AcquireTokenSilent,i.correlationId);if(u?.add({nestedAppAuthRequest:!0}),i.claims)return this.logger.verbose("Claims are present in the request, skipping cache lookup"),null;if(i.forceRefresh)return this.logger.verbose("forceRefresh is set to true, skipping cache lookup"),null;let g=null;switch(i.cacheLookupPolicy||(i.cacheLookupPolicy=An.Default),i.cacheLookupPolicy){case An.Default:case An.AccessToken:case An.AccessTokenAndRefreshToken:g=await this.acquireTokenFromCacheInternal(i);break;default:return null}return g?(this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,g),u.add({accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length}),u.end({success:!0},void 0,g.account),g):(this.logger.warning("Cached tokens are not found for the account, proceeding with silent token request."),this.eventHandler.emitEvent(Ue.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null),u.end({success:!1},void 0,i.account),null)}async acquireTokenFromCacheInternal(i){const u=this.bridgeProxy.getAccountContext()||this.currentAccountContext;let g=null;const w=i.correlationId||this.browserCrypto.createNewGuid();if(u&&(g=qr(u,this.logger,this.browserStorage,w)),!g)return this.logger.verbose("No active account found, falling back to the host"),Promise.resolve(null);this.logger.verbose("active account found, attempting to acquire token silently");const T={...i,correlationId:i.correlationId||this.browserCrypto.createNewGuid(),authority:i.authority||g.environment,scopes:i.scopes?.length?i.scopes:[...a]},R=this.browserStorage.getTokenKeys(),L=this.browserStorage.getAccessToken(g,T,R,g.tenantId);if(L){if(Tr(L.cachedAt)||$o(L.expiresOn,this.config.system.tokenRenewalOffsetSeconds))return this.logger.verbose("Cached access token has expired"),Promise.resolve(null)}else return this.logger.verbose("No cached access token found"),Promise.resolve(null);const K=this.browserStorage.getIdToken(g,T.correlationId,R,g.tenantId,this.performanceClient);return K?this.nestedAppAuthAdapter.toAuthenticationResultFromCache(g,K,L,T,T.correlationId):(this.logger.verbose("No cached id token found"),Promise.resolve(null))}async acquireTokenPopup(i){return this.acquireTokenInteractive(i)}acquireTokenRedirect(i){throw Rn.createUnsupportedError()}async acquireTokenSilent(i){return this.acquireTokenSilentInternal(i)}acquireTokenByCode(i){throw Rn.createUnsupportedError()}acquireTokenNative(i,u,g){throw Rn.createUnsupportedError()}acquireTokenByRefreshToken(i,u){throw Rn.createUnsupportedError()}addEventCallback(i,u){return this.eventHandler.addEventCallback(i,u)}removeEventCallback(i){this.eventHandler.removeEventCallback(i)}addPerformanceCallback(i){throw Rn.createUnsupportedError()}removePerformanceCallback(i){throw Rn.createUnsupportedError()}enableAccountStorageEvents(){throw Rn.createUnsupportedError()}disableAccountStorageEvents(){throw Rn.createUnsupportedError()}getAllAccounts(i){const u=this.browserCrypto.createNewGuid();return Or(this.logger,this.browserStorage,this.isBrowserEnv(),u,i)}getAccount(i){const u=this.browserCrypto.createNewGuid();return qr(i,this.logger,this.browserStorage,u)}getAccountByUsername(i){const u=this.browserCrypto.createNewGuid();return om(i,this.logger,this.browserStorage,u)}getAccountByHomeId(i){const u=this.browserCrypto.createNewGuid();return Mr(i,this.logger,this.browserStorage,u)}getAccountByLocalId(i){const u=this.browserCrypto.createNewGuid();return im(i,this.logger,this.browserStorage,u)}setActiveAccount(i){const u=this.browserCrypto.createNewGuid();return Fi(i,this.browserStorage,u)}getActiveAccount(){const i=this.browserCrypto.createNewGuid();return Ms(this.browserStorage,i)}handleRedirectPromise(i){return Promise.resolve(null)}loginPopup(i){return this.acquireTokenInteractive(i||Dd)}loginRedirect(i){throw Rn.createUnsupportedError()}logout(i){throw Rn.createUnsupportedError()}logoutRedirect(i){throw Rn.createUnsupportedError()}logoutPopup(i){throw Rn.createUnsupportedError()}ssoSilent(i){return this.acquireTokenSilentInternal(i)}getTokenCache(){throw Rn.createUnsupportedError()}getLogger(){return this.logger}setLogger(i){this.logger=i}initializeWrapperLibrary(i,u){}setNavigationClient(i){this.logger.warning("setNavigationClient is not supported in nested app auth")}getConfiguration(){return this.config}isBrowserEnv(){return this.operatingContext.isBrowserEnvironment()}getBrowserCrypto(){return this.browserCrypto}getPerformanceClient(){throw Rn.createUnsupportedError()}getRedirectResponse(){throw Rn.createUnsupportedError()}async clearCache(i){throw Rn.createUnsupportedError()}async hydrateCache(i,u){this.logger.verbose("hydrateCache called");const g=Sr.createFromAccountInfo(i.account,i.cloudGraphHostName,i.msGraphHost);return await this.browserStorage.setAccount(g,i.correlationId),this.browserStorage.hydrateCache(i,u)}}async function sh(S,i){const u=new zi(S);return await u.initialize(),Da.createController(u,i)}async function hm(S){const i=new zi(S),u=new ir(S),g=[i.initialize(),u.initialize()];return await Promise.all(g),u.isAvailable()&&S.auth.supportsNestedAppAuth?qi.createController(u):i.isAvailable()?Da.createController(i):null}class Vc{static async createPublicClientApplication(i){const u=await sh(i);return new Vc(i,u)}constructor(i,u){this.isBroker=!1,this.controller=u||new Da(new zi(i))}async initialize(i){return this.controller.initialize(i,this.isBroker)}async acquireTokenPopup(i){return this.controller.acquireTokenPopup(i)}acquireTokenRedirect(i){return this.controller.acquireTokenRedirect(i)}acquireTokenSilent(i){return this.controller.acquireTokenSilent(i)}acquireTokenByCode(i){return this.controller.acquireTokenByCode(i)}addEventCallback(i,u){return this.controller.addEventCallback(i,u)}removeEventCallback(i){return this.controller.removeEventCallback(i)}addPerformanceCallback(i){return this.controller.addPerformanceCallback(i)}removePerformanceCallback(i){return this.controller.removePerformanceCallback(i)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(i){return this.controller.getAccount(i)}getAccountByHomeId(i){return this.controller.getAccountByHomeId(i)}getAccountByLocalId(i){return this.controller.getAccountByLocalId(i)}getAccountByUsername(i){return this.controller.getAccountByUsername(i)}getAllAccounts(i){return this.controller.getAllAccounts(i)}handleRedirectPromise(i){return this.controller.handleRedirectPromise(i)}loginPopup(i){return this.controller.loginPopup(i)}loginRedirect(i){return this.controller.loginRedirect(i)}logout(i){return this.controller.logout(i)}logoutRedirect(i){return this.controller.logoutRedirect(i)}logoutPopup(i){return this.controller.logoutPopup(i)}ssoSilent(i){return this.controller.ssoSilent(i)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(i){this.controller.setLogger(i)}setActiveAccount(i){this.controller.setActiveAccount(i)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(i,u){return this.controller.initializeWrapperLibrary(i,u)}setNavigationClient(i){this.controller.setNavigationClient(i)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(i,u){return this.controller.hydrateCache(i,u)}clearCache(i){return this.controller.clearCache(i)}}async function Pp(S){const i=new ir(S);if(await i.initialize(),i.isAvailable()){const u=new qi(i),g=new Vc(S,u);return await g.initialize(),g}return fm(S)}async function fm(S){const i=new Vc(S);return await i.initialize(),i}class mm{constructor(i){this.initialized=!1,this.operatingContext=i,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=i.getConfig(),this.logger=i.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Nr(this.logger,this.performanceClient):Cn,this.eventHandler=new Fc(this.logger),this.browserStorage=this.isBrowserEnvironment?new zc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,void 0):gu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler)}getBrowserStorage(){return this.browserStorage}getAccount(i){return null}getAccountByHomeId(i){return null}getAccountByLocalId(i){return null}getAccountByUsername(i){return null}getAllAccounts(){return[]}initialize(){return this.initialized=!0,Promise.resolve()}acquireTokenPopup(i){return xt(this.initialized),It(),{}}acquireTokenRedirect(i){return xt(this.initialized),It(),Promise.resolve()}acquireTokenSilent(i){return xt(this.initialized),It(),{}}acquireTokenByCode(i){return xt(this.initialized),It(),{}}acquireTokenNative(i,u,g){return xt(this.initialized),It(),{}}acquireTokenByRefreshToken(i,u){return xt(this.initialized),It(),{}}addEventCallback(i,u){return null}removeEventCallback(i){}addPerformanceCallback(i){return xt(this.initialized),It(),""}removePerformanceCallback(i){return xt(this.initialized),It(),!0}enableAccountStorageEvents(){xt(this.initialized),It()}disableAccountStorageEvents(){xt(this.initialized),It()}handleRedirectPromise(i){return xt(this.initialized),Promise.resolve(null)}loginPopup(i){return xt(this.initialized),It(),{}}loginRedirect(i){return xt(this.initialized),It(),{}}logout(i){return xt(this.initialized),It(),{}}logoutRedirect(i){return xt(this.initialized),It(),{}}logoutPopup(i){return xt(this.initialized),It(),{}}ssoSilent(i){return xt(this.initialized),It(),{}}getTokenCache(){return xt(this.initialized),It(),{}}getLogger(){return this.logger}setLogger(i){xt(this.initialized),It()}setActiveAccount(i){xt(this.initialized),It()}getActiveAccount(){return xt(this.initialized),It(),null}initializeWrapperLibrary(i,u){this.browserStorage.setWrapperMetadata(i,u)}setNavigationClient(i){xt(this.initialized),It()}getConfiguration(){return this.config}isBrowserEnv(){return xt(this.initialized),It(),!0}getBrowserCrypto(){return xt(this.initialized),It(),{}}getPerformanceClient(){return xt(this.initialized),It(),{}}getRedirectResponse(){return xt(this.initialized),It(),{}}async clearCache(i){xt(this.initialized),It()}async hydrateCache(i,u){xt(this.initialized),It()}}class La extends jc{getId(){return La.ID}getModuleName(){return La.MODULE_NAME}async initialize(){return!0}}La.MODULE_NAME="",La.ID="UnknownOperatingContext";class Ua{static async createPublicClientApplication(i){const u=await hm(i);let g;return u!==null?g=new Ua(i,u):g=new Ua(i),g}constructor(i,u){if(this.configuration=i,u)this.controller=u;else{const g=new La(i);this.controller=new mm(g)}}async initialize(){if(this.controller instanceof mm){const i=await hm(this.configuration);return i!==null&&(this.controller=i),this.controller.initialize()}return Promise.resolve()}async acquireTokenPopup(i){return this.controller.acquireTokenPopup(i)}acquireTokenRedirect(i){return this.controller.acquireTokenRedirect(i)}acquireTokenSilent(i){return this.controller.acquireTokenSilent(i)}acquireTokenByCode(i){return this.controller.acquireTokenByCode(i)}addEventCallback(i,u){return this.controller.addEventCallback(i,u)}removeEventCallback(i){return this.controller.removeEventCallback(i)}addPerformanceCallback(i){return this.controller.addPerformanceCallback(i)}removePerformanceCallback(i){return this.controller.removePerformanceCallback(i)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(i){return this.controller.getAccount(i)}getAccountByHomeId(i){return this.controller.getAccountByHomeId(i)}getAccountByLocalId(i){return this.controller.getAccountByLocalId(i)}getAccountByUsername(i){return this.controller.getAccountByUsername(i)}getAllAccounts(i){return this.controller.getAllAccounts(i)}handleRedirectPromise(i){return this.controller.handleRedirectPromise(i)}loginPopup(i){return this.controller.loginPopup(i)}loginRedirect(i){return this.controller.loginRedirect(i)}logout(i){return this.controller.logout(i)}logoutRedirect(i){return this.controller.logoutRedirect(i)}logoutPopup(i){return this.controller.logoutPopup(i)}ssoSilent(i){return this.controller.ssoSilent(i)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(i){this.controller.setLogger(i)}setActiveAccount(i){this.controller.setActiveAccount(i)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(i,u){return this.controller.initializeWrapperLibrary(i,u)}setNavigationClient(i){this.controller.setNavigationClient(i)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(i,u){return this.controller.hydrateCache(i,u)}clearCache(i){return this.controller.clearCache(i)}}const Dp={initialize:()=>Promise.reject(cn(mn)),acquireTokenPopup:()=>Promise.reject(cn(mn)),acquireTokenRedirect:()=>Promise.reject(cn(mn)),acquireTokenSilent:()=>Promise.reject(cn(mn)),acquireTokenByCode:()=>Promise.reject(cn(mn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(cn(mn)),loginPopup:()=>Promise.reject(cn(mn)),loginRedirect:()=>Promise.reject(cn(mn)),logout:()=>Promise.reject(cn(mn)),logoutRedirect:()=>Promise.reject(cn(mn)),logoutPopup:()=>Promise.reject(cn(mn)),ssoSilent:()=>Promise.reject(cn(mn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw cn(mn)},getLogger:()=>{throw cn(mn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw cn(mn)},hydrateCache:()=>Promise.reject(cn(mn)),clearCache:()=>Promise.reject(cn(mn))};class Lp{static getInteractionStatusFromEvent(i,u){switch(i.eventType){case Ue.LOGIN_START:return rr.Login;case Ue.SSO_SILENT_START:return rr.SsoSilent;case Ue.ACQUIRE_TOKEN_START:if(i.interactionType===t.InteractionType.Redirect||i.interactionType===t.InteractionType.Popup)return rr.AcquireToken;break;case Ue.HANDLE_REDIRECT_START:return rr.HandleRedirect;case Ue.LOGOUT_START:return rr.Logout;case Ue.SSO_SILENT_SUCCESS:case Ue.SSO_SILENT_FAILURE:if(u&&u!==rr.SsoSilent)break;return rr.None;case Ue.LOGOUT_END:if(u&&u!==rr.Logout)break;return rr.None;case Ue.HANDLE_REDIRECT_END:if(u&&u!==rr.HandleRedirect)break;return rr.None;case Ue.LOGIN_SUCCESS:case Ue.LOGIN_FAILURE:case Ue.ACQUIRE_TOKEN_SUCCESS:case Ue.ACQUIRE_TOKEN_FAILURE:case Ue.RESTORE_FROM_BFCACHE:if(i.interactionType===t.InteractionType.Redirect||i.interactionType===t.InteractionType.Popup){if(u&&u!==rr.Login&&u!==rr.AcquireToken)break;return rr.None}break}return null}}class zt{constructor(i,u){const g=u&&u.loggerOptions||{};this.logger=new Pn(g,Ra,kr),this.cryptoOps=new Nr(this.logger),this.popTokenGenerator=new ya(this.cryptoOps),this.shrParameters=i}async generatePublicKeyThumbprint(){const{kid:i}=await this.popTokenGenerator.generateKid(this.shrParameters);return i}async signRequest(i,u,g){return this.popTokenGenerator.signPayload(i,u,this.shrParameters,g)}async removeKeys(i){return this.cryptoOps.removeTokenBindingKey(i).then(()=>!0).catch(u=>{if(u instanceof Mn&&u.errorCode===yi)return!1;throw u})}}function ah(){let S;try{S=window[fn.SessionStorage];const i=S?.getItem(fu);if(Number(i)===1)return Promise.resolve().then(function(){return kw})}catch{}}function ch(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.now=="function"}function Up(S){if(!(!S||!ch()))return Math.round(window.performance.now()-S)}class _w extends Ql{constructor(i,u,g){super(i.auth.clientId,i.auth.authority||`${e.DEFAULT_AUTHORITY}`,new Pn(i.system?.loggerOptions||{},Ra,kr),Ra,kr,i.telemetry?.application||{appName:"",appVersion:""},u,g)}generateId(){return or()}getPageVisibility(){return document.visibilityState?.toString()||null}deleteIncompleteSubMeasurements(i){ah()?.then(u=>{const g=this.eventsByCorrelationId.get(i.event.correlationId),w=g&&g.eventId===i.event.eventId,T=[];w&&g?.incompleteSubMeasurements&&g.incompleteSubMeasurements.forEach(R=>{T.push({...R})}),u.BrowserPerformanceMeasurement.flushMeasurements(i.event.correlationId,T)})}startMeasurement(i,u){const g=this.getPageVisibility(),w=super.startMeasurement(i,u),T=ch()?window.performance.now():void 0,R=ah()?.then(L=>new L.BrowserPerformanceMeasurement(i,w.event.correlationId));return R?.then(L=>L.startMeasurement()),{...w,end:(L,K,ne)=>{const ve=w.end({...L,startPageVisibility:g,endPageVisibility:this.getPageVisibility(),durationMs:Up(T)},K,ne);return R?.then(Se=>Se.endMeasurement()),this.deleteIncompleteSubMeasurements(w),ve},discard:()=>{w.discard(),R?.then(L=>L.flushMeasurement()),this.deleteIncompleteSubMeasurements(w)}}}setPreQueueTime(i,u){if(!ch()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${i}`);return}if(!u){this.logger.trace(`BrowserPerformanceClient: correlationId for ${i} not provided, unable to set telemetry queue time`);return}const g=this.preQueueTimeByCorrelationId.get(u);g&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${g.name} found`,u),this.addQueueMeasurement(g.name,u,void 0,!0)),this.preQueueTimeByCorrelationId.set(u,{name:i,time:window.performance.now()})}addQueueMeasurement(i,u,g,w){if(!ch()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${i}`);return}if(!u){this.logger.trace(`BrowserPerformanceClient: correlationId for ${i} not provided, unable to add queue measurement`);return}const T=super.getPreQueueTime(i,u);if(!T)return;const R=window.performance.now(),L=g||super.calculateQueuedTime(T,R);return super.addQueueMeasurement(i,u,L,w)}}class Qr{constructor(i,u){this.correlationId=u,this.measureName=Qr.makeMeasureName(i,u),this.startMark=Qr.makeStartMark(i,u),this.endMark=Qr.makeEndMark(i,u)}static makeMeasureName(i,u){return`msal.measure.${i}.${u}`}static makeStartMark(i,u){return`msal.start.${i}.${u}`}static makeEndMark(i,u){return`msal.end.${i}.${u}`}static supportsBrowserPerformance(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.mark=="function"&&typeof window.performance.measure=="function"&&typeof window.performance.clearMarks=="function"&&typeof window.performance.clearMeasures=="function"&&typeof window.performance.getEntriesByName=="function"}static flushMeasurements(i,u){if(Qr.supportsBrowserPerformance())try{u.forEach(g=>{const w=Qr.makeMeasureName(g.name,i);window.performance.getEntriesByName(w,"measure").length>0&&(window.performance.clearMeasures(w),window.performance.clearMarks(Qr.makeStartMark(w,i)),window.performance.clearMarks(Qr.makeEndMark(w,i)))})}catch{}}startMeasurement(){if(Qr.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch{}}endMeasurement(){if(Qr.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch{}}flushMeasurement(){if(Qr.supportsBrowserPerformance())try{const i=window.performance.getEntriesByName(this.measureName,"measure");if(i.length>0){const u=i[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),u}}catch{}return null}}var kw=Object.freeze({__proto__:null,BrowserPerformanceMeasurement:Qr});t.AccountEntity=Sr,t.ApiId=Rt,t.AuthError=W,t.AuthErrorCodes=$,t.AuthErrorMessage=z,t.AuthenticationHeaderParser=Gl,t.AuthenticationScheme=Y,t.AzureCloudInstance=tc,t.BrowserAuthError=ka,t.BrowserAuthErrorCodes=rp,t.BrowserAuthErrorMessage=op,t.BrowserCacheLocation=fn,t.BrowserConfigurationAuthError=uu,t.BrowserConfigurationAuthErrorCodes=Gd,t.BrowserConfigurationAuthErrorMessage=fp,t.BrowserPerformanceClient=_w,t.BrowserPerformanceMeasurement=Qr,t.BrowserUtils=mp,t.CacheLookupPolicy=An,t.ClientAuthError=Mn,t.ClientAuthErrorCodes=Sl,t.ClientAuthErrorMessage=af,t.ClientConfigurationError=Kn,t.ClientConfigurationErrorCodes=_l,t.ClientConfigurationErrorMessage=ed,t.DEFAULT_IFRAME_TIMEOUT_MS=Lc,t.EventHandler=Fc,t.EventMessageUtils=Lp,t.EventType=Ue,t.InteractionRequiredAuthError=kn,t.InteractionRequiredAuthErrorCodes=Ri,t.InteractionRequiredAuthErrorMessage=Id,t.InteractionStatus=rr,t.JsonWebTokenTypes=G,t.LocalStorage=Jt,t.Logger=Pn,t.MemoryStorage=Hc,t.NavigationClient=Dc,t.OIDC_DEFAULT_SCOPES=a,t.PerformanceEvents=q,t.PromptValue=v,t.ProtocolMode=qn,t.PublicClientApplication=Vc,t.PublicClientNext=Ua,t.ServerError=kt,t.ServerResponseType=E,t.SessionStorage=dr,t.SignedHttpRequest=zt,t.StringUtils=Gn,t.StubPerformanceClient=la,t.UrlString=Et,t.WrapperSKU=zf,t.createNestablePublicClientApplication=Pp,t.createStandardPublicClientApplication=fm,t.isPlatformBrokerAvailable=Ls,t.stubbedPublicClientApplication=Dp,t.version=kr})(Ab)),Ab}var Om={},g0;function E5(){if(g0)return Om;g0=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.GraphClientError=void 0;var t=NT,e=(function(n){t.__extends(r,n);function r(a){var c=n.call(this,a)||this;return Object.setPrototypeOf(c,r.prototype),c}return r.setGraphClientError=function(a){var c;return a instanceof Error?c=a:(c=new r,c.customError=a),c},r})(Error);return Om.GraphClientError=e,Om}var p0;function A5(){if(p0)return Nm;p0=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.AuthCodeMSALBrowserAuthenticationProvider=void 0;var t=NT,e=b5(),n=E5(),r=(function(){function a(c,d){if(this.publicClientApplication=c,this.options=d,!d||!c)throw new n.GraphClientError("Please pass valid PublicClientApplication instance and AuthCodeMSALBrowserAuthenticationProviderOptions instance to instantiate MSALBrowserAuthenticationProvider")}return a.prototype.getAccessToken=function(){return t.__awaiter(this,void 0,void 0,function(){var c,d,m,y,p,y;return t.__generator(this,function(v){switch(v.label){case 0:if(c=this.options&&this.options.scopes,d=this.options&&this.options.account,m=new n.GraphClientError,!c||c.length===0)throw m.name="Empty Scopes",m.message="Scopes cannot be empty, Please provide scopes",m;v.label=1;case 1:return v.trys.push([1,3,,9]),[4,this.publicClientApplication.acquireTokenSilent({scopes:c,account:d})];case 2:if(y=v.sent(),!y||!y.accessToken)throw m.name="Access token is undefined",m.message="Received empty access token from PublicClientApplication",m;return[2,y.accessToken];case 3:return p=v.sent(),p instanceof e.InteractionRequiredAuthError?this.options.interactionType!==e.InteractionType.Redirect?[3,4]:(this.publicClientApplication.acquireTokenRedirect({scopes:c}),[3,6]):[3,7];case 4:return this.options.interactionType!==e.InteractionType.Popup?[3,6]:[4,this.publicClientApplication.acquireTokenPopup({scopes:c})];case 5:return y=v.sent(),[2,y.accessToken];case 6:return[3,8];case 7:throw p;case 8:return[3,9];case 9:return[2]}})})},a})();return Nm.AuthCodeMSALBrowserAuthenticationProvider=r,Nm}var Tb={},y0;function T5(){return y0||(y0=1,Object.defineProperty(Tb,"__esModule",{value:!0})),Tb}var v0;function S5(){return v0||(v0=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=NT;e.__exportStar(A5(),t),e.__exportStar(T5(),t)})(Eb)),Eb}var x5=S5();const uO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://127.0.0.1:8080",VITE_AZURE_AD_API_SCOPES:"api://af251976-54e5-4230-919a-75faa3e3d7b6/Agent.Execute.Default",VITE_AZURE_AD_CLIENT_ID:"45042e4a-4e25-481c-94fa-4e7878105fcc",VITE_AZURE_AD_POST_LOGOUT_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_TENANT_ID:"4e206573-d2b2-43e2-8958-ef4cdbd26f7f",VITE_GRAPH_SCOPES:"User.Read"},dO=typeof window<"u",_5=t=>{const e=uO[t];if(!e)throw new Error(`Missing required environment variable: ${t}`);return e},k5=()=>"https://login.microsoftonline.com/4e206573-d2b2-43e2-8958-ef4cdbd26f7f",hO=(t,{fallback:e,relativeTo:n}={})=>{const r=uO[t],a=c=>{try{return new URL(c).toString()}catch{if(!n)throw new Error(`Unable to resolve relative URI "${c}" for ${t}. Provide an absolute URL or ensure a browser origin is available.`);return new URL(c,n).toString()}};if(r)return a(r);if(e)return a(e);throw new Error(`Unable to determine value for ${t}. Set it explicitly in your environment.`)},fO=(t,e=[])=>t?t.split(/[ ,]+/).map(n=>n.trim()).filter(Boolean):e,mO=dO?window.location.origin:void 0,I5=_5("VITE_AZURE_AD_CLIENT_ID"),R5=k5(),gO=hO("VITE_AZURE_AD_REDIRECT_URI",{fallback:"/auth/callback",relativeTo:mO}),N5=hO("VITE_AZURE_AD_POST_LOGOUT_REDIRECT_URI",{fallback:gO,relativeTo:mO}),pO=fO("User.Read",["User.Read"]),Eu=fO("api://af251976-54e5-4230-919a-75faa3e3d7b6/Agent.Execute.Default",[]),C0={scopes:pO},vE=new XA({auth:{clientId:I5,authority:R5,redirectUri:gO,postLogoutRedirectUri:N5},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:dO&&(window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident"))},system:{loggerOptions:{logLevel:Zt.Warning,loggerCallback(t,e,n){n||(t===Zt.Error?console.error(e):t===Zt.Warning&&console.warn(e))}}}}),O5=t=>new x5.AuthCodeMSALBrowserAuthenticationProvider(vE,{account:t,scopes:pO,interactionType:Ze.Popup}),yO=t=>bv.initWithMiddleware({authProvider:O5(t)});async function M5(t){return yO(t).api("/me").get()}async function P5(t){const e=yO(t);try{const n=await e.api("/me/photo/$value").responseType(Wi.BLOB).get();return n instanceof Blob?n:new Blob([n])}catch(n){if((typeof n?.statusCode=="number"||typeof n?.statusCode=="number"?n.statusCode:void 0)===404)return null;throw n}}const OT="devui_msal_login_hint",MT=typeof window<"u",D5=()=>{if(!MT)return null;try{return window.localStorage.getItem(OT)}catch(t){return console.warn("Unable to read login hint from storage",t),null}},L5=t=>{if(MT)try{window.localStorage.setItem(OT,t)}catch(e){console.warn("Unable to persist login hint",e)}},U5=()=>{if(MT)try{window.localStorage.removeItem(OT)}catch(t){console.warn("Unable to clear login hint",t)}},j5=t=>{if(!t)return"ME";const e=t.trim().split(/\s+/);return e.length===1?e[0].slice(0,2).toUpperCase():e[0].charAt(0).toUpperCase()+e[e.length-1].charAt(0).toUpperCase()};function H5(){const{instance:t,accounts:e}=ZA(),[n,r]=_.useState({loading:!1}),[a,c]=_.useState({loading:!1}),d=_.useMemo(()=>t.getActiveAccount()??e[0]??null,[e,t]);if(_.useEffect(()=>{if(!d){r({account:void 0,profile:void 0,loading:!1}),c(j=>(j.url&&j.url.startsWith("blob:")&&URL.revokeObjectURL(j.url),{accountId:void 0,url:void 0,loading:!1}));return}const M=t.getActiveAccount();(!M||M.homeAccountId!==d.homeAccountId)&&t.setActiveAccount(d)},[d,t]),_.useEffect(()=>{if(!d){r({account:void 0,profile:void 0,loading:!1});return}let M=!1;return r(j=>j.account?.homeAccountId===d.homeAccountId&&(j.loading||j.profile)?j:{account:d,profile:j.account?.homeAccountId===d.homeAccountId?j.profile:void 0,loading:!0,error:void 0}),M5(d).then(j=>{M||r({account:d,profile:j,loading:!1,error:void 0})}).catch(j=>{M||r({account:d,profile:void 0,loading:!1,error:j instanceof Error?j.message:"Failed to load profile information."})}),()=>{M=!0}},[d?.homeAccountId]),_.useEffect(()=>{if(!d){c({accountId:void 0,url:void 0,loading:!1});return}let M=!1,j,O;return c(U=>U.accountId===d.homeAccountId?(O=U.url,{accountId:d.homeAccountId,url:U.url,loading:!0,error:void 0}):(O=U.url,O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0),{accountId:d.homeAccountId,url:void 0,loading:!0,error:void 0})),P5(d).then(U=>{if(!M){if(!U){c({accountId:d.homeAccountId,url:void 0,loading:!1,error:void 0}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0);return}j=URL.createObjectURL(U),c({accountId:d.homeAccountId,url:j,loading:!1,error:void 0}),O&&O!==j&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0)}}).catch(U=>{if(M)return;if((typeof U?.statusCode=="number"?U.statusCode:void 0)===404){c({accountId:d.homeAccountId,url:void 0,loading:!1,error:void 0}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0);return}console.warn("Failed to load profile photo",U),c({accountId:d.homeAccountId,url:void 0,loading:!1,error:U instanceof Error?U.message:"Failed to load profile photo."}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0)}),()=>{M=!0,j&&URL.revokeObjectURL(j)}},[d?.homeAccountId]),!d)return null;const{profile:m,loading:p,error:y}=n,{url:v,loading:b}=a,E=m?.displayName??d.name??d.username,x=m?.mail??m?.userPrincipalName??d.username,I=p?null:j5(E),k=()=>{U5(),t.logoutRedirect({account:d})},N=(p||b)&&!v;return h.jsxs(pC,{children:[h.jsx(yC,{asChild:!0,children:h.jsxs(wt,{variant:"ghost",size:"sm",className:"gap-2 px-2 py-1.5 h-9 rounded-full border border-border/60",children:[h.jsx("span",{className:"relative flex h-7 w-7 items-center justify-center overflow-hidden rounded-full border border-border/60 bg-primary/5 text-xs font-semibold text-foreground",children:v?h.jsx("img",{src:v,alt:"","aria-hidden":"true",className:"h-full w-full object-cover",draggable:!1}):N?h.jsx(CC,{size:"sm",className:"text-primary"}):I??h.jsx(kT,{className:"h-4 w-4"})}),h.jsx("span",{className:"max-w-[140px] truncate text-sm font-medium text-foreground",children:E})]})}),h.jsxs(vC,{align:"end",className:"w-60",children:[h.jsxs(gE,{className:"flex flex-col items-start gap-0.5",children:[h.jsx("span",{className:"text-sm font-semibold text-foreground",children:E}),x&&h.jsx("span",{className:"text-xs text-muted-foreground truncate",children:x})]}),y&&h.jsxs(h.Fragment,{children:[h.jsx(Hh,{}),h.jsx(Ur,{disabled:!0,className:"text-xs text-destructive",children:y})]}),h.jsx(Hh,{}),h.jsxs(Ur,{onClick:k,children:[h.jsx(nF,{className:"h-4 w-4"}),"Sign out"]})]})]})}function w0({agents:t,workflows:e,selectedItem:n,onSelect:r,onRemove:a,onBrowseGallery:c,isLoading:d=!1,onSettingsClick:m}){return h.jsxs("header",{className:"flex h-14 items-center gap-4 border-b px-4",children:[h.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 805 805",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:[h.jsx("path",{d:"M402.488 119.713C439.197 119.713 468.955 149.472 468.955 186.18C468.955 192.086 471.708 197.849 476.915 200.635L546.702 237.977C555.862 242.879 566.95 240.96 576.092 236.023C585.476 230.955 596.218 228.078 607.632 228.078C644.341 228.078 674.098 257.836 674.099 294.545C674.099 316.95 663.013 336.765 646.028 348.806C637.861 354.595 631.412 363.24 631.412 373.251V430.818C631.412 440.83 637.861 449.475 646.028 455.264C663.013 467.305 674.099 487.121 674.099 509.526C674.099 546.235 644.341 575.994 607.632 575.994C598.598 575.994 589.985 574.191 582.133 570.926C573.644 567.397 563.91 566.393 555.804 570.731L469.581 616.867C469.193 617.074 468.955 617.479 468.955 617.919C468.955 654.628 439.197 684.386 402.488 684.386C365.779 684.386 336.021 654.628 336.021 617.919C336.021 616.802 335.423 615.765 334.439 615.238L249.895 570C241.61 565.567 231.646 566.713 223.034 570.472C214.898 574.024 205.914 575.994 196.47 575.994C159.761 575.994 130.002 546.235 130.002 509.526C130.002 486.66 141.549 466.49 159.13 454.531C167.604 448.766 174.349 439.975 174.349 429.726V372.538C174.349 362.289 167.604 353.498 159.13 347.734C141.549 335.774 130.002 315.604 130.002 292.738C130.002 256.029 159.761 226.271 196.47 226.271C208.223 226.271 219.263 229.322 228.843 234.674C238.065 239.827 249.351 241.894 258.666 236.91L328.655 199.459C333.448 196.895 336.021 191.616 336.021 186.18C336.021 149.471 365.779 119.713 402.488 119.713ZM475.716 394.444C471.337 396.787 468.955 401.586 468.955 406.552C468.955 429.68 457.142 450.048 439.221 461.954C430.571 467.7 423.653 476.574 423.653 486.959V537.511C423.653 547.896 430.746 556.851 439.379 562.622C449 569.053 461.434 572.052 471.637 566.592L527.264 536.826C536.887 531.677 541.164 520.44 541.164 509.526C541.164 485.968 553.42 465.272 571.904 453.468C580.846 447.757 588.054 438.749 588.054 428.139V371.427C588.054 363.494 582.671 356.676 575.716 352.862C569.342 349.366 561.663 348.454 555.253 351.884L475.716 394.444ZM247.992 349.841C241.997 346.633 234.806 347.465 228.873 350.785C222.524 354.337 217.706 360.639 217.706 367.915V429.162C217.706 439.537 224.611 448.404 233.248 454.152C251.144 466.062 262.937 486.417 262.937 509.526C262.937 519.654 267.026 529.991 275.955 534.769L334.852 566.284C344.582 571.49 356.362 568.81 365.528 562.667C373.735 557.166 380.296 548.643 380.296 538.764V486.305C380.296 476.067 373.564 467.282 365.103 461.516C347.548 449.552 336.021 429.398 336.021 406.552C336.021 400.967 333.389 395.536 328.465 392.902L247.992 349.841ZM270.019 280.008C265.421 282.469 262.936 287.522 262.937 292.738C262.937 293.308 262.929 293.876 262.915 294.443C262.615 306.354 266.961 318.871 277.466 324.492L334.017 354.751C344.13 360.163 356.442 357.269 366.027 350.969C376.495 344.088 389.024 340.085 402.488 340.085C416.203 340.085 428.947 344.239 439.532 351.357C449.163 357.834 461.63 360.861 471.864 355.385L526.625 326.083C537.106 320.474 541.458 307.999 541.182 296.115C541.17 295.593 541.164 295.069 541.164 294.545C541.164 288.551 538.376 282.696 533.091 279.868L463.562 242.664C454.384 237.753 443.274 239.688 434.123 244.65C424.716 249.75 413.941 252.647 402.488 252.647C390.83 252.647 379.873 249.646 370.348 244.373C361.148 239.281 349.917 237.256 340.646 242.217L270.019 280.008Z",fill:"url(#paint0_linear_510_1294)"}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"paint0_linear_510_1294",x1:"255.628",y1:"-34.3245",x2:"618.483",y2:"632.032",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#D59FFF"}),h.jsx("stop",{offset:"1",stopColor:"#8562C5"})]})})]}),"Dev UI"]}),h.jsx(YF,{agents:t,workflows:e,selectedItem:n,onSelect:r,onRemove:a,onBrowseGallery:c,isLoading:d}),h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsx(H5,{}),h.jsx(i5,{}),h.jsx(wt,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),m?.()},children:h.jsx(mE,{className:"h-4 w-4"})})]})]})}function CE(t,[e,n]){return Math.min(n,Math.max(e,t))}function B5(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var PT="ScrollArea",[vO,sY]=Xa(PT),[z5,fi]=vO(PT),CO=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:c=600,...d}=t,[m,p]=_.useState(null),[y,v]=_.useState(null),[b,E]=_.useState(null),[x,I]=_.useState(null),[k,N]=_.useState(null),[M,j]=_.useState(0),[O,U]=_.useState(0),[H,V]=_.useState(!1),[Q,Y]=_.useState(!1),ee=Mt(e,ce=>p(ce)),se=Sg(a);return h.jsx(z5,{scope:n,type:r,dir:se,scrollHideDelay:c,scrollArea:m,viewport:y,onViewportChange:v,content:b,onContentChange:E,scrollbarX:x,onScrollbarXChange:I,scrollbarXEnabled:H,onScrollbarXEnabledChange:V,scrollbarY:k,onScrollbarYChange:N,scrollbarYEnabled:Q,onScrollbarYEnabledChange:Y,onCornerWidthChange:j,onCornerHeightChange:U,children:h.jsx(ct.div,{dir:se,...d,ref:ee,style:{position:"relative","--radix-scroll-area-corner-width":M+"px","--radix-scroll-area-corner-height":O+"px",...t.style}})})});CO.displayName=PT;var wO="ScrollAreaViewport",bO=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:a,...c}=t,d=fi(wO,n),m=_.useRef(null),p=Mt(e,m,d.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),h.jsx(ct.div,{"data-radix-scroll-area-viewport":"",...c,ref:p,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:h.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});bO.displayName=wO;var Js="ScrollAreaScrollbar",DT=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=fi(Js,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:d}=a,m=t.orientation==="horizontal";return _.useEffect(()=>(m?c(!0):d(!0),()=>{m?c(!1):d(!1)}),[m,c,d]),a.type==="hover"?h.jsx(F5,{...r,ref:e,forceMount:n}):a.type==="scroll"?h.jsx(K5,{...r,ref:e,forceMount:n}):a.type==="auto"?h.jsx(EO,{...r,ref:e,forceMount:n}):a.type==="always"?h.jsx(LT,{...r,ref:e}):null});DT.displayName=Js;var F5=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=fi(Js,t.__scopeScrollArea),[c,d]=_.useState(!1);return _.useEffect(()=>{const m=a.scrollArea;let p=0;if(m){const y=()=>{window.clearTimeout(p),d(!0)},v=()=>{p=window.setTimeout(()=>d(!1),a.scrollHideDelay)};return m.addEventListener("pointerenter",y),m.addEventListener("pointerleave",v),()=>{window.clearTimeout(p),m.removeEventListener("pointerenter",y),m.removeEventListener("pointerleave",v)}}},[a.scrollArea,a.scrollHideDelay]),h.jsx(ss,{present:n||c,children:h.jsx(EO,{"data-state":c?"visible":"hidden",...r,ref:e})})}),K5=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=fi(Js,t.__scopeScrollArea),c=t.orientation==="horizontal",d=bC(()=>p("SCROLL_END"),100),[m,p]=B5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(m==="idle"){const y=window.setTimeout(()=>p("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(y)}},[m,a.scrollHideDelay,p]),_.useEffect(()=>{const y=a.viewport,v=c?"scrollLeft":"scrollTop";if(y){let b=y[v];const E=()=>{const x=y[v];b!==x&&(p("SCROLL"),d()),b=x};return y.addEventListener("scroll",E),()=>y.removeEventListener("scroll",E)}},[a.viewport,c,p,d]),h.jsx(ss,{present:n||m!=="hidden",children:h.jsx(LT,{"data-state":m==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Qe(t.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:Qe(t.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),EO=_.forwardRef((t,e)=>{const n=fi(Js,t.__scopeScrollArea),{forceMount:r,...a}=t,[c,d]=_.useState(!1),m=t.orientation==="horizontal",p=bC(()=>{if(n.viewport){const y=n.viewport.offsetWidth<n.viewport.scrollWidth,v=n.viewport.offsetHeight<n.viewport.scrollHeight;d(m?y:v)}},10);return zh(n.viewport,p),zh(n.content,p),h.jsx(ss,{present:r||c,children:h.jsx(LT,{"data-state":c?"visible":"hidden",...a,ref:e})})}),LT=_.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,a=fi(Js,t.__scopeScrollArea),c=_.useRef(null),d=_.useRef(0),[m,p]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),y=_O(m.viewport,m.content),v={...r,sizes:m,onSizesChange:p,hasThumb:y>0&&y<1,onThumbChange:E=>c.current=E,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:E=>d.current=E};function b(E,x){return Q5(E,d.current,m,x)}return n==="horizontal"?h.jsx(G5,{...v,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const E=a.viewport.scrollLeft,x=b0(E,m,a.dir);c.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:E=>{a.viewport&&(a.viewport.scrollLeft=E)},onDragScroll:E=>{a.viewport&&(a.viewport.scrollLeft=b(E,a.dir))}}):n==="vertical"?h.jsx(q5,{...v,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const E=a.viewport.scrollTop,x=b0(E,m);c.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:E=>{a.viewport&&(a.viewport.scrollTop=E)},onDragScroll:E=>{a.viewport&&(a.viewport.scrollTop=b(E))}}):null}),G5=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...a}=t,c=fi(Js,t.__scopeScrollArea),[d,m]=_.useState(),p=_.useRef(null),y=Mt(e,p,c.onScrollbarXChange);return _.useEffect(()=>{p.current&&m(getComputedStyle(p.current))},[p]),h.jsx(TO,{"data-orientation":"horizontal",...a,ref:y,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wC(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.x),onDragScroll:v=>t.onDragScroll(v.x),onWheelScroll:(v,b)=>{if(c.viewport){const E=c.viewport.scrollLeft+v.deltaX;t.onWheelScroll(E),IO(E,b)&&v.preventDefault()}},onResize:()=>{p.current&&c.viewport&&d&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:p.current.clientWidth,paddingStart:Av(d.paddingLeft),paddingEnd:Av(d.paddingRight)}})}})}),q5=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...a}=t,c=fi(Js,t.__scopeScrollArea),[d,m]=_.useState(),p=_.useRef(null),y=Mt(e,p,c.onScrollbarYChange);return _.useEffect(()=>{p.current&&m(getComputedStyle(p.current))},[p]),h.jsx(TO,{"data-orientation":"vertical",...a,ref:y,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wC(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.y),onDragScroll:v=>t.onDragScroll(v.y),onWheelScroll:(v,b)=>{if(c.viewport){const E=c.viewport.scrollTop+v.deltaY;t.onWheelScroll(E),IO(E,b)&&v.preventDefault()}},onResize:()=>{p.current&&c.viewport&&d&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:p.current.clientHeight,paddingStart:Av(d.paddingTop),paddingEnd:Av(d.paddingBottom)}})}})}),[$5,AO]=vO(Js),TO=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:c,onThumbPointerUp:d,onThumbPointerDown:m,onThumbPositionChange:p,onDragScroll:y,onWheelScroll:v,onResize:b,...E}=t,x=fi(Js,n),[I,k]=_.useState(null),N=Mt(e,ee=>k(ee)),M=_.useRef(null),j=_.useRef(""),O=x.viewport,U=r.content-r.viewport,H=Cr(v),V=Cr(p),Q=bC(b,10);function Y(ee){if(M.current){const se=ee.clientX-M.current.left,ce=ee.clientY-M.current.top;y({x:se,y:ce})}}return _.useEffect(()=>{const ee=se=>{const ce=se.target;I?.contains(ce)&&H(se,U)};return document.addEventListener("wheel",ee,{passive:!1}),()=>document.removeEventListener("wheel",ee,{passive:!1})},[O,I,U,H]),_.useEffect(V,[r,V]),zh(I,Q),zh(x.content,Q),h.jsx($5,{scope:n,scrollbar:I,hasThumb:a,onThumbChange:Cr(c),onThumbPointerUp:Cr(d),onThumbPositionChange:V,onThumbPointerDown:Cr(m),children:h.jsx(ct.div,{...E,ref:N,style:{position:"absolute",...E.style},onPointerDown:Qe(t.onPointerDown,ee=>{ee.button===0&&(ee.target.setPointerCapture(ee.pointerId),M.current=I.getBoundingClientRect(),j.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),Y(ee))}),onPointerMove:Qe(t.onPointerMove,Y),onPointerUp:Qe(t.onPointerUp,ee=>{const se=ee.target;se.hasPointerCapture(ee.pointerId)&&se.releasePointerCapture(ee.pointerId),document.body.style.webkitUserSelect=j.current,x.viewport&&(x.viewport.style.scrollBehavior=""),M.current=null})})})}),Ev="ScrollAreaThumb",SO=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,a=AO(Ev,t.__scopeScrollArea);return h.jsx(ss,{present:n||a.hasThumb,children:h.jsx(V5,{ref:e,...r})})}),V5=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...a}=t,c=fi(Ev,n),d=AO(Ev,n),{onThumbPositionChange:m}=d,p=Mt(e,b=>d.onThumbChange(b)),y=_.useRef(void 0),v=bC(()=>{y.current&&(y.current(),y.current=void 0)},100);return _.useEffect(()=>{const b=c.viewport;if(b){const E=()=>{if(v(),!y.current){const x=W5(b,m);y.current=x,m()}};return m(),b.addEventListener("scroll",E),()=>b.removeEventListener("scroll",E)}},[c.viewport,v,m]),h.jsx(ct.div,{"data-state":d.hasThumb?"visible":"hidden",...a,ref:p,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Qe(t.onPointerDownCapture,b=>{const x=b.target.getBoundingClientRect(),I=b.clientX-x.left,k=b.clientY-x.top;d.onThumbPointerDown({x:I,y:k})}),onPointerUp:Qe(t.onPointerUp,d.onThumbPointerUp)})});SO.displayName=Ev;var UT="ScrollAreaCorner",xO=_.forwardRef((t,e)=>{const n=fi(UT,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(Y5,{...t,ref:e}):null});xO.displayName=UT;var Y5=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,a=fi(UT,n),[c,d]=_.useState(0),[m,p]=_.useState(0),y=!!(c&&m);return zh(a.scrollbarX,()=>{const v=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(v),p(v)}),zh(a.scrollbarY,()=>{const v=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(v),d(v)}),y?h.jsx(ct.div,{...r,ref:e,style:{width:c,height:m,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Av(t){return t?parseInt(t,10):0}function _O(t,e){const n=t/e;return isNaN(n)?0:n}function wC(t){const e=_O(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Q5(t,e,n,r="ltr"){const a=wC(n),c=a/2,d=e||c,m=a-d,p=n.scrollbar.paddingStart+d,y=n.scrollbar.size-n.scrollbar.paddingEnd-m,v=n.content-n.viewport,b=r==="ltr"?[0,v]:[v*-1,0];return kO([p,y],b)(t)}function b0(t,e,n="ltr"){const r=wC(e),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=e.scrollbar.size-a,d=e.content-e.viewport,m=c-r,p=n==="ltr"?[0,d]:[d*-1,0],y=CE(t,p);return kO([0,d],[0,m])(y)}function kO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function IO(t,e){return t>0&&t<e}var W5=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function a(){const c={left:t.scrollLeft,top:t.scrollTop},d=n.left!==c.left,m=n.top!==c.top;(d||m)&&e(),n=c,r=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(r)};function bC(t,e){const n=Cr(t),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function zh(t,e){const n=Cr(e);wr(()=>{let r=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(r),a.unobserve(t)}}},[t,n])}var RO=CO,X5=bO,J5=xO;const Rg=_.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(RO,{ref:r,className:At("relative overflow-hidden",t),...n,children:[h.jsx(X5,{className:"h-full w-full rounded-[inherit]",children:e}),h.jsx(NO,{}),h.jsx(J5,{})]}));Rg.displayName=RO.displayName;const NO=_.forwardRef(({className:t,orientation:e="vertical",...n},r)=>h.jsx(DT,{ref:r,orientation:e,className:At("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:h.jsx(SO,{className:"relative flex-1 rounded-full bg-border"})}));NO.displayName=DT.displayName;var EC="Tabs",[Z5,aY]=Xa(EC,[sC]),OO=sC(),[e6,jT]=Z5(EC),MO=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:c,orientation:d="horizontal",dir:m,activationMode:p="automatic",...y}=t,v=Sg(m),[b,E]=Dh({prop:r,onChange:a,defaultProp:c??"",caller:EC});return h.jsx(e6,{scope:n,baseId:Du(),value:b,onValueChange:E,orientation:d,dir:v,activationMode:p,children:h.jsx(ct.div,{dir:v,"data-orientation":d,...y,ref:e})})});MO.displayName=EC;var PO="TabsList",DO=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...a}=t,c=jT(PO,n),d=OO(n);return h.jsx(LR,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:r,children:h.jsx(ct.div,{role:"tablist","aria-orientation":c.orientation,...a,ref:e})})});DO.displayName=PO;var LO="TabsTrigger",UO=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...c}=t,d=jT(LO,n),m=OO(n),p=BO(d.baseId,r),y=zO(d.baseId,r),v=r===d.value;return h.jsx(UR,{asChild:!0,...m,focusable:!a,active:v,children:h.jsx(ct.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":y,"data-state":v?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:p,...c,ref:e,onMouseDown:Qe(t.onMouseDown,b=>{!a&&b.button===0&&b.ctrlKey===!1?d.onValueChange(r):b.preventDefault()}),onKeyDown:Qe(t.onKeyDown,b=>{[" ","Enter"].includes(b.key)&&d.onValueChange(r)}),onFocus:Qe(t.onFocus,()=>{const b=d.activationMode!=="manual";!v&&!a&&b&&d.onValueChange(r)})})})});UO.displayName=LO;var jO="TabsContent",HO=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:a,children:c,...d}=t,m=jT(jO,n),p=BO(m.baseId,r),y=zO(m.baseId,r),v=r===m.value,b=_.useRef(v);return _.useEffect(()=>{const E=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(E)},[]),h.jsx(ss,{present:a||v,children:({present:E})=>h.jsx(ct.div,{"data-state":v?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":p,hidden:!E,id:y,tabIndex:0,...d,ref:e,style:{...t.style,animationDuration:b.current?"0s":void 0},children:E&&c})})});HO.displayName=jO;function BO(t,e){return`${t}-trigger-${e}`}function zO(t,e){return`${t}-content-${e}`}var t6=MO,FO=DO,KO=UO,GO=HO;const n6=t6,qO=_.forwardRef(({className:t,...e},n)=>h.jsx(FO,{ref:n,className:At("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));qO.displayName=FO.displayName;const Ny=_.forwardRef(({className:t,...e},n)=>h.jsx(KO,{ref:n,className:At("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));Ny.displayName=KO.displayName;const Oy=_.forwardRef(({className:t,...e},n)=>h.jsx(GO,{ref:n,className:At("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Oy.displayName=GO.displayName;function El(t){if(t.type==="response.function_result.complete"){const e=t;return{call_id:e.call_id,output:e.output,status:e.status}}return null}function $O(t){const e=[],n=new Map,r=new Map;let a="";for(const c of t){if(c.type==="response.output_item.added"){const p=c.item;if(p.type==="function_call"&&p.call_id&&p.name){const y=p.call_id;n.set(y,{name:p.name,arguments:"",callId:y,itemId:p.id,timestamp:new Date().toISOString()}),r.set(y,p.name)}e.push(c);continue}const d=El(c)!==null;if(c.type==="response.completed"||c.type==="response.done"||c.type==="error"||c.type==="response.workflow_event.complete"||c.type==="response.trace_event.complete"||c.type==="response.trace.complete"||d){if(a.trim()&&(e.push({type:"response.output_text.delta",delta:a.trim()}),a=""),(c.type==="response.trace_event.complete"||c.type==="response.trace.complete")&&"data"in c){const p=c.data;if(p.attributes&&p.attributes["gen_ai.output.messages"]&&typeof p.attributes["gen_ai.output.messages"]=="string")try{const y=JSON.parse(p.attributes["gen_ai.output.messages"]);for(const v of y)if(v.parts)for(const b of v.parts)b.type==="tool_call"&&b.name&&b.id&&r.set(b.id,b.name)}catch{}}const m=El(c);if(m){const p=m.call_id;if(p&&n.has(p)){const y=n.get(p),v=r.get(p)||y.name||"unknown";e.push({type:"response.function_call.complete",data:{name:v,arguments:y.arguments,call_id:y.callId}}),n.delete(p)}}e.push(c);continue}if(c.type==="response.function_call.delta"&&"data"in c){const m=c.data,p=m.call_id||`call_${Date.now()}`;n.has(p)||n.set(p,{name:m.name||void 0,arguments:"",callId:p,timestamp:new Date().toISOString()}),m.name&&m.name.trim()&&(n.get(p).name=m.name.trim());continue}if(c.type==="response.function_call.complete"&&"data"in c){e.push(c);continue}if(c.type==="response.function_call_arguments.delta"){let m="",p=null;if("delta"in c&&typeof c.delta=="string"&&(m=c.delta),"item_id"in c&&c.item_id){const y=c.item_id;for(const[v,b]of n.entries())if(b.itemId===y||v===y){p=v;break}}if(m&&p){const y=n.get(p);if(y){if(m==="{}"&&y.arguments==="")continue;y.arguments+=m}else console.warn(`Received argument delta for unknown call with item_id: ${"item_id"in c?c.item_id:"unknown"}`)}continue}if(c.type==="response.output_text.delta"&&"delta"in c){a+=c.delta||"",a.length>100&&(a.includes(`

`)||a.trim().match(/[.!?]\s*$/))&&(e.push({type:"response.output_text.delta",delta:a.trim()}),a="");continue}c.type!=="response.usage.complete"&&e.push(c)}for(const[,c]of n)if(c.arguments.trim()&&c.arguments.trim().length>2){const d=r.get(c.callId)||c.name||"unknown";e.push({type:"response.function_call.complete",data:{name:d,arguments:c.arguments,call_id:c.callId}})}return a.trim()&&e.push({type:"response.output_text.delta",delta:a.trim()}),e}function r6(t){switch(t.type){case"response.output_text.delta":if("delta"in t){const e=t.delta||"";return e.length>60?`${e.slice(0,60)}...`:e}return"Text output";case"response.function_call.complete":if("data"in t&&t.data){const e=t.data;let n=e.name||"unknown";(!n||n==="unknown")&&(n="function_call");const r=e.arguments?typeof e.arguments=="string"?e.arguments.slice(0,30):JSON.stringify(e.arguments).slice(0,30):"";return`Calling ${n}(${r}${r.length>=30?"...":""})`}return"Function call";case"response.function_call_arguments.delta":return"delta"in t&&t.delta?`Function arg delta: ${t.delta.slice(0,30)}${t.delta.length>30?"...":""}`:"Function arguments...";case"response.output_item.added":{const e=El(t);if(e){const r=e.output.slice(0,40);return`Tool result: ${r}${r.length>=40?"...":""}`}const n=t;return n.item.type==="function_call"?`Tool call: ${n.item.name}`:"Output item added"}case"response.workflow_event.complete":return"data"in t&&t.data?`Executor: ${t.data.executor_id||"unknown"}`:"Workflow event";case"response.trace_event.complete":case"response.trace.complete":return"data"in t&&t.data?`Trace: ${t.data.operation_name||"unknown"}`:"Trace event";case"response.completed":if("response"in t&&t.response&&"usage"in t.response){const n=t.response.usage;if(n)return`Response complete (${n.total_tokens} tokens)`}return"Response complete";case"response.done":return"Response complete";case"error":return"message"in t&&typeof t.message=="string"?t.message:"Error occurred";default:return`${t.type}`}}function o6(t){switch(t){case"response.output_text.delta":return JN;case"response.function_call.complete":case"response.function_call.delta":case"response.function_call_arguments.delta":return gC;case"response.output_item.added":return Ym;case"response.workflow_event.complete":return AT;case"response.trace_event.complete":case"response.trace.complete":return ug;case"response.completed":return Ym;case"response.done":return Ym;case"error":return fC;default:return Uu}}function i6(t){switch(t){case"response.output_text.delta":return"text-gray-600 dark:text-gray-400";case"response.function_call.complete":case"response.function_call.delta":case"response.function_call_arguments.delta":return"text-blue-600 dark:text-blue-400";case"response.output_item.added":return"text-green-600 dark:text-green-400";case"response.workflow_event.complete":return"text-purple-600 dark:text-purple-400";case"response.trace_event.complete":case"response.trace.complete":return"text-orange-600 dark:text-orange-400";case"response.completed":return"text-green-600 dark:text-green-400";case"response.done":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}function s6({event:t}){const[e,n]=_.useState(!1),r=o6(t.type),a=i6(t.type),c=new Date().toLocaleTimeString(),d=r6(t),m=t.type==="response.function_call.complete"&&"data"in t&&t.data||t.type==="response.output_item.added"&&El(t)!==null||t.type==="response.workflow_event.complete"&&"data"in t&&t.data||t.type==="response.trace_event.complete"&&"data"in t&&t.data||t.type==="response.trace.complete"&&"data"in t&&t.data||t.type==="response.output_text.delta"&&"delta"in t&&t.delta&&t.delta.length>100||t.type==="response.completed"&&"response"in t&&t.response||t.type==="error";return h.jsxs("div",{className:"border-l-2 border-muted pl-3 py-2 hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[h.jsx(r,{className:`h-3 w-3 ${a}`}),h.jsx("span",{className:"font-mono",children:c}),h.jsx(Jr,{variant:"outline",className:"text-xs py-0",children:t.type.replace("response.","")})]}),h.jsxs("div",{className:"text-sm",children:[h.jsxs("div",{className:`flex items-center gap-2 ${m?"cursor-pointer":""}`,onClick:()=>m&&n(!e),children:[m&&h.jsx("div",{className:"text-muted-foreground",children:e?h.jsx(Qs,{className:"h-3 w-3"}):h.jsx(WN,{className:"h-3 w-3"})}),h.jsx("div",{className:"text-muted-foreground flex-1",children:m&&d.length>80?`${d.slice(0,80)}...`:d})]}),e&&m&&h.jsx("div",{className:"mt-2 ml-5 p-3 bg-muted/30 rounded border",children:h.jsx(a6,{event:t})})]})]})}function a6({event:t}){if(t.type==="error"){const e=t;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fC,{className:"h-4 w-4 text-red-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Error Details"})]}),h.jsxs("div",{className:"text-xs",children:[e.message&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Message:"}),h.jsx("div",{className:"mt-1",children:h.jsx("pre",{className:"text-xs bg-destructive/10 border border-destructive/30 rounded p-2 text-destructive whitespace-pre-wrap break-all",children:e.message})})]}),e.code&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Code:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.code})]}),e.param&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Parameter:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.param})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Raw Event:"}),h.jsx("div",{className:"mt-1",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap break-all max-h-32 overflow-auto",children:JSON.stringify(t,null,2)})})]})]})]})}switch(t.type){case"response.function_call.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gC,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Function Call"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Function:"}),h.jsx("span",{className:"ml-2 font-mono bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:e.name||"unknown"})]}),e.call_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.call_id})]}),e.arguments&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Arguments:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:typeof e.arguments=="string"?e.arguments:JSON.stringify(e.arguments,null,1)})})]})]})]})}break;case"response.output_item.added":{const e=El(t);if(e)return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ym,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Function Result"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.call_id})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${e.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.status})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Output:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:e.output})})]})]})]});break}case"response.workflow_event.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(AT,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Workflow Event"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Event Type:"}),h.jsx("span",{className:"ml-2 font-mono bg-purple-100 dark:bg-purple-900 px-2 py-1 rounded",children:e.event_type||"unknown"})]}),e.executor_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Executor:"}),h.jsx("span",{className:"ml-2 font-mono",children:e.executor_id})]}),e.timestamp&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Timestamp:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.timestamp})]}),e.data&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Data:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:typeof e.data=="string"?e.data:JSON.stringify(e.data,null,1)})})]})]})]})}break;case"response.trace_event.complete":case"response.trace.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ug,{className:"h-4 w-4 text-orange-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Trace Event"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Operation:"}),h.jsx("span",{className:"ml-2 font-mono bg-orange-100 dark:bg-orange-900 px-2 py-1 rounded",children:e.operation_name||"unknown"})]}),e.span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Span ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.span_id})]}),e.trace_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Trace ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.trace_id})]}),e.duration_ms&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Duration:"}),h.jsxs("span",{className:"ml-2 font-mono text-xs",children:[Number(e.duration_ms).toFixed(2),"ms"]})]}),e.status&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${e.status==="StatusCode.UNSET"||e.status==="OK"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.status||"unknown"})]}),e.entity_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Entity:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.entity_id})]}),e.attributes&&Object.keys(e.attributes).length>0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Attributes:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap break-all",children:(()=>{try{const n={...e.attributes};return Object.keys(n).forEach(r=>{if(typeof n[r]=="string"&&n[r].startsWith("["))try{n[r]=JSON.parse(n[r])}catch{}}),JSON.stringify(n,null,2)}catch{return JSON.stringify(e.attributes,null,2)}})()})})]})]})]})}break;case"response.output_text.delta":if("delta"in t&&t.delta)return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(JN,{className:"h-4 w-4 text-gray-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Text Output"})]}),h.jsx("div",{className:"max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:t.delta})})]});break;case"response.completed":if("response"in t&&t.response){const n=t.response;return h.jsx("div",{className:"space-y-2",children:h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[n.usage&&h.jsxs(h.Fragment,{children:[h.jsx("div",{children:h.jsx("span",{className:"font-medium text-muted-foreground",children:"Usage:"})}),h.jsxs("div",{className:"ml-4 space-y-1",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Input tokens:"}),h.jsx("span",{className:"ml-2 font-mono",children:n.usage.input_tokens})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Output tokens:"}),h.jsx("span",{className:"ml-2 font-mono",children:n.usage.output_tokens})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Total tokens:"}),h.jsx("span",{className:"ml-2 font-mono bg-green-100 dark:bg-green-900 px-2 py-1 rounded",children:n.usage.total_tokens})]})]})]}),n.id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Response ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:n.id})]}),n.model&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Model:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:n.model})]})]})})}break;default:return h.jsx("div",{className:"text-xs text-muted-foreground",children:h.jsx("pre",{className:"bg-background border rounded p-2 overflow-auto max-h-32",children:JSON.stringify(t,null,2)})})}return null}function c6({events:t,isStreaming:e}){const n=_.useRef(null),r=$O(t),a=[...r].reverse();return h.jsxs("div",{className:"h-full",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(AT,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Events"}),h.jsxs(Jr,{variant:"outline",children:[r.length,t.length>r.length?` (${t.length} raw)`:""]})]}),e&&h.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[h.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-green-500 dark:bg-green-400"}),"Streaming"]})]}),h.jsx(Rg,{ref:n,children:h.jsx("div",{className:"p-3",children:r.length===0?h.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:t.length===0?"No events yet. Start a conversation to see real-time events.":"Processing events... Accumulated events will appear here."}):h.jsx("div",{className:"space-y-2",children:a.map((c,d)=>h.jsx(s6,{event:c},`${c.type}-${d}`))})})})]})}function l6({events:t}){const e=t.filter(r=>r.type==="response.trace_event.complete"||r.type==="response.trace.complete"),n=[...e].reverse();return h.jsxs("div",{className:"h-full",children:[h.jsxs("div",{className:"flex items-center gap-2 p-3 border-b",children:[h.jsx(ug,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Traces"}),h.jsx(Jr,{variant:"outline",children:e.length})]}),h.jsx(Rg,{className:"",children:h.jsx("div",{className:"p-3",children:e.length===0?h.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:["No trace data available.",h.jsx("br",{}),t&&t.length>0&&h.jsxs("div",{className:"mt-3 text-xs border rounded p-2",children:[" ",h.jsx(gv,{className:"inline h-4 w-4 mr-1  "}),"You may have to set the environment variable"," ",h.jsx("span",{className:"font-mono bg-accent/10 px-1 rounded",children:"ENABLE_OTEL=true"})," ","or restart devui with the tracing flag"," ",h.jsx("div",{className:"font-mono bg-accent/10 px-1 rounded",children:"devui --tracing"}),"to enable tracing."]})]}):h.jsx("div",{className:"space-y-3",children:n.map((r,a)=>h.jsx(u6,{event:r},a))})})})]})}function u6({event:t}){const[e,n]=_.useState(!1);if(t.type!=="response.trace_event.complete"&&t.type!=="response.trace.complete"||!("data"in t))return h.jsxs("div",{className:"border rounded p-3 text-red-600 dark:text-red-400 text-xs",children:["Error: Expected trace event but got ",t.type]});const r=t.data;let a=new Date().toLocaleTimeString();r.end_time?a=new Date(r.end_time*1e3).toLocaleTimeString():r.start_time?a=new Date(r.start_time*1e3).toLocaleTimeString():r.timestamp&&(a=new Date(r.timestamp).toLocaleTimeString());const c=r.operation_name||"Unknown Operation",d=r.duration_ms?`${Number(r.duration_ms).toFixed(1)}ms`:"",m=r.entity_id||"";return h.jsxs("div",{className:"border-l-2 border-muted pl-3 py-2 hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[h.jsx(ug,{className:"h-3 w-3 text-orange-600 dark:text-orange-400"}),h.jsx("span",{className:"font-mono",children:a}),h.jsx(Jr,{variant:"outline",className:"text-xs py-0",children:"trace"}),d&&h.jsx(Jr,{variant:"secondary",className:"text-xs py-0",children:d})]}),h.jsxs("div",{className:"text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n(!e),children:[h.jsx("div",{className:"text-muted-foreground",children:e?h.jsx(Qs,{className:"h-3 w-3"}):h.jsx(WN,{className:"h-3 w-3"})}),h.jsxs("div",{className:"text-muted-foreground flex-1",children:[h.jsx("span",{className:"font-medium",children:c}),m&&h.jsxs("span",{className:"ml-2 text-xs",children:["(",m,")"]})]})]}),e&&h.jsx("div",{className:"mt-2 ml-5 p-3 bg-muted/30 rounded border",children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ug,{className:"h-4 w-4 text-orange-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Trace Details"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Operation:"}),h.jsx("span",{className:"ml-2 font-mono bg-orange-100 dark:bg-orange-900 px-2 py-1 rounded",children:c})]}),r.span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Span ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:r.span_id})]}),r.trace_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Trace ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:r.trace_id})]}),r.parent_span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Parent Span:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:r.parent_span_id})]}),r.duration_ms&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Duration:"}),h.jsxs("span",{className:"ml-2 font-mono text-xs",children:[Number(r.duration_ms).toFixed(2),"ms"]})]}),r.status&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${r.status==="StatusCode.UNSET"||r.status==="OK"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:r.status||"unknown"})]}),r.entity_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Entity:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:r.entity_id})]}),r.attributes&&Object.keys(r.attributes).length>0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Attributes:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:(()=>{try{const p={...r.attributes};return Object.keys(p).forEach(y=>{if(typeof p[y]=="string"&&p[y].startsWith("["))try{p[y]=JSON.parse(p[y])}catch{}}),JSON.stringify(p,null,2)}catch{return JSON.stringify(r.attributes,null,2)}})()})})]})]})]})})]})]})}function d6({events:t}){const e=$O(t),n=[],r=e.filter(m=>m.type==="response.function_call.complete"),a=t.filter(m=>El(m)!==null),c=new Map;a.forEach(m=>{const p=El(m);p&&c.set(p.call_id,m)}),r.forEach(m=>{if(n.push(m),"data"in m&&m.data&&m.data.call_id){const p=String(m.data.call_id),y=c.get(p);y&&(n.push(y),c.delete(p))}}),c.forEach(m=>{n.push(m)});const d=[...n].reverse();return h.jsxs("div",{className:"h-full",children:[h.jsxs("div",{className:"flex items-center gap-2 p-3 border-b",children:[h.jsx(gC,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Tools"}),h.jsx(Jr,{variant:"outline",children:n.length})]}),h.jsx(Rg,{children:h.jsx("div",{className:"p-3",children:n.length===0?h.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"No tool executions yet. Tool calls will appear here during conversations."}):h.jsx("div",{className:"space-y-3",children:d.map((m,p)=>h.jsx(h6,{event:m},p))})})})]})}function h6({event:t}){if(!("data"in t))return null;const e=t.data,n=new Date().toLocaleTimeString(),r=t.type==="response.function_call.complete",a=El(t)!==null;return!r&&!a?null:h.jsxs("div",{className:"border rounded p-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(tO,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),h.jsx("span",{className:"font-medium text-sm",children:r?"Tool Call":"Tool Result"}),r&&e.name!==void 0&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",String(e.name),")"]})]}),h.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:n})]}),r&&h.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(gC,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"}),h.jsx("span",{className:"text-xs font-mono bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"CALL"}),h.jsx("span",{className:"font-medium text-sm",children:String(e.name||"unknown")})]}),e.arguments!==void 0&&h.jsxs("div",{className:"text-xs",children:[h.jsx("span",{className:"text-muted-foreground mb-1 block",children:"Arguments:"}),h.jsx("pre",{className:"p-2 bg-background border rounded text-xs overflow-auto max-h-32 max-w-full break-all whitespace-pre-wrap",children:typeof e.arguments=="string"?e.arguments:JSON.stringify(e.arguments,null,1)})]})]}),a&&h.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-950/50 border border-green-200 dark:border-green-800 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Ym,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),h.jsx("span",{className:"text-xs font-mono bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"RESULT"})]}),h.jsxs("div",{className:"text-xs",children:[h.jsx("span",{className:"text-muted-foreground mb-1 block",children:"Result:"}),h.jsx("pre",{className:"p-2 bg-background border rounded text-xs overflow-auto max-h-32 max-w-full break-all whitespace-pre-wrap",children:typeof e.result=="string"?e.result:JSON.stringify(e.result,null,1)})]}),e.exception!==null&&e.exception!==void 0&&h.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-950/50 border border-red-200 dark:border-red-800 rounded",children:h.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400",children:["Error: ",String(e.exception)]})})]})]})}function f6({events:t,isStreaming:e=!1,onClose:n}){return h.jsx("div",{className:" overflow-auto h-[calc(100vh-3.7rem)] border-l",children:h.jsxs(n6,{defaultValue:"events",className:"h-full flex flex-col",children:[h.jsxs("div",{className:"px-3 pt-3 flex items-center gap-2",children:[h.jsxs(qO,{className:"flex-1",children:[h.jsx(Ny,{value:"events",className:"flex-1",children:"Events"}),h.jsx(Ny,{value:"traces",className:"flex-1",children:"Traces"}),h.jsx(Ny,{value:"tools",className:"flex-1",children:"Tools"})]}),n&&h.jsx(wt,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0 flex-shrink-0",title:"Hide debug panel",children:h.jsx(mF,{className:"h-4 w-4"})})]}),h.jsx(Oy,{value:"events",className:"flex-1 mt-0",children:h.jsx(c6,{events:t,isStreaming:e})}),h.jsx(Oy,{value:"traces",className:"flex-1 mt-0",children:h.jsx(l6,{events:t})}),h.jsx(Oy,{value:"tools",className:"flex-1 mt-0",children:h.jsx(d6,{events:t})})]})})}function zu({open:t,onOpenChange:e,children:n}){return t?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>e(!1),children:[h.jsx("div",{className:"absolute inset-0 bg-black/50"}),h.jsx("div",{onClick:r=>r.stopPropagation(),children:n})]}):null}function Fu({children:t,className:e=""}){const r=e.includes("w-[")||e.includes("w-full")||e.includes("max-w-")?"":"max-w-lg w-full";return h.jsx("div",{className:`relative bg-background border rounded-lg shadow-lg max-h-[90vh] overflow-hidden ${r} ${e}`,children:t})}function Ku({children:t,className:e=""}){return h.jsx("div",{className:`space-y-2 ${e}`,children:t})}function Gu({children:t,className:e=""}){return h.jsx("h2",{className:`text-lg font-semibold ${e}`,children:t})}function qu({onClose:t}){return h.jsx(wt,{variant:"ghost",size:"sm",onClick:t,className:"absolute top-4 right-4 h-8 w-8 p-0 rounded-sm opacity-70 hover:opacity-100",children:h.jsx(jh,{className:"h-4 w-4"})})}function m6({children:t}){return h.jsx("div",{className:"flex justify-end gap-2 p-4 border-t bg-muted/50",children:t})}function wE({className:t,type:e,...n}){return h.jsx("input",{type:e,"data-slot":"input",className:At("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var g6="Label",VO=_.forwardRef((t,e)=>h.jsx(ct.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));VO.displayName=g6;var p6=VO;function al({className:t,...e}){return h.jsx(p6,{"data-slot":"label",className:At("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function E0({open:t,onOpenChange:e,onBackendUrlChange:n}){const[r,a]=_.useState("about"),c="http://127.0.0.1:8080",[d,m]=_.useState(()=>localStorage.getItem("devui_backend_url")||c),[p,y]=_.useState(d),v=()=>{try{new URL(p),localStorage.setItem("devui_backend_url",p),m(p),n?.(p),e(!1),window.location.reload()}catch{alert("Please enter a valid URL (e.g., http://127.0.0.1:8080)")}},b=()=>{localStorage.removeItem("devui_backend_url"),y(c),m(c),n?.(c),window.location.reload()},E=p!==d,x=!localStorage.getItem("devui_backend_url");return h.jsx(zu,{open:t,onOpenChange:e,children:h.jsxs(Fu,{className:"w-[600px] max-w-[90vw]",children:[h.jsx(Ku,{className:"p-6 pb-2",children:h.jsx(Gu,{children:"Settings"})}),h.jsx(qu,{onClose:()=>e(!1)}),h.jsxs("div",{className:"flex border-b px-6",children:[h.jsxs("button",{onClick:()=>a("about"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="about"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:["About",r==="about"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),h.jsxs("button",{onClick:()=>a("settings"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="settings"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:["Settings",r==="settings"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]}),h.jsxs("div",{className:"px-6 pb-6 min-h-[240px]",children:[r==="about"&&h.jsxs("div",{className:"space-y-4 pt-4",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"DevUI is a sample app for getting started with Agent Framework."}),h.jsx("div",{className:"flex justify-center pt-2",children:h.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>window.open("https://github.com/microsoft/agent-framework","_blank"),className:"text-xs",children:[h.jsx(zz,{className:"h-3 w-3 mr-1"}),"Learn More about Agent Framework"]})})]}),r==="settings"&&h.jsx("div",{className:"space-y-6 pt-4",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(al,{htmlFor:"backend-url",className:"text-sm font-medium",children:"Backend URL"}),!x&&h.jsxs(wt,{variant:"ghost",size:"sm",onClick:b,className:"h-7 text-xs",title:"Reset to default",children:[h.jsx(_T,{className:"h-3 w-3 mr-1"}),"Reset"]})]}),h.jsx(wE,{id:"backend-url",type:"url",value:p,onChange:I=>y(I.target.value),placeholder:"http://127.0.0.1:8080",className:"font-mono text-sm"}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",h.jsx("span",{className:"font-mono",children:c})]}),h.jsx("div",{className:"flex gap-2 pt-2 min-h-[36px]",children:E&&h.jsxs(h.Fragment,{children:[h.jsx(wt,{onClick:v,size:"sm",className:"flex-1",children:"Apply & Reload"}),h.jsx(wt,{onClick:()=>y(d),variant:"outline",size:"sm",className:"flex-1",children:"Cancel"})]})})]})})]})]})})}function y6({className:t,...e}){return h.jsx("div",{"data-slot":"card",className:At("bg-card text-card-foreground flex flex-col gap-6 rounded border py-6 shadow-sm",t),...e})}function v6({className:t,...e}){return h.jsx("div",{"data-slot":"card-header",className:At("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function YO({className:t,...e}){return h.jsx("div",{"data-slot":"card-title",className:At("leading-none font-semibold",t),...e})}function C6({className:t,...e}){return h.jsx("div",{"data-slot":"card-description",className:At("text-muted-foreground text-sm",t),...e})}function w6({className:t,...e}){return h.jsx("div",{"data-slot":"card-content",className:At("px-6",t),...e})}function b6({className:t,...e}){return h.jsx("div",{"data-slot":"card-footer",className:At("flex items-center px-6 [.border-t]:pt-6",t),...e})}const ll=[{id:"foundry-weather-agent",name:"Azure AI Weather Agent",description:"Weather agent using Azure AI Agent (Foundry) with Azure CLI authentication",type:"agent",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/foundry_agent/agent.py",tags:["azure-ai","foundry","tools"],author:"Microsoft",difficulty:"beginner",features:["Azure AI Agent integration","Azure CLI authentication","Mock weather tools"],requiredEnvVars:[{name:"AZURE_AI_PROJECT_ENDPOINT",description:"Azure AI Foundry project endpoint URL",required:!0,example:"https://your-project.api.azureml.ms"},{name:"FOUNDRY_MODEL_DEPLOYMENT_NAME",description:"Name of the deployed model in Azure AI Foundry",required:!0,example:"gpt-4o"}]},{id:"weather-agent-azure",name:"Azure OpenAI Weather Agent",description:"Weather agent using Azure OpenAI with API key authentication",type:"agent",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/weather_agent_azure/agent.py",tags:["azure","openai","tools"],author:"Microsoft",difficulty:"beginner",features:["Azure OpenAI integration","API key authentication","Function calling","Mock weather tools"],requiredEnvVars:[{name:"AZURE_OPENAI_API_KEY",description:"Azure OpenAI API key",required:!0},{name:"AZURE_OPENAI_CHAT_DEPLOYMENT_NAME",description:"Name of the deployed model in Azure OpenAI",required:!0,example:"gpt-4o"},{name:"AZURE_OPENAI_ENDPOINT",description:"Azure OpenAI endpoint URL",required:!0,example:"https://your-resource.openai.azure.com"}]},{id:"spam-workflow",name:"Spam Detection Workflow",description:"5-step workflow demonstrating email spam detection with branching logic",type:"workflow",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/spam_workflow/workflow.py",tags:["workflow","branching","multi-step"],author:"Microsoft",difficulty:"beginner",features:["Sequential execution","Conditional branching","Mock spam detection"]},{id:"fanout-workflow",name:"Complex Fan-In/Fan-Out Workflow",description:"Advanced data processing workflow with parallel validation, transformation, and quality assurance stages",type:"workflow",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/fanout_workflow/workflow.py",tags:["workflow","fan-out","fan-in","parallel"],author:"Microsoft",difficulty:"advanced",features:["Fan-out pattern","Parallel execution","Complex state management","Multi-stage processing"]}];ll.filter(t=>t.type==="agent"),ll.filter(t=>t.type==="workflow"),ll.filter(t=>t.difficulty==="beginner"),ll.filter(t=>t.difficulty==="intermediate"),ll.filter(t=>t.difficulty==="advanced");const E6=t=>{switch(t){case"beginner":return"bg-green-100 text-green-700 border-green-200";case"intermediate":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"advanced":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}};function A6({sample:t,onAdd:e,isAdding:n=!1,hasError:r=!1,errorMessage:a,onClearError:c}){const[d,m]=_.useState(!1),p=async()=>{if(!(d||n)){m(!0);try{await e(t)}finally{m(!1)}}},y=t.type==="workflow"?Hu:$s,v=d||n;return h.jsxs(y6,{className:At("hover:shadow-md transition-shadow duration-200 h-full flex flex-col overflow-hidden w-full",r&&"border-destructive"),children:[h.jsxs(v6,{className:"pb-3 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(y,{className:"h-5 w-5"}),h.jsx(Jr,{variant:"secondary",className:"text-xs",children:t.type})]}),h.jsx(Jr,{variant:"outline",className:At("text-xs border",E6(t.difficulty)),children:t.difficulty})]}),h.jsx(YO,{className:"text-lg leading-tight",children:t.name}),h.jsx(C6,{className:"text-sm line-clamp-3",children:t.description})]}),h.jsxs(w6,{className:"pt-0 flex-1 min-w-0 overflow-hidden",children:[r&&a&&h.jsx("div",{className:"mb-3 p-3 bg-destructive/10 border border-destructive/20 rounded-md",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(Uu,{className:"h-4 w-4 text-destructive flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:"text-xs text-destructive font-medium mb-1",children:"Failed to add"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:a})]}),c&&h.jsx("button",{onClick:()=>c(t.id),className:"text-muted-foreground hover:text-foreground","aria-label":"Dismiss error",children:h.jsx(jh,{className:"h-3 w-3"})})]})}),h.jsxs("div",{className:"space-y-3 min-w-0",children:[h.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(b=>h.jsx(Jr,{variant:"outline",className:"text-xs",children:b},b)),t.tags.length>3&&h.jsxs(Jr,{variant:"outline",className:"text-xs",children:["+",t.tags.length-3]})]}),t.requiredEnvVars&&t.requiredEnvVars.length>0&&h.jsxs("details",{className:"group min-w-0 max-w-full overflow-hidden",children:[h.jsxs("summary",{className:"cursor-pointer list-none p-2 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md hover:bg-amber-100 dark:hover:bg-amber-950/30 transition-colors flex items-center justify-between gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(Zz,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-500 flex-shrink-0"}),h.jsxs("span",{className:"text-xs font-medium text-amber-900 dark:text-amber-100 truncate",children:["Requires ",t.requiredEnvVars.length," env var",t.requiredEnvVars.length>1?"s":""]})]}),h.jsx(Qs,{className:"h-3 w-3 text-amber-600 dark:text-amber-500 flex-shrink-0 group-open:rotate-180 transition-transform"})]}),h.jsx("div",{className:"mt-2 p-2 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md space-y-2 min-w-0 max-w-full overflow-hidden",children:t.requiredEnvVars.map(b=>h.jsxs("div",{className:"text-xs min-w-0 max-w-full overflow-hidden",children:[h.jsx("div",{className:"font-mono font-medium text-amber-900 dark:text-amber-100 break-words",children:b.name}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300 mt-0.5 break-words",children:b.description}),b.example&&h.jsx("div",{className:"font-mono text-amber-600 dark:text-amber-400 mt-0.5 break-all",children:b.example})]},b.name))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Key Features:"}),h.jsx("ul",{className:"text-xs space-y-1",children:t.features.slice(0,3).map(b=>h.jsxs("li",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-1 h-1 rounded-full bg-current opacity-50"}),h.jsx("span",{children:b})]},b))})]})]})]}),h.jsxs(b6,{className:"pt-3 flex-col gap-3",children:[h.jsx("div",{className:"w-full flex items-center justify-between text-xs text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(kT,{className:"h-3 w-3"}),h.jsx("span",{children:t.author})]})}),h.jsx(wt,{onClick:p,disabled:v,className:"w-full",size:"sm",variant:r?"outline":"default",children:v?h.jsxs(h.Fragment,{children:[h.jsx(mC,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):r?h.jsxs(h.Fragment,{children:[h.jsx(pv,{className:"h-4 w-4 mr-2"}),"Retry"]}):h.jsxs(h.Fragment,{children:[h.jsx(pv,{className:"h-4 w-4 mr-2"}),"Add Sample"]})})]})]})}function Sb({samples:t,onAdd:e,addingEntityId:n,errorEntityId:r,errorMessage:a,onClearError:c}){return h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(d=>h.jsx("div",{className:"min-w-0",children:h.jsx(A6,{sample:d,onAdd:e,isAdding:n===d.id,hasError:r===d.id,errorMessage:a,onClearError:c})},d.id))})}function A0({onAdd:t,addingEntityId:e,errorEntityId:n,errorMessage:r,onClearError:a,onClose:c,variant:d="inline",hasExistingEntities:m=!1}){return d==="inline"?h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsx("div",{className:"mb-8 p-4 bg-muted/50 border border-border rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(jF,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold mb-1",children:"No agents or workflows configured yet!"}),h.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["You can configure agents or workflows by running"," ",h.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs",children:"devui"})," ","in a directory containing them."]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"You can also import any of the sample agents and workflows below to get started quickly."})]})]})}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sample Gallery"}),h.jsx(Sb,{samples:ll,onAdd:t,addingEntityId:e,errorEntityId:n,errorMessage:r,onClearError:a})]}),h.jsx("div",{className:"text-center mt-12 pt-8 border-t",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Want to create your own agents or workflows? Check out the"," ",h.jsx("a",{href:"https://github.com/microsoft/agent-framework",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"documentation"})]})})]})}):d==="route"?h.jsx("div",{className:"h-full overflow-auto",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsxs("div",{className:"mb-8",children:[m&&h.jsx("div",{className:"mb-4",children:h.jsxs(wt,{variant:"ghost",onClick:c,className:"gap-2",children:[h.jsx(bz,{className:"h-4 w-4"}),"Back"]})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Sample Gallery"}),h.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Browse and add sample agents and workflows to learn the Agent Framework. These are curated examples ranging from beginner to advanced."})]})]}),h.jsx(Sb,{samples:ll,onAdd:t,addingEntityId:e,errorEntityId:n,errorMessage:r,onClearError:a}),h.jsx("div",{className:"text-center mt-12 pt-8 border-t",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Want to create your own agents or workflows? Check out the"," ",h.jsx("a",{href:"https://github.com/microsoft/agent-framework",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"documentation"})]})})]})}):h.jsx(Sb,{samples:ll,onAdd:t,addingEntityId:e,errorEntityId:n,errorMessage:r,onClearError:a})}function My({className:t,...e}){return h.jsx("textarea",{"data-slot":"textarea",className:At("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function T6({onFilesSelected:t,accept:e="image/*,.pdf,audio/*,.wav,.mp3,.m4a,.ogg",multiple:n=!0,maxSize:r=50*1024*1024,disabled:a=!1,className:c=""}){const d=_.useRef(null),m=E=>{if(!E||E.length===0)return;const x=[],I=[];Array.from(E).forEach(k=>{if(k.size>r){I.push(`${k.name} is too large (max ${S6(r)})`);return}if(e&&!x6(k,e)){I.push(`${k.name} is not an accepted file type`);return}x.push(k)}),I.length>0&&console.warn("File upload errors:",I),x.length>0&&t(x)},p=()=>{d.current&&d.current.click()},y=E=>{m(E.target.files),E.target.value=""},v=E=>{if(E.preventDefault(),E.stopPropagation(),a)return;const x=E.dataTransfer.files;m(x)},b=E=>{E.preventDefault(),E.stopPropagation()};return h.jsxs("div",{className:c,children:[h.jsx("input",{ref:d,type:"file",accept:e,multiple:n,onChange:y,className:"hidden",disabled:a}),h.jsx(wt,{type:"button",variant:"outline",size:"icon",onClick:p,disabled:a,onDrop:v,onDragOver:b,className:"shrink-0 transition-colors hover:bg-muted",title:"Upload files (images, PDFs, audio)",children:h.jsx(BF,{className:"h-4 w-4"})})]})}function S6(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function x6(t,e){return e.split(",").map(r=>r.trim()).some(r=>{if(r.startsWith("."))return t.name.toLowerCase().endsWith(r.toLowerCase());if(r.includes("/*")){const[a]=r.split("/");return t.type.startsWith(a+"/")}else return t.type===r})}function _6({attachments:t,onRemoveAttachment:e,className:n=""}){return t.length===0?null:h.jsx("div",{className:`flex flex-wrap gap-2 p-2 bg-muted rounded-lg ${n}`,children:t.map(r=>h.jsx(k6,{attachment:r,onRemove:()=>e(r.id)},r.id))})}function k6({attachment:t,onRemove:e}){const[n,r]=_.useState(!1),a=()=>{switch(t.type){case"image":return t.preview?h.jsx("img",{src:t.preview,alt:t.file.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-200",children:h.jsx(Wz,{className:"h-6 w-6 text-gray-400"})});case"pdf":return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-red-50",children:[h.jsx(ju,{className:"h-6 w-6 text-red-500 mb-1"}),h.jsx("span",{className:"text-xs text-red-600",children:"PDF"})]});case"audio":return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-purple-50",children:[h.jsx(ZN,{className:"h-6 w-6 text-purple-500 mb-1"}),h.jsx("span",{className:"text-xs text-purple-600",children:"AUDIO"})]});default:return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-100",children:[h.jsx(ju,{className:"h-6 w-6 text-gray-500 mb-1"}),h.jsx("span",{className:"text-xs text-gray-600",children:"FILE"})]})}};return h.jsxs("div",{className:"relative w-16 h-16 rounded border overflow-hidden group cursor-pointer",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),title:t.file.name,children:[a(),h.jsx("div",{className:`absolute inset-0 bg-black/60 flex items-center justify-center transition-all duration-200 ease-in-out ${n?"opacity-100 backdrop-blur-sm":"opacity-0 pointer-events-none"}`,onClick:e,children:h.jsx("div",{className:`transition-all duration-200 ease-in-out ${n?"scale-100 opacity-100":"scale-75 opacity-0"}`,children:h.jsx(eO,{className:"h-5 w-5 text-white drop-shadow-lg"})})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white text-xs p-1 truncate opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:t.file.name})]})}function I6({content:t,className:e,isStreaming:n}){const[r,a]=_.useState(!1);if(t.type!=="text")return null;const c=t.text,d=1600,m=c.length>d,p=m&&!r?c.slice(0,d)+"...":c;return h.jsxs("div",{className:`whitespace-pre-wrap break-words ${e||""}`,children:[h.jsxs("div",{className:r&&m?"max-h-96 overflow-y-auto":"",children:[p,n&&c.length>0&&h.jsx("span",{className:"ml-1 inline-block h-2 w-2 animate-pulse rounded-full bg-current"})]}),m&&h.jsx("div",{className:"flex justify-end mt-1",children:h.jsx("button",{onClick:()=>a(!r),className:`inline-flex items-center gap-1 text-xs
                       bg-background/80 hover:bg-background border border-border/50 hover:border-border
                       text-muted-foreground hover:text-foreground
                       transition-colors cursor-pointer px-2 py-1 rounded`,children:r?h.jsxs(h.Fragment,{children:["less ",h.jsx(fv,{className:"h-3 w-3"})]}):h.jsxs(h.Fragment,{children:[(c.length-d).toLocaleString()," more"," ",h.jsx(Qs,{className:"h-3 w-3"})]})})})]})}function R6({content:t,className:e}){const[n,r]=_.useState(!1),[a,c]=_.useState(!1);if(t.type!=="input_image")return null;const d=t.image_url;return n?h.jsx("div",{className:`my-2 p-3 border rounded-lg bg-muted ${e||""}`,children:h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(ju,{className:"h-4 w-4"}),h.jsx("span",{children:"Image could not be loaded"})]})}):h.jsxs("div",{className:`my-2 ${e||""}`,children:[h.jsx("img",{src:d,alt:"Uploaded image",className:`rounded-lg border max-w-full transition-all cursor-pointer ${a?"max-h-none":"max-h-64"}`,onClick:()=>c(!a),onError:()=>r(!0)}),a&&h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Click to collapse"})]})}function N6({content:t,className:e}){if(t.type!=="input_file")return null;const n=t.file_url||t.file_data,r=t.filename||"file",a=r?.toLowerCase().endsWith(".pdf")||n?.includes("application/pdf"),c=r?.toLowerCase().match(/\.(mp3|wav|m4a|ogg|flac|aac)$/);return a&&n?h.jsxs("div",{className:`my-2 ${e||""}`,children:[h.jsx("div",{className:"border rounded-lg overflow-hidden",children:h.jsx("iframe",{src:n,className:"w-full h-96",title:r})}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx(ju,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:r}),n&&h.jsxs("a",{href:n,download:r,className:"ml-auto text-xs text-primary hover:underline flex items-center gap-1",children:[h.jsx(c0,{className:"h-3 w-3"}),"Download"]})]})]}):c&&n?h.jsxs("div",{className:`my-2 p-3 border rounded-lg ${e||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(ZN,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm font-medium",children:r})]}),h.jsxs("audio",{controls:!0,className:"w-full",children:[h.jsx("source",{src:n}),"Your browser does not support audio playback."]})]}):h.jsx("div",{className:`my-2 p-3 border rounded-lg bg-muted ${e||""}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ju,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm",children:r})]}),n&&h.jsxs("a",{href:n,download:r,className:"text-xs text-primary hover:underline flex items-center gap-1",children:[h.jsx(c0,{className:"h-3 w-3"}),"Download"]})]})})}function O6({content:t,className:e,isStreaming:n}){switch(t.type){case"text":return h.jsx(I6,{content:t,className:e,isStreaming:n});case"input_image":return h.jsx(R6,{content:t,className:e});case"input_file":return h.jsx(N6,{content:t,className:e});default:return null}}function M6({name:t,arguments:e,className:n}){const[r,a]=_.useState(!1);let c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}return h.jsxs("div",{className:`my-2 p-3 border rounded-lg bg-blue-50 dark:bg-blue-950/20 ${n||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>a(!r),children:[h.jsx(XN,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),h.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:["Function Call: ",t]}),h.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:r?"▼":"▶"})]}),r&&h.jsxs("div",{className:"mt-2 text-xs font-mono bg-white dark:bg-gray-900 p-2 rounded border",children:[h.jsx("div",{className:"text-blue-600 dark:text-blue-400 mb-1",children:"Arguments:"}),h.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(c,null,2)})]})]})}function P6({output:t,call_id:e,className:n}){const[r,a]=_.useState(!1);let c;try{c=typeof t=="string"?JSON.parse(t):t}catch{c=t}return h.jsxs("div",{className:`my-2 p-3 border rounded-lg bg-green-50 dark:bg-green-950/20 ${n||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>a(!r),children:[h.jsx(XN,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),h.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Function Result"}),h.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:r?"▼":"▶"})]}),r&&h.jsxs("div",{className:"mt-2 text-xs font-mono bg-white dark:bg-gray-900 p-2 rounded border",children:[h.jsx("div",{className:"text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(c,null,2)}),h.jsxs("div",{className:"text-gray-500 text-[10px] mt-2",children:["Call ID: ",e]})]})]})}function T0({item:t,className:e}){if(t.type==="message"){const n=t.status==="in_progress",r=t.content.length>0;return h.jsxs("div",{className:e,children:[t.content.map((a,c)=>h.jsx(O6,{content:a,className:c>0?"mt-2":"",isStreaming:n},c)),n&&!r&&h.jsx("div",{className:"flex items-center space-x-1",children:h.jsxs("div",{className:"flex space-x-1",children:[h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:-0.3s]"}),h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:-0.15s]"}),h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current"})]})})]})}return t.type==="function_call"?h.jsx(M6,{name:t.name,arguments:t.arguments,className:e}):t.type==="function_call_output"?h.jsx(P6,{output:t.output,call_id:t.call_id,className:e}):null}function QO(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var WO=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),D6="VisuallyHidden",L6=_.forwardRef((t,e)=>h.jsx(ct.span,{...t,ref:e,style:{...WO,...t.style}}));L6.displayName=D6;var U6=[" ","Enter","ArrowUp","ArrowDown"],j6=[" ","Enter"],$u="Select",[AC,TC,H6]=tT($u),[sf,cY]=Xa($u,[H6,iC]),SC=iC(),[B6,Al]=sf($u),[z6,F6]=sf($u),XO=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:a,onOpenChange:c,value:d,defaultValue:m,onValueChange:p,dir:y,name:v,autoComplete:b,disabled:E,required:x,form:I}=t,k=SC(e),[N,M]=_.useState(null),[j,O]=_.useState(null),[U,H]=_.useState(!1),V=Sg(y),[Q,Y]=Dh({prop:r,defaultProp:a??!1,onChange:c,caller:$u}),[ee,se]=Dh({prop:d,defaultProp:m,onChange:p,caller:$u}),ce=_.useRef(null),te=N?I||!!N.closest("form"):!0,[re,G]=_.useState(new Set),J=Array.from(re).map(D=>D.props.value).join(";");return h.jsx(_R,{...k,children:h.jsxs(B6,{required:x,scope:e,trigger:N,onTriggerChange:M,valueNode:j,onValueNodeChange:O,valueNodeHasChildren:U,onValueNodeHasChildrenChange:H,contentId:Du(),value:ee,onValueChange:se,open:Q,onOpenChange:Y,dir:V,triggerPointerDownPosRef:ce,disabled:E,children:[h.jsx(AC.Provider,{scope:e,children:h.jsx(z6,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(D=>{G(F=>new Set(F).add(D))},[]),onNativeOptionRemove:_.useCallback(D=>{G(F=>{const $=new Set(F);return $.delete(D),$})},[]),children:n})}),te?h.jsxs(CM,{"aria-hidden":!0,required:x,tabIndex:-1,name:v,autoComplete:b,value:ee,onChange:D=>se(D.target.value),disabled:E,form:I,children:[ee===void 0?h.jsx("option",{value:""}):null,Array.from(re)]},J):null]})})};XO.displayName=$u;var JO="SelectTrigger",ZO=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...a}=t,c=SC(n),d=Al(JO,n),m=d.disabled||r,p=Mt(e,d.onTriggerChange),y=TC(n),v=_.useRef("touch"),[b,E,x]=bM(k=>{const N=y().filter(O=>!O.disabled),M=N.find(O=>O.value===d.value),j=EM(N,k,M);j!==void 0&&d.onValueChange(j.value)}),I=k=>{m||(d.onOpenChange(!0),x()),k&&(d.triggerPointerDownPosRef.current={x:Math.round(k.pageX),y:Math.round(k.pageY)})};return h.jsx(kR,{asChild:!0,...c,children:h.jsx(ct.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":wM(d.value)?"":void 0,...a,ref:p,onClick:Qe(a.onClick,k=>{k.currentTarget.focus(),v.current!=="mouse"&&I(k)}),onPointerDown:Qe(a.onPointerDown,k=>{v.current=k.pointerType;const N=k.target;N.hasPointerCapture(k.pointerId)&&N.releasePointerCapture(k.pointerId),k.button===0&&k.ctrlKey===!1&&k.pointerType==="mouse"&&(I(k),k.preventDefault())}),onKeyDown:Qe(a.onKeyDown,k=>{const N=b.current!=="";!(k.ctrlKey||k.altKey||k.metaKey)&&k.key.length===1&&E(k.key),!(N&&k.key===" ")&&U6.includes(k.key)&&(I(),k.preventDefault())})})})});ZO.displayName=JO;var eM="SelectValue",tM=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,children:c,placeholder:d="",...m}=t,p=Al(eM,n),{onValueNodeHasChildrenChange:y}=p,v=c!==void 0,b=Mt(e,p.onValueNodeChange);return wr(()=>{y(v)},[y,v]),h.jsx(ct.span,{...m,ref:b,style:{pointerEvents:"none"},children:wM(p.value)?h.jsx(h.Fragment,{children:d}):c})});tM.displayName=eM;var K6="SelectIcon",nM=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...a}=t;return h.jsx(ct.span,{"aria-hidden":!0,...a,ref:e,children:r||"▼"})});nM.displayName=K6;var G6="SelectPortal",rM=t=>h.jsx(hT,{asChild:!0,...t});rM.displayName=G6;var Vu="SelectContent",oM=_.forwardRef((t,e)=>{const n=Al(Vu,t.__scopeSelect),[r,a]=_.useState();if(wr(()=>{a(new DocumentFragment)},[]),!n.open){const c=r;return c?Tg.createPortal(h.jsx(iM,{scope:t.__scopeSelect,children:h.jsx(AC.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),c):null}return h.jsx(sM,{...t,ref:e})});oM.displayName=Vu;var Yi=10,[iM,Tl]=sf(Vu),q6="SelectContentImpl",$6=Ph("SelectContent.RemoveScroll"),sM=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:c,onPointerDownOutside:d,side:m,sideOffset:p,align:y,alignOffset:v,arrowPadding:b,collisionBoundary:E,collisionPadding:x,sticky:I,hideWhenDetached:k,avoidCollisions:N,...M}=t,j=Al(Vu,n),[O,U]=_.useState(null),[H,V]=_.useState(null),Q=Mt(e,le=>U(le)),[Y,ee]=_.useState(null),[se,ce]=_.useState(null),te=TC(n),[re,G]=_.useState(!1),J=_.useRef(!1);_.useEffect(()=>{if(O)return HR(O)},[O]),rR();const D=_.useCallback(le=>{const[Ce,...De]=te().map(Oe=>Oe.ref.current),[we]=De.slice(-1),be=document.activeElement;for(const Oe of le)if(Oe===be||(Oe?.scrollIntoView({block:"nearest"}),Oe===Ce&&H&&(H.scrollTop=0),Oe===we&&H&&(H.scrollTop=H.scrollHeight),Oe?.focus(),document.activeElement!==be))return},[te,H]),F=_.useCallback(()=>D([Y,O]),[D,Y,O]);_.useEffect(()=>{re&&F()},[re,F]);const{onOpenChange:$,triggerPointerDownPosRef:X}=j;_.useEffect(()=>{if(O){let le={x:0,y:0};const Ce=we=>{le={x:Math.abs(Math.round(we.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(we.pageY)-(X.current?.y??0))}},De=we=>{le.x<=10&&le.y<=10?we.preventDefault():O.contains(we.target)||$(!1),document.removeEventListener("pointermove",Ce),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",De,{capture:!0})}}},[O,$,X]),_.useEffect(()=>{const le=()=>$(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[$]);const[z,W]=bM(le=>{const Ce=te().filter(be=>!be.disabled),De=Ce.find(be=>be.ref.current===document.activeElement),we=EM(Ce,le,De);we&&setTimeout(()=>we.ref.current.focus())}),ue=_.useCallback((le,Ce,De)=>{const we=!J.current&&!De;(j.value!==void 0&&j.value===Ce||we)&&(ee(le),we&&(J.current=!0))},[j.value]),de=_.useCallback(()=>O?.focus(),[O]),ge=_.useCallback((le,Ce,De)=>{const we=!J.current&&!De;(j.value!==void 0&&j.value===Ce||we)&&ce(le)},[j.value]),Ne=r==="popper"?bE:aM,Ee=Ne===bE?{side:m,sideOffset:p,align:y,alignOffset:v,arrowPadding:b,collisionBoundary:E,collisionPadding:x,sticky:I,hideWhenDetached:k,avoidCollisions:N}:{};return h.jsx(iM,{scope:n,content:O,viewport:H,onViewportChange:V,itemRefCallback:ue,selectedItem:Y,onItemLeave:de,itemTextRefCallback:ge,focusSelectedItem:F,selectedItemText:se,position:r,isPositioned:re,searchRef:z,children:h.jsx(gT,{as:$6,allowPinchZoom:!0,children:h.jsx(rT,{asChild:!0,trapped:j.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Qe(a,le=>{j.trigger?.focus({preventScroll:!0}),le.preventDefault()}),children:h.jsx(nT,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:h.jsx(Ne,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:le=>le.preventDefault(),...M,...Ee,onPlaced:()=>G(!0),ref:Q,style:{display:"flex",flexDirection:"column",outline:"none",...M.style},onKeyDown:Qe(M.onKeyDown,le=>{const Ce=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Ce&&le.key.length===1&&W(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let we=te().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(le.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const be=le.target,Oe=we.indexOf(be);we=we.slice(Oe+1)}setTimeout(()=>D(we)),le.preventDefault()}})})})})})})});sM.displayName=q6;var V6="SelectItemAlignedPosition",aM=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...a}=t,c=Al(Vu,n),d=Tl(Vu,n),[m,p]=_.useState(null),[y,v]=_.useState(null),b=Mt(e,Q=>v(Q)),E=TC(n),x=_.useRef(!1),I=_.useRef(!0),{viewport:k,selectedItem:N,selectedItemText:M,focusSelectedItem:j}=d,O=_.useCallback(()=>{if(c.trigger&&c.valueNode&&m&&y&&k&&N&&M){const Q=c.trigger.getBoundingClientRect(),Y=y.getBoundingClientRect(),ee=c.valueNode.getBoundingClientRect(),se=M.getBoundingClientRect();if(c.dir!=="rtl"){const be=se.left-Y.left,Oe=ee.left-be,Le=Q.left-Oe,fe=Q.width+Le,Me=Math.max(fe,Y.width),He=window.innerWidth-Yi,Ke=CE(Oe,[Yi,Math.max(Yi,He-Me)]);m.style.minWidth=fe+"px",m.style.left=Ke+"px"}else{const be=Y.right-se.right,Oe=window.innerWidth-ee.right-be,Le=window.innerWidth-Q.right-Oe,fe=Q.width+Le,Me=Math.max(fe,Y.width),He=window.innerWidth-Yi,Ke=CE(Oe,[Yi,Math.max(Yi,He-Me)]);m.style.minWidth=fe+"px",m.style.right=Ke+"px"}const ce=E(),te=window.innerHeight-Yi*2,re=k.scrollHeight,G=window.getComputedStyle(y),J=parseInt(G.borderTopWidth,10),D=parseInt(G.paddingTop,10),F=parseInt(G.borderBottomWidth,10),$=parseInt(G.paddingBottom,10),X=J+D+re+$+F,z=Math.min(N.offsetHeight*5,X),W=window.getComputedStyle(k),ue=parseInt(W.paddingTop,10),de=parseInt(W.paddingBottom,10),ge=Q.top+Q.height/2-Yi,Ne=te-ge,Ee=N.offsetHeight/2,le=N.offsetTop+Ee,Ce=J+D+le,De=X-Ce;if(Ce<=ge){const be=ce.length>0&&N===ce[ce.length-1].ref.current;m.style.bottom="0px";const Oe=y.clientHeight-k.offsetTop-k.offsetHeight,Le=Math.max(Ne,Ee+(be?de:0)+Oe+F),fe=Ce+Le;m.style.height=fe+"px"}else{const be=ce.length>0&&N===ce[0].ref.current;m.style.top="0px";const Le=Math.max(ge,J+k.offsetTop+(be?ue:0)+Ee)+De;m.style.height=Le+"px",k.scrollTop=Ce-ge+k.offsetTop}m.style.margin=`${Yi}px 0`,m.style.minHeight=z+"px",m.style.maxHeight=te+"px",r?.(),requestAnimationFrame(()=>x.current=!0)}},[E,c.trigger,c.valueNode,m,y,k,N,M,c.dir,r]);wr(()=>O(),[O]);const[U,H]=_.useState();wr(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]);const V=_.useCallback(Q=>{Q&&I.current===!0&&(O(),j?.(),I.current=!1)},[O,j]);return h.jsx(Q6,{scope:n,contentWrapper:m,shouldExpandOnScrollRef:x,onScrollButtonChange:V,children:h.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:U},children:h.jsx(ct.div,{...a,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});aM.displayName=V6;var Y6="SelectPopperPosition",bE=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Yi,...c}=t,d=SC(n);return h.jsx(IR,{...d,...c,ref:e,align:r,collisionPadding:a,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bE.displayName=Y6;var[Q6,HT]=sf(Vu,{}),EE="SelectViewport",cM=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...a}=t,c=Tl(EE,n),d=HT(EE,n),m=Mt(e,c.onViewportChange),p=_.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(AC.Slot,{scope:n,children:h.jsx(ct.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Qe(a.onScroll,y=>{const v=y.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:E}=d;if(E?.current&&b){const x=Math.abs(p.current-v.scrollTop);if(x>0){const I=window.innerHeight-Yi*2,k=parseFloat(b.style.minHeight),N=parseFloat(b.style.height),M=Math.max(k,N);if(M<I){const j=M+x,O=Math.min(I,j),U=j-O;b.style.height=O+"px",b.style.bottom==="0px"&&(v.scrollTop=U>0?U:0,b.style.justifyContent="flex-end")}}}p.current=v.scrollTop})})})]})});cM.displayName=EE;var lM="SelectGroup",[W6,X6]=sf(lM),J6=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=Du();return h.jsx(W6,{scope:n,id:a,children:h.jsx(ct.div,{role:"group","aria-labelledby":a,...r,ref:e})})});J6.displayName=lM;var uM="SelectLabel",Z6=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=X6(uM,n);return h.jsx(ct.div,{id:a.id,...r,ref:e})});Z6.displayName=uM;var Tv="SelectItem",[eK,dM]=sf(Tv),hM=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:c,...d}=t,m=Al(Tv,n),p=Tl(Tv,n),y=m.value===r,[v,b]=_.useState(c??""),[E,x]=_.useState(!1),I=Mt(e,j=>p.itemRefCallback?.(j,r,a)),k=Du(),N=_.useRef("touch"),M=()=>{a||(m.onValueChange(r),m.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(eK,{scope:n,value:r,disabled:a,textId:k,isSelected:y,onItemTextChange:_.useCallback(j=>{b(O=>O||(j?.textContent??"").trim())},[]),children:h.jsx(AC.ItemSlot,{scope:n,value:r,disabled:a,textValue:v,children:h.jsx(ct.div,{role:"option","aria-labelledby":k,"data-highlighted":E?"":void 0,"aria-selected":y&&E,"data-state":y?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...d,ref:I,onFocus:Qe(d.onFocus,()=>x(!0)),onBlur:Qe(d.onBlur,()=>x(!1)),onClick:Qe(d.onClick,()=>{N.current!=="mouse"&&M()}),onPointerUp:Qe(d.onPointerUp,()=>{N.current==="mouse"&&M()}),onPointerDown:Qe(d.onPointerDown,j=>{N.current=j.pointerType}),onPointerMove:Qe(d.onPointerMove,j=>{N.current=j.pointerType,a?p.onItemLeave?.():N.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Qe(d.onPointerLeave,j=>{j.currentTarget===document.activeElement&&p.onItemLeave?.()}),onKeyDown:Qe(d.onKeyDown,j=>{p.searchRef?.current!==""&&j.key===" "||(j6.includes(j.key)&&M(),j.key===" "&&j.preventDefault())})})})})});hM.displayName=Tv;var jm="SelectItemText",fM=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:a,...c}=t,d=Al(jm,n),m=Tl(jm,n),p=dM(jm,n),y=F6(jm,n),[v,b]=_.useState(null),E=Mt(e,M=>b(M),p.onItemTextChange,M=>m.itemTextRefCallback?.(M,p.value,p.disabled)),x=v?.textContent,I=_.useMemo(()=>h.jsx("option",{value:p.value,disabled:p.disabled,children:x},p.value),[p.disabled,p.value,x]),{onNativeOptionAdd:k,onNativeOptionRemove:N}=y;return wr(()=>(k(I),()=>N(I)),[k,N,I]),h.jsxs(h.Fragment,{children:[h.jsx(ct.span,{id:p.textId,...c,ref:E}),p.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Tg.createPortal(c.children,d.valueNode):null]})});fM.displayName=jm;var mM="SelectItemIndicator",gM=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return dM(mM,n).isSelected?h.jsx(ct.span,{"aria-hidden":!0,...r,ref:e}):null});gM.displayName=mM;var AE="SelectScrollUpButton",pM=_.forwardRef((t,e)=>{const n=Tl(AE,t.__scopeSelect),r=HT(AE,t.__scopeSelect),[a,c]=_.useState(!1),d=Mt(e,r.onScrollButtonChange);return wr(()=>{if(n.viewport&&n.isPositioned){let m=function(){const y=p.scrollTop>0;c(y)};const p=n.viewport;return m(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[n.viewport,n.isPositioned]),a?h.jsx(vM,{...t,ref:d,onAutoScroll:()=>{const{viewport:m,selectedItem:p}=n;m&&p&&(m.scrollTop=m.scrollTop-p.offsetHeight)}}):null});pM.displayName=AE;var TE="SelectScrollDownButton",yM=_.forwardRef((t,e)=>{const n=Tl(TE,t.__scopeSelect),r=HT(TE,t.__scopeSelect),[a,c]=_.useState(!1),d=Mt(e,r.onScrollButtonChange);return wr(()=>{if(n.viewport&&n.isPositioned){let m=function(){const y=p.scrollHeight-p.clientHeight,v=Math.ceil(p.scrollTop)<y;c(v)};const p=n.viewport;return m(),p.addEventListener("scroll",m),()=>p.removeEventListener("scroll",m)}},[n.viewport,n.isPositioned]),a?h.jsx(vM,{...t,ref:d,onAutoScroll:()=>{const{viewport:m,selectedItem:p}=n;m&&p&&(m.scrollTop=m.scrollTop+p.offsetHeight)}}):null});yM.displayName=TE;var vM=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=t,c=Tl("SelectScrollButton",n),d=_.useRef(null),m=TC(n),p=_.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return _.useEffect(()=>()=>p(),[p]),wr(()=>{m().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[m]),h.jsx(ct.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Qe(a.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:Qe(a.onPointerMove,()=>{c.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:Qe(a.onPointerLeave,()=>{p()})})}),tK="SelectSeparator",nK=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(ct.div,{"aria-hidden":!0,...r,ref:e})});nK.displayName=tK;var SE="SelectArrow",rK=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,a=SC(n),c=Al(SE,n),d=Tl(SE,n);return c.open&&d.position==="popper"?h.jsx(RR,{...a,...r,ref:e}):null});rK.displayName=SE;var oK="SelectBubbleInput",CM=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const a=_.useRef(null),c=Mt(r,a),d=QO(e);return _.useEffect(()=>{const m=a.current;if(!m)return;const p=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(p,"value").set;if(d!==e&&v){const b=new Event("change",{bubbles:!0});v.call(m,e),m.dispatchEvent(b)}},[d,e]),h.jsx(ct.select,{...n,style:{...WO,...n.style},ref:c,defaultValue:e})});CM.displayName=oK;function wM(t){return t===""||t===void 0}function bM(t){const e=Cr(t),n=_.useRef(""),r=_.useRef(0),a=_.useCallback(d=>{const m=n.current+d;e(m),(function p(y){n.current=y,window.clearTimeout(r.current),y!==""&&(r.current=window.setTimeout(()=>p(""),1e3))})(m)},[e]),c=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,c]}function EM(t,e,n){const a=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=iK(t,Math.max(c,0));a.length===1&&(d=d.filter(y=>y!==n));const p=d.find(y=>y.textValue.toLowerCase().startsWith(a.toLowerCase()));return p!==n?p:void 0}function iK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sK=XO,aK=ZO,cK=tM,lK=nM,uK=rM,dK=oM,hK=cM,fK=hM,mK=fM,gK=gM,pK=pM,yK=yM;function AM({...t}){return h.jsx(sK,{"data-slot":"select",...t})}function TM({...t}){return h.jsx(cK,{"data-slot":"select-value",...t})}function SM({className:t,size:e="default",children:n,...r}){return h.jsxs(aK,{"data-slot":"select-trigger","data-size":e,className:At("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,h.jsx(lK,{asChild:!0,children:h.jsx(Qs,{className:"size-4 opacity-50"})})]})}function xM({className:t,children:e,position:n="popper",...r}){return h.jsx(uK,{children:h.jsxs(dK,{"data-slot":"select-content",className:At("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(vK,{}),h.jsx(hK,{className:At("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),h.jsx(CK,{})]})})}function _M({className:t,children:e,...n}){return h.jsxs(fK,{"data-slot":"select-item",className:At("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(gK,{children:h.jsx(TT,{className:"size-4"})})}),h.jsx(mK,{children:e})]})}function vK({className:t,...e}){return h.jsx(pK,{"data-slot":"select-scroll-up-button",className:At("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(fv,{className:"size-4"})})}function CK({className:t,...e}){return h.jsx(yK,{"data-slot":"select-scroll-down-button",className:At("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Qs,{className:"size-4"})})}function Au({title:t,icon:e,children:n,className:r=""}){return h.jsxs("div",{className:`border rounded-lg p-4 bg-card ${r}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e,h.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})}function wK({agent:t,open:e,onOpenChange:n}){const r=t.source==="directory"?h.jsx(ST,{className:"h-4 w-4 text-muted-foreground"}):t.source==="in_memory"?h.jsx(lg,{className:"h-4 w-4 text-muted-foreground"}):h.jsx(xT,{className:"h-4 w-4 text-muted-foreground"}),a=t.source==="directory"?"Local":t.source==="in_memory"?"In-Memory":"Gallery";return h.jsx(zu,{open:e,onOpenChange:n,children:h.jsxs(Fu,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsx(Gu,{children:"Agent Details"}),h.jsx(qu,{onClose:()=>n(!1)})]}),h.jsxs("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx($s,{className:"h-6 w-6 text-primary"}),h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name||t.id})]}),t.description&&h.jsx("p",{className:"text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"h-px bg-border mb-6"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(t.model||t.chat_client_type)&&h.jsx(Au,{title:"Model & Client",icon:h.jsx($s,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsxs("div",{className:"space-y-1",children:[t.model&&h.jsx("div",{className:"font-mono text-foreground",children:t.model}),t.chat_client_type&&h.jsxs("div",{className:"text-xs",children:["(",t.chat_client_type,")"]})]})}),h.jsx(Au,{title:"Source",icon:r,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-foreground",children:a}),t.module_path&&h.jsx("div",{className:"font-mono text-xs break-all",children:t.module_path})]})}),h.jsx(Au,{title:"Environment",icon:t.has_env?h.jsx(fC,{className:"h-4 w-4 text-orange-500"}):h.jsx(mv,{className:"h-4 w-4 text-green-500"}),className:"md:col-span-2",children:h.jsx("div",{className:t.has_env?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:t.has_env?"Requires environment variables":"No environment variables required"})})]}),t.instructions&&h.jsx(Au,{title:"Instructions",icon:h.jsx(ju,{className:"h-4 w-4 text-muted-foreground"}),className:"mb-4",children:h.jsx("div",{className:"text-sm text-foreground leading-relaxed whitespace-pre-wrap",children:t.instructions})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(Au,{title:`Tools (${t.tools.length})`,icon:h.jsx(fE,{className:"h-4 w-4 text-muted-foreground"}),children:t.tools.length>0?h.jsx("ul",{className:"space-y-1",children:t.tools.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:["• ",c]},d))}):h.jsx("div",{className:"text-muted-foreground",children:"No tools configured"})}),t.middleware&&t.middleware.length>0&&h.jsx(Au,{title:`Middleware (${t.middleware.length})`,icon:h.jsx(fE,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsx("ul",{className:"space-y-1",children:t.middleware.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:["• ",c]},d))})}),t.context_providers&&t.context_providers.length>0&&h.jsx(Au,{title:`Context Providers (${t.context_providers.length})`,icon:h.jsx(lg,{className:"h-4 w-4 text-muted-foreground"}),className:!t.middleware||t.middleware.length===0?"md:col-start-2":"",children:h.jsx("ul",{className:"space-y-1",children:t.context_providers.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:["• ",c]},d))})})]})]})]})})}const bK="http://127.0.0.1:8080";function EK(){return localStorage.getItem("devui_backend_url")||bK}class AK{baseUrl;authProvider;constructor(e){this.baseUrl=e||EK()}setBaseUrl(e){this.baseUrl=e}getBaseUrl(){return this.baseUrl}setAuthProvider(e){this.authProvider=e}clearAuthProvider(e){(!e||this.authProvider===e)&&(this.authProvider=void 0)}async authorizedFetch(e,n={}){const r=new Headers(n.headers??{});if(!(n.body instanceof FormData)&&!r.has("Content-Type")&&n.method&&n.method.toUpperCase()!=="GET"&&r.set("Content-Type","application/json"),this.authProvider){const a=await this.authProvider();a&&r.set("Authorization",`Bearer ${a}`)}return fetch(e,{...n,headers:r})}async request(e,n={}){const r=`${this.baseUrl}${e}`,a=await this.authorizedFetch(r,n);if(!a.ok){let c=`API request failed: ${a.status} ${a.statusText}`;try{const d=await a.json();d.detail&&(c=d.detail)}catch{}throw new Error(c)}return a.json()}async getHealth(){return this.request("/health")}async getEntities(){const e=await this.request("/v1/entities"),n=[],r=[];return e.entities.forEach(a=>{if(a.type==="agent")n.push({id:a.id,name:a.name,description:a.description,type:"agent",source:a.source||"directory",tools:(a.tools||[]).map(c=>typeof c=="string"?c:JSON.stringify(c)),has_env:!1,module_path:typeof a.metadata?.module_path=="string"?a.metadata.module_path:void 0,instructions:a.instructions,model:a.model,chat_client_type:a.chat_client_type,context_providers:a.context_providers,middleware:a.middleware});else if(a.type==="workflow"){const c=a.tools?.[0],d=typeof c=="string"?c:"";r.push({id:a.id,name:a.name,description:a.description,type:"workflow",source:a.source||"directory",executors:(a.tools||[]).map(m=>typeof m=="string"?m:JSON.stringify(m)),has_env:!1,module_path:typeof a.metadata?.module_path=="string"?a.metadata.module_path:void 0,input_schema:a.input_schema||{type:"string"},input_type_name:a.input_type_name||"Input",start_executor_id:d})}}),{entities:[...n,...r],agents:n,workflows:r}}async getAgents(){const{agents:e}=await this.getEntities();return e}async getWorkflows(){const{workflows:e}=await this.getEntities();return e}async getAgentInfo(e){return this.request(`/v1/entities/${e}/info`)}async getWorkflowInfo(e){return this.request(`/v1/entities/${e}/info`)}async createConversation(e){const n=await this.request("/v1/conversations",{method:"POST",body:JSON.stringify({metadata:e})});return{id:n.id,object:"conversation",created_at:n.created_at,metadata:n.metadata}}async listConversations(e){const n=e?`/v1/conversations?agent_id=${encodeURIComponent(e)}`:"/v1/conversations",r=await this.request(n);return{data:r.data.map(a=>({id:a.id,object:"conversation",created_at:a.created_at,metadata:a.metadata})),has_more:r.has_more}}async getConversation(e){const n=await this.request(`/v1/conversations/${e}`);return{id:n.id,object:"conversation",created_at:n.created_at,metadata:n.metadata}}async deleteConversation(e){try{return await this.request(`/v1/conversations/${e}`,{method:"DELETE"}),!0}catch{return!1}}async listConversationItems(e,n){const r=new URLSearchParams;n?.limit&&r.set("limit",n.limit.toString()),n?.after&&r.set("after",n.after),n?.order&&r.set("order",n.order);const a=r.toString(),c=`/v1/conversations/${e}/items${a?`?${a}`:""}`;return this.request(c)}async*streamAgentExecutionOpenAI(e,n){const r={model:e,input:n.input,stream:!0,conversation:n.conversation_id};return yield*this.streamAgentExecutionOpenAIDirect(e,r)}async*streamAgentExecutionOpenAIDirect(e,n){const r=await this.authorizedFetch(`${this.baseUrl}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(n)});if(!r.ok){let m=`Request failed with status ${r.status}`;try{const p=await r.json();p.error&&p.error.message?m=p.error.message:p.detail&&(m=p.detail)}catch{}throw new Error(m)}const a=r.body?.getReader();if(!a)throw new Error("Response body is not readable");const c=new TextDecoder;let d="";try{for(;;){const{done:m,value:p}=await a.read();if(m)break;d+=c.decode(p,{stream:!0});const y=d.split(`
`);d=y.pop()||"";for(const v of y)if(v.startsWith("data: ")){const b=v.slice(6);if(b==="[DONE]")return;try{yield JSON.parse(b)}catch(E){console.error("Failed to parse OpenAI SSE event:",E)}}}}finally{a.releaseLock()}}async*streamWorkflowExecutionOpenAI(e,n){const r={model:e,input:typeof n.input_data=="string"?n.input_data:JSON.stringify(n.input_data||""),stream:!0,conversation:n.conversation_id},a=await this.authorizedFetch(`${this.baseUrl}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(r)});if(!a.ok){let p=`Request failed with status ${a.status}`;try{const y=await a.json();y.error&&y.error.message?p=y.error.message:y.detail&&(p=y.detail)}catch{}throw new Error(p)}const c=a.body?.getReader();if(!c)throw new Error("Response body is not readable");const d=new TextDecoder;let m="";try{for(;;){const{done:p,value:y}=await c.read();if(p)break;m+=d.decode(y,{stream:!0});const v=m.split(`
`);m=v.pop()||"";for(const b of v)if(b.startsWith("data: ")){const E=b.slice(6);if(E==="[DONE]")return;try{yield JSON.parse(E)}catch(x){console.error("Failed to parse OpenAI SSE event:",x)}}}}finally{c.releaseLock()}}async runAgent(e,n){return this.request(`/agents/${e}/run`,{method:"POST",body:JSON.stringify(n)})}async runWorkflow(e,n){return this.request(`/workflows/${e}/run`,{method:"POST",body:JSON.stringify(n)})}async addEntity(e,n){const r=await this.request("/v1/entities/add",{method:"POST",body:JSON.stringify({url:e,metadata:n})});if(!r.success||!r.entity)throw new Error("Failed to add entity");return r.entity}async removeEntity(e){if(!(await this.request(`/v1/entities/${e}`,{method:"DELETE"})).success)throw new Error("Failed to remove entity")}}const yr=new AK;function TK({item:t}){if(t.type==="message"){const e=t.role==="user",n=t.status==="incomplete",r=e?kT:n?Uu:$s;return h.jsxs("div",{className:`flex gap-3 ${e?"flex-row-reverse":""}`,children:[h.jsx("div",{className:`flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border ${e?"bg-primary text-primary-foreground":n?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800":"bg-muted"}`,children:h.jsx(r,{className:"h-4 w-4"})}),h.jsxs("div",{className:`flex flex-col space-y-1 ${e?"items-end":"items-start"} max-w-[80%]`,children:[h.jsxs("div",{className:`rounded px-3 py-2 text-sm break-all ${e?"bg-primary text-primary-foreground":n?"bg-orange-50 dark:bg-orange-950/50 text-orange-800 dark:text-orange-200 border border-orange-200 dark:border-orange-800":"bg-muted"}`,children:[n&&h.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.jsx(Uu,{className:"h-4 w-4 text-orange-500 mt-0.5 flex-shrink-0"}),h.jsx("span",{className:"font-medium text-sm",children:"Unable to process request"})]}),h.jsx("div",{className:n?"text-xs leading-relaxed break-all":"",children:h.jsx(T0,{item:t})})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground font-mono",children:[h.jsx("span",{children:new Date().toLocaleTimeString()}),!e&&t.usage&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"•"}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["↓",t.usage.input_tokens]}),h.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["↑",t.usage.output_tokens]}),h.jsxs("span",{children:["(",t.usage.total_tokens," tokens)"]})]})]})]})]})]})}return h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-muted",children:h.jsx($s,{className:"h-4 w-4"})}),h.jsx("div",{className:"flex flex-col space-y-1 items-start max-w-[80%]",children:h.jsx("div",{className:"rounded px-3 py-2 text-sm bg-muted",children:h.jsx(T0,{item:t})})})]})}function SK({selectedAgent:t,onDebugEvent:e}){const[n,r]=_.useState({items:[],isStreaming:!1}),[a,c]=_.useState(void 0),[d,m]=_.useState([]),[p,y]=_.useState(""),[v,b]=_.useState(!1),[E,x]=_.useState([]),[I,k]=_.useState(!1),[N,M]=_.useState(!1),[j,O]=_.useState(0),[U,H]=_.useState(null),[V,Q]=_.useState(!1),[Y,ee]=_.useState({total_tokens:0,message_count:0}),[se,ce]=_.useState([]),te=_.useRef(null),re=_.useRef(null),G=_.useRef(""),J=_.useRef(null),D=_.useRef(null);_.useEffect(()=>{re.current?.scrollIntoView({behavior:"smooth"})},[n.items,n.isStreaming]),_.useEffect(()=>{!n.isStreaming&&!v&&J.current?.focus()},[n.isStreaming,v]),_.useEffect(()=>{const fe=async()=>{if(t){k(!0);try{try{const{data:ze}=await yr.listConversations(t.id);if(ze.length>0){const et=ze[0];m(ze),c(et);try{const{data:lt}=await yr.listConversationItems(et.id);r({items:lt,isStreaming:!1})}catch{r({items:[],isStreaming:!1})}localStorage.setItem(`devui_convs_${t.id}`,JSON.stringify(ze));return}}catch{}const Me=`devui_convs_${t.id}`,He=localStorage.getItem(Me);if(He)try{const ze=JSON.parse(He);if(ze.length>0){m(ze),c(ze[0]),r({items:[],isStreaming:!1});return}}catch{localStorage.removeItem(Me)}const Ke=await yr.createConversation({agent_id:t.id});c(Ke),m([Ke]),r({items:[],isStreaming:!1}),localStorage.setItem(Me,JSON.stringify([Ke]))}catch{m([]),r({items:[],isStreaming:!1})}finally{k(!1)}}};r({items:[],isStreaming:!1}),c(void 0),G.current="",fe()},[t]);const F=async fe=>{const Me=[];for(const He of fe){const Ke=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ze=Ne(He);let et;ze==="image"&&(et=await Ee(He)),Me.push({id:Ke,file:He,preview:et,type:ze})}x(He=>[...He,...Me])},$=fe=>{x(Me=>Me.filter(He=>He.id!==fe))},X=fe=>{fe.preventDefault(),fe.stopPropagation(),O(Me=>Me+1),fe.dataTransfer.items&&fe.dataTransfer.items.length>0&&M(!0)},z=fe=>{fe.preventDefault(),fe.stopPropagation();const Me=j-1;O(Me),Me===0&&M(!1)},W=fe=>{fe.preventDefault(),fe.stopPropagation()},ue=async fe=>{if(fe.preventDefault(),fe.stopPropagation(),M(!1),O(0),v||n.isStreaming)return;const Me=Array.from(fe.dataTransfer.files);Me.length>0&&await F(Me)},de=async fe=>{const Me=Array.from(fe.clipboardData.items),He=[];let Ke=!1;const ze=8e3;for(const et of Me)if(et.type.startsWith("image/")){fe.preventDefault();const lt=et.getAsFile();if(lt){const Tt=Date.now();He.push(new File([lt],`screenshot-${Tt}.png`,{type:lt.type}))}}else et.type==="text/plain"&&!Ke&&(Ke=!0,fe.preventDefault(),await new Promise(lt=>{et.getAsString(Tt=>{const gt=(Tt.match(/\n/g)||[]).length;if(Tt.length>ze||gt>50||/^\s*[{[][\s\S]*[}\]]\s*$/.test(Tt)||/^<\?xml|^<html|^<!DOCTYPE/i.test(Tt)){const yt=ge(Tt),Nn=Date.now(),tn=new Blob([Tt],{type:"text/plain"});He.push(new File([tn],`pasted-text-${Nn}${yt}`,{type:"text/plain"}))}else{const yt=J.current;if(yt){const Nn=yt.selectionStart,tn=yt.selectionEnd,Ht=yt.value,Fn=Ht.slice(0,Nn)+Tt+Ht.slice(tn);y(Fn),setTimeout(()=>{yt.selectionStart=yt.selectionEnd=Nn+Tt.length,yt.focus()},0)}}lt()})}));if(He.length>0){await F(He);const et=He.length===1?He[0].name.includes("screenshot")?"Screenshot added as attachment":"Large text converted to file":`${He.length} files added`;H(et),setTimeout(()=>H(null),3e3)}},ge=fe=>{const Me=fe.trim(),He=Me.split(`
`);if(/^{[\s\S]*}$|^\[[\s\S]*\]$/.test(Me))return".json";if(/^<\?xml|^<html|^<!DOCTYPE/i.test(Me))return".html";if(/^```/.test(Me))return".md";if(/\t/.test(fe)&&He.length>1)return".tsv";if(He.length>2){const Ke=He.filter(et=>et.includes(",")),ze=He.filter(et=>et.includes(";"));if(Ke.length>He.length*.5&&Ke.reduce((lt,Tt)=>lt+(Tt.match(/,/g)||[]).length,0)/Ke.length>=2||ze.length>He.length*.5&&ze.reduce((lt,Tt)=>lt+(Tt.match(/;/g)||[]).length,0)/ze.length>=2)return".csv"}return".txt"},Ne=fe=>fe.type.startsWith("image/")?"image":fe.type==="application/pdf"?"pdf":fe.type.startsWith("audio/")?"audio":"other",Ee=fe=>new Promise((Me,He)=>{const Ke=new FileReader;Ke.onload=()=>Me(Ke.result),Ke.onerror=He,Ke.readAsDataURL(fe)}),le=_.useCallback(async()=>{if(t)try{const fe=await yr.createConversation({agent_id:t.id});c(fe),m(Ke=>[fe,...Ke]),r({items:[],isStreaming:!1}),ee({total_tokens:0,message_count:0}),G.current="";const Me=`devui_convs_${t.id}`,He=[fe,...d];localStorage.setItem(Me,JSON.stringify(He))}catch{}},[t,d]),Ce=_.useCallback(async(fe,Me)=>{if(Me&&(Me.preventDefault(),Me.stopPropagation()),!!confirm("Delete this conversation? This cannot be undone."))try{if(await yr.deleteConversation(fe)){const Ke=d.filter(ze=>ze.id!==fe);if(m(Ke),t){const ze=`devui_convs_${t.id}`;localStorage.setItem(ze,JSON.stringify(Ke))}if(a?.id===fe)if(Ke.length>0){const ze=Ke[0];c(ze),r({items:[],isStreaming:!1})}else c(void 0),r({items:[],isStreaming:!1}),ee({total_tokens:0,message_count:0}),G.current="";e("clear")}}catch{alert("Failed to delete conversation. Please try again.")}},[d,a,t,e]),De=_.useCallback(async fe=>{const Me=d.find(He=>He.id===fe);if(Me){c(Me),e("clear");try{const Ke=(await yr.listConversationItems(fe)).data;r({items:Ke,isStreaming:!1}),ee({total_tokens:0,message_count:Ke.length})}catch{r({items:[],isStreaming:!1}),ee({total_tokens:0,message_count:0})}G.current=""}},[d,e]),we=async(fe,Me)=>{const He=se.find(et=>et.request_id===fe);if(!He)return;const ze={input:[{type:"message",role:"user",content:[{type:"function_approval_response",request_id:fe,approved:Me,function_call:He.function_call}]}],conversation_id:a?.id};return ce(et=>et.filter(lt=>lt.request_id!==fe)),ze},be=_.useCallback(async fe=>{if(!t)return;const Me=[];for(const ze of fe.input)if(ze.type==="message"&&Array.isArray(ze.content)){for(const et of ze.content)if(et.type==="input_text")Me.push({type:"text",text:et.text});else if(et.type==="input_image")Me.push({type:"input_image",image_url:et.image_url||"",detail:"auto"});else if(et.type==="input_file"){const lt=et;Me.push({type:"input_file",file_data:lt.file_data,filename:lt.filename})}}const He={id:`user-${Date.now()}`,type:"message",role:"user",content:Me,status:"completed"};r(ze=>({...ze,items:[...ze.items,He],isStreaming:!0}));const Ke={id:`assistant-${Date.now()}`,type:"message",role:"assistant",content:[],status:"in_progress"};r(ze=>({...ze,items:[...ze.items,Ke]}));try{let ze=a;if(!ze)try{ze=await yr.createConversation({agent_id:t.id}),c(ze),m(gt=>[ze,...gt])}catch{}const et={input:fe.input,conversation_id:ze?.id};G.current="",e("clear");const lt=yr.streamAgentExecutionOpenAI(t.id,et);for await(const gt of lt){if(e(gt),gt.type==="response.completed"){const yt=gt.response?.usage;yt&&(D.current={input_tokens:yt.input_tokens,output_tokens:yt.output_tokens,total_tokens:yt.total_tokens});continue}if(gt.type==="response.function_approval.requested"){const Pt=gt;ce(yt=>[...yt,{request_id:Pt.request_id,function_call:Pt.function_call}]);continue}if(gt.type==="response.function_approval.responded"){const Pt=gt;ce(yt=>yt.filter(Nn=>Nn.request_id!==Pt.request_id));continue}if(gt.type==="error"){const yt=gt.message||"An error occurred";r(Nn=>({...Nn,isStreaming:!1,items:Nn.items.map(tn=>tn.id===Ke.id&&tn.type==="message"?{...tn,content:[{type:"text",text:yt}],status:"incomplete"}:tn)}));return}gt.type==="response.output_text.delta"&&"delta"in gt&&gt.delta&&(G.current+=gt.delta,r(Pt=>({...Pt,items:Pt.items.map(yt=>yt.id===Ke.id&&yt.type==="message"?{...yt,content:[{type:"text",text:G.current}],status:"in_progress"}:yt)})))}const Tt=D.current;r(gt=>({...gt,isStreaming:!1,items:gt.items.map(Pt=>Pt.id===Ke.id&&Pt.type==="message"?{...Pt,status:"completed",usage:Tt||void 0}:Pt)})),Tt&&ee(gt=>({total_tokens:gt.total_tokens+Tt.total_tokens,message_count:gt.message_count+1})),D.current=null}catch(ze){r(et=>({...et,isStreaming:!1,items:et.items.map(lt=>lt.id===Ke.id&&lt.type==="message"?{...lt,content:[{type:"text",text:`Error: ${ze instanceof Error?ze.message:"Failed to get response"}`}],status:"incomplete"}:lt)}))}},[t,a,e]),Oe=async fe=>{if(fe.preventDefault(),!p.trim()&&E.length===0||v||!t)return;b(!0);const Me=p.trim();y("");try{if(E.length>0||Me){const He=[];Me&&He.push({text:Me,type:"input_text"});for(const ze of E){const et=await Ee(ze.file);if(ze.file.type.startsWith("image/"))He.push({detail:"auto",type:"input_image",image_url:et});else if(ze.file.type==="text/plain"&&(ze.file.name.includes("pasted-text-")||ze.file.name.endsWith(".txt")||ze.file.name.endsWith(".csv")||ze.file.name.endsWith(".json")||ze.file.name.endsWith(".html")||ze.file.name.endsWith(".md")||ze.file.name.endsWith(".tsv"))){const lt=await ze.file.text();He.push({text:lt,type:"input_text"})}else{const lt=et.split(",")[1];He.push({type:"input_file",file_data:lt,file_url:et,filename:ze.file.name})}}await be({input:[{type:"message",role:"user",content:He}],conversation_id:a?.id})}else await be({input:[{type:"message",role:"user",content:[{text:Me,type:"input_text"}]}],conversation_id:a?.id});x([])}finally{b(!1)}},Le=t&&!v&&!n.isStreaming&&(p.trim()||E.length>0);return h.jsxs("div",{className:"flex h-[calc(100vh-3.5rem)] flex-col",children:[h.jsxs("div",{className:"border-b pb-2  p-4 flex-shrink-0",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx("h2",{className:"font-semibold text-sm truncate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx($s,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("span",{className:"truncate",children:["Chat with ",t.name||t.id]})]})}),h.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>Q(!0),className:"h-6 w-6 p-0 flex-shrink-0",title:"View agent details",children:h.jsx(gv,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0",children:[h.jsxs(AM,{value:a?.id||"",onValueChange:De,disabled:I||v,children:[h.jsx(SM,{className:"w-full sm:w-64",children:h.jsx(TM,{placeholder:I?"Loading...":d.length===0?"No conversations":a?`Conversation ${a.id.slice(-8)}`:"Select conversation",children:a&&h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("span",{children:["Conversation ",a.id.slice(-8)]}),Y.total_tokens>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-muted-foreground",children:"•"}),h.jsxs("span",{className:"text-muted-foreground",children:[Y.total_tokens>=1e3?`${(Y.total_tokens/1e3).toFixed(1)}k`:Y.total_tokens," ","tokens"]})]})]})})}),h.jsx(xM,{children:d.map(fe=>h.jsx(_M,{value:fe.id,children:h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs("span",{children:["Conversation ",fe.id.slice(-8)]}),fe.created_at&&h.jsx("span",{className:"text-xs text-muted-foreground ml-3",children:new Date(fe.created_at*1e3).toLocaleDateString()})]})},fe.id))})]}),h.jsx(wt,{variant:"outline",size:"icon",onClick:()=>a&&Ce(a.id),disabled:!a||v,title:a?`Delete Conversation ${a.id.slice(-8)}`:"No conversation selected",children:h.jsx(eO,{className:"h-4 w-4"})}),h.jsxs(wt,{variant:"outline",size:"lg",onClick:le,disabled:!t||v,className:"whitespace-nowrap ",children:[h.jsx(pv,{className:"h-4 w-4 mr-2"}),h.jsx("span",{className:"hidden md:inline",children:" New Conversation"})]})]})]}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),h.jsx(Rg,{className:"flex-1 p-4 h-0",ref:te,children:h.jsxs("div",{className:"space-y-4",children:[n.items.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:[h.jsxs("div",{className:"text-muted-foreground text-sm",children:["Start a conversation with"," ",t.name||t.id]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Type a message below to begin"})]}):n.items.map(fe=>h.jsx(TK,{item:fe},fe.id)),h.jsx("div",{ref:re})]})}),se.length>0&&h.jsx("div",{className:"border-t bg-amber-50 dark:bg-amber-950/20 p-4 flex-shrink-0",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Uu,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 mt-0.5 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-sm mb-2",children:"Approval Required"}),h.jsx("div",{className:"space-y-2",children:se.map(fe=>h.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-3 border border-amber-200 dark:border-amber-900",children:[h.jsxs("div",{className:"font-mono text-xs mb-3 break-all",children:[h.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:fe.function_call.name}),h.jsx("span",{className:"text-gray-500",children:"("}),h.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:JSON.stringify(fe.function_call.arguments)}),h.jsx("span",{className:"text-gray-500",children:")"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(wt,{size:"sm",onClick:async()=>{const Me=await we(fe.request_id,!0);Me&&await be(Me)},variant:"default",className:"flex-1 sm:flex-none",children:[h.jsx(TT,{className:"h-4 w-4 mr-1"}),"Approve"]}),h.jsxs(wt,{size:"sm",onClick:async()=>{const Me=await we(fe.request_id,!1);Me&&await be(Me)},variant:"outline",className:"flex-1 sm:flex-none",children:[h.jsx(jh,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]},fe.request_id))})]})]})}),h.jsx("div",{className:"border-t flex-shrink-0",children:h.jsxs("div",{className:`p-4 relative transition-all duration-300 ease-in-out ${N?"bg-blue-50 dark:bg-blue-950/20":""}`,onDragEnter:X,onDragLeave:z,onDragOver:W,onDrop:ue,children:[N&&h.jsx("div",{className:"absolute inset-2 border-2 border-dashed border-blue-400 dark:border-blue-500 rounded-lg bg-blue-50/80 dark:bg-blue-950/40 backdrop-blur-sm flex items-center justify-center transition-all duration-200 ease-in-out z-10",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-1",children:"Drop files here"}),h.jsx("div",{className:"text-blue-500 dark:text-blue-500 text-xs",children:"Images, PDFs, and other files"})]})}),E.length>0&&h.jsx("div",{className:"mb-3",children:h.jsx(_6,{attachments:E,onRemoveAttachment:$})}),U&&h.jsxs("div",{className:`absolute bottom-24 left-1/2 -translate-x-1/2 z-20
                          bg-blue-500 text-white px-4 py-2 rounded-full text-sm
                          animate-in slide-in-from-bottom-2 fade-in duration-200
                          flex items-center gap-2 shadow-lg`,children:[U.includes("screenshot")?h.jsx(vF,{className:"h-3 w-3"}):h.jsx(ju,{className:"h-3 w-3"}),U]}),h.jsxs("form",{onSubmit:Oe,className:"flex gap-2 items-end",children:[h.jsx(My,{ref:J,value:p,onChange:fe=>y(fe.target.value),onPaste:de,onKeyDown:fe=>{fe.key==="Enter"&&!fe.shiftKey&&(fe.preventDefault(),Oe(fe))},placeholder:`Message ${t.name||t.id}... (Shift+Enter for new line)`,disabled:v||n.isStreaming,className:"flex-1 min-h-[40px] max-h-[200px] resize-none",style:{fieldSizing:"content"}}),h.jsx(T6,{onFilesSelected:F,disabled:v||n.isStreaming}),h.jsx(wt,{type:"submit",size:"icon",disabled:!Le,className:"shrink-0 h-10",children:v?h.jsx(CC,{size:"sm"}):h.jsx(SF,{className:"h-4 w-4"})})]})]})}),h.jsx(wK,{agent:t,open:V,onOpenChange:Q})]})}function Ih({message:t="Loading...",description:e,size:n="md",className:r,fullPage:a=!1}){const c=h.jsxs("div",{className:At("flex flex-col items-center justify-center gap-3",a?"min-h-[50vh]":"py-8",r),children:[h.jsx(CC,{size:n,className:"text-muted-foreground"}),h.jsxs("div",{className:"text-center space-y-1",children:[h.jsx("p",{className:At("font-medium text-muted-foreground",n==="sm"&&"text-sm",n==="lg"&&"text-lg"),children:t}),e&&h.jsx("p",{className:"text-sm text-muted-foreground/80",children:e})]})]});return a?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:c}):c}var xC="Checkbox",[xK,lY]=Xa(xC),[_K,BT]=xK(xC);function kK(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:a,disabled:c,form:d,name:m,onCheckedChange:p,required:y,value:v="on",internal_do_not_use_render:b}=t,[E,x]=Dh({prop:n,defaultProp:a??!1,onChange:p,caller:xC}),[I,k]=_.useState(null),[N,M]=_.useState(null),j=_.useRef(!1),O=I?!!d||!!I.closest("form"):!0,U={checked:E,disabled:c,setChecked:x,control:I,setControl:k,name:m,form:d,value:v,hasConsumerStoppedPropagationRef:j,required:y,defaultChecked:vl(a)?!1:a,isFormControl:O,bubbleInput:N,setBubbleInput:M};return h.jsx(_K,{scope:e,...U,children:IK(b)?b(U):r})}var kM="CheckboxTrigger",IM=_.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},a)=>{const{control:c,value:d,disabled:m,checked:p,required:y,setControl:v,setChecked:b,hasConsumerStoppedPropagationRef:E,isFormControl:x,bubbleInput:I}=BT(kM,t),k=Mt(a,v),N=_.useRef(p);return _.useEffect(()=>{const M=c?.form;if(M){const j=()=>b(N.current);return M.addEventListener("reset",j),()=>M.removeEventListener("reset",j)}},[c,b]),h.jsx(ct.button,{type:"button",role:"checkbox","aria-checked":vl(p)?"mixed":p,"aria-required":y,"data-state":DM(p),"data-disabled":m?"":void 0,disabled:m,value:d,...r,ref:k,onKeyDown:Qe(e,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:Qe(n,M=>{b(j=>vl(j)?!0:!j),I&&x&&(E.current=M.isPropagationStopped(),E.current||M.stopPropagation())})})});IM.displayName=kM;var RM=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:c,required:d,disabled:m,value:p,onCheckedChange:y,form:v,...b}=t;return h.jsx(kK,{__scopeCheckbox:n,checked:a,defaultChecked:c,disabled:m,required:d,onCheckedChange:y,name:r,form:v,value:p,internal_do_not_use_render:({isFormControl:E})=>h.jsxs(h.Fragment,{children:[h.jsx(IM,{...b,ref:e,__scopeCheckbox:n}),E&&h.jsx(PM,{__scopeCheckbox:n})]})})});RM.displayName=xC;var NM="CheckboxIndicator",OM=_.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...a}=t,c=BT(NM,n);return h.jsx(ss,{present:r||vl(c.checked)||c.checked===!0,children:h.jsx(ct.span,{"data-state":DM(c.checked),"data-disabled":c.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});OM.displayName=NM;var MM="CheckboxBubbleInput",PM=_.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:c,defaultChecked:d,required:m,disabled:p,name:y,value:v,form:b,bubbleInput:E,setBubbleInput:x}=BT(MM,t),I=Mt(n,x),k=QO(c),N=yR(r);_.useEffect(()=>{const j=E;if(!j)return;const O=window.HTMLInputElement.prototype,H=Object.getOwnPropertyDescriptor(O,"checked").set,V=!a.current;if(k!==c&&H){const Q=new Event("click",{bubbles:V});j.indeterminate=vl(c),H.call(j,vl(c)?!1:c),j.dispatchEvent(Q)}},[E,k,c,a]);const M=_.useRef(vl(c)?!1:c);return h.jsx(ct.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??M.current,required:m,disabled:p,name:y,value:v,form:b,...e,tabIndex:-1,ref:I,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});PM.displayName=MM;function IK(t){return typeof t=="function"}function vl(t){return t==="indeterminate"}function DM(t){return vl(t)?"indeterminate":t?"checked":"unchecked"}function Hm({className:t,...e}){return h.jsx(RM,{"data-slot":"checkbox",className:At("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(OM,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:h.jsx(TT,{className:"size-3.5"})})})}function nl({name:t,schema:e,value:n,onChange:r,isRequired:a=!1}){const{type:c,description:d,enum:m,default:p}=e,y=["text","message","content","query","prompt"].includes(t.toLowerCase()),v=e.format==="textarea"||y||d&&d.length>150,b=e.format==="textarea"||y||d&&d.length>80||c==="array",E=(()=>{switch(c){case"string":return m?h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsxs(AM,{value:typeof n=="string"&&n?n:typeof p=="string"?p:m[0],onValueChange:I=>r(I),children:[h.jsx(SM,{children:h.jsx(TM,{placeholder:`Select ${t}`})}),h.jsx(xM,{children:m.map(I=>h.jsx(_M,{value:I,children:I},I))})]}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]}):e.format==="textarea"||y||d&&d.length>100?h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(My,{id:t,value:typeof n=="string"?n:"",onChange:I=>r(I.target.value),placeholder:typeof p=="string"?p:`Enter ${t}`,rows:y?4:2}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(wE,{id:t,type:"text",value:typeof n=="string"?n:"",onChange:I=>r(I.target.value),placeholder:typeof p=="string"?p:`Enter ${t}`}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"number":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(wE,{id:t,type:"number",value:typeof n=="number"?n:"",onChange:I=>{const k=parseFloat(I.target.value);r(isNaN(k)?"":k)},placeholder:typeof p=="number"?p.toString():`Enter ${t}`}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"boolean":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Hm,{id:t,checked:!!n,onCheckedChange:I=>r(I)}),h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]})]}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"array":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(My,{id:t,value:Array.isArray(n)?n.join(", "):typeof n=="string"?n:"",onChange:I=>{const k=I.target.value.split(",").map(N=>N.trim()).filter(N=>N.length>0);r(k)},placeholder:"Enter items separated by commas",rows:2}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"object":default:return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(al,{htmlFor:t,children:[t,a&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(My,{id:t,value:typeof n=="object"&&n!==null?JSON.stringify(n,null,2):typeof n=="string"?n:"",onChange:I=>{try{const k=JSON.parse(I.target.value);r(k)}catch{r(I.target.value)}},placeholder:'{"key": "value"}',rows:3}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]})}})(),x=()=>v?"md:col-span-2 lg:col-span-3 xl:col-span-4":b?"xl:col-span-2":"";return h.jsx("div",{className:x(),children:E})}function RK({inputSchema:t,inputTypeName:e,onSubmit:n,isSubmitting:r=!1,className:a}){const[c,d]=_.useState(!1),[m,p]=_.useState(!1),y=a?.includes("embedded"),[v,b]=_.useState({}),[E,x]=_.useState(!1),I=t.properties||{},k=Object.keys(I),N=t.required||[],M=t.type==="string"&&!t.enum,j=k.filter(D=>!N.includes(D)),O=N.includes("role")&&j.some(D=>["text","message","content"].includes(D))&&I.role?.type==="string",U=k.filter(D=>N.includes(D)&&!(O&&D==="role")),H=j,V=O?[...H].sort((D,F)=>{const $=X=>["text","message","content"].includes(X)?1:0;return $(F)-$(D)}):H,Y=Math.max(0,(O?1:6)-U.length),ee=V.slice(0,Y),se=V.slice(Y),ce=se.length>0,te=U.length>0,re=M?v.value!==void 0&&v.value!=="":N.length>0?N.every(D=>O&&D==="role"&&v.role==="user"?!0:v[D]!==void 0&&v[D]!==""):Object.keys(v).length>0;_.useEffect(()=>{if(t.type==="string")b({value:t.default||""});else if(t.type==="object"&&t.properties){const D={};Object.entries(t.properties).forEach(([F,$])=>{$.default!==void 0?D[F]=$.default:$.enum&&$.enum.length>0&&(D[F]=$.enum[0])}),O&&!D.role&&(D.role="user"),b(D)}},[t,O]);const G=D=>{if(D.preventDefault(),x(!0),t.type==="string")n({input:v.value||""});else if(t.type==="object"){const F=t.properties||{},$=Object.keys(F);if($.length===1){const X=$[0];n({[X]:v[X]||""})}else{const X={};Object.keys(v).forEach(z=>{const W=v[z];(N.includes(z)||W!==void 0&&W!==""&&W!==null)&&(X[z]=W)}),n(X)}}else n(v);y||d(!1),x(!1)},J=(D,F)=>{b($=>({...$,[D]:F}))};return y?h.jsxs("form",{onSubmit:G,className:a,children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[M&&h.jsx(nl,{name:"Input",schema:t,value:v.value,onChange:D=>J("value",D),isRequired:!1}),!M&&h.jsxs(h.Fragment,{children:[U.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!0},D)),te&&H.length>0&&h.jsx("div",{className:"sm:col-span-2 border-t border-border my-2"}),ee.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!1},D)),ce&&h.jsx("div",{className:"sm:col-span-2",children:h.jsx(wt,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(!m),className:"w-full justify-center gap-2",children:m?h.jsxs(h.Fragment,{children:[h.jsx(fv,{className:"h-4 w-4"}),"Hide ",se.length," optional field",se.length!==1?"s":""]}):h.jsxs(h.Fragment,{children:[h.jsx(Qs,{className:"h-4 w-4"}),"Show ",se.length," optional field",se.length!==1?"s":""]})})}),m&&se.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!1},D))]})]}),h.jsx("div",{className:"flex gap-2 mt-4 justify-end",children:h.jsxs(wt,{type:"submit",disabled:E||!re,size:"default",children:[h.jsx(Cb,{className:"h-4 w-4"}),E?"Running...":"Run Workflow"]})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:At("flex flex-col",a),children:[h.jsxs("div",{className:"border-b border-border px-4 py-3 bg-muted",children:[h.jsx(YO,{className:"text-sm mb-3",children:"Run Workflow"}),h.jsxs(wt,{onClick:()=>d(!0),disabled:r,className:"w-full",size:"default",children:[h.jsx(Cb,{className:"h-4 w-4 mr-2"}),r?"Running...":"Run Workflow"]})]}),h.jsxs("div",{className:"px-4 py-3",children:[h.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.jsx("strong",{children:"Input Type:"})," ",h.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:e}),t.type==="object"&&t.properties&&h.jsxs("span",{className:"ml-2",children:["(",Object.keys(t.properties).length," field",Object.keys(t.properties).length!==1?"s":"",")"]})]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Click "Run Workflow" to configure inputs and execute'})]})]}),h.jsx(zu,{open:c,onOpenChange:d,children:h.jsxs(Fu,{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{children:[h.jsx(Gu,{children:"Run Workflow"}),h.jsx(qu,{onClose:()=>d(!1)})]}),h.jsx("div",{className:"px-8 py-4 border-b flex-shrink-0",children:h.jsx("div",{className:"text-sm text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"font-medium",children:"Input Type:"}),h.jsx("code",{className:"bg-muted px-3 py-1 text-xs font-mono",children:e}),t.type==="object"&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:[k.length," field",k.length!==1?"s":""]})]})})}),h.jsx("div",{className:"px-8 py-6 overflow-y-auto flex-1 min-h-0",children:h.jsx("form",{id:"workflow-modal-form",onSubmit:G,children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 max-w-none",children:[M&&h.jsxs("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:[h.jsx(nl,{name:"Input",schema:t,value:v.value,onChange:D=>J("value",D),isRequired:!1}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:t.description})]}),!M&&h.jsxs(h.Fragment,{children:[U.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!0},D)),te&&H.length>0&&h.jsx("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:h.jsx("div",{className:"border-t border-border"})}),ee.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!1},D)),ce&&h.jsx("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:h.jsx(wt,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(!m),className:"w-full justify-center gap-2",children:m?h.jsxs(h.Fragment,{children:[h.jsx(fv,{className:"h-4 w-4"}),"Hide ",se.length," optional field",se.length!==1?"s":""]}):h.jsxs(h.Fragment,{children:[h.jsx(Qs,{className:"h-4 w-4"}),"Show ",se.length," optional field",se.length!==1?"s":""]})})}),m&&se.map(D=>h.jsx(nl,{name:D,schema:I[D],value:v[D],onChange:F=>J(D,F),isRequired:!1},D))]})]})})}),h.jsx("div",{className:"px-8 py-4 border-t flex-shrink-0",children:h.jsxs(m6,{children:[h.jsx(wt,{variant:"outline",onClick:()=>d(!1),disabled:E,children:"Cancel"}),h.jsxs(wt,{type:"submit",form:"workflow-modal-form",disabled:E||!re,children:[h.jsx(Cb,{className:"h-4 w-4 mr-2"}),E?"Running...":"Run Workflow"]})]})})]})})]})}function zn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=zn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var NK={value:()=>{}};function _C(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Py(n)}function Py(t){this._=t}function OK(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Py.prototype=_C.prototype={constructor:Py,on:function(t,e){var n=this._,r=OK(t+"",n),a,c=-1,d=r.length;if(arguments.length<2){for(;++c<d;)if((a=(t=r[c]).type)&&(a=MK(n[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++c<d;)if(a=(t=r[c]).type)n[a]=S0(n[a],t.name,e);else if(e==null)for(a in n)n[a]=S0(n[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Py(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,c;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],r=0,a=c.length;r<a;++r)c[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,c=r.length;a<c;++a)r[a].value.apply(e,n)}};function MK(t,e){for(var n=0,r=t.length,a;n<r;++n)if((a=t[n]).name===e)return a.value}function S0(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=NK,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var xE="http://www.w3.org/1999/xhtml";const x0={svg:"http://www.w3.org/2000/svg",xhtml:xE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kC(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),x0.hasOwnProperty(e)?{space:x0[e],local:t}:t}function PK(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xE&&e.documentElement.namespaceURI===xE?e.createElement(t):e.createElementNS(n,t)}}function DK(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function LM(t){var e=kC(t);return(e.local?DK:PK)(e)}function LK(){}function zT(t){return t==null?LK:function(){return this.querySelector(t)}}function UK(t){typeof t!="function"&&(t=zT(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var c=e[a],d=c.length,m=r[a]=new Array(d),p,y,v=0;v<d;++v)(p=c[v])&&(y=t.call(p,p.__data__,v,c))&&("__data__"in p&&(y.__data__=p.__data__),m[v]=y);return new Ho(r,this._parents)}function jK(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function HK(){return[]}function UM(t){return t==null?HK:function(){return this.querySelectorAll(t)}}function BK(t){return function(){return jK(t.apply(this,arguments))}}function zK(t){typeof t=="function"?t=BK(t):t=UM(t);for(var e=this._groups,n=e.length,r=[],a=[],c=0;c<n;++c)for(var d=e[c],m=d.length,p,y=0;y<m;++y)(p=d[y])&&(r.push(t.call(p,p.__data__,y,d)),a.push(p));return new Ho(r,a)}function jM(t){return function(){return this.matches(t)}}function HM(t){return function(e){return e.matches(t)}}var FK=Array.prototype.find;function KK(t){return function(){return FK.call(this.children,t)}}function GK(){return this.firstElementChild}function qK(t){return this.select(t==null?GK:KK(typeof t=="function"?t:HM(t)))}var $K=Array.prototype.filter;function VK(){return Array.from(this.children)}function YK(t){return function(){return $K.call(this.children,t)}}function QK(t){return this.selectAll(t==null?VK:YK(typeof t=="function"?t:HM(t)))}function WK(t){typeof t!="function"&&(t=jM(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var c=e[a],d=c.length,m=r[a]=[],p,y=0;y<d;++y)(p=c[y])&&t.call(p,p.__data__,y,c)&&m.push(p);return new Ho(r,this._parents)}function BM(t){return new Array(t.length)}function XK(){return new Ho(this._enter||this._groups.map(BM),this._parents)}function Sv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Sv.prototype={constructor:Sv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function JK(t){return function(){return t}}function ZK(t,e,n,r,a,c){for(var d=0,m,p=e.length,y=c.length;d<y;++d)(m=e[d])?(m.__data__=c[d],r[d]=m):n[d]=new Sv(t,c[d]);for(;d<p;++d)(m=e[d])&&(a[d]=m)}function eG(t,e,n,r,a,c,d){var m,p,y=new Map,v=e.length,b=c.length,E=new Array(v),x;for(m=0;m<v;++m)(p=e[m])&&(E[m]=x=d.call(p,p.__data__,m,e)+"",y.has(x)?a[m]=p:y.set(x,p));for(m=0;m<b;++m)x=d.call(t,c[m],m,c)+"",(p=y.get(x))?(r[m]=p,p.__data__=c[m],y.delete(x)):n[m]=new Sv(t,c[m]);for(m=0;m<v;++m)(p=e[m])&&y.get(E[m])===p&&(a[m]=p)}function tG(t){return t.__data__}function nG(t,e){if(!arguments.length)return Array.from(this,tG);var n=e?eG:ZK,r=this._parents,a=this._groups;typeof t!="function"&&(t=JK(t));for(var c=a.length,d=new Array(c),m=new Array(c),p=new Array(c),y=0;y<c;++y){var v=r[y],b=a[y],E=b.length,x=rG(t.call(v,v&&v.__data__,y,r)),I=x.length,k=m[y]=new Array(I),N=d[y]=new Array(I),M=p[y]=new Array(E);n(v,b,k,N,M,x,e);for(var j=0,O=0,U,H;j<I;++j)if(U=k[j]){for(j>=O&&(O=j+1);!(H=N[O])&&++O<I;);U._next=H||null}}return d=new Ho(d,r),d._enter=m,d._exit=p,d}function rG(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oG(){return new Ho(this._exit||this._groups.map(BM),this._parents)}function iG(t,e,n){var r=this.enter(),a=this,c=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),n==null?c.remove():n(c),r&&a?r.merge(a).order():a}function sG(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,c=r.length,d=Math.min(a,c),m=new Array(a),p=0;p<d;++p)for(var y=n[p],v=r[p],b=y.length,E=m[p]=new Array(b),x,I=0;I<b;++I)(x=y[I]||v[I])&&(E[I]=x);for(;p<a;++p)m[p]=n[p];return new Ho(m,this._parents)}function aG(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],a=r.length-1,c=r[a],d;--a>=0;)(d=r[a])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function cG(t){t||(t=lG);function e(b,E){return b&&E?t(b.__data__,E.__data__):!b-!E}for(var n=this._groups,r=n.length,a=new Array(r),c=0;c<r;++c){for(var d=n[c],m=d.length,p=a[c]=new Array(m),y,v=0;v<m;++v)(y=d[v])&&(p[v]=y);p.sort(e)}return new Ho(a,this._parents).order()}function lG(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function uG(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function dG(){return Array.from(this)}function hG(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,c=r.length;a<c;++a){var d=r[a];if(d)return d}return null}function fG(){let t=0;for(const e of this)++t;return t}function mG(){return!this.node()}function gG(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a=e[n],c=0,d=a.length,m;c<d;++c)(m=a[c])&&t.call(m,m.__data__,c,a);return this}function pG(t){return function(){this.removeAttribute(t)}}function yG(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vG(t,e){return function(){this.setAttribute(t,e)}}function CG(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wG(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function bG(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function EG(t,e){var n=kC(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?yG:pG:typeof e=="function"?n.local?bG:wG:n.local?CG:vG)(n,e))}function zM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function AG(t){return function(){this.style.removeProperty(t)}}function TG(t,e,n){return function(){this.style.setProperty(t,e,n)}}function SG(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xG(t,e,n){return arguments.length>1?this.each((e==null?AG:typeof e=="function"?SG:TG)(t,e,n??"")):Fh(this.node(),t)}function Fh(t,e){return t.style.getPropertyValue(e)||zM(t).getComputedStyle(t,null).getPropertyValue(e)}function _G(t){return function(){delete this[t]}}function kG(t,e){return function(){this[t]=e}}function IG(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function RG(t,e){return arguments.length>1?this.each((e==null?_G:typeof e=="function"?IG:kG)(t,e)):this.node()[t]}function FM(t){return t.trim().split(/^|\s+/)}function FT(t){return t.classList||new KM(t)}function KM(t){this._node=t,this._names=FM(t.getAttribute("class")||"")}KM.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function GM(t,e){for(var n=FT(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function qM(t,e){for(var n=FT(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function NG(t){return function(){GM(this,t)}}function OG(t){return function(){qM(this,t)}}function MG(t,e){return function(){(e.apply(this,arguments)?GM:qM)(this,t)}}function PG(t,e){var n=FM(t+"");if(arguments.length<2){for(var r=FT(this.node()),a=-1,c=n.length;++a<c;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof e=="function"?MG:e?NG:OG)(n,e))}function DG(){this.textContent=""}function LG(t){return function(){this.textContent=t}}function UG(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function jG(t){return arguments.length?this.each(t==null?DG:(typeof t=="function"?UG:LG)(t)):this.node().textContent}function HG(){this.innerHTML=""}function BG(t){return function(){this.innerHTML=t}}function zG(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function FG(t){return arguments.length?this.each(t==null?HG:(typeof t=="function"?zG:BG)(t)):this.node().innerHTML}function KG(){this.nextSibling&&this.parentNode.appendChild(this)}function GG(){return this.each(KG)}function qG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $G(){return this.each(qG)}function VG(t){var e=typeof t=="function"?t:LM(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function YG(){return null}function QG(t,e){var n=typeof t=="function"?t:LM(t),r=e==null?YG:typeof e=="function"?e:zT(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function WG(){var t=this.parentNode;t&&t.removeChild(this)}function XG(){return this.each(WG)}function JG(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ZG(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function eq(t){return this.select(t?ZG:JG)}function tq(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nq(t){return function(e){t.call(this,e,this.__data__)}}function rq(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function oq(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,a=e.length,c;n<a;++n)c=e[n],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):e[++r]=c;++r?e.length=r:delete this.__on}}}function iq(t,e,n){return function(){var r=this.__on,a,c=nq(e);if(r){for(var d=0,m=r.length;d<m;++d)if((a=r[d]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=c,a.options=n),a.value=e;return}}this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,options:n},r?r.push(a):this.__on=[a]}}function sq(t,e,n){var r=rq(t+""),a,c=r.length,d;if(arguments.length<2){var m=this.node().__on;if(m){for(var p=0,y=m.length,v;p<y;++p)for(a=0,v=m[p];a<c;++a)if((d=r[a]).type===v.type&&d.name===v.name)return v.value}return}for(m=e?iq:oq,a=0;a<c;++a)this.each(m(r[a],e,n));return this}function $M(t,e,n){var r=zM(t),a=r.CustomEvent;typeof a=="function"?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function aq(t,e){return function(){return $M(this,t,e)}}function cq(t,e){return function(){return $M(this,t,e.apply(this,arguments))}}function lq(t,e){return this.each((typeof e=="function"?cq:aq)(t,e))}function*uq(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,c=r.length,d;a<c;++a)(d=r[a])&&(yield d)}var VM=[null];function Ho(t,e){this._groups=t,this._parents=e}function Ng(){return new Ho([[document.documentElement]],VM)}function dq(){return this}Ho.prototype=Ng.prototype={constructor:Ho,select:UK,selectAll:zK,selectChild:qK,selectChildren:QK,filter:WK,data:nG,enter:XK,exit:oG,join:iG,merge:sG,selection:dq,order:aG,sort:cG,call:uG,nodes:dG,node:hG,size:fG,empty:mG,each:gG,attr:EG,style:xG,property:RG,classed:PG,text:jG,html:FG,raise:GG,lower:$G,append:VG,insert:QG,remove:XG,clone:eq,datum:tq,on:sq,dispatch:lq,[Symbol.iterator]:uq};function Po(t){return typeof t=="string"?new Ho([[document.querySelector(t)]],[document.documentElement]):new Ho([[t]],VM)}function hq(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Xi(t,e){if(t=hq(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const fq={passive:!1},hg={capture:!0,passive:!1};function xb(t){t.stopImmediatePropagation()}function Rh(t){t.preventDefault(),t.stopImmediatePropagation()}function YM(t){var e=t.document.documentElement,n=Po(t).on("dragstart.drag",Rh,hg);"onselectstart"in e?n.on("selectstart.drag",Rh,hg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function QM(t,e){var n=t.document.documentElement,r=Po(t).on("dragstart.drag",null);e&&(r.on("click.drag",Rh,hg),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gy=t=>()=>t;function _E(t,{sourceEvent:e,subject:n,target:r,identifier:a,active:c,x:d,y:m,dx:p,dy:y,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:m,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:y,enumerable:!0,configurable:!0},_:{value:v}})}_E.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function mq(t){return!t.ctrlKey&&!t.button}function gq(){return this.parentNode}function pq(t,e){return e??{x:t.x,y:t.y}}function yq(){return navigator.maxTouchPoints||"ontouchstart"in this}function WM(){var t=mq,e=gq,n=pq,r=yq,a={},c=_C("start","drag","end"),d=0,m,p,y,v,b=0;function E(U){U.on("mousedown.drag",x).filter(r).on("touchstart.drag",N).on("touchmove.drag",M,fq).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(U,H){if(!(v||!t.call(this,U,H))){var V=O(this,e.call(this,U,H),U,H,"mouse");V&&(Po(U.view).on("mousemove.drag",I,hg).on("mouseup.drag",k,hg),YM(U.view),xb(U),y=!1,m=U.clientX,p=U.clientY,V("start",U))}}function I(U){if(Rh(U),!y){var H=U.clientX-m,V=U.clientY-p;y=H*H+V*V>b}a.mouse("drag",U)}function k(U){Po(U.view).on("mousemove.drag mouseup.drag",null),QM(U.view,y),Rh(U),a.mouse("end",U)}function N(U,H){if(t.call(this,U,H)){var V=U.changedTouches,Q=e.call(this,U,H),Y=V.length,ee,se;for(ee=0;ee<Y;++ee)(se=O(this,Q,U,H,V[ee].identifier,V[ee]))&&(xb(U),se("start",U,V[ee]))}}function M(U){var H=U.changedTouches,V=H.length,Q,Y;for(Q=0;Q<V;++Q)(Y=a[H[Q].identifier])&&(Rh(U),Y("drag",U,H[Q]))}function j(U){var H=U.changedTouches,V=H.length,Q,Y;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),Q=0;Q<V;++Q)(Y=a[H[Q].identifier])&&(xb(U),Y("end",U,H[Q]))}function O(U,H,V,Q,Y,ee){var se=c.copy(),ce=Xi(ee||V,H),te,re,G;if((G=n.call(U,new _E("beforestart",{sourceEvent:V,target:E,identifier:Y,active:d,x:ce[0],y:ce[1],dx:0,dy:0,dispatch:se}),Q))!=null)return te=G.x-ce[0]||0,re=G.y-ce[1]||0,function J(D,F,$){var X=ce,z;switch(D){case"start":a[Y]=J,z=d++;break;case"end":delete a[Y],--d;case"drag":ce=Xi($||F,H),z=d;break}se.call(D,U,new _E(D,{sourceEvent:F,subject:G,target:E,identifier:Y,active:z,x:ce[0]+te,y:ce[1]+re,dx:ce[0]-X[0],dy:ce[1]-X[1],dispatch:se}),Q)}}return E.filter=function(U){return arguments.length?(t=typeof U=="function"?U:gy(!!U),E):t},E.container=function(U){return arguments.length?(e=typeof U=="function"?U:gy(U),E):e},E.subject=function(U){return arguments.length?(n=typeof U=="function"?U:gy(U),E):n},E.touchable=function(U){return arguments.length?(r=typeof U=="function"?U:gy(!!U),E):r},E.on=function(){var U=c.on.apply(c,arguments);return U===c?E:U},E.clickDistance=function(U){return arguments.length?(b=(U=+U)*U,E):Math.sqrt(b)},E}function KT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function XM(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Og(){}var fg=.7,xv=1/fg,Nh="\\s*([+-]?\\d+)\\s*",mg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vq=/^#([0-9a-f]{3,8})$/,Cq=new RegExp(`^rgb\\(${Nh},${Nh},${Nh}\\)$`),wq=new RegExp(`^rgb\\(${Vs},${Vs},${Vs}\\)$`),bq=new RegExp(`^rgba\\(${Nh},${Nh},${Nh},${mg}\\)$`),Eq=new RegExp(`^rgba\\(${Vs},${Vs},${Vs},${mg}\\)$`),Aq=new RegExp(`^hsl\\(${mg},${Vs},${Vs}\\)$`),Tq=new RegExp(`^hsla\\(${mg},${Vs},${Vs},${mg}\\)$`),_0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KT(Og,Yu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:k0,formatHex:k0,formatHex8:Sq,formatHsl:xq,formatRgb:I0,toString:I0});function k0(){return this.rgb().formatHex()}function Sq(){return this.rgb().formatHex8()}function xq(){return JM(this).formatHsl()}function I0(){return this.rgb().formatRgb()}function Yu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vq.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?R0(e):n===3?new mo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?py(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?py(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Cq.exec(t))?new mo(e[1],e[2],e[3],1):(e=wq.exec(t))?new mo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bq.exec(t))?py(e[1],e[2],e[3],e[4]):(e=Eq.exec(t))?py(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Aq.exec(t))?M0(e[1],e[2]/100,e[3]/100,1):(e=Tq.exec(t))?M0(e[1],e[2]/100,e[3]/100,e[4]):_0.hasOwnProperty(t)?R0(_0[t]):t==="transparent"?new mo(NaN,NaN,NaN,0):null}function R0(t){return new mo(t>>16&255,t>>8&255,t&255,1)}function py(t,e,n,r){return r<=0&&(t=e=n=NaN),new mo(t,e,n,r)}function _q(t){return t instanceof Og||(t=Yu(t)),t?(t=t.rgb(),new mo(t.r,t.g,t.b,t.opacity)):new mo}function kE(t,e,n,r){return arguments.length===1?_q(t):new mo(t,e,n,r??1)}function mo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}KT(mo,kE,XM(Og,{brighter(t){return t=t==null?xv:Math.pow(xv,t),new mo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fg:Math.pow(fg,t),new mo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mo(Iu(this.r),Iu(this.g),Iu(this.b),_v(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:N0,formatHex:N0,formatHex8:kq,formatRgb:O0,toString:O0}));function N0(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}`}function kq(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}${ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function O0(){const t=_v(this.opacity);return`${t===1?"rgb(":"rgba("}${Iu(this.r)}, ${Iu(this.g)}, ${Iu(this.b)}${t===1?")":`, ${t})`}`}function _v(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Iu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ku(t){return t=Iu(t),(t<16?"0":"")+t.toString(16)}function M0(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ji(t,e,n,r)}function JM(t){if(t instanceof Ji)return new Ji(t.h,t.s,t.l,t.opacity);if(t instanceof Og||(t=Yu(t)),!t)return new Ji;if(t instanceof Ji)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),c=Math.max(e,n,r),d=NaN,m=c-a,p=(c+a)/2;return m?(e===c?d=(n-r)/m+(n<r)*6:n===c?d=(r-e)/m+2:d=(e-n)/m+4,m/=p<.5?c+a:2-c-a,d*=60):m=p>0&&p<1?0:d,new Ji(d,m,p,t.opacity)}function Iq(t,e,n,r){return arguments.length===1?JM(t):new Ji(t,e,n,r??1)}function Ji(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}KT(Ji,Iq,XM(Og,{brighter(t){return t=t==null?xv:Math.pow(xv,t),new Ji(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fg:Math.pow(fg,t),new Ji(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new mo(_b(t>=240?t-240:t+120,a,r),_b(t,a,r),_b(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Ji(P0(this.h),yy(this.s),yy(this.l),_v(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_v(this.opacity);return`${t===1?"hsl(":"hsla("}${P0(this.h)}, ${yy(this.s)*100}%, ${yy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function P0(t){return t=(t||0)%360,t<0?t+360:t}function yy(t){return Math.max(0,Math.min(1,t||0))}function _b(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const GT=t=>()=>t;function Rq(t,e){return function(n){return t+n*e}}function Nq(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Oq(t){return(t=+t)==1?ZM:function(e,n){return n-e?Nq(e,n,t):GT(isNaN(e)?n:e)}}function ZM(t,e){var n=e-t;return n?Rq(t,n):GT(isNaN(t)?e:t)}const kv=(function t(e){var n=Oq(e);function r(a,c){var d=n((a=kE(a)).r,(c=kE(c)).r),m=n(a.g,c.g),p=n(a.b,c.b),y=ZM(a.opacity,c.opacity);return function(v){return a.r=d(v),a.g=m(v),a.b=p(v),a.opacity=y(v),a+""}}return r.gamma=t,r})(1);function Mq(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(c){for(a=0;a<n;++a)r[a]=t[a]*(1-c)+e[a]*c;return r}}function Pq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Dq(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),c=new Array(n),d;for(d=0;d<r;++d)a[d]=Xm(t[d],e[d]);for(;d<n;++d)c[d]=e[d];return function(m){for(d=0;d<r;++d)c[d]=a[d](m);return c}}function Lq(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Uq(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Xm(t[a],e[a]):r[a]=e[a];return function(c){for(a in n)r[a]=n[a](c);return r}}var IE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kb=new RegExp(IE.source,"g");function jq(t){return function(){return t}}function Hq(t){return function(e){return t(e)+""}}function eP(t,e){var n=IE.lastIndex=kb.lastIndex=0,r,a,c,d=-1,m=[],p=[];for(t=t+"",e=e+"";(r=IE.exec(t))&&(a=kb.exec(e));)(c=a.index)>n&&(c=e.slice(n,c),m[d]?m[d]+=c:m[++d]=c),(r=r[0])===(a=a[0])?m[d]?m[d]+=a:m[++d]=a:(m[++d]=null,p.push({i:d,x:Bs(r,a)})),n=kb.lastIndex;return n<e.length&&(c=e.slice(n),m[d]?m[d]+=c:m[++d]=c),m.length<2?p[0]?Hq(p[0].x):jq(e):(e=p.length,function(y){for(var v=0,b;v<e;++v)m[(b=p[v]).i]=b.x(y);return m.join("")})}function Xm(t,e){var n=typeof e,r;return e==null||n==="boolean"?GT(e):(n==="number"?Bs:n==="string"?(r=Yu(e))?(e=r,kv):eP:e instanceof Yu?kv:e instanceof Date?Lq:Pq(e)?Mq:Array.isArray(e)?Dq:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Uq:Bs)(t,e)}var D0=180/Math.PI,RE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tP(t,e,n,r,a,c){var d,m,p;return(d=Math.sqrt(t*t+e*e))&&(t/=d,e/=d),(p=t*n+e*r)&&(n-=t*p,r-=e*p),(m=Math.sqrt(n*n+r*r))&&(n/=m,r/=m,p/=m),t*r<e*n&&(t=-t,e=-e,p=-p,d=-d),{translateX:a,translateY:c,rotate:Math.atan2(e,t)*D0,skewX:Math.atan(p)*D0,scaleX:d,scaleY:m}}var vy;function Bq(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?RE:tP(e.a,e.b,e.c,e.d,e.e,e.f)}function zq(t){return t==null||(vy||(vy=document.createElementNS("http://www.w3.org/2000/svg","g")),vy.setAttribute("transform",t),!(t=vy.transform.baseVal.consolidate()))?RE:(t=t.matrix,tP(t.a,t.b,t.c,t.d,t.e,t.f))}function nP(t,e,n,r){function a(y){return y.length?y.pop()+" ":""}function c(y,v,b,E,x,I){if(y!==b||v!==E){var k=x.push("translate(",null,e,null,n);I.push({i:k-4,x:Bs(y,b)},{i:k-2,x:Bs(v,E)})}else(b||E)&&x.push("translate("+b+e+E+n)}function d(y,v,b,E){y!==v?(y-v>180?v+=360:v-y>180&&(y+=360),E.push({i:b.push(a(b)+"rotate(",null,r)-2,x:Bs(y,v)})):v&&b.push(a(b)+"rotate("+v+r)}function m(y,v,b,E){y!==v?E.push({i:b.push(a(b)+"skewX(",null,r)-2,x:Bs(y,v)}):v&&b.push(a(b)+"skewX("+v+r)}function p(y,v,b,E,x,I){if(y!==b||v!==E){var k=x.push(a(x)+"scale(",null,",",null,")");I.push({i:k-4,x:Bs(y,b)},{i:k-2,x:Bs(v,E)})}else(b!==1||E!==1)&&x.push(a(x)+"scale("+b+","+E+")")}return function(y,v){var b=[],E=[];return y=t(y),v=t(v),c(y.translateX,y.translateY,v.translateX,v.translateY,b,E),d(y.rotate,v.rotate,b,E),m(y.skewX,v.skewX,b,E),p(y.scaleX,y.scaleY,v.scaleX,v.scaleY,b,E),y=v=null,function(x){for(var I=-1,k=E.length,N;++I<k;)b[(N=E[I]).i]=N.x(x);return b.join("")}}}var Fq=nP(Bq,"px, ","px)","deg)"),Kq=nP(zq,", ",")",")"),Gq=1e-12;function L0(t){return((t=Math.exp(t))+1/t)/2}function qq(t){return((t=Math.exp(t))-1/t)/2}function $q(t){return((t=Math.exp(2*t))-1)/(t+1)}const Dy=(function t(e,n,r){function a(c,d){var m=c[0],p=c[1],y=c[2],v=d[0],b=d[1],E=d[2],x=v-m,I=b-p,k=x*x+I*I,N,M;if(k<Gq)M=Math.log(E/y)/e,N=function(Q){return[m+Q*x,p+Q*I,y*Math.exp(e*Q*M)]};else{var j=Math.sqrt(k),O=(E*E-y*y+r*k)/(2*y*n*j),U=(E*E-y*y-r*k)/(2*E*n*j),H=Math.log(Math.sqrt(O*O+1)-O),V=Math.log(Math.sqrt(U*U+1)-U);M=(V-H)/e,N=function(Q){var Y=Q*M,ee=L0(H),se=y/(n*j)*(ee*$q(e*Y+H)-qq(H));return[m+se*x,p+se*I,y*ee/L0(e*Y+H)]}}return N.duration=M*1e3*e/Math.SQRT2,N}return a.rho=function(c){var d=Math.max(.001,+c),m=d*d,p=m*m;return t(d,m,p)},a})(Math.SQRT2,2,4);var Kh=0,Bm=0,Mm=0,rP=1e3,Iv,zm,Rv=0,Qu=0,IC=0,gg=typeof performance=="object"&&performance.now?performance:Date,oP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qT(){return Qu||(oP(Vq),Qu=gg.now()+IC)}function Vq(){Qu=0}function Nv(){this._call=this._time=this._next=null}Nv.prototype=iP.prototype={constructor:Nv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?qT():+n)+(e==null?0:+e),!this._next&&zm!==this&&(zm?zm._next=this:Iv=this,zm=this),this._call=t,this._time=n,NE()},stop:function(){this._call&&(this._call=null,this._time=1/0,NE())}};function iP(t,e,n){var r=new Nv;return r.restart(t,e,n),r}function Yq(){qT(),++Kh;for(var t=Iv,e;t;)(e=Qu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kh}function U0(){Qu=(Rv=gg.now())+IC,Kh=Bm=0;try{Yq()}finally{Kh=0,Wq(),Qu=0}}function Qq(){var t=gg.now(),e=t-Rv;e>rP&&(IC-=e,Rv=t)}function Wq(){for(var t,e=Iv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Iv=n);zm=t,NE(r)}function NE(t){if(!Kh){Bm&&(Bm=clearTimeout(Bm));var e=t-Qu;e>24?(t<1/0&&(Bm=setTimeout(U0,t-gg.now()-IC)),Mm&&(Mm=clearInterval(Mm))):(Mm||(Rv=gg.now(),Mm=setInterval(Qq,rP)),Kh=1,oP(U0))}}function j0(t,e,n){var r=new Nv;return e=e==null?0:+e,r.restart(a=>{r.stop(),t(a+e)},e,n),r}var Xq=_C("start","end","cancel","interrupt"),Jq=[],sP=0,H0=1,OE=2,Ly=3,B0=4,ME=5,Uy=6;function RC(t,e,n,r,a,c){var d=t.__transition;if(!d)t.__transition={};else if(n in d)return;Zq(t,n,{name:e,index:r,group:a,on:Xq,tween:Jq,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:sP})}function $T(t,e){var n=as(t,e);if(n.state>sP)throw new Error("too late; already scheduled");return n}function Zs(t,e){var n=as(t,e);if(n.state>Ly)throw new Error("too late; already running");return n}function as(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zq(t,e,n){var r=t.__transition,a;r[e]=n,n.timer=iP(c,0,n.time);function c(y){n.state=H0,n.timer.restart(d,n.delay,n.time),n.delay<=y&&d(y-n.delay)}function d(y){var v,b,E,x;if(n.state!==H0)return p();for(v in r)if(x=r[v],x.name===n.name){if(x.state===Ly)return j0(d);x.state===B0?(x.state=Uy,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[v]):+v<e&&(x.state=Uy,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[v])}if(j0(function(){n.state===Ly&&(n.state=B0,n.timer.restart(m,n.delay,n.time),m(y))}),n.state=OE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===OE){for(n.state=Ly,a=new Array(E=n.tween.length),v=0,b=-1;v<E;++v)(x=n.tween[v].value.call(t,t.__data__,n.index,n.group))&&(a[++b]=x);a.length=b+1}}function m(y){for(var v=y<n.duration?n.ease.call(null,y/n.duration):(n.timer.restart(p),n.state=ME,1),b=-1,E=a.length;++b<E;)a[b].call(t,v);n.state===ME&&(n.on.call("end",t,t.__data__,n.index,n.group),p())}function p(){n.state=Uy,n.timer.stop(),delete r[e];for(var y in r)return;delete t.__transition}}function jy(t,e){var n=t.__transition,r,a,c=!0,d;if(n){e=e==null?null:e+"";for(d in n){if((r=n[d]).name!==e){c=!1;continue}a=r.state>OE&&r.state<ME,r.state=Uy,r.timer.stop(),r.on.call(a?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[d]}c&&delete t.__transition}}function e8(t){return this.each(function(){jy(this,t)})}function t8(t,e){var n,r;return function(){var a=Zs(this,t),c=a.tween;if(c!==n){r=n=c;for(var d=0,m=r.length;d<m;++d)if(r[d].name===e){r=r.slice(),r.splice(d,1);break}}a.tween=r}}function n8(t,e,n){var r,a;if(typeof n!="function")throw new Error;return function(){var c=Zs(this,t),d=c.tween;if(d!==r){a=(r=d).slice();for(var m={name:e,value:n},p=0,y=a.length;p<y;++p)if(a[p].name===e){a[p]=m;break}p===y&&a.push(m)}c.tween=a}}function r8(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=as(this.node(),n).tween,a=0,c=r.length,d;a<c;++a)if((d=r[a]).name===t)return d.value;return null}return this.each((e==null?t8:n8)(n,t,e))}function VT(t,e,n){var r=t._id;return t.each(function(){var a=Zs(this,r);(a.value||(a.value={}))[e]=n.apply(this,arguments)}),function(a){return as(a,r).value[e]}}function aP(t,e){var n;return(typeof e=="number"?Bs:e instanceof Yu?kv:(n=Yu(e))?(e=n,kv):eP)(t,e)}function o8(t){return function(){this.removeAttribute(t)}}function i8(t){return function(){this.removeAttributeNS(t.space,t.local)}}function s8(t,e,n){var r,a=n+"",c;return function(){var d=this.getAttribute(t);return d===a?null:d===r?c:c=e(r=d,n)}}function a8(t,e,n){var r,a=n+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===a?null:d===r?c:c=e(r=d,n)}}function c8(t,e,n){var r,a,c;return function(){var d,m=n(this),p;return m==null?void this.removeAttribute(t):(d=this.getAttribute(t),p=m+"",d===p?null:d===r&&p===a?c:(a=p,c=e(r=d,m)))}}function l8(t,e,n){var r,a,c;return function(){var d,m=n(this),p;return m==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),p=m+"",d===p?null:d===r&&p===a?c:(a=p,c=e(r=d,m)))}}function u8(t,e){var n=kC(t),r=n==="transform"?Kq:aP;return this.attrTween(t,typeof e=="function"?(n.local?l8:c8)(n,r,VT(this,"attr."+t,e)):e==null?(n.local?i8:o8)(n):(n.local?a8:s8)(n,r,e))}function d8(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function h8(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function f8(t,e){var n,r;function a(){var c=e.apply(this,arguments);return c!==r&&(n=(r=c)&&h8(t,c)),n}return a._value=e,a}function m8(t,e){var n,r;function a(){var c=e.apply(this,arguments);return c!==r&&(n=(r=c)&&d8(t,c)),n}return a._value=e,a}function g8(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=kC(t);return this.tween(n,(r.local?f8:m8)(r,e))}function p8(t,e){return function(){$T(this,t).delay=+e.apply(this,arguments)}}function y8(t,e){return e=+e,function(){$T(this,t).delay=e}}function v8(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?p8:y8)(e,t)):as(this.node(),e).delay}function C8(t,e){return function(){Zs(this,t).duration=+e.apply(this,arguments)}}function w8(t,e){return e=+e,function(){Zs(this,t).duration=e}}function b8(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?C8:w8)(e,t)):as(this.node(),e).duration}function E8(t,e){if(typeof e!="function")throw new Error;return function(){Zs(this,t).ease=e}}function A8(t){var e=this._id;return arguments.length?this.each(E8(e,t)):as(this.node(),e).ease}function T8(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Zs(this,t).ease=n}}function S8(t){if(typeof t!="function")throw new Error;return this.each(T8(this._id,t))}function x8(t){typeof t!="function"&&(t=jM(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var c=e[a],d=c.length,m=r[a]=[],p,y=0;y<d;++y)(p=c[y])&&t.call(p,p.__data__,y,c)&&m.push(p);return new Wa(r,this._parents,this._name,this._id)}function _8(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,c=Math.min(r,a),d=new Array(r),m=0;m<c;++m)for(var p=e[m],y=n[m],v=p.length,b=d[m]=new Array(v),E,x=0;x<v;++x)(E=p[x]||y[x])&&(b[x]=E);for(;m<r;++m)d[m]=e[m];return new Wa(d,this._parents,this._name,this._id)}function k8(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function I8(t,e,n){var r,a,c=k8(e)?$T:Zs;return function(){var d=c(this,t),m=d.on;m!==r&&(a=(r=m).copy()).on(e,n),d.on=a}}function R8(t,e){var n=this._id;return arguments.length<2?as(this.node(),n).on.on(t):this.each(I8(n,t,e))}function N8(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function O8(){return this.on("end.remove",N8(this._id))}function M8(t){var e=this._name,n=this._id;typeof t!="function"&&(t=zT(t));for(var r=this._groups,a=r.length,c=new Array(a),d=0;d<a;++d)for(var m=r[d],p=m.length,y=c[d]=new Array(p),v,b,E=0;E<p;++E)(v=m[E])&&(b=t.call(v,v.__data__,E,m))&&("__data__"in v&&(b.__data__=v.__data__),y[E]=b,RC(y[E],e,n,E,y,as(v,n)));return new Wa(c,this._parents,e,n)}function P8(t){var e=this._name,n=this._id;typeof t!="function"&&(t=UM(t));for(var r=this._groups,a=r.length,c=[],d=[],m=0;m<a;++m)for(var p=r[m],y=p.length,v,b=0;b<y;++b)if(v=p[b]){for(var E=t.call(v,v.__data__,b,p),x,I=as(v,n),k=0,N=E.length;k<N;++k)(x=E[k])&&RC(x,e,n,k,E,I);c.push(E),d.push(v)}return new Wa(c,d,e,n)}var D8=Ng.prototype.constructor;function L8(){return new D8(this._groups,this._parents)}function U8(t,e){var n,r,a;return function(){var c=Fh(this,t),d=(this.style.removeProperty(t),Fh(this,t));return c===d?null:c===n&&d===r?a:a=e(n=c,r=d)}}function cP(t){return function(){this.style.removeProperty(t)}}function j8(t,e,n){var r,a=n+"",c;return function(){var d=Fh(this,t);return d===a?null:d===r?c:c=e(r=d,n)}}function H8(t,e,n){var r,a,c;return function(){var d=Fh(this,t),m=n(this),p=m+"";return m==null&&(p=m=(this.style.removeProperty(t),Fh(this,t))),d===p?null:d===r&&p===a?c:(a=p,c=e(r=d,m))}}function B8(t,e){var n,r,a,c="style."+e,d="end."+c,m;return function(){var p=Zs(this,t),y=p.on,v=p.value[c]==null?m||(m=cP(e)):void 0;(y!==n||a!==v)&&(r=(n=y).copy()).on(d,a=v),p.on=r}}function z8(t,e,n){var r=(t+="")=="transform"?Fq:aP;return e==null?this.styleTween(t,U8(t,r)).on("end.style."+t,cP(t)):typeof e=="function"?this.styleTween(t,H8(t,r,VT(this,"style."+t,e))).each(B8(this._id,t)):this.styleTween(t,j8(t,r,e),n).on("end.style."+t,null)}function F8(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function K8(t,e,n){var r,a;function c(){var d=e.apply(this,arguments);return d!==a&&(r=(a=d)&&F8(t,d,n)),r}return c._value=e,c}function G8(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,K8(t,e,n??""))}function q8(t){return function(){this.textContent=t}}function $8(t){return function(){var e=t(this);this.textContent=e??""}}function V8(t){return this.tween("text",typeof t=="function"?$8(VT(this,"text",t)):q8(t==null?"":t+""))}function Y8(t){return function(e){this.textContent=t.call(this,e)}}function Q8(t){var e,n;function r(){var a=t.apply(this,arguments);return a!==n&&(e=(n=a)&&Y8(a)),e}return r._value=t,r}function W8(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Q8(t))}function X8(){for(var t=this._name,e=this._id,n=lP(),r=this._groups,a=r.length,c=0;c<a;++c)for(var d=r[c],m=d.length,p,y=0;y<m;++y)if(p=d[y]){var v=as(p,e);RC(p,t,n,y,d,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new Wa(r,this._parents,t,n)}function J8(){var t,e,n=this,r=n._id,a=n.size();return new Promise(function(c,d){var m={value:d},p={value:function(){--a===0&&c()}};n.each(function(){var y=Zs(this,r),v=y.on;v!==t&&(e=(t=v).copy(),e._.cancel.push(m),e._.interrupt.push(m),e._.end.push(p)),y.on=e}),a===0&&c()})}var Z8=0;function Wa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function lP(){return++Z8}var za=Ng.prototype;Wa.prototype={constructor:Wa,select:M8,selectAll:P8,selectChild:za.selectChild,selectChildren:za.selectChildren,filter:x8,merge:_8,selection:L8,transition:X8,call:za.call,nodes:za.nodes,node:za.node,size:za.size,empty:za.empty,each:za.each,on:R8,attr:u8,attrTween:g8,style:z8,styleTween:G8,text:V8,textTween:W8,remove:O8,tween:r8,delay:v8,duration:b8,ease:A8,easeVarying:S8,end:J8,[Symbol.iterator]:za[Symbol.iterator]};function e$(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var t$={time:null,delay:0,duration:250,ease:e$};function n$(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function r$(t){var e,n;t instanceof Wa?(e=t._id,t=t._name):(e=lP(),(n=t$).time=qT(),t=t==null?null:t+"");for(var r=this._groups,a=r.length,c=0;c<a;++c)for(var d=r[c],m=d.length,p,y=0;y<m;++y)(p=d[y])&&RC(p,t,e,y,d,n||n$(p,e));return new Wa(r,this._parents,t,e)}Ng.prototype.interrupt=e8;Ng.prototype.transition=r$;const Cy=t=>()=>t;function o$(t,{sourceEvent:e,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Ga(t,e,n){this.k=t,this.x=e,this.y=n}Ga.prototype={constructor:Ga,scale:function(t){return t===1?this:new Ga(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ga(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var NC=new Ga(1,0,0);uP.prototype=Ga.prototype;function uP(t){for(;!t.__zoom;)if(!(t=t.parentNode))return NC;return t.__zoom}function Ib(t){t.stopImmediatePropagation()}function Pm(t){t.preventDefault(),t.stopImmediatePropagation()}function i$(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function s$(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function z0(){return this.__zoom||NC}function a$(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function c$(){return navigator.maxTouchPoints||"ontouchstart"in this}function l$(t,e,n){var r=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],c=t.invertY(e[0][1])-n[0][1],d=t.invertY(e[1][1])-n[1][1];return t.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function dP(){var t=i$,e=s$,n=l$,r=a$,a=c$,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],m=250,p=Dy,y=_C("start","zoom","end"),v,b,E,x=500,I=150,k=0,N=10;function M(G){G.property("__zoom",z0).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",se).filter(a).on("touchstart.zoom",ce).on("touchmove.zoom",te).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(G,J,D,F){var $=G.selection?G.selection():G;$.property("__zoom",z0),G!==$?H(G,J,D,F):$.interrupt().each(function(){V(this,arguments).event(F).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},M.scaleBy=function(G,J,D,F){M.scaleTo(G,function(){var $=this.__zoom.k,X=typeof J=="function"?J.apply(this,arguments):J;return $*X},D,F)},M.scaleTo=function(G,J,D,F){M.transform(G,function(){var $=e.apply(this,arguments),X=this.__zoom,z=D==null?U($):typeof D=="function"?D.apply(this,arguments):D,W=X.invert(z),ue=typeof J=="function"?J.apply(this,arguments):J;return n(O(j(X,ue),z,W),$,d)},D,F)},M.translateBy=function(G,J,D,F){M.transform(G,function(){return n(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof D=="function"?D.apply(this,arguments):D),e.apply(this,arguments),d)},null,F)},M.translateTo=function(G,J,D,F,$){M.transform(G,function(){var X=e.apply(this,arguments),z=this.__zoom,W=F==null?U(X):typeof F=="function"?F.apply(this,arguments):F;return n(NC.translate(W[0],W[1]).scale(z.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof D=="function"?-D.apply(this,arguments):-D),X,d)},F,$)};function j(G,J){return J=Math.max(c[0],Math.min(c[1],J)),J===G.k?G:new Ga(J,G.x,G.y)}function O(G,J,D){var F=J[0]-D[0]*G.k,$=J[1]-D[1]*G.k;return F===G.x&&$===G.y?G:new Ga(G.k,F,$)}function U(G){return[(+G[0][0]+ +G[1][0])/2,(+G[0][1]+ +G[1][1])/2]}function H(G,J,D,F){G.on("start.zoom",function(){V(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(F).end()}).tween("zoom",function(){var $=this,X=arguments,z=V($,X).event(F),W=e.apply($,X),ue=D==null?U(W):typeof D=="function"?D.apply($,X):D,de=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),ge=$.__zoom,Ne=typeof J=="function"?J.apply($,X):J,Ee=p(ge.invert(ue).concat(de/ge.k),Ne.invert(ue).concat(de/Ne.k));return function(le){if(le===1)le=Ne;else{var Ce=Ee(le),De=de/Ce[2];le=new Ga(De,ue[0]-Ce[0]*De,ue[1]-Ce[1]*De)}z.zoom(null,le)}})}function V(G,J,D){return!D&&G.__zooming||new Q(G,J)}function Q(G,J){this.that=G,this.args=J,this.active=0,this.sourceEvent=null,this.extent=e.apply(G,J),this.taps=0}Q.prototype={event:function(G){return G&&(this.sourceEvent=G),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(G,J){return this.mouse&&G!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&G!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&G!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(G){var J=Po(this.that).datum();y.call(G,this.that,new o$(G,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:y}),J)}};function Y(G,...J){if(!t.apply(this,arguments))return;var D=V(this,J).event(G),F=this.__zoom,$=Math.max(c[0],Math.min(c[1],F.k*Math.pow(2,r.apply(this,arguments)))),X=Xi(G);if(D.wheel)(D.mouse[0][0]!==X[0]||D.mouse[0][1]!==X[1])&&(D.mouse[1]=F.invert(D.mouse[0]=X)),clearTimeout(D.wheel);else{if(F.k===$)return;D.mouse=[X,F.invert(X)],jy(this),D.start()}Pm(G),D.wheel=setTimeout(z,I),D.zoom("mouse",n(O(j(F,$),D.mouse[0],D.mouse[1]),D.extent,d));function z(){D.wheel=null,D.end()}}function ee(G,...J){if(E||!t.apply(this,arguments))return;var D=G.currentTarget,F=V(this,J,!0).event(G),$=Po(G.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),X=Xi(G,D),z=G.clientX,W=G.clientY;YM(G.view),Ib(G),F.mouse=[X,this.__zoom.invert(X)],jy(this),F.start();function ue(ge){if(Pm(ge),!F.moved){var Ne=ge.clientX-z,Ee=ge.clientY-W;F.moved=Ne*Ne+Ee*Ee>k}F.event(ge).zoom("mouse",n(O(F.that.__zoom,F.mouse[0]=Xi(ge,D),F.mouse[1]),F.extent,d))}function de(ge){$.on("mousemove.zoom mouseup.zoom",null),QM(ge.view,F.moved),Pm(ge),F.event(ge).end()}}function se(G,...J){if(t.apply(this,arguments)){var D=this.__zoom,F=Xi(G.changedTouches?G.changedTouches[0]:G,this),$=D.invert(F),X=D.k*(G.shiftKey?.5:2),z=n(O(j(D,X),F,$),e.apply(this,J),d);Pm(G),m>0?Po(this).transition().duration(m).call(H,z,F,G):Po(this).call(M.transform,z,F,G)}}function ce(G,...J){if(t.apply(this,arguments)){var D=G.touches,F=D.length,$=V(this,J,G.changedTouches.length===F).event(G),X,z,W,ue;for(Ib(G),z=0;z<F;++z)W=D[z],ue=Xi(W,this),ue=[ue,this.__zoom.invert(ue),W.identifier],$.touch0?!$.touch1&&$.touch0[2]!==ue[2]&&($.touch1=ue,$.taps=0):($.touch0=ue,X=!0,$.taps=1+!!v);v&&(v=clearTimeout(v)),X&&($.taps<2&&(b=ue[0],v=setTimeout(function(){v=null},x)),jy(this),$.start())}}function te(G,...J){if(this.__zooming){var D=V(this,J).event(G),F=G.changedTouches,$=F.length,X,z,W,ue;for(Pm(G),X=0;X<$;++X)z=F[X],W=Xi(z,this),D.touch0&&D.touch0[2]===z.identifier?D.touch0[0]=W:D.touch1&&D.touch1[2]===z.identifier&&(D.touch1[0]=W);if(z=D.that.__zoom,D.touch1){var de=D.touch0[0],ge=D.touch0[1],Ne=D.touch1[0],Ee=D.touch1[1],le=(le=Ne[0]-de[0])*le+(le=Ne[1]-de[1])*le,Ce=(Ce=Ee[0]-ge[0])*Ce+(Ce=Ee[1]-ge[1])*Ce;z=j(z,Math.sqrt(le/Ce)),W=[(de[0]+Ne[0])/2,(de[1]+Ne[1])/2],ue=[(ge[0]+Ee[0])/2,(ge[1]+Ee[1])/2]}else if(D.touch0)W=D.touch0[0],ue=D.touch0[1];else return;D.zoom("touch",n(O(z,W,ue),D.extent,d))}}function re(G,...J){if(this.__zooming){var D=V(this,J).event(G),F=G.changedTouches,$=F.length,X,z;for(Ib(G),E&&clearTimeout(E),E=setTimeout(function(){E=null},x),X=0;X<$;++X)z=F[X],D.touch0&&D.touch0[2]===z.identifier?delete D.touch0:D.touch1&&D.touch1[2]===z.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(z=Xi(z,this),Math.hypot(b[0]-z[0],b[1]-z[1])<N)){var W=Po(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return M.wheelDelta=function(G){return arguments.length?(r=typeof G=="function"?G:Cy(+G),M):r},M.filter=function(G){return arguments.length?(t=typeof G=="function"?G:Cy(!!G),M):t},M.touchable=function(G){return arguments.length?(a=typeof G=="function"?G:Cy(!!G),M):a},M.extent=function(G){return arguments.length?(e=typeof G=="function"?G:Cy([[+G[0][0],+G[0][1]],[+G[1][0],+G[1][1]]]),M):e},M.scaleExtent=function(G){return arguments.length?(c[0]=+G[0],c[1]=+G[1],M):[c[0],c[1]]},M.translateExtent=function(G){return arguments.length?(d[0][0]=+G[0][0],d[1][0]=+G[1][0],d[0][1]=+G[0][1],d[1][1]=+G[1][1],M):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},M.constrain=function(G){return arguments.length?(n=G,M):n},M.duration=function(G){return arguments.length?(m=+G,M):m},M.interpolate=function(G){return arguments.length?(p=G,M):p},M.on=function(){var G=y.on.apply(y,arguments);return G===y?M:G},M.clickDistance=function(G){return arguments.length?(k=(G=+G)*G,M):Math.sqrt(k)},M.tapDistance=function(G){return arguments.length?(N=+G,M):N},M}const Ws={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},pg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],hP=["Enter"," ","Escape"],fP={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Gh;(function(t){t.Strict="strict",t.Loose="loose"})(Gh||(Gh={}));var Ru;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ru||(Ru={}));var yg;(function(t){t.Partial="partial",t.Full="full"})(yg||(yg={}));const mP={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ul;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ul||(ul={}));var Ov;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ov||(Ov={}));var Je;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Je||(Je={}));const F0={[Je.Left]:Je.Right,[Je.Right]:Je.Left,[Je.Top]:Je.Bottom,[Je.Bottom]:Je.Top};function gP(t){return t===null?null:t?"valid":"invalid"}const pP=t=>"id"in t&&"source"in t&&"target"in t,u$=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),YT=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Mg=(t,e=[0,0])=>{const{width:n,height:r}=Ja(t),a=t.origin??e,c=n*a[0],d=r*a[1];return{x:t.position.x-c,y:t.position.y-d}},d$=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,a)=>{const c=typeof a=="string";let d=!e.nodeLookup&&!c?a:void 0;e.nodeLookup&&(d=c?e.nodeLookup.get(a):YT(a)?a:e.nodeLookup.get(a.id));const m=d?Mv(d,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return OC(r,m)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return MC(n)},Pg=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const a=Mv(r);n=OC(n,a)}}),MC(n)},QT=(t,e,[n,r,a]=[0,0,1],c=!1,d=!1)=>{const m={...Lg(e,[n,r,a]),width:e.width/a,height:e.height/a},p=[];for(const y of t.values()){const{measured:v,selectable:b=!0,hidden:E=!1}=y;if(d&&!b||E)continue;const x=v.width??y.width??y.initialWidth??null,I=v.height??y.height??y.initialHeight??null,k=vg(m,$h(y)),N=(x??0)*(I??0),M=c&&k>0;(!y.internals.handleBounds||M||k>=N||y.dragging)&&p.push(y)}return p},h$=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function f$(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(a=>a.id)):null;return t.forEach(a=>{a.measured.width&&a.measured.height&&(e?.includeHiddenNodes||!a.hidden)&&(!r||r.has(a.id))&&n.set(a.id,a)}),n}async function m$({nodes:t,width:e,height:n,panZoom:r,minZoom:a,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const m=f$(t,d),p=Pg(m),y=WT(p,e,n,d?.minZoom??a,d?.maxZoom??c,d?.padding??.1);return await r.setViewport(y,{duration:d?.duration,ease:d?.ease,interpolate:d?.interpolate}),Promise.resolve(!0)}function yP({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:a,onError:c}){const d=n.get(t),m=d.parentId?n.get(d.parentId):void 0,{x:p,y}=m?m.internals.positionAbsolute:{x:0,y:0},v=d.origin??r;let b=d.extent||a;if(d.extent==="parent"&&!d.expandParent)if(!m)c?.("005",Ws.error005());else{const x=m.measured.width,I=m.measured.height;x&&I&&(b=[[p,y],[p+x,y+I]])}else m&&Vh(d.extent)&&(b=[[d.extent[0][0]+p,d.extent[0][1]+y],[d.extent[1][0]+p,d.extent[1][1]+y]]);const E=Vh(b)?Wu(e,b,d.measured):e;return(d.measured.width===void 0||d.measured.height===void 0)&&c?.("015",Ws.error015()),{position:{x:E.x-p+(d.measured.width??0)*v[0],y:E.y-y+(d.measured.height??0)*v[1]},positionAbsolute:E}}async function g$({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:a}){const c=new Set(t.map(E=>E.id)),d=[];for(const E of n){if(E.deletable===!1)continue;const x=c.has(E.id),I=!x&&E.parentId&&d.find(k=>k.id===E.parentId);(x||I)&&d.push(E)}const m=new Set(e.map(E=>E.id)),p=r.filter(E=>E.deletable!==!1),v=h$(d,p);for(const E of p)m.has(E.id)&&!v.find(I=>I.id===E.id)&&v.push(E);if(!a)return{edges:v,nodes:d};const b=await a({nodes:d,edges:v});return typeof b=="boolean"?b?{edges:v,nodes:d}:{edges:[],nodes:[]}:b}const qh=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Wu=(t={x:0,y:0},e,n)=>({x:qh(t.x,e[0][0],e[1][0]-(n?.width??0)),y:qh(t.y,e[0][1],e[1][1]-(n?.height??0))});function vP(t,e,n){const{width:r,height:a}=Ja(n),{x:c,y:d}=n.internals.positionAbsolute;return Wu(t,[[c,d],[c+r,d+a]],e)}const K0=(t,e,n)=>t<e?qh(Math.abs(t-e),1,e)/e:t>n?-qh(Math.abs(t-n),1,e)/e:0,CP=(t,e,n=15,r=40)=>{const a=K0(t.x,r,e.width-r)*n,c=K0(t.y,r,e.height-r)*n;return[a,c]},OC=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),PE=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),MC=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),$h=(t,e=[0,0])=>{const{x:n,y:r}=YT(t)?t.internals.positionAbsolute:Mg(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Mv=(t,e=[0,0])=>{const{x:n,y:r}=YT(t)?t.internals.positionAbsolute:Mg(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},wP=(t,e)=>MC(OC(PE(t),PE(e))),vg=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},G0=t=>es(t.width)&&es(t.height)&&es(t.x)&&es(t.y),es=t=>!isNaN(t)&&isFinite(t),p$=(t,e)=>{},Dg=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Lg=({x:t,y:e},[n,r,a],c=!1,d=[1,1])=>{const m={x:(t-n)/a,y:(e-r)/a};return c?Dg(m,d):m},Pv=({x:t,y:e},[n,r,a])=>({x:t*a+n,y:e*a+r});function Ch(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function y$(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=Ch(t,n),a=Ch(t,e);return{top:r,right:a,bottom:r,left:a,x:a*2,y:r*2}}if(typeof t=="object"){const r=Ch(t.top??t.y??0,n),a=Ch(t.bottom??t.y??0,n),c=Ch(t.left??t.x??0,e),d=Ch(t.right??t.x??0,e);return{top:r,right:d,bottom:a,left:c,x:c+d,y:r+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function v$(t,e,n,r,a,c){const{x:d,y:m}=Pv(t,[e,n,r]),{x:p,y}=Pv({x:t.x+t.width,y:t.y+t.height},[e,n,r]),v=a-p,b=c-y;return{left:Math.floor(d),top:Math.floor(m),right:Math.floor(v),bottom:Math.floor(b)}}const WT=(t,e,n,r,a,c)=>{const d=y$(c,e,n),m=(e-d.x)/t.width,p=(n-d.y)/t.height,y=Math.min(m,p),v=qh(y,r,a),b=t.x+t.width/2,E=t.y+t.height/2,x=e/2-b*v,I=n/2-E*v,k=v$(t,x,I,v,e,n),N={left:Math.min(k.left-d.left,0),top:Math.min(k.top-d.top,0),right:Math.min(k.right-d.right,0),bottom:Math.min(k.bottom-d.bottom,0)};return{x:x-N.left+N.right,y:I-N.top+N.bottom,zoom:v}},Cg=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vh(t){return t!=null&&t!=="parent"}function Ja(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function bP(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function EP(t,e={width:0,height:0},n,r,a){const c={...t},d=r.get(n);if(d){const m=d.origin||a;c.x+=d.internals.positionAbsolute.x-(e.width??0)*m[0],c.y+=d.internals.positionAbsolute.y-(e.height??0)*m[1]}return c}function q0(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function C$(){let t,e;return{promise:new Promise((r,a)=>{t=r,e=a}),resolve:t,reject:e}}function w$(t){return{...fP,...t||{}}}function Jm(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:a}){const{x:c,y:d}=Gs(t),m=Lg({x:c-(a?.left??0),y:d-(a?.top??0)},r),{x:p,y}=n?Dg(m,e):m;return{xSnapped:p,ySnapped:y,...m}}const XT=t=>({width:t.offsetWidth,height:t.offsetHeight}),AP=t=>t?.getRootNode?.()||window?.document,b$=["INPUT","SELECT","TEXTAREA"];function TP(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:b$.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const SP=t=>"clientX"in t,Gs=(t,e)=>{const n=SP(t),r=n?t.clientX:t.touches?.[0].clientX,a=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:a-(e?.top??0)}},$0=(t,e,n,r,a)=>{const c=e.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const m=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:a,position:d.getAttribute("data-handlepos"),x:(m.left-n.left)/r,y:(m.top-n.top)/r,...XT(d)}})};function xP({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:d,targetControlY:m}){const p=t*.125+a*.375+d*.375+n*.125,y=e*.125+c*.375+m*.375+r*.125,v=Math.abs(p-t),b=Math.abs(y-e);return[p,y,v,b]}function wy(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function V0({pos:t,x1:e,y1:n,x2:r,y2:a,c}){switch(t){case Je.Left:return[e-wy(e-r,c),n];case Je.Right:return[e+wy(r-e,c),n];case Je.Top:return[e,n-wy(n-a,c)];case Je.Bottom:return[e,n+wy(a-n,c)]}}function _P({sourceX:t,sourceY:e,sourcePosition:n=Je.Bottom,targetX:r,targetY:a,targetPosition:c=Je.Top,curvature:d=.25}){const[m,p]=V0({pos:n,x1:t,y1:e,x2:r,y2:a,c:d}),[y,v]=V0({pos:c,x1:r,y1:a,x2:t,y2:e,c:d}),[b,E,x,I]=xP({sourceX:t,sourceY:e,targetX:r,targetY:a,sourceControlX:m,sourceControlY:p,targetControlX:y,targetControlY:v});return[`M${t},${e} C${m},${p} ${y},${v} ${r},${a}`,b,E,x,I]}function kP({sourceX:t,sourceY:e,targetX:n,targetY:r}){const a=Math.abs(n-t)/2,c=n<t?n+a:n-a,d=Math.abs(r-e)/2,m=r<e?r+d:r-d;return[c,m,a,d]}function E$({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r,elevateOnSelect:a=!1}){if(r!==void 0)return r;const c=a&&n?1e3:0,d=Math.max(t.parentId?t.internals.z:0,e.parentId?e.internals.z:0);return c+d}function A$({sourceNode:t,targetNode:e,width:n,height:r,transform:a}){const c=OC(Mv(t),Mv(e));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-a[0]/a[2],y:-a[1]/a[2],width:n/a[2],height:r/a[2]};return vg(d,MC(c))>0}const T$=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,S$=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),x$=(t,e)=>{if(!t.source||!t.target)return e;let n;return pP(t)?n={...t}:n={...t,id:T$(t)},S$(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function IP({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[a,c,d,m]=kP({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,a,c,d,m]}const Y0={[Je.Left]:{x:-1,y:0},[Je.Right]:{x:1,y:0},[Je.Top]:{x:0,y:-1},[Je.Bottom]:{x:0,y:1}},_$=({source:t,sourcePosition:e=Je.Bottom,target:n})=>e===Je.Left||e===Je.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Q0=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function k$({source:t,sourcePosition:e=Je.Bottom,target:n,targetPosition:r=Je.Top,center:a,offset:c,stepPosition:d}){const m=Y0[e],p=Y0[r],y={x:t.x+m.x*c,y:t.y+m.y*c},v={x:n.x+p.x*c,y:n.y+p.y*c},b=_$({source:y,sourcePosition:e,target:v}),E=b.x!==0?"x":"y",x=b[E];let I=[],k,N;const M={x:0,y:0},j={x:0,y:0},[,,O,U]=kP({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(m[E]*p[E]===-1){E==="x"?(k=a.x??y.x+(v.x-y.x)*d,N=a.y??(y.y+v.y)/2):(k=a.x??(y.x+v.x)/2,N=a.y??y.y+(v.y-y.y)*d);const V=[{x:k,y:y.y},{x:k,y:v.y}],Q=[{x:y.x,y:N},{x:v.x,y:N}];m[E]===x?I=E==="x"?V:Q:I=E==="x"?Q:V}else{const V=[{x:y.x,y:v.y}],Q=[{x:v.x,y:y.y}];if(E==="x"?I=m.x===x?Q:V:I=m.y===x?V:Q,e===r){const te=Math.abs(t[E]-n[E]);if(te<=c){const re=Math.min(c-1,c-te);m[E]===x?M[E]=(y[E]>t[E]?-1:1)*re:j[E]=(v[E]>n[E]?-1:1)*re}}if(e!==r){const te=E==="x"?"y":"x",re=m[E]===p[te],G=y[te]>v[te],J=y[te]<v[te];(m[E]===1&&(!re&&G||re&&J)||m[E]!==1&&(!re&&J||re&&G))&&(I=E==="x"?V:Q)}const Y={x:y.x+M.x,y:y.y+M.y},ee={x:v.x+j.x,y:v.y+j.y},se=Math.max(Math.abs(Y.x-I[0].x),Math.abs(ee.x-I[0].x)),ce=Math.max(Math.abs(Y.y-I[0].y),Math.abs(ee.y-I[0].y));se>=ce?(k=(Y.x+ee.x)/2,N=I[0].y):(k=I[0].x,N=(Y.y+ee.y)/2)}return[[t,{x:y.x+M.x,y:y.y+M.y},...I,{x:v.x+j.x,y:v.y+j.y},n],k,N,O,U]}function I$(t,e,n,r){const a=Math.min(Q0(t,e)/2,Q0(e,n)/2,r),{x:c,y:d}=e;if(t.x===c&&c===n.x||t.y===d&&d===n.y)return`L${c} ${d}`;if(t.y===d){const y=t.x<n.x?-1:1,v=t.y<n.y?1:-1;return`L ${c+a*y},${d}Q ${c},${d} ${c},${d+a*v}`}const m=t.x<n.x?1:-1,p=t.y<n.y?-1:1;return`L ${c},${d+a*p}Q ${c},${d} ${c+a*m},${d}`}function DE({sourceX:t,sourceY:e,sourcePosition:n=Je.Bottom,targetX:r,targetY:a,targetPosition:c=Je.Top,borderRadius:d=5,centerX:m,centerY:p,offset:y=20,stepPosition:v=.5}){const[b,E,x,I,k]=k$({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:a},targetPosition:c,center:{x:m,y:p},offset:y,stepPosition:v});return[b.reduce((M,j,O)=>{let U="";return O>0&&O<b.length-1?U=I$(b[O-1],j,b[O+1],d):U=`${O===0?"M":"L"}${j.x} ${j.y}`,M+=U,M},""),E,x,I,k]}function W0(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function R$(t){const{sourceNode:e,targetNode:n}=t;if(!W0(e)||!W0(n))return null;const r=e.internals.handleBounds||X0(e.handles),a=n.internals.handleBounds||X0(n.handles),c=J0(r?.source??[],t.sourceHandle),d=J0(t.connectionMode===Gh.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),t.targetHandle);if(!c||!d)return t.onError?.("008",Ws.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const m=c?.position||Je.Bottom,p=d?.position||Je.Top,y=wg(e,c,m),v=wg(n,d,p);return{sourceX:y.x,sourceY:y.y,targetX:v.x,targetY:v.y,sourcePosition:m,targetPosition:p}}function X0(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function wg(t,e,n=Je.Left,r=!1){const a=(e?.x??0)+t.internals.positionAbsolute.x,c=(e?.y??0)+t.internals.positionAbsolute.y,{width:d,height:m}=e??Ja(t);if(r)return{x:a+d/2,y:c+m/2};switch(e?.position??n){case Je.Top:return{x:a+d/2,y:c};case Je.Right:return{x:a+d,y:c+m/2};case Je.Bottom:return{x:a+d/2,y:c+m};case Je.Left:return{x:a,y:c+m/2}}}function J0(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function LE(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function N$(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:a}){const c=new Set;return t.reduce((d,m)=>([m.markerStart||r,m.markerEnd||a].forEach(p=>{if(p&&typeof p=="object"){const y=LE(p,e);c.has(y)||(d.push({id:y,color:p.color||n,...p}),c.add(y))}}),d),[]).sort((d,m)=>d.id.localeCompare(m.id))}const JT={nodeOrigin:[0,0],nodeExtent:pg,elevateNodesOnSelect:!0,defaults:{}},O$={...JT,checkEquality:!0};function ZT(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function M$(t,e,n){const r=ZT(JT,n);for(const a of t.values())if(a.parentId)eS(a,t,e,r);else{const c=Mg(a,r.nodeOrigin),d=Vh(a.extent)?a.extent:r.nodeExtent,m=Wu(c,d,Ja(a));a.internals.positionAbsolute=m}}function UE(t,e,n,r){const a=ZT(O$,r);let c=t.length>0;const d=new Map(e),m=a?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const p of t){let y=d.get(p.id);if(a.checkEquality&&p===y?.internals.userNode)e.set(p.id,y);else{const v=Mg(p,a.nodeOrigin),b=Vh(p.extent)?p.extent:a.nodeExtent,E=Wu(v,b,Ja(p));y={...a.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:E,handleBounds:p.measured?y?.internals.handleBounds:void 0,z:RP(p,m),userNode:p}},e.set(p.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(c=!1),p.parentId&&eS(y,e,n,r)}return c}function P$(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function eS(t,e,n,r){const{elevateNodesOnSelect:a,nodeOrigin:c,nodeExtent:d}=ZT(JT,r),m=t.parentId,p=e.get(m);if(!p){console.warn(`Parent node ${m} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}P$(t,n);const y=a?1e3:0,{x:v,y:b,z:E}=D$(t,p,c,d,y),{positionAbsolute:x}=t.internals,I=v!==x.x||b!==x.y;(I||E!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:I?{x:v,y:b}:x,z:E}})}function RP(t,e){return(es(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function D$(t,e,n,r,a){const{x:c,y:d}=e.internals.positionAbsolute,m=Ja(t),p=Mg(t,n),y=Vh(t.extent)?Wu(p,t.extent,m):p;let v=Wu({x:c+y.x,y:d+y.y},r,m);t.extent==="parent"&&(v=vP(v,m,e));const b=RP(t,a),E=e.internals.z??0;return{x:v.x,y:v.y,z:E>=b?E+1:b}}function tS(t,e,n,r=[0,0]){const a=[],c=new Map;for(const d of t){const m=e.get(d.parentId);if(!m)continue;const p=c.get(d.parentId)?.expandedRect??$h(m),y=wP(p,d.rect);c.set(d.parentId,{expandedRect:y,parent:m})}return c.size>0&&c.forEach(({expandedRect:d,parent:m},p)=>{const y=m.internals.positionAbsolute,v=Ja(m),b=m.origin??r,E=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,x=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,I=Math.max(v.width,Math.round(d.width)),k=Math.max(v.height,Math.round(d.height)),N=(I-v.width)*b[0],M=(k-v.height)*b[1];(E>0||x>0||N||M)&&(a.push({id:p,type:"position",position:{x:m.position.x-E+N,y:m.position.y-x+M}}),n.get(p)?.forEach(j=>{t.some(O=>O.id===j.id)||a.push({id:j.id,type:"position",position:{x:j.position.x+E,y:j.position.y+x}})})),(v.width<d.width||v.height<d.height||E||x)&&a.push({id:p,type:"dimensions",setAttributes:!0,dimensions:{width:I+(E?b[0]*E-N:0),height:k+(x?b[1]*x-M:0)}})}),a}function L$(t,e,n,r,a,c){const d=r?.querySelector(".xyflow__viewport");let m=!1;if(!d)return{changes:[],updatedInternals:m};const p=[],y=window.getComputedStyle(d),{m22:v}=new window.DOMMatrixReadOnly(y.transform),b=[];for(const E of t.values()){const x=e.get(E.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),m=!0;continue}const I=XT(E.nodeElement),k=x.measured.width!==I.width||x.measured.height!==I.height;if(!!(I.width&&I.height&&(k||!x.internals.handleBounds||E.force))){const M=E.nodeElement.getBoundingClientRect(),j=Vh(x.extent)?x.extent:c;let{positionAbsolute:O}=x.internals;x.parentId&&x.extent==="parent"?O=vP(O,I,e.get(x.parentId)):j&&(O=Wu(O,j,I));const U={...x,measured:I,internals:{...x.internals,positionAbsolute:O,handleBounds:{source:$0("source",E.nodeElement,M,v,x.id),target:$0("target",E.nodeElement,M,v,x.id)}}};e.set(x.id,U),x.parentId&&eS(U,e,n,{nodeOrigin:a}),m=!0,k&&(p.push({id:x.id,type:"dimensions",dimensions:I}),x.expandParent&&x.parentId&&b.push({id:x.id,parentId:x.parentId,rect:$h(U,a)}))}}if(b.length>0){const E=tS(b,e,n,a);p.push(...E)}return{changes:p,updatedInternals:m}}async function U$({delta:t,panZoom:e,transform:n,translateExtent:r,width:a,height:c}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const d=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[a,c]],r),m=!!d&&(d.x!==n[0]||d.y!==n[1]||d.k!==n[2]);return Promise.resolve(m)}function Z0(t,e,n,r,a,c){let d=a;const m=r.get(d)||new Map;r.set(d,m.set(n,e)),d=`${a}-${t}`;const p=r.get(d)||new Map;if(r.set(d,p.set(n,e)),c){d=`${a}-${t}-${c}`;const y=r.get(d)||new Map;r.set(d,y.set(n,e))}}function NP(t,e,n){t.clear(),e.clear();for(const r of n){const{source:a,target:c,sourceHandle:d=null,targetHandle:m=null}=r,p={edgeId:r.id,source:a,target:c,sourceHandle:d,targetHandle:m},y=`${a}-${d}--${c}-${m}`,v=`${c}-${m}--${a}-${d}`;Z0("source",p,v,t,a,d),Z0("target",p,y,t,c,m),e.set(r.id,r)}}function OP(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:OP(n,e):!1}function e_(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function j$(t,e,n,r){const a=new Map;for(const[c,d]of t)if((d.selected||d.id===r)&&(!d.parentId||!OP(d,t))&&(d.draggable||e&&typeof d.draggable>"u")){const m=t.get(c);m&&a.set(c,{id:c,position:m.position||{x:0,y:0},distance:{x:n.x-m.internals.positionAbsolute.x,y:n.y-m.internals.positionAbsolute.y},extent:m.extent,parentId:m.parentId,origin:m.origin,expandParent:m.expandParent,internals:{positionAbsolute:m.internals.positionAbsolute||{x:0,y:0}},measured:{width:m.measured.width??0,height:m.measured.height??0}})}return a}function Rb({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const a=[];for(const[d,m]of e){const p=n.get(d)?.internals.userNode;p&&a.push({...p,position:m.position,dragging:r})}if(!t)return[a[0],a];const c=n.get(t)?.internals.userNode;return[c?{...c,position:e.get(t)?.position||c.position,dragging:r}:a[0],a]}function H$({dragItems:t,snapGrid:e,x:n,y:r}){const a=t.values().next().value;if(!a)return null;const c={x:n-a.distance.x,y:r-a.distance.y},d=Dg(c,e);return{x:d.x-c.x,y:d.y-c.y}}function B$({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:a}){let c={x:null,y:null},d=0,m=new Map,p=!1,y={x:0,y:0},v=null,b=!1,E=null,x=!1,I=!1,k=null;function N({noDragClassName:j,handleSelector:O,domNode:U,isSelectable:H,nodeId:V,nodeClickDistance:Q=0}){E=Po(U);function Y({x:te,y:re}){const{nodeLookup:G,nodeExtent:J,snapGrid:D,snapToGrid:F,nodeOrigin:$,onNodeDrag:X,onSelectionDrag:z,onError:W,updateNodePositions:ue}=e();c={x:te,y:re};let de=!1;const ge=m.size>1,Ne=ge&&J?PE(Pg(m)):null,Ee=ge&&F?H$({dragItems:m,snapGrid:D,x:te,y:re}):null;for(const[le,Ce]of m){if(!G.has(le))continue;let De={x:te-Ce.distance.x,y:re-Ce.distance.y};F&&(De=Ee?{x:Math.round(De.x+Ee.x),y:Math.round(De.y+Ee.y)}:Dg(De,D));let we=null;if(ge&&J&&!Ce.extent&&Ne){const{positionAbsolute:Le}=Ce.internals,fe=Le.x-Ne.x+J[0][0],Me=Le.x+Ce.measured.width-Ne.x2+J[1][0],He=Le.y-Ne.y+J[0][1],Ke=Le.y+Ce.measured.height-Ne.y2+J[1][1];we=[[fe,He],[Me,Ke]]}const{position:be,positionAbsolute:Oe}=yP({nodeId:le,nextPosition:De,nodeLookup:G,nodeExtent:we||J,nodeOrigin:$,onError:W});de=de||Ce.position.x!==be.x||Ce.position.y!==be.y,Ce.position=be,Ce.internals.positionAbsolute=Oe}if(I=I||de,!!de&&(ue(m,!0),k&&(r||X||!V&&z))){const[le,Ce]=Rb({nodeId:V,dragItems:m,nodeLookup:G});r?.(k,m,le,Ce),X?.(k,le,Ce),V||z?.(k,Ce)}}async function ee(){if(!v)return;const{transform:te,panBy:re,autoPanSpeed:G,autoPanOnNodeDrag:J}=e();if(!J){p=!1,cancelAnimationFrame(d);return}const[D,F]=CP(y,v,G);(D!==0||F!==0)&&(c.x=(c.x??0)-D/te[2],c.y=(c.y??0)-F/te[2],await re({x:D,y:F})&&Y(c)),d=requestAnimationFrame(ee)}function se(te){const{nodeLookup:re,multiSelectionActive:G,nodesDraggable:J,transform:D,snapGrid:F,snapToGrid:$,selectNodesOnDrag:X,onNodeDragStart:z,onSelectionDragStart:W,unselectNodesAndEdges:ue}=e();b=!0,(!X||!H)&&!G&&V&&(re.get(V)?.selected||ue()),H&&X&&V&&t?.(V);const de=Jm(te.sourceEvent,{transform:D,snapGrid:F,snapToGrid:$,containerBounds:v});if(c=de,m=j$(re,J,de,V),m.size>0&&(n||z||!V&&W)){const[ge,Ne]=Rb({nodeId:V,dragItems:m,nodeLookup:re});n?.(te.sourceEvent,m,ge,Ne),z?.(te.sourceEvent,ge,Ne),V||W?.(te.sourceEvent,Ne)}}const ce=WM().clickDistance(Q).on("start",te=>{const{domNode:re,nodeDragThreshold:G,transform:J,snapGrid:D,snapToGrid:F}=e();v=re?.getBoundingClientRect()||null,x=!1,I=!1,k=te.sourceEvent,G===0&&se(te),c=Jm(te.sourceEvent,{transform:J,snapGrid:D,snapToGrid:F,containerBounds:v}),y=Gs(te.sourceEvent,v)}).on("drag",te=>{const{autoPanOnNodeDrag:re,transform:G,snapGrid:J,snapToGrid:D,nodeDragThreshold:F,nodeLookup:$}=e(),X=Jm(te.sourceEvent,{transform:G,snapGrid:J,snapToGrid:D,containerBounds:v});if(k=te.sourceEvent,(te.sourceEvent.type==="touchmove"&&te.sourceEvent.touches.length>1||V&&!$.has(V))&&(x=!0),!x){if(!p&&re&&b&&(p=!0,ee()),!b){const z=X.xSnapped-(c.x??0),W=X.ySnapped-(c.y??0);Math.sqrt(z*z+W*W)>F&&se(te)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&m&&b&&(y=Gs(te.sourceEvent,v),Y(X))}}).on("end",te=>{if(!(!b||x)&&(p=!1,b=!1,cancelAnimationFrame(d),m.size>0)){const{nodeLookup:re,updateNodePositions:G,onNodeDragStop:J,onSelectionDragStop:D}=e();if(I&&(G(m,!1),I=!1),a||J||!V&&D){const[F,$]=Rb({nodeId:V,dragItems:m,nodeLookup:re,dragging:!1});a?.(te.sourceEvent,m,F,$),J?.(te.sourceEvent,F,$),V||D?.(te.sourceEvent,$)}}}).filter(te=>{const re=te.target;return!te.button&&(!j||!e_(re,`.${j}`,U))&&(!O||e_(re,O,U))});E.call(ce)}function M(){E?.on(".drag",null)}return{update:N,destroy:M}}function z$(t,e,n){const r=[],a={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const c of e.values())vg(a,$h(c))>0&&r.push(c);return r}const F$=250;function K$(t,e,n,r){let a=[],c=1/0;const d=z$(t,n,e+F$);for(const m of d){const p=[...m.internals.handleBounds?.source??[],...m.internals.handleBounds?.target??[]];for(const y of p){if(r.nodeId===y.nodeId&&r.type===y.type&&r.id===y.id)continue;const{x:v,y:b}=wg(m,y,y.position,!0),E=Math.sqrt(Math.pow(v-t.x,2)+Math.pow(b-t.y,2));E>e||(E<c?(a=[{...y,x:v,y:b}],c=E):E===c&&a.push({...y,x:v,y:b}))}}if(!a.length)return null;if(a.length>1){const m=r.type==="source"?"target":"source";return a.find(p=>p.type===m)??a[0]}return a[0]}function MP(t,e,n,r,a,c=!1){const d=r.get(t);if(!d)return null;const m=a==="strict"?d.internals.handleBounds?.[e]:[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]],p=(n?m?.find(y=>y.id===n):m?.[0])??null;return p&&c?{...p,...wg(d,p,p.position,!0)}:p}function PP(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function G$(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const DP=()=>!0;function q$(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:a,edgeUpdaterType:c,isTarget:d,domNode:m,nodeLookup:p,lib:y,autoPanOnConnect:v,flowId:b,panBy:E,cancelConnection:x,onConnectStart:I,onConnect:k,onConnectEnd:N,isValidConnection:M=DP,onReconnectEnd:j,updateConnection:O,getTransform:U,getFromHandle:H,autoPanSpeed:V,dragThreshold:Q=1,handleDomNode:Y}){const ee=AP(t.target);let se=0,ce;const{x:te,y:re}=Gs(t),G=PP(c,Y),J=m?.getBoundingClientRect();let D=!1;if(!J||!G)return;const F=MP(a,G,r,p,e);if(!F)return;let $=Gs(t,J),X=!1,z=null,W=!1,ue=null;function de(){if(!v||!J)return;const[be,Oe]=CP($,J,V);E({x:be,y:Oe}),se=requestAnimationFrame(de)}const ge={...F,nodeId:a,type:G,position:F.position},Ne=p.get(a);let le={inProgress:!0,isValid:null,from:wg(Ne,ge,Je.Left,!0),fromHandle:ge,fromPosition:ge.position,fromNode:Ne,to:$,toHandle:null,toPosition:F0[ge.position],toNode:null};function Ce(){D=!0,O(le),I?.(t,{nodeId:a,handleId:r,handleType:G})}Q===0&&Ce();function De(be){if(!D){const{x:Me,y:He}=Gs(be),Ke=Me-te,ze=He-re;if(!(Ke*Ke+ze*ze>Q*Q))return;Ce()}if(!H()||!ge){we(be);return}const Oe=U();$=Gs(be,J),ce=K$(Lg($,Oe,!1,[1,1]),n,p,ge),X||(de(),X=!0);const Le=LP(be,{handle:ce,connectionMode:e,fromNodeId:a,fromHandleId:r,fromType:d?"target":"source",isValidConnection:M,doc:ee,lib:y,flowId:b,nodeLookup:p});ue=Le.handleDomNode,z=Le.connection,W=G$(!!ce,Le.isValid);const fe={...le,isValid:W,to:Le.toHandle&&W?Pv({x:Le.toHandle.x,y:Le.toHandle.y},Oe):$,toHandle:Le.toHandle,toPosition:W&&Le.toHandle?Le.toHandle.position:F0[ge.position],toNode:Le.toHandle?p.get(Le.toHandle.nodeId):null};W&&ce&&le.toHandle&&fe.toHandle&&le.toHandle.type===fe.toHandle.type&&le.toHandle.nodeId===fe.toHandle.nodeId&&le.toHandle.id===fe.toHandle.id&&le.to.x===fe.to.x&&le.to.y===fe.to.y||(O(fe),le=fe)}function we(be){if(D){(ce||ue)&&z&&W&&k?.(z);const{inProgress:Oe,...Le}=le,fe={...Le,toPosition:le.toHandle?le.toPosition:null};N?.(be,fe),c&&j?.(be,fe)}x(),cancelAnimationFrame(se),X=!1,W=!1,z=null,ue=null,ee.removeEventListener("mousemove",De),ee.removeEventListener("mouseup",we),ee.removeEventListener("touchmove",De),ee.removeEventListener("touchend",we)}ee.addEventListener("mousemove",De),ee.addEventListener("mouseup",we),ee.addEventListener("touchmove",De),ee.addEventListener("touchend",we)}function LP(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:a,fromType:c,doc:d,lib:m,flowId:p,isValidConnection:y=DP,nodeLookup:v}){const b=c==="target",E=e?d.querySelector(`.${m}-flow__handle[data-id="${p}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:I}=Gs(t),k=d.elementFromPoint(x,I),N=k?.classList.contains(`${m}-flow__handle`)?k:E,M={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const j=PP(void 0,N),O=N.getAttribute("data-nodeid"),U=N.getAttribute("data-handleid"),H=N.classList.contains("connectable"),V=N.classList.contains("connectableend");if(!O||!j)return M;const Q={source:b?O:r,sourceHandle:b?U:a,target:b?r:O,targetHandle:b?a:U};M.connection=Q;const ee=H&&V&&(n===Gh.Strict?b&&j==="source"||!b&&j==="target":O!==r||U!==a);M.isValid=ee&&y(Q),M.toHandle=MP(O,j,U,v,n,!0)}return M}const jE={onPointerDown:q$,isValid:LP};function $$({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const a=Po(t);function c({translateExtent:m,width:p,height:y,zoomStep:v=1,pannable:b=!0,zoomable:E=!0,inversePan:x=!1}){const I=O=>{if(O.sourceEvent.type!=="wheel"||!e)return;const U=n(),H=O.sourceEvent.ctrlKey&&Cg()?10:1,V=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*v,Q=U[2]*Math.pow(2,V*H);e.scaleTo(Q)};let k=[0,0];const N=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(k=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},M=O=>{const U=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const H=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],V=[H[0]-k[0],H[1]-k[1]];k=H;const Q=r()*Math.max(U[2],Math.log(U[2]))*(x?-1:1),Y={x:U[0]-V[0]*Q,y:U[1]-V[1]*Q},ee=[[0,0],[p,y]];e.setViewportConstrained({x:Y.x,y:Y.y,zoom:U[2]},ee,m)},j=dP().on("start",N).on("zoom",b?M:null).on("zoom.wheel",E?I:null);a.call(j,{})}function d(){a.on("zoom",null)}return{update:c,destroy:d,pointer:Xi}}const V$=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,PC=t=>({x:t.x,y:t.y,zoom:t.k}),Nb=({x:t,y:e,zoom:n})=>NC.translate(t,e).scale(n),Eh=(t,e)=>t.target.closest(`.${e}`),UP=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Y$=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Ob=(t,e=0,n=Y$,r=()=>{})=>{const a=typeof e=="number"&&e>0;return a||r(),a?t.transition().duration(e).ease(n).on("end",r):t},jP=t=>{const e=t.ctrlKey&&Cg()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Q$({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:a,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:m,onPanZoom:p,onPanZoomEnd:y}){return v=>{if(Eh(v,e))return!1;v.preventDefault(),v.stopImmediatePropagation();const b=n.property("__zoom").k||1;if(v.ctrlKey&&d){const N=Xi(v),M=jP(v),j=b*Math.pow(2,M);r.scaleTo(n,j,N,v);return}const E=v.deltaMode===1?20:1;let x=a===Ru.Vertical?0:v.deltaX*E,I=a===Ru.Horizontal?0:v.deltaY*E;!Cg()&&v.shiftKey&&a!==Ru.Vertical&&(x=v.deltaY*E,I=0),r.translateBy(n,-(x/b)*c,-(I/b)*c,{internal:!0});const k=PC(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,m?.(v,k)),t.isPanScrolling&&(p?.(v,k),t.panScrollTimeout=setTimeout(()=>{y?.(v,k),t.isPanScrolling=!1},150))}}function W$({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,a){const c=r.type==="wheel",d=!e&&c&&!r.ctrlKey,m=Eh(r,t);if(r.ctrlKey&&c&&m&&r.preventDefault(),d||m)return null;r.preventDefault(),n.call(this,r,a)}}function X$({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const a=PC(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=a,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,a)}}function J$({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:a}){return c=>{t.usedRightMouseButton=!!(n&&UP(e,t.mouseButton??0)),c.sourceEvent?.sync||r([c.transform.x,c.transform.y,c.transform.k]),a&&!c.sourceEvent?.internal&&a?.(c.sourceEvent,PC(c.transform))}}function Z$({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:a,onPaneContextMenu:c}){return d=>{if(!d.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,c&&UP(e,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,r(!1),a&&V$(t.prevViewport,d.transform))){const m=PC(d.transform);t.prevViewport=m,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{a?.(d.sourceEvent,m)},n?150:0)}}}function e9({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:a,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:m,noPanClassName:p,lib:y}){return v=>{const b=t||e,E=n&&v.ctrlKey;if(v.button===1&&v.type==="mousedown"&&(Eh(v,`${y}-flow__node`)||Eh(v,`${y}-flow__edge`)))return!0;if(!r&&!b&&!a&&!c&&!n||d||Eh(v,m)&&v.type==="wheel"||Eh(v,p)&&(v.type!=="wheel"||a&&v.type==="wheel"&&!t)||!n&&v.ctrlKey&&v.type==="wheel")return!1;if(!n&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!b&&!a&&!E&&v.type==="wheel"||!r&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(r)&&!r.includes(v.button)&&v.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||v.type==="wheel")&&x}}function t9({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:a,viewport:c,onPanZoom:d,onPanZoomStart:m,onPanZoomEnd:p,onDraggingChange:y}){const v={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},b=t.getBoundingClientRect(),E=dP().clickDistance(!es(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(a),x=Po(t).call(E);O({x:c.x,y:c.y,zoom:qh(c.zoom,e,n)},[[0,0],[b.width,b.height]],a);const I=x.on("wheel.zoom"),k=x.on("dblclick.zoom");E.wheelDelta(jP);function N(te,re){return x?new Promise(G=>{E?.interpolate(re?.interpolate==="linear"?Xm:Dy).transform(Ob(x,re?.duration,re?.ease,()=>G(!0)),te)}):Promise.resolve(!1)}function M({noWheelClassName:te,noPanClassName:re,onPaneContextMenu:G,userSelectionActive:J,panOnScroll:D,panOnDrag:F,panOnScrollMode:$,panOnScrollSpeed:X,preventScrolling:z,zoomOnPinch:W,zoomOnScroll:ue,zoomOnDoubleClick:de,zoomActivationKeyPressed:ge,lib:Ne,onTransformChange:Ee}){J&&!v.isZoomingOrPanning&&j();const Ce=D&&!ge&&!J?Q$({zoomPanValues:v,noWheelClassName:te,d3Selection:x,d3Zoom:E,panOnScrollMode:$,panOnScrollSpeed:X,zoomOnPinch:W,onPanZoomStart:m,onPanZoom:d,onPanZoomEnd:p}):W$({noWheelClassName:te,preventScrolling:z,d3ZoomHandler:I});if(x.on("wheel.zoom",Ce,{passive:!1}),!J){const we=X$({zoomPanValues:v,onDraggingChange:y,onPanZoomStart:m});E.on("start",we);const be=J$({zoomPanValues:v,panOnDrag:F,onPaneContextMenu:!!G,onPanZoom:d,onTransformChange:Ee});E.on("zoom",be);const Oe=Z$({zoomPanValues:v,panOnDrag:F,panOnScroll:D,onPaneContextMenu:G,onPanZoomEnd:p,onDraggingChange:y});E.on("end",Oe)}const De=e9({zoomActivationKeyPressed:ge,panOnDrag:F,zoomOnScroll:ue,panOnScroll:D,zoomOnDoubleClick:de,zoomOnPinch:W,userSelectionActive:J,noPanClassName:re,noWheelClassName:te,lib:Ne});E.filter(De),de?x.on("dblclick.zoom",k):x.on("dblclick.zoom",null)}function j(){E.on("zoom",null)}async function O(te,re,G){const J=Nb(te),D=E?.constrain()(J,re,G);return D&&await N(D),new Promise(F=>F(D))}async function U(te,re){const G=Nb(te);return await N(G,re),new Promise(J=>J(G))}function H(te){if(x){const re=Nb(te),G=x.property("__zoom");(G.k!==te.zoom||G.x!==te.x||G.y!==te.y)&&E?.transform(x,re,null,{sync:!0})}}function V(){const te=x?uP(x.node()):{x:0,y:0,k:1};return{x:te.x,y:te.y,zoom:te.k}}function Q(te,re){return x?new Promise(G=>{E?.interpolate(re?.interpolate==="linear"?Xm:Dy).scaleTo(Ob(x,re?.duration,re?.ease,()=>G(!0)),te)}):Promise.resolve(!1)}function Y(te,re){return x?new Promise(G=>{E?.interpolate(re?.interpolate==="linear"?Xm:Dy).scaleBy(Ob(x,re?.duration,re?.ease,()=>G(!0)),te)}):Promise.resolve(!1)}function ee(te){E?.scaleExtent(te)}function se(te){E?.translateExtent(te)}function ce(te){const re=!es(te)||te<0?0:te;E?.clickDistance(re)}return{update:M,destroy:j,setViewport:U,setViewportConstrained:O,getViewport:V,scaleTo:Q,scaleBy:Y,setScaleExtent:ee,setTranslateExtent:se,syncViewport:H,setClickDistance:ce}}var Yh;(function(t){t.Line="line",t.Handle="handle"})(Yh||(Yh={}));function n9({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:a,affectsY:c}){const d=t-e,m=n-r,p=[d>0?1:d<0?-1:0,m>0?1:m<0?-1:0];return d&&a&&(p[0]=p[0]*-1),m&&c&&(p[1]=p[1]*-1),p}function r9(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),a=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:a}}function rl(t,e){return Math.max(0,e-t)}function ol(t,e){return Math.max(0,t-e)}function by(t,e,n){return Math.max(0,e-t,t-n)}function t_(t,e){return t?!e:e}function o9(t,e,n,r,a,c,d,m){let{affectsX:p,affectsY:y}=e;const{isHorizontal:v,isVertical:b}=e,E=v&&b,{xSnapped:x,ySnapped:I}=n,{minWidth:k,maxWidth:N,minHeight:M,maxHeight:j}=r,{x:O,y:U,width:H,height:V,aspectRatio:Q}=t;let Y=Math.floor(v?x-t.pointerX:0),ee=Math.floor(b?I-t.pointerY:0);const se=H+(p?-Y:Y),ce=V+(y?-ee:ee),te=-c[0]*H,re=-c[1]*V;let G=by(se,k,N),J=by(ce,M,j);if(d){let $=0,X=0;p&&Y<0?$=rl(O+Y+te,d[0][0]):!p&&Y>0&&($=ol(O+se+te,d[1][0])),y&&ee<0?X=rl(U+ee+re,d[0][1]):!y&&ee>0&&(X=ol(U+ce+re,d[1][1])),G=Math.max(G,$),J=Math.max(J,X)}if(m){let $=0,X=0;p&&Y>0?$=ol(O+Y,m[0][0]):!p&&Y<0&&($=rl(O+se,m[1][0])),y&&ee>0?X=ol(U+ee,m[0][1]):!y&&ee<0&&(X=rl(U+ce,m[1][1])),G=Math.max(G,$),J=Math.max(J,X)}if(a){if(v){const $=by(se/Q,M,j)*Q;if(G=Math.max(G,$),d){let X=0;!p&&!y||p&&!y&&E?X=ol(U+re+se/Q,d[1][1])*Q:X=rl(U+re+(p?Y:-Y)/Q,d[0][1])*Q,G=Math.max(G,X)}if(m){let X=0;!p&&!y||p&&!y&&E?X=rl(U+se/Q,m[1][1])*Q:X=ol(U+(p?Y:-Y)/Q,m[0][1])*Q,G=Math.max(G,X)}}if(b){const $=by(ce*Q,k,N)/Q;if(J=Math.max(J,$),d){let X=0;!p&&!y||y&&!p&&E?X=ol(O+ce*Q+te,d[1][0])/Q:X=rl(O+(y?ee:-ee)*Q+te,d[0][0])/Q,J=Math.max(J,X)}if(m){let X=0;!p&&!y||y&&!p&&E?X=rl(O+ce*Q,m[1][0])/Q:X=ol(O+(y?ee:-ee)*Q,m[0][0])/Q,J=Math.max(J,X)}}}ee=ee+(ee<0?J:-J),Y=Y+(Y<0?G:-G),a&&(E?se>ce*Q?ee=(t_(p,y)?-Y:Y)/Q:Y=(t_(p,y)?-ee:ee)*Q:v?(ee=Y/Q,y=p):(Y=ee*Q,p=y));const D=p?O+Y:O,F=y?U+ee:U;return{width:H+(p?-Y:Y),height:V+(y?-ee:ee),x:c[0]*Y*(p?-1:1)+D,y:c[1]*ee*(y?-1:1)+F}}const HP={width:0,height:0,x:0,y:0},i9={...HP,pointerX:0,pointerY:0,aspectRatio:1};function s9(t){return[[0,0],[t.measured.width,t.measured.height]]}function a9(t,e,n){const r=e.position.x+t.position.x,a=e.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,m=n[0]*c,p=n[1]*d;return[[r-m,a-p],[r+c-m,a+d-p]]}function c9({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:a}){const c=Po(t);function d({controlPosition:p,boundaries:y,keepAspectRatio:v,resizeDirection:b,onResizeStart:E,onResize:x,onResizeEnd:I,shouldResize:k}){let N={...HP},M={...i9};const j=r9(p);let O,U=null,H=[],V,Q,Y;const ee=WM().on("start",se=>{const{nodeLookup:ce,transform:te,snapGrid:re,snapToGrid:G,nodeOrigin:J,paneDomNode:D}=n();if(O=ce.get(e),!O)return;U=D?.getBoundingClientRect()??null;const{xSnapped:F,ySnapped:$}=Jm(se.sourceEvent,{transform:te,snapGrid:re,snapToGrid:G,containerBounds:U});N={width:O.measured.width??0,height:O.measured.height??0,x:O.position.x??0,y:O.position.y??0},M={...N,pointerX:F,pointerY:$,aspectRatio:N.width/N.height},V=void 0,O.parentId&&(O.extent==="parent"||O.expandParent)&&(V=ce.get(O.parentId),Q=V&&O.extent==="parent"?s9(V):void 0),H=[],Y=void 0;for(const[X,z]of ce)if(z.parentId===e&&(H.push({id:X,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const W=a9(z,O,z.origin??J);Y?Y=[[Math.min(W[0][0],Y[0][0]),Math.min(W[0][1],Y[0][1])],[Math.max(W[1][0],Y[1][0]),Math.max(W[1][1],Y[1][1])]]:Y=W}E?.(se,{...N})}).on("drag",se=>{const{transform:ce,snapGrid:te,snapToGrid:re,nodeOrigin:G}=n(),J=Jm(se.sourceEvent,{transform:ce,snapGrid:te,snapToGrid:re,containerBounds:U}),D=[];if(!O)return;const{x:F,y:$,width:X,height:z}=N,W={},ue=O.origin??G,{width:de,height:ge,x:Ne,y:Ee}=o9(M,j,J,y,v,ue,Q,Y),le=de!==X,Ce=ge!==z,De=Ne!==F&&le,we=Ee!==$&&Ce;if(!De&&!we&&!le&&!Ce)return;if((De||we||ue[0]===1||ue[1]===1)&&(W.x=De?Ne:N.x,W.y=we?Ee:N.y,N.x=W.x,N.y=W.y,H.length>0)){const fe=Ne-F,Me=Ee-$;for(const He of H)He.position={x:He.position.x-fe+ue[0]*(de-X),y:He.position.y-Me+ue[1]*(ge-z)},D.push(He)}if((le||Ce)&&(W.width=le&&(!b||b==="horizontal")?de:N.width,W.height=Ce&&(!b||b==="vertical")?ge:N.height,N.width=W.width,N.height=W.height),V&&O.expandParent){const fe=ue[0]*(W.width??0);W.x&&W.x<fe&&(N.x=fe,M.x=M.x-(W.x-fe));const Me=ue[1]*(W.height??0);W.y&&W.y<Me&&(N.y=Me,M.y=M.y-(W.y-Me))}const be=n9({width:N.width,prevWidth:X,height:N.height,prevHeight:z,affectsX:j.affectsX,affectsY:j.affectsY}),Oe={...N,direction:be};k?.(se,Oe)!==!1&&(x?.(se,Oe),r(W,D))}).on("end",se=>{I?.(se,{...N}),a?.({...N})});c.call(ee)}function m(){c.on(".drag",null)}return{update:d,destroy:m}}var Mb={exports:{}},Pb={},Db={exports:{}},Lb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function l9(){if(n_)return Lb;n_=1;var t=Eg();function e(b,E){return b===E&&(b!==0||1/b===1/E)||b!==b&&E!==E}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,a=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function m(b,E){var x=E(),I=r({inst:{value:x,getSnapshot:E}}),k=I[0].inst,N=I[1];return c(function(){k.value=x,k.getSnapshot=E,p(k)&&N({inst:k})},[b,x,E]),a(function(){return p(k)&&N({inst:k}),b(function(){p(k)&&N({inst:k})})},[b]),d(x),x}function p(b){var E=b.getSnapshot;b=b.value;try{var x=E();return!n(b,x)}catch{return!0}}function y(b,E){return E()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:m;return Lb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,Lb}var r_;function u9(){return r_||(r_=1,Db.exports=l9()),Db.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function d9(){if(o_)return Pb;o_=1;var t=Eg(),e=u9();function n(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var r=typeof Object.is=="function"?Object.is:n,a=e.useSyncExternalStore,c=t.useRef,d=t.useEffect,m=t.useMemo,p=t.useDebugValue;return Pb.useSyncExternalStoreWithSelector=function(y,v,b,E,x){var I=c(null);if(I.current===null){var k={hasValue:!1,value:null};I.current=k}else k=I.current;I=m(function(){function M(V){if(!j){if(j=!0,O=V,V=E(V),x!==void 0&&k.hasValue){var Q=k.value;if(x(Q,V))return U=Q}return U=V}if(Q=U,r(O,V))return Q;var Y=E(V);return x!==void 0&&x(Q,Y)?(O=V,Q):(O=V,U=Y)}var j=!1,O,U,H=b===void 0?null:b;return[function(){return M(v())},H===null?void 0:function(){return M(H())}]},[v,b,E,x]);var N=a(y,I[0],I[1]);return d(function(){k.hasValue=!0,k.value=N},[N]),p(N),N},Pb}var i_;function h9(){return i_||(i_=1,Mb.exports=d9()),Mb.exports}var f9=h9();const m9=KE(f9),g9={},s_=t=>{let e;const n=new Set,r=(v,b)=>{const E=typeof v=="function"?v(e):v;if(!Object.is(E,e)){const x=e;e=b??(typeof E!="object"||E===null)?E:Object.assign({},e,E),n.forEach(I=>I(e,x))}},a=()=>e,p={setState:r,getState:a,getInitialState:()=>y,subscribe:v=>(n.add(v),()=>n.delete(v)),destroy:()=>{(g9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},y=e=t(r,a,p);return p},p9=t=>t?s_(t):s_,{useDebugValue:y9}=js,{useSyncExternalStoreWithSelector:v9}=m9,C9=t=>t;function BP(t,e=C9,n){const r=v9(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return y9(r),r}const a_=(t,e)=>{const n=p9(t),r=(a,c=e)=>BP(n,a,c);return Object.assign(r,n),r},w9=(t,e)=>t?a_(t,e):a_;function xn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,a]of t)if(!Object.is(a,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const DC=_.createContext(null),b9=DC.Provider,zP=Ws.error001();function _t(t,e){const n=_.useContext(DC);if(n===null)throw new Error(zP);return BP(n,t,e)}function vn(){const t=_.useContext(DC);if(t===null)throw new Error(zP);return _.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const c_={display:"none"},E9={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},FP="react-flow__node-desc",KP="react-flow__edge-desc",A9="react-flow__aria-live",T9=t=>t.ariaLiveMessage,S9=t=>t.ariaLabelConfig;function x9({rfId:t}){const e=_t(T9);return h.jsx("div",{id:`${A9}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:E9,children:e})}function _9({rfId:t,disableKeyboardA11y:e}){const n=_t(S9);return h.jsxs(h.Fragment,{children:[h.jsx("div",{id:`${FP}-${t}`,style:c_,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),h.jsx("div",{id:`${KP}-${t}`,style:c_,children:n["edge.a11yDescription.default"]}),!e&&h.jsx(x9,{rfId:t})]})}const LC=_.forwardRef(({position:t="top-left",children:e,className:n,style:r,...a},c)=>{const d=`${t}`.split("-");return h.jsx("div",{className:zn(["react-flow__panel",n,...d]),style:r,ref:c,...a,children:e})});LC.displayName="Panel";function k9({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:h.jsx(LC,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const I9=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},Ey=t=>t.id;function R9(t,e){return xn(t.selectedNodes.map(Ey),e.selectedNodes.map(Ey))&&xn(t.selectedEdges.map(Ey),e.selectedEdges.map(Ey))}function N9({onSelectionChange:t}){const e=vn(),{selectedNodes:n,selectedEdges:r}=_t(I9,R9);return _.useEffect(()=>{const a={nodes:n,edges:r};t?.(a),e.getState().onSelectionChangeHandlers.forEach(c=>c(a))},[n,r,t]),null}const O9=t=>!!t.onSelectionChangeHandlers;function M9({onSelectionChange:t}){const e=_t(O9);return t||e?h.jsx(N9,{onSelectionChange:t}):null}const GP=[0,0],P9={x:0,y:0,zoom:1},D9=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],l_=[...D9,"rfId"],L9=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),u_={translateExtent:pg,nodeOrigin:GP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function U9(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:a,setTranslateExtent:c,setNodeExtent:d,reset:m,setDefaultNodesAndEdges:p,setPaneClickDistance:y}=_t(L9,xn),v=vn();_.useEffect(()=>(p(t.defaultNodes,t.defaultEdges),()=>{b.current=u_,m()}),[]);const b=_.useRef(u_);return _.useEffect(()=>{for(const E of l_){const x=t[E],I=b.current[E];x!==I&&(typeof t[E]>"u"||(E==="nodes"?e(x):E==="edges"?n(x):E==="minZoom"?r(x):E==="maxZoom"?a(x):E==="translateExtent"?c(x):E==="nodeExtent"?d(x):E==="paneClickDistance"?y(x):E==="ariaLabelConfig"?v.setState({ariaLabelConfig:w$(x)}):E==="fitView"?v.setState({fitViewQueued:x}):E==="fitViewOptions"?v.setState({fitViewOptions:x}):v.setState({[E]:x})))}b.current=t},l_.map(E=>t[E])),null}function d_(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function j9(t){const[e,n]=_.useState(t==="system"?null:t);return _.useEffect(()=>{if(t!=="system"){n(t);return}const r=d_(),a=()=>n(r?.matches?"dark":"light");return a(),r?.addEventListener("change",a),()=>{r?.removeEventListener("change",a)}},[t]),e!==null?e:d_()?.matches?"dark":"light"}const h_=typeof document<"u"?document:null;function bg(t=null,e={target:h_,actInsideInputWithModifier:!0}){const[n,r]=_.useState(!1),a=_.useRef(!1),c=_.useRef(new Set([])),[d,m]=_.useMemo(()=>{if(t!==null){const y=(Array.isArray(t)?t:[t]).filter(b=>typeof b=="string").map(b=>b.replace("+",`
`).replace(`

`,`
+`).split(`
`)),v=y.reduce((b,E)=>b.concat(...E),[]);return[y,v]}return[[],[]]},[t]);return _.useEffect(()=>{const p=e?.target??h_,y=e?.actInsideInputWithModifier??!0;if(t!==null){const v=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!a.current||a.current&&!y)&&TP(x))return!1;const k=m_(x.code,m);if(c.current.add(x[k]),f_(d,c.current,!1)){const N=x.composedPath?.()?.[0]||x.target,M=N?.nodeName==="BUTTON"||N?.nodeName==="A";e.preventDefault!==!1&&(a.current||!M)&&x.preventDefault(),r(!0)}},b=x=>{const I=m_(x.code,m);f_(d,c.current,!0)?(r(!1),c.current.clear()):c.current.delete(x[I]),x.key==="Meta"&&c.current.clear(),a.current=!1},E=()=>{c.current.clear(),r(!1)};return p?.addEventListener("keydown",v),p?.addEventListener("keyup",b),window.addEventListener("blur",E),window.addEventListener("contextmenu",E),()=>{p?.removeEventListener("keydown",v),p?.removeEventListener("keyup",b),window.removeEventListener("blur",E),window.removeEventListener("contextmenu",E)}}},[t,r]),n}function f_(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(a=>e.has(a)))}function m_(t,e){return e.includes(t)?"code":"key"}const H9=()=>{const t=vn();return _.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,a,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:e.x??r,y:e.y??a,zoom:e.zoom??c},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:a,minZoom:c,maxZoom:d,panZoom:m}=t.getState(),p=WT(e,r,a,c,d,n?.padding??.1);return m?(await m.setViewport(p,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:a,snapToGrid:c,domNode:d}=t.getState();if(!d)return e;const{x:m,y:p}=d.getBoundingClientRect(),y={x:e.x-m,y:e.y-p},v=n.snapGrid??a,b=n.snapToGrid??c;return Lg(y,r,b,v)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:a,y:c}=r.getBoundingClientRect(),d=Pv(e,n);return{x:d.x+a,y:d.y+c}}}),[])};function qP(t,e){const n=[],r=new Map,a=[];for(const c of t)if(c.type==="add"){a.push(c);continue}else if(c.type==="remove"||c.type==="replace")r.set(c.id,[c]);else{const d=r.get(c.id);d?d.push(c):r.set(c.id,[c])}for(const c of e){const d=r.get(c.id);if(!d){n.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){n.push({...d[0].item});continue}const m={...c};for(const p of d)B9(p,m);n.push(m)}return a.length&&a.forEach(c=>{c.index!==void 0?n.splice(c.index,0,{...c.item}):n.push({...c.item})}),n}function B9(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function $P(t,e){return qP(t,e)}function VP(t,e){return qP(t,e)}function Su(t,e){return{id:t,type:"select",selected:e}}function Ah(t,e=new Set,n=!1){const r=[];for(const[a,c]of t){const d=e.has(a);!(c.selected===void 0&&!d)&&c.selected!==d&&(n&&(c.selected=d),r.push(Su(c.id,d)))}return r}function g_({items:t=[],lookup:e}){const n=[],r=new Map(t.map(a=>[a.id,a]));for(const[a,c]of t.entries()){const d=e.get(c.id),m=d?.internals?.userNode??d;m!==void 0&&m!==c&&n.push({id:c.id,item:c,type:"replace"}),m===void 0&&n.push({item:c,type:"add",index:a})}for(const[a]of e)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function p_(t){return{id:t.id,type:"remove"}}const y_=t=>u$(t),z9=t=>pP(t);function YP(t){return _.forwardRef(t)}const F9=typeof window<"u"?_.useLayoutEffect:_.useEffect;function v_(t){const[e,n]=_.useState(BigInt(0)),[r]=_.useState(()=>K9(()=>n(a=>a+BigInt(1))));return F9(()=>{const a=r.get();a.length&&(t(a),r.reset())},[e]),r}function K9(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const QP=_.createContext(null);function G9({children:t}){const e=vn(),n=_.useCallback(m=>{const{nodes:p=[],setNodes:y,hasDefaultNodes:v,onNodesChange:b,nodeLookup:E,fitViewQueued:x}=e.getState();let I=p;for(const N of m)I=typeof N=="function"?N(I):N;const k=g_({items:I,lookup:E});v&&y(I),k.length>0?b?.(k):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:N,nodes:M,setNodes:j}=e.getState();N&&j(M)})},[]),r=v_(n),a=_.useCallback(m=>{const{edges:p=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:b,edgeLookup:E}=e.getState();let x=p;for(const I of m)x=typeof I=="function"?I(x):I;v?y(x):b&&b(g_({items:x,lookup:E}))},[]),c=v_(a),d=_.useMemo(()=>({nodeQueue:r,edgeQueue:c}),[]);return h.jsx(QP.Provider,{value:d,children:t})}function q9(){const t=_.useContext(QP);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const $9=t=>!!t.panZoom;function Ug(){const t=H9(),e=vn(),n=q9(),r=_t($9),a=_.useMemo(()=>{const c=b=>e.getState().nodeLookup.get(b),d=b=>{n.nodeQueue.push(b)},m=b=>{n.edgeQueue.push(b)},p=b=>{const{nodeLookup:E,nodeOrigin:x}=e.getState(),I=y_(b)?b:E.get(b.id),k=I.parentId?EP(I.position,I.measured,I.parentId,E,x):I.position,N={...I,position:k,width:I.measured?.width??I.width,height:I.measured?.height??I.height};return $h(N)},y=(b,E,x={replace:!1})=>{d(I=>I.map(k=>{if(k.id===b){const N=typeof E=="function"?E(k):E;return x.replace&&y_(N)?N:{...k,...N}}return k}))},v=(b,E,x={replace:!1})=>{m(I=>I.map(k=>{if(k.id===b){const N=typeof E=="function"?E(k):E;return x.replace&&z9(N)?N:{...k,...N}}return k}))};return{getNodes:()=>e.getState().nodes.map(b=>({...b})),getNode:b=>c(b)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:b=[]}=e.getState();return b.map(E=>({...E}))},getEdge:b=>e.getState().edgeLookup.get(b),setNodes:d,setEdges:m,addNodes:b=>{const E=Array.isArray(b)?b:[b];n.nodeQueue.push(x=>[...x,...E])},addEdges:b=>{const E=Array.isArray(b)?b:[b];n.edgeQueue.push(x=>[...x,...E])},toObject:()=>{const{nodes:b=[],edges:E=[],transform:x}=e.getState(),[I,k,N]=x;return{nodes:b.map(M=>({...M})),edges:E.map(M=>({...M})),viewport:{x:I,y:k,zoom:N}}},deleteElements:async({nodes:b=[],edges:E=[]})=>{const{nodes:x,edges:I,onNodesDelete:k,onEdgesDelete:N,triggerNodeChanges:M,triggerEdgeChanges:j,onDelete:O,onBeforeDelete:U}=e.getState(),{nodes:H,edges:V}=await g$({nodesToRemove:b,edgesToRemove:E,nodes:x,edges:I,onBeforeDelete:U}),Q=V.length>0,Y=H.length>0;if(Q){const ee=V.map(p_);N?.(V),j(ee)}if(Y){const ee=H.map(p_);k?.(H),M(ee)}return(Y||Q)&&O?.({nodes:H,edges:V}),{deletedNodes:H,deletedEdges:V}},getIntersectingNodes:(b,E=!0,x)=>{const I=G0(b),k=I?b:p(b),N=x!==void 0;return k?(x||e.getState().nodes).filter(M=>{const j=e.getState().nodeLookup.get(M.id);if(j&&!I&&(M.id===b.id||!j.internals.positionAbsolute))return!1;const O=$h(N?M:j),U=vg(O,k);return E&&U>0||U>=O.width*O.height||U>=k.width*k.height}):[]},isNodeIntersecting:(b,E,x=!0)=>{const k=G0(b)?b:p(b);if(!k)return!1;const N=vg(k,E);return x&&N>0||N>=k.width*k.height},updateNode:y,updateNodeData:(b,E,x={replace:!1})=>{y(b,I=>{const k=typeof E=="function"?E(I):E;return x.replace?{...I,data:k}:{...I,data:{...I.data,...k}}},x)},updateEdge:v,updateEdgeData:(b,E,x={replace:!1})=>{v(b,I=>{const k=typeof E=="function"?E(I):E;return x.replace?{...I,data:k}:{...I,data:{...I.data,...k}}},x)},getNodesBounds:b=>{const{nodeLookup:E,nodeOrigin:x}=e.getState();return d$(b,{nodeLookup:E,nodeOrigin:x})},getHandleConnections:({type:b,id:E,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${b}${E?`-${E}`:""}`)?.values()??[]),getNodeConnections:({type:b,handleId:E,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${b?E?`-${b}-${E}`:`-${b}`:""}`)?.values()??[]),fitView:async b=>{const E=e.getState().fitViewResolver??C$();return e.setState({fitViewQueued:!0,fitViewOptions:b,fitViewResolver:E}),n.nodeQueue.push(x=>[...x]),E.promise}}},[]);return _.useMemo(()=>({...a,...t,viewportInitialized:r}),[r])}const C_=t=>t.selected,V9=typeof window<"u"?window:void 0;function Y9({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=vn(),{deleteElements:r}=Ug(),a=bg(t,{actInsideInputWithModifier:!1}),c=bg(e,{target:V9});_.useEffect(()=>{if(a){const{edges:d,nodes:m}=n.getState();r({nodes:m.filter(C_),edges:d.filter(C_)}),n.setState({nodesSelectionActive:!1})}},[a]),_.useEffect(()=>{n.setState({multiSelectionActive:c})},[c])}function Q9(t){const e=vn();_.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=XT(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ws.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const UC={position:"absolute",width:"100%",height:"100%",top:0,left:0},W9=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function X9({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ru.Free,zoomOnDoubleClick:d=!0,panOnDrag:m=!0,defaultViewport:p,translateExtent:y,minZoom:v,maxZoom:b,zoomActivationKeyCode:E,preventScrolling:x=!0,children:I,noWheelClassName:k,noPanClassName:N,onViewportChange:M,isControlledViewport:j,paneClickDistance:O}){const U=vn(),H=_.useRef(null),{userSelectionActive:V,lib:Q}=_t(W9,xn),Y=bg(E),ee=_.useRef();Q9(H);const se=_.useCallback(ce=>{M?.({x:ce[0],y:ce[1],zoom:ce[2]}),j||U.setState({transform:ce})},[M,j]);return _.useEffect(()=>{if(H.current){ee.current=t9({domNode:H.current,minZoom:v,maxZoom:b,translateExtent:y,viewport:p,paneClickDistance:O,onDraggingChange:G=>U.setState({paneDragging:G}),onPanZoomStart:(G,J)=>{const{onViewportChangeStart:D,onMoveStart:F}=U.getState();F?.(G,J),D?.(J)},onPanZoom:(G,J)=>{const{onViewportChange:D,onMove:F}=U.getState();F?.(G,J),D?.(J)},onPanZoomEnd:(G,J)=>{const{onViewportChangeEnd:D,onMoveEnd:F}=U.getState();F?.(G,J),D?.(J)}});const{x:ce,y:te,zoom:re}=ee.current.getViewport();return U.setState({panZoom:ee.current,transform:[ce,te,re],domNode:H.current.closest(".react-flow")}),()=>{ee.current?.destroy()}}},[]),_.useEffect(()=>{ee.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:a,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:m,zoomActivationKeyPressed:Y,preventScrolling:x,noPanClassName:N,userSelectionActive:V,noWheelClassName:k,lib:Q,onTransformChange:se})},[t,e,n,r,a,c,d,m,Y,x,N,V,k,Q,se]),h.jsx("div",{className:"react-flow__renderer",ref:H,style:UC,children:I})}const J9=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Z9(){const{userSelectionActive:t,userSelectionRect:e}=_t(J9,xn);return t&&e?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Ub=(t,e)=>n=>{n.target===e.current&&t?.(n)},eV=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function tV({isSelecting:t,selectionKeyPressed:e,selectionMode:n=yg.Full,panOnDrag:r,selectionOnDrag:a,onSelectionStart:c,onSelectionEnd:d,onPaneClick:m,onPaneContextMenu:p,onPaneScroll:y,onPaneMouseEnter:v,onPaneMouseMove:b,onPaneMouseLeave:E,children:x}){const I=vn(),{userSelectionActive:k,elementsSelectable:N,dragging:M,connectionInProgress:j}=_t(eV,xn),O=N&&(t||k),U=_.useRef(null),H=_.useRef(),V=_.useRef(new Set),Q=_.useRef(new Set),Y=_.useRef(!1),ee=_.useRef(!1),se=F=>{if(Y.current||j){Y.current=!1;return}m?.(F),I.getState().resetSelectedElements(),I.setState({nodesSelectionActive:!1})},ce=F=>{if(Array.isArray(r)&&r?.includes(2)){F.preventDefault();return}p?.(F)},te=y?F=>y(F):void 0,re=F=>{const{resetSelectedElements:$,domNode:X}=I.getState();if(H.current=X?.getBoundingClientRect(),!N||!t||F.button!==0||F.target!==U.current||!H.current)return;F.target?.setPointerCapture?.(F.pointerId),ee.current=!0,Y.current=!1;const{x:z,y:W}=Gs(F.nativeEvent,H.current);$(),I.setState({userSelectionRect:{width:0,height:0,startX:z,startY:W,x:z,y:W}}),c?.(F)},G=F=>{const{userSelectionRect:$,transform:X,nodeLookup:z,edgeLookup:W,connectionLookup:ue,triggerNodeChanges:de,triggerEdgeChanges:ge,defaultEdgeOptions:Ne}=I.getState();if(!H.current||!$)return;Y.current=!0;const{x:Ee,y:le}=Gs(F.nativeEvent,H.current),{startX:Ce,startY:De}=$,we={startX:Ce,startY:De,x:Ee<Ce?Ee:Ce,y:le<De?le:De,width:Math.abs(Ee-Ce),height:Math.abs(le-De)},be=V.current,Oe=Q.current;V.current=new Set(QT(z,we,X,n===yg.Partial,!0).map(fe=>fe.id)),Q.current=new Set;const Le=Ne?.selectable??!0;for(const fe of V.current){const Me=ue.get(fe);if(Me)for(const{edgeId:He}of Me.values()){const Ke=W.get(He);Ke&&(Ke.selectable??Le)&&Q.current.add(He)}}if(!q0(be,V.current)){const fe=Ah(z,V.current,!0);de(fe)}if(!q0(Oe,Q.current)){const fe=Ah(W,Q.current);ge(fe)}I.setState({userSelectionRect:we,userSelectionActive:!0,nodesSelectionActive:!1})},J=F=>{if(F.button!==0||!ee.current)return;F.target?.releasePointerCapture?.(F.pointerId);const{userSelectionRect:$}=I.getState();!k&&$&&F.target===U.current&&se?.(F),I.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:V.current.size>0}),d?.(F),(e||a)&&(Y.current=!1),ee.current=!1},D=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:zn(["react-flow__pane",{draggable:D,dragging:M,selection:t}]),onClick:O?void 0:Ub(se,U),onContextMenu:Ub(ce,U),onWheel:Ub(te,U),onPointerEnter:O?void 0:v,onPointerDown:O?re:b,onPointerMove:O?G:b,onPointerUp:O?J:void 0,onPointerLeave:E,ref:U,style:UC,children:[x,h.jsx(Z9,{})]})}function HE({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:a,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:m,onError:p}=e.getState(),y=m.get(t);if(!y){p?.("012",Ws.error012(t));return}e.setState({nodesSelectionActive:!1}),y.selected?(n||y.selected&&d)&&(c({nodes:[y],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([t])}function WP({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:c,nodeClickDistance:d}){const m=vn(),[p,y]=_.useState(!1),v=_.useRef();return _.useEffect(()=>{v.current=B$({getStoreItems:()=>m.getState(),onNodeMouseDown:b=>{HE({id:b,store:m,nodeRef:t})},onDragStart:()=>{y(!0)},onDragStop:()=>{y(!1)}})},[]),_.useEffect(()=>{if(e)v.current?.destroy();else if(t.current)return v.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:c,nodeId:a,nodeClickDistance:d}),()=>{v.current?.destroy()}},[n,r,e,c,t,a]),p}const nV=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function XP(){const t=vn();return _.useCallback(n=>{const{nodeExtent:r,snapToGrid:a,snapGrid:c,nodesDraggable:d,onError:m,updateNodePositions:p,nodeLookup:y,nodeOrigin:v}=t.getState(),b=new Map,E=nV(d),x=a?c[0]:5,I=a?c[1]:5,k=n.direction.x*x*n.factor,N=n.direction.y*I*n.factor;for(const[,M]of y){if(!E(M))continue;let j={x:M.internals.positionAbsolute.x+k,y:M.internals.positionAbsolute.y+N};a&&(j=Dg(j,c));const{position:O,positionAbsolute:U}=yP({nodeId:M.id,nextPosition:j,nodeLookup:y,nodeExtent:r,nodeOrigin:v,onError:m});M.position=O,M.internals.positionAbsolute=U,b.set(M.id,M)}p(b)},[])}const nS=_.createContext(null),rV=nS.Provider;nS.Consumer;const JP=()=>_.useContext(nS),oV=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),iV=(t,e,n)=>r=>{const{connectionClickStartHandle:a,connectionMode:c,connection:d}=r,{fromHandle:m,toHandle:p,isValid:y}=d,v=p?.nodeId===t&&p?.id===e&&p?.type===n;return{connectingFrom:m?.nodeId===t&&m?.id===e&&m?.type===n,connectingTo:v,clickConnecting:a?.nodeId===t&&a?.id===e&&a?.type===n,isPossibleEndHandle:c===Gh.Strict?m?.type!==n:t!==m?.nodeId||e!==m?.id,connectionInProcess:!!m,clickConnectionInProcess:!!a,valid:v&&y}};function sV({type:t="source",position:e=Je.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:c=!0,id:d,onConnect:m,children:p,className:y,onMouseDown:v,onTouchStart:b,...E},x){const I=d||null,k=t==="target",N=vn(),M=JP(),{connectOnClick:j,noPanClassName:O,rfId:U}=_t(oV,xn),{connectingFrom:H,connectingTo:V,clickConnecting:Q,isPossibleEndHandle:Y,connectionInProcess:ee,clickConnectionInProcess:se,valid:ce}=_t(iV(M,I,t),xn);M||N.getState().onError?.("010",Ws.error010());const te=J=>{const{defaultEdgeOptions:D,onConnect:F,hasDefaultEdges:$}=N.getState(),X={...D,...J};if($){const{edges:z,setEdges:W}=N.getState();W(x$(X,z))}F?.(X),m?.(X)},re=J=>{if(!M)return;const D=SP(J.nativeEvent);if(a&&(D&&J.button===0||!D)){const F=N.getState();jE.onPointerDown(J.nativeEvent,{handleDomNode:J.currentTarget,autoPanOnConnect:F.autoPanOnConnect,connectionMode:F.connectionMode,connectionRadius:F.connectionRadius,domNode:F.domNode,nodeLookup:F.nodeLookup,lib:F.lib,isTarget:k,handleId:I,nodeId:M,flowId:F.rfId,panBy:F.panBy,cancelConnection:F.cancelConnection,onConnectStart:F.onConnectStart,onConnectEnd:F.onConnectEnd,updateConnection:F.updateConnection,onConnect:te,isValidConnection:n||F.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:F.autoPanSpeed,dragThreshold:F.connectionDragThreshold})}D?v?.(J):b?.(J)},G=J=>{const{onClickConnectStart:D,onClickConnectEnd:F,connectionClickStartHandle:$,connectionMode:X,isValidConnection:z,lib:W,rfId:ue,nodeLookup:de,connection:ge}=N.getState();if(!M||!$&&!a)return;if(!$){D?.(J.nativeEvent,{nodeId:M,handleId:I,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:M,type:t,id:I}});return}const Ne=AP(J.target),Ee=n||z,{connection:le,isValid:Ce}=jE.isValid(J.nativeEvent,{handle:{nodeId:M,id:I,type:t},connectionMode:X,fromNodeId:$.nodeId,fromHandleId:$.id||null,fromType:$.type,isValidConnection:Ee,flowId:ue,doc:Ne,lib:W,nodeLookup:de});Ce&&le&&te(le);const De=structuredClone(ge);delete De.inProgress,De.toPosition=De.toHandle?De.toHandle.position:null,F?.(J,De),N.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":I,"data-nodeid":M,"data-handlepos":e,"data-id":`${U}-${M}-${I}-${t}`,className:zn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,y,{source:!k,target:k,connectable:r,connectablestart:a,connectableend:c,clickconnecting:Q,connectingfrom:H,connectingto:V,valid:ce,connectionindicator:r&&(!ee||Y)&&(ee||se?c:a)}]),onMouseDown:re,onTouchStart:re,onClick:j?G:void 0,ref:x,...E,children:p})}const Qh=_.memo(YP(sV));function aV({data:t,isConnectable:e,sourcePosition:n=Je.Bottom}){return h.jsxs(h.Fragment,{children:[t?.label,h.jsx(Qh,{type:"source",position:n,isConnectable:e})]})}function cV({data:t,isConnectable:e,targetPosition:n=Je.Top,sourcePosition:r=Je.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(Qh,{type:"target",position:n,isConnectable:e}),t?.label,h.jsx(Qh,{type:"source",position:r,isConnectable:e})]})}function lV(){return null}function uV({data:t,isConnectable:e,targetPosition:n=Je.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(Qh,{type:"target",position:n,isConnectable:e}),t?.label]})}const Dv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},w_={input:aV,default:cV,output:uV,group:lV};function dV(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const hV=t=>{const{width:e,height:n,x:r,y:a}=Pg(t.nodeLookup,{filter:c=>!!c.selected});return{width:es(e)?e:null,height:es(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${a}px)`}};function fV({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=vn(),{width:a,height:c,transformString:d,userSelectionActive:m}=_t(hV,xn),p=XP(),y=_.useRef(null);if(_.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),WP({nodeRef:y}),m||!a||!c)return null;const v=t?E=>{const x=r.getState().nodes.filter(I=>I.selected);t(E,x)}:void 0,b=E=>{Object.prototype.hasOwnProperty.call(Dv,E.key)&&(E.preventDefault(),p({direction:Dv[E.key],factor:E.shiftKey?4:1}))};return h.jsx("div",{className:zn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d},children:h.jsx("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:c}})})}const b_=typeof window<"u"?window:void 0,mV=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function ZP({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:m,deleteKeyCode:p,selectionKeyCode:y,selectionOnDrag:v,selectionMode:b,onSelectionStart:E,onSelectionEnd:x,multiSelectionKeyCode:I,panActivationKeyCode:k,zoomActivationKeyCode:N,elementsSelectable:M,zoomOnScroll:j,zoomOnPinch:O,panOnScroll:U,panOnScrollSpeed:H,panOnScrollMode:V,zoomOnDoubleClick:Q,panOnDrag:Y,defaultViewport:ee,translateExtent:se,minZoom:ce,maxZoom:te,preventScrolling:re,onSelectionContextMenu:G,noWheelClassName:J,noPanClassName:D,disableKeyboardA11y:F,onViewportChange:$,isControlledViewport:X}){const{nodesSelectionActive:z,userSelectionActive:W}=_t(mV),ue=bg(y,{target:b_}),de=bg(k,{target:b_}),ge=de||Y,Ne=de||U,Ee=v&&ge!==!0,le=ue||W||Ee;return Y9({deleteKeyCode:p,multiSelectionKeyCode:I}),h.jsx(X9,{onPaneContextMenu:c,elementsSelectable:M,zoomOnScroll:j,zoomOnPinch:O,panOnScroll:Ne,panOnScrollSpeed:H,panOnScrollMode:V,zoomOnDoubleClick:Q,panOnDrag:!ue&&ge,defaultViewport:ee,translateExtent:se,minZoom:ce,maxZoom:te,zoomActivationKeyCode:N,preventScrolling:re,noWheelClassName:J,noPanClassName:D,onViewportChange:$,isControlledViewport:X,paneClickDistance:m,children:h.jsxs(tV,{onSelectionStart:E,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:ge,isSelecting:!!le,selectionMode:b,selectionKeyPressed:ue,selectionOnDrag:Ee,children:[t,z&&h.jsx(fV,{onSelectionContextMenu:G,noPanClassName:D,disableKeyboardA11y:F})]})})}ZP.displayName="FlowRenderer";const gV=_.memo(ZP),pV=t=>e=>t?QT(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function yV(t){return _t(_.useCallback(pV(t),[t]),xn)}const vV=t=>t.updateNodeInternals;function CV(){const t=_t(vV),[e]=_.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(a=>{const c=a.target.getAttribute("data-id");r.set(c,{id:c,nodeElement:a.target,force:!0})}),t(r)}));return _.useEffect(()=>()=>{e?.disconnect()},[e]),e}function wV({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const a=vn(),c=_.useRef(null),d=_.useRef(null),m=_.useRef(t.sourcePosition),p=_.useRef(t.targetPosition),y=_.useRef(e),v=n&&!!t.internals.handleBounds;return _.useEffect(()=>{c.current&&!t.hidden&&(!v||d.current!==c.current)&&(d.current&&r?.unobserve(d.current),r?.observe(c.current),d.current=c.current)},[v,t.hidden]),_.useEffect(()=>()=>{d.current&&(r?.unobserve(d.current),d.current=null)},[]),_.useEffect(()=>{if(c.current){const b=y.current!==e,E=m.current!==t.sourcePosition,x=p.current!==t.targetPosition;(b||E||x)&&(y.current=e,m.current=t.sourcePosition,p.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),c}function bV({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:a,onContextMenu:c,onDoubleClick:d,nodesDraggable:m,elementsSelectable:p,nodesConnectable:y,nodesFocusable:v,resizeObserver:b,noDragClassName:E,noPanClassName:x,disableKeyboardA11y:I,rfId:k,nodeTypes:N,nodeClickDistance:M,onError:j}){const{node:O,internals:U,isParent:H}=_t(Ce=>{const De=Ce.nodeLookup.get(t),we=Ce.parentLookup.has(t);return{node:De,internals:De.internals,isParent:we}},xn);let V=O.type||"default",Q=N?.[V]||w_[V];Q===void 0&&(j?.("003",Ws.error003(V)),V="default",Q=N?.default||w_.default);const Y=!!(O.draggable||m&&typeof O.draggable>"u"),ee=!!(O.selectable||p&&typeof O.selectable>"u"),se=!!(O.connectable||y&&typeof O.connectable>"u"),ce=!!(O.focusable||v&&typeof O.focusable>"u"),te=vn(),re=bP(O),G=wV({node:O,nodeType:V,hasDimensions:re,resizeObserver:b}),J=WP({nodeRef:G,disabled:O.hidden||!Y,noDragClassName:E,handleSelector:O.dragHandle,nodeId:t,isSelectable:ee,nodeClickDistance:M}),D=XP();if(O.hidden)return null;const F=Ja(O),$=dV(O),X=ee||Y||e||n||r||a,z=n?Ce=>n(Ce,{...U.userNode}):void 0,W=r?Ce=>r(Ce,{...U.userNode}):void 0,ue=a?Ce=>a(Ce,{...U.userNode}):void 0,de=c?Ce=>c(Ce,{...U.userNode}):void 0,ge=d?Ce=>d(Ce,{...U.userNode}):void 0,Ne=Ce=>{const{selectNodesOnDrag:De,nodeDragThreshold:we}=te.getState();ee&&(!De||!Y||we>0)&&HE({id:t,store:te,nodeRef:G}),e&&e(Ce,{...U.userNode})},Ee=Ce=>{if(!(TP(Ce.nativeEvent)||I)){if(hP.includes(Ce.key)&&ee){const De=Ce.key==="Escape";HE({id:t,store:te,unselect:De,nodeRef:G})}else if(Y&&O.selected&&Object.prototype.hasOwnProperty.call(Dv,Ce.key)){Ce.preventDefault();const{ariaLabelConfig:De}=te.getState();te.setState({ariaLiveMessage:De["node.a11yDescription.ariaLiveMessage"]({direction:Ce.key.replace("Arrow","").toLowerCase(),x:~~U.positionAbsolute.x,y:~~U.positionAbsolute.y})}),D({direction:Dv[Ce.key],factor:Ce.shiftKey?4:1})}}},le=()=>{if(I||!G.current?.matches(":focus-visible"))return;const{transform:Ce,width:De,height:we,autoPanOnNodeFocus:be,setCenter:Oe}=te.getState();if(!be)return;QT(new Map([[t,O]]),{x:0,y:0,width:De,height:we},Ce,!0).length>0||Oe(O.position.x+F.width/2,O.position.y+F.height/2,{zoom:Ce[2]})};return h.jsx("div",{className:zn(["react-flow__node",`react-flow__node-${V}`,{[x]:Y},O.className,{selected:O.selected,selectable:ee,parent:H,draggable:Y,dragging:J}]),ref:G,style:{zIndex:U.z,transform:`translate(${U.positionAbsolute.x}px,${U.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:re?"visible":"hidden",...O.style,...$},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:z,onMouseMove:W,onMouseLeave:ue,onContextMenu:de,onClick:Ne,onDoubleClick:ge,onKeyDown:ce?Ee:void 0,tabIndex:ce?0:void 0,onFocus:ce?le:void 0,role:O.ariaRole??(ce?"group":void 0),"aria-roledescription":"node","aria-describedby":I?void 0:`${FP}-${k}`,"aria-label":O.ariaLabel,...O.domAttributes,children:h.jsx(rV,{value:t,children:h.jsx(Q,{id:t,data:O.data,type:V,positionAbsoluteX:U.positionAbsolute.x,positionAbsoluteY:U.positionAbsolute.y,selected:O.selected??!1,selectable:ee,draggable:Y,deletable:O.deletable??!0,isConnectable:se,sourcePosition:O.sourcePosition,targetPosition:O.targetPosition,dragging:J,dragHandle:O.dragHandle,zIndex:U.z,parentId:O.parentId,...F})})})}const EV=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function e1(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,onError:c}=_t(EV,xn),d=yV(t.onlyRenderVisibleElements),m=CV();return h.jsx("div",{className:"react-flow__nodes",style:UC,children:d.map(p=>h.jsx(bV,{id:p,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:m,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:a,nodeClickDistance:t.nodeClickDistance,onError:c},p))})}e1.displayName="NodeRenderer";const AV=_.memo(e1);function TV(t){return _t(_.useCallback(n=>{if(!t)return n.edges.map(a=>a.id);const r=[];if(n.width&&n.height)for(const a of n.edges){const c=n.nodeLookup.get(a.source),d=n.nodeLookup.get(a.target);c&&d&&A$({sourceNode:c,targetNode:d,width:n.width,height:n.height,transform:n.transform})&&r.push(a.id)}return r},[t]),xn)}const SV=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return h.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},xV=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return h.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},E_={[Ov.Arrow]:SV,[Ov.ArrowClosed]:xV};function _V(t){const e=vn();return _.useMemo(()=>Object.prototype.hasOwnProperty.call(E_,t)?E_[t]:(e.getState().onError?.("009",Ws.error009(t)),null),[t])}const kV=({id:t,type:e,color:n,width:r=12.5,height:a=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:m="auto-start-reverse"})=>{const p=_V(e);return p?h.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:m,refX:"0",refY:"0",children:h.jsx(p,{color:n,strokeWidth:d})}):null},t1=({defaultColor:t,rfId:e})=>{const n=_t(c=>c.edges),r=_t(c=>c.defaultEdgeOptions),a=_.useMemo(()=>N$(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return a.length?h.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:h.jsx("defs",{children:a.map(c=>h.jsx(kV,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};t1.displayName="MarkerDefinitions";var IV=_.memo(t1);function n1({x:t,y:e,label:n,labelStyle:r,labelShowBg:a=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:m=2,children:p,className:y,...v}){const[b,E]=_.useState({x:1,y:0,width:0,height:0}),x=zn(["react-flow__edge-textwrapper",y]),I=_.useRef(null);return _.useEffect(()=>{if(I.current){const k=I.current.getBBox();E({x:k.x,y:k.y,width:k.width,height:k.height})}},[n]),n?h.jsxs("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:x,visibility:b.width?"visible":"hidden",...v,children:[a&&h.jsx("rect",{width:b.width+2*d[0],x:-d[0],y:-d[1],height:b.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:m,ry:m}),h.jsx("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:I,style:r,children:n}),p]}):null}n1.displayName="EdgeText";const RV=_.memo(n1);function jC({path:t,labelX:e,labelY:n,label:r,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p,interactionWidth:y=20,...v}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{...v,d:t,fill:"none",className:zn(["react-flow__edge-path",v.className])}),y?h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}):null,r&&es(e)&&es(n)?h.jsx(RV,{x:e,y:n,label:r,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:m,labelBgBorderRadius:p}):null]})}function A_({pos:t,x1:e,y1:n,x2:r,y2:a}){return t===Je.Left||t===Je.Right?[.5*(e+r),n]:[e,.5*(n+a)]}function r1({sourceX:t,sourceY:e,sourcePosition:n=Je.Bottom,targetX:r,targetY:a,targetPosition:c=Je.Top}){const[d,m]=A_({pos:n,x1:t,y1:e,x2:r,y2:a}),[p,y]=A_({pos:c,x1:r,y1:a,x2:t,y2:e}),[v,b,E,x]=xP({sourceX:t,sourceY:e,targetX:r,targetY:a,sourceControlX:d,sourceControlY:m,targetControlX:p,targetControlY:y});return[`M${t},${e} C${d},${m} ${p},${y} ${r},${a}`,v,b,E,x]}function o1(t){return _.memo(({id:e,sourceX:n,sourceY:r,targetX:a,targetY:c,sourcePosition:d,targetPosition:m,label:p,labelStyle:y,labelShowBg:v,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:x,style:I,markerEnd:k,markerStart:N,interactionWidth:M})=>{const[j,O,U]=r1({sourceX:n,sourceY:r,sourcePosition:d,targetX:a,targetY:c,targetPosition:m}),H=t.isInternal?void 0:e;return h.jsx(jC,{id:H,path:j,labelX:O,labelY:U,label:p,labelStyle:y,labelShowBg:v,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:x,style:I,markerEnd:k,markerStart:N,interactionWidth:M})})}const NV=o1({isInternal:!1}),i1=o1({isInternal:!0});NV.displayName="SimpleBezierEdge";i1.displayName="SimpleBezierEdgeInternal";function s1(t){return _.memo(({id:e,sourceX:n,sourceY:r,targetX:a,targetY:c,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:b,style:E,sourcePosition:x=Je.Bottom,targetPosition:I=Je.Top,markerEnd:k,markerStart:N,pathOptions:M,interactionWidth:j})=>{const[O,U,H]=DE({sourceX:n,sourceY:r,sourcePosition:x,targetX:a,targetY:c,targetPosition:I,borderRadius:M?.borderRadius,offset:M?.offset,stepPosition:M?.stepPosition}),V=t.isInternal?void 0:e;return h.jsx(jC,{id:V,path:O,labelX:U,labelY:H,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:b,style:E,markerEnd:k,markerStart:N,interactionWidth:j})})}const a1=s1({isInternal:!1}),c1=s1({isInternal:!0});a1.displayName="SmoothStepEdge";c1.displayName="SmoothStepEdgeInternal";function l1(t){return _.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return h.jsx(a1,{...n,id:r,pathOptions:_.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const OV=l1({isInternal:!1}),u1=l1({isInternal:!0});OV.displayName="StepEdge";u1.displayName="StepEdgeInternal";function d1(t){return _.memo(({id:e,sourceX:n,sourceY:r,targetX:a,targetY:c,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:I,interactionWidth:k})=>{const[N,M,j]=IP({sourceX:n,sourceY:r,targetX:a,targetY:c}),O=t.isInternal?void 0:e;return h.jsx(jC,{id:O,path:N,labelX:M,labelY:j,label:d,labelStyle:m,labelShowBg:p,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:b,style:E,markerEnd:x,markerStart:I,interactionWidth:k})})}const MV=d1({isInternal:!1}),h1=d1({isInternal:!0});MV.displayName="StraightEdge";h1.displayName="StraightEdgeInternal";function f1(t){return _.memo(({id:e,sourceX:n,sourceY:r,targetX:a,targetY:c,sourcePosition:d=Je.Bottom,targetPosition:m=Je.Top,label:p,labelStyle:y,labelShowBg:v,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:x,style:I,markerEnd:k,markerStart:N,pathOptions:M,interactionWidth:j})=>{const[O,U,H]=_P({sourceX:n,sourceY:r,sourcePosition:d,targetX:a,targetY:c,targetPosition:m,curvature:M?.curvature}),V=t.isInternal?void 0:e;return h.jsx(jC,{id:V,path:O,labelX:U,labelY:H,label:p,labelStyle:y,labelShowBg:v,labelBgStyle:b,labelBgPadding:E,labelBgBorderRadius:x,style:I,markerEnd:k,markerStart:N,interactionWidth:j})})}const PV=f1({isInternal:!1}),m1=f1({isInternal:!0});PV.displayName="BezierEdge";m1.displayName="BezierEdgeInternal";const T_={default:m1,straight:h1,step:u1,smoothstep:c1,simplebezier:i1},S_={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},DV=(t,e,n)=>n===Je.Left?t-e:n===Je.Right?t+e:t,LV=(t,e,n)=>n===Je.Top?t-e:n===Je.Bottom?t+e:t,x_="react-flow__edgeupdater";function __({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:c,onMouseOut:d,type:m}){return h.jsx("circle",{onMouseDown:a,onMouseEnter:c,onMouseOut:d,className:zn([x_,`${x_}-${m}`]),cx:DV(e,r,t),cy:LV(n,r,t),r,stroke:"transparent",fill:"transparent"})}function UV({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:a,targetX:c,targetY:d,sourcePosition:m,targetPosition:p,onReconnect:y,onReconnectStart:v,onReconnectEnd:b,setReconnecting:E,setUpdateHover:x}){const I=vn(),k=(U,H)=>{if(U.button!==0)return;const{autoPanOnConnect:V,domNode:Q,isValidConnection:Y,connectionMode:ee,connectionRadius:se,lib:ce,onConnectStart:te,onConnectEnd:re,cancelConnection:G,nodeLookup:J,rfId:D,panBy:F,updateConnection:$}=I.getState(),X=H.type==="target",z=(de,ge)=>{E(!1),b?.(de,n,H.type,ge)},W=de=>y?.(n,de),ue=(de,ge)=>{E(!0),v?.(U,n,H.type),te?.(de,ge)};jE.onPointerDown(U.nativeEvent,{autoPanOnConnect:V,connectionMode:ee,connectionRadius:se,domNode:Q,handleId:H.id,nodeId:H.nodeId,nodeLookup:J,isTarget:X,edgeUpdaterType:H.type,lib:ce,flowId:D,cancelConnection:G,panBy:F,isValidConnection:Y,onConnect:W,onConnectStart:ue,onConnectEnd:re,onReconnectEnd:z,updateConnection:$,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,dragThreshold:I.getState().connectionDragThreshold,handleDomNode:U.currentTarget})},N=U=>k(U,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),M=U=>k(U,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),j=()=>x(!0),O=()=>x(!1);return h.jsxs(h.Fragment,{children:[(t===!0||t==="source")&&h.jsx(__,{position:m,centerX:r,centerY:a,radius:e,onMouseDown:N,onMouseEnter:j,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&h.jsx(__,{position:p,centerX:c,centerY:d,radius:e,onMouseDown:M,onMouseEnter:j,onMouseOut:O,type:"target"})]})}function jV({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:a,onDoubleClick:c,onContextMenu:d,onMouseEnter:m,onMouseMove:p,onMouseLeave:y,reconnectRadius:v,onReconnect:b,onReconnectStart:E,onReconnectEnd:x,rfId:I,edgeTypes:k,noPanClassName:N,onError:M,disableKeyboardA11y:j}){let O=_t(Oe=>Oe.edgeLookup.get(t));const U=_t(Oe=>Oe.defaultEdgeOptions);O=U?{...U,...O}:O;let H=O.type||"default",V=k?.[H]||T_[H];V===void 0&&(M?.("011",Ws.error011(H)),H="default",V=k?.default||T_.default);const Q=!!(O.focusable||e&&typeof O.focusable>"u"),Y=typeof b<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),ee=!!(O.selectable||r&&typeof O.selectable>"u"),se=_.useRef(null),[ce,te]=_.useState(!1),[re,G]=_.useState(!1),J=vn(),{zIndex:D,sourceX:F,sourceY:$,targetX:X,targetY:z,sourcePosition:W,targetPosition:ue}=_t(_.useCallback(Oe=>{const Le=Oe.nodeLookup.get(O.source),fe=Oe.nodeLookup.get(O.target);if(!Le||!fe)return{zIndex:O.zIndex,...S_};const Me=R$({id:t,sourceNode:Le,targetNode:fe,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:Oe.connectionMode,onError:M});return{zIndex:E$({selected:O.selected,zIndex:O.zIndex,sourceNode:Le,targetNode:fe,elevateOnSelect:Oe.elevateEdgesOnSelect}),...Me||S_}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),xn),de=_.useMemo(()=>O.markerStart?`url('#${LE(O.markerStart,I)}')`:void 0,[O.markerStart,I]),ge=_.useMemo(()=>O.markerEnd?`url('#${LE(O.markerEnd,I)}')`:void 0,[O.markerEnd,I]);if(O.hidden||F===null||$===null||X===null||z===null)return null;const Ne=Oe=>{const{addSelectedEdges:Le,unselectNodesAndEdges:fe,multiSelectionActive:Me}=J.getState();ee&&(J.setState({nodesSelectionActive:!1}),O.selected&&Me?(fe({nodes:[],edges:[O]}),se.current?.blur()):Le([t])),a&&a(Oe,O)},Ee=c?Oe=>{c(Oe,{...O})}:void 0,le=d?Oe=>{d(Oe,{...O})}:void 0,Ce=m?Oe=>{m(Oe,{...O})}:void 0,De=p?Oe=>{p(Oe,{...O})}:void 0,we=y?Oe=>{y(Oe,{...O})}:void 0,be=Oe=>{if(!j&&hP.includes(Oe.key)&&ee){const{unselectNodesAndEdges:Le,addSelectedEdges:fe}=J.getState();Oe.key==="Escape"?(se.current?.blur(),Le({edges:[O]})):fe([t])}};return h.jsx("svg",{style:{zIndex:D},children:h.jsxs("g",{className:zn(["react-flow__edge",`react-flow__edge-${H}`,O.className,N,{selected:O.selected,animated:O.animated,inactive:!ee&&!a,updating:ce,selectable:ee}]),onClick:Ne,onDoubleClick:Ee,onContextMenu:le,onMouseEnter:Ce,onMouseMove:De,onMouseLeave:we,onKeyDown:Q?be:void 0,tabIndex:Q?0:void 0,role:O.ariaRole??(Q?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":Q?`${KP}-${I}`:void 0,ref:se,...O.domAttributes,children:[!re&&h.jsx(V,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:ee,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:F,sourceY:$,targetX:X,targetY:z,sourcePosition:W,targetPosition:ue,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:de,markerEnd:ge,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),Y&&h.jsx(UV,{edge:O,isReconnectable:Y,reconnectRadius:v,onReconnect:b,onReconnectStart:E,onReconnectEnd:x,sourceX:F,sourceY:$,targetX:X,targetY:z,sourcePosition:W,targetPosition:ue,setUpdateHover:te,setReconnecting:G})]})})}const HV=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function g1({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:a,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:m,onEdgeMouseMove:p,onEdgeMouseLeave:y,onEdgeClick:v,reconnectRadius:b,onEdgeDoubleClick:E,onReconnectStart:x,onReconnectEnd:I,disableKeyboardA11y:k}){const{edgesFocusable:N,edgesReconnectable:M,elementsSelectable:j,onError:O}=_t(HV,xn),U=TV(e);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(IV,{defaultColor:t,rfId:n}),U.map(H=>h.jsx(jV,{id:H,edgesFocusable:N,edgesReconnectable:M,elementsSelectable:j,noPanClassName:a,onReconnect:c,onContextMenu:d,onMouseEnter:m,onMouseMove:p,onMouseLeave:y,onClick:v,reconnectRadius:b,onDoubleClick:E,onReconnectStart:x,onReconnectEnd:I,rfId:n,onError:O,edgeTypes:r,disableKeyboardA11y:k},H))]})}g1.displayName="EdgeRenderer";const BV=_.memo(g1),zV=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function FV({children:t}){const e=_t(zV);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function KV(t){const e=Ug(),n=_.useRef(!1);_.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const GV=t=>t.panZoom?.syncViewport;function qV(t){const e=_t(GV),n=vn();return _.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function $V(t){return t.connection.inProgress?{...t.connection,to:Lg(t.connection.to,t.transform)}:{...t.connection}}function VV(t){return $V}function YV(t){const e=VV();return _t(e,xn)}const QV=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function WV({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:a,width:c,height:d,isValid:m,inProgress:p}=_t(QV,xn);return!(c&&a&&p)?null:h.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:zn(["react-flow__connection",gP(m)]),children:h.jsx(p1,{style:e,type:n,CustomComponent:r,isValid:m})})})}const p1=({style:t,type:e=ul.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:a,from:c,fromNode:d,fromHandle:m,fromPosition:p,to:y,toNode:v,toHandle:b,toPosition:E}=YV();if(!a)return;if(n)return h.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:d,fromHandle:m,fromX:c.x,fromY:c.y,toX:y.x,toY:y.y,fromPosition:p,toPosition:E,connectionStatus:gP(r),toNode:v,toHandle:b});let x="";const I={sourceX:c.x,sourceY:c.y,sourcePosition:p,targetX:y.x,targetY:y.y,targetPosition:E};switch(e){case ul.Bezier:[x]=_P(I);break;case ul.SimpleBezier:[x]=r1(I);break;case ul.Step:[x]=DE({...I,borderRadius:0});break;case ul.SmoothStep:[x]=DE(I);break;default:[x]=IP(I)}return h.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};p1.displayName="ConnectionLine";const XV={};function k_(t=XV){_.useRef(t),vn(),_.useEffect(()=>{},[t])}function JV(){vn(),_.useRef(!1),_.useEffect(()=>{},[])}function y1({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:v,onSelectionContextMenu:b,onSelectionStart:E,onSelectionEnd:x,connectionLineType:I,connectionLineStyle:k,connectionLineComponent:N,connectionLineContainerStyle:M,selectionKeyCode:j,selectionOnDrag:O,selectionMode:U,multiSelectionKeyCode:H,panActivationKeyCode:V,zoomActivationKeyCode:Q,deleteKeyCode:Y,onlyRenderVisibleElements:ee,elementsSelectable:se,defaultViewport:ce,translateExtent:te,minZoom:re,maxZoom:G,preventScrolling:J,defaultMarkerColor:D,zoomOnScroll:F,zoomOnPinch:$,panOnScroll:X,panOnScrollSpeed:z,panOnScrollMode:W,zoomOnDoubleClick:ue,panOnDrag:de,onPaneClick:ge,onPaneMouseEnter:Ne,onPaneMouseMove:Ee,onPaneMouseLeave:le,onPaneScroll:Ce,onPaneContextMenu:De,paneClickDistance:we,nodeClickDistance:be,onEdgeContextMenu:Oe,onEdgeMouseEnter:Le,onEdgeMouseMove:fe,onEdgeMouseLeave:Me,reconnectRadius:He,onReconnect:Ke,onReconnectStart:ze,onReconnectEnd:et,noDragClassName:lt,noWheelClassName:Tt,noPanClassName:gt,disableKeyboardA11y:Pt,nodeExtent:yt,rfId:Nn,viewport:tn,onViewportChange:Ht}){return k_(t),k_(e),JV(),KV(n),qV(tn),h.jsx(gV,{onPaneClick:ge,onPaneMouseEnter:Ne,onPaneMouseMove:Ee,onPaneMouseLeave:le,onPaneContextMenu:De,onPaneScroll:Ce,paneClickDistance:we,deleteKeyCode:Y,selectionKeyCode:j,selectionOnDrag:O,selectionMode:U,onSelectionStart:E,onSelectionEnd:x,multiSelectionKeyCode:H,panActivationKeyCode:V,zoomActivationKeyCode:Q,elementsSelectable:se,zoomOnScroll:F,zoomOnPinch:$,zoomOnDoubleClick:ue,panOnScroll:X,panOnScrollSpeed:z,panOnScrollMode:W,panOnDrag:de,defaultViewport:ce,translateExtent:te,minZoom:re,maxZoom:G,onSelectionContextMenu:b,preventScrolling:J,noDragClassName:lt,noWheelClassName:Tt,noPanClassName:gt,disableKeyboardA11y:Pt,onViewportChange:Ht,isControlledViewport:!!tn,children:h.jsxs(FV,{children:[h.jsx(BV,{edgeTypes:e,onEdgeClick:a,onEdgeDoubleClick:d,onReconnect:Ke,onReconnectStart:ze,onReconnectEnd:et,onlyRenderVisibleElements:ee,onEdgeContextMenu:Oe,onEdgeMouseEnter:Le,onEdgeMouseMove:fe,onEdgeMouseLeave:Me,reconnectRadius:He,defaultMarkerColor:D,noPanClassName:gt,disableKeyboardA11y:Pt,rfId:Nn}),h.jsx(WV,{style:k,type:I,component:N,containerStyle:M}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(AV,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:c,onNodeMouseEnter:m,onNodeMouseMove:p,onNodeMouseLeave:y,onNodeContextMenu:v,nodeClickDistance:be,onlyRenderVisibleElements:ee,noPanClassName:gt,noDragClassName:lt,disableKeyboardA11y:Pt,nodeExtent:yt,rfId:Nn}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}y1.displayName="GraphView";const ZV=_.memo(y1),I_=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:a,height:c,fitView:d,fitViewOptions:m,minZoom:p=.5,maxZoom:y=2,nodeOrigin:v,nodeExtent:b}={})=>{const E=new Map,x=new Map,I=new Map,k=new Map,N=r??e??[],M=n??t??[],j=v??[0,0],O=b??pg;NP(I,k,N);const U=UE(M,E,x,{nodeOrigin:j,nodeExtent:O,elevateNodesOnSelect:!1});let H=[0,0,1];if(d&&a&&c){const V=Pg(E,{filter:se=>!!((se.width||se.initialWidth)&&(se.height||se.initialHeight))}),{x:Q,y:Y,zoom:ee}=WT(V,a,c,p,y,m?.padding??.1);H=[Q,Y,ee]}return{rfId:"1",width:0,height:0,transform:H,nodes:M,nodesInitialized:U,nodeLookup:E,parentLookup:x,edges:N,edgeLookup:k,connectionLookup:I,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:p,maxZoom:y,translateExtent:pg,nodeExtent:O,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Gh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:j,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:m,fitViewResolver:null,connection:{...mP},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:p$,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:fP}},e7=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:a,height:c,fitView:d,fitViewOptions:m,minZoom:p,maxZoom:y,nodeOrigin:v,nodeExtent:b})=>w9((E,x)=>{async function I(){const{nodeLookup:k,panZoom:N,fitViewOptions:M,fitViewResolver:j,width:O,height:U,minZoom:H,maxZoom:V}=x();N&&(await m$({nodes:k,width:O,height:U,panZoom:N,minZoom:H,maxZoom:V},M),j?.resolve(!0),E({fitViewResolver:null}))}return{...I_({nodes:t,edges:e,width:a,height:c,fitView:d,fitViewOptions:m,minZoom:p,maxZoom:y,nodeOrigin:v,nodeExtent:b,defaultNodes:n,defaultEdges:r}),setNodes:k=>{const{nodeLookup:N,parentLookup:M,nodeOrigin:j,elevateNodesOnSelect:O,fitViewQueued:U}=x(),H=UE(k,N,M,{nodeOrigin:j,nodeExtent:b,elevateNodesOnSelect:O,checkEquality:!0});U&&H?(I(),E({nodes:k,nodesInitialized:H,fitViewQueued:!1,fitViewOptions:void 0})):E({nodes:k,nodesInitialized:H})},setEdges:k=>{const{connectionLookup:N,edgeLookup:M}=x();NP(N,M,k),E({edges:k})},setDefaultNodesAndEdges:(k,N)=>{if(k){const{setNodes:M}=x();M(k),E({hasDefaultNodes:!0})}if(N){const{setEdges:M}=x();M(N),E({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:N,nodeLookup:M,parentLookup:j,domNode:O,nodeOrigin:U,nodeExtent:H,debug:V,fitViewQueued:Q}=x(),{changes:Y,updatedInternals:ee}=L$(k,M,j,O,U,H);ee&&(M$(M,j,{nodeOrigin:U,nodeExtent:H}),Q?(I(),E({fitViewQueued:!1,fitViewOptions:void 0})):E({}),Y?.length>0&&(V&&console.log("React Flow: trigger node changes",Y),N?.(Y)))},updateNodePositions:(k,N=!1)=>{const M=[],j=[],{nodeLookup:O,triggerNodeChanges:U}=x();for(const[H,V]of k){const Q=O.get(H),Y=!!(Q?.expandParent&&Q?.parentId&&V?.position),ee={id:H,type:"position",position:Y?{x:Math.max(0,V.position.x),y:Math.max(0,V.position.y)}:V.position,dragging:N};Y&&Q.parentId&&M.push({id:H,parentId:Q.parentId,rect:{...V.internals.positionAbsolute,width:V.measured.width??0,height:V.measured.height??0}}),j.push(ee)}if(M.length>0){const{parentLookup:H,nodeOrigin:V}=x(),Q=tS(M,O,H,V);j.push(...Q)}U(j)},triggerNodeChanges:k=>{const{onNodesChange:N,setNodes:M,nodes:j,hasDefaultNodes:O,debug:U}=x();if(k?.length){if(O){const H=$P(k,j);M(H)}U&&console.log("React Flow: trigger node changes",k),N?.(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:N,setEdges:M,edges:j,hasDefaultEdges:O,debug:U}=x();if(k?.length){if(O){const H=VP(k,j);M(H)}U&&console.log("React Flow: trigger edge changes",k),N?.(k)}},addSelectedNodes:k=>{const{multiSelectionActive:N,edgeLookup:M,nodeLookup:j,triggerNodeChanges:O,triggerEdgeChanges:U}=x();if(N){const H=k.map(V=>Su(V,!0));O(H);return}O(Ah(j,new Set([...k]),!0)),U(Ah(M))},addSelectedEdges:k=>{const{multiSelectionActive:N,edgeLookup:M,nodeLookup:j,triggerNodeChanges:O,triggerEdgeChanges:U}=x();if(N){const H=k.map(V=>Su(V,!0));U(H);return}U(Ah(M,new Set([...k]))),O(Ah(j,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:N}={})=>{const{edges:M,nodes:j,nodeLookup:O,triggerNodeChanges:U,triggerEdgeChanges:H}=x(),V=k||j,Q=N||M,Y=V.map(se=>{const ce=O.get(se.id);return ce&&(ce.selected=!1),Su(se.id,!1)}),ee=Q.map(se=>Su(se.id,!1));U(Y),H(ee)},setMinZoom:k=>{const{panZoom:N,maxZoom:M}=x();N?.setScaleExtent([k,M]),E({minZoom:k})},setMaxZoom:k=>{const{panZoom:N,minZoom:M}=x();N?.setScaleExtent([M,k]),E({maxZoom:k})},setTranslateExtent:k=>{x().panZoom?.setTranslateExtent(k),E({translateExtent:k})},setPaneClickDistance:k=>{x().panZoom?.setClickDistance(k)},resetSelectedElements:()=>{const{edges:k,nodes:N,triggerNodeChanges:M,triggerEdgeChanges:j,elementsSelectable:O}=x();if(!O)return;const U=N.reduce((V,Q)=>Q.selected?[...V,Su(Q.id,!1)]:V,[]),H=k.reduce((V,Q)=>Q.selected?[...V,Su(Q.id,!1)]:V,[]);M(U),j(H)},setNodeExtent:k=>{const{nodes:N,nodeLookup:M,parentLookup:j,nodeOrigin:O,elevateNodesOnSelect:U,nodeExtent:H}=x();k[0][0]===H[0][0]&&k[0][1]===H[0][1]&&k[1][0]===H[1][0]&&k[1][1]===H[1][1]||(UE(N,M,j,{nodeOrigin:O,nodeExtent:k,elevateNodesOnSelect:U,checkEquality:!1}),E({nodeExtent:k}))},panBy:k=>{const{transform:N,width:M,height:j,panZoom:O,translateExtent:U}=x();return U$({delta:k,panZoom:O,transform:N,translateExtent:U,width:M,height:j})},setCenter:async(k,N,M)=>{const{width:j,height:O,maxZoom:U,panZoom:H}=x();if(!H)return Promise.resolve(!1);const V=typeof M?.zoom<"u"?M.zoom:U;return await H.setViewport({x:j/2-k*V,y:O/2-N*V,zoom:V},{duration:M?.duration,ease:M?.ease,interpolate:M?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{E({connection:{...mP}})},updateConnection:k=>{E({connection:k})},reset:()=>E({...I_()})}},Object.is);function t7({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:a,initialHeight:c,initialMinZoom:d,initialMaxZoom:m,initialFitViewOptions:p,fitView:y,nodeOrigin:v,nodeExtent:b,children:E}){const[x]=_.useState(()=>e7({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:a,height:c,fitView:y,minZoom:d,maxZoom:m,fitViewOptions:p,nodeOrigin:v,nodeExtent:b}));return h.jsx(b9,{value:x,children:h.jsx(G9,{children:E})})}function n7({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:a,width:c,height:d,fitView:m,fitViewOptions:p,minZoom:y,maxZoom:v,nodeOrigin:b,nodeExtent:E}){return _.useContext(DC)?h.jsx(h.Fragment,{children:t}):h.jsx(t7,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:a,initialWidth:c,initialHeight:d,fitView:m,initialFitViewOptions:p,initialMinZoom:y,initialMaxZoom:v,nodeOrigin:b,nodeExtent:E,children:t})}const r7={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function o7({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:c,edgeTypes:d,onNodeClick:m,onEdgeClick:p,onInit:y,onMove:v,onMoveStart:b,onMoveEnd:E,onConnect:x,onConnectStart:I,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:M,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:U,onNodeContextMenu:H,onNodeDoubleClick:V,onNodeDragStart:Q,onNodeDrag:Y,onNodeDragStop:ee,onNodesDelete:se,onEdgesDelete:ce,onDelete:te,onSelectionChange:re,onSelectionDragStart:G,onSelectionDrag:J,onSelectionDragStop:D,onSelectionContextMenu:F,onSelectionStart:$,onSelectionEnd:X,onBeforeDelete:z,connectionMode:W,connectionLineType:ue=ul.Bezier,connectionLineStyle:de,connectionLineComponent:ge,connectionLineContainerStyle:Ne,deleteKeyCode:Ee="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:Ce=!1,selectionMode:De=yg.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:be=Cg()?"Meta":"Control",zoomActivationKeyCode:Oe=Cg()?"Meta":"Control",snapToGrid:Le,snapGrid:fe,onlyRenderVisibleElements:Me=!1,selectNodesOnDrag:He,nodesDraggable:Ke,autoPanOnNodeFocus:ze,nodesConnectable:et,nodesFocusable:lt,nodeOrigin:Tt=GP,edgesFocusable:gt,edgesReconnectable:Pt,elementsSelectable:yt=!0,defaultViewport:Nn=P9,minZoom:tn=.5,maxZoom:Ht=2,translateExtent:Fn=pg,preventScrolling:_n=!0,nodeExtent:yo,defaultMarkerColor:cs="#b1b1b7",zoomOnScroll:Za=!0,zoomOnPinch:mi=!0,panOnScroll:gi=!1,panOnScrollSpeed:On=.5,panOnScrollMode:pi=Ru.Free,zoomOnDoubleClick:vo=!0,panOnDrag:ea=!0,onPaneClick:yi,onPaneMouseEnter:ls,onPaneMouseMove:Bo,onPaneMouseLeave:Co,onPaneScroll:ta,onPaneContextMenu:na,paneClickDistance:st=0,nodeClickDistance:zo=0,children:Sl,onReconnect:nt,onReconnectStart:af,onReconnectEnd:Mn,onEdgeContextMenu:ke,onEdgeDoubleClick:Cn,onEdgeMouseEnter:Pn,onEdgeMouseMove:ec,onEdgeMouseLeave:xl,reconnectRadius:tc=10,onNodesChange:us,onEdgesChange:Fo,noDragClassName:vi="nodrag",noWheelClassName:lr="nowheel",noPanClassName:jr="nopan",fitView:eo,fitViewOptions:br,connectOnClick:nn,attributionPosition:ds,proOptions:ra,defaultEdgeOptions:Er,elevateNodesOnSelect:Hr,elevateEdgesOnSelect:oa,disableKeyboardA11y:Ci=!1,autoPanOnConnect:Ko,autoPanOnNodeDrag:ia,autoPanSpeed:Go,connectionRadius:wo,isValidConnection:ur,onError:wi,style:hs,id:Br,nodeDragThreshold:bi,connectionDragThreshold:_l,viewport:Gt,onViewportChange:ed,width:Kn,height:bt,colorMode:Gn="light",debug:rn,onScroll:nc,ariaLabelConfig:Ei,...kl},wn){const sa=Br||"1",Il=j9(Gn),rc=_.useCallback(qo=>{qo.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),nc?.(qo)},[nc]);return h.jsx("div",{"data-testid":"rf__wrapper",...kl,onScroll:rc,style:{...hs,...r7},ref:wn,className:zn(["react-flow",a,Il]),id:Br,role:"application",children:h.jsxs(n7,{nodes:t,edges:e,width:Kn,height:bt,fitView:eo,fitViewOptions:br,minZoom:tn,maxZoom:Ht,nodeOrigin:Tt,nodeExtent:yo,children:[h.jsx(ZV,{onInit:y,onNodeClick:m,onEdgeClick:p,onNodeMouseEnter:j,onNodeMouseMove:O,onNodeMouseLeave:U,onNodeContextMenu:H,onNodeDoubleClick:V,nodeTypes:c,edgeTypes:d,connectionLineType:ue,connectionLineStyle:de,connectionLineComponent:ge,connectionLineContainerStyle:Ne,selectionKeyCode:le,selectionOnDrag:Ce,selectionMode:De,deleteKeyCode:Ee,multiSelectionKeyCode:be,panActivationKeyCode:we,zoomActivationKeyCode:Oe,onlyRenderVisibleElements:Me,defaultViewport:Nn,translateExtent:Fn,minZoom:tn,maxZoom:Ht,preventScrolling:_n,zoomOnScroll:Za,zoomOnPinch:mi,zoomOnDoubleClick:vo,panOnScroll:gi,panOnScrollSpeed:On,panOnScrollMode:pi,panOnDrag:ea,onPaneClick:yi,onPaneMouseEnter:ls,onPaneMouseMove:Bo,onPaneMouseLeave:Co,onPaneScroll:ta,onPaneContextMenu:na,paneClickDistance:st,nodeClickDistance:zo,onSelectionContextMenu:F,onSelectionStart:$,onSelectionEnd:X,onReconnect:nt,onReconnectStart:af,onReconnectEnd:Mn,onEdgeContextMenu:ke,onEdgeDoubleClick:Cn,onEdgeMouseEnter:Pn,onEdgeMouseMove:ec,onEdgeMouseLeave:xl,reconnectRadius:tc,defaultMarkerColor:cs,noDragClassName:vi,noWheelClassName:lr,noPanClassName:jr,rfId:sa,disableKeyboardA11y:Ci,nodeExtent:yo,viewport:Gt,onViewportChange:ed}),h.jsx(U9,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:x,onConnectStart:I,onConnectEnd:k,onClickConnectStart:N,onClickConnectEnd:M,nodesDraggable:Ke,autoPanOnNodeFocus:ze,nodesConnectable:et,nodesFocusable:lt,edgesFocusable:gt,edgesReconnectable:Pt,elementsSelectable:yt,elevateNodesOnSelect:Hr,elevateEdgesOnSelect:oa,minZoom:tn,maxZoom:Ht,nodeExtent:yo,onNodesChange:us,onEdgesChange:Fo,snapToGrid:Le,snapGrid:fe,connectionMode:W,translateExtent:Fn,connectOnClick:nn,defaultEdgeOptions:Er,fitView:eo,fitViewOptions:br,onNodesDelete:se,onEdgesDelete:ce,onDelete:te,onNodeDragStart:Q,onNodeDrag:Y,onNodeDragStop:ee,onSelectionDrag:J,onSelectionDragStart:G,onSelectionDragStop:D,onMove:v,onMoveStart:b,onMoveEnd:E,noPanClassName:jr,nodeOrigin:Tt,rfId:sa,autoPanOnConnect:Ko,autoPanOnNodeDrag:ia,autoPanSpeed:Go,onError:wi,connectionRadius:wo,isValidConnection:ur,selectNodesOnDrag:He,nodeDragThreshold:bi,connectionDragThreshold:_l,onBeforeDelete:z,paneClickDistance:st,debug:rn,ariaLabelConfig:Ei}),h.jsx(M9,{onSelectionChange:re}),Sl,h.jsx(k9,{proOptions:ra,position:ds}),h.jsx(_9,{rfId:sa,disableKeyboardA11y:Ci})]})})}var i7=YP(o7);function s7(t){const[e,n]=_.useState(t),r=_.useCallback(a=>n(c=>$P(a,c)),[]);return[e,n,r]}function a7(t){const[e,n]=_.useState(t),r=_.useCallback(a=>n(c=>VP(a,c)),[]);return[e,n,r]}function c7({dimensions:t,lineWidth:e,variant:n,className:r}){return h.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:zn(["react-flow__background-pattern",n,r])})}function l7({radius:t,className:e}){return h.jsx("circle",{cx:t,cy:t,r:t,className:zn(["react-flow__background-pattern","dots",e])})}var qa;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(qa||(qa={}));const u7={[qa.Dots]:1,[qa.Lines]:1,[qa.Cross]:6},d7=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function v1({id:t,variant:e=qa.Dots,gap:n=20,size:r,lineWidth:a=1,offset:c=0,color:d,bgColor:m,style:p,className:y,patternClassName:v}){const b=_.useRef(null),{transform:E,patternId:x}=_t(d7,xn),I=r||u7[e],k=e===qa.Dots,N=e===qa.Cross,M=Array.isArray(n)?n:[n,n],j=[M[0]*E[2]||1,M[1]*E[2]||1],O=I*E[2],U=Array.isArray(c)?c:[c,c],H=N?[O,O]:j,V=[U[0]*E[2]||1+H[0]/2,U[1]*E[2]||1+H[1]/2],Q=`${x}${t||""}`;return h.jsxs("svg",{className:zn(["react-flow__background",y]),style:{...p,...UC,"--xy-background-color-props":m,"--xy-background-pattern-color-props":d},ref:b,"data-testid":"rf__background",children:[h.jsx("pattern",{id:Q,x:E[0]%j[0],y:E[1]%j[1],width:j[0],height:j[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${V[0]},-${V[1]})`,children:k?h.jsx(l7,{radius:O/2,className:v}):h.jsx(c7,{dimensions:H,lineWidth:a,variant:e,className:v})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${Q})`})]})}v1.displayName="Background";const h7=_.memo(v1);function f7(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function m7(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function g7(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function p7(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function y7(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ay({children:t,className:e,...n}){return h.jsx("button",{type:"button",className:zn(["react-flow__controls-button",e]),...n,children:t})}const v7=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function C1({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:c,onZoomOut:d,onFitView:m,onInteractiveChange:p,className:y,children:v,position:b="bottom-left",orientation:E="vertical","aria-label":x}){const I=vn(),{isInteractive:k,minZoomReached:N,maxZoomReached:M,ariaLabelConfig:j}=_t(v7,xn),{zoomIn:O,zoomOut:U,fitView:H}=Ug(),V=()=>{O(),c?.()},Q=()=>{U(),d?.()},Y=()=>{H(a),m?.()},ee=()=>{I.setState({nodesDraggable:!k,nodesConnectable:!k,elementsSelectable:!k}),p?.(!k)},se=E==="horizontal"?"horizontal":"vertical";return h.jsxs(LC,{className:zn(["react-flow__controls",se,y]),position:b,style:t,"data-testid":"rf__controls","aria-label":x??j["controls.ariaLabel"],children:[e&&h.jsxs(h.Fragment,{children:[h.jsx(Ay,{onClick:V,className:"react-flow__controls-zoomin",title:j["controls.zoomIn.ariaLabel"],"aria-label":j["controls.zoomIn.ariaLabel"],disabled:M,children:h.jsx(f7,{})}),h.jsx(Ay,{onClick:Q,className:"react-flow__controls-zoomout",title:j["controls.zoomOut.ariaLabel"],"aria-label":j["controls.zoomOut.ariaLabel"],disabled:N,children:h.jsx(m7,{})})]}),n&&h.jsx(Ay,{className:"react-flow__controls-fitview",onClick:Y,title:j["controls.fitView.ariaLabel"],"aria-label":j["controls.fitView.ariaLabel"],children:h.jsx(g7,{})}),r&&h.jsx(Ay,{className:"react-flow__controls-interactive",onClick:ee,title:j["controls.interactive.ariaLabel"],"aria-label":j["controls.interactive.ariaLabel"],children:k?h.jsx(y7,{}):h.jsx(p7,{})}),v]})}C1.displayName="Controls";const C7=_.memo(C1);function w7({id:t,x:e,y:n,width:r,height:a,style:c,color:d,strokeColor:m,strokeWidth:p,className:y,borderRadius:v,shapeRendering:b,selected:E,onClick:x}){const{background:I,backgroundColor:k}=c||{},N=d||I||k;return h.jsx("rect",{className:zn(["react-flow__minimap-node",{selected:E},y]),x:e,y:n,rx:v,ry:v,width:r,height:a,style:{fill:N,stroke:m,strokeWidth:p},shapeRendering:b,onClick:x?M=>x(M,t):void 0})}const b7=_.memo(w7),E7=t=>t.nodes.map(e=>e.id),jb=t=>t instanceof Function?t:()=>t;function A7({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a,nodeComponent:c=b7,onClick:d}){const m=_t(E7,xn),p=jb(e),y=jb(t),v=jb(n),b=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:m.map(E=>h.jsx(S7,{id:E,nodeColorFunc:p,nodeStrokeColorFunc:y,nodeClassNameFunc:v,nodeBorderRadius:r,nodeStrokeWidth:a,NodeComponent:c,onClick:d,shapeRendering:b},E))})}function T7({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:a,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:m,onClick:p}){const{node:y,x:v,y:b,width:E,height:x}=_t(I=>{const{internals:k}=I.nodeLookup.get(t),N=k.userNode,{x:M,y:j}=k.positionAbsolute,{width:O,height:U}=Ja(N);return{node:N,x:M,y:j,width:O,height:U}},xn);return!y||y.hidden||!bP(y)?null:h.jsx(m,{x:v,y:b,width:E,height:x,style:y.style,selected:!!y.selected,className:r(y),color:e(y),borderRadius:a,strokeColor:n(y),strokeWidth:c,shapeRendering:d,onClick:p,id:y.id})}const S7=_.memo(T7);var x7=_.memo(A7);const _7=200,k7=150,I7=t=>!t.hidden,R7=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?wP(Pg(t.nodeLookup,{filter:I7}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},N7="react-flow__minimap-desc";function w1({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:a="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:m,bgColor:p,maskColor:y,maskStrokeColor:v,maskStrokeWidth:b,position:E="bottom-right",onClick:x,onNodeClick:I,pannable:k=!1,zoomable:N=!1,ariaLabel:M,inversePan:j,zoomStep:O=1,offsetScale:U=5}){const H=vn(),V=_.useRef(null),{boundingRect:Q,viewBB:Y,rfId:ee,panZoom:se,translateExtent:ce,flowWidth:te,flowHeight:re,ariaLabelConfig:G}=_t(R7,xn),J=t?.width??_7,D=t?.height??k7,F=Q.width/J,$=Q.height/D,X=Math.max(F,$),z=X*J,W=X*D,ue=U*X,de=Q.x-(z-Q.width)/2-ue,ge=Q.y-(W-Q.height)/2-ue,Ne=z+ue*2,Ee=W+ue*2,le=`${N7}-${ee}`,Ce=_.useRef(0),De=_.useRef();Ce.current=X,_.useEffect(()=>{if(V.current&&se)return De.current=$$({domNode:V.current,panZoom:se,getTransform:()=>H.getState().transform,getViewScale:()=>Ce.current}),()=>{De.current?.destroy()}},[se]),_.useEffect(()=>{De.current?.update({translateExtent:ce,width:te,height:re,inversePan:j,pannable:k,zoomStep:O,zoomable:N})},[k,N,j,O,ce,te,re]);const we=x?Le=>{const[fe,Me]=De.current?.pointer(Le)||[0,0];x(Le,{x:fe,y:Me})}:void 0,be=I?_.useCallback((Le,fe)=>{const Me=H.getState().nodeLookup.get(fe).internals.userNode;I(Le,Me)},[]):void 0,Oe=M??G["minimap.ariaLabel"];return h.jsx(LC,{position:E,style:{...t,"--xy-minimap-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-background-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-color-props":typeof v=="string"?v:void 0,"--xy-minimap-mask-stroke-width-props":typeof b=="number"?b*X:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:zn(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:J,height:D,viewBox:`${de} ${ge} ${Ne} ${Ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:V,onClick:we,children:[Oe&&h.jsx("title",{id:le,children:Oe}),h.jsx(x7,{onClick:be,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:c,nodeClassName:a,nodeStrokeWidth:d,nodeComponent:m}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${de-ue},${ge-ue}h${Ne+ue*2}v${Ee+ue*2}h${-Ne-ue*2}z
        M${Y.x},${Y.y}h${Y.width}v${Y.height}h${-Y.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}w1.displayName="MiniMap";const O7=_.memo(w1),M7=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,P7={[Yh.Line]:"right",[Yh.Handle]:"bottom-right"};function D7({nodeId:t,position:e,variant:n=Yh.Handle,className:r,style:a=void 0,children:c,color:d,minWidth:m=10,minHeight:p=10,maxWidth:y=Number.MAX_VALUE,maxHeight:v=Number.MAX_VALUE,keepAspectRatio:b=!1,resizeDirection:E,autoScale:x=!0,shouldResize:I,onResizeStart:k,onResize:N,onResizeEnd:M}){const j=JP(),O=typeof t=="string"?t:j,U=vn(),H=_.useRef(null),V=n===Yh.Handle,Q=_t(_.useCallback(M7(V&&x),[V,x]),xn),Y=_.useRef(null),ee=e??P7[n];_.useEffect(()=>{if(!(!H.current||!O))return Y.current||(Y.current=c9({domNode:H.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:ce,transform:te,snapGrid:re,snapToGrid:G,nodeOrigin:J,domNode:D}=U.getState();return{nodeLookup:ce,transform:te,snapGrid:re,snapToGrid:G,nodeOrigin:J,paneDomNode:D}},onChange:(ce,te)=>{const{triggerNodeChanges:re,nodeLookup:G,parentLookup:J,nodeOrigin:D}=U.getState(),F=[],$={x:ce.x,y:ce.y},X=G.get(O);if(X&&X.expandParent&&X.parentId){const z=X.origin??D,W=ce.width??X.measured.width??0,ue=ce.height??X.measured.height??0,de={id:X.id,parentId:X.parentId,rect:{width:W,height:ue,...EP({x:ce.x??X.position.x,y:ce.y??X.position.y},{width:W,height:ue},X.parentId,G,z)}},ge=tS([de],G,J,D);F.push(...ge),$.x=ce.x?Math.max(z[0]*W,ce.x):void 0,$.y=ce.y?Math.max(z[1]*ue,ce.y):void 0}if($.x!==void 0&&$.y!==void 0){const z={id:O,type:"position",position:{...$}};F.push(z)}if(ce.width!==void 0&&ce.height!==void 0){const W={id:O,type:"dimensions",resizing:!0,setAttributes:E?E==="horizontal"?"width":"height":!0,dimensions:{width:ce.width,height:ce.height}};F.push(W)}for(const z of te){const W={...z,type:"position"};F.push(W)}re(F)},onEnd:({width:ce,height:te})=>{const re={id:O,type:"dimensions",resizing:!1,dimensions:{width:ce,height:te}};U.getState().triggerNodeChanges([re])}})),Y.current.update({controlPosition:ee,boundaries:{minWidth:m,minHeight:p,maxWidth:y,maxHeight:v},keepAspectRatio:b,resizeDirection:E,onResizeStart:k,onResize:N,onResizeEnd:M,shouldResize:I}),()=>{Y.current?.destroy()}},[ee,m,p,y,v,b,k,N,M,I]);const se=ee.split("-");return h.jsx("div",{className:zn(["react-flow__resize-control","nodrag",...se,n,r]),ref:H,style:{...a,scale:Q,...d&&{[V?"backgroundColor":"borderColor"]:d}},children:c})}_.memo(D7);const L7=t=>{switch(t){case"running":return{borderColor:"border-[#643FB2] dark:border-[#8B5CF6]",glow:"shadow-lg shadow-[#643FB2]/20",badgeColor:"bg-[#643FB2] dark:bg-[#8B5CF6]"};case"completed":return{borderColor:"border-green-500 dark:border-green-400",glow:"shadow-lg shadow-green-500/20",badgeColor:"bg-green-500 dark:bg-green-400"};case"failed":return{borderColor:"border-red-500 dark:border-red-400",glow:"shadow-lg shadow-red-500/20",badgeColor:"bg-red-500 dark:bg-red-400"};case"cancelled":return{borderColor:"border-orange-500 dark:border-orange-400",glow:"shadow-lg shadow-orange-500/20",badgeColor:"bg-orange-500 dark:bg-orange-400"};case"pending":default:return{borderColor:"border-gray-300 dark:border-gray-600",glow:"",badgeColor:"bg-gray-400 dark:bg-gray-500"}}},b1=_.memo(({data:t,selected:e})=>{const n=t,r=L7(n.state),a=n.inputData||n.outputData||n.error,c=n.state==="running",d=n.layoutDirection==="TB",m=d?Je.Top:Je.Left,p=d?Je.Bottom:Je.Right,y=()=>{const v=[];if(n.error&&typeof n.error=="string"&&v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"Error:"}),h.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/20 p-2 rounded border border-red-200 dark:border-red-800",children:n.error})]},"error")),n.outputData)try{const b=typeof n.outputData=="string"?n.outputData:JSON.stringify(n.outputData,null,2);v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-green-50 dark:bg-green-950/20 p-2 rounded border border-green-200 dark:border-green-800 max-h-20 overflow-auto",children:h.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:b})})]},"output"))}catch{v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-green-50 dark:bg-green-950/20 p-2 rounded border border-green-200 dark:border-green-800",children:"[Unable to display output data]"})]},"output"))}if(n.inputData)try{const b=typeof n.inputData=="string"?n.inputData:JSON.stringify(n.inputData,null,2);v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Input:"}),h.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-blue-50 dark:bg-blue-950/20 p-2 rounded border border-blue-200 dark:border-blue-800 max-h-20 overflow-auto",children:h.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:b})})]},"input"))}catch{v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Input:"}),h.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-950/20 p-2 rounded border border-blue-200 dark:border-blue-800",children:"[Unable to display input data]"})]},"input"))}return v.length>0?v:null};return h.jsxs("div",{className:At("group relative w-64 bg-card dark:bg-card rounded border-2 transition-all duration-200",r.borderColor,e?"ring-2 ring-blue-500 ring-offset-2":"",c?r.glow:"shadow-sm"),children:[!n.isStartNode&&h.jsx(Qh,{type:"target",position:m,className:"!w-2 !h-2 !rounded-full !border !border-gray-600 dark:!border-gray-500 transition-colors !min-w-0 !min-h-0",style:{backgroundColor:n.state==="running"?"#643FB2":n.state==="completed"?"#10b981":n.state==="failed"?"#ef4444":n.state==="cancelled"?"#f97316":"#4b5563"}}),!n.isEndNode&&h.jsx(Qh,{type:"source",position:p,className:"!w-2 !h-2 !rounded-full !border !border-gray-600 dark:!border-gray-500 transition-colors !min-w-0 !min-h-0",style:{backgroundColor:n.state==="running"?"#643FB2":n.state==="completed"?"#10b981":n.state==="failed"?"#ef4444":n.state==="cancelled"?"#f97316":"#4b5563"}}),h.jsxs("div",{className:"p-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsxs("div",{className:"flex-shrink-0 relative",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-900/90 dark:bg-gray-800/90 flex items-center justify-center",children:n.isStartNode?h.jsx(Yz,{className:"w-5 h-5 text-[#643FB2] dark:text-[#8B5CF6]"}):h.jsx(Hu,{className:"w-5 h-5 text-gray-300 dark:text-gray-400"})}),c&&h.jsx("div",{className:At("absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse",r.badgeColor)})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:n.name||n.executorId}),n.executorType&&h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5",children:n.executorType})]})]}),a&&h.jsx("div",{className:"mt-3",children:y()}),c&&h.jsx("div",{className:"absolute inset-0 rounded border-2 border-[#643FB2]/30 dark:border-[#8B5CF6]/30 animate-pulse pointer-events-none"})]})]})});b1.displayName="ExecutorNode";function U7(t,e,n="LR"){if(t.length===0)return t;if(t.length===1)return t.map(I=>({...I,position:{x:0,y:0}}));const r=new Map,a=new Map;t.forEach(I=>{r.set(I.id,[]),a.set(I.id,[])}),e.forEach(I=>{r.get(I.source)?.push(I.target),a.get(I.target)?.push(I.source)});const c=t.filter(I=>(a.get(I.id)||[]).length===0);c.length===0&&c.push(t[0]);const d=220,m=120,p=n==="LR"?350:280,y=n==="TB"?250:180,v=new Map,b=new Map,E=[],x=new Set;for(c.forEach(I=>{E.push({nodeId:I.id,level:0})});E.length>0;){const{nodeId:I,level:k}=E.shift();if(x.has(I))continue;x.add(I),b.has(k)||b.set(k,[]),b.get(k).push(I),(r.get(I)||[]).forEach(M=>{x.has(M)||E.push({nodeId:M,level:k+1})})}return t.forEach(I=>{if(!x.has(I.id)){const N=Math.max(...Array.from(b.keys()),-1)+1;b.has(N)||b.set(N,[]),b.get(N).push(I.id)}}),b.forEach((I,k)=>{const N=I.length;I.forEach((M,j)=>{let O,U;n==="LR"?(O=k*p,U=-((N-1)*y)/2+j*y):(U=k*y,O=-((N-1)*p)/2+j*p),v.set(M,{x:O,y:U,level:k})})}),t.map(I=>{const k=v.get(I.id)||{x:0,y:0};return{...I,position:{x:k.x-d/2,y:k.y-m/2}}})}function j7(t){return typeof t=="object"&&t!==null&&"id"in t&&"edge_groups"in t&&"executors"in t&&"start_executor_id"in t&&"max_iterations"in t&&typeof t.id=="string"&&Array.isArray(t.edge_groups)&&typeof t.executors=="object"&&typeof t.start_executor_id=="string"&&typeof t.max_iterations=="number"}function E1(t){return j7(t)?t:null}function BE(t,e,n){if(!t)return console.warn("convertWorkflowDumpToNodes: workflowDump is undefined"),[];const r=E1(t);let a,c;return r?(a=Object.values(r.executors).map(m=>({id:m.id,type:m.type,name:m.name||m.id,description:m.description,config:m.config})),c=r.start_executor_id):(a=A1(t),c=t?.start_executor_id),!a||!Array.isArray(a)||a.length===0?(console.warn("No executors found in workflow dump. Available keys:",Object.keys(t)),[]):a.map(m=>({id:m.id,type:"executor",position:{x:0,y:0},data:{executorId:m.id,executorType:m.type,name:m.name||m.id,state:"pending",isStartNode:m.id===c,layoutDirection:n||"LR",onNodeClick:e}}))}function zE(t){if(!t)return console.warn("convertWorkflowDumpToEdges: workflowDump is undefined"),[];const e=E1(t);let n;return e?(n=[],e.edge_groups.forEach(a=>{a.edges.forEach(c=>{n.push({source:c.source_id,target:c.target_id,condition:c.condition_name})})})):n=T1(t),!n||!Array.isArray(n)||n.length===0?(console.warn("No connections found in workflow dump. Available keys:",Object.keys(t)),[]):n.map(a=>({id:`${a.source}-${a.target}`,source:a.source,target:a.target,type:"default",animated:!1,style:{stroke:"#6b7280",strokeWidth:2}}))}function A1(t){if(t.executors&&typeof t.executors=="object"&&!Array.isArray(t.executors)){const r=t.executors;return Object.entries(r).map(([a,c])=>({id:a,type:c.type_||c.type||"executor",name:c.name||a,description:c.description,config:c.config}))}const e=["executors","agents","steps","nodes"];for(const r of e)if(t[r]&&Array.isArray(t[r]))return t[r];if(t.config&&typeof t.config=="object")return A1(t.config);const n=[];return Object.entries(t).forEach(([r,a])=>{if(typeof a=="object"&&a!==null&&("type"in a||"type_"in a)){const c=a;n.push({id:r,type:c.type_||c.type||"executor",name:c.name||r,description:c.description,config:c.config})}}),n}function T1(t){if(t.edge_groups&&Array.isArray(t.edge_groups)){const n=[];return t.edge_groups.forEach(r=>{if(typeof r=="object"&&r!==null&&"edges"in r){const a=r.edges;Array.isArray(a)&&a.forEach(c=>{if(typeof c=="object"&&c!==null&&"source_id"in c&&"target_id"in c){const d=c;n.push({source:d.source_id,target:d.target_id,condition:d.condition_name||void 0})}})}}),n}const e=["connections","edges","transitions","links"];for(const n of e)if(t[n]&&Array.isArray(t[n]))return t[n];return t.config&&typeof t.config=="object"?T1(t.config):[]}function FE(t,e,n="LR"){return U7(t,e,n)}function H7(t,e){const n={};let r=!1;return t.forEach(a=>{if(a.type==="response.workflow_event.complete"&&"data"in a&&a.data){const d=a.data,m=d.executor_id,p=d.event_type,y=d.data;let v="pending",b;p==="ExecutorInvokedEvent"?v="running":p==="ExecutorCompletedEvent"?v="completed":p?.includes("Error")||p?.includes("Failed")?(v="failed",b=typeof y=="string"?y:"Execution failed"):p?.includes("Cancel")?v="cancelled":p==="WorkflowCompletedEvent"||p==="WorkflowOutputEvent"?v="completed":p==="WorkflowStartedEvent"&&(r=!0),m&&(n[m]={nodeId:m,state:v,data:y,error:b,timestamp:new Date().toISOString()})}}),r&&e&&!n[e]&&(n[e]={nodeId:e,state:"running",data:void 0,error:void 0,timestamp:new Date().toISOString()}),n}function B7(t,e){return t.map(n=>{const r=e[n.id];return r?{...n,data:{...n.data,state:r.state,outputData:r.data,error:r.error,layoutDirection:n.data.layoutDirection}}:n})}function z7(t){const e={};return t.forEach(r=>{if(r.type==="response.workflow_event.complete"&&"data"in r&&r.data){const c=r.data,d=c.executor_id,m=c.event_type;d&&(m==="ExecutorInvokedEvent"||m==="ExecutorCompletedEvent")&&(e[d]={lastEvent:m,timestamp:new Date().toISOString()})}}),Object.entries(e).filter(([,r])=>r.lastEvent==="ExecutorInvokedEvent").map(([r])=>r)}function F7(t,e){const n=z7(e),r={};return e.forEach(a=>{if(a.type==="response.workflow_event.complete"&&"data"in a&&a.data){const d=a.data,m=d.executor_id,p=d.event_type;m&&p&&(r[m]||(r[m]={completed:!1,invoked:!1}),p==="ExecutorInvokedEvent"?r[m].invoked=!0:p==="ExecutorCompletedEvent"&&(r[m].completed=!0))}}),t.map(a=>{const c=r[a.source],d=r[a.target],m=n.includes(a.target);let p={...a.style},y=!1;return c?.completed&&m?(p={stroke:"#643FB2",strokeWidth:3,strokeDasharray:"5,5"},y=!0):c?.completed&&d?.completed?p={stroke:"#10b981",strokeWidth:2}:c?.completed&&d?.invoked?p={stroke:"#f59e0b",strokeWidth:2}:p={stroke:"#6b7280",strokeWidth:2},{...a,style:p,animated:y}})}const K7={executor:b1};function G7({workflowDump:t,onNodeSelect:e,viewOptions:n,onToggleViewOption:r,layoutDirection:a,onLayoutDirectionChange:c}){const{fitView:d,setViewport:m,setNodes:p}=Ug(),y=()=>{m({x:0,y:0,zoom:1})},v=()=>{d({padding:.2})},b=()=>{if(!t)return;const E=BE(t,e,a),x=zE(t),I=FE(E,x,a);p(I)};return h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsxs(pC,{children:[h.jsx(yC,{asChild:!0,children:h.jsxs(wt,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-white/90 backdrop-blur-sm border-gray-200 shadow-sm hover:bg-white dark:bg-gray-800/90 dark:border-gray-600 dark:hover:bg-gray-800",children:[h.jsx(Hz,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"View options"})]})}),h.jsxs(vC,{align:"end",className:"w-56",children:[h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("showMinimap"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(oF,{className:"mr-2 h-4 w-4"}),"Show Minimap"]}),h.jsx(Hm,{checked:n.showMinimap,onChange:()=>{}})]}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("showGrid"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx($z,{className:"mr-2 h-4 w-4"}),"Show Grid"]}),h.jsx(Hm,{checked:n.showGrid,onChange:()=>{}})]}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("animateRun"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(tO,{className:"mr-2 h-4 w-4"}),"Animate Run"]}),h.jsx(Hm,{checked:n.animateRun,onChange:()=>{}})]}),h.jsx(Hh,{}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>{const E=a==="LR"?"TB":"LR";if(c?.(E),t){const x=BE(t,e,E),I=zE(t),k=FE(x,I,E);p(k)}},children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Cz,{className:"mr-2 h-4 w-4"}),"Vertical Layout"]}),h.jsx(Hm,{checked:a==="TB",onChange:()=>{}})]}),h.jsx(Hh,{}),h.jsxs(Ur,{onClick:y,children:[h.jsx(_T,{className:"mr-2 h-4 w-4"}),"Reset Zoom"]}),h.jsxs(Ur,{onClick:v,children:[h.jsx(aF,{className:"mr-2 h-4 w-4"}),"Fit to Screen"]}),h.jsxs(Ur,{onClick:b,children:[h.jsx(MF,{className:"mr-2 h-4 w-4"}),"Auto-arrange"]})]})]})})}function q7({nodes:t,nodeUpdates:e,isStreaming:n,animateRun:r}){const{fitView:a}=Ug();return _.useEffect(()=>{if(r)if(n){const c=t.filter(d=>d.data.state==="running");if(c.length>0){const d=c[0];a({nodes:[d],duration:800,padding:.3,minZoom:.8,maxZoom:1.5})}}else t.length>0&&a({duration:1e3,padding:.2})},[e,n,r,t]),null}const $7=_.memo(function({workflowDump:e,events:n,isStreaming:r,onNodeSelect:a,className:c="",viewOptions:d={showMinimap:!1,showGrid:!0,animateRun:!0},onToggleViewOption:m,layoutDirection:p="LR",onLayoutDirectionChange:y}){const{initialNodes:v,initialEdges:b}=_.useMemo(()=>{if(!e)return{initialNodes:[],initialEdges:[]};const U=BE(e,a,p),H=zE(e);return{initialNodes:U.length>0?FE(U,H,p):U,initialEdges:H}},[e,a,p]),[E,x,I]=s7(v),[k,N,M]=a7(b),j=_.useMemo(()=>H7(n,e?.start_executor_id),[n,e?.start_executor_id]);_.useMemo(()=>{Object.keys(j).length>0?x(U=>B7(U,j)):n.length===0&&x(U=>U.map(H=>({...H,data:{...H.data,state:"pending",outputData:void 0,error:void 0}})))},[j,x,n.length]),_.useMemo(()=>{n.length>0?N(U=>F7(U,n)):N(U=>U.map(H=>({...H,animated:!1,style:{stroke:"#6b7280",strokeWidth:2}})))},[n,N]),_.useEffect(()=>{v.length>0&&(x(v),N(b))},[e]);const O=_.useCallback((U,H)=>{U.stopPropagation(),a?.(H.data.executorId,H.data)},[a]);return e?v.length===0?h.jsx("div",{className:`flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 ${c}`,children:h.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[h.jsx("div",{className:"text-lg font-medium mb-2",children:"No Executors Found"}),h.jsx("div",{className:"text-sm",children:"Could not extract executors from workflow dump."}),h.jsxs("details",{className:"mt-2 text-xs",children:[h.jsx("summary",{className:"cursor-pointer",children:"Debug Info"}),h.jsx("pre",{className:"mt-1 p-2 bg-gray-100 dark:bg-gray-800 rounded text-left overflow-auto",children:JSON.stringify(e,null,2)})]})]})}):h.jsxs("div",{className:`h-full w-full ${c}`,children:[h.jsxs(i7,{nodes:E,edges:k,onNodesChange:I,onEdgesChange:M,onNodeClick:O,nodeTypes:K7,fitView:!0,fitViewOptions:{padding:.2},minZoom:.1,maxZoom:1.5,defaultEdgeOptions:{type:"default",animated:!1,style:{stroke:"#6b7280",strokeWidth:2}},nodesDraggable:!r,nodesConnectable:!1,elementsSelectable:!0,proOptions:{hideAttribution:!0},children:[d.showGrid&&h.jsx(h7,{variant:qa.Dots,gap:20,size:1,color:"#e5e7eb",className:"dark:opacity-30"}),h.jsx(C7,{position:"bottom-left",showInteractive:!1,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"3px"},className:"dark:!bg-gray-800/90 dark:!border-gray-600"}),d.showMinimap&&h.jsx(O7,{nodeColor:U=>{switch(U.data?.state){case"running":return"#643FB2";case"completed":return"#10b981";case"failed":return"#ef4444";case"cancelled":return"#f97316";default:return"#6b7280"}},maskColor:"rgba(0, 0, 0, 0.1)",position:"bottom-right",style:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"8px"},className:"dark:!bg-gray-800/90 dark:!border-gray-600"}),h.jsx(q7,{nodes:E,nodeUpdates:j,isStreaming:r,animateRun:d.animateRun}),h.jsx(G7,{workflowDump:e,onNodeSelect:a,viewOptions:d,onToggleViewOption:m,layoutDirection:p,onLayoutDirectionChange:y})]}),h.jsx("style",{children:`
        .react-flow__edge-path {
          transition: stroke 0.3s ease, stroke-width 0.3s ease;
        }
        .react-flow__edge.animated .react-flow__edge-path {
          stroke-dasharray: 5 5;
          animation: dash 1s linear infinite;
        }
        @keyframes dash {
          0% { stroke-dashoffset: 0; }
          100% { stroke-dashoffset: -10; }
        }
        
        /* Dark theme styles for React Flow controls */
        .dark .react-flow__controls {
          background-color: rgba(31, 41, 55, 0.9) !important;
          border-color: rgb(75, 85, 99) !important;
        }
        .dark .react-flow__controls-button {
          background-color: rgba(31, 41, 55, 0.9) !important;
          border-color: rgb(75, 85, 99) !important;
          color: rgb(229, 231, 235) !important;
        }
        .dark .react-flow__controls-button:hover {
          background-color: rgba(55, 65, 81, 0.9) !important;
          color: rgb(255, 255, 255) !important;
        }
        .dark .react-flow__controls-button svg {
          fill: rgb(229, 231, 235) !important;
        }
        .dark .react-flow__controls-button:hover svg {
          fill: rgb(255, 255, 255) !important;
        }
      `})]}):h.jsx("div",{className:`flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 ${c}`,children:h.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[h.jsx("div",{className:"text-lg font-medium mb-2",children:"No Workflow Data"}),h.jsx("div",{className:"text-sm",children:"Workflow dump is not available."})]})})});function V7(t,e){const[n,r]=_.useState(null),{executors:a,recentlyActive:c,isWorkflowRunning:d}=_.useMemo(()=>{const v={},b=[];let E=e;return t.forEach(x=>{if(x.type==="response.workflow_event.complete"&&"data"in x&&x.data){const I=x.data,k=I.executor_id;if(!k)return;v[k]||(v[k]={executorId:k,state:"pending",timestamp:new Date().toISOString()});const N=v[k],M=I.event_type;M==="ExecutorInvokedEvent"?(N.state="running",N.inputData=I.data,b.includes(k)||b.push(k)):M==="ExecutorCompletedEvent"?(N.state="completed",N.outputData=I.data):M?.includes("Error")||M?.includes("Failed")?(N.state="failed",N.error=typeof I.data=="string"?I.data:"Execution failed"):M?.includes("Cancel")&&(N.state="cancelled"),N.timestamp=new Date().toISOString()}}),{executors:v,recentlyActive:b.slice(-3),isWorkflowRunning:E}},[t,e]),m=_.useCallback(v=>{r(v)},[]),p=_.useCallback(v=>a[v]||null,[a]),y=_.useCallback(v=>t.filter(b=>b.type==="response.workflow_event.complete"&&"data"in b&&b.data?b.data.executor_id===v:!1),[t]);return{isWorkflowRunning:d,selectedExecutorId:n,recentlyActive:c,selectExecutor:m,getExecutorData:p,getExecutorEvents:y}}function Ty({title:t,icon:e,children:n,className:r=""}){return h.jsxs("div",{className:`border rounded-lg p-4 bg-card ${r}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e,h.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})}function Y7({workflow:t,open:e,onOpenChange:n}){const r=t.source==="directory"?h.jsx(ST,{className:"h-4 w-4 text-muted-foreground"}):t.source==="in_memory"?h.jsx(lg,{className:"h-4 w-4 text-muted-foreground"}):h.jsx(xT,{className:"h-4 w-4 text-muted-foreground"}),a=t.source==="directory"?"Local":t.source==="in_memory"?"In-Memory":"Gallery";return h.jsx(zu,{open:e,onOpenChange:n,children:h.jsxs(Fu,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsx(Gu,{children:"Workflow Details"}),h.jsx(qu,{onClose:()=>n(!1)})]}),h.jsxs("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Hu,{className:"h-6 w-6 text-primary"}),h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name||t.id})]}),t.description&&h.jsx("p",{className:"text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"h-px bg-border mb-6"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[h.jsx(Ty,{title:"Start Executor",icon:h.jsx(Mz,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsx("div",{className:"font-mono text-foreground",children:t.start_executor_id})}),h.jsx(Ty,{title:"Source",icon:r,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-foreground",children:a}),t.module_path&&h.jsx("div",{className:"font-mono text-xs break-all",children:t.module_path})]})}),h.jsx(Ty,{title:"Environment",icon:t.has_env?h.jsx(fC,{className:"h-4 w-4 text-orange-500"}):h.jsx(mv,{className:"h-4 w-4 text-green-500"}),className:"md:col-span-2",children:h.jsx("div",{className:t.has_env?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:t.has_env?"Requires environment variables":"No environment variables required"})})]}),h.jsx(Ty,{title:`Executors (${t.executors.length})`,icon:h.jsx(fE,{className:"h-4 w-4 text-muted-foreground"}),children:t.executors.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:t.executors.map((c,d)=>h.jsx("div",{className:"font-mono text-xs text-foreground bg-muted px-2 py-1 rounded",children:c},d))}):h.jsx("div",{className:"text-muted-foreground",children:"No executors configured"})})]})]})})}function Q7({inputSchema:t,onRun:e,isSubmitting:n,workflowState:r}){const[a,c]=_.useState(!1);_.useEffect(()=>{const E=x=>{x.key==="Escape"&&a&&c(!1)};if(a)return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[a]);const d=_.useMemo(()=>{if(!t)return{needsInput:!1,hasDefaults:!1,fieldCount:0};if(t.type==="string")return{needsInput:!t.default,hasDefaults:!!t.default,fieldCount:1,canRunDirectly:!!t.default};if(t.type==="object"&&t.properties){const E=t.properties,x=Object.entries(E),I=x.filter(([,k])=>k.default!==void 0||k.enum&&k.enum.length>0);return{needsInput:x.length>0,hasDefaults:I.length>0,fieldCount:x.length,canRunDirectly:I.length===x.length}}return{needsInput:!1,hasDefaults:!1,fieldCount:0,canRunDirectly:!0}},[t]),m=()=>{if(d.canRunDirectly){const E={};t.type==="string"&&t.default?E.input=t.default:t.type==="object"&&t.properties&&Object.entries(t.properties).forEach(([x,I])=>{I.default!==void 0?E[x]=I.default:I.enum&&I.enum.length>0&&(E[x]=I.enum[0])}),e(E)}else c(!0)},p=()=>r==="running"?"Running...":r==="completed"?"Run Again":r==="error"?"Retry":d.fieldCount===0||d.canRunDirectly?"Run Workflow":"Configure & Run",y=()=>r==="running"?h.jsx(mC,{className:"w-4 h-4 animate-spin"}):r==="error"?h.jsx(_T,{className:"w-4 h-4"}):d.needsInput&&!d.canRunDirectly?h.jsx(mE,{className:"w-4 h-4"}):h.jsx(wF,{className:"w-4 h-4"}),v=r==="running",b=r==="error"?"destructive":"primary";return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center",children:h.jsxs("div",{className:"flex",children:[h.jsxs(wt,{onClick:m,disabled:v,variant:b==="destructive"?"destructive":"default",size:"default",className:d.needsInput?"rounded-r-none":"",children:[y(),p()]}),d.needsInput&&h.jsxs(wt,{onClick:()=>c(!0),disabled:v,variant:b==="destructive"?"destructive":"default",size:"default",className:"rounded-l-none border-l-0 px-3",title:"Configure workflow inputs - customize parameters before running",children:[h.jsx(mE,{className:"w-4 h-4"}),h.jsx("span",{className:"ml-1.5",children:"Inputs"})]})]})}),h.jsx(zu,{open:a,onOpenChange:c,children:h.jsxs(Fu,{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{className:"px-8 pt-6",children:[h.jsx(Gu,{children:"Configure Workflow Inputs"}),h.jsx(qu,{onClose:()=>c(!1)})]}),h.jsx("div",{className:"px-8 py-4 border-b flex-shrink-0",children:h.jsx("div",{className:"text-sm text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"font-medium",children:"Input Type:"}),h.jsx("code",{className:"bg-muted px-3 py-1 text-xs font-mono",children:d.fieldCount===0?"No Input":t.type==="string"?"String":"Object"}),t.type==="object"&&t.properties&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:[Object.keys(t.properties).length," field",Object.keys(t.properties).length!==1?"s":""]})]})})}),h.jsx("div",{className:"px-8 py-6 overflow-y-auto flex-1 min-h-0",children:h.jsx(RK,{inputSchema:t,inputTypeName:"Input",onSubmit:E=>{e(E),c(!1)},isSubmitting:n,className:"embedded"})})]})})]})}function W7({selectedWorkflow:t,onDebugEvent:e}){const[n,r]=_.useState(null),[a,c]=_.useState(!1),[d,m]=_.useState([]),[p,y]=_.useState(!1),[v,b]=_.useState(null),[E,x]=_.useState(""),[I,k]=_.useState(""),[N,M]=_.useState(!1),[j,O]=_.useState(!1),[U,H]=_.useState(!1),V=_.useRef(null),Q=_.useRef(null),[Y,ee]=_.useState(!1),se=_.useRef({}),ce=_.useRef(null),te=_.useRef(null),[re,G]=_.useState(()=>{const we=localStorage.getItem("workflowBottomPanelHeight");return we?parseInt(we,10):300}),[J,D]=_.useState(!1),[F,$]=_.useState(()=>{const we=localStorage.getItem("workflowViewOptions");return we?JSON.parse(we):{showMinimap:!1,showGrid:!0,animateRun:!1}}),[X,z]=_.useState(()=>localStorage.getItem("workflowLayoutDirection")||"LR"),{selectExecutor:W,getExecutorData:ue}=V7(d,p);_.useEffect(()=>{localStorage.setItem("workflowViewOptions",JSON.stringify(F))},[F]),_.useEffect(()=>{localStorage.setItem("workflowLayoutDirection",X)},[X]),_.useEffect(()=>{const we=()=>{if(V.current){const be=V.current,Oe=be.scrollHeight>be.clientHeight,fe=be.scrollHeight-be.scrollTop-be.clientHeight<100;p&&fe&&Oe&&be.scrollTo({top:be.scrollHeight,behavior:"smooth"})}if(Q.current){const be=Q.current.scrollHeight>Q.current.clientHeight;ee(be)}};return we(),window.addEventListener("resize",we),()=>window.removeEventListener("resize",we)},[E,I,re,p]);const de=we=>{$(be=>({...be,[we]:!be[we]}))};_.useEffect(()=>{const we=async()=>{if(t.type==="workflow"){c(!0);try{const be=await yr.getWorkflowInfo(t.id);r(be)}catch(be){r(null),console.error("Error loading workflow info:",be)}finally{c(!1)}}};m([]),y(!1),b(null),x(""),k(""),se.current={},ce.current=null,te.current=null,we()},[t.id,t.type]);const ge=(we,be)=>{b(be),W(we),se.current[we]&&x(se.current[we])},Ne=_.useMemo(()=>d.filter(we=>we.type==="response.workflow_event.complete"),[d]),Ee=_.useMemo(()=>Ne.filter(we=>"data"in we&&we.data&&typeof we.data=="object"?we.data.executor_id!=null:!1).map(we=>{if("data"in we&&we.data&&typeof we.data=="object"){const be=we.data;return{executorId:String(be.executor_id),message:String(be.event_type||"Processing"),timestamp:String(be.timestamp||new Date().toISOString()),status:String(be.event_type||"").includes("Completed")?"completed":String(be.event_type||"").includes("Error")?"error":"running"}}return{executorId:"unknown",message:"Processing",timestamp:new Date().toISOString(),status:"running"}}),[Ne]),le=_.useMemo(()=>p?Ee.filter(be=>be.status==="running").slice(-2).map(be=>be.executorId):[],[Ee,p]);_.useEffect(()=>{localStorage.setItem("workflowBottomPanelHeight",re.toString())},[re]);const Ce=_.useCallback(we=>{we.preventDefault(),D(!0);const be=we.clientY,Oe=re,Le=Me=>{const He=be-Me.clientY,Ke=Math.max(200,Math.min(window.innerHeight*.6,Oe+He));G(Ke)},fe=()=>{D(!1),document.removeEventListener("mousemove",Le),document.removeEventListener("mouseup",fe)};document.addEventListener("mousemove",Le),document.addEventListener("mouseup",fe)},[re]),De=_.useCallback(async we=>{if(!(!t||t.type!=="workflow")){y(!0),m([]),x(""),k(""),se.current={},ce.current=null,te.current=null,e("clear");try{const be={input_data:we},Oe=yr.streamWorkflowExecutionOpenAI(t.id,be);for await(const Le of Oe){if(Le.type==="response.workflow_event.complete"&&m(fe=>[...fe,Le]),e(Le),Le.type==="response.workflow_event.complete"&&"data"in Le&&Le.data){const fe=Le.data;if(fe.event_type==="ExecutorInvokedEvent"&&fe.executor_id&&(ce.current=fe.executor_id,se.current[fe.executor_id]||(se.current[fe.executor_id]="")),(fe.event_type==="WorkflowCompletedEvent"||fe.event_type==="WorkflowOutputEvent")&&fe.data){if(typeof fe.data=="string")x(fe.data);else{te.current=fe.data;const Me=JSON.stringify(fe.data,null,2);x(Me)}ce.current=null}}if(Le.type==="response.output_text.delta"&&"delta"in Le&&Le.delta){const fe=ce.current;fe&&(se.current[fe]||(se.current[fe]=""),se.current[fe]+=Le.delta,v&&se.current[v.executorId]?x(se.current[v.executorId]):x(se.current[fe]))}if(Le.type==="error"){k("error"in Le?String(Le.error):"Unknown error");break}}y(!1)}catch(be){k(be instanceof Error?be.message:"Unknown error"),y(!1)}}},[t,e,n]);return a?h.jsx(Ih,{message:"Loading workflow...",description:"Fetching workflow structure and configuration"}):!n?.workflow_dump&&!Ee.length?h.jsx(Ih,{message:"Initializing workflow...",description:"Setting up workflow execution environment"}):h.jsxs("div",{className:"workflow-view flex flex-col h-full",children:[h.jsxs("div",{className:"border-b pb-2 p-4 flex-shrink-0",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx("h2",{className:"font-semibold text-sm truncate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Hu,{className:"h-4 w-4 flex-shrink-0"}),h.jsx("span",{className:"truncate",children:t.name||t.id})]})}),h.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>M(!0),className:"h-6 w-6 p-0 flex-shrink-0",title:"View workflow details",children:h.jsx(gv,{className:"h-4 w-4"})})]}),n&&h.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0",children:h.jsx(Q7,{inputSchema:n.input_schema,onRun:De,isSubmitting:p,workflowState:p?"running":I?"error":Ee.length>0?"completed":"ready",executorHistory:Ee,workflowError:I})})]}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"flex-1 min-h-0",children:n?.workflow_dump&&h.jsx($7,{workflowDump:n.workflow_dump,events:Ne,isStreaming:p,onNodeSelect:ge,className:"h-full",viewOptions:F,onToggleViewOption:de,layoutDirection:X,onLayoutDirectionChange:z})}),h.jsx("div",{className:`h-1 cursor-row-resize flex-shrink-0 relative group transition-colors duration-200 ease-in-out ${J?"bg-primary/40":"bg-border hover:bg-primary/20"}`,onMouseDown:Ce,children:h.jsx("div",{className:"absolute inset-x-0 -top-2 -bottom-2 flex items-center justify-center",children:h.jsx("div",{className:`w-12 h-1 rounded-full transition-all duration-200 ease-in-out ${J?"bg-primary shadow-lg shadow-primary/25":"bg-primary/30 group-hover:bg-primary group-hover:shadow-md group-hover:shadow-primary/20"}`})})}),h.jsx("div",{className:"flex-shrink-0 border-t overflow-hidden",style:{height:`${re}px`},children:h.jsx("div",{className:"h-full flex gap-4 p-4",children:v||le.length>0||Ee.length>0||E||I?h.jsxs(h.Fragment,{children:[(v||le.length>0||Ee.length>0)&&h.jsxs("div",{className:`border border-border rounded bg-card shadow-sm flex flex-col ${E||I?"flex-1":"w-full"}`,children:[h.jsx("div",{className:"border-b border-border px-4 py-3 bg-muted rounded-t flex-shrink-0",children:h.jsx("h4",{className:"text-sm font-medium text-foreground",children:v?`Executor: ${v.name||v.executorId}`:p&&le.length>0?"Current Executor":"Last Executor"})}),h.jsx("div",{className:"p-4 overflow-auto flex-1",children:v?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${v.state==="running"?"bg-[#643FB2] dark:bg-[#8B5CF6] animate-pulse":v.state==="completed"?"bg-green-500 dark:bg-green-400":v.state==="failed"?"bg-red-500 dark:bg-red-400":v.state==="cancelled"?"bg-orange-500 dark:bg-orange-400":"bg-gray-400 dark:bg-gray-500"}`}),h.jsx("span",{className:"text-sm font-medium capitalize text-foreground",children:v.state}),v.executorType&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",v.executorType,")"]})]}),v.inputData!==void 0&&v.inputData!==null&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-foreground mb-1",children:"Input Data:"}),h.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-24",children:String(typeof v.inputData=="string"?v.inputData:(()=>{try{return JSON.stringify(v.inputData,null,2)}catch{return"[Unable to display data]"}})())})]}),v.outputData!==void 0&&v.outputData!==null&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-foreground mb-1",children:"Output Data:"}),h.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-24",children:String(typeof v.outputData=="string"?v.outputData:(()=>{try{return JSON.stringify(v.outputData,null,2)}catch{return"[Unable to display data]"}})())})]}),v.error&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-destructive mb-1",children:"Error:"}),h.jsx("pre",{className:"text-xs bg-destructive/10 text-destructive p-2 rounded overflow-x-auto",children:v.error})]}),h.jsx("button",{onClick:()=>b(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"← Back to current executor"})]}):(()=>{const we=p&&le.length>0?le[le.length-1]:Ee.length>0?Ee[Ee.length-1].executorId:null;if(!we)return null;const be=ue(we),Oe=Ee.find(Le=>Le.executorId===we);return h.jsxs("div",{className:"space-y-3 cursor-pointer hover:bg-muted/30 p-2 rounded transition-colors",onClick:()=>{be&&b({executorId:be.executorId,state:be.state,inputData:be.inputData,outputData:be.outputData,error:be.error,name:void 0,executorType:void 0,isSelected:!0,isStartNode:!1,onNodeClick:void 0})},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${p?"bg-[#643FB2] dark:bg-[#8B5CF6] animate-pulse":Oe?.status==="completed"?"bg-green-500 dark:bg-green-400":Oe?.status==="error"?"bg-red-500 dark:bg-red-400":"bg-gray-400 dark:bg-gray-500"}`}),h.jsx("span",{className:"text-sm font-medium text-foreground",children:we}),Oe&&h.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(Oe.timestamp).toLocaleTimeString()})]}),Oe&&h.jsx("p",{className:"text-sm text-muted-foreground",children:p?"Processing...":Oe.message})]})})()})]}),E&&(()=>{const we=p&&ce.current,be=!p&&v,Oe=we?{border:"border-[#643FB2]/40 dark:border-[#8B5CF6]/40",bg:"bg-[#643FB2]/5 dark:bg-[#8B5CF6]/5",headerBg:"bg-[#643FB2]/10 dark:bg-[#8B5CF6]/10",icon:h.jsx(mC,{className:"w-4 h-4 text-[#643FB2] dark:text-[#8B5CF6] animate-spin"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-[#643FB2]/30 dark:border-[#8B5CF6]/30",buttonHover:"hover:bg-[#643FB2]/10 dark:hover:bg-[#8B5CF6]/10"}:be?{border:"border-blue-500/40 dark:border-blue-500/40",bg:"bg-blue-500/5 dark:bg-blue-500/5",headerBg:"bg-blue-500/10 dark:bg-blue-500/10",icon:h.jsx(gv,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-blue-500/30 dark:border-blue-500/30",buttonHover:"hover:bg-blue-500/10 dark:hover:bg-blue-500/10"}:{border:"border-green-500/40 dark:border-green-400/40",bg:"bg-green-500/5 dark:bg-green-400/5",headerBg:"bg-green-500/10 dark:bg-green-400/10",icon:h.jsx(mv,{className:"w-4 h-4 text-green-500 dark:text-green-400"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-green-500/30 dark:border-green-400/30",buttonHover:"hover:bg-green-500/10 dark:hover:bg-green-400/10"};return h.jsxs("div",{className:`border-2 ${Oe.border} rounded ${Oe.bg} shadow flex-1 flex flex-col min-w-0 relative`,children:[h.jsx("div",{className:`border-b ${Oe.border} px-4 py-3 ${Oe.headerBg} rounded-t flex-shrink-0`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[Oe.icon,h.jsx("h4",{className:"text-sm font-semibold text-foreground",children:we?`Output: ${ce.current}`:be?`Output: ${v.executorId}`:"Workflow Complete"})]})}),h.jsx("div",{ref:V,className:"p-4 overflow-auto flex-1 min-h-0 relative",children:h.jsx("div",{className:"text-foreground whitespace-pre-wrap break-words text-sm pb-12",children:E})}),h.jsx("div",{className:"absolute bottom-3 right-3 pointer-events-auto",children:h.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>O(!0),className:`h-8 px-3 ${Oe.buttonBg} ${Oe.buttonBorder} ${Oe.buttonHover} shadow-md`,title:"Expand to full view",children:[h.jsx(l0,{className:"w-3.5 h-3.5 mr-1.5"}),"View Full"]})})]})})(),I&&h.jsxs("div",{className:"border-2 border-destructive/70 rounded bg-destructive/5 shadow flex-1 flex flex-col min-w-0 relative",children:[h.jsx("div",{className:"border-b border-destructive/70 px-4 py-3 bg-destructive/10 rounded-t flex-shrink-0",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Uu,{className:"w-4 h-4 text-destructive"}),h.jsx("h4",{className:"text-sm font-semibold text-destructive",children:"Workflow Failed"})]})}),h.jsx("div",{ref:Q,className:"p-4 overflow-auto flex-1 min-h-0 relative",children:h.jsx("div",{className:"text-destructive whitespace-pre-wrap break-words text-sm pb-12",children:I})}),h.jsx("div",{className:"absolute bottom-3 right-3 pointer-events-auto",children:h.jsxs(wt,{variant:"outline",size:"sm",onClick:()=>H(!0),className:"h-8 px-3 bg-destructive/10 dark:bg-destructive/20 border-destructive/50 text-destructive hover:bg-destructive/20 dark:hover:bg-destructive/30 shadow-md",title:"Expand to full view",children:[h.jsx(l0,{className:"w-3.5 h-3.5 mr-1.5"}),"View Full"]})}),Y&&h.jsx("div",{className:"absolute bottom-14 left-1/2 transform -translate-x-1/2 pointer-events-none",children:h.jsxs("div",{className:"bg-destructive/80 text-white px-2 py-1 rounded-full flex items-center gap-1 text-xs animate-bounce",children:[h.jsx(kz,{className:"w-3 h-3"}),h.jsx("span",{children:"Scroll for more"})]})})]})]}):h.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:h.jsx("p",{children:"Select a workflow node (executor) to see execution details"})})})}),h.jsx(Y7,{workflow:t,open:N,onOpenChange:M}),h.jsx(zu,{open:j,onOpenChange:O,children:h.jsxs(Fu,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsxs(Gu,{className:"flex items-center gap-2",children:[h.jsx(mv,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),"Workflow Results"]}),h.jsx(qu,{onClose:()=>O(!1)})]}),h.jsx("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:h.jsxs("div",{className:"space-y-4",children:[Object.values(se.current).some(we=>we&&we.trim().length>0)?Object.entries(se.current).map(([we,be])=>be&&h.jsxs("div",{className:"border-2 border-emerald-300 dark:border-emerald-600 rounded overflow-hidden",children:[h.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 px-4 py-2 border-b border-emerald-300 dark:border-emerald-600",children:h.jsx("h5",{className:"text-sm font-semibold text-emerald-800 dark:text-emerald-200",children:we})}),h.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950/50 p-4",children:h.jsx("div",{className:"text-emerald-700 dark:text-emerald-300 whitespace-pre-wrap break-words text-sm font-mono",children:be})})]},we)):h.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950/50 rounded border-2 border-emerald-300 dark:border-emerald-600 p-6",children:h.jsx("div",{className:"text-emerald-700 dark:text-emerald-300 whitespace-pre-wrap break-words text-sm font-mono",children:E||"No output available"})}),te.current&&h.jsxs("div",{className:"border-2 border-blue-300 dark:border-blue-600 rounded overflow-hidden",children:[h.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/50 px-4 py-2 border-b border-blue-300 dark:border-blue-600",children:h.jsx("h5",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Workflow Output (Structured)"})}),h.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/50 p-4",children:h.jsx("pre",{className:"text-blue-700 dark:text-blue-300 whitespace-pre-wrap break-words text-xs font-mono",children:JSON.stringify(te.current,null,2)})})]})]})})]})}),h.jsx(zu,{open:U,onOpenChange:H,children:h.jsxs(Fu,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(Ku,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsxs(Gu,{className:"flex items-center gap-2",children:[h.jsx(Uu,{className:"w-5 h-5 text-destructive"}),"Workflow Error"]}),h.jsx(qu,{onClose:()=>H(!1)})]}),h.jsx("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:h.jsx("div",{className:"bg-destructive/5 rounded border-2 border-destructive/70 p-6",children:h.jsx("div",{className:"text-destructive whitespace-pre-wrap break-words text-sm font-mono",children:I})})})]})})]})}function X7({message:t,type:e="info",duration:n=4e3,onClose:r}){const[a,c]=_.useState(!0);_.useEffect(()=>{const p=setTimeout(()=>{c(!1),setTimeout(r,300)},n);return()=>clearTimeout(p)},[n,r]);const d={info:"bg-primary/10 border-primary/20",success:"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",warning:"bg-orange-50 dark:bg-orange-950 border-orange-200 dark:border-orange-800",error:"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800"}[e],m={info:"text-primary",success:"text-green-800 dark:text-green-200",warning:"text-orange-800 dark:text-orange-200",error:"text-red-800 dark:text-red-200"}[e];return h.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-md transition-all duration-300 ${a?"opacity-100 translate-x-0":"opacity-0 translate-x-4"} ${d}`,children:[h.jsx("p",{className:`text-sm flex-1 ${m}`,children:t}),h.jsx("button",{onClick:()=>{c(!1),setTimeout(r,300)},className:`flex-shrink-0 hover:opacity-70 transition-opacity ${m}`,children:h.jsx(jh,{className:"h-4 w-4"})})]})}function J7(){const[t,e]=_.useState({agents:[],workflows:[],isLoading:!0}),[n,r]=_.useState([]),[a,c]=_.useState(()=>{const te=localStorage.getItem("showDebugPanel");return te!==null?te==="true":!0}),[d,m]=_.useState(()=>{const te=localStorage.getItem("debugPanelWidth");return te?parseInt(te,10):320}),[p,y]=_.useState(!1),[v,b]=_.useState(!1),[E,x]=_.useState(!1),[I,k]=_.useState(null),[N,M]=_.useState(null),[j,O]=_.useState(null),[U,H]=_.useState(!1);_.useEffect(()=>{(async()=>{try{const[re,G]=await Promise.all([yr.getAgents(),yr.getWorkflows()]),D=new URLSearchParams(window.location.search).get("entity_id");let F;if(D&&(F=re.find($=>$.id===D)||G.find($=>$.id===D),F||H(!0)),!F)if(F=re.length>0?re[0]:G.length>0?G[0]:void 0,F){const $=new URL(window.location.href);$.searchParams.set("entity_id",F.id),window.history.replaceState({},"",$)}else{const $=new URL(window.location.href);$.searchParams.delete("entity_id"),window.history.replaceState({},"",$)}e($=>({...$,agents:re,workflows:G,selectedAgent:F,isLoading:!1}))}catch(re){console.error("Failed to load agents/workflows:",re),e(G=>({...G,error:re instanceof Error?re.message:"Failed to load data",isLoading:!1}))}})()},[]),_.useEffect(()=>{localStorage.setItem("showDebugPanel",a.toString())},[a]),_.useEffect(()=>{localStorage.setItem("debugPanelWidth",d.toString())},[d]);const V=_.useCallback(te=>{te.preventDefault(),y(!0);const re=te.clientX,G=d,J=F=>{const $=re-F.clientX,X=Math.max(200,Math.min(window.innerWidth*.5,G+$));m(X)},D=()=>{y(!1),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",J),document.addEventListener("mouseup",D)},[d]),Q=_.useCallback(te=>{e(G=>({...G,selectedAgent:te,currentThread:void 0}));const re=new URL(window.location.href);re.searchParams.set("entity_id",te.id),window.history.pushState({},"",re),r([])},[]),Y=_.useCallback(te=>{r(te==="clear"?[]:re=>[...re,te])},[]),ee=_.useCallback(async te=>{k(te.id),M(null),O(null);try{const re=await yr.addEntity(te.url,{source:"remote_gallery",originalUrl:te.url,sampleId:te.id}),G={id:re.id,name:re.name,description:re.description,type:re.type,source:re.source||"remote_gallery",has_env:!1,module_path:void 0};if(re.type==="agent"){const J={...G,tools:(re.tools||[]).map(F=>typeof F=="string"?F:JSON.stringify(F))};e(F=>({...F,agents:[...F.agents,J],selectedAgent:J}));const D=new URL(window.location.href);D.searchParams.set("entity_id",J.id),window.history.pushState({},"",D)}else{const J={...G,executors:(re.tools||[]).map(F=>typeof F=="string"?F:JSON.stringify(F)),input_schema:{type:"string"},input_type_name:"Input",start_executor_id:re.tools&&re.tools.length>0?typeof re.tools[0]=="string"?re.tools[0]:JSON.stringify(re.tools[0]):"unknown"};e(F=>({...F,workflows:[...F.workflows,J],selectedAgent:J}));const D=new URL(window.location.href);D.searchParams.set("entity_id",J.id),window.history.pushState({},"",D)}x(!1),r([])}catch(re){const G=re instanceof Error?re.message:"Failed to add sample entity";console.error("Failed to add sample entity:",G),M(te.id),O(G)}finally{k(null)}},[]),se=_.useCallback(()=>{M(null),O(null)},[]),ce=_.useCallback(async te=>{try{if(await yr.removeEntity(te),e(re=>({...re,agents:re.agents.filter(G=>G.id!==te),workflows:re.workflows.filter(G=>G.id!==te),selectedAgent:re.selectedAgent?.id===te?void 0:re.selectedAgent})),t.selectedAgent?.id===te){const re=new URL(window.location.href);re.searchParams.delete("entity_id"),window.history.pushState({},"",re),r([])}}catch(re){console.error("Failed to remove entity:",re)}},[t.selectedAgent?.id]);return t.isLoading?h.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[h.jsxs("header",{className:"flex h-14 items-center gap-4 border-b px-4",children:[h.jsx("div",{className:"w-64 h-9 bg-muted animate-pulse rounded-md"}),h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsx("div",{className:"w-8 h-8 bg-muted animate-pulse rounded-md"}),h.jsx("div",{className:"w-8 h-8 bg-muted animate-pulse rounded-md"})]})]}),h.jsx(Ih,{message:"Initializing DevUI...",description:"Loading agents and workflows from your configuration",fullPage:!0})]}):t.error?h.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[h.jsx(w0,{agents:[],workflows:[],selectedItem:void 0,onSelect:()=>{},onRemove:ce,isLoading:!1,onSettingsClick:()=>b(!0)}),h.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:h.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"rounded-full bg-muted p-4 animate-pulse",children:h.jsx(kF,{className:"h-12 w-12 text-muted-foreground"})})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Can't Connect to Backend"}),h.jsx("p",{className:"text-muted-foreground text-base",children:"No worries! Just start the DevUI backend server and you'll be good to go."})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"text-left bg-muted/50 rounded-lg p-4 space-y-3",children:[h.jsx("p",{className:"text-sm font-medium text-foreground",children:"Start the backend:"}),h.jsx("code",{className:"block bg-background px-3 py-2 rounded border text-sm font-mono text-foreground",children:"devui ./agents --port 8080"}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Or launch programmatically with"," ",h.jsx("code",{className:"text-xs",children:"serve(entities=[agent])"})]})]}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default:"," ",h.jsx("span",{className:"font-mono",children:"http://127.0.0.1:8080"})]})]}),t.error&&h.jsxs("details",{className:"text-left group",children:[h.jsxs("summary",{className:"text-sm text-muted-foreground cursor-pointer hover:text-foreground flex items-center gap-2",children:[h.jsx(Qs,{className:"h-4 w-4 transition-transform group-open:rotate-180"}),"Error details"]}),h.jsx("p",{className:"mt-2 text-xs text-muted-foreground font-mono bg-muted/30 p-3 rounded border",children:t.error})]}),h.jsx(wt,{onClick:()=>window.location.reload(),variant:"default",className:"mt-2",children:"Retry Connection"})]})}),h.jsx(E0,{open:v,onOpenChange:b})]}):h.jsxs("div",{className:"h-screen flex flex-col bg-background max-h-screen",children:[h.jsx(w0,{agents:t.agents,workflows:t.workflows,selectedItem:t.selectedAgent,onSelect:Q,onRemove:ce,onBrowseGallery:()=>x(!0),isLoading:t.isLoading,onSettingsClick:()=>b(!0)}),h.jsx("div",{className:"flex flex-1 overflow-hidden",children:E?h.jsx("div",{className:"flex-1 w-full",children:h.jsx(A0,{variant:"route",onAdd:ee,addingEntityId:I,errorEntityId:N,errorMessage:j,onClearError:se,onClose:()=>x(!1),hasExistingEntities:t.agents.length>0||t.workflows.length>0})}):t.agents.length===0&&t.workflows.length===0?h.jsx(A0,{variant:"inline",onAdd:ee,addingEntityId:I,errorEntityId:N,errorMessage:j,onClearError:se}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex-1 min-w-0",children:t.selectedAgent?t.selectedAgent.type==="agent"?h.jsx(SK,{selectedAgent:t.selectedAgent,onDebugEvent:Y}):h.jsx(W7,{selectedWorkflow:t.selectedAgent,onDebugEvent:Y}):h.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select an agent or workflow to get started."})}),a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`w-1 cursor-col-resize flex-shrink-0 relative group transition-colors duration-200 ease-in-out ${p?"bg-primary/40":"bg-border hover:bg-primary/20"}`,onMouseDown:V,children:h.jsx("div",{className:"absolute inset-y-0 -left-2 -right-2 flex items-center justify-center",children:h.jsx("div",{className:`h-12 w-1 rounded-full transition-all duration-200 ease-in-out ${p?"bg-primary shadow-lg shadow-primary/25":"bg-primary/30 group-hover:bg-primary group-hover:shadow-md group-hover:shadow-primary/20"}`})})}),h.jsx("div",{className:"flex-shrink-0",style:{width:`${d}px`},children:h.jsx(f6,{events:n,isStreaming:!1,onClose:()=>c(!1)})})]}):h.jsx("div",{className:"flex-shrink-0",children:h.jsx(wt,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"h-full w-10 rounded-none border-l",title:"Show debug panel",children:h.jsx(pF,{className:"h-4 w-4"})})})]})}),h.jsx(E0,{open:v,onOpenChange:b}),U&&h.jsx(X7,{message:"Entity not found. Showing first available entity instead.",type:"info",onClose:()=>H(!1)})]})}function Z7({children:t,attribute:e="class",defaultTheme:n="dark",enableSystem:r=!0,disableTransitionOnChange:a=!0,...c}){return h.jsx(ZF,{attribute:e,defaultTheme:n,enableSystem:r,disableTransitionOnChange:a,...c,children:t})}const eY="/assets/ms-symbollockup_signin_light-C1F8axpE.svg",tY="/assets/ms-symbollockup_signin_dark-BLaB1Mw_.svg";function nY({onSignIn:t}){return h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-6",children:h.jsxs("div",{className:"w-full max-w-md space-y-8 text-center",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:h.jsx(NF,{className:"h-10 w-10 text-primary"})})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Sign in to DevUI"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Use your Microsoft Entra account to continue. We only request access to your basic profile to personalize the experience."})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs(wt,{type:"button",onClick:t,variant:"ghost","aria-label":"Sign in with Microsoft",className:"flex w-full justify-center p-0 h-auto bg-transparent hover:bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary/60 cursor-pointer",children:[h.jsx("img",{src:eY,alt:"","aria-hidden":"true",className:"block dark:hidden w-full max-w-xs select-none",draggable:!1}),h.jsx("img",{src:tY,alt:"","aria-hidden":"true",className:"hidden dark:block w-full max-w-xs select-none",draggable:!1})]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"You may be redirected to Microsoft to complete the sign-in flow."})]})]})})}function rY({children:t}){const e=pj(),{instance:n,accounts:r,inProgress:a}=ZA(),[c,d]=_.useState(Eu.length===0),[m,p]=_.useState(()=>D5()),[y,v]=_.useState(!1),[b,E]=_.useState(!1),x=_.useMemo(()=>n.getActiveAccount()?.homeAccountId??r[0]?.homeAccountId??null,[r,n]);_.useEffect(()=>{!n.getActiveAccount()&&r.length>0&&n.setActiveAccount(r[0])},[r,n]),_.useEffect(()=>{const k=n.getActiveAccount();k?.username&&(L5(k.username),p(k.username))},[x,n]);const I=Eu.join("|");if(_.useEffect(()=>{if(!e||Eu.length===0){yr.clearAuthProvider(),d(!0);return}if(a!==Tn.None){d(!1);return}const k=async()=>{if(Eu.length===0)return null;const N=n.getActiveAccount();if(!N)throw new Error("No active Microsoft Entra account is available for API authentication.");try{return(await n.acquireTokenSilent({account:N,scopes:Eu})).accessToken}catch(M){if(M instanceof jo)return await n.acquireTokenRedirect({account:N,scopes:Eu}),null;throw M}};return yr.setAuthProvider(k),d(!0),()=>{d(Eu.length===0),yr.clearAuthProvider(k)}},[r.length,x,I,a,n,e]),_.useEffect(()=>{if(e){v(!0),E(!1);return}if(y||a!==Tn.None)return;if(!m){v(!0);return}let k=!1;return E(!0),n.ssoSilent({...C0,authority:n.getConfiguration().auth.authority,redirectUri:n.getConfiguration().auth.redirectUri,loginHint:m}).then(N=>{k||N.account&&n.setActiveAccount(N.account)}).catch(N=>{k||N instanceof jo||console.warn("Silent SSO failed",N)}).finally(()=>{k||(E(!1),v(!0))}),()=>{k=!0}},[y,a,n,e,m]),e&&!c)return h.jsx(Ih,{message:"Preparing secure session...",description:"Negotiating Microsoft Entra access for the DevUI backend.",fullPage:!0});if(a!==Tn.None)return h.jsx(Ih,{message:"Signing you in...",description:"Completing the Microsoft Entra sign-in flow.",fullPage:!0});if(!e){if(!y||b)return h.jsx(Ih,{message:"Looking for an existing Microsoft session...",description:"Checking if you already have an active sign-in.",fullPage:!0});const k=()=>n.loginRedirect(C0);return h.jsx(nY,{onSignIn:k})}return h.jsx(h.Fragment,{children:t})}const S1=document.getElementById("root");if(!S1)throw new Error("Root container element with id 'root' was not found.");const R_=pD.createRoot(S1);vE.initialize().then(()=>{R_.render(h.jsx(_.StrictMode,{children:h.jsx(mj,{instance:vE,children:h.jsx(Z7,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:h.jsx(rY,{children:h.jsx(J7,{})})})})}))}).catch(t=>{console.error("Failed to initialize MSAL instance",t),R_.render(h.jsx(_.StrictMode,{children:h.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-6",children:h.jsxs("div",{className:"max-w-md text-center space-y-4",children:[h.jsx("h1",{className:"text-2xl font-semibold",children:"Failed to start authentication"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:"We couldn't initialize Microsoft sign-in. Check your environment variables and reload the page."})]})})}))});
