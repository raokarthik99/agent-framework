function T2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const c=Object.getOwnPropertyDescriptor(r,s);c&&Object.defineProperty(t,s,c.get?c:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}})();function Zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function S2(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var tb={exports:{}},Im={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function _2(){if(qT)return Im;qT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,c){var d=null;if(c!==void 0&&(d=""+c),s.key!==void 0&&(d=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:t,type:r,key:d,ref:s!==void 0?s:null,props:c}}return Im.Fragment=e,Im.jsx=n,Im.jsxs=n,Im}var $T;function k2(){return $T||($T=1,tb.exports=_2()),tb.exports}var h=k2(),nb={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function I2(){if(VT)return gt;VT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,_={};function N(B,Q,ie){this.props=B,this.context=Q,this.refs=_,this.updater=ie||A}N.prototype.isReactComponent={},N.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function M(){}M.prototype=N.prototype;function U(B,Q,ie){this.props=B,this.context=Q,this.refs=_,this.updater=ie||A}var O=U.prototype=new M;O.constructor=U,I(O,N.prototype),O.isPureReactComponent=!0;var L=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function V(B,Q,ie,ue,me,Oe){return ie=Oe.ref,{$$typeof:t,type:B,key:Q,ref:ie!==void 0?ie:null,props:Oe}}function $(B,Q){return V(B.type,Q,void 0,void 0,void 0,B.props)}function ee(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function se(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return Q[ie]})}var ce=/\/+/g;function oe(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?se(""+B.key):Q.toString(36)}function he(){}function W(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(he,he):(B.status="pending",B.then(function(Q){B.status==="pending"&&(B.status="fulfilled",B.value=Q)},function(Q){B.status==="pending"&&(B.status="rejected",B.reason=Q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function J(B,Q,ie,ue,me){var Oe=typeof B;(Oe==="undefined"||Oe==="boolean")&&(B=null);var xe=!1;if(B===null)xe=!0;else switch(Oe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(B.$$typeof){case t:case e:xe=!0;break;case v:return xe=B._init,J(xe(B._payload),Q,ie,ue,me)}}if(xe)return me=me(B),xe=ue===""?"."+oe(B,0):ue,L(me)?(ie="",xe!=null&&(ie=xe.replace(ce,"$&/")+"/"),J(me,Q,ie,"",function(je){return je})):me!=null&&(ee(me)&&(me=$(me,ie+(me.key==null||B&&B.key===me.key?"":(""+me.key).replace(ce,"$&/")+"/")+xe)),Q.push(me)),1;xe=0;var le=ue===""?".":ue+":";if(L(B))for(var Ce=0;Ce<B.length;Ce++)ue=B[Ce],Oe=le+oe(ue,Ce),xe+=J(ue,Q,ie,Oe,me);else if(Ce=b(B),typeof Ce=="function")for(B=Ce.call(B),Ce=0;!(ue=B.next()).done;)ue=ue.value,Oe=le+oe(ue,Ce++),xe+=J(ue,Q,ie,Oe,me);else if(Oe==="object"){if(typeof B.then=="function")return J(W(B),Q,ie,ue,me);throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function P(B,Q,ie){if(B==null)return B;var ue=[],me=0;return J(B,ue,"","",function(Oe){return Q.call(ie,Oe,me++)}),ue}function F(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var Y=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function X(){}return gt.Children={map:P,forEach:function(B,Q,ie){P(B,function(){Q.apply(this,arguments)},ie)},count:function(B){var Q=0;return P(B,function(){Q++}),Q},toArray:function(B){return P(B,function(Q){return Q})||[]},only:function(B){if(!ee(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},gt.Component=N,gt.Fragment=n,gt.Profiler=s,gt.PureComponent=U,gt.StrictMode=r,gt.Suspense=g,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,gt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return H.H.useMemoCache(B)}},gt.cache=function(B){return function(){return B.apply(null,arguments)}},gt.cloneElement=function(B,Q,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ue=I({},B.props),me=B.key,Oe=void 0;if(Q!=null)for(xe in Q.ref!==void 0&&(Oe=void 0),Q.key!==void 0&&(me=""+Q.key),Q)!G.call(Q,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Q.ref===void 0||(ue[xe]=Q[xe]);var xe=arguments.length-2;if(xe===1)ue.children=ie;else if(1<xe){for(var le=Array(xe),Ce=0;Ce<xe;Ce++)le[Ce]=arguments[Ce+2];ue.children=le}return V(B.type,me,void 0,void 0,Oe,ue)},gt.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:c,_context:B},B},gt.createElement=function(B,Q,ie){var ue,me={},Oe=null;if(Q!=null)for(ue in Q.key!==void 0&&(Oe=""+Q.key),Q)G.call(Q,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(me[ue]=Q[ue]);var xe=arguments.length-2;if(xe===1)me.children=ie;else if(1<xe){for(var le=Array(xe),Ce=0;Ce<xe;Ce++)le[Ce]=arguments[Ce+2];me.children=le}if(B&&B.defaultProps)for(ue in xe=B.defaultProps,xe)me[ue]===void 0&&(me[ue]=xe[ue]);return V(B,Oe,void 0,void 0,null,me)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(B){return{$$typeof:f,render:B}},gt.isValidElement=ee,gt.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:F}},gt.memo=function(B,Q){return{$$typeof:y,type:B,compare:Q===void 0?null:Q}},gt.startTransition=function(B){var Q=H.T,ie={};H.T=ie;try{var ue=B(),me=H.S;me!==null&&me(ie,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(X,Y)}catch(Oe){Y(Oe)}finally{H.T=Q}},gt.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},gt.use=function(B){return H.H.use(B)},gt.useActionState=function(B,Q,ie){return H.H.useActionState(B,Q,ie)},gt.useCallback=function(B,Q){return H.H.useCallback(B,Q)},gt.useContext=function(B){return H.H.useContext(B)},gt.useDebugValue=function(){},gt.useDeferredValue=function(B,Q){return H.H.useDeferredValue(B,Q)},gt.useEffect=function(B,Q,ie){var ue=H.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(B,Q)},gt.useId=function(){return H.H.useId()},gt.useImperativeHandle=function(B,Q,ie){return H.H.useImperativeHandle(B,Q,ie)},gt.useInsertionEffect=function(B,Q){return H.H.useInsertionEffect(B,Q)},gt.useLayoutEffect=function(B,Q){return H.H.useLayoutEffect(B,Q)},gt.useMemo=function(B,Q){return H.H.useMemo(B,Q)},gt.useOptimistic=function(B,Q){return H.H.useOptimistic(B,Q)},gt.useReducer=function(B,Q,ie){return H.H.useReducer(B,Q,ie)},gt.useRef=function(B){return H.H.useRef(B)},gt.useState=function(B){return H.H.useState(B)},gt.useSyncExternalStore=function(B,Q,ie){return H.H.useSyncExternalStore(B,Q,ie)},gt.useTransition=function(){return H.H.useTransition()},gt.version="19.1.1",gt}var YT;function Sg(){return YT||(YT=1,nb.exports=I2()),nb.exports}var k=Sg();const mo=Zx(k),z_=T2({__proto__:null,default:mo},[k]);var rb={exports:{}},Rm={},ob={exports:{}},ib={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function R2(){return QT||(QT=1,(function(t){function e(P,F){var Y=P.length;P.push(F);e:for(;0<Y;){var X=Y-1>>>1,B=P[X];if(0<s(B,F))P[X]=F,P[Y]=B,Y=X;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var F=P[0],Y=P.pop();if(Y!==F){P[0]=Y;e:for(var X=0,B=P.length,Q=B>>>1;X<Q;){var ie=2*(X+1)-1,ue=P[ie],me=ie+1,Oe=P[me];if(0>s(ue,Y))me<B&&0>s(Oe,ue)?(P[X]=Oe,P[me]=Y,X=me):(P[X]=ue,P[ie]=Y,X=ie);else if(me<B&&0>s(Oe,Y))P[X]=Oe,P[me]=Y,X=me;else break e}}return F}function s(P,F){var Y=P.sortIndex-F.sortIndex;return Y!==0?Y:P.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var g=[],y=[],v=1,x=null,b=3,A=!1,I=!1,_=!1,N=!1,M=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(P){for(var F=n(y);F!==null;){if(F.callback===null)r(y);else if(F.startTime<=P)r(y),F.sortIndex=F.expirationTime,e(g,F);else break;F=n(y)}}function H(P){if(_=!1,L(P),!I)if(n(g)!==null)I=!0,G||(G=!0,oe());else{var F=n(y);F!==null&&J(H,F.startTime-P)}}var G=!1,V=-1,$=5,ee=-1;function se(){return N?!0:!(t.unstable_now()-ee<$)}function ce(){if(N=!1,G){var P=t.unstable_now();ee=P;var F=!0;try{e:{I=!1,_&&(_=!1,U(V),V=-1),A=!0;var Y=b;try{t:{for(L(P),x=n(g);x!==null&&!(x.expirationTime>P&&se());){var X=x.callback;if(typeof X=="function"){x.callback=null,b=x.priorityLevel;var B=X(x.expirationTime<=P);if(P=t.unstable_now(),typeof B=="function"){x.callback=B,L(P),F=!0;break t}x===n(g)&&r(g),L(P)}else r(g);x=n(g)}if(x!==null)F=!0;else{var Q=n(y);Q!==null&&J(H,Q.startTime-P),F=!1}}break e}finally{x=null,b=Y,A=!1}F=void 0}}finally{F?oe():G=!1}}}var oe;if(typeof O=="function")oe=function(){O(ce)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,W=he.port2;he.port1.onmessage=ce,oe=function(){W.postMessage(null)}}else oe=function(){M(ce,0)};function J(P,F){V=M(function(){P(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(P){switch(b){case 1:case 2:case 3:var F=3;break;default:F=b}var Y=b;b=F;try{return P()}finally{b=Y}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=b;b=P;try{return F()}finally{b=Y}},t.unstable_scheduleCallback=function(P,F,Y){var X=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,P){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Y+B,P={id:v++,callback:F,priorityLevel:P,startTime:Y,expirationTime:B,sortIndex:-1},Y>X?(P.sortIndex=Y,e(y,P),n(g)===null&&P===n(y)&&(_?(U(V),V=-1):_=!0,J(H,Y-X))):(P.sortIndex=B,e(g,P),I||A||(I=!0,G||(G=!0,oe()))),P},t.unstable_shouldYield=se,t.unstable_wrapCallback=function(P){var F=b;return function(){var Y=b;b=F;try{return P.apply(this,arguments)}finally{b=Y}}}})(ib)),ib}var WT;function N2(){return WT||(WT=1,ob.exports=R2()),ob.exports}var sb={exports:{}},jr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function O2(){if(XT)return jr;XT=1;var t=Sg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(g,y,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:g,containerInfo:y,implementation:v}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jr.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,v)},jr.flushSync=function(g){var y=d.T,v=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=y,r.p=v,r.d.f()}},jr.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},jr.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},jr.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,x=f(v,y.crossOrigin),b=typeof y.integrity=="string"?y.integrity:void 0,A=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:A}):v==="script"&&r.d.X(g,{crossOrigin:x,integrity:b,fetchPriority:A,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},jr.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},jr.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,x=f(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},jr.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=f(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},jr.requestFormReset=function(g){r.d.r(g)},jr.unstable_batchedUpdates=function(g,y){return g(y)},jr.useFormState=function(g,y,v){return d.H.useFormState(g,y,v)},jr.useFormStatus=function(){return d.H.useHostTransitionStatus()},jr.version="19.1.1",jr}var JT;function F_(){if(JT)return sb.exports;JT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sb.exports=O2(),sb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function M2(){if(ZT)return Rm;ZT=1;var t=N2(),e=Sg(),n=F_();function r(o){var a="https://react.dev/errors/"+o;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function c(o){var a=o,l=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(l=a.return),o=a.return;while(o)}return a.tag===3?l:null}function d(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function f(o){if(c(o)!==o)throw Error(r(188))}function g(o){var a=o.alternate;if(!a){if(a=c(o),a===null)throw Error(r(188));return a!==o?null:o}for(var l=o,m=a;;){var C=l.return;if(C===null)break;var E=C.alternate;if(E===null){if(m=C.return,m!==null){l=m;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===l)return f(C),o;if(E===m)return f(C),a;E=E.sibling}throw Error(r(188))}if(l.return!==m.return)l=C,m=E;else{for(var D=!1,z=C.child;z;){if(z===l){D=!0,l=C,m=E;break}if(z===m){D=!0,m=C,l=E;break}z=z.sibling}if(!D){for(z=E.child;z;){if(z===l){D=!0,l=E,m=C;break}if(z===m){D=!0,m=E,l=C;break}z=z.sibling}if(!D)throw Error(r(189))}}if(l.alternate!==m)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?o:a}function y(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o;for(o=o.child;o!==null;){if(a=y(o),a!==null)return a;o=o.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),U=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function oe(o){return o===null||typeof o!="object"?null:(o=ce&&o[ce]||o["@@iterator"],typeof o=="function"?o:null)}var he=Symbol.for("react.client.reference");function W(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===he?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case I:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList";case ee:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case O:return(o.displayName||"Context")+".Provider";case U:return(o._context.displayName||"Context")+".Consumer";case L:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case V:return a=o.displayName||null,a!==null?a:W(o.type)||"Memo";case $:a=o._payload,o=o._init;try{return W(o(a))}catch{}}return null}var J=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},X=[],B=-1;function Q(o){return{current:o}}function ie(o){0>B||(o.current=X[B],X[B]=null,B--)}function ue(o,a){B++,X[B]=o.current,o.current=a}var me=Q(null),Oe=Q(null),xe=Q(null),le=Q(null);function Ce(o,a){switch(ue(xe,a),ue(Oe,o),ue(me,null),a.nodeType){case 9:case 11:o=(o=a.documentElement)&&(o=o.namespaceURI)?CT(o):0;break;default:if(o=a.tagName,a=a.namespaceURI)a=CT(a),o=wT(a,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(me),ue(me,o)}function je(){ie(me),ie(Oe),ie(xe)}function be(o){o.memoizedState!==null&&ue(le,o);var a=me.current,l=wT(a,o.type);a!==l&&(ue(Oe,o),ue(me,l))}function we(o){Oe.current===o&&(ie(me),ie(Oe)),le.current===o&&(ie(le),Am._currentValue=Y)}var Ee=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,Me=t.unstable_cancelCallback,lt=t.unstable_shouldYield,Mt=t.unstable_requestPaint,ge=t.unstable_now,Be=t.unstable_getCurrentPriorityLevel,Xe=t.unstable_ImmediatePriority,it=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,tt=t.unstable_LowPriority,mt=t.unstable_IdlePriority,Ft=t.log,Hr=t.unstable_setDisableYieldValue,wt=null,ut=null;function Et(o){if(typeof Ft=="function"&&Hr(o),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(wt,o)}catch{}}var Vt=Math.clz32?Math.clz32:sc,Pn=Math.log,Ko=Math.LN2;function sc(o){return o>>>=0,o===0?32:31-(Pn(o)/Ko|0)|0}var vi=256,Ci=4194304;function Dn(o){var a=o&42;if(a!==0)return a;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function wi(o,a,l){var m=o.pendingLanes;if(m===0)return 0;var C=0,E=o.suspendedLanes,D=o.pingedLanes;o=o.warmLanes;var z=m&134217727;return z!==0?(m=z&~E,m!==0?C=Dn(m):(D&=z,D!==0?C=Dn(D):l||(l=z&~o,l!==0&&(C=Dn(l))))):(z=m&~E,z!==0?C=Dn(z):D!==0?C=Dn(D):l||(l=m&~o,l!==0&&(C=Dn(l)))),C===0?0:a!==0&&a!==C&&(a&E)===0&&(E=C&-C,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:C}function bo(o,a){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&a)===0}function ra(o,a){switch(o){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(){var o=vi;return vi<<=1,(vi&4194048)===0&&(vi=256),o}function fs(){var o=Ci;return Ci<<=1,(Ci&62914560)===0&&(Ci=4194304),o}function Go(o){for(var a=[],l=0;31>l;l++)a.push(o);return a}function xo(o,a){o.pendingLanes|=a,a!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function oa(o,a,l,m,C,E){var D=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var z=o.entanglements,Z=o.expirationTimes,fe=o.hiddenUpdates;for(l=D&~l;0<l;){var Te=31-Vt(l),Ne=1<<Te;z[Te]=0,Z[Te]=-1;var pe=fe[Te];if(pe!==null)for(fe[Te]=null,Te=0;Te<pe.length;Te++){var ye=pe[Te];ye!==null&&(ye.lane&=-536870913)}l&=~Ne}m!==0&&ia(o,m,0),E!==0&&C===0&&o.tag!==0&&(o.suspendedLanes|=E&~(D&~a))}function ia(o,a,l){o.pendingLanes|=a,o.suspendedLanes&=~a;var m=31-Vt(a);o.entangledLanes|=a,o.entanglements[m]=o.entanglements[m]|1073741824|l&4194090}function ct(o,a){var l=o.entangledLanes|=a;for(o=o.entanglements;l;){var m=31-Vt(l),C=1<<m;C&a|o[m]&a&&(o[m]|=a),l&=~C}}function qo(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ol(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function rt(){var o=F.p;return o!==0?o:(o=window.event,o===void 0?32:HT(o.type))}function lf(o,a){var l=F.p;try{return F.p=o,a()}finally{F.p=l}}var jn=Math.random().toString(36).slice(2),Ie="__reactFiber$"+jn,En="__reactProps$"+jn,Ln="__reactContainer$"+jn,ac="__reactEvents$"+jn,Ml="__reactListeners$"+jn,cc="__reactHandles$"+jn,ms="__reactResources$"+jn,$o="__reactMarker$"+jn;function xi(o){delete o[Ie],delete o[En],delete o[ac],delete o[Ml],delete o[cc]}function dr(o){var a=o[Ie];if(a)return a;for(var l=o.parentNode;l;){if(a=l[Ln]||l[Ie]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(o=AT(o);o!==null;){if(l=o[Ie])return l;o=AT(o)}return a}o=l,l=o.parentNode}return null}function Br(o){if(o=o[Ie]||o[Ln]){var a=o.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return o}return null}function to(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o.stateNode;throw Error(r(33))}function xr(o){var a=o[ms];return a||(a=o[ms]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function sn(o){o[$o]=!0}var gs=new Set,sa={};function Er(o,a){zr(o,a),zr(o+"Capture",a)}function zr(o,a){for(sa[o]=a,o=0;o<a.length;o++)gs.add(a[o])}var aa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ei={},Vo={};function ca(o){return Ee.call(Vo,o)?!0:Ee.call(Ei,o)?!1:aa.test(o)?Vo[o]=!0:(Ei[o]=!0,!1)}function Yo(o,a,l){if(ca(a))if(l===null)o.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(a);return}}o.setAttribute(a,""+l)}}function Eo(o,a,l){if(l===null)o.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttribute(a,""+l)}}function hr(o,a,l,m){if(m===null)o.removeAttribute(l);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(a,l,""+m)}}var Ai,ps;function Fr(o){if(Ai===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ai=a&&a[1]||"",ps=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ai+o+ps}var Ti=!1;function Pl(o,a){if(!o||Ti)return"";Ti=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(ye){var pe=ye}Reflect.construct(o,[],Ne)}else{try{Ne.call()}catch(ye){pe=ye}o.call(Ne.prototype)}}else{try{throw Error()}catch(ye){pe=ye}(Ne=o())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(ye){if(ye&&pe&&typeof ye.stack=="string")return[ye.stack,pe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),D=E[0],z=E[1];if(D&&z){var Z=D.split(`
`),fe=z.split(`
`);for(C=m=0;m<Z.length&&!Z[m].includes("DetermineComponentFrameRoot");)m++;for(;C<fe.length&&!fe[C].includes("DetermineComponentFrameRoot");)C++;if(m===Z.length||C===fe.length)for(m=Z.length-1,C=fe.length-1;1<=m&&0<=C&&Z[m]!==fe[C];)C--;for(;1<=m&&0<=C;m--,C--)if(Z[m]!==fe[C]){if(m!==1||C!==1)do if(m--,C--,0>C||Z[m]!==fe[C]){var Te=`
`+Z[m].replace(" at new "," at ");return o.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",o.displayName)),Te}while(1<=m&&0<=C);break}}}finally{Ti=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Fr(l):""}function Yt(o){switch(o.tag){case 26:case 27:case 5:return Fr(o.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 15:return Pl(o.type,!1);case 11:return Pl(o.type.render,!1);case 1:return Pl(o.type,!0);case 31:return Fr("Activity");default:return""}}function nd(o){try{var a="";do a+=Yt(o),o=o.return;while(o);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function qn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function St(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $n(o){var a=St(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),m=""+o[a];if(!o.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var C=l.get,E=l.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return C.call(this)},set:function(D){m=""+D,E.call(this,D)}}),Object.defineProperty(o,a,{enumerable:l.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function an(o){o._valueTracker||(o._valueTracker=$n(o))}function lc(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var l=a.getValue(),m="";return o&&(m=St(o)?o.checked?"true":"false":o.value),o=m,o!==l?(a.setValue(o),!0):!1}function Si(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Dl=/[\n"\\]/g;function An(o){return o.replace(Dl,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function la(o,a,l,m,C,E,D,z){o.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.type=D:o.removeAttribute("type"),a!=null?D==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+qn(a)):o.value!==""+qn(a)&&(o.value=""+qn(a)):D!=="submit"&&D!=="reset"||o.removeAttribute("value"),a!=null?uc(o,D,qn(a)):l!=null?uc(o,D,qn(l)):m!=null&&o.removeAttribute("value"),C==null&&E!=null&&(o.defaultChecked=!!E),C!=null&&(o.checked=C&&typeof C!="function"&&typeof C!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?o.name=""+qn(z):o.removeAttribute("name")}function jl(o,a,l,m,C,E,D,z){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+qn(l):"",a=a!=null?""+qn(a):l,z||a===o.value||(o.value=a),o.defaultValue=a}m=m??C,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=z?o.checked:!!m,o.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.name=D)}function uc(o,a,l){a==="number"&&Si(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function Qo(o,a,l,m){if(o=o.options,a){a={};for(var C=0;C<l.length;C++)a["$"+l[C]]=!0;for(l=0;l<o.length;l++)C=a.hasOwnProperty("$"+o[l].value),o[l].selected!==C&&(o[l].selected=C),C&&m&&(o[l].defaultSelected=!0)}else{for(l=""+qn(l),a=null,C=0;C<o.length;C++){if(o[C].value===l){o[C].selected=!0,m&&(o[C].defaultSelected=!0);return}a!==null||o[C].disabled||(a=o[C])}a!==null&&(a.selected=!0)}}function Ll(o,a,l){if(a!=null&&(a=""+qn(a),a!==o.value&&(o.value=a),l==null)){o.defaultValue!==a&&(o.defaultValue=a);return}o.defaultValue=l!=null?""+qn(l):""}function dc(o,a,l,m){if(a==null){if(m!=null){if(l!=null)throw Error(r(92));if(J(m)){if(1<m.length)throw Error(r(93));m=m[0]}l=m}l==null&&(l=""),a=l}l=qn(a),o.defaultValue=l,m=o.textContent,m===l&&m!==""&&m!==null&&(o.value=m)}function ua(o,a){if(a){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=a;return}}o.textContent=a}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uf(o,a,l){var m=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?m?o.setProperty(a,""):a==="float"?o.cssFloat="":o[a]="":m?o.setProperty(a,l):typeof l!="number"||l===0||_t.has(a)?a==="float"?o.cssFloat=l:o[a]=(""+l).trim():o[a]=l+"px"}function df(o,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(o=o.style,l!=null){for(var m in l)!l.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var C in a)m=a[C],a.hasOwnProperty(C)&&l[C]!==m&&uf(o,C,m)}else for(var E in a)a.hasOwnProperty(E)&&uf(o,E,a[E])}function Ul(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hl(o){return qC.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var hf=null;function hc(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var _i=null,ys=null;function rd(o){var a=Br(o);if(a&&(o=a.stateNode)){var l=o[En]||null;e:switch(o=a.stateNode,a.type){case"input":if(la(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+An(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var m=l[a];if(m!==o&&m.form===o.form){var C=m[En]||null;if(!C)throw Error(r(90));la(m,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(a=0;a<l.length;a++)m=l[a],m.form===o.form&&lc(m)}break e;case"textarea":Ll(o,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Qo(o,!!l.multiple,a,!1)}}}var ki=!1;function od(o,a,l){if(ki)return o(a,l);ki=!0;try{var m=o(a);return m}finally{if(ki=!1,(_i!==null||ys!==null)&&(ah(),_i&&(a=_i,o=ys,ys=_i=null,rd(a),o)))for(a=0;a<o.length;a++)rd(o[a])}}function da(o,a){var l=o.stateNode;if(l===null)return null;var m=l[En]||null;if(m===null)return null;l=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=!1;if(Ii)try{var q={};Object.defineProperty(q,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",q,q),window.removeEventListener("test",q,q)}catch{Vn=!1}var vs=null,Bl=null,id=null;function sd(){if(id)return id;var o,a=Bl,l=a.length,m,C="value"in vs?vs.value:vs.textContent,E=C.length;for(o=0;o<l&&a[o]===C[o];o++);var D=l-o;for(m=1;m<=D&&a[l-m]===C[E-m];m++);return id=C.slice(o,1<m?1-m:void 0)}function ha(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function zl(){return!0}function Fg(){return!1}function Ar(o){function a(l,m,C,E,D){this._reactName=l,this._targetInst=C,this.type=m,this.nativeEvent=E,this.target=D,this.currentTarget=null;for(var z in o)o.hasOwnProperty(z)&&(l=o[z],this[z]=l?l(E):E[z]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?zl:Fg,this.isPropagationStopped=Fg,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),a}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=Ar(fa),Fl=v({},fa,{view:0,detail:0}),$C=Ar(Fl),ff,mf,Kl,Gl=v({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Kl&&(Kl&&o.type==="mousemove"?(ff=o.screenX-Kl.screenX,mf=o.screenY-Kl.screenY):mf=ff=0,Kl=o),ff)},movementY:function(o){return"movementY"in o?o.movementY:mf}}),no=Ar(Gl),cd=v({},Gl,{dataTransfer:0}),fc=Ar(cd),ma=v({},Fl,{relatedTarget:0}),ld=Ar(ma),VC=v({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),YC=Ar(VC),QC=v({},fa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),WC=Ar(QC),XC=v({},fa,{data:0}),Kg=Ar(XC),JC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tw(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=ew[o])?!!a[o]:!1}function gf(){return tw}var nw=v({},Fl,{key:function(o){if(o.key){var a=JC[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=ha(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?ZC[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(o){return o.type==="keypress"?ha(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ha(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),rw=Ar(nw),ow=v({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gg=Ar(ow),iw=v({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),sw=Ar(iw),aw=v({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=Ar(aw),lw=v({},Gl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),uw=Ar(lw),dw=v({},fa,{newState:0,oldState:0}),hw=Ar(dw),fw=[9,13,27,32],pf=Ii&&"CompositionEvent"in window,ql=null;Ii&&"documentMode"in document&&(ql=document.documentMode);var mw=Ii&&"TextEvent"in window&&!ql,qg=Ii&&(!pf||ql&&8<ql&&11>=ql),yf=" ",vf=!1;function Cf(o,a){switch(o){case"keyup":return fw.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $g(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var mc=!1;function gw(o,a){switch(o){case"compositionend":return $g(a);case"keypress":return a.which!==32?null:(vf=!0,yf);case"textInput":return o=a.data,o===yf&&vf?null:o;default:return null}}function pw(o,a){if(mc)return o==="compositionend"||!pf&&Cf(o,a)?(o=sd(),id=Bl=vs=null,mc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qg&&a.locale!=="ko"?null:a.data;default:return null}}var yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!yw[o.type]:a==="textarea"}function $l(o,a,l,m){_i?ys?ys.push(m):ys=[m]:_i=m,a=Fp(a,"onChange"),0<a.length&&(l=new ad("onChange","change",null,l,m),o.push({event:l,listeners:a}))}var Cs=null,ga=null;function vw(o){mT(o,0)}function ud(o){var a=to(o);if(lc(a))return o}function Vl(o,a){if(o==="change")return a}var dd=!1;if(Ii){var wf;if(Ii){var bf="oninput"in document;if(!bf){var hd=document.createElement("div");hd.setAttribute("oninput","return;"),bf=typeof hd.oninput=="function"}wf=bf}else wf=!1;dd=wf&&(!document.documentMode||9<document.documentMode)}function fd(){Cs&&(Cs.detachEvent("onpropertychange",md),ga=Cs=null)}function md(o){if(o.propertyName==="value"&&ud(ga)){var a=[];$l(a,ga,o,hc(o)),od(vw,a)}}function Cw(o,a,l){o==="focusin"?(fd(),Cs=a,ga=l,Cs.attachEvent("onpropertychange",md)):o==="focusout"&&fd()}function ww(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ud(ga)}function bw(o,a){if(o==="click")return ud(a)}function gd(o,a){if(o==="input"||o==="change")return ud(a)}function pd(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Yn=typeof Object.is=="function"?Object.is:pd;function gc(o,a){if(Yn(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var l=Object.keys(o),m=Object.keys(a);if(l.length!==m.length)return!1;for(m=0;m<l.length;m++){var C=l[m];if(!Ee.call(a,C)||!Yn(o[C],a[C]))return!1}return!0}function yd(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function vd(o,a){var l=yd(o);o=0;for(var m;l;){if(l.nodeType===3){if(m=o+l.textContent.length,o<=a&&m>=a)return{node:l,offset:a-o};o=m}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yd(l)}}function Cd(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?Cd(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function wd(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var a=Si(o.document);a instanceof o.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)o=a.contentWindow;else break;a=Si(o.document)}return a}function xf(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}var Yg=Ii&&"documentMode"in document&&11>=document.documentMode,pc=null,bd=null,Yl=null,Ef=!1;function Qg(o,a,l){var m=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ef||pc==null||pc!==Si(m)||(m=pc,"selectionStart"in m&&xf(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Yl&&gc(Yl,m)||(Yl=m,m=Fp(bd,"onSelect"),0<m.length&&(a=new ad("onSelect","select",null,a,l),o.push({event:a,listeners:m}),a.target=pc)))}function ws(o,a){var l={};return l[o.toLowerCase()]=a.toLowerCase(),l["Webkit"+o]="webkit"+a,l["Moz"+o]="moz"+a,l}var pa={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},xd={},Af={};Ii&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ri(o){if(xd[o])return xd[o];if(!pa[o])return o;var a=pa[o],l;for(l in a)if(a.hasOwnProperty(l)&&l in Af)return xd[o]=a[l];return o}var Tf=Ri("animationend"),Ni=Ri("animationiteration"),Ed=Ri("animationstart"),Sf=Ri("transitionrun"),Wg=Ri("transitionstart"),Xg=Ri("transitioncancel"),_f=Ri("transitionend"),Jg=new Map,yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yc.push("scrollEnd");function Ao(o,a){Jg.set(o,a),Er(a,[o])}var Zg=new WeakMap;function mn(o,a){if(typeof o=="object"&&o!==null){var l=Zg.get(o);return l!==void 0?l:(a={value:o,source:a,stack:nd(a)},Zg.set(o,a),a)}return{value:o,source:a,stack:nd(a)}}var ro=[],vc=0,kf=0;function Qn(){for(var o=vc,a=kf=vc=0;a<o;){var l=ro[a];ro[a++]=null;var m=ro[a];ro[a++]=null;var C=ro[a];ro[a++]=null;var E=ro[a];if(ro[a++]=null,m!==null&&C!==null){var D=m.pending;D===null?C.next=C:(C.next=D.next,D.next=C),m.pending=C}E!==0&&If(l,C,E)}}function Ae(o,a,l,m){ro[vc++]=o,ro[vc++]=a,ro[vc++]=l,ro[vc++]=m,kf|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Cc(o,a,l,m){return Ae(o,a,l,m),oo(o)}function Tn(o,a){return Ae(o,null,null,a),oo(o)}function If(o,a,l){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l);for(var C=!1,E=o.return;E!==null;)E.childLanes|=l,m=E.alternate,m!==null&&(m.childLanes|=l),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(C=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,C&&a!==null&&(C=31-Vt(l),o=E.hiddenUpdates,m=o[C],m===null?o[C]=[a]:m.push(a),a.lane=l|536870912),E):null}function oo(o){if(50<_u)throw _u=0,dm=null,Error(r(185));for(var a=o.return;a!==null;)o=a,a=o.return;return o.tag===3?o.stateNode:null}var Wo={};function xw(o,a,l,m){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(o,a,l,m){return new xw(o,a,l,m)}function wc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function io(o,a){var l=o.alternate;return l===null?(l=Tr(o.tag,a,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=a,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,a=o.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function Rf(o,a){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=a,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,a=l.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),o}function bc(o,a,l,m,C,E){var D=0;if(m=o,typeof o=="function")wc(o)&&(D=1);else if(typeof o=="string")D=h2(o,l,me.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case ee:return o=Tr(31,l,a,C),o.elementType=ee,o.lanes=E,o;case I:return bs(l.children,C,E,a);case _:D=8,C|=24;break;case N:return o=Tr(12,l,a,C|2),o.elementType=N,o.lanes=E,o;case H:return o=Tr(13,l,a,C),o.elementType=H,o.lanes=E,o;case G:return o=Tr(19,l,a,C),o.elementType=G,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:case O:D=10;break e;case U:D=9;break e;case L:D=11;break e;case V:D=14;break e;case $:D=16,m=null;break e}D=29,l=Error(r(130,o===null?"null":typeof o,"")),m=null}return a=Tr(D,l,a,C),a.elementType=o,a.type=m,a.lanes=E,a}function bs(o,a,l,m){return o=Tr(7,o,m,a),o.lanes=l,o}function Nf(o,a,l){return o=Tr(6,o,null,a),o.lanes=l,o}function Ad(o,a,l){return a=Tr(4,o.children!==null?o.children:[],o.key,a),a.lanes=l,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}var xc=[],Ec=0,Td=null,Sd=0,so=[],Kr=0,Xo=null,To=1,Jo="";function gn(o,a){xc[Ec++]=Sd,xc[Ec++]=Td,Td=o,Sd=a}function ep(o,a,l){so[Kr++]=To,so[Kr++]=Jo,so[Kr++]=Xo,Xo=o;var m=To;o=Jo;var C=32-Vt(m)-1;m&=~(1<<C),l+=1;var E=32-Vt(a)+C;if(30<E){var D=C-C%5;E=(m&(1<<D)-1).toString(32),m>>=D,C-=D,To=1<<32-Vt(a)+C|l<<C|m,Jo=E+o}else To=1<<E|l<<C|m,Jo=o}function _d(o){o.return!==null&&(gn(o,1),ep(o,1,0))}function kd(o){for(;o===Td;)Td=xc[--Ec],xc[Ec]=null,Sd=xc[--Ec],xc[Ec]=null;for(;o===Xo;)Xo=so[--Kr],so[Kr]=null,Jo=so[--Kr],so[Kr]=null,To=so[--Kr],so[Kr]=null}var nr=null,Nt=null,At=!1,rr=null,Gr=!1,ya=Error(r(519));function Oi(o){var a=Error(r(418,""));throw xs(mn(a,o)),ya}function Of(o){var a=o.stateNode,l=o.type,m=o.memoizedProps;switch(a[Ie]=o,a[En]=m,l){case"dialog":bt("cancel",a),bt("close",a);break;case"iframe":case"object":case"embed":bt("load",a);break;case"video":case"audio":for(l=0;l<vm.length;l++)bt(vm[l],a);break;case"source":bt("error",a);break;case"img":case"image":case"link":bt("error",a),bt("load",a);break;case"details":bt("toggle",a);break;case"input":bt("invalid",a),jl(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),an(a);break;case"select":bt("invalid",a);break;case"textarea":bt("invalid",a),dc(a,m.value,m.defaultValue,m.children),an(a)}l=m.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||m.suppressHydrationWarning===!0||vT(a.textContent,l)?(m.popover!=null&&(bt("beforetoggle",a),bt("toggle",a)),m.onScroll!=null&&bt("scroll",a),m.onScrollEnd!=null&&bt("scrollend",a),m.onClick!=null&&(a.onclick=Kp),a=!0):a=!1,a||Oi(o)}function Sr(o){for(nr=o.return;nr;)switch(nr.tag){case 5:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:nr=nr.return}}function So(o){if(o!==nr)return!1;if(!At)return Sr(o),At=!0,!1;var a=o.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||zw(o.type,o.memoizedProps)),l=!l),l&&Nt&&Oi(o),Sr(o),a===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8)if(l=o.data,l==="/$"){if(a===0){Nt=Xi(o.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;o=o.nextSibling}Nt=null}}else a===27?(a=Nt,nl(o.type)?(o=qw,qw=null,Nt=o):Nt=a):Nt=nr?Xi(o.stateNode.nextSibling):null;return!0}function Mi(){Nt=nr=null,At=!1}function Ql(){var o=rr;return o!==null&&(cr===null?cr=o:cr.push.apply(cr,o),rr=null),o}function xs(o){rr===null?rr=[o]:rr.push(o)}var Id=Q(null),Es=null,Zo=null;function _r(o,a,l){ue(Id,a._currentValue),a._currentValue=l}function Pi(o){o._currentValue=Id.current,ie(Id)}function Rd(o,a,l){for(;o!==null;){var m=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),o===l)break;o=o.return}}function Mf(o,a,l,m){var C=o.child;for(C!==null&&(C.return=o);C!==null;){var E=C.dependencies;if(E!==null){var D=C.child;E=E.firstContext;e:for(;E!==null;){var z=E;E=C;for(var Z=0;Z<a.length;Z++)if(z.context===a[Z]){E.lanes|=l,z=E.alternate,z!==null&&(z.lanes|=l),Rd(E.return,l,o),m||(D=null);break e}E=z.next}}else if(C.tag===18){if(D=C.return,D===null)throw Error(r(341));D.lanes|=l,E=D.alternate,E!==null&&(E.lanes|=l),Rd(D,l,o),D=null}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===o){D=null;break}if(C=D.sibling,C!==null){C.return=D.return,D=C;break}D=D.return}C=D}}function As(o,a,l,m){o=null;for(var C=a,E=!1;C!==null;){if(!E){if((C.flags&524288)!==0)E=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var D=C.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var z=C.type;Yn(C.pendingProps.value,D.value)||(o!==null?o.push(z):o=[z])}}else if(C===le.current){if(D=C.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(o!==null?o.push(Am):o=[Am])}C=C.return}o!==null&&Mf(a,o,l,m),a.flags|=262144}function Nd(o){for(o=o.firstContext;o!==null;){if(!Yn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Nn(o){Es=o,Zo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Wn(o){return Ca(Es,o)}function va(o,a){return Es===null&&Nn(o),Ca(o,a)}function Ca(o,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Zo===null){if(o===null)throw Error(r(308));Zo=a,o.dependencies={lanes:0,firstContext:a},o.flags|=524288}else Zo=Zo.next=a;return l}var Ew=typeof AbortController<"u"?AbortController:function(){var o=[],a=this.signal={aborted:!1,addEventListener:function(l,m){o.push(m)}};this.abort=function(){a.aborted=!0,o.forEach(function(l){return l()})}},wa=t.unstable_scheduleCallback,Aw=t.unstable_NormalPriority,tn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wl(){return{controller:new Ew,data:new Map,refCount:0}}function Ac(o){o.refCount--,o.refCount===0&&wa(Aw,function(){o.controller.abort()})}var Tc=null,Pf=0,Sc=0,_c=null;function Tw(o,a){if(Tc===null){var l=Tc=[];Pf=0,Sc=Bt(),_c={status:"pending",value:void 0,then:function(m){l.push(m)}}}return Pf++,a.then(tp,tp),a}function tp(){if(--Pf===0&&Tc!==null){_c!==null&&(_c.status="fulfilled");var o=Tc;Tc=null,Sc=0,_c=null;for(var a=0;a<o.length;a++)(0,o[a])()}}function Df(o,a){var l=[],m={status:"pending",value:null,reason:null,then:function(C){l.push(C)}};return o.then(function(){m.status="fulfilled",m.value=a;for(var C=0;C<l.length;C++)(0,l[C])(a)},function(C){for(m.status="rejected",m.reason=C,C=0;C<l.length;C++)(0,l[C])(void 0)}),m}var np=P.S;P.S=function(o,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Tw(o,a),np!==null&&np(o,a)};var Ts=Q(null);function jf(){var o=Ts.current;return o!==null?o:Wt.pooledCache}function Od(o,a){a===null?ue(Ts,Ts.current):ue(Ts,a.pool)}function rp(){var o=jf();return o===null?null:{parent:tn._currentValue,pool:o}}var Xl=Error(r(460)),Lf=Error(r(474)),Jl=Error(r(542)),Uf={then:function(){}};function op(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ss(){}function Hf(o,a,l){switch(l=o[l],l===void 0?o.push(a):l!==a&&(a.then(Ss,Ss),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,Md(o),o;default:if(typeof a.status=="string")a.then(Ss,Ss);else{if(o=Wt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=a,o.status="pending",o.then(function(m){if(a.status==="pending"){var C=a;C.status="fulfilled",C.value=m}},function(m){if(a.status==="pending"){var C=a;C.status="rejected",C.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,Md(o),o}throw kc=a,Xl}}var kc=null;function ip(){if(kc===null)throw Error(r(459));var o=kc;return kc=null,o}function Md(o){if(o===Xl||o===Jl)throw Error(r(483))}var Di=!1;function Zl(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bf(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function _s(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ks(o,a,l){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Ut&2)!==0){var C=m.pending;return C===null?a.next=a:(a.next=C.next,C.next=a),m.pending=a,a=oo(o),If(o,null,l),a}return Ae(o,m,a,l),oo(o)}function eu(o,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var m=a.lanes;m&=o.pendingLanes,l|=m,a.lanes=l,ct(o,l)}}function tu(o,a){var l=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,l===m)){var C=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var D={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?C=E=D:E=E.next=D,l=l.next}while(l!==null);E===null?C=E=a:E=E.next=a}else C=E=a;l={baseState:m.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=a:o.next=a,l.lastBaseUpdate=a}var zf=!1;function nu(){if(zf){var o=_c;if(o!==null)throw o}}function ei(o,a,l,m){zf=!1;var C=o.updateQueue;Di=!1;var E=C.firstBaseUpdate,D=C.lastBaseUpdate,z=C.shared.pending;if(z!==null){C.shared.pending=null;var Z=z,fe=Z.next;Z.next=null,D===null?E=fe:D.next=fe,D=Z;var Te=o.alternate;Te!==null&&(Te=Te.updateQueue,z=Te.lastBaseUpdate,z!==D&&(z===null?Te.firstBaseUpdate=fe:z.next=fe,Te.lastBaseUpdate=Z))}if(E!==null){var Ne=C.baseState;D=0,Te=fe=Z=null,z=E;do{var pe=z.lane&-536870913,ye=pe!==z.lane;if(ye?(Tt&pe)===pe:(m&pe)===pe){pe!==0&&pe===Sc&&(zf=!0),Te!==null&&(Te=Te.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var at=o,nt=z;pe=a;var Jt=l;switch(nt.tag){case 1:if(at=nt.payload,typeof at=="function"){Ne=at.call(Jt,Ne,pe);break e}Ne=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=nt.payload,pe=typeof at=="function"?at.call(Jt,Ne,pe):at,pe==null)break e;Ne=v({},Ne,pe);break e;case 2:Di=!0}}pe=z.callback,pe!==null&&(o.flags|=64,ye&&(o.flags|=8192),ye=C.callbacks,ye===null?C.callbacks=[pe]:ye.push(pe))}else ye={lane:pe,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Te===null?(fe=Te=ye,Z=Ne):Te=Te.next=ye,D|=pe;if(z=z.next,z===null){if(z=C.shared.pending,z===null)break;ye=z,z=ye.next,ye.next=null,C.lastBaseUpdate=ye,C.shared.pending=null}}while(!0);Te===null&&(Z=Ne),C.baseState=Z,C.firstBaseUpdate=fe,C.lastBaseUpdate=Te,E===null&&(C.shared.lanes=0),di|=D,o.lanes=D,o.memoizedState=Ne}}function ru(o,a){if(typeof o!="function")throw Error(r(191,o));o.call(a)}function Pd(o,a){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)ru(l[o],a)}var _o=Q(null),ti=Q(0);function Ic(o,a){o=fo,ue(ti,o),ue(_o,a),fo=o|a.baseLanes}function Is(){ue(ti,fo),ue(_o,_o.current)}function ba(){fo=ti.current,ie(_o),ie(ti)}var ao=0,dt=null,kt=null,cn=null,Rs=!1,qr=!1,ni=!1,Ns=0,ji=0,ri=null,ou=0;function ln(){throw Error(r(321))}function Li(o,a){if(a===null)return!1;for(var l=0;l<a.length&&l<o.length;l++)if(!Yn(o[l],a[l]))return!1;return!0}function xa(o,a,l,m,C,E){return ao=E,dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,P.H=o===null||o.memoizedState===null?Fd:hp,ni=!1,E=l(m,C),ni=!1,qr&&(E=Rc(a,l,m,C)),iu(o),E}function iu(o){P.H=hu;var a=kt!==null&&kt.next!==null;if(ao=0,cn=kt=dt=null,Rs=!1,ji=0,ri=null,a)throw Error(r(300));o===null||Un||(o=o.dependencies,o!==null&&Nd(o)&&(Un=!0))}function Rc(o,a,l,m){dt=o;var C=0;do{if(qr&&(ri=null),ji=0,qr=!1,25<=C)throw Error(r(301));if(C+=1,cn=kt=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}P.H=Sw,E=a(l,m)}while(qr);return E}function su(){var o=P.H,a=o.useState()[0];return a=typeof a.then=="function"?Hi(a):a,o=o.useState()[0],(kt!==null?kt.memoizedState:null)!==o&&(dt.flags|=1024),a}function Nc(){var o=Ns!==0;return Ns=0,o}function Oc(o,a,l){a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~l}function Ui(o){if(Rs){for(o=o.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Rs=!1}ao=0,cn=kt=dt=null,qr=!1,ji=Ns=0,ri=null}function pn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?dt.memoizedState=cn=o:cn=cn.next=o,cn}function Qt(){if(kt===null){var o=dt.alternate;o=o!==null?o.memoizedState:null}else o=kt.next;var a=cn===null?dt.memoizedState:cn.next;if(a!==null)cn=a,kt=o;else{if(o===null)throw dt.alternate===null?Error(r(467)):Error(r(310));kt=o,o={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},cn===null?dt.memoizedState=cn=o:cn=cn.next=o}return cn}function Ea(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hi(o){var a=ji;return ji+=1,ri===null&&(ri=[]),o=Hf(ri,o,a),a=dt,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,P.H=a===null||a.memoizedState===null?Fd:hp),o}function Bi(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Hi(o);if(o.$$typeof===O)return Wn(o)}throw Error(r(438,String(o)))}function Aa(o){var a=null,l=dt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var m=dt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(C){return C.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Ea(),dt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(o),m=0;m<o;m++)l[m]=se;return a.index++,l}function kr(o,a){return typeof a=="function"?a(o):a}function Os(o){var a=Qt();return Ta(a,kt,o)}function Ta(o,a,l){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var C=o.baseQueue,E=m.pending;if(E!==null){if(C!==null){var D=C.next;C.next=E.next,E.next=D}a.baseQueue=C=E,m.pending=null}if(E=o.baseState,C===null)o.memoizedState=E;else{a=C.next;var z=D=null,Z=null,fe=a,Te=!1;do{var Ne=fe.lane&-536870913;if(Ne!==fe.lane?(Tt&Ne)===Ne:(ao&Ne)===Ne){var pe=fe.revertLane;if(pe===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ne===Sc&&(Te=!0);else if((ao&pe)===pe){fe=fe.next,pe===Sc&&(Te=!0);continue}else Ne={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(z=Z=Ne,D=E):Z=Z.next=Ne,dt.lanes|=pe,di|=pe;Ne=fe.action,ni&&l(E,Ne),E=fe.hasEagerState?fe.eagerState:l(E,Ne)}else pe={lane:Ne,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(z=Z=pe,D=E):Z=Z.next=pe,dt.lanes|=Ne,di|=Ne;fe=fe.next}while(fe!==null&&fe!==a);if(Z===null?D=E:Z.next=z,!Yn(E,o.memoizedState)&&(Un=!0,Te&&(l=_c,l!==null)))throw l;o.memoizedState=E,o.baseState=D,o.baseQueue=Z,m.lastRenderedState=E}return C===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Sa(o){var a=Qt(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=o;var m=l.dispatch,C=l.pending,E=a.memoizedState;if(C!==null){l.pending=null;var D=C=C.next;do E=o(E,D.action),D=D.next;while(D!==C);Yn(E,a.memoizedState)||(Un=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,m]}function _a(o,a,l){var m=dt,C=Qt(),E=At;if(E){if(l===void 0)throw Error(r(407));l=l()}else l=a();var D=!Yn((kt||C).memoizedState,l);D&&(C.memoizedState=l,Un=!0),C=C.queue;var z=Dc.bind(null,m,C,o);if(co(2048,8,z,[o]),C.getSnapshot!==a||D||cn!==null&&cn.memoizedState.tag&1){if(m.flags|=2048,Xn(9,Ms(),Pc.bind(null,m,C,l,a),null),Wt===null)throw Error(r(349));E||(ao&124)!==0||Mc(m,a,l)}return l}function Mc(o,a,l){o.flags|=16384,o={getSnapshot:a,value:l},a=dt.updateQueue,a===null?(a=Ea(),dt.updateQueue=a,a.stores=[o]):(l=a.stores,l===null?a.stores=[o]:l.push(o))}function Pc(o,a,l,m){a.value=l,a.getSnapshot=m,ka(a)&&zi(o)}function Dc(o,a,l){return l(function(){ka(a)&&zi(o)})}function ka(o){var a=o.getSnapshot;o=o.value;try{var l=a();return!Yn(o,l)}catch{return!0}}function zi(o){var a=Tn(o,2);a!==null&&Dr(a,o,2)}function Ia(o){var a=pn();if(typeof o=="function"){var l=o;if(o=l(),ni){Et(!0);try{l()}finally{Et(!1)}}}return a.memoizedState=a.baseState=o,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:o},a}function jc(o,a,l,m){return o.baseState=l,Ta(o,kt,typeof m=="function"?m:kr)}function au(o,a,l,m,C){if(du(o))throw Error(r(485));if(o=a.action,o!==null){var E={payload:C,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){E.listeners.push(D)}};P.T!==null?l(!0):E.isTransition=!1,m(E),l=a.pending,l===null?(E.next=a.pending=E,Dd(a,E)):(E.next=l.next,a.pending=l.next=E)}}function Dd(o,a){var l=a.action,m=a.payload,C=o.state;if(a.isTransition){var E=P.T,D={};P.T=D;try{var z=l(C,m),Z=P.S;Z!==null&&Z(D,z),jd(o,a,z)}catch(fe){Ra(o,a,fe)}finally{P.T=E}}else try{E=l(C,m),jd(o,a,E)}catch(fe){Ra(o,a,fe)}}function jd(o,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(m){Lc(o,a,m)},function(m){return Ra(o,a,m)}):Lc(o,a,l)}function Lc(o,a,l){a.status="fulfilled",a.value=l,sp(a),o.state=l,a=o.pending,a!==null&&(l=a.next,l===a?o.pending=null:(l=l.next,a.next=l,Dd(o,l)))}function Ra(o,a,l){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=l,sp(a),a=a.next;while(a!==m)}o.action=null}function sp(o){o=o.listeners;for(var a=0;a<o.length;a++)(0,o[a])()}function oi(o,a){return a}function st(o,a){if(At){var l=Wt.formState;if(l!==null){e:{var m=dt;if(At){if(Nt){t:{for(var C=Nt,E=Gr;C.nodeType!==8;){if(!E){C=null;break t}if(C=Xi(C.nextSibling),C===null){C=null;break t}}E=C.data,C=E==="F!"||E==="F"?C:null}if(C){Nt=Xi(C.nextSibling),m=C.data==="F!";break e}}Oi(m)}m=!1}m&&(a=l[0])}}return l=pn(),l.memoizedState=l.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:a},l.queue=m,l=Bd.bind(null,dt,m),m.dispatch=l,m=Ia(!1),E=$f.bind(null,dt,!1,m.queue),m=pn(),C={state:a,dispatch:null,action:o,pending:null},m.queue=C,l=au.bind(null,dt,C,E,l),C.dispatch=l,m.memoizedState=o,[a,l,!1]}function ap(o){var a=Qt();return Na(a,kt,o)}function Na(o,a,l){if(a=Ta(o,a,oi)[0],o=Os(kr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=Hi(a)}catch(D){throw D===Xl?Jl:D}else m=a;a=Qt();var C=a.queue,E=C.dispatch;return l!==a.memoizedState&&(dt.flags|=2048,Xn(9,Ms(),He.bind(null,C,l),null)),[m,E,o]}function He(o,a){o.action=a}function or(o){var a=Qt(),l=kt;if(l!==null)return Na(a,l,o);Qt(),a=a.memoizedState,l=Qt();var m=l.queue.dispatch;return l.memoizedState=o,[a,m,!1]}function Xn(o,a,l,m){return o={tag:o,create:l,deps:m,inst:a,next:null},a=dt.updateQueue,a===null&&(a=Ea(),dt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=o.next=o:(m=l.next,l.next=o,o.next=m,a.lastEffect=o),o}function Ms(){return{destroy:void 0,resource:void 0}}function yn(){return Qt().memoizedState}function cu(o,a,l,m){var C=pn();m=m===void 0?null:m,dt.flags|=o,C.memoizedState=Xn(1|a,Ms(),l,m)}function co(o,a,l,m){var C=Qt();m=m===void 0?null:m;var E=C.memoizedState.inst;kt!==null&&m!==null&&Li(m,kt.memoizedState.deps)?C.memoizedState=Xn(a,E,l,m):(dt.flags|=o,C.memoizedState=Xn(1|a,E,l,m))}function Sn(o,a){cu(8390656,8,o,a)}function lu(o,a){co(2048,8,o,a)}function Pt(o,a){return co(4,2,o,a)}function ir(o,a){return co(4,4,o,a)}function Ld(o,a){if(typeof a=="function"){o=o();var l=a(o);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function Ff(o,a,l){l=l!=null?l.concat([o]):null,co(4,4,Ld.bind(null,a,o),l)}function Kf(){}function Ud(o,a){var l=Qt();a=a===void 0?null:a;var m=l.memoizedState;return a!==null&&Li(a,m[1])?m[0]:(l.memoizedState=[o,a],o)}function cp(o,a){var l=Qt();a=a===void 0?null:a;var m=l.memoizedState;if(a!==null&&Li(a,m[1]))return m[0];if(m=o(),ni){Et(!0);try{o()}finally{Et(!1)}}return l.memoizedState=[m,a],m}function Gf(o,a,l){return l===void 0||(ao&1073741824)!==0?o.memoizedState=a:(o.memoizedState=l,o=Np(),dt.lanes|=o,di|=o,l)}function _n(o,a,l,m){return Yn(l,a)?l:_o.current!==null?(o=Gf(o,l,m),Yn(o,a)||(Un=!0),o):(ao&42)===0?(Un=!0,o.memoizedState=l):(o=Np(),dt.lanes|=o,di|=o,a)}function lp(o,a,l,m,C){var E=F.p;F.p=E!==0&&8>E?E:8;var D=P.T,z={};P.T=z,$f(o,!1,a,l);try{var Z=C(),fe=P.S;if(fe!==null&&fe(z,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Te=Df(Z,m);uu(o,a,Te,Wr(o))}else uu(o,a,m,Wr(o))}catch(Ne){uu(o,a,{then:function(){},status:"rejected",reason:Ne},Wr())}finally{F.p=E,P.T=D}}function Hd(){}function ii(o,a,l,m){if(o.tag!==5)throw Error(r(476));var C=Uc(o).queue;lp(o,C,a,Y,l===null?Hd:function(){return qf(o),l(m)})}function Uc(o){var a=o.memoizedState;if(a!==null)return a;a={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:Y},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:l},next:null},o.memoizedState=a,o=o.alternate,o!==null&&(o.memoizedState=a),a}function qf(o){var a=Uc(o).next.queue;uu(o,a,{},Wr())}function $r(){return Wn(Am)}function Fi(){return Qt().memoizedState}function up(){return Qt().memoizedState}function Hc(o){for(var a=o.return;a!==null;){switch(a.tag){case 24:case 3:var l=Wr();o=_s(l);var m=ks(a,o,l);m!==null&&(Dr(m,a,l),eu(m,a,l)),a={cache:Wl()},o.payload=a;return}a=a.return}}function dp(o,a,l){var m=Wr();l={lane:m,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},du(o)?Vf(a,l):(l=Cc(o,a,l,m),l!==null&&(Dr(l,o,m),zd(l,a,m)))}function Bd(o,a,l){var m=Wr();uu(o,a,l,m)}function uu(o,a,l,m){var C={lane:m,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(du(o))Vf(a,C);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var D=a.lastRenderedState,z=E(D,l);if(C.hasEagerState=!0,C.eagerState=z,Yn(z,D))return Ae(o,a,C,0),Wt===null&&Qn(),!1}catch{}finally{}if(l=Cc(o,a,C,m),l!==null)return Dr(l,o,m),zd(l,a,m),!0}return!1}function $f(o,a,l,m){if(m={lane:2,revertLane:Bt(),action:m,hasEagerState:!1,eagerState:null,next:null},du(o)){if(a)throw Error(r(479))}else a=Cc(o,l,m,2),a!==null&&Dr(a,o,2)}function du(o){var a=o.alternate;return o===dt||a!==null&&a===dt}function Vf(o,a){qr=Rs=!0;var l=o.pending;l===null?a.next=a:(a.next=l.next,l.next=a),o.pending=a}function zd(o,a,l){if((l&4194048)!==0){var m=a.lanes;m&=o.pendingLanes,l|=m,a.lanes=l,ct(o,l)}}var hu={readContext:Wn,use:Bi,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln},Fd={readContext:Wn,use:Bi,useCallback:function(o,a){return pn().memoizedState=[o,a===void 0?null:a],o},useContext:Wn,useEffect:Sn,useImperativeHandle:function(o,a,l){l=l!=null?l.concat([o]):null,cu(4194308,4,Ld.bind(null,a,o),l)},useLayoutEffect:function(o,a){return cu(4194308,4,o,a)},useInsertionEffect:function(o,a){cu(4,2,o,a)},useMemo:function(o,a){var l=pn();a=a===void 0?null:a;var m=o();if(ni){Et(!0);try{o()}finally{Et(!1)}}return l.memoizedState=[m,a],m},useReducer:function(o,a,l){var m=pn();if(l!==void 0){var C=l(a);if(ni){Et(!0);try{l(a)}finally{Et(!1)}}}else C=a;return m.memoizedState=m.baseState=C,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:C},m.queue=o,o=o.dispatch=dp.bind(null,dt,o),[m.memoizedState,o]},useRef:function(o){var a=pn();return o={current:o},a.memoizedState=o},useState:function(o){o=Ia(o);var a=o.queue,l=Bd.bind(null,dt,a);return a.dispatch=l,[o.memoizedState,l]},useDebugValue:Kf,useDeferredValue:function(o,a){var l=pn();return Gf(l,o,a)},useTransition:function(){var o=Ia(!1);return o=lp.bind(null,dt,o.queue,!0,!1),pn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,a,l){var m=dt,C=pn();if(At){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Wt===null)throw Error(r(349));(Tt&124)!==0||Mc(m,a,l)}C.memoizedState=l;var E={value:l,getSnapshot:a};return C.queue=E,Sn(Dc.bind(null,m,E,o),[o]),m.flags|=2048,Xn(9,Ms(),Pc.bind(null,m,E,l,a),null),l},useId:function(){var o=pn(),a=Wt.identifierPrefix;if(At){var l=Jo,m=To;l=(m&~(1<<32-Vt(m)-1)).toString(32)+l,a=""+a+"R"+l,l=Ns++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=ou++,a=""+a+"r"+l.toString(32)+"";return o.memoizedState=a},useHostTransitionStatus:$r,useFormState:st,useActionState:st,useOptimistic:function(o){var a=pn();a.memoizedState=a.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=$f.bind(null,dt,!0,l),l.dispatch=a,[o,a]},useMemoCache:Aa,useCacheRefresh:function(){return pn().memoizedState=Hc.bind(null,dt)}},hp={readContext:Wn,use:Bi,useCallback:Ud,useContext:Wn,useEffect:lu,useImperativeHandle:Ff,useInsertionEffect:Pt,useLayoutEffect:ir,useMemo:cp,useReducer:Os,useRef:yn,useState:function(){return Os(kr)},useDebugValue:Kf,useDeferredValue:function(o,a){var l=Qt();return _n(l,kt.memoizedState,o,a)},useTransition:function(){var o=Os(kr)[0],a=Qt().memoizedState;return[typeof o=="boolean"?o:Hi(o),a]},useSyncExternalStore:_a,useId:Fi,useHostTransitionStatus:$r,useFormState:ap,useActionState:ap,useOptimistic:function(o,a){var l=Qt();return jc(l,kt,o,a)},useMemoCache:Aa,useCacheRefresh:up},Sw={readContext:Wn,use:Bi,useCallback:Ud,useContext:Wn,useEffect:lu,useImperativeHandle:Ff,useInsertionEffect:Pt,useLayoutEffect:ir,useMemo:cp,useReducer:Sa,useRef:yn,useState:function(){return Sa(kr)},useDebugValue:Kf,useDeferredValue:function(o,a){var l=Qt();return kt===null?Gf(l,o,a):_n(l,kt.memoizedState,o,a)},useTransition:function(){var o=Sa(kr)[0],a=Qt().memoizedState;return[typeof o=="boolean"?o:Hi(o),a]},useSyncExternalStore:_a,useId:Fi,useHostTransitionStatus:$r,useFormState:or,useActionState:or,useOptimistic:function(o,a){var l=Qt();return kt!==null?jc(l,kt,o,a):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:Aa,useCacheRefresh:up},Ps=null,fu=0;function mu(o){var a=fu;return fu+=1,Ps===null&&(Ps=[]),Hf(Ps,o,a)}function gu(o,a){a=a.props.ref,o.ref=a!==void 0?a:null}function Bc(o,a){throw a.$$typeof===x?Error(r(525)):(o=Object.prototype.toString.call(a),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)))}function sr(o){var a=o._init;return a(o._payload)}function fp(o){function a(ae,ne){if(o){var de=ae.deletions;de===null?(ae.deletions=[ne],ae.flags|=16):de.push(ne)}}function l(ae,ne){if(!o)return null;for(;ne!==null;)a(ae,ne),ne=ne.sibling;return null}function m(ae){for(var ne=new Map;ae!==null;)ae.key!==null?ne.set(ae.key,ae):ne.set(ae.index,ae),ae=ae.sibling;return ne}function C(ae,ne){return ae=io(ae,ne),ae.index=0,ae.sibling=null,ae}function E(ae,ne,de){return ae.index=de,o?(de=ae.alternate,de!==null?(de=de.index,de<ne?(ae.flags|=67108866,ne):de):(ae.flags|=67108866,ne)):(ae.flags|=1048576,ne)}function D(ae){return o&&ae.alternate===null&&(ae.flags|=67108866),ae}function z(ae,ne,de,_e){return ne===null||ne.tag!==6?(ne=Nf(de,ae.mode,_e),ne.return=ae,ne):(ne=C(ne,de),ne.return=ae,ne)}function Z(ae,ne,de,_e){var $e=de.type;return $e===I?Te(ae,ne,de.props.children,_e,de.key):ne!==null&&(ne.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===$&&sr($e)===ne.type)?(ne=C(ne,de.props),gu(ne,de),ne.return=ae,ne):(ne=bc(de.type,de.key,de.props,null,ae.mode,_e),gu(ne,de),ne.return=ae,ne)}function fe(ae,ne,de,_e){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==de.containerInfo||ne.stateNode.implementation!==de.implementation?(ne=Ad(de,ae.mode,_e),ne.return=ae,ne):(ne=C(ne,de.children||[]),ne.return=ae,ne)}function Te(ae,ne,de,_e,$e){return ne===null||ne.tag!==7?(ne=bs(de,ae.mode,_e,$e),ne.return=ae,ne):(ne=C(ne,de),ne.return=ae,ne)}function Ne(ae,ne,de){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Nf(""+ne,ae.mode,de),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return de=bc(ne.type,ne.key,ne.props,null,ae.mode,de),gu(de,ne),de.return=ae,de;case A:return ne=Ad(ne,ae.mode,de),ne.return=ae,ne;case $:var _e=ne._init;return ne=_e(ne._payload),Ne(ae,ne,de)}if(J(ne)||oe(ne))return ne=bs(ne,ae.mode,de,null),ne.return=ae,ne;if(typeof ne.then=="function")return Ne(ae,mu(ne),de);if(ne.$$typeof===O)return Ne(ae,va(ae,ne),de);Bc(ae,ne)}return null}function pe(ae,ne,de,_e){var $e=ne!==null?ne.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return $e!==null?null:z(ae,ne,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case b:return de.key===$e?Z(ae,ne,de,_e):null;case A:return de.key===$e?fe(ae,ne,de,_e):null;case $:return $e=de._init,de=$e(de._payload),pe(ae,ne,de,_e)}if(J(de)||oe(de))return $e!==null?null:Te(ae,ne,de,_e,null);if(typeof de.then=="function")return pe(ae,ne,mu(de),_e);if(de.$$typeof===O)return pe(ae,ne,va(ae,de),_e);Bc(ae,de)}return null}function ye(ae,ne,de,_e,$e){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return ae=ae.get(de)||null,z(ne,ae,""+_e,$e);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case b:return ae=ae.get(_e.key===null?de:_e.key)||null,Z(ne,ae,_e,$e);case A:return ae=ae.get(_e.key===null?de:_e.key)||null,fe(ne,ae,_e,$e);case $:var Ct=_e._init;return _e=Ct(_e._payload),ye(ae,ne,de,_e,$e)}if(J(_e)||oe(_e))return ae=ae.get(de)||null,Te(ne,ae,_e,$e,null);if(typeof _e.then=="function")return ye(ae,ne,de,mu(_e),$e);if(_e.$$typeof===O)return ye(ae,ne,de,va(ne,_e),$e);Bc(ne,_e)}return null}function at(ae,ne,de,_e){for(var $e=null,Ct=null,Je=ne,ot=ne=0,lr=null;Je!==null&&ot<de.length;ot++){Je.index>ot?(lr=Je,Je=null):lr=Je.sibling;var Dt=pe(ae,Je,de[ot],_e);if(Dt===null){Je===null&&(Je=lr);break}o&&Je&&Dt.alternate===null&&a(ae,Je),ne=E(Dt,ne,ot),Ct===null?$e=Dt:Ct.sibling=Dt,Ct=Dt,Je=lr}if(ot===de.length)return l(ae,Je),At&&gn(ae,ot),$e;if(Je===null){for(;ot<de.length;ot++)Je=Ne(ae,de[ot],_e),Je!==null&&(ne=E(Je,ne,ot),Ct===null?$e=Je:Ct.sibling=Je,Ct=Je);return At&&gn(ae,ot),$e}for(Je=m(Je);ot<de.length;ot++)lr=ye(Je,ae,ot,de[ot],_e),lr!==null&&(o&&lr.alternate!==null&&Je.delete(lr.key===null?ot:lr.key),ne=E(lr,ne,ot),Ct===null?$e=lr:Ct.sibling=lr,Ct=lr);return o&&Je.forEach(function(al){return a(ae,al)}),At&&gn(ae,ot),$e}function nt(ae,ne,de,_e){if(de==null)throw Error(r(151));for(var $e=null,Ct=null,Je=ne,ot=ne=0,lr=null,Dt=de.next();Je!==null&&!Dt.done;ot++,Dt=de.next()){Je.index>ot?(lr=Je,Je=null):lr=Je.sibling;var al=pe(ae,Je,Dt.value,_e);if(al===null){Je===null&&(Je=lr);break}o&&Je&&al.alternate===null&&a(ae,Je),ne=E(al,ne,ot),Ct===null?$e=al:Ct.sibling=al,Ct=al,Je=lr}if(Dt.done)return l(ae,Je),At&&gn(ae,ot),$e;if(Je===null){for(;!Dt.done;ot++,Dt=de.next())Dt=Ne(ae,Dt.value,_e),Dt!==null&&(ne=E(Dt,ne,ot),Ct===null?$e=Dt:Ct.sibling=Dt,Ct=Dt);return At&&gn(ae,ot),$e}for(Je=m(Je);!Dt.done;ot++,Dt=de.next())Dt=ye(Je,ae,ot,Dt.value,_e),Dt!==null&&(o&&Dt.alternate!==null&&Je.delete(Dt.key===null?ot:Dt.key),ne=E(Dt,ne,ot),Ct===null?$e=Dt:Ct.sibling=Dt,Ct=Dt);return o&&Je.forEach(function(A2){return a(ae,A2)}),At&&gn(ae,ot),$e}function Jt(ae,ne,de,_e){if(typeof de=="object"&&de!==null&&de.type===I&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case b:e:{for(var $e=de.key;ne!==null;){if(ne.key===$e){if($e=de.type,$e===I){if(ne.tag===7){l(ae,ne.sibling),_e=C(ne,de.props.children),_e.return=ae,ae=_e;break e}}else if(ne.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===$&&sr($e)===ne.type){l(ae,ne.sibling),_e=C(ne,de.props),gu(_e,de),_e.return=ae,ae=_e;break e}l(ae,ne);break}else a(ae,ne);ne=ne.sibling}de.type===I?(_e=bs(de.props.children,ae.mode,_e,de.key),_e.return=ae,ae=_e):(_e=bc(de.type,de.key,de.props,null,ae.mode,_e),gu(_e,de),_e.return=ae,ae=_e)}return D(ae);case A:e:{for($e=de.key;ne!==null;){if(ne.key===$e)if(ne.tag===4&&ne.stateNode.containerInfo===de.containerInfo&&ne.stateNode.implementation===de.implementation){l(ae,ne.sibling),_e=C(ne,de.children||[]),_e.return=ae,ae=_e;break e}else{l(ae,ne);break}else a(ae,ne);ne=ne.sibling}_e=Ad(de,ae.mode,_e),_e.return=ae,ae=_e}return D(ae);case $:return $e=de._init,de=$e(de._payload),Jt(ae,ne,de,_e)}if(J(de))return at(ae,ne,de,_e);if(oe(de)){if($e=oe(de),typeof $e!="function")throw Error(r(150));return de=$e.call(de),nt(ae,ne,de,_e)}if(typeof de.then=="function")return Jt(ae,ne,mu(de),_e);if(de.$$typeof===O)return Jt(ae,ne,va(ae,de),_e);Bc(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ne!==null&&ne.tag===6?(l(ae,ne.sibling),_e=C(ne,de),_e.return=ae,ae=_e):(l(ae,ne),_e=Nf(de,ae.mode,_e),_e.return=ae,ae=_e),D(ae)):l(ae,ne)}return function(ae,ne,de,_e){try{fu=0;var $e=Jt(ae,ne,de,_e);return Ps=null,$e}catch(Je){if(Je===Xl||Je===Jl)throw Je;var Ct=Tr(29,Je,null,ae.mode);return Ct.lanes=_e,Ct.return=ae,Ct}finally{}}}var Ds=fp(!0),mp=fp(!1),lo=Q(null),uo=null;function js(o){var a=o.alternate;ue(On,On.current&1),ue(lo,o),uo===null&&(a===null||_o.current!==null||a.memoizedState!==null)&&(uo=o)}function gp(o){if(o.tag===22){if(ue(On,On.current),ue(lo,o),uo===null){var a=o.alternate;a!==null&&a.memoizedState!==null&&(uo=o)}}else Ki()}function Ki(){ue(On,On.current),ue(lo,lo.current)}function si(o){ie(lo),uo===o&&(uo=null),ie(On)}var On=Q(0);function Kd(o){for(var a=o;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Gw(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Gd(o,a,l,m){a=o.memoizedState,l=l(m,a),l=l==null?a:v({},a,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var qd={enqueueSetState:function(o,a,l){o=o._reactInternals;var m=Wr(),C=_s(m);C.payload=a,l!=null&&(C.callback=l),a=ks(o,C,m),a!==null&&(Dr(a,o,m),eu(a,o,m))},enqueueReplaceState:function(o,a,l){o=o._reactInternals;var m=Wr(),C=_s(m);C.tag=1,C.payload=a,l!=null&&(C.callback=l),a=ks(o,C,m),a!==null&&(Dr(a,o,m),eu(a,o,m))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var l=Wr(),m=_s(l);m.tag=2,a!=null&&(m.callback=a),a=ks(o,m,l),a!==null&&(Dr(a,o,l),eu(a,o,l))}};function Oa(o,a,l,m,C,E,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,E,D):a.prototype&&a.prototype.isPureReactComponent?!gc(l,m)||!gc(C,E):!0}function vn(o,a,l,m){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,m),a.state!==o&&qd.enqueueReplaceState(a,a.state,null)}function ko(o,a){var l=a;if("ref"in a){l={};for(var m in a)m!=="ref"&&(l[m]=a[m])}if(o=o.defaultProps){l===a&&(l=v({},l));for(var C in o)l[C]===void 0&&(l[C]=o[C])}return l}var $d=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function pu(o){$d(o)}function pp(o){console.error(o)}function yu(o){$d(o)}function dn(o,a){try{var l=o.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function Vd(o,a,l){try{var m=o.onCaughtError;m(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Yd(o,a,l){return l=_s(l),l.tag=3,l.payload={element:null},l.callback=function(){dn(o,a)},l}function vu(o){return o=_s(o),o.tag=3,o}function Yf(o,a,l,m){var C=l.type.getDerivedStateFromError;if(typeof C=="function"){var E=m.value;o.payload=function(){return C(E)},o.callback=function(){Vd(a,l,m)}}var D=l.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(o.callback=function(){Vd(a,l,m),typeof C!="function"&&(No===null?No=new Set([this]):No.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})})}function ai(o,a,l,m,C){if(l.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=l.alternate,a!==null&&As(a,l,C,!0),l=lo.current,l!==null){switch(l.tag){case 13:return uo===null?Zc():l.alternate===null&&un===0&&(un=3),l.flags&=-257,l.flags|=65536,l.lanes=C,m===Uf?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([m]):a.add(m),lh(o,m,C)),!1;case 22:return l.flags|=65536,m===Uf?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([m]):l.add(m)),lh(o,m,C)),!1}throw Error(r(435,l.tag))}return lh(o,m,C),Zc(),!1}if(At)return a=lo.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=C,m!==ya&&(o=Error(r(422),{cause:m}),xs(mn(o,l)))):(m!==ya&&(a=Error(r(423),{cause:m}),xs(mn(a,l))),o=o.current.alternate,o.flags|=65536,C&=-C,o.lanes|=C,m=mn(m,l),C=Yd(o.stateNode,m,C),tu(o,C),un!==4&&(un=2)),!1;var E=Error(r(520),{cause:m});if(E=mn(E,l),Hs===null?Hs=[E]:Hs.push(E),un!==4&&(un=2),a===null)return!0;m=mn(m,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,o=C&-C,l.lanes|=o,o=Yd(l.stateNode,m,o),tu(l,o),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(No===null||!No.has(E))))return l.flags|=65536,C&=-C,l.lanes|=C,C=vu(C),Yf(C,o,l,m),tu(l,C),!1}l=l.return}while(l!==null);return!1}var Qf=Error(r(461)),Un=!1;function zn(o,a,l,m){a.child=o===null?mp(a,null,l,m):Ds(a,o.child,l,m)}function Wf(o,a,l,m,C){l=l.render;var E=a.ref;if("ref"in m){var D={};for(var z in m)z!=="ref"&&(D[z]=m[z])}else D=m;return Nn(a),m=xa(o,a,l,D,E,C),z=Nc(),o!==null&&!Un?(Oc(o,a,C),Kt(o,a,C)):(At&&z&&_d(a),a.flags|=1,zn(o,a,m,C),a.child)}function Ot(o,a,l,m,C){if(o===null){var E=l.type;return typeof E=="function"&&!wc(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,It(o,a,E,m,C)):(o=bc(l.type,null,m,a,a.mode,C),o.ref=a.ref,o.return=a,a.child=o)}if(E=o.child,!Gc(o,C)){var D=E.memoizedProps;if(l=l.compare,l=l!==null?l:gc,l(D,m)&&o.ref===a.ref)return Kt(o,a,C)}return a.flags|=1,o=io(E,m),o.ref=a.ref,o.return=a,a.child=o}function It(o,a,l,m,C){if(o!==null){var E=o.memoizedProps;if(gc(E,m)&&o.ref===a.ref)if(Un=!1,a.pendingProps=m=E,Gc(o,C))(o.flags&131072)!==0&&(Un=!0);else return a.lanes=o.lanes,Kt(o,a,C)}return Wd(o,a,l,m,C)}function Cu(o,a,l){var m=a.pendingProps,C=m.children,E=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((a.flags&128)!==0){if(m=E!==null?E.baseLanes|l:l,o!==null){for(C=a.child=o.child,E=0;C!==null;)E=E|C.lanes|C.childLanes,C=C.sibling;a.childLanes=E&~m}else a.childLanes=0,a.child=null;return Qd(o,a,m,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},o!==null&&Od(a,E!==null?E.cachePool:null),E!==null?Ic(a,E):Is(),gp(a);else return a.lanes=a.childLanes=536870912,Qd(o,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(Od(a,E.cachePool),Ic(a,E),Ki(),a.memoizedState=null):(o!==null&&Od(a,null),Is(),Ki());return zn(o,a,C,l),a.child}function Qd(o,a,l,m){var C=jf();return C=C===null?null:{parent:tn._currentValue,pool:C},a.memoizedState={baseLanes:l,cachePool:C},o!==null&&Od(a,null),Is(),gp(a),o!==null&&As(o,a,m,!0),null}function zc(o,a){var l=a.ref;if(l===null)o!==null&&o.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(o===null||o.ref!==l)&&(a.flags|=4194816)}}function Wd(o,a,l,m,C){return Nn(a),l=xa(o,a,l,m,void 0,C),m=Nc(),o!==null&&!Un?(Oc(o,a,C),Kt(o,a,C)):(At&&m&&_d(a),a.flags|=1,zn(o,a,l,C),a.child)}function _w(o,a,l,m,C,E){return Nn(a),a.updateQueue=null,l=Rc(a,m,l,C),iu(o),m=Nc(),o!==null&&!Un?(Oc(o,a,E),Kt(o,a,E)):(At&&m&&_d(a),a.flags|=1,zn(o,a,l,E),a.child)}function yp(o,a,l,m,C){if(Nn(a),a.stateNode===null){var E=Wo,D=l.contextType;typeof D=="object"&&D!==null&&(E=Wn(D)),E=new l(m,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=qd,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=m,E.state=a.memoizedState,E.refs={},Zl(a),D=l.contextType,E.context=typeof D=="object"&&D!==null?Wn(D):Wo,E.state=a.memoizedState,D=l.getDerivedStateFromProps,typeof D=="function"&&(Gd(a,l,D,m),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(D=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),D!==E.state&&qd.enqueueReplaceState(E,E.state,null),ei(a,m,E,C),nu(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(o===null){E=a.stateNode;var z=a.memoizedProps,Z=ko(l,z);E.props=Z;var fe=E.context,Te=l.contextType;D=Wo,typeof Te=="object"&&Te!==null&&(D=Wn(Te));var Ne=l.getDerivedStateFromProps;Te=typeof Ne=="function"||typeof E.getSnapshotBeforeUpdate=="function",z=a.pendingProps!==z,Te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z||fe!==D)&&vn(a,E,m,D),Di=!1;var pe=a.memoizedState;E.state=pe,ei(a,m,E,C),nu(),fe=a.memoizedState,z||pe!==fe||Di?(typeof Ne=="function"&&(Gd(a,l,Ne,m),fe=a.memoizedState),(Z=Di||Oa(a,l,Z,m,pe,fe,D))?(Te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=fe),E.props=m,E.state=fe,E.context=D,m=Z):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{E=a.stateNode,Bf(o,a),D=a.memoizedProps,Te=ko(l,D),E.props=Te,Ne=a.pendingProps,pe=E.context,fe=l.contextType,Z=Wo,typeof fe=="object"&&fe!==null&&(Z=Wn(fe)),z=l.getDerivedStateFromProps,(fe=typeof z=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==Ne||pe!==Z)&&vn(a,E,m,Z),Di=!1,pe=a.memoizedState,E.state=pe,ei(a,m,E,C),nu();var ye=a.memoizedState;D!==Ne||pe!==ye||Di||o!==null&&o.dependencies!==null&&Nd(o.dependencies)?(typeof z=="function"&&(Gd(a,l,z,m),ye=a.memoizedState),(Te=Di||Oa(a,l,Te,m,pe,ye,Z)||o!==null&&o.dependencies!==null&&Nd(o.dependencies))?(fe||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ye,Z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ye,Z)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ye),E.props=m,E.state=ye,E.context=Z,m=Te):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),m=!1)}return E=m,zc(o,a),m=(a.flags&128)!==0,E||m?(E=a.stateNode,l=m&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,o!==null&&m?(a.child=Ds(a,o.child,null,C),a.child=Ds(a,null,l,C)):zn(o,a,l,C),a.memoizedState=E.state,o=a.child):o=Kt(o,a,C),o}function Fc(o,a,l,m){return Mi(),a.flags|=256,zn(o,a,l,m),a.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(o){return{baseLanes:o,cachePool:rp()}}function Jd(o,a,l){return o=o!==null?o.childLanes&~l:0,a&&(o|=Qr),o}function vp(o,a,l){var m=a.pendingProps,C=!1,E=(a.flags&128)!==0,D;if((D=E)||(D=o!==null&&o.memoizedState===null?!1:(On.current&2)!==0),D&&(C=!0,a.flags&=-129),D=(a.flags&32)!==0,a.flags&=-33,o===null){if(At){if(C?js(a):Ki(),At){var z=Nt,Z;if(Z=z){e:{for(Z=z,z=Gr;Z.nodeType!==8;){if(!z){z=null;break e}if(Z=Xi(Z.nextSibling),Z===null){z=null;break e}}z=Z}z!==null?(a.memoizedState={dehydrated:z,treeContext:Xo!==null?{id:To,overflow:Jo}:null,retryLane:536870912,hydrationErrors:null},Z=Tr(18,null,null,0),Z.stateNode=z,Z.return=a,a.child=Z,nr=a,Nt=null,Z=!0):Z=!1}Z||Oi(a)}if(z=a.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return Gw(z)?a.lanes=32:a.lanes=536870912,null;si(a)}return z=m.children,m=m.fallback,C?(Ki(),C=a.mode,z=Zd({mode:"hidden",children:z},C),m=bs(m,C,l,null),z.return=a,m.return=a,z.sibling=m,a.child=z,C=a.child,C.memoizedState=Xd(l),C.childLanes=Jd(o,D,l),a.memoizedState=Xf,m):(js(a),Kc(a,z))}if(Z=o.memoizedState,Z!==null&&(z=Z.dehydrated,z!==null)){if(E)a.flags&256?(js(a),a.flags&=-257,a=eh(o,a,l)):a.memoizedState!==null?(Ki(),a.child=o.child,a.flags|=128,a=null):(Ki(),C=m.fallback,z=a.mode,m=Zd({mode:"visible",children:m.children},z),C=bs(C,z,l,null),C.flags|=2,m.return=a,C.return=a,m.sibling=C,a.child=m,Ds(a,o.child,null,l),m=a.child,m.memoizedState=Xd(l),m.childLanes=Jd(o,D,l),a.memoizedState=Xf,a=C);else if(js(a),Gw(z)){if(D=z.nextSibling&&z.nextSibling.dataset,D)var fe=D.dgst;D=fe,m=Error(r(419)),m.stack="",m.digest=D,xs({value:m,source:null,stack:null}),a=eh(o,a,l)}else if(Un||As(o,a,l,!1),D=(l&o.childLanes)!==0,Un||D){if(D=Wt,D!==null&&(m=l&-l,m=(m&42)!==0?1:qo(m),m=(m&(D.suspendedLanes|l))!==0?0:m,m!==0&&m!==Z.retryLane))throw Z.retryLane=m,Tn(o,m),Dr(D,o,m),Qf;z.data==="$?"||Zc(),a=eh(o,a,l)}else z.data==="$?"?(a.flags|=192,a.child=o.child,a=null):(o=Z.treeContext,Nt=Xi(z.nextSibling),nr=a,At=!0,rr=null,Gr=!1,o!==null&&(so[Kr++]=To,so[Kr++]=Jo,so[Kr++]=Xo,To=o.id,Jo=o.overflow,Xo=a),a=Kc(a,m.children),a.flags|=4096);return a}return C?(Ki(),C=m.fallback,z=a.mode,Z=o.child,fe=Z.sibling,m=io(Z,{mode:"hidden",children:m.children}),m.subtreeFlags=Z.subtreeFlags&65011712,fe!==null?C=io(fe,C):(C=bs(C,z,l,null),C.flags|=2),C.return=a,m.return=a,m.sibling=C,a.child=m,m=C,C=a.child,z=o.child.memoizedState,z===null?z=Xd(l):(Z=z.cachePool,Z!==null?(fe=tn._currentValue,Z=Z.parent!==fe?{parent:fe,pool:fe}:Z):Z=rp(),z={baseLanes:z.baseLanes|l,cachePool:Z}),C.memoizedState=z,C.childLanes=Jd(o,D,l),a.memoizedState=Xf,m):(js(a),l=o.child,o=l.sibling,l=io(l,{mode:"visible",children:m.children}),l.return=a,l.sibling=null,o!==null&&(D=a.deletions,D===null?(a.deletions=[o],a.flags|=16):D.push(o)),a.child=l,a.memoizedState=null,l)}function Kc(o,a){return a=Zd({mode:"visible",children:a},o.mode),a.return=o,o.child=a}function Zd(o,a){return o=Tr(22,o,null,a),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function eh(o,a,l){return Ds(a,o.child,null,l),o=Kc(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function Cp(o,a,l){o.lanes|=a;var m=o.alternate;m!==null&&(m.lanes|=a),Rd(o.return,a,l)}function Ma(o,a,l,m,C){var E=o.memoizedState;E===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:l,tailMode:C}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=l,E.tailMode=C)}function Ir(o,a,l){var m=a.pendingProps,C=m.revealOrder,E=m.tail;if(zn(o,a,m.children,l),m=On.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Cp(o,l,a);else if(o.tag===19)Cp(o,l,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(ue(On,m),C){case"forwards":for(l=a.child,C=null;l!==null;)o=l.alternate,o!==null&&Kd(o)===null&&(C=l),l=l.sibling;l=C,l===null?(C=a.child,a.child=null):(C=l.sibling,l.sibling=null),Ma(a,!1,C,l,E);break;case"backwards":for(l=null,C=a.child,a.child=null;C!==null;){if(o=C.alternate,o!==null&&Kd(o)===null){a.child=C;break}o=C.sibling,C.sibling=l,l=C,C=o}Ma(a,!0,l,null,E);break;case"together":Ma(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Kt(o,a,l){if(o!==null&&(a.dependencies=o.dependencies),di|=a.lanes,(l&a.childLanes)===0)if(o!==null){if(As(o,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(o!==null&&a.child!==o.child)throw Error(r(153));if(a.child!==null){for(o=a.child,l=io(o,o.pendingProps),a.child=l,l.return=a;o.sibling!==null;)o=o.sibling,l=l.sibling=io(o,o.pendingProps),l.return=a;l.sibling=null}return a.child}function Gc(o,a){return(o.lanes&a)!==0?!0:(o=o.dependencies,!!(o!==null&&Nd(o)))}function Jf(o,a,l){switch(a.tag){case 3:Ce(a,a.stateNode.containerInfo),_r(a,tn,o.memoizedState.cache),Mi();break;case 27:case 5:be(a);break;case 4:Ce(a,a.stateNode.containerInfo);break;case 10:_r(a,a.type,a.memoizedProps.value);break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(js(a),a.flags|=128,null):(l&a.child.childLanes)!==0?vp(o,a,l):(js(a),o=Kt(o,a,l),o!==null?o.sibling:null);js(a);break;case 19:var C=(o.flags&128)!==0;if(m=(l&a.childLanes)!==0,m||(As(o,a,l,!1),m=(l&a.childLanes)!==0),C){if(m)return Ir(o,a,l);a.flags|=128}if(C=a.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ue(On,On.current),m)break;return null;case 22:case 23:return a.lanes=0,Cu(o,a,l);case 24:_r(a,tn,o.memoizedState.cache)}return Kt(o,a,l)}function Gi(o,a,l){if(o!==null)if(o.memoizedProps!==a.pendingProps)Un=!0;else{if(!Gc(o,l)&&(a.flags&128)===0)return Un=!1,Jf(o,a,l);Un=(o.flags&131072)!==0}else Un=!1,At&&(a.flags&1048576)!==0&&ep(a,Sd,a.index);switch(a.lanes=0,a.tag){case 16:e:{o=a.pendingProps;var m=a.elementType,C=m._init;if(m=C(m._payload),a.type=m,typeof m=="function")wc(m)?(o=ko(m,o),a.tag=1,a=yp(null,a,m,o,l)):(a.tag=0,a=Wd(null,a,m,o,l));else{if(m!=null){if(C=m.$$typeof,C===L){a.tag=11,a=Wf(null,a,m,o,l);break e}else if(C===V){a.tag=14,a=Ot(null,a,m,o,l);break e}}throw a=W(m)||m,Error(r(306,a,""))}}return a;case 0:return Wd(o,a,a.type,a.pendingProps,l);case 1:return m=a.type,C=ko(m,a.pendingProps),yp(o,a,m,C,l);case 3:e:{if(Ce(a,a.stateNode.containerInfo),o===null)throw Error(r(387));m=a.pendingProps;var E=a.memoizedState;C=E.element,Bf(o,a),ei(a,m,null,l);var D=a.memoizedState;if(m=D.cache,_r(a,tn,m),m!==E.cache&&Mf(a,[tn],l,!0),nu(),m=D.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:D.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=Fc(o,a,m,l);break e}else if(m!==C){C=mn(Error(r(424)),a),xs(C),a=Fc(o,a,m,l);break e}else{switch(o=a.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Nt=Xi(o.firstChild),nr=a,At=!0,rr=null,Gr=!0,l=mp(a,null,m,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Mi(),m===C){a=Kt(o,a,l);break e}zn(o,a,m,l)}a=a.child}return a;case 26:return zc(o,a),o===null?(l=kT(a.type,null,a.pendingProps,null))?a.memoizedState=l:At||(l=a.type,o=a.pendingProps,m=Gp(xe.current).createElement(l),m[Ie]=a,m[En]=o,pr(m,l,o),sn(m),a.stateNode=m):a.memoizedState=kT(a.type,o.memoizedProps,a.pendingProps,o.memoizedState),null;case 27:return be(a),o===null&&At&&(m=a.stateNode=TT(a.type,a.pendingProps,xe.current),nr=a,Gr=!0,C=Nt,nl(a.type)?(qw=C,Nt=Xi(m.firstChild)):Nt=C),zn(o,a,a.pendingProps.children,l),zc(o,a),o===null&&(a.flags|=4194304),a.child;case 5:return o===null&&At&&((C=m=Nt)&&(m=ZP(m,a.type,a.pendingProps,Gr),m!==null?(a.stateNode=m,nr=a,Nt=Xi(m.firstChild),Gr=!1,C=!0):C=!1),C||Oi(a)),be(a),C=a.type,E=a.pendingProps,D=o!==null?o.memoizedProps:null,m=E.children,zw(C,E)?m=null:D!==null&&zw(C,D)&&(a.flags|=32),a.memoizedState!==null&&(C=xa(o,a,su,null,null,l),Am._currentValue=C),zc(o,a),zn(o,a,m,l),a.child;case 6:return o===null&&At&&((o=l=Nt)&&(l=e2(l,a.pendingProps,Gr),l!==null?(a.stateNode=l,nr=a,Nt=null,o=!0):o=!1),o||Oi(a)),null;case 13:return vp(o,a,l);case 4:return Ce(a,a.stateNode.containerInfo),m=a.pendingProps,o===null?a.child=Ds(a,null,m,l):zn(o,a,m,l),a.child;case 11:return Wf(o,a,a.type,a.pendingProps,l);case 7:return zn(o,a,a.pendingProps,l),a.child;case 8:return zn(o,a,a.pendingProps.children,l),a.child;case 12:return zn(o,a,a.pendingProps.children,l),a.child;case 10:return m=a.pendingProps,_r(a,a.type,m.value),zn(o,a,m.children,l),a.child;case 9:return C=a.type._context,m=a.pendingProps.children,Nn(a),C=Wn(C),m=m(C),a.flags|=1,zn(o,a,m,l),a.child;case 14:return Ot(o,a,a.type,a.pendingProps,l);case 15:return It(o,a,a.type,a.pendingProps,l);case 19:return Ir(o,a,l);case 31:return m=a.pendingProps,l=a.mode,m={mode:m.mode,children:m.children},o===null?(l=Zd(m,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=io(o.child,m),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return Cu(o,a,l);case 24:return Nn(a),m=Wn(tn),o===null?(C=jf(),C===null&&(C=Wt,E=Wl(),C.pooledCache=E,E.refCount++,E!==null&&(C.pooledCacheLanes|=l),C=E),a.memoizedState={parent:m,cache:C},Zl(a),_r(a,tn,C)):((o.lanes&l)!==0&&(Bf(o,a),ei(a,null,null,l),nu()),C=o.memoizedState,E=a.memoizedState,C.parent!==m?(C={parent:m,cache:m},a.memoizedState=C,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=C),_r(a,tn,m)):(m=E.cache,_r(a,tn,m),m!==C.cache&&Mf(a,[tn],l,!0))),zn(o,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Io(o){o.flags|=4}function wp(o,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!MT(a)){if(a=lo.current,a!==null&&((Tt&4194048)===Tt?uo!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||a!==uo))throw kc=Uf,Lf;o.flags|=8192}}function th(o,a){a!==null&&(o.flags|=4),o.flags&16384&&(a=o.tag!==22?fs():536870912,o.lanes|=a,Da|=a)}function wu(o,a){if(!At)switch(o.tailMode){case"hidden":a=o.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var m=null;l!==null;)l.alternate!==null&&(m=l),l=l.sibling;m===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function hn(o){var a=o.alternate!==null&&o.alternate.child===o.child,l=0,m=0;if(a)for(var C=o.child;C!==null;)l|=C.lanes|C.childLanes,m|=C.subtreeFlags&65011712,m|=C.flags&65011712,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)l|=C.lanes|C.childLanes,m|=C.subtreeFlags,m|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=m,o.childLanes=l,a}function bp(o,a,l){var m=a.pendingProps;switch(kd(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(a),null;case 1:return hn(a),null;case 3:return l=a.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),Pi(tn),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(So(a)?Io(a):o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ql())),hn(a),null;case 26:return l=a.memoizedState,o===null?(Io(a),l!==null?(hn(a),wp(a,l)):(hn(a),a.flags&=-16777217)):l?l!==o.memoizedState?(Io(a),hn(a),wp(a,l)):(hn(a),a.flags&=-16777217):(o.memoizedProps!==m&&Io(a),hn(a),a.flags&=-16777217),null;case 27:we(a),l=xe.current;var C=a.type;if(o!==null&&a.stateNode!=null)o.memoizedProps!==m&&Io(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return hn(a),null}o=me.current,So(a)?Of(a):(o=TT(C,m,l),a.stateNode=o,Io(a))}return hn(a),null;case 5:if(we(a),l=a.type,o!==null&&a.stateNode!=null)o.memoizedProps!==m&&Io(a);else{if(!m){if(a.stateNode===null)throw Error(r(166));return hn(a),null}if(o=me.current,So(a))Of(a);else{switch(C=Gp(xe.current),o){case 1:o=C.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:o=C.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":o=C.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":o=C.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?C.createElement(l,{is:m.is}):C.createElement(l)}}o[Ie]=a,o[En]=m;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)o.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=o;e:switch(pr(o,l,m),l){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Io(a)}}return hn(a),a.flags&=-16777217,null;case 6:if(o&&a.stateNode!=null)o.memoizedProps!==m&&Io(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(r(166));if(o=xe.current,So(a)){if(o=a.stateNode,l=a.memoizedProps,m=null,C=nr,C!==null)switch(C.tag){case 27:case 5:m=C.memoizedProps}o[Ie]=a,o=!!(o.nodeValue===l||m!==null&&m.suppressHydrationWarning===!0||vT(o.nodeValue,l)),o||Oi(a)}else o=Gp(o).createTextNode(m),o[Ie]=a,a.stateNode=o}return hn(a),null;case 13:if(m=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(C=So(a),m!==null&&m.dehydrated!==null){if(o===null){if(!C)throw Error(r(318));if(C=a.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Ie]=a}else Mi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;hn(a),C=!1}else C=Ql(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=C),C=!0;if(!C)return a.flags&256?(si(a),a):(si(a),null)}if(si(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=m!==null,o=o!==null&&o.memoizedState!==null,l){m=a.child,C=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(C=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==C&&(m.flags|=2048)}return l!==o&&l&&(a.child.flags|=8192),th(a,a.updateQueue),hn(a),null;case 4:return je(),o===null&&jw(a.stateNode.containerInfo),hn(a),null;case 10:return Pi(a.type),hn(a),null;case 19:if(ie(On),C=a.memoizedState,C===null)return hn(a),null;if(m=(a.flags&128)!==0,E=C.rendering,E===null)if(m)wu(C,!1);else{if(un!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(E=Kd(o),E!==null){for(a.flags|=128,wu(C,!1),o=E.updateQueue,a.updateQueue=o,th(a,o),a.subtreeFlags=0,o=l,l=a.child;l!==null;)Rf(l,o),l=l.sibling;return ue(On,On.current&1|2),a.child}o=o.sibling}C.tail!==null&&ge()>oh&&(a.flags|=128,m=!0,wu(C,!1),a.lanes=4194304)}else{if(!m)if(o=Kd(E),o!==null){if(a.flags|=128,m=!0,o=o.updateQueue,a.updateQueue=o,th(a,o),wu(C,!0),C.tail===null&&C.tailMode==="hidden"&&!E.alternate&&!At)return hn(a),null}else 2*ge()-C.renderingStartTime>oh&&l!==536870912&&(a.flags|=128,m=!0,wu(C,!1),a.lanes=4194304);C.isBackwards?(E.sibling=a.child,a.child=E):(o=C.last,o!==null?o.sibling=E:a.child=E,C.last=E)}return C.tail!==null?(a=C.tail,C.rendering=a,C.tail=a.sibling,C.renderingStartTime=ge(),a.sibling=null,o=On.current,ue(On,m?o&1|2:o&1),a):(hn(a),null);case 22:case 23:return si(a),ba(),m=a.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(l&536870912)!==0&&(a.flags&128)===0&&(hn(a),a.subtreeFlags&6&&(a.flags|=8192)):hn(a),l=a.updateQueue,l!==null&&th(a,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==l&&(a.flags|=2048),o!==null&&ie(Ts),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Pi(tn),hn(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function xp(o,a){switch(kd(a),a.tag){case 1:return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Pi(tn),je(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 26:case 27:case 5:return we(a),null;case 13:if(si(a),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Mi()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return ie(On),null;case 4:return je(),null;case 10:return Pi(a.type),null;case 22:case 23:return si(a),ba(),o!==null&&ie(Ts),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 24:return Pi(tn),null;case 25:return null;default:return null}}function Zf(o,a){switch(kd(a),a.tag){case 3:Pi(tn),je();break;case 26:case 27:case 5:we(a);break;case 4:je();break;case 13:si(a);break;case 19:ie(On);break;case 10:Pi(a.type);break;case 22:case 23:si(a),ba(),o!==null&&ie(Ts);break;case 24:Pi(tn)}}function Rr(o,a){try{var l=a.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var C=m.next;l=C;do{if((l.tag&o)===o){m=void 0;var E=l.create,D=l.inst;m=E(),D.destroy=m}l=l.next}while(l!==C)}}catch(z){Gt(a,a.return,z)}}function Nr(o,a,l){try{var m=a.updateQueue,C=m!==null?m.lastEffect:null;if(C!==null){var E=C.next;m=E;do{if((m.tag&o)===o){var D=m.inst,z=D.destroy;if(z!==void 0){D.destroy=void 0,C=a;var Z=l,fe=z;try{fe()}catch(Te){Gt(C,Z,Te)}}}m=m.next}while(m!==E)}}catch(Te){Gt(a,a.return,Te)}}function qc(o){var a=o.updateQueue;if(a!==null){var l=o.stateNode;try{Pd(a,l)}catch(m){Gt(o,o.return,m)}}}function ci(o,a,l){l.props=ko(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(m){Gt(o,a,m)}}function Hn(o,a){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof l=="function"?o.refCleanup=l(m):l.current=m}}catch(C){Gt(o,a,C)}}function ar(o,a){var l=o.ref,m=o.refCleanup;if(l!==null)if(typeof m=="function")try{m()}catch(C){Gt(o,a,C)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(C){Gt(o,a,C)}else l.current=null}function qi(o){var a=o.type,l=o.memoizedProps,m=o.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&m.focus();break e;case"img":l.src?m.src=l.src:l.srcSet&&(m.srcset=l.srcSet)}}catch(C){Gt(o,o.return,C)}}function em(o,a,l){try{var m=o.stateNode;YP(m,o.type,l,a),m[En]=a}catch(C){Gt(o,o.return,C)}}function $c(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&nl(o.type)||o.tag===4}function tm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$c(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&nl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Or(o,a,l){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(o),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Kp));else if(m!==4&&(m===27&&nl(o.type)&&(l=o.stateNode,a=null),o=o.child,o!==null))for(Or(o,a,l),o=o.sibling;o!==null;)Or(o,a,l),o=o.sibling}function bu(o,a,l){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?l.insertBefore(o,a):l.appendChild(o);else if(m!==4&&(m===27&&nl(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(bu(o,a,l),o=o.sibling;o!==null;)bu(o,a,l),o=o.sibling}function Ep(o){var a=o.stateNode,l=o.memoizedProps;try{for(var m=o.type,C=a.attributes;C.length;)a.removeAttributeNode(C[0]);pr(a,m,l),a[Ie]=o,a[En]=l}catch(E){Gt(o,o.return,E)}}var Ro=!1,Cn=!1,nm=!1,Vc=typeof WeakSet=="function"?WeakSet:Set,wn=null;function rm(o,a){if(o=o.containerInfo,Hw=Wp,o=wd(o),xf(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var m=l.getSelection&&l.getSelection();if(m&&m.rangeCount!==0){l=m.anchorNode;var C=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var D=0,z=-1,Z=-1,fe=0,Te=0,Ne=o,pe=null;t:for(;;){for(var ye;Ne!==l||C!==0&&Ne.nodeType!==3||(z=D+C),Ne!==E||m!==0&&Ne.nodeType!==3||(Z=D+m),Ne.nodeType===3&&(D+=Ne.nodeValue.length),(ye=Ne.firstChild)!==null;)pe=Ne,Ne=ye;for(;;){if(Ne===o)break t;if(pe===l&&++fe===C&&(z=D),pe===E&&++Te===m&&(Z=D),(ye=Ne.nextSibling)!==null)break;Ne=pe,pe=Ne.parentNode}Ne=ye}l=z===-1||Z===-1?null:{start:z,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bw={focusedElem:o,selectionRange:l},Wp=!1,wn=a;wn!==null;)if(a=wn,o=a.child,(a.subtreeFlags&1024)!==0&&o!==null)o.return=a,wn=o;else for(;wn!==null;){switch(a=wn,E=a.alternate,o=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,l=a,C=E.memoizedProps,E=E.memoizedState,m=l.stateNode;try{var at=ko(l.type,C,l.elementType===l.type);o=m.getSnapshotBeforeUpdate(at,E),m.__reactInternalSnapshotBeforeUpdate=o}catch(nt){Gt(l,l.return,nt)}}break;case 3:if((o&1024)!==0){if(o=a.stateNode.containerInfo,l=o.nodeType,l===9)Kw(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Kw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=a.sibling,o!==null){o.return=a.return,wn=o;break}wn=a.return}}function om(o,a,l){var m=l.flags;switch(l.tag){case 0:case 11:case 15:$i(o,l),m&4&&Rr(5,l);break;case 1:if($i(o,l),m&4)if(o=l.stateNode,a===null)try{o.componentDidMount()}catch(D){Gt(l,l.return,D)}else{var C=ko(l.type,a.memoizedProps);a=a.memoizedState;try{o.componentDidUpdate(C,a,o.__reactInternalSnapshotBeforeUpdate)}catch(D){Gt(l,l.return,D)}}m&64&&qc(l),m&512&&Hn(l,l.return);break;case 3:if($i(o,l),m&64&&(o=l.updateQueue,o!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Pd(o,a)}catch(D){Gt(l,l.return,D)}}break;case 27:a===null&&m&4&&Ep(l);case 26:case 5:$i(o,l),a===null&&m&4&&qi(l),m&512&&Hn(l,l.return);break;case 12:$i(o,l);break;case 13:$i(o,l),m&4&&Yc(o,l),m&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=Mw.bind(null,l),t2(o,l))));break;case 22:if(m=l.memoizedState!==null||Ro,!m){a=a!==null&&a.memoizedState!==null||Cn,C=Ro;var E=Cn;Ro=m,(Cn=a)&&!E?Us(o,l,(l.subtreeFlags&8772)!==0):$i(o,l),Ro=C,Cn=E}break;case 30:break;default:$i(o,l)}}function Ap(o){var a=o.alternate;a!==null&&(o.alternate=null,Ap(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&xi(a)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var nn=null,fr=!1;function Le(o,a,l){for(l=l.child;l!==null;)im(o,a,l),l=l.sibling}function im(o,a,l){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(wt,l)}catch{}switch(l.tag){case 26:Cn||ar(l,a),Le(o,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Cn||ar(l,a);var m=nn,C=fr;nl(l.type)&&(nn=l.stateNode,fr=!1),Le(o,a,l),wm(l.stateNode),nn=m,fr=C;break;case 5:Cn||ar(l,a);case 6:if(m=nn,C=fr,nn=null,Le(o,a,l),nn=m,fr=C,nn!==null)if(fr)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(l.stateNode)}catch(E){Gt(l,a,E)}else try{nn.removeChild(l.stateNode)}catch(E){Gt(l,a,E)}break;case 18:nn!==null&&(fr?(o=nn,ET(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),km(o)):ET(nn,l.stateNode));break;case 4:m=nn,C=fr,nn=l.stateNode.containerInfo,fr=!0,Le(o,a,l),nn=m,fr=C;break;case 0:case 11:case 14:case 15:Cn||Nr(2,l,a),Cn||Nr(4,l,a),Le(o,a,l);break;case 1:Cn||(ar(l,a),m=l.stateNode,typeof m.componentWillUnmount=="function"&&ci(l,a,m)),Le(o,a,l);break;case 21:Le(o,a,l);break;case 22:Cn=(m=Cn)||l.memoizedState!==null,Le(o,a,l),Cn=m;break;default:Le(o,a,l)}}function Yc(o,a){if(a.memoizedState===null&&(o=a.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{km(o)}catch(l){Gt(a,a.return,l)}}function Tp(o){switch(o.tag){case 13:case 19:var a=o.stateNode;return a===null&&(a=o.stateNode=new Vc),a;case 22:return o=o.stateNode,a=o._retryCache,a===null&&(a=o._retryCache=new Vc),a;default:throw Error(r(435,o.tag))}}function xu(o,a){var l=Tp(o);a.forEach(function(m){var C=Xr.bind(null,o,m);l.has(m)||(l.add(m),m.then(C,C))})}function Mr(o,a){var l=a.deletions;if(l!==null)for(var m=0;m<l.length;m++){var C=l[m],E=o,D=a,z=D;e:for(;z!==null;){switch(z.tag){case 27:if(nl(z.type)){nn=z.stateNode,fr=!1;break e}break;case 5:nn=z.stateNode,fr=!1;break e;case 3:case 4:nn=z.stateNode.containerInfo,fr=!0;break e}z=z.return}if(nn===null)throw Error(r(160));im(E,D,C),nn=null,fr=!1,E=C.alternate,E!==null&&(E.return=null),C.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)sm(a,o),a=a.sibling}var Vr=null;function sm(o,a){var l=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Mr(a,o),Pr(o),m&4&&(Nr(3,o,o.return),Rr(3,o),Nr(5,o,o.return));break;case 1:Mr(a,o),Pr(o),m&512&&(Cn||l===null||ar(l,l.return)),m&64&&Ro&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?m:l.concat(m))));break;case 26:var C=Vr;if(Mr(a,o),Pr(o),m&512&&(Cn||l===null||ar(l,l.return)),m&4){var E=l!==null?l.memoizedState:null;if(m=o.memoizedState,l===null)if(m===null)if(o.stateNode===null){e:{m=o.type,l=o.memoizedProps,C=C.ownerDocument||C;t:switch(m){case"title":E=C.getElementsByTagName("title")[0],(!E||E[$o]||E[Ie]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=C.createElement(m),C.head.insertBefore(E,C.querySelector("head > title"))),pr(E,m,l),E[Ie]=o,sn(E),m=E;break e;case"link":var D=NT("link","href",C).get(m+(l.href||""));if(D){for(var z=0;z<D.length;z++)if(E=D[z],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){D.splice(z,1);break t}}E=C.createElement(m),pr(E,m,l),C.head.appendChild(E);break;case"meta":if(D=NT("meta","content",C).get(m+(l.content||""))){for(z=0;z<D.length;z++)if(E=D[z],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){D.splice(z,1);break t}}E=C.createElement(m),pr(E,m,l),C.head.appendChild(E);break;default:throw Error(r(468,m))}E[Ie]=o,sn(E),m=E}o.stateNode=m}else OT(C,o.type,o.stateNode);else o.stateNode=RT(C,m,o.memoizedProps);else E!==m?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,m===null?OT(C,o.type,o.stateNode):RT(C,m,o.memoizedProps)):m===null&&o.stateNode!==null&&em(o,o.memoizedProps,l.memoizedProps)}break;case 27:Mr(a,o),Pr(o),m&512&&(Cn||l===null||ar(l,l.return)),l!==null&&m&4&&em(o,o.memoizedProps,l.memoizedProps);break;case 5:if(Mr(a,o),Pr(o),m&512&&(Cn||l===null||ar(l,l.return)),o.flags&32){C=o.stateNode;try{ua(C,"")}catch(ye){Gt(o,o.return,ye)}}m&4&&o.stateNode!=null&&(C=o.memoizedProps,em(o,C,l!==null?l.memoizedProps:C)),m&1024&&(nm=!0);break;case 6:if(Mr(a,o),Pr(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,l=o.stateNode;try{l.nodeValue=m}catch(ye){Gt(o,o.return,ye)}}break;case 3:if(Vp=null,C=Vr,Vr=qp(a.containerInfo),Mr(a,o),Vr=C,Pr(o),m&4&&l!==null&&l.memoizedState.isDehydrated)try{km(a.containerInfo)}catch(ye){Gt(o,o.return,ye)}nm&&(nm=!1,am(o));break;case 4:m=Vr,Vr=qp(o.stateNode.containerInfo),Mr(a,o),Pr(o),Vr=m;break;case 12:Mr(a,o),Pr(o);break;case 13:Mr(a,o),Pr(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Wc=ge()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,xu(o,m)));break;case 22:C=o.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,fe=Ro,Te=Cn;if(Ro=fe||C,Cn=Te||Z,Mr(a,o),Cn=Te,Ro=fe,Pr(o),m&8192)e:for(a=o.stateNode,a._visibility=C?a._visibility&-2:a._visibility|1,C&&(l===null||Z||Ro||Cn||Ls(o)),l=null,a=o;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(E=Z.stateNode,C)D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{z=Z.stateNode;var Ne=Z.memoizedProps.style,pe=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;z.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(ye){Gt(Z,Z.return,ye)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=C?"":Z.memoizedProps}catch(ye){Gt(Z,Z.return,ye)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===o)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=o.updateQueue,m!==null&&(l=m.retryQueue,l!==null&&(m.retryQueue=null,xu(o,l))));break;case 19:Mr(a,o),Pr(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,xu(o,m)));break;case 30:break;case 21:break;default:Mr(a,o),Pr(o)}}function Pr(o){var a=o.flags;if(a&2){try{for(var l,m=o.return;m!==null;){if($c(m)){l=m;break}m=m.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var C=l.stateNode,E=tm(o);bu(o,E,C);break;case 5:var D=l.stateNode;l.flags&32&&(ua(D,""),l.flags&=-33);var z=tm(o);bu(o,z,D);break;case 3:case 4:var Z=l.stateNode.containerInfo,fe=tm(o);Or(o,fe,Z);break;default:throw Error(r(161))}}catch(Te){Gt(o,o.return,Te)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function am(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var a=o;am(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),o=o.sibling}}function $i(o,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)om(o,a.alternate,a),a=a.sibling}function Ls(o){for(o=o.child;o!==null;){var a=o;switch(a.tag){case 0:case 11:case 14:case 15:Nr(4,a,a.return),Ls(a);break;case 1:ar(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ci(a,a.return,l),Ls(a);break;case 27:wm(a.stateNode);case 26:case 5:ar(a,a.return),Ls(a);break;case 22:a.memoizedState===null&&Ls(a);break;case 30:Ls(a);break;default:Ls(a)}o=o.sibling}}function Us(o,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,C=o,E=a,D=E.flags;switch(E.tag){case 0:case 11:case 15:Us(C,E,l),Rr(4,E);break;case 1:if(Us(C,E,l),m=E,C=m.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(fe){Gt(m,m.return,fe)}if(m=E,C=m.updateQueue,C!==null){var z=m.stateNode;try{var Z=C.shared.hiddenCallbacks;if(Z!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Z.length;C++)ru(Z[C],z)}catch(fe){Gt(m,m.return,fe)}}l&&D&64&&qc(E),Hn(E,E.return);break;case 27:Ep(E);case 26:case 5:Us(C,E,l),l&&m===null&&D&4&&qi(E),Hn(E,E.return);break;case 12:Us(C,E,l);break;case 13:Us(C,E,l),l&&D&4&&Yc(C,E);break;case 22:E.memoizedState===null&&Us(C,E,l),Hn(E,E.return);break;case 30:break;default:Us(C,E,l)}a=a.sibling}}function Qc(o,a){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&Ac(l))}function nh(o,a){o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&Ac(o))}function ho(o,a,l,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Sp(o,a,l,m),a=a.sibling}function Sp(o,a,l,m){var C=a.flags;switch(a.tag){case 0:case 11:case 15:ho(o,a,l,m),C&2048&&Rr(9,a);break;case 1:ho(o,a,l,m);break;case 3:ho(o,a,l,m),C&2048&&(o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&Ac(o)));break;case 12:if(C&2048){ho(o,a,l,m),o=a.stateNode;try{var E=a.memoizedProps,D=E.id,z=E.onPostCommit;typeof z=="function"&&z(D,a.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Z){Gt(a,a.return,Z)}}else ho(o,a,l,m);break;case 13:ho(o,a,l,m);break;case 23:break;case 22:E=a.stateNode,D=a.alternate,a.memoizedState!==null?E._visibility&2?ho(o,a,l,m):li(o,a):E._visibility&2?ho(o,a,l,m):(E._visibility|=2,Pa(o,a,l,m,(a.subtreeFlags&10256)!==0)),C&2048&&Qc(D,a);break;case 24:ho(o,a,l,m),C&2048&&nh(a.alternate,a);break;default:ho(o,a,l,m)}}function Pa(o,a,l,m,C){for(C=C&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=o,D=a,z=l,Z=m,fe=D.flags;switch(D.tag){case 0:case 11:case 15:Pa(E,D,z,Z,C),Rr(8,D);break;case 23:break;case 22:var Te=D.stateNode;D.memoizedState!==null?Te._visibility&2?Pa(E,D,z,Z,C):li(E,D):(Te._visibility|=2,Pa(E,D,z,Z,C)),C&&fe&2048&&Qc(D.alternate,D);break;case 24:Pa(E,D,z,Z,C),C&&fe&2048&&nh(D.alternate,D);break;default:Pa(E,D,z,Z,C)}a=a.sibling}}function li(o,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=o,m=a,C=m.flags;switch(m.tag){case 22:li(l,m),C&2048&&Qc(m.alternate,m);break;case 24:li(l,m),C&2048&&nh(m.alternate,m);break;default:li(l,m)}a=a.sibling}}var Eu=8192;function ui(o){if(o.subtreeFlags&Eu)for(o=o.child;o!==null;)_p(o),o=o.sibling}function _p(o){switch(o.tag){case 26:ui(o),o.flags&Eu&&o.memoizedState!==null&&m2(Vr,o.memoizedState,o.memoizedProps);break;case 5:ui(o);break;case 3:case 4:var a=Vr;Vr=qp(o.stateNode.containerInfo),ui(o),Vr=a;break;case 22:o.memoizedState===null&&(a=o.alternate,a!==null&&a.memoizedState!==null?(a=Eu,Eu=16777216,ui(o),Eu=a):ui(o));break;default:ui(o)}}function cm(o){var a=o.alternate;if(a!==null&&(o=a.child,o!==null)){a.child=null;do a=o.sibling,o.sibling=null,o=a;while(o!==null)}}function Au(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var m=a[l];wn=m,Ip(m,o)}cm(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kp(o),o=o.sibling}function kp(o){switch(o.tag){case 0:case 11:case 15:Au(o),o.flags&2048&&Nr(9,o,o.return);break;case 3:Au(o);break;case 12:Au(o);break;case 22:var a=o.stateNode;o.memoizedState!==null&&a._visibility&2&&(o.return===null||o.return.tag!==13)?(a._visibility&=-3,Tu(o)):Au(o);break;default:Au(o)}}function Tu(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var m=a[l];wn=m,Ip(m,o)}cm(o)}for(o=o.child;o!==null;){switch(a=o,a.tag){case 0:case 11:case 15:Nr(8,a,a.return),Tu(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Tu(a));break;default:Tu(a)}o=o.sibling}}function Ip(o,a){for(;wn!==null;){var l=wn;switch(l.tag){case 0:case 11:case 15:Nr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var m=l.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Ac(l.memoizedState.cache)}if(m=l.child,m!==null)m.return=l,wn=m;else e:for(l=o;wn!==null;){m=wn;var C=m.sibling,E=m.return;if(Ap(m),m===l){wn=null;break e}if(C!==null){C.return=E,wn=C;break e}wn=E}}}var kw={getCacheForType:function(o){var a=Wn(tn),l=a.data.get(o);return l===void 0&&(l=o(),a.data.set(o,l)),l}},Iw=typeof WeakMap=="function"?WeakMap:Map,Ut=0,Wt=null,yt=null,Tt=0,Ht=0,bn=null,Yr=!1,Vi=!1,rh=!1,fo=0,un=0,di=0,Yi=0,Su=0,Qr=0,Da=0,Hs=null,cr=null,lm=!1,Wc=0,oh=1/0,ih=null,No=null,Bn=0,Bs=null,ja=null,Xc=0,La=0,um=null,Rp=null,_u=0,dm=null;function Wr(){if((Ut&2)!==0&&Tt!==0)return Tt&-Tt;if(P.T!==null){var o=Sc;return o!==0?o:Bt()}return rt()}function Np(){Qr===0&&(Qr=(Tt&536870912)===0||At?bi():536870912);var o=lo.current;return o!==null&&(o.flags|=32),Qr}function Dr(o,a,l){(o===Wt&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)&&(Jc(o,0),zs(o,Tt,Qr,!1)),xo(o,l),((Ut&2)===0||o!==Wt)&&(o===Wt&&((Ut&2)===0&&(Yi|=l),un===4&&zs(o,Tt,Qr,!1)),R(o))}function Op(o,a,l){if((Ut&6)!==0)throw Error(r(327));var m=!l&&(a&124)===0&&(a&o.expiredLanes)===0||bo(o,a),C=m?Nw(o,a):Ua(o,a,!0),E=m;do{if(C===0){Vi&&!m&&zs(o,a,0,!1);break}else{if(l=o.current.alternate,E&&!sh(l)){C=Ua(o,a,!1),E=!1;continue}if(C===2){if(E=a,o.errorRecoveryDisabledLanes&E)var D=0;else D=o.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){a=D;e:{var z=o;C=Hs;var Z=z.current.memoizedState.isDehydrated;if(Z&&(Jc(z,D).flags|=256),D=Ua(z,D,!1),D!==2){if(rh&&!Z){z.errorRecoveryDisabledLanes|=E,Yi|=E,C=4;break e}E=cr,cr=C,E!==null&&(cr===null?cr=E:cr.push.apply(cr,E))}C=D}if(E=!1,C!==2)continue}}if(C===1){Jc(o,0),zs(o,a,0,!0);break}e:{switch(m=o,E=C,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:zs(m,a,Qr,!Yr);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(C=Wc+300-ge(),10<C)){if(zs(m,a,Qr,!Yr),wi(m,0,!0)!==0)break e;m.timeoutHandle=bT(Mp.bind(null,m,l,cr,ih,lm,a,Qr,Yi,Da,Yr,E,2,-0,0),C);break e}Mp(m,l,cr,ih,lm,a,Qr,Yi,Da,Yr,E,0,-0,0)}}break}while(!0);R(o)}function Mp(o,a,l,m,C,E,D,z,Z,fe,Te,Ne,pe,ye){if(o.timeoutHandle=-1,Ne=a.subtreeFlags,(Ne&8192||(Ne&16785408)===16785408)&&(Em={stylesheets:null,count:0,unsuspend:f2},_p(a),Ne=g2(),Ne!==null)){o.cancelPendingCommit=Ne(el.bind(null,o,a,E,l,m,C,D,z,Z,Te,1,pe,ye)),zs(o,E,D,!fe);return}el(o,a,E,l,m,C,D,z,Z)}function sh(o){for(var a=o;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var m=0;m<l.length;m++){var C=l[m],E=C.getSnapshot;C=C.value;try{if(!Yn(E(),C))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zs(o,a,l,m){a&=~Su,a&=~Yi,o.suspendedLanes|=a,o.pingedLanes&=~a,m&&(o.warmLanes|=a),m=o.expirationTimes;for(var C=a;0<C;){var E=31-Vt(C),D=1<<E;m[E]=-1,C&=~D}l!==0&&ia(o,l,a)}function ah(){return(Ut&6)===0?(j(0),!1):!0}function hm(){if(yt!==null){if(Ht===0)var o=yt.return;else o=yt,Zo=Es=null,Ui(o),Ps=null,fu=0,o=yt;for(;o!==null;)Zf(o.alternate,o),o=o.return;yt=null}}function Jc(o,a){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,WP(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),hm(),Wt=o,yt=l=io(o.current,null),Tt=a,Ht=0,bn=null,Yr=!1,Vi=bo(o,a),rh=!1,Da=Qr=Su=Yi=di=un=0,cr=Hs=null,lm=!1,(a&8)!==0&&(a|=a&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=a;0<m;){var C=31-Vt(m),E=1<<C;a|=o[C],m&=~E}return fo=a,Qn(),l}function Pp(o,a){dt=null,P.H=hu,a===Xl||a===Jl?(a=ip(),Ht=3):a===Lf?(a=ip(),Ht=4):Ht=a===Qf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,bn=a,yt===null&&(un=1,dn(o,mn(a,o.current)))}function Dp(){var o=P.H;return P.H=hu,o===null?hu:o}function jp(){var o=P.A;return P.A=kw,o}function Zc(){un=4,Yr||(Tt&4194048)!==Tt&&lo.current!==null||(Vi=!0),(di&134217727)===0&&(Yi&134217727)===0||Wt===null||zs(Wt,Tt,Qr,!1)}function Ua(o,a,l){var m=Ut;Ut|=2;var C=Dp(),E=jp();(Wt!==o||Tt!==a)&&(ih=null,Jc(o,a)),a=!1;var D=un;e:do try{if(Ht!==0&&yt!==null){var z=yt,Z=bn;switch(Ht){case 8:hm(),D=6;break e;case 3:case 2:case 9:case 6:lo.current===null&&(a=!0);var fe=Ht;if(Ht=0,bn=null,Qi(o,z,Z,fe),l&&Vi){D=0;break e}break;default:fe=Ht,Ht=0,bn=null,Qi(o,z,Z,fe)}}Rw(),D=un;break}catch(Te){Pp(o,Te)}while(!0);return a&&o.shellSuspendCounter++,Zo=Es=null,Ut=m,P.H=C,P.A=E,yt===null&&(Wt=null,Tt=0,Qn()),D}function Rw(){for(;yt!==null;)fm(yt)}function Nw(o,a){var l=Ut;Ut|=2;var m=Dp(),C=jp();Wt!==o||Tt!==a?(ih=null,oh=ge()+500,Jc(o,a)):Vi=bo(o,a);e:do try{if(Ht!==0&&yt!==null){a=yt;var E=bn;t:switch(Ht){case 1:Ht=0,bn=null,Qi(o,a,E,1);break;case 2:case 9:if(op(E)){Ht=0,bn=null,Mn(a);break}a=function(){Ht!==2&&Ht!==9||Wt!==o||(Ht=7),R(o)},E.then(a,a);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:op(E)?(Ht=0,bn=null,Mn(a)):(Ht=0,bn=null,Qi(o,a,E,7));break;case 5:var D=null;switch(yt.tag){case 26:D=yt.memoizedState;case 5:case 27:var z=yt;if(!D||MT(D)){Ht=0,bn=null;var Z=z.sibling;if(Z!==null)yt=Z;else{var fe=z.return;fe!==null?(yt=fe,ch(fe)):yt=null}break t}}Ht=0,bn=null,Qi(o,a,E,5);break;case 6:Ht=0,bn=null,Qi(o,a,E,6);break;case 8:hm(),un=6;break e;default:throw Error(r(462))}}Ow();break}catch(Te){Pp(o,Te)}while(!0);return Zo=Es=null,P.H=m,P.A=C,Ut=l,yt!==null?0:(Wt=null,Tt=0,Qn(),un)}function Ow(){for(;yt!==null&&!lt();)fm(yt)}function fm(o){var a=Gi(o.alternate,o,fo);o.memoizedProps=o.pendingProps,a===null?ch(o):yt=a}function Mn(o){var a=o,l=a.alternate;switch(a.tag){case 15:case 0:a=_w(l,a,a.pendingProps,a.type,void 0,Tt);break;case 11:a=_w(l,a,a.pendingProps,a.type.render,a.ref,Tt);break;case 5:Ui(a);default:Zf(l,a),a=yt=Rf(a,fo),a=Gi(l,a,fo)}o.memoizedProps=o.pendingProps,a===null?ch(o):yt=a}function Qi(o,a,l,m){Zo=Es=null,Ui(a),Ps=null,fu=0;var C=a.return;try{if(ai(o,C,a,l,Tt)){un=1,dn(o,mn(l,o.current)),yt=null;return}}catch(E){if(C!==null)throw yt=C,E;un=1,dn(o,mn(l,o.current)),yt=null;return}a.flags&32768?(At||m===1?o=!0:Vi||(Tt&536870912)!==0?o=!1:(Yr=o=!0,(m===2||m===9||m===3||m===6)&&(m=lo.current,m!==null&&m.tag===13&&(m.flags|=16384))),mm(a,o)):ch(a)}function ch(o){var a=o;do{if((a.flags&32768)!==0){mm(a,Yr);return}o=a.return;var l=bp(a.alternate,a,fo);if(l!==null){yt=l;return}if(a=a.sibling,a!==null){yt=a;return}yt=a=o}while(a!==null);un===0&&(un=5)}function mm(o,a){do{var l=xp(o.alternate,o);if(l!==null){l.flags&=32767,yt=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(o=o.sibling,o!==null)){yt=o;return}yt=o=l}while(o!==null);un=6,yt=null}function el(o,a,l,m,C,E,D,z,Z){o.cancelPendingCommit=null;do Ba();while(Bn!==0);if((Ut&6)!==0)throw Error(r(327));if(a!==null){if(a===o.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=kf,oa(o,l,E,D,z,Z),o===Wt&&(yt=Wt=null,Tt=0),ja=a,Bs=o,Xc=l,La=E,um=C,Rp=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Pw(ze,function(){return Up(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=P.T,P.T=null,C=F.p,F.p=2,D=Ut,Ut|=4;try{rm(o,a,l)}finally{Ut=D,F.p=C,P.T=m}}Bn=1,Lp(),gm(),pm()}}function Lp(){if(Bn===1){Bn=0;var o=Bs,a=ja,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var m=F.p;F.p=2;var C=Ut;Ut|=4;try{sm(a,o);var E=Bw,D=wd(o.containerInfo),z=E.focusedElem,Z=E.selectionRange;if(D!==z&&z&&z.ownerDocument&&Cd(z.ownerDocument.documentElement,z)){if(Z!==null&&xf(z)){var fe=Z.start,Te=Z.end;if(Te===void 0&&(Te=fe),"selectionStart"in z)z.selectionStart=fe,z.selectionEnd=Math.min(Te,z.value.length);else{var Ne=z.ownerDocument||document,pe=Ne&&Ne.defaultView||window;if(pe.getSelection){var ye=pe.getSelection(),at=z.textContent.length,nt=Math.min(Z.start,at),Jt=Z.end===void 0?nt:Math.min(Z.end,at);!ye.extend&&nt>Jt&&(D=Jt,Jt=nt,nt=D);var ae=vd(z,nt),ne=vd(z,Jt);if(ae&&ne&&(ye.rangeCount!==1||ye.anchorNode!==ae.node||ye.anchorOffset!==ae.offset||ye.focusNode!==ne.node||ye.focusOffset!==ne.offset)){var de=Ne.createRange();de.setStart(ae.node,ae.offset),ye.removeAllRanges(),nt>Jt?(ye.addRange(de),ye.extend(ne.node,ne.offset)):(de.setEnd(ne.node,ne.offset),ye.addRange(de))}}}}for(Ne=[],ye=z;ye=ye.parentNode;)ye.nodeType===1&&Ne.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<Ne.length;z++){var _e=Ne[z];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Wp=!!Hw,Bw=Hw=null}finally{Ut=C,F.p=m,P.T=l}}o.current=a,Bn=2}}function gm(){if(Bn===2){Bn=0;var o=Bs,a=ja,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var m=F.p;F.p=2;var C=Ut;Ut|=4;try{om(o,a.alternate,a)}finally{Ut=C,F.p=m,P.T=l}}Bn=3}}function pm(){if(Bn===4||Bn===3){Bn=0,Mt();var o=Bs,a=ja,l=Xc,m=Rp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Bn=5:(Bn=0,ja=Bs=null,Ha(o,o.pendingLanes));var C=o.pendingLanes;if(C===0&&(No=null),Ol(l),a=a.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(wt,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=P.T,C=F.p,F.p=2,P.T=null;try{for(var E=o.onRecoverableError,D=0;D<m.length;D++){var z=m[D];E(z.value,{componentStack:z.stack})}}finally{P.T=a,F.p=C}}(Xc&3)!==0&&Ba(),R(o),C=o.pendingLanes,(l&4194090)!==0&&(C&42)!==0?o===dm?_u++:(_u=0,dm=o):_u=0,j(0)}}function Ha(o,a){(o.pooledCacheLanes&=a)===0&&(a=o.pooledCache,a!=null&&(o.pooledCache=null,Ac(a)))}function Ba(o){return Lp(),gm(),pm(),Up()}function Up(){if(Bn!==5)return!1;var o=Bs,a=La;La=0;var l=Ol(Xc),m=P.T,C=F.p;try{F.p=32>l?32:l,P.T=null,l=um,um=null;var E=Bs,D=Xc;if(Bn=0,ja=Bs=null,Xc=0,(Ut&6)!==0)throw Error(r(331));var z=Ut;if(Ut|=4,kp(E.current),Sp(E,E.current,D,l),Ut=z,j(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(wt,E)}catch{}return!0}finally{F.p=C,P.T=m,Ha(o,a)}}function Hp(o,a,l){a=mn(l,a),a=Yd(o.stateNode,a,2),o=ks(o,a,2),o!==null&&(xo(o,2),R(o))}function Gt(o,a,l){if(o.tag===3)Hp(o,o,l);else for(;a!==null;){if(a.tag===3){Hp(a,o,l);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(No===null||!No.has(m))){o=mn(l,o),l=vu(2),m=ks(a,l,2),m!==null&&(Yf(l,m,a,o),xo(m,2),R(m));break}}a=a.return}}function lh(o,a,l){var m=o.pingCache;if(m===null){m=o.pingCache=new Iw;var C=new Set;m.set(a,C)}else C=m.get(a),C===void 0&&(C=new Set,m.set(a,C));C.has(l)||(rh=!0,C.add(l),o=uh.bind(null,o,a,l),a.then(o,o))}function uh(o,a,l){var m=o.pingCache;m!==null&&m.delete(a),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,Wt===o&&(Tt&l)===l&&(un===4||un===3&&(Tt&62914560)===Tt&&300>ge()-Wc?(Ut&2)===0&&Jc(o,0):Su|=l,Da===Tt&&(Da=0)),R(o)}function Bp(o,a){a===0&&(a=fs()),o=Tn(o,a),o!==null&&(xo(o,a),R(o))}function Mw(o){var a=o.memoizedState,l=0;a!==null&&(l=a.retryLane),Bp(o,l)}function Xr(o,a){var l=0;switch(o.tag){case 13:var m=o.stateNode,C=o.memoizedState;C!==null&&(l=C.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(a),Bp(o,l)}function Pw(o,a){return Pe(o,a)}var S=null,i=null,u=!1,p=!1,w=!1,T=0;function R(o){o!==i&&o.next===null&&(i===null?S=i=o:i=i.next=o),p=!0,u||(u=!0,Qe())}function j(o,a){if(!w&&p){w=!0;do for(var l=!1,m=S;m!==null;){if(o!==0){var C=m.pendingLanes;if(C===0)var E=0;else{var D=m.suspendedLanes,z=m.pingedLanes;E=(1<<31-Vt(42|o)+1)-1,E&=C&~(D&~z),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,Ue(m,E))}else E=Tt,E=wi(m,m===Wt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||bo(m,E)||(l=!0,Ue(m,E));m=m.next}while(l);w=!1}}function K(){te()}function te(){p=u=!1;var o=0;T!==0&&(QP()&&(o=T),T=0);for(var a=ge(),l=null,m=S;m!==null;){var C=m.next,E=ve(m,a);E===0?(m.next=null,l===null?S=C:l.next=C,C===null&&(i=l)):(l=m,(o!==0||(E&3)!==0)&&(p=!0)),m=C}j(o)}function ve(o,a){for(var l=o.suspendedLanes,m=o.pingedLanes,C=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var D=31-Vt(E),z=1<<D,Z=C[D];Z===-1?((z&l)===0||(z&m)!==0)&&(C[D]=ra(z,a)):Z<=a&&(o.expiredLanes|=z),E&=~z}if(a=Wt,l=Tt,l=wi(o,o===a?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,l===0||o===a&&(Ht===2||Ht===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Me(m),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||bo(o,l)){if(a=l&-l,a===o.callbackPriority)return a;switch(m!==null&&Me(m),Ol(l)){case 2:case 8:l=it;break;case 32:l=ze;break;case 268435456:l=mt;break;default:l=ze}return m=Se.bind(null,o),l=Pe(l,m),o.callbackPriority=a,o.callbackNode=l,a}return m!==null&&m!==null&&Me(m),o.callbackPriority=2,o.callbackNode=null,2}function Se(o,a){if(Bn!==0&&Bn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(Ba()&&o.callbackNode!==l)return null;var m=Tt;return m=wi(o,o===Wt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(Op(o,m,a),ve(o,ge()),o.callbackNode!=null&&o.callbackNode===l?Se.bind(null,o):null)}function Ue(o,a){if(Ba())return null;Op(o,a,!0)}function Qe(){XP(function(){(Ut&6)!==0?Pe(Xe,K):te()})}function Bt(){return T===0&&(T=bi()),T}function zt(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Hl(""+o)}function mr(o,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,o.id&&l.setAttribute("form",o.id),a.parentNode.insertBefore(l,a),o=new FormData(o),l.parentNode.removeChild(l),o}function Wi(o,a,l,m,C){if(a==="submit"&&l&&l.stateNode===C){var E=zt((C[En]||null).action),D=m.submitter;D&&(a=(a=D[En]||null)?zt(a.formAction):D.getAttribute("formAction"),a!==null&&(E=a,D=null));var z=new ad("action","action",null,m,C);o.push({event:z,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(T!==0){var Z=D?mr(C,D):new FormData(C);ii(l,{pending:!0,data:Z,method:C.method,action:E},null,Z)}}else typeof E=="function"&&(z.preventDefault(),Z=D?mr(C,D):new FormData(C),ii(l,{pending:!0,data:Z,method:C.method,action:E},E,Z))},currentTarget:C}]})}}for(var gr=0;gr<yc.length;gr++){var tl=yc[gr],ym=tl.toLowerCase(),dh=tl[0].toUpperCase()+tl.slice(1);Ao(ym,"on"+dh)}Ao(Tf,"onAnimationEnd"),Ao(Ni,"onAnimationIteration"),Ao(Ed,"onAnimationStart"),Ao("dblclick","onDoubleClick"),Ao("focusin","onFocus"),Ao("focusout","onBlur"),Ao(Sf,"onTransitionRun"),Ao(Wg,"onTransitionStart"),Ao(Xg,"onTransitionCancel"),Ao(_f,"onTransitionEnd"),zr("onMouseEnter",["mouseout","mouseover"]),zr("onMouseLeave",["mouseout","mouseover"]),zr("onPointerEnter",["pointerout","pointerover"]),zr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vm));function mT(o,a){a=(a&4)!==0;for(var l=0;l<o.length;l++){var m=o[l],C=m.event;m=m.listeners;e:{var E=void 0;if(a)for(var D=m.length-1;0<=D;D--){var z=m[D],Z=z.instance,fe=z.currentTarget;if(z=z.listener,Z!==E&&C.isPropagationStopped())break e;E=z,C.currentTarget=fe;try{E(C)}catch(Te){$d(Te)}C.currentTarget=null,E=Z}else for(D=0;D<m.length;D++){if(z=m[D],Z=z.instance,fe=z.currentTarget,z=z.listener,Z!==E&&C.isPropagationStopped())break e;E=z,C.currentTarget=fe;try{E(C)}catch(Te){$d(Te)}C.currentTarget=null,E=Z}}}}function bt(o,a){var l=a[ac];l===void 0&&(l=a[ac]=new Set);var m=o+"__bubble";l.has(m)||(gT(a,o,2,!1),l.add(m))}function Dw(o,a,l){var m=0;a&&(m|=4),gT(l,o,m,a)}var zp="_reactListening"+Math.random().toString(36).slice(2);function jw(o){if(!o[zp]){o[zp]=!0,gs.forEach(function(l){l!=="selectionchange"&&(qP.has(l)||Dw(l,!1,o),Dw(l,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[zp]||(a[zp]=!0,Dw("selectionchange",!1,a))}}function gT(o,a,l,m){switch(HT(a)){case 2:var C=v2;break;case 8:C=C2;break;default:C=Ww}l=C.bind(null,a,l,o),C=void 0,!Vn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(C=!0),m?C!==void 0?o.addEventListener(a,l,{capture:!0,passive:C}):o.addEventListener(a,l,!0):C!==void 0?o.addEventListener(a,l,{passive:C}):o.addEventListener(a,l,!1)}function Lw(o,a,l,m,C){var E=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var z=m.stateNode.containerInfo;if(z===C)break;if(D===4)for(D=m.return;D!==null;){var Z=D.tag;if((Z===3||Z===4)&&D.stateNode.containerInfo===C)return;D=D.return}for(;z!==null;){if(D=dr(z),D===null)return;if(Z=D.tag,Z===5||Z===6||Z===26||Z===27){m=E=D;continue e}z=z.parentNode}}m=m.return}od(function(){var fe=E,Te=hc(l),Ne=[];e:{var pe=Jg.get(o);if(pe!==void 0){var ye=ad,at=o;switch(o){case"keypress":if(ha(l)===0)break e;case"keydown":case"keyup":ye=rw;break;case"focusin":at="focus",ye=ld;break;case"focusout":at="blur",ye=ld;break;case"beforeblur":case"afterblur":ye=ld;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=sw;break;case Tf:case Ni:case Ed:ye=YC;break;case _f:ye=cw;break;case"scroll":case"scrollend":ye=$C;break;case"wheel":ye=uw;break;case"copy":case"cut":case"paste":ye=WC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Gg;break;case"toggle":case"beforetoggle":ye=hw}var nt=(a&4)!==0,Jt=!nt&&(o==="scroll"||o==="scrollend"),ae=nt?pe!==null?pe+"Capture":null:pe;nt=[];for(var ne=fe,de;ne!==null;){var _e=ne;if(de=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||de===null||ae===null||(_e=da(ne,ae),_e!=null&&nt.push(Cm(ne,_e,de))),Jt)break;ne=ne.return}0<nt.length&&(pe=new ye(pe,at,null,l,Te),Ne.push({event:pe,listeners:nt}))}}if((a&7)===0){e:{if(pe=o==="mouseover"||o==="pointerover",ye=o==="mouseout"||o==="pointerout",pe&&l!==hf&&(at=l.relatedTarget||l.fromElement)&&(dr(at)||at[Ln]))break e;if((ye||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,ye?(at=l.relatedTarget||l.toElement,ye=fe,at=at?dr(at):null,at!==null&&(Jt=c(at),nt=at.tag,at!==Jt||nt!==5&&nt!==27&&nt!==6)&&(at=null)):(ye=null,at=fe),ye!==at)){if(nt=no,_e="onMouseLeave",ae="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(nt=Gg,_e="onPointerLeave",ae="onPointerEnter",ne="pointer"),Jt=ye==null?pe:to(ye),de=at==null?pe:to(at),pe=new nt(_e,ne+"leave",ye,l,Te),pe.target=Jt,pe.relatedTarget=de,_e=null,dr(Te)===fe&&(nt=new nt(ae,ne+"enter",at,l,Te),nt.target=de,nt.relatedTarget=Jt,_e=nt),Jt=_e,ye&&at)t:{for(nt=ye,ae=at,ne=0,de=nt;de;de=hh(de))ne++;for(de=0,_e=ae;_e;_e=hh(_e))de++;for(;0<ne-de;)nt=hh(nt),ne--;for(;0<de-ne;)ae=hh(ae),de--;for(;ne--;){if(nt===ae||ae!==null&&nt===ae.alternate)break t;nt=hh(nt),ae=hh(ae)}nt=null}else nt=null;ye!==null&&pT(Ne,pe,ye,nt,!1),at!==null&&Jt!==null&&pT(Ne,Jt,at,nt,!0)}}e:{if(pe=fe?to(fe):window,ye=pe.nodeName&&pe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&pe.type==="file")var $e=Vl;else if(Vg(pe))if(dd)$e=gd;else{$e=ww;var Ct=Cw}else ye=pe.nodeName,!ye||ye.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?fe&&Ul(fe.elementType)&&($e=Vl):$e=bw;if($e&&($e=$e(o,fe))){$l(Ne,$e,l,Te);break e}Ct&&Ct(o,pe,fe),o==="focusout"&&fe&&pe.type==="number"&&fe.memoizedProps.value!=null&&uc(pe,"number",pe.value)}switch(Ct=fe?to(fe):window,o){case"focusin":(Vg(Ct)||Ct.contentEditable==="true")&&(pc=Ct,bd=fe,Yl=null);break;case"focusout":Yl=bd=pc=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,Qg(Ne,l,Te);break;case"selectionchange":if(Yg)break;case"keydown":case"keyup":Qg(Ne,l,Te)}var Je;if(pf)e:{switch(o){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else mc?Cf(o,l)&&(ot="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(ot="onCompositionStart");ot&&(qg&&l.locale!=="ko"&&(mc||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&mc&&(Je=sd()):(vs=Te,Bl="value"in vs?vs.value:vs.textContent,mc=!0)),Ct=Fp(fe,ot),0<Ct.length&&(ot=new Kg(ot,o,null,l,Te),Ne.push({event:ot,listeners:Ct}),Je?ot.data=Je:(Je=$g(l),Je!==null&&(ot.data=Je)))),(Je=mw?gw(o,l):pw(o,l))&&(ot=Fp(fe,"onBeforeInput"),0<ot.length&&(Ct=new Kg("onBeforeInput","beforeinput",null,l,Te),Ne.push({event:Ct,listeners:ot}),Ct.data=Je)),Wi(Ne,o,fe,l,Te)}mT(Ne,a)})}function Cm(o,a,l){return{instance:o,listener:a,currentTarget:l}}function Fp(o,a){for(var l=a+"Capture",m=[];o!==null;){var C=o,E=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||E===null||(C=da(o,l),C!=null&&m.unshift(Cm(o,C,E)),C=da(o,a),C!=null&&m.push(Cm(o,C,E))),o.tag===3)return m;o=o.return}return[]}function hh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function pT(o,a,l,m,C){for(var E=a._reactName,D=[];l!==null&&l!==m;){var z=l,Z=z.alternate,fe=z.stateNode;if(z=z.tag,Z!==null&&Z===m)break;z!==5&&z!==26&&z!==27||fe===null||(Z=fe,C?(fe=da(l,E),fe!=null&&D.unshift(Cm(l,fe,Z))):C||(fe=da(l,E),fe!=null&&D.push(Cm(l,fe,Z)))),l=l.return}D.length!==0&&o.push({event:a,listeners:D})}var $P=/\r\n?/g,VP=/\u0000|\uFFFD/g;function yT(o){return(typeof o=="string"?o:""+o).replace($P,`
`).replace(VP,"")}function vT(o,a){return a=yT(a),yT(o)===a}function Kp(){}function Xt(o,a,l,m,C,E){switch(l){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||ua(o,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&ua(o,""+m);break;case"className":Eo(o,"class",m);break;case"tabIndex":Eo(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Eo(o,l,m);break;case"style":df(o,m,E);break;case"data":if(a!=="object"){Eo(o,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||l!=="href")){o.removeAttribute(l);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(l);break}m=Hl(""+m),o.setAttribute(l,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&Xt(o,a,"name",C.name,C,null),Xt(o,a,"formEncType",C.formEncType,C,null),Xt(o,a,"formMethod",C.formMethod,C,null),Xt(o,a,"formTarget",C.formTarget,C,null)):(Xt(o,a,"encType",C.encType,C,null),Xt(o,a,"method",C.method,C,null),Xt(o,a,"target",C.target,C,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(l);break}m=Hl(""+m),o.setAttribute(l,m);break;case"onClick":m!=null&&(o.onclick=Kp);break;case"onScroll":m!=null&&bt("scroll",o);break;case"onScrollEnd":m!=null&&bt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(l=m.__html,l!=null){if(C.children!=null)throw Error(r(60));o.innerHTML=l}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}l=Hl(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(l,""+m):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":m===!0?o.setAttribute(l,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(l,m):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(l,m):o.removeAttribute(l);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(l):o.setAttribute(l,m);break;case"popover":bt("beforetoggle",o),bt("toggle",o),Yo(o,"popover",m);break;case"xlinkActuate":hr(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":hr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":hr(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":hr(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":hr(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":hr(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":hr(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":hr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":hr(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Yo(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=zg.get(l)||l,Yo(o,l,m))}}function Uw(o,a,l,m,C,E){switch(l){case"style":df(o,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(l=m.__html,l!=null){if(C.children!=null)throw Error(r(60));o.innerHTML=l}}break;case"children":typeof m=="string"?ua(o,m):(typeof m=="number"||typeof m=="bigint")&&ua(o,""+m);break;case"onScroll":m!=null&&bt("scroll",o);break;case"onScrollEnd":m!=null&&bt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Kp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(C=l.endsWith("Capture"),a=l.slice(2,C?l.length-7:void 0),E=o[En]||null,E=E!=null?E[l]:null,typeof E=="function"&&o.removeEventListener(a,E,C),typeof m=="function")){typeof E!="function"&&E!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(a,m,C);break e}l in o?o[l]=m:m===!0?o.setAttribute(l,""):Yo(o,l,m)}}}function pr(o,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",o),bt("load",o);var m=!1,C=!1,E;for(E in l)if(l.hasOwnProperty(E)){var D=l[E];if(D!=null)switch(E){case"src":m=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(o,a,E,D,l,null)}}C&&Xt(o,a,"srcSet",l.srcSet,l,null),m&&Xt(o,a,"src",l.src,l,null);return;case"input":bt("invalid",o);var z=E=D=C=null,Z=null,fe=null;for(m in l)if(l.hasOwnProperty(m)){var Te=l[m];if(Te!=null)switch(m){case"name":C=Te;break;case"type":D=Te;break;case"checked":Z=Te;break;case"defaultChecked":fe=Te;break;case"value":E=Te;break;case"defaultValue":z=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,a));break;default:Xt(o,a,m,Te,l,null)}}jl(o,E,z,Z,fe,D,C,!1),an(o);return;case"select":bt("invalid",o),m=D=E=null;for(C in l)if(l.hasOwnProperty(C)&&(z=l[C],z!=null))switch(C){case"value":E=z;break;case"defaultValue":D=z;break;case"multiple":m=z;default:Xt(o,a,C,z,l,null)}a=E,l=D,o.multiple=!!m,a!=null?Qo(o,!!m,a,!1):l!=null&&Qo(o,!!m,l,!0);return;case"textarea":bt("invalid",o),E=C=m=null;for(D in l)if(l.hasOwnProperty(D)&&(z=l[D],z!=null))switch(D){case"value":m=z;break;case"defaultValue":C=z;break;case"children":E=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:Xt(o,a,D,z,l,null)}dc(o,m,C,E),an(o);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(m=l[Z],m!=null))switch(Z){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Xt(o,a,Z,m,l,null)}return;case"dialog":bt("beforetoggle",o),bt("toggle",o),bt("cancel",o),bt("close",o);break;case"iframe":case"object":bt("load",o);break;case"video":case"audio":for(m=0;m<vm.length;m++)bt(vm[m],o);break;case"image":bt("error",o),bt("load",o);break;case"details":bt("toggle",o);break;case"embed":case"source":case"link":bt("error",o),bt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in l)if(l.hasOwnProperty(fe)&&(m=l[fe],m!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Xt(o,a,fe,m,l,null)}return;default:if(Ul(a)){for(Te in l)l.hasOwnProperty(Te)&&(m=l[Te],m!==void 0&&Uw(o,a,Te,m,l,void 0));return}}for(z in l)l.hasOwnProperty(z)&&(m=l[z],m!=null&&Xt(o,a,z,m,l,null))}function YP(o,a,l,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,E=null,D=null,z=null,Z=null,fe=null,Te=null;for(ye in l){var Ne=l[ye];if(l.hasOwnProperty(ye)&&Ne!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":Z=Ne;default:m.hasOwnProperty(ye)||Xt(o,a,ye,null,m,Ne)}}for(var pe in m){var ye=m[pe];if(Ne=l[pe],m.hasOwnProperty(pe)&&(ye!=null||Ne!=null))switch(pe){case"type":E=ye;break;case"name":C=ye;break;case"checked":fe=ye;break;case"defaultChecked":Te=ye;break;case"value":D=ye;break;case"defaultValue":z=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,a));break;default:ye!==Ne&&Xt(o,a,pe,ye,m,Ne)}}la(o,D,z,Z,fe,Te,E,C);return;case"select":ye=D=z=pe=null;for(E in l)if(Z=l[E],l.hasOwnProperty(E)&&Z!=null)switch(E){case"value":break;case"multiple":ye=Z;default:m.hasOwnProperty(E)||Xt(o,a,E,null,m,Z)}for(C in m)if(E=m[C],Z=l[C],m.hasOwnProperty(C)&&(E!=null||Z!=null))switch(C){case"value":pe=E;break;case"defaultValue":z=E;break;case"multiple":D=E;default:E!==Z&&Xt(o,a,C,E,m,Z)}a=z,l=D,m=ye,pe!=null?Qo(o,!!l,pe,!1):!!m!=!!l&&(a!=null?Qo(o,!!l,a,!0):Qo(o,!!l,l?[]:"",!1));return;case"textarea":ye=pe=null;for(z in l)if(C=l[z],l.hasOwnProperty(z)&&C!=null&&!m.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Xt(o,a,z,null,m,C)}for(D in m)if(C=m[D],E=l[D],m.hasOwnProperty(D)&&(C!=null||E!=null))switch(D){case"value":pe=C;break;case"defaultValue":ye=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==E&&Xt(o,a,D,C,m,E)}Ll(o,pe,ye);return;case"option":for(var at in l)if(pe=l[at],l.hasOwnProperty(at)&&pe!=null&&!m.hasOwnProperty(at))switch(at){case"selected":o.selected=!1;break;default:Xt(o,a,at,null,m,pe)}for(Z in m)if(pe=m[Z],ye=l[Z],m.hasOwnProperty(Z)&&pe!==ye&&(pe!=null||ye!=null))switch(Z){case"selected":o.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:Xt(o,a,Z,pe,m,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in l)pe=l[nt],l.hasOwnProperty(nt)&&pe!=null&&!m.hasOwnProperty(nt)&&Xt(o,a,nt,null,m,pe);for(fe in m)if(pe=m[fe],ye=l[fe],m.hasOwnProperty(fe)&&pe!==ye&&(pe!=null||ye!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,a));break;default:Xt(o,a,fe,pe,m,ye)}return;default:if(Ul(a)){for(var Jt in l)pe=l[Jt],l.hasOwnProperty(Jt)&&pe!==void 0&&!m.hasOwnProperty(Jt)&&Uw(o,a,Jt,void 0,m,pe);for(Te in m)pe=m[Te],ye=l[Te],!m.hasOwnProperty(Te)||pe===ye||pe===void 0&&ye===void 0||Uw(o,a,Te,pe,m,ye);return}}for(var ae in l)pe=l[ae],l.hasOwnProperty(ae)&&pe!=null&&!m.hasOwnProperty(ae)&&Xt(o,a,ae,null,m,pe);for(Ne in m)pe=m[Ne],ye=l[Ne],!m.hasOwnProperty(Ne)||pe===ye||pe==null&&ye==null||Xt(o,a,Ne,pe,m,ye)}var Hw=null,Bw=null;function Gp(o){return o.nodeType===9?o:o.ownerDocument}function CT(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wT(o,a){if(o===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&a==="foreignObject"?0:o}function zw(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fw=null;function QP(){var o=window.event;return o&&o.type==="popstate"?o===Fw?!1:(Fw=o,!0):(Fw=null,!1)}var bT=typeof setTimeout=="function"?setTimeout:void 0,WP=typeof clearTimeout=="function"?clearTimeout:void 0,xT=typeof Promise=="function"?Promise:void 0,XP=typeof queueMicrotask=="function"?queueMicrotask:typeof xT<"u"?function(o){return xT.resolve(null).then(o).catch(JP)}:bT;function JP(o){setTimeout(function(){throw o})}function nl(o){return o==="head"}function ET(o,a){var l=a,m=0,C=0;do{var E=l.nextSibling;if(o.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<m&&8>m){l=m;var D=o.ownerDocument;if(l&1&&wm(D.documentElement),l&2&&wm(D.body),l&4)for(l=D.head,wm(l),D=l.firstChild;D;){var z=D.nextSibling,Z=D.nodeName;D[$o]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&D.rel.toLowerCase()==="stylesheet"||l.removeChild(D),D=z}}if(C===0){o.removeChild(E),km(a);return}C--}else l==="$"||l==="$?"||l==="$!"?C++:m=l.charCodeAt(0)-48;else m=0;l=E}while(l);km(a)}function Kw(o){var a=o.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Kw(l),xi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function ZP(o,a,l,m){for(;o.nodeType===1;){var C=l;if(o.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[$o])switch(a){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==C.rel||o.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||o.getAttribute("title")!==(C.title==null?null:C.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(C.src==null?null:C.src)||o.getAttribute("type")!==(C.type==null?null:C.type)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(a==="input"&&o.type==="hidden"){var E=C.name==null?null:""+C.name;if(C.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=Xi(o.nextSibling),o===null)break}return null}function e2(o,a,l){if(a==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Xi(o.nextSibling),o===null))return null;return o}function Gw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function t2(o,a){var l=o.ownerDocument;if(o.data!=="$?"||l.readyState==="complete")a();else{var m=function(){a(),l.removeEventListener("DOMContentLoaded",m)};l.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Xi(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return o}var qw=null;function AT(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return o;a--}else l==="/$"&&a++}o=o.previousSibling}return null}function TT(o,a,l){switch(a=Gp(l),o){case"html":if(o=a.documentElement,!o)throw Error(r(452));return o;case"head":if(o=a.head,!o)throw Error(r(453));return o;case"body":if(o=a.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function wm(o){for(var a=o.attributes;a.length;)o.removeAttributeNode(a[0]);xi(o)}var hi=new Map,ST=new Set;function qp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var za=F.d;F.d={f:n2,r:r2,D:o2,C:i2,L:s2,m:a2,X:l2,S:c2,M:u2};function n2(){var o=za.f(),a=ah();return o||a}function r2(o){var a=Br(o);a!==null&&a.tag===5&&a.type==="form"?qf(a):za.r(o)}var fh=typeof document>"u"?null:document;function _T(o,a,l){var m=fh;if(m&&typeof a=="string"&&a){var C=An(a);C='link[rel="'+o+'"][href="'+C+'"]',typeof l=="string"&&(C+='[crossorigin="'+l+'"]'),ST.has(C)||(ST.add(C),o={rel:o,crossOrigin:l,href:a},m.querySelector(C)===null&&(a=m.createElement("link"),pr(a,"link",o),sn(a),m.head.appendChild(a)))}}function o2(o){za.D(o),_T("dns-prefetch",o,null)}function i2(o,a){za.C(o,a),_T("preconnect",o,a)}function s2(o,a,l){za.L(o,a,l);var m=fh;if(m&&o&&a){var C='link[rel="preload"][as="'+An(a)+'"]';a==="image"&&l&&l.imageSrcSet?(C+='[imagesrcset="'+An(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(C+='[imagesizes="'+An(l.imageSizes)+'"]')):C+='[href="'+An(o)+'"]';var E=C;switch(a){case"style":E=mh(o);break;case"script":E=gh(o)}hi.has(E)||(o=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:o,as:a},l),hi.set(E,o),m.querySelector(C)!==null||a==="style"&&m.querySelector(bm(E))||a==="script"&&m.querySelector(xm(E))||(a=m.createElement("link"),pr(a,"link",o),sn(a),m.head.appendChild(a)))}}function a2(o,a){za.m(o,a);var l=fh;if(l&&o){var m=a&&typeof a.as=="string"?a.as:"script",C='link[rel="modulepreload"][as="'+An(m)+'"][href="'+An(o)+'"]',E=C;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=gh(o)}if(!hi.has(E)&&(o=v({rel:"modulepreload",href:o},a),hi.set(E,o),l.querySelector(C)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(xm(E)))return}m=l.createElement("link"),pr(m,"link",o),sn(m),l.head.appendChild(m)}}}function c2(o,a,l){za.S(o,a,l);var m=fh;if(m&&o){var C=xr(m).hoistableStyles,E=mh(o);a=a||"default";var D=C.get(E);if(!D){var z={loading:0,preload:null};if(D=m.querySelector(bm(E)))z.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":a},l),(l=hi.get(E))&&$w(o,l);var Z=D=m.createElement("link");sn(Z),pr(Z,"link",o),Z._p=new Promise(function(fe,Te){Z.onload=fe,Z.onerror=Te}),Z.addEventListener("load",function(){z.loading|=1}),Z.addEventListener("error",function(){z.loading|=2}),z.loading|=4,$p(D,a,m)}D={type:"stylesheet",instance:D,count:1,state:z},C.set(E,D)}}}function l2(o,a){za.X(o,a);var l=fh;if(l&&o){var m=xr(l).hoistableScripts,C=gh(o),E=m.get(C);E||(E=l.querySelector(xm(C)),E||(o=v({src:o,async:!0},a),(a=hi.get(C))&&Vw(o,a),E=l.createElement("script"),sn(E),pr(E,"link",o),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(C,E))}}function u2(o,a){za.M(o,a);var l=fh;if(l&&o){var m=xr(l).hoistableScripts,C=gh(o),E=m.get(C);E||(E=l.querySelector(xm(C)),E||(o=v({src:o,async:!0,type:"module"},a),(a=hi.get(C))&&Vw(o,a),E=l.createElement("script"),sn(E),pr(E,"link",o),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(C,E))}}function kT(o,a,l,m){var C=(C=xe.current)?qp(C):null;if(!C)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=mh(l.href),l=xr(C).hoistableStyles,m=l.get(a),m||(m={type:"style",instance:null,count:0,state:null},l.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=mh(l.href);var E=xr(C).hoistableStyles,D=E.get(o);if(D||(C=C.ownerDocument||C,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,D),(E=C.querySelector(bm(o)))&&!E._p&&(D.instance=E,D.state.loading=5),hi.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},hi.set(o,l),E||d2(C,o,l,D.state))),a&&m===null)throw Error(r(528,""));return D}if(a&&m!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=gh(l),l=xr(C).hoistableScripts,m=l.get(a),m||(m={type:"script",instance:null,count:0,state:null},l.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function mh(o){return'href="'+An(o)+'"'}function bm(o){return'link[rel="stylesheet"]['+o+"]"}function IT(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function d2(o,a,l,m){o.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=o.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),pr(a,"link",l),sn(a),o.head.appendChild(a))}function gh(o){return'[src="'+An(o)+'"]'}function xm(o){return"script[async]"+o}function RT(o,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var m=o.querySelector('style[data-href~="'+An(l.href)+'"]');if(m)return a.instance=m,sn(m),m;var C=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),sn(m),pr(m,"style",C),$p(m,l.precedence,o),a.instance=m;case"stylesheet":C=mh(l.href);var E=o.querySelector(bm(C));if(E)return a.state.loading|=4,a.instance=E,sn(E),E;m=IT(l),(C=hi.get(C))&&$w(m,C),E=(o.ownerDocument||o).createElement("link"),sn(E);var D=E;return D._p=new Promise(function(z,Z){D.onload=z,D.onerror=Z}),pr(E,"link",m),a.state.loading|=4,$p(E,l.precedence,o),a.instance=E;case"script":return E=gh(l.src),(C=o.querySelector(xm(E)))?(a.instance=C,sn(C),C):(m=l,(C=hi.get(E))&&(m=v({},l),Vw(m,C)),o=o.ownerDocument||o,C=o.createElement("script"),sn(C),pr(C,"link",m),o.head.appendChild(C),a.instance=C);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,$p(m,l.precedence,o));return a.instance}function $p(o,a,l){for(var m=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=m.length?m[m.length-1]:null,E=C,D=0;D<m.length;D++){var z=m[D];if(z.dataset.precedence===a)E=z;else if(E!==C)break}E?E.parentNode.insertBefore(o,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(o,a.firstChild))}function $w(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.title==null&&(o.title=a.title)}function Vw(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.integrity==null&&(o.integrity=a.integrity)}var Vp=null;function NT(o,a,l){if(Vp===null){var m=new Map,C=Vp=new Map;C.set(l,m)}else C=Vp,m=C.get(l),m||(m=new Map,C.set(l,m));if(m.has(o))return m;for(m.set(o,null),l=l.getElementsByTagName(o),C=0;C<l.length;C++){var E=l[C];if(!(E[$o]||E[Ie]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var D=E.getAttribute(a)||"";D=o+D;var z=m.get(D);z?z.push(E):m.set(D,[E])}}return m}function OT(o,a,l){o=o.ownerDocument||o,o.head.insertBefore(l,a==="title"?o.querySelector("head > title"):null)}function h2(o,a,l){if(l===1||a.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return o=a.disabled,typeof a.precedence=="string"&&o==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function MT(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Em=null;function f2(){}function m2(o,a,l){if(Em===null)throw Error(r(475));var m=Em;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var C=mh(l.href),E=o.querySelector(bm(C));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=Yp.bind(m),o.then(m,m)),a.state.loading|=4,a.instance=E,sn(E);return}E=o.ownerDocument||o,l=IT(l),(C=hi.get(C))&&$w(l,C),E=E.createElement("link"),sn(E);var D=E;D._p=new Promise(function(z,Z){D.onload=z,D.onerror=Z}),pr(E,"link",l),a.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(m.count++,a=Yp.bind(m),o.addEventListener("load",a),o.addEventListener("error",a))}}function g2(){if(Em===null)throw Error(r(475));var o=Em;return o.stylesheets&&o.count===0&&Yw(o,o.stylesheets),0<o.count?function(a){var l=setTimeout(function(){if(o.stylesheets&&Yw(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=a,function(){o.unsuspend=null,clearTimeout(l)}}:null}function Yp(){if(this.count--,this.count===0){if(this.stylesheets)Yw(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Qp=null;function Yw(o,a){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Qp=new Map,a.forEach(p2,o),Qp=null,Yp.call(o))}function p2(o,a){if(!(a.state.loading&4)){var l=Qp.get(o);if(l)var m=l.get(null);else{l=new Map,Qp.set(o,l);for(var C=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<C.length;E++){var D=C[E];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(l.set(D.dataset.precedence,D),m=D)}m&&l.set(null,m)}C=a.instance,D=C.getAttribute("data-precedence"),E=l.get(D)||m,E===m&&l.set(null,C),l.set(D,C),this.count++,m=Yp.bind(this),C.addEventListener("load",m),C.addEventListener("error",m),E?E.parentNode.insertBefore(C,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(C,o.firstChild)),a.state.loading|=4}}var Am={$$typeof:O,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function y2(o,a,l,m,C,E,D,z){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Go(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Go(0),this.hiddenUpdates=Go(null),this.identifierPrefix=m,this.onUncaughtError=C,this.onCaughtError=E,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function PT(o,a,l,m,C,E,D,z,Z,fe,Te,Ne){return o=new y2(o,a,l,D,z,Z,fe,Ne),a=1,E===!0&&(a|=24),E=Tr(3,null,null,a),o.current=E,E.stateNode=o,a=Wl(),a.refCount++,o.pooledCache=a,a.refCount++,E.memoizedState={element:m,isDehydrated:l,cache:a},Zl(E),o}function DT(o){return o?(o=Wo,o):Wo}function jT(o,a,l,m,C,E){C=DT(C),m.context===null?m.context=C:m.pendingContext=C,m=_s(a),m.payload={element:l},E=E===void 0?null:E,E!==null&&(m.callback=E),l=ks(o,m,a),l!==null&&(Dr(l,o,a),eu(l,o,a))}function LT(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<a?l:a}}function Qw(o,a){LT(o,a),(o=o.alternate)&&LT(o,a)}function UT(o){if(o.tag===13){var a=Tn(o,67108864);a!==null&&Dr(a,o,67108864),Qw(o,67108864)}}var Wp=!0;function v2(o,a,l,m){var C=P.T;P.T=null;var E=F.p;try{F.p=2,Ww(o,a,l,m)}finally{F.p=E,P.T=C}}function C2(o,a,l,m){var C=P.T;P.T=null;var E=F.p;try{F.p=8,Ww(o,a,l,m)}finally{F.p=E,P.T=C}}function Ww(o,a,l,m){if(Wp){var C=Xw(m);if(C===null)Lw(o,a,m,Xp,l),BT(o,m);else if(b2(C,o,a,l,m))m.stopPropagation();else if(BT(o,m),a&4&&-1<w2.indexOf(o)){for(;C!==null;){var E=Br(C);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var D=Dn(E.pendingLanes);if(D!==0){var z=E;for(z.pendingLanes|=2,z.entangledLanes|=2;D;){var Z=1<<31-Vt(D);z.entanglements[1]|=Z,D&=~Z}R(E),(Ut&6)===0&&(oh=ge()+500,j(0))}}break;case 13:z=Tn(E,2),z!==null&&Dr(z,E,2),ah(),Qw(E,2)}if(E=Xw(m),E===null&&Lw(o,a,m,Xp,l),E===C)break;C=E}C!==null&&m.stopPropagation()}else Lw(o,a,m,null,l)}}function Xw(o){return o=hc(o),Jw(o)}var Xp=null;function Jw(o){if(Xp=null,o=dr(o),o!==null){var a=c(o);if(a===null)o=null;else{var l=a.tag;if(l===13){if(o=d(a),o!==null)return o;o=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return Xp=o,null}function HT(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case Xe:return 2;case it:return 8;case ze:case tt:return 32;case mt:return 268435456;default:return 32}default:return 32}}var Zw=!1,rl=null,ol=null,il=null,Tm=new Map,Sm=new Map,sl=[],w2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BT(o,a){switch(o){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Tm.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sm.delete(a.pointerId)}}function _m(o,a,l,m,C,E){return o===null||o.nativeEvent!==E?(o={blockedOn:a,domEventName:l,eventSystemFlags:m,nativeEvent:E,targetContainers:[C]},a!==null&&(a=Br(a),a!==null&&UT(a)),o):(o.eventSystemFlags|=m,a=o.targetContainers,C!==null&&a.indexOf(C)===-1&&a.push(C),o)}function b2(o,a,l,m,C){switch(a){case"focusin":return rl=_m(rl,o,a,l,m,C),!0;case"dragenter":return ol=_m(ol,o,a,l,m,C),!0;case"mouseover":return il=_m(il,o,a,l,m,C),!0;case"pointerover":var E=C.pointerId;return Tm.set(E,_m(Tm.get(E)||null,o,a,l,m,C)),!0;case"gotpointercapture":return E=C.pointerId,Sm.set(E,_m(Sm.get(E)||null,o,a,l,m,C)),!0}return!1}function zT(o){var a=dr(o.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){o.blockedOn=a,lf(o.priority,function(){if(l.tag===13){var m=Wr();m=qo(m);var C=Tn(l,m);C!==null&&Dr(C,l,m),Qw(l,m)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Jp(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var l=Xw(o.nativeEvent);if(l===null){l=o.nativeEvent;var m=new l.constructor(l.type,l);hf=m,l.target.dispatchEvent(m),hf=null}else return a=Br(l),a!==null&&UT(a),o.blockedOn=l,!1;a.shift()}return!0}function FT(o,a,l){Jp(o)&&l.delete(a)}function x2(){Zw=!1,rl!==null&&Jp(rl)&&(rl=null),ol!==null&&Jp(ol)&&(ol=null),il!==null&&Jp(il)&&(il=null),Tm.forEach(FT),Sm.forEach(FT)}function Zp(o,a){o.blockedOn===a&&(o.blockedOn=null,Zw||(Zw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,x2)))}var ey=null;function KT(o){ey!==o&&(ey=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ey===o&&(ey=null);for(var a=0;a<o.length;a+=3){var l=o[a],m=o[a+1],C=o[a+2];if(typeof m!="function"){if(Jw(m||l)===null)continue;break}var E=Br(l);E!==null&&(o.splice(a,3),a-=3,ii(E,{pending:!0,data:C,method:l.method,action:m},m,C))}}))}function km(o){function a(Z){return Zp(Z,o)}rl!==null&&Zp(rl,o),ol!==null&&Zp(ol,o),il!==null&&Zp(il,o),Tm.forEach(a),Sm.forEach(a);for(var l=0;l<sl.length;l++){var m=sl[l];m.blockedOn===o&&(m.blockedOn=null)}for(;0<sl.length&&(l=sl[0],l.blockedOn===null);)zT(l),l.blockedOn===null&&sl.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(m=0;m<l.length;m+=3){var C=l[m],E=l[m+1],D=C[En]||null;if(typeof E=="function")D||KT(l);else if(D){var z=null;if(E&&E.hasAttribute("formAction")){if(C=E,D=E[En]||null)z=D.formAction;else if(Jw(C)!==null)continue}else z=D.action;typeof z=="function"?l[m+1]=z:(l.splice(m,3),m-=3),KT(l)}}}function eb(o){this._internalRoot=o}ty.prototype.render=eb.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,m=Wr();jT(l,m,o,a,null,null)},ty.prototype.unmount=eb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;jT(o.current,2,null,o,null,null),ah(),a[Ln]=null}};function ty(o){this._internalRoot=o}ty.prototype.unstable_scheduleHydration=function(o){if(o){var a=rt();o={blockedOn:null,target:o,priority:a};for(var l=0;l<sl.length&&a!==0&&a<sl[l].priority;l++);sl.splice(l,0,o),l===0&&zT(o)}};var GT=e.version;if(GT!=="19.1.1")throw Error(r(527,GT,"19.1.1"));F.findDOMNode=function(o){var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=g(a),o=o!==null?y(o):null,o=o===null?null:o.stateNode,o};var E2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{wt=ny.inject(E2),ut=ny}catch{}}return Rm.createRoot=function(o,a){if(!s(o))throw Error(r(299));var l=!1,m="",C=pu,E=pp,D=yu,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(C=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(z=a.unstable_transitionCallbacks)),a=PT(o,1,!1,null,null,l,m,C,E,D,z,null),o[Ln]=a.current,jw(o),new eb(a)},Rm.hydrateRoot=function(o,a,l){if(!s(o))throw Error(r(299));var m=!1,C="",E=pu,D=pp,z=yu,Z=null,fe=null;return l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(C=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(D=l.onCaughtError),l.onRecoverableError!==void 0&&(z=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(fe=l.formState)),a=PT(o,1,!0,a,l??null,m,C,E,D,z,Z,fe),a.context=DT(null),l=a.current,m=Wr(),m=qo(m),C=_s(m),C.callback=null,ks(l,C,m),l=m,a.current.lanes=l,xo(a,l),R(a),o[Ln]=a.current,jw(o),new ty(a)},Rm.version="19.1.1",Rm}var eS;function P2(){if(eS)return rb.exports;eS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rb.exports=M2(),rb.exports}var D2=P2();/*! @azure/msal-common v15.13.0 2025-09-24 */const Re={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},vl={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Ou={GET:"GET",POST:"POST"},Jh=[Re.OPENID_SCOPE,Re.PROFILE_SCOPE,Re.OFFLINE_ACCESS_SCOPE],tS=[...Jh,Re.EMAIL_SCOPE],Zr={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},nS={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Cl={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},ry={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Cr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",NO_SESSION:"no_session"},eE={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},Bv={QUERY:"query",FRAGMENT:"fragment"},j2={QUERY:"query"},K_={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},oy={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},rg={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},vr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},tE="appmetadata",L2="client_info",Gy="1",qy={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Mo={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},yr={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},$t={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Gm={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},rS={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ph={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ab={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ru={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},U2={Pop:"pop"},G_=300;/*! @azure/msal-common v15.13.0 2025-09-24 */const $y="unexpected_error",H2="post_request_failed";/*! @azure/msal-common v15.13.0 2025-09-24 */const oS={[$y]:"Unexpected error in authentication.",[H2]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class en extends Error{constructor(e,n,r){const s=n?`${e}: ${n}`:e;super(s),Object.setPrototypeOf(this,en.prototype),this.errorCode=e||Re.EMPTY_STRING,this.errorMessage=n||Re.EMPTY_STRING,this.subError=r||Re.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function $b(t,e){return new en(t,e?`${oS[t]} ${e}`:oS[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */const nE="client_info_decoding_error",q_="client_info_empty_error",rE="token_parsing_error",$_="null_or_empty_token",qa="endpoints_resolution_error",V_="network_error",Y_="openid_config_error",Q_="hash_not_deserialized",Ph="invalid_state",W_="state_mismatch",Vb="state_not_found",X_="nonce_mismatch",oE="auth_time_not_found",J_="max_age_transpired",B2="multiple_matching_tokens",z2="multiple_matching_accounts",Z_="multiple_matching_appMetadata",ek="request_cannot_be_made",tk="cannot_remove_empty_scope",nk="cannot_append_scopeset",Yb="empty_input_scopeset",F2="device_code_polling_cancelled",K2="device_code_expired",G2="device_code_unknown_error",iE="no_account_in_silent_request",rk="invalid_cache_record",sE="invalid_cache_environment",Qb="no_account_found",Wb="no_crypto_object",q2="unexpected_credential_type",$2="invalid_assertion",V2="invalid_client_credential",wl="token_refresh_required",Y2="user_timeout_reached",ok="token_claims_cnf_required_for_signedjwt",ik="authorization_code_missing_from_server_response",sk="binding_key_not_removed",ak="end_session_endpoint_not_supported",aE="key_id_missing",Q2="no_network_connectivity",W2="user_canceled",X2="missing_tenant_id_error",pt="method_not_implemented",J2="nested_app_auth_bridge_disabled";/*! @azure/msal-common v15.13.0 2025-09-24 */const iS={[nE]:"The client info could not be parsed/decoded correctly",[q_]:"The client info was empty",[rE]:"Token cannot be parsed",[$_]:"The token is null or empty",[qa]:"Endpoints cannot be resolved",[V_]:"Network request failed",[Y_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Q_]:"The hash parameters could not be deserialized",[Ph]:"State was not the expected format",[W_]:"State mismatch error",[Vb]:"State not found",[X_]:"Nonce mismatch error",[oE]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[J_]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[B2]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[z2]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Z_]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ek]:"Token request cannot be made without authorization code or refresh token.",[tk]:"Cannot remove null or empty scope from ScopeSet",[nk]:"Cannot append ScopeSet",[Yb]:"Empty input ScopeSet cannot be processed",[F2]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[K2]:"Device code is expired.",[G2]:"Device code stopped polling for unknown reasons.",[iE]:"Please pass an account object, silent flow is not supported without account information",[rk]:"Cache record object was null or undefined.",[sE]:"Invalid environment when attempting to create cache entry",[Qb]:"No account found in cache for given key.",[Wb]:"No crypto object detected.",[q2]:"Unexpected credential type.",[$2]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[V2]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[wl]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Y2]:"User defined timeout for device code polling reached",[ok]:"Cannot generate a POP jwt if the token_claims are not populated",[ik]:"Server response does not contain an authorization code to proceed",[sk]:"Could not remove the credential's binding key from storage.",[ak]:"The provided authority does not support logout",[aE]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Q2]:"No network connectivity. Check your internet connection.",[W2]:"User cancelled the flow.",[X2]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[pt]:"This method has not been implemented",[J2]:"The nested app auth bridge is disabled"};class cE extends en{constructor(e,n){super(e,n?`${iS[e]}: ${n}`:iS[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,cE.prototype)}}function De(t,e){return new cE(t,e)}/*! @azure/msal-common v15.13.0 2025-09-24 */const Vy={createNewGuid:()=>{throw De(pt)},base64Decode:()=>{throw De(pt)},base64Encode:()=>{throw De(pt)},base64UrlEncode:()=>{throw De(pt)},encodeKid:()=>{throw De(pt)},async getPublicKeyThumbprint(){throw De(pt)},async removeTokenBindingKey(){throw De(pt)},async clearKeystore(){throw De(pt)},async signJwt(){throw De(pt)},async hashString(){throw De(pt)}};/*! @azure/msal-common v15.13.0 2025-09-24 */var rn;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(rn||(rn={}));class Qa{constructor(e,n,r){this.level=rn.Info;const s=()=>{},c=e||Qa.createDefaultLoggerOptions();this.localCallback=c.loggerCallback||s,this.piiLoggingEnabled=c.piiLoggingEnabled||!1,this.level=typeof c.logLevel=="number"?c.logLevel:rn.Info,this.correlationId=c.correlationId||Re.EMPTY_STRING,this.packageName=n||Re.EMPTY_STRING,this.packageVersion=r||Re.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rn.Info}}clone(e,n,r){return new Qa({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const c=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${rn[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,c,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:rn.Error,containsPii:!1,correlationId:n||Re.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:rn.Error,containsPii:!0,correlationId:n||Re.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:rn.Warning,containsPii:!1,correlationId:n||Re.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:rn.Warning,containsPii:!0,correlationId:n||Re.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:rn.Info,containsPii:!1,correlationId:n||Re.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:rn.Info,containsPii:!0,correlationId:n||Re.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:rn.Verbose,containsPii:!1,correlationId:n||Re.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:rn.Verbose,containsPii:!0,correlationId:n||Re.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:rn.Trace,containsPii:!1,correlationId:n||Re.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:rn.Trace,containsPii:!0,correlationId:n||Re.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.13.0 2025-09-24 */const ck="@azure/msal-common",lE="15.13.0";/*! @azure/msal-common v15.13.0 2025-09-24 */const uE={None:"none"};/*! @azure/msal-common v15.13.0 2025-09-24 */const lk="redirect_uri_empty",Z2="claims_request_parsing_error",uk="authority_uri_insecure",Lm="url_parse_error",dk="empty_url_error",hk="empty_input_scopes_error",dE="invalid_claims",fk="token_request_empty",mk="logout_request_empty",eD="invalid_code_challenge_method",hE="pkce_params_missing",fE="invalid_cloud_discovery_metadata",gk="invalid_authority_metadata",pk="untrusted_authority",zv="missing_ssh_jwk",yk="missing_ssh_kid",tD="missing_nonce_authentication_header",nD="invalid_authentication_header",vk="cannot_set_OIDCOptions",Ck="cannot_allow_platform_broker",wk="authority_mismatch",bk="invalid_request_method_for_EAR",xk="invalid_authorize_post_body_parameters";/*! @azure/msal-common v15.13.0 2025-09-24 */const rD={[lk]:"A redirect URI is required for all calls, and none has been set.",[Z2]:"Could not parse the given claims request object.",[uk]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Lm]:"URL could not be parsed into appropriate segments.",[dk]:"URL was empty or null.",[hk]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[dE]:"Given claims parameter must be a stringified JSON object.",[fk]:"Token request was empty and not found in cache.",[mk]:"The logout request was null or undefined.",[eD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[hE]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[fE]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[gk]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[pk]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[zv]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[yk]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[tD]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[nD]:"Invalid authentication header provided",[vk]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ck]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[wk]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[xk]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[bk]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class mE extends en{constructor(e){super(e,rD[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,mE.prototype)}}function on(t){return new mE(t)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ho{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),s=c=>decodeURIComponent(c.replace(/\+/g," "));return r.forEach(c=>{if(c.trim()){const[d,f]=c.split(/=(.+)/g,2);d&&f&&(n[s(d)]=s(f))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class er{constructor(e){const n=e?Ho.trimArrayEntries([...e]):[],r=n?Ho.removeEmptyStringsFromArray(n):[];if(!r||!r.length)throw on(hk);this.scopes=new Set,r.forEach(s=>this.scopes.add(s))}static fromString(e){const r=(e||Re.EMPTY_STRING).split(" ");return new er(r)}static createSearchScopes(e){const n=e&&e.length>0?e:[...Jh],r=new er(n);return r.containsOnlyOIDCScopes()?r.removeScope(Re.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new er(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return tS.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw De(nk)}}removeScope(e){if(!e)throw De(tk);this.scopes.delete(e.trim())}removeOIDCScopes(){tS.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw De(Yb);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw De(Yb);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),s=this.getScopeCount();return n.size<s+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):Re.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-09-24 */function sS(t,e){return!!t&&!!e&&t===e.split(".")[1]}function gE(t,e,n,r){if(r){const{oid:s,sub:c,tid:d,name:f,tfp:g,acr:y,preferred_username:v,upn:x,login_hint:b}=r,A=d||g||y||"";return{tenantId:A,localAccountId:s||c||"",name:f,username:v||x||"",loginHint:b,isHomeTenant:sS(A,t)}}else return{tenantId:n,localAccountId:e,username:"",isHomeTenant:sS(n,t)}}function pE(t,e,n,r){let s=t;if(e){const{isHomeTenant:c,...d}=e;s={...t,...d}}if(n){const{isHomeTenant:c,...d}=gE(t.homeAccountId,t.localAccountId,t.tenantId,n);return s={...s,...d,idTokenClaims:n,idToken:r},s}return s}/*! @azure/msal-common v15.13.0 2025-09-24 */function Zh(t,e){const n=oD(t);try{const r=e(n);return JSON.parse(r)}catch{throw De(rE)}}function oD(t){if(!t)throw De($_);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw De(rE);return n[2]}function Ek(t,e){if(e===0||Date.now()-3e5>t+e)throw De(J_)}/*! @azure/msal-common v15.13.0 2025-09-24 */function aS(t){if(!t)return t;let e=t.toLowerCase();return Ho.endsWith(e,"?")?e=e.slice(0,-1):Ho.endsWith(e,"?/")&&(e=e.slice(0,-2)),Ho.endsWith(e,"/")||(e+="/"),e}function Ak(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Yy(t){if(!t||t.indexOf("=")<0)return null;try{const e=Ak(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch{throw De(Q_)}return null}function og(t,e=!0,n){const r=new Array;return t.forEach((s,c)=>{!e&&n&&c in n?r.push(`${c}=${s}`):r.push(`${c}=${encodeURIComponent(s)}`)}),r.join("&")}function cS(t){if(!t)return t;const e=t.split("#")[0];try{const n=new URL(e),r=n.origin+n.pathname+n.search;return aS(r)}catch{return aS(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class jt{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw on(dk);e.includes("#")||(this._urlString=jt.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return Ho.endsWith(n,"?")?n=n.slice(0,-1):Ho.endsWith(n,"?/")&&(n=n.slice(0,-2)),Ho.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw on(Lm)}if(!e.HostNameAndPort||!e.PathSegments)throw on(Lm);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw on(uk)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return jt.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===Cl.COMMON||r[0]===Cl.ORGANIZATIONS)&&(r[0]=e),jt.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw on(Lm);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let s=r.AbsolutePath.split("/");return s=s.filter(c=>c&&c.length>0),r.PathSegments=s,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw on(Lm);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===Re.FORWARD_SLASH){const s=new jt(n).getUrlComponents();return s.Protocol+"//"+s.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new jt(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Yy(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Tk={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},lS=Tk.endpointMetadata,yE=Tk.instanceDiscoveryMetadata,Sk=new Set;yE.metadata.forEach(t=>{t.aliases.forEach(e=>{Sk.add(e)})});function iD(t,e){let n;const r=t.canonicalAuthority;if(r){const s=new jt(r).getUrlComponents().HostNameAndPort;n=uS(s,t.cloudDiscoveryMetadata?.metadata,Mo.CONFIG,e)||uS(s,yE.metadata,Mo.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function uS(t,e,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const s=Qy(e,t);if(s)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),s.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function sD(t){return Qy(yE.metadata,t)}function Qy(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v15.13.0 2025-09-24 */const Wy="cache_quota_exceeded",vE="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-09-24 */const cb={[Wy]:"Exceeded cache storage capacity.",[vE]:"Unexpected error occurred when using cache storage."};class _h extends en{constructor(e,n){const r=n||(cb[e]?cb[e]:cb[vE]);super(`${e}: ${r}`),Object.setPrototypeOf(this,_h.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Xb(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new _h(Wy):new _h(t.name,t.message):new _h(vE)}/*! @azure/msal-common v15.13.0 2025-09-24 */class Jb{constructor(e,n,r,s,c){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(ck,lE),this.staticAuthorityOptions=c,this.performanceClient=s}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,n),n,e)}getAccountInfoFilteredBy(e,n){if(Object.keys(e).length===0||Object.values(e).every(s=>!s))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const r=this.getAllAccounts(e,n);return r.length>1?r.sort(c=>c.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(s=>this.getTenantProfilesFromAccountEntity(s,n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,s,c){let d=null,f;if(c&&!this.tenantProfileMatchesFilter(r,c))return null;const g=this.getIdToken(e,s,n,r.tenantId);return g&&(f=Zh(g.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(f,c))?null:(d=pE(e,r,f,g?.secret),d)}getTenantProfilesFromAccountEntity(e,n,r,s){const c=e.getAccountInfo();let d=c.tenantProfiles||new Map;const f=this.getTokenKeys();if(r){const y=d.get(r);if(y)d=new Map([[r,y]]);else return[]}const g=[];return d.forEach(y=>{const v=this.getTenantedAccountInfoByFilter(c,f,y,n,s);v&&g.push(v)}),g}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){if(!e)throw De(rk);try{e.account&&await this.setAccount(e.account,n),e.idToken&&r?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,n),e.accessToken&&r?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,n),e.refreshToken&&r?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&this.setAppMetadata(e.appMetadata,n)}catch(s){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),s instanceof en?s:Xb(s)}}async saveAccessToken(e,n){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},s=this.getTokenKeys(),c=er.fromString(e.target);s.accessToken.forEach(d=>{if(!this.accessTokenKeyMatchesFilter(d,r,!1))return;const f=this.getAccessTokenCredential(d,n);f&&this.credentialMatchesFilter(f,r)&&er.fromString(f.target).intersectingScopeSets(c)&&this.removeAccessToken(d,n)}),await this.setAccessTokenCredential(e,n)}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),s=[];return r.forEach(c=>{const d=this.getAccount(c,n);if(!d||e.homeAccountId&&!this.matchHomeAccountId(d,e.homeAccountId)||e.username&&!this.matchUsername(d.username,e.username)||e.environment&&!this.matchEnvironment(d,e.environment)||e.realm&&!this.matchRealm(d,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(d,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(d,e.authorityType))return;const f={localAccountId:e?.localAccountId,name:e?.name},g=d.tenantProfiles?.filter(y=>this.tenantProfileMatchesFilter(y,f));g&&g.length===0||s.push(d)}),s}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===vr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===$t.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(s=>{if(!this.isAppMetadata(s))return;const c=this.getAppMetadata(s);c&&(e.environment&&!this.matchEnvironment(c,e.environment)||e.clientId&&!this.matchClientId(c,e.clientId)||(r[s]=c))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(s=>{if(!this.isAuthorityMetadata(s)||s.indexOf(this.clientId)===-1)return;const c=this.getAuthorityMetadata(s);c&&c.aliases.indexOf(e)!==-1&&(r=c)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,n){this.removeAccountContext(e,n);const r=this.getAccountKeys(),s=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);r.filter(s).forEach(c=>{this.removeItem(c,n),this.performanceClient.incrementFields({accountsRemoved:1},n)})}removeAccountContext(e,n){const r=this.getTokenKeys(),s=c=>c.includes(e.homeAccountId)&&c.includes(e.environment);r.idToken.filter(s).forEach(c=>{this.removeIdToken(c,n)}),r.accessToken.filter(s).forEach(c=>{this.removeAccessToken(c,n)}),r.refreshToken.filter(s).forEach(c=>{this.removeRefreshToken(c,n)})}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),this.performanceClient.incrementFields({accessTokensRemoved:1},n),!r||r.credentialType.toLowerCase()!==vr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==$t.POP)return;const s=r.keyId;s&&this.cryptoImpl.removeTokenBindingKey(s).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${s}`,n),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},n)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,n,r,s,c){this.commonLogger.trace("CacheManager - getIdToken called");const d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:vr.ID_TOKEN,clientId:this.clientId,realm:s},f=this.getIdTokensByFilter(d,n,r),g=f.size;if(g<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(g>1){let y=f;if(!s){const v=new Map;f.forEach((b,A)=>{b.realm===e.tenantId&&v.set(A,b)});const x=v.size;if(x<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),f.values().next().value;if(x===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),v.values().next().value;y=v}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),y.forEach((v,x)=>{this.removeIdToken(x,n)}),c&&n&&c.addFields({multiMatchedID:f.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),f.values().next().value}getIdTokensByFilter(e,n,r){const s=r&&r.idToken||this.getTokenKeys().idToken,c=new Map;return s.forEach(d=>{if(!this.idTokenKeyMatchesFilter(d,{clientId:this.clientId,...e}))return;const f=this.getIdTokenCredential(d,n);f&&this.credentialMatchesFilter(f,e)&&c.set(d,f)}),c}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,s){const c=n.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",c);const d=er.createSearchScopes(n.scopes),f=n.authenticationScheme||$t.BEARER,g=f.toLowerCase()!==$t.BEARER.toLowerCase()?vr.ACCESS_TOKEN_WITH_AUTH_SCHEME:vr.ACCESS_TOKEN,y={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:g,clientId:this.clientId,realm:s||e.tenantId,target:d,tokenType:f,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},v=r&&r.accessToken||this.getTokenKeys().accessToken,x=[];v.forEach(A=>{if(this.accessTokenKeyMatchesFilter(A,y,!0)){const I=this.getAccessTokenCredential(A,c);I&&this.credentialMatchesFilter(I,y)&&x.push(I)}});const b=x.length;return b<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",c),null):b>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",c),x.forEach(A=>{this.removeAccessToken(this.generateCredentialKey(A),c)}),this.performanceClient.addFields({multiMatchedAT:x.length},c),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",c),x[0])}accessTokenKeyMatchesFilter(e,n,r){const s=e.toLowerCase();if(n.clientId&&s.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&s.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&s.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&s.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const c=n.target.asArray();for(let d=0;d<c.length;d++){if(r&&!s.includes(c[d].toLowerCase()))return!1;if(!r&&s.includes(c[d].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),s=[];return r.accessToken.forEach(c=>{if(!this.accessTokenKeyMatchesFilter(c,e,!0))return;const d=this.getAccessTokenCredential(c,n);d&&this.credentialMatchesFilter(d,e)&&s.push(d)}),s}getRefreshToken(e,n,r,s,c){this.commonLogger.trace("CacheManager - getRefreshToken called");const d=n?Gy:void 0,f={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:vr.REFRESH_TOKEN,clientId:this.clientId,familyId:d},g=s&&s.refreshToken||this.getTokenKeys().refreshToken,y=[];g.forEach(x=>{if(this.refreshTokenKeyMatchesFilter(x,f)){const b=this.getRefreshTokenCredential(x,r);b&&this.credentialMatchesFilter(b,f)&&y.push(b)}});const v=y.length;return v<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(v>1&&c&&r&&c.addFields({multiMatchedRT:v},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),y[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),s=Object.keys(r).map(d=>r[d]),c=s.length;if(c<1)return null;if(c>1)throw De(Z_);return s[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===Gy)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!!(e&&typeof e=="string"&&n?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const s=iD(this.staticAuthorityOptions,this.commonLogger);if(s.includes(n)&&s.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==vr.ACCESS_TOKEN&&e.credentialType!==vr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:er.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(tE)!==-1}isAuthorityMetadata(e){return e.indexOf(qy.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${qy.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class aD extends Jb{async setAccount(){throw De(pt)}getAccount(){throw De(pt)}async setIdTokenCredential(){throw De(pt)}getIdTokenCredential(){throw De(pt)}async setAccessTokenCredential(){throw De(pt)}getAccessTokenCredential(){throw De(pt)}async setRefreshTokenCredential(){throw De(pt)}getRefreshTokenCredential(){throw De(pt)}setAppMetadata(){throw De(pt)}getAppMetadata(){throw De(pt)}setServerTelemetry(){throw De(pt)}getServerTelemetry(){throw De(pt)}setAuthorityMetadata(){throw De(pt)}getAuthorityMetadata(){throw De(pt)}getAuthorityMetadataKeys(){throw De(pt)}setThrottlingCache(){throw De(pt)}getThrottlingCache(){throw De(pt)}removeItem(){throw De(pt)}getKeys(){throw De(pt)}getAccountKeys(){throw De(pt)}getTokenKeys(){throw De(pt)}generateCredentialKey(){throw De(pt)}generateAccountKey(){throw De(pt)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const vo={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-09-24 */const re={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},cD={InProgress:1};/*! @azure/msal-common v15.13.0 2025-09-24 */class dS{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class _k{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:cD.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new dS}}startPerformanceMeasurement(){return new dS}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-09-24 */const kk={tokenRenewalOffsetSeconds:G_,preventCorsPreflight:!1},lD={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:rn.Info,correlationId:Re.EMPTY_STRING},uD={claimsBasedCachingEnabled:!1},dD={async sendGetRequestAsync(){throw De(pt)},async sendPostRequestAsync(){throw De(pt)}},hD={sku:Re.SKU,version:lE,cpu:Re.EMPTY_STRING,os:Re.EMPTY_STRING},fD={clientSecret:Re.EMPTY_STRING,clientAssertion:void 0},mD={azureCloudInstance:uE.None,tenant:`${Re.DEFAULT_COMMON_TENANT}`},gD={application:{appName:"",appVersion:""}};function pD({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:s,networkInterface:c,cryptoInterface:d,clientCredentials:f,libraryInfo:g,telemetry:y,serverTelemetryManager:v,persistencePlugin:x,serializableCache:b}){const A={...lD,...n};return{authOptions:yD(t),systemOptions:{...kk,...e},loggerOptions:A,cacheOptions:{...uD,...r},storageInterface:s||new aD(t.clientId,Vy,new Qa(A),new _k),networkInterface:c||dD,cryptoInterface:d||Vy,clientCredentials:f||fD,libraryInfo:{...hD,...g},telemetry:{...gD,...y},serverTelemetryManager:v||null,persistencePlugin:x||null,serializableCache:b||null}}function yD(t){return{clientCapabilities:[],azureCloudOptions:mD,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}function Ik(t){return t.authOptions.authority.options.protocolMode===vo.OIDC}/*! @azure/msal-common v15.13.0 2025-09-24 */const rs={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-09-24 */function Xy(t,e){if(!t)throw De(q_);try{const n=e(t);return JSON.parse(n)}catch{throw De(nE)}}function kh(t){if(!t)throw De(nE);const e=t.split(rg.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Re.EMPTY_STRING:e[1]}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Lu="client_id",Rk="redirect_uri",vD="response_type",CD="response_mode",wD="grant_type",bD="claims",xD="scope",ED="refresh_token",AD="state",TD="nonce",SD="prompt",_D="code",kD="code_challenge",ID="code_challenge_method",RD="code_verifier",ND="client-request-id",OD="x-client-SKU",MD="x-client-VER",PD="x-client-OS",DD="x-client-CPU",jD="x-client-current-telemetry",LD="x-client-last-telemetry",UD="x-ms-lib-capability",HD="x-app-name",BD="x-app-ver",zD="post_logout_redirect_uri",FD="id_token_hint",KD="client_secret",GD="client_assertion",qD="client_assertion_type",Nk="token_type",Ok="req_cnf",hS="return_spa_code",$D="nativebroker",VD="logout_hint",YD="sid",QD="login_hint",WD="domain_hint",XD="x-client-xtra-sku",Jy="brk_client_id",Zy="brk_redirect_uri",Zb="instance_aware",JD="ear_jwk",ZD="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-09-24 */function Fv(t,e,n){if(!e)return;const r=t.get(Lu);r&&t.has(Jy)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(Rk)},e)}function CE(t,e){t.set(vD,e)}function ej(t,e){t.set(CD,e||j2.QUERY)}function tj(t){t.set($D,"1")}function wE(t,e,n=!0,r=Jh){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const s=n?[...e||[],...r]:e||[],c=new er(s);t.set(xD,c.printScopes())}function bE(t,e){t.set(Lu,e)}function xE(t,e){t.set(Rk,e)}function nj(t,e){t.set(zD,e)}function rj(t,e){t.set(FD,e)}function oj(t,e){t.set(WD,e)}function iy(t,e){t.set(QD,e)}function ev(t,e){t.set(Zr.CCS_HEADER,`UPN:${e}`)}function qm(t,e){t.set(Zr.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function fS(t,e){t.set(YD,e)}function EE(t,e,n){const r=uj(e,n);try{JSON.parse(r)}catch{throw on(dE)}t.set(bD,r)}function AE(t,e){t.set(ND,e)}function TE(t,e){t.set(OD,e.sku),t.set(MD,e.version),e.os&&t.set(PD,e.os),e.cpu&&t.set(DD,e.cpu)}function SE(t,e){e?.appName&&t.set(HD,e.appName),e?.appVersion&&t.set(BD,e.appVersion)}function ij(t,e){t.set(SD,e)}function Mk(t,e){e&&t.set(AD,e)}function sj(t,e){t.set(TD,e)}function Pk(t,e,n){if(e&&n)t.set(kD,e),t.set(ID,n);else throw on(hE)}function aj(t,e){t.set(_D,e)}function cj(t,e){t.set(ED,e)}function lj(t,e){t.set(RD,e)}function Dk(t,e){t.set(KD,e)}function jk(t,e){e&&t.set(GD,e)}function Lk(t,e){e&&t.set(qD,e)}function Uk(t,e){t.set(wD,e)}function _E(t){t.set(L2,"1")}function Hk(t){t.has(Zb)||t.set(Zb,"true")}function bl(t,e){Object.entries(e).forEach(([n,r])=>{!t.has(n)&&r&&t.set(n,r)})}function uj(t,e){let n;if(!t)n={};else try{n=JSON.parse(t)}catch{throw on(dE)}return e&&e.length>0&&(n.hasOwnProperty(ry.ACCESS_TOKEN)||(n[ry.ACCESS_TOKEN]={}),n[ry.ACCESS_TOKEN][ry.XMS_CC]={values:e}),JSON.stringify(n)}function kE(t,e){e&&(t.set(Nk,$t.POP),t.set(Ok,e))}function Bk(t,e){e&&(t.set(Nk,$t.SSH),t.set(Ok,e))}function zk(t,e){t.set(jD,e.generateCurrentRequestHeaderValue()),t.set(LD,e.generateLastRequestHeaderValue())}function Fk(t){t.set(UD,Gm.X_MS_LIB_CAPABILITY_VALUE)}function dj(t,e){t.set(VD,e)}function Kv(t,e,n){t.has(Jy)||t.set(Jy,e),t.has(Zy)||t.set(Zy,n)}function hj(t,e){t.set(JD,encodeURIComponent(e)),t.set(ZD,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function fj(t,e){Object.entries(e).forEach(([n,r])=>{r&&t.set(n,r)})}/*! @azure/msal-common v15.13.0 2025-09-24 */const Zi={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-09-24 */function mj(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-09-24 */function gj(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-09-24 */function pj(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-09-24 */const Bo=(t,e,n,r,s)=>(...c)=>{n.trace(`Executing function ${e}`);const d=r?.startMeasurement(e,s);if(s){const f=e+"CallCount";r?.incrementFields({[f]:1},s)}try{const f=t(...c);return d?.end({success:!0}),n.trace(`Returning result from ${e}`),f}catch(f){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(f))}catch{n.trace("Unable to print error message.")}throw d?.end({success:!1},f),f}},ke=(t,e,n,r,s)=>(...c)=>{n.trace(`Executing function ${e}`);const d=r?.startMeasurement(e,s);if(s){const f=e+"CallCount";r?.incrementFields({[f]:1},s)}return r?.setPreQueueTime(e,s),t(...c).then(f=>(n.trace(`Returning result from ${e}`),d?.end({success:!0}),f)).catch(f=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(f))}catch{n.trace("Unable to print error message.")}throw d?.end({success:!1},f),f})};/*! @azure/msal-common v15.13.0 2025-09-24 */class Gv{constructor(e,n,r,s){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=s}async detectRegion(e,n){this.performanceClient?.addQueueMeasurement(re.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=ph.ENVIRONMENT_VARIABLE;else{const s=Gv.IMDS_OPTIONS;try{const c=await ke(this.getRegionFromIMDS.bind(this),re.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Re.IMDS_VERSION,s);if(c.status===vl.SUCCESS&&(r=c.body,n.region_source=ph.IMDS),c.status===vl.BAD_REQUEST){const d=await ke(this.getCurrentVersion.bind(this),re.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(s);if(!d)return n.region_source=ph.FAILED_AUTO_DETECTION,null;const f=await ke(this.getRegionFromIMDS.bind(this),re.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(d,s);f.status===vl.SUCCESS&&(r=f.body,n.region_source=ph.IMDS)}}catch{return n.region_source=ph.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=ph.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){return this.performanceClient?.addQueueMeasurement(re.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Re.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,Re.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(re.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const n=await this.networkInterface.sendGetRequestAsync(`${Re.IMDS_ENDPOINT}?format=json`,e);return n.status===vl.BAD_REQUEST&&n.body&&n.body["newest-versions"]&&n.body["newest-versions"].length>0?n.body["newest-versions"][0]:null}catch{return null}}}Gv.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-09-24 */function wo(){return Math.round(new Date().getTime()/1e3)}function mS(t){return t.getTime()/1e3}function Ih(t){return t?new Date(Number(t)*1e3):new Date}function tv(t,e){const n=Number(t)||0;return wo()+e>n}function yj(t,e){const n=Number(t)+e*24*60*60*1e3;return Date.now()>n}function vj(t){return Number(t)>wo()}/*! @azure/msal-common v15.13.0 2025-09-24 */function qv(t,e,n,r,s){return{credentialType:vr.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:s,lastUpdatedAt:Date.now().toString()}}function $v(t,e,n,r,s,c,d,f,g,y,v,x,b,A,I){const _={homeAccountId:t,credentialType:vr.ACCESS_TOKEN,secret:n,cachedAt:wo().toString(),expiresOn:d.toString(),extendedExpiresOn:f.toString(),environment:e,clientId:r,realm:s,target:c,tokenType:v||$t.BEARER,lastUpdatedAt:Date.now().toString()};if(x&&(_.userAssertionHash=x),y&&(_.refreshOn=y.toString()),A&&(_.requestedClaims=A,_.requestedClaimsHash=I),_.tokenType?.toLowerCase()!==$t.BEARER.toLowerCase())switch(_.credentialType=vr.ACCESS_TOKEN_WITH_AUTH_SCHEME,_.tokenType){case $t.POP:const N=Zh(n,g);if(!N?.cnf?.kid)throw De(ok);_.keyId=N.cnf.kid;break;case $t.SSH:_.keyId=b}return _}function Kk(t,e,n,r,s,c,d){const f={credentialType:vr.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return c&&(f.userAssertionHash=c),s&&(f.familyId=s),d&&(f.expiresOn=d.toString()),f}function IE(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function gS(t){return t?IE(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===vr.ACCESS_TOKEN||t.credentialType===vr.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Cj(t){return t?IE(t)&&t.hasOwnProperty("realm")&&t.credentialType===vr.ID_TOKEN:!1}function pS(t){return t?IE(t)&&t.credentialType===vr.REFRESH_TOKEN:!1}function wj(t,e){const n=t.indexOf(yr.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function bj(t,e){let n=!1;t&&(n=t.indexOf(Gm.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function xj({environment:t,clientId:e}){return[tE,t,e].join(rg.CACHE_KEY_SEPARATOR).toLowerCase()}function Ej(t,e){return e?t.indexOf(tE)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function Aj(t,e){return e?t.indexOf(qy.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function yS(){return wo()+qy.REFRESH_TIME_SECONDS}function sy(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function lb(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function vS(t){return t.expiresAt<=wo()}/*! @azure/msal-common v15.13.0 2025-09-24 */class Lr{constructor(e,n,r,s,c,d,f,g){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=s,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=c,this.performanceClient=f,this.correlationId=d,this.managedIdentity=g||!1,this.regionDiscovery=new Gv(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Re.CIAM_AUTH_URL))return Zi.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case Re.ADFS:return Zi.Adfs;case Re.DSTS:return Zi.Dsts}return Zi.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new jt(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw De(qa)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw De(qa)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw De(qa)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw De(ak);return this.replacePath(this.metadata.end_session_endpoint)}else throw De(qa)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw De(qa)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw De(qa)}canReplaceTenant(e){return e.PathSegments.length===1&&!Lr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Zi.Default&&this.protocolMode!==vo.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const s=new jt(this.metadata.canonical_authority).getUrlComponents(),c=s.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((f,g)=>{let y=c[g];if(g===0&&this.canReplaceTenant(s)){const v=new jt(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];y!==v&&(this.logger.verbose(`Replacing tenant domain name ${y} with id ${v}`),y=v)}f!==y&&(n=n.replace(`/${y}/`,`/${f}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Zi.Adfs||this.protocolMode===vo.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(re.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await ke(this.updateCloudDiscoveryMetadata.bind(this),re.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await ke(this.updateEndpointMetadata.bind(this),re.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:yS(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Mo.CACHE&&r?.source!==Mo.CACHE&&(e.expiresAt=yS(),e.canonical_authority=this.canonicalAuthority);const s=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(s,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(re.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Mo.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&n.metadata){const s=await ke(this.updateMetadataWithRegionalInformation.bind(this),re.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);sy(e,s,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await ke(this.getEndpointMetadataFromNetwork.bind(this),re.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await ke(this.updateMetadataWithRegionalInformation.bind(this),re.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),sy(e,r,!0),Mo.NETWORK;throw De(Y_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),sy(e,n,!1),{source:Mo.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const s=this.getEndpointMetadataFromHardcodedValues();if(s)return sy(e,s,!1),{source:Mo.HARDCODED_VALUES,metadata:s};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=vS(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Mo.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new jt(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw on(gk)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(re.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const r=await this.networkInterface.sendGetRequestAsync(n,e);return mj(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in lS?lS[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(re.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(n){if(n!==Re.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ab.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,Lr.replaceWithRegionalInformation(e,n);const r=await ke(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),re.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=ab.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,Lr.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=ab.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(re.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await ke(this.getCloudDiscoveryMetadataFromNetwork.bind(this),re.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return lb(e,r,!0),Mo.NETWORK;throw on(pk)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Re.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Re.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Re.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),lb(e,n,!1),Mo.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const s=sD(this.hostnameAndPort);if(s)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),lb(e,s,!1),Mo.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=vS(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Mo.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Zi.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=Qy(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),on(fE)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(re.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${Re.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const s=await this.networkInterface.sendGetRequestAsync(e,n);let c,d;if(gj(s.body))c=s.body,d=c.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${c.tenant_discovery_endpoint}`);else if(pj(s.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${s.status}`),c=s.body,c.error===Re.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${c.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${c.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),d=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Qy(d,this.hostnameAndPort)}catch(s){if(s instanceof en)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${s.errorCode}
Error Description: ${s.errorMessage}`);else{const c=s;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${c.name}
Error Description: ${c.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Lr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&jt.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==uE.None){const s=n.tenant?n.tenant:Re.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${s}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Re.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw De(qa)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Sk.has(e)}static isPublicCloudAuthority(e){return Re.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const s=new jt(e);s.validateAsUri();const c=s.getUrlComponents();let d=`${n}.${c.HostNameAndPort}`;this.isPublicCloudAuthority(c.HostNameAndPort)&&(d=`${n}.${Re.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const f=jt.constructAuthorityUriFromObject({...s.getUrlComponents(),HostNameAndPort:d}).urlString;return r?`${f}?${r}`:f}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Lr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Lr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Lr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const s=new jt(e).getUrlComponents();if(s.PathSegments.length===0&&s.HostNameAndPort.endsWith(Re.CIAM_AUTH_URL)){const c=s.HostNameAndPort.split(".")[0];n=`${n}${c}${Re.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}Lr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Cl.COMMON,Cl.CONSUMERS,Cl.ORGANIZATIONS]);function Tj(t){const r=new jt(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Cl.COMMON:case Cl.ORGANIZATIONS:case Cl.CONSUMERS:return;default:return r}}function Gk(t){return t.endsWith(Re.FORWARD_SLASH)?t:`${t}${Re.FORWARD_SLASH}`}function Sj(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw on(fE)}return{canonicalAuthority:t.authority?Gk(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v15.13.0 2025-09-24 */async function qk(t,e,n,r,s,c,d){d?.addQueueMeasurement(re.AuthorityFactoryCreateDiscoveredInstance,c);const f=Lr.transformCIAMAuthority(Gk(t)),g=new Lr(f,e,n,r,s,c,d);try{return await ke(g.resolveEndpointsAsync.bind(g),re.AuthorityResolveEndpointsAsync,s,d,c)(),g}catch{throw De(qa)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Ju extends en{constructor(e,n,r,s,c){super(e,n,r),this.name="ServerError",this.errorNo=s,this.status=c,Object.setPrototypeOf(this,Ju.prototype)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function Vv(t,e,n){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:n,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Gs{static generateThrottlingStorageKey(e){return`${Gm.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n,r){const s=Gs.generateThrottlingStorageKey(n),c=e.getThrottlingCache(s);if(c){if(c.throttleTime<Date.now()){e.removeItem(s,r);return}throw new Ju(c.errorCodes?.join(" ")||Re.EMPTY_STRING,c.errorMessage,c.subError)}}static postProcess(e,n,r,s){if(Gs.checkResponseStatus(r)||Gs.checkResponseForRetryAfter(r)){const c={throttleTime:Gs.calculateThrottleTime(parseInt(r.headers[Zr.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Gs.generateThrottlingStorageKey(n),c,s)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Zr.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||Gm.DEFAULT_THROTTLE_TIME_SECONDS),r+Gm.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,s){const c=Vv(n,r,s),d=this.generateThrottlingStorageKey(c);e.removeItem(d,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Yv extends en{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Yv.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function Um(t,e,n,r){return t.errorMessage=`${t.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new Yv(t,e,n)}/*! @azure/msal-common v15.13.0 2025-09-24 */class RE{constructor(e,n){this.config=pD(e),this.logger=new Qa(this.config.loggerOptions,ck,lE),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Zr.CONTENT_TYPE]=Re.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case rs.HOME_ACCOUNT_ID:try{const r=kh(e.credential);n[Zr.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case rs.UPN:n[Zr.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,s,c,d){d&&this.performanceClient?.addQueueMeasurement(d,c);const f=await this.sendPostRequest(s,e,{body:n,headers:r},c);return this.config.serverTelemetryManager&&f.status<500&&f.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),f}async sendPostRequest(e,n,r,s){Gs.preProcess(this.cacheManager,e,s);let c;try{c=await ke(this.networkClient.sendPostRequestAsync.bind(this.networkClient),re.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,s)(n,r);const d=c.headers||{};this.performanceClient?.addFields({refreshTokenSize:c.body.refresh_token?.length||0,httpVerToken:d[Zr.X_MS_HTTP_VERSION]||"",requestId:d[Zr.X_MS_REQUEST_ID]||""},s)}catch(d){if(d instanceof Yv){const f=d.responseHeaders;throw f&&this.performanceClient?.addFields({httpVerToken:f[Zr.X_MS_HTTP_VERSION]||"",requestId:f[Zr.X_MS_REQUEST_ID]||"",contentTypeHeader:f[Zr.CONTENT_TYPE]||void 0,contentLengthHeader:f[Zr.CONTENT_LENGTH]||void 0,httpStatus:d.httpStatus},s),d.error}throw d instanceof en?d:De(V_)}return Gs.postProcess(this.cacheManager,e,c,s),c}async updateAuthority(e,n){this.performanceClient?.addQueueMeasurement(re.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,s=await qk(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=s}createTokenQueryParameters(e){const n=new Map;return e.embeddedClientId&&Kv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&bl(n,e.tokenQueryParameters),AE(n,e.correlationId),Fv(n,e.correlationId,this.performanceClient),og(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */function $k(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v15.13.0 2025-09-24 */class ss{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,n,r){const s=new ss;n.authorityType===Zi.Adfs?s.authorityType=oy.ADFS_ACCOUNT_TYPE:n.protocolMode===vo.OIDC?s.authorityType=oy.GENERIC_ACCOUNT_TYPE:s.authorityType=oy.MSSTS_ACCOUNT_TYPE;let c;e.clientInfo&&r&&(c=Xy(e.clientInfo,r),c.xms_tdbr&&(s.dataBoundary=c.xms_tdbr==="EU"?"EU":"None")),s.clientInfo=e.clientInfo,s.homeAccountId=e.homeAccountId,s.nativeAccountId=e.nativeAccountId;const d=e.environment||n&&n.getPreferredCache();if(!d)throw De(sE);s.environment=d,s.realm=c?.utid||$k(e.idTokenClaims)||"",s.localAccountId=c?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const f=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,g=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(s.username=f||g||"",s.loginHint=e.idTokenClaims?.login_hint,s.name=e.idTokenClaims?.name||"",s.cloudGraphHostName=e.cloudGraphHostName,s.msGraphHost=e.msGraphHost,e.tenantProfiles)s.tenantProfiles=e.tenantProfiles;else{const y=gE(e.homeAccountId,s.localAccountId,s.realm,e.idTokenClaims);s.tenantProfiles=[y]}return s}static createFromAccountInfo(e,n,r){const s=new ss;return s.authorityType=e.authorityType||oy.GENERIC_ACCOUNT_TYPE,s.homeAccountId=e.homeAccountId,s.localAccountId=e.localAccountId,s.nativeAccountId=e.nativeAccountId,s.realm=e.tenantId,s.environment=e.environment,s.username=e.username,s.name=e.name,s.loginHint=e.loginHint,s.cloudGraphHostName=n,s.msGraphHost=r,s.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),s.dataBoundary=e.dataBoundary,s}static generateHomeAccountId(e,n,r,s,c){if(!(n===Zi.Adfs||n===Zi.Dsts)){if(e)try{const d=Xy(e,s.base64Decode);if(d.uid&&d.utid)return`${d.uid}.${d.utid}`}catch{}r.warning("No client info in response")}return c?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let s=!0;if(r){const c=e.idTokenClaims||{},d=n.idTokenClaims||{};s=c.iat===d.iat&&c.nonce===d.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.loginHint===n.loginHint&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&s}}/*! @azure/msal-common v15.13.0 2025-09-24 */const nv="no_tokens_found",Vk="native_account_unavailable",NE="refresh_token_expired",OE="ux_not_allowed",_j="interaction_required",kj="consent_required",Ij="login_required",Qv="bad_token";/*! @azure/msal-common v15.13.0 2025-09-24 */const CS=[_j,kj,Ij,Qv,OE],Rj=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Nj={[nv]:"No refresh token found in the cache. Please sign-in.",[Vk]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[NE]:"Refresh token has expired.",[Qv]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[OE]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Co extends en{constructor(e,n,r,s,c,d,f,g){super(e,n,r),Object.setPrototypeOf(this,Co.prototype),this.timestamp=s||Re.EMPTY_STRING,this.traceId=c||Re.EMPTY_STRING,this.correlationId=d||Re.EMPTY_STRING,this.claims=f||Re.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=g}}function Yk(t,e,n){const r=!!t&&CS.indexOf(t)>-1,s=!!n&&Rj.indexOf(n)>-1,c=!!e&&CS.some(d=>e.indexOf(d)>-1);return r||c||s}function rv(t){return new Co(t,Nj[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class ef{static setRequestState(e,n,r){const s=ef.generateLibraryState(e,r);return n?`${s}${Re.RESOURCE_DELIM}${n}`:s}static generateLibraryState(e,n){if(!e)throw De(Wb);const r={id:e.createNewGuid()};n&&(r.meta=n);const s=JSON.stringify(r);return e.base64Encode(s)}static parseRequestState(e,n){if(!e)throw De(Wb);if(!n)throw De(Ph);try{const r=n.split(Re.RESOURCE_DELIM),s=r[0],c=r.length>1?r.slice(1).join(Re.RESOURCE_DELIM):Re.EMPTY_STRING,d=e.base64Decode(s),f=JSON.parse(d);return{userRequestState:c||Re.EMPTY_STRING,libraryState:f}}catch{throw De(Ph)}}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Oj={SW:"sw"};class Dh{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){this.performanceClient?.addQueueMeasurement(re.PopTokenGenerateCnf,e.correlationId);const r=await ke(this.generateKid.bind(this),re.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),s=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:s}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(re.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Oj.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,s){const{resourceRequestMethod:c,resourceRequestUri:d,shrClaims:f,shrNonce:g,shrOptions:y}=r,x=(d?new jt(d):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:wo(),m:c?.toUpperCase(),u:x?.HostNameAndPort,nonce:g||this.cryptoUtils.createNewGuid(),p:x?.AbsolutePath,q:x?.QueryString?[[],x.QueryString]:void 0,client_claims:f||void 0,...s},n,y,r.correlationId)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Mj{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-09-24 */class Uu{constructor(e,n,r,s,c,d,f){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=s,this.serializableCache=c,this.persistencePlugin=d,this.performanceClient=f}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||Re.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Re.NOT_AVAILABLE} - Description: ${e.error_description||Re.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Re.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Re.NOT_AVAILABLE}`,s=e.error_codes?.length?e.error_codes[0]:void 0,c=new Ju(e.error,r,e.suberror,s,e.status);if(n&&e.status&&e.status>=vl.SERVER_ERROR_RANGE_START&&e.status<=vl.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${c}`);return}else if(n&&e.status&&e.status>=vl.CLIENT_ERROR_RANGE_START&&e.status<=vl.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${c}`);return}throw Yk(e.error,e.error_description,e.suberror)?new Co(e.error,e.error_description,e.suberror,e.timestamp||Re.EMPTY_STRING,e.trace_id||Re.EMPTY_STRING,e.correlation_id||Re.EMPTY_STRING,e.claims||Re.EMPTY_STRING,s):c}}async handleServerTokenResponse(e,n,r,s,c,d,f,g,y){this.performanceClient?.addQueueMeasurement(re.HandleServerTokenResponse,e.correlation_id);let v;if(e.id_token){if(v=Zh(e.id_token||Re.EMPTY_STRING,this.cryptoObj.base64Decode),c&&c.nonce&&v.nonce!==c.nonce)throw De(X_);if(s.maxAge||s.maxAge===0){const I=v.auth_time;if(!I)throw De(oE);Ek(I,s.maxAge)}}this.homeAccountIdentifier=ss.generateHomeAccountId(e.client_info||Re.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,v);let x;c&&c.state&&(x=ef.parseRequestState(this.cryptoObj,c.state)),e.key_id=e.key_id||s.sshKid||void 0;const b=this.generateCacheRecord(e,n,r,s,v,d,c);let A;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),A=new Mj(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(A)),f&&!g&&b.account){const I=this.cacheStorage.generateAccountKey(b.account.getAccountInfo());if(!this.cacheStorage.getAccount(I,s.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Uu.generateAuthenticationResult(this.cryptoObj,n,b,!1,s,v,x,void 0,y)}await this.cacheStorage.saveCacheRecord(b,s.correlationId,s.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&A&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(A))}return Uu.generateAuthenticationResult(this.cryptoObj,n,b,!1,s,v,x,e,y)}generateCacheRecord(e,n,r,s,c,d,f){const g=n.getPreferredCache();if(!g)throw De(sE);const y=$k(c);let v,x;e.id_token&&c&&(v=qv(this.homeAccountIdentifier,g,e.id_token,this.clientId,y||""),x=ME(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,s.correlationId,c,e.client_info,g,y,f,void 0,this.logger));let b=null;if(e.access_token){const _=e.scope?er.fromString(e.scope):new er(s.scopes||[]),N=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,M=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,U=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,O=r+N,L=O+M,H=U&&U>0?r+U:void 0;b=$v(this.homeAccountIdentifier,g,e.access_token,this.clientId,y||n.tenant||"",_.printScopes(),O,L,this.cryptoObj.base64Decode,H,e.token_type,d,e.key_id,s.claims,s.requestedClaimsHash)}let A=null;if(e.refresh_token){let _;if(e.refresh_token_expires_in){const N=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;_=r+N}A=Kk(this.homeAccountIdentifier,g,e.refresh_token,this.clientId,e.foci,d,_)}let I=null;return e.foci&&(I={clientId:this.clientId,environment:g,familyId:e.foci}),{account:x,idToken:v,accessToken:b,refreshToken:A,appMetadata:I}}static async generateAuthenticationResult(e,n,r,s,c,d,f,g,y){let v=Re.EMPTY_STRING,x=[],b=null,A,I,_=Re.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===$t.POP&&!c.popKid){const O=new Dh(e),{secret:L,keyId:H}=r.accessToken;if(!H)throw De(aE);v=await O.signPopToken(L,H,c)}else v=r.accessToken.secret;x=er.fromString(r.accessToken.target).asArray(),b=Ih(r.accessToken.expiresOn),A=Ih(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(I=Ih(r.accessToken.refreshOn))}r.appMetadata&&(_=r.appMetadata.familyId===Gy?Gy:"");const N=d?.oid||d?.sub||"",M=d?.tid||"";g?.spa_accountid&&r.account&&(r.account.nativeAccountId=g?.spa_accountid);const U=r.account?pE(r.account.getAccountInfo(),void 0,d,r.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:N,tenantId:M,scopes:x,account:U,idToken:r?.idToken?.secret||"",idTokenClaims:d||{},accessToken:v,fromCache:s,expiresOn:b,extExpiresOn:A,refreshOn:I,correlationId:c.correlationId,requestId:y||Re.EMPTY_STRING,familyId:_,tokenType:r.accessToken?.tokenType||Re.EMPTY_STRING,state:f?f.userRequestState:Re.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||Re.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||Re.EMPTY_STRING,code:g?.spa_code,fromNativeBroker:!1}}}function ME(t,e,n,r,s,c,d,f,g,y,v,x){x?.verbose("setCachedAccount called");const A=t.getAccountKeys().find(U=>U.startsWith(n));let I=null;A&&(I=t.getAccount(A,s));const _=I||ss.createAccount({homeAccountId:n,idTokenClaims:c,clientInfo:d,environment:f,cloudGraphHostName:y?.cloud_graph_host_name,msGraphHost:y?.msgraph_host,nativeAccountId:v},e,r),N=_.tenantProfiles||[],M=g||_.realm;if(M&&!N.find(U=>U.tenantId===M)){const U=gE(n,_.localAccountId,M,c);N.push(U)}return _.tenantProfiles=N,_}/*! @azure/msal-common v15.13.0 2025-09-24 */async function Qk(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v15.13.0 2025-09-24 */class Wk extends RE{constructor(e,n){super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,n){if(this.performanceClient?.addQueueMeasurement(re.AuthClientAcquireToken,e.correlationId),!e.code)throw De(ek);const r=wo(),s=await ke(this.executeTokenRequest.bind(this),re.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),c=s.headers?.[Zr.X_MS_REQUEST_ID],d=new Uu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return d.validateTokenResponse(s.body),ke(d.handleServerTokenResponse.bind(d),re.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(s.body,this.authority,r,e,n,void 0,void 0,void 0,c)}getLogoutUri(e){if(!e)throw on(mk);const n=this.createLogoutUrlQueryString(e);return jt.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){this.performanceClient?.addQueueMeasurement(re.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),s=jt.appendQueryString(e.tokenEndpoint,r),c=await ke(this.createTokenRequestBody.bind(this),re.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let d;if(n.clientInfo)try{const y=Xy(n.clientInfo,this.cryptoUtils.base64Decode);d={credential:`${y.uid}${rg.CLIENT_INFO_SEPARATOR}${y.utid}`,type:rs.HOME_ACCOUNT_ID}}catch(y){this.logger.verbose("Could not parse client info for CCS Header: "+y)}const f=this.createTokenRequestHeaders(d||n.ccsCredential),g=Vv(this.config.authOptions.clientId,n);return ke(this.executePostToTokenEndpoint.bind(this),re.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(s,c,f,g,n.correlationId,re.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(re.AuthClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(bE(n,e.embeddedClientId||e.tokenBodyParameters?.[Lu]||this.config.authOptions.clientId),this.includeRedirectUri)xE(n,e.redirectUri);else if(!e.redirectUri)throw on(lk);if(wE(n,e.scopes,!0,this.oidcDefaultScopes),aj(n,e.code),TE(n,this.config.libraryInfo),SE(n,this.config.telemetry.application),Fk(n),this.serverTelemetryManager&&!Ik(this.config)&&zk(n,this.serverTelemetryManager),e.codeVerifier&&lj(n,e.codeVerifier),this.config.clientCredentials.clientSecret&&Dk(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;jk(n,await Qk(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Lk(n,s.assertionType)}if(Uk(n,K_.AUTHORIZATION_CODE_GRANT),_E(n),e.authenticationScheme===$t.POP){const s=new Dh(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await ke(s.generateCnf.bind(s),re.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,kE(n,c)}else if(e.authenticationScheme===$t.SSH)if(e.sshJwk)Bk(n,e.sshJwk);else throw on(zv);(!Ho.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&EE(n,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const s=Xy(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${rg.CLIENT_INFO_SEPARATOR}${s.utid}`,type:rs.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case rs.HOME_ACCOUNT_ID:try{const s=kh(r.credential);qm(n,s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case rs.UPN:ev(n,r.credential);break}return e.embeddedClientId&&Kv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&bl(n,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[hS])&&bl(n,{[hS]:"1"}),Fv(n,e.correlationId,this.performanceClient),og(n)}createLogoutUrlQueryString(e){const n=new Map;return e.postLogoutRedirectUri&&nj(n,e.postLogoutRedirectUri),e.correlationId&&AE(n,e.correlationId),e.idTokenHint&&rj(n,e.idTokenHint),e.state&&Mk(n,e.state),e.logoutHint&&dj(n,e.logoutHint),e.extraQueryParameters&&bl(n,e.extraQueryParameters),this.config.authOptions.instanceAware&&Hk(n),og(n,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Pj=300;class Dj extends RE{constructor(e,n){super(e,n)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(re.RefreshTokenClientAcquireToken,e.correlationId);const n=wo(),r=await ke(this.executeTokenRequest.bind(this),re.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),s=r.headers?.[Zr.X_MS_REQUEST_ID],c=new Uu(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return c.validateTokenResponse(r.body),ke(c.handleServerTokenResponse.bind(c),re.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,s)}async acquireTokenByRefreshToken(e){if(!e)throw on(fk);if(this.performanceClient?.addQueueMeasurement(re.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw De(iE);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ke(this.acquireTokenWithCachedRefreshToken.bind(this),re.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){const s=r instanceof Co&&r.errorCode===nv,c=r instanceof Ju&&r.errorCode===rS.INVALID_GRANT_ERROR&&r.subError===rS.CLIENT_MISMATCH_ERROR;if(s||c)return ke(this.acquireTokenWithCachedRefreshToken.bind(this),re.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return ke(this.acquireTokenWithCachedRefreshToken.bind(this),re.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){this.performanceClient?.addQueueMeasurement(re.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Bo(this.cacheManager.getRefreshToken.bind(this.cacheManager),re.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,this.performanceClient);if(!r)throw rv(nv);if(r.expiresOn&&tv(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||Pj))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),rv(NE);const s={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||$t.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:rs.HOME_ACCOUNT_ID}};try{return await ke(this.acquireToken.bind(this),re.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(s)}catch(c){if(c instanceof Co&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===Qv)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const d=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(d,e.correlationId)}throw c}}async executeTokenRequest(e,n){this.performanceClient?.addQueueMeasurement(re.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),s=jt.appendQueryString(n.tokenEndpoint,r),c=await ke(this.createTokenRequestBody.bind(this),re.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),d=this.createTokenRequestHeaders(e.ccsCredential),f=Vv(this.config.authOptions.clientId,e);return ke(this.executePostToTokenEndpoint.bind(this),re.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(s,c,d,f,e.correlationId,re.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(re.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=new Map;if(bE(n,e.embeddedClientId||e.tokenBodyParameters?.[Lu]||this.config.authOptions.clientId),e.redirectUri&&xE(n,e.redirectUri),wE(n,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Uk(n,K_.REFRESH_TOKEN_GRANT),_E(n),TE(n,this.config.libraryInfo),SE(n,this.config.telemetry.application),Fk(n),this.serverTelemetryManager&&!Ik(this.config)&&zk(n,this.serverTelemetryManager),cj(n,e.refreshToken),this.config.clientCredentials.clientSecret&&Dk(n,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;jk(n,await Qk(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Lk(n,r.assertionType)}if(e.authenticationScheme===$t.POP){const r=new Dh(this.cryptoUtils,this.performanceClient);let s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(await ke(r.generateCnf.bind(r),re.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,kE(n,s)}else if(e.authenticationScheme===$t.SSH)if(e.sshJwk)Bk(n,e.sshJwk);else throw on(zv);if((!Ho.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&EE(n,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case rs.HOME_ACCOUNT_ID:try{const r=kh(e.ccsCredential.credential);qm(n,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case rs.UPN:ev(n,e.ccsCredential.credential);break}return e.embeddedClientId&&Kv(n,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&bl(n,e.tokenBodyParameters),Fv(n,e.correlationId,this.performanceClient),og(n)}}/*! @azure/msal-common v15.13.0 2025-09-24 */class jj extends RE{constructor(e,n){super(e,n)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(re.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Ru.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ho.isEmptyObj(e.claims))throw this.setCacheOutcome(Ru.FORCE_REFRESH_OR_CLAIMS,e.correlationId),De(wl);if(!e.account)throw De(iE);const r=e.account.tenantId||Tj(e.authority),s=this.cacheManager.getTokenKeys(),c=this.cacheManager.getAccessToken(e.account,e,s,r);if(c){if(vj(c.cachedAt)||tv(c.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ru.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),De(wl);c.refreshOn&&tv(c.refreshOn,0)&&(n=Ru.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ru.NO_CACHED_ACCESS_TOKEN,e.correlationId),De(wl);const d=e.authority||this.authority.getPreferredCache(),f={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:c,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,s,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(d)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ke(this.generateResultFromCacheRecord.bind(this),re.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(f,e),n]}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),e!==Ru.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){this.performanceClient?.addQueueMeasurement(re.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=Zh(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const s=r?.auth_time;if(!s)throw De(oE);Ek(s,n.maxAge)}return Uu.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Lj={sendGetRequestAsync:()=>Promise.reject(De(pt)),sendPostRequestAsync:()=>Promise.reject(De(pt))};/*! @azure/msal-common v15.13.0 2025-09-24 */function Uj(t,e,n,r){const s=e.correlationId,c=new Map;bE(c,e.embeddedClientId||e.extraQueryParameters?.[Lu]||t.clientId);const d=[...e.scopes||[],...e.extraScopesToConsent||[]];if(wE(c,d,!0,t.authority.options.OIDCOptions?.defaultScopes),xE(c,e.redirectUri),AE(c,s),ej(c,e.responseMode),_E(c),e.prompt&&(ij(c,e.prompt),r?.addFields({prompt:e.prompt},s)),e.domainHint&&(oj(c,e.domainHint),r?.addFields({domainHintFromRequest:!0},s)),e.prompt!==Cr.SELECT_ACCOUNT)if(e.sid&&e.prompt===Cr.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),fS(c,e.sid),r?.addFields({sidFromRequest:!0},s);else if(e.account){const f=zj(e.account);let g=Fj(e.account);if(g&&e.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),g=null),g){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),iy(c,g),r?.addFields({loginHintFromClaim:!0},s);try{const y=kh(e.account.homeAccountId);qm(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(f&&e.prompt===Cr.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),fS(c,f),r?.addFields({sidFromClaim:!0},s);try{const y=kh(e.account.homeAccountId);qm(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),iy(c,e.loginHint),ev(c,e.loginHint),r?.addFields({loginHintFromRequest:!0},s);else if(e.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),iy(c,e.account.username),r?.addFields({loginHintFromUpn:!0},s);try{const y=kh(e.account.homeAccountId);qm(c,y)}catch{n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),iy(c,e.loginHint),ev(c,e.loginHint),r?.addFields({loginHintFromRequest:!0},s));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&sj(c,e.nonce),e.state&&Mk(c,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&EE(c,e.claims,t.clientCapabilities),e.embeddedClientId&&Kv(c,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(Zb))&&Hk(c),c}function PE(t,e,n,r){const s=og(e,n,r);return jt.appendQueryString(t.authorizationEndpoint,s)}function Hj(t,e){if(Xk(t,e),!t.code)throw De(ik);return t}function Xk(t,e){if(!t.state||!e)throw t.state?De(Vb,"Cached State"):De(Vb,"Server State");let n,r;try{n=decodeURIComponent(t.state)}catch{throw De(Ph,t.state)}try{r=decodeURIComponent(e)}catch{throw De(Ph,t.state)}if(n!==r)throw De(W_);if(t.error||t.error_description||t.suberror){const s=Bj(t);throw Yk(t.error,t.error_description,t.suberror)?new Co(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",s):new Ju(t.error||"",t.error_description,t.suberror,s)}}function Bj(t){const e="code=",n=t.error_uri?.lastIndexOf(e);return n&&n>=0?t.error_uri?.substring(n+e.length):void 0}function zj(t){return t.idTokenClaims?.sid||null}function Fj(t){return t.loginHint||t.idTokenClaims?.login_hint||null}/*! @azure/msal-common v15.13.0 2025-09-24 */const wS=",",Jk="|";function Kj(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:s,extensionVersion:c}=t,d=new Map([[0,[n,r]],[2,[s,c]]]);let f=[];if(e?.length){if(f=e.split(wS),f.length<4)return e}else f=Array.from({length:4},()=>Jk);return d.forEach((g,y)=>{g.length===2&&g[0]?.length&&g[1]?.length&&Gj({skuArr:f,index:y,skuName:g[0],skuVersion:g[1]})}),f.join(wS)}function Gj(t){const{skuArr:e,index:n,skuName:r,skuVersion:s}=t;n>=e.length||(e[n]=[r,s].join(Jk))}class ig{constructor(e,n){this.cacheOutcome=Ru.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Re.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Re.EMPTY_STRING,this.telemetryCacheKey=yr.CACHE_KEY+rg.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${yr.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&n.push(`broker_error=${r}`);const s=n.join(yr.VALUE_SEPARATOR),c=this.getRegionDiscoveryFields(),d=[e,c].join(yr.VALUE_SEPARATOR);return[yr.SCHEMA_VERSION,d,s].join(yr.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=ig.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(yr.VALUE_SEPARATOR),s=e.errors.slice(0,n).join(yr.VALUE_SEPARATOR),c=e.errors.length,d=n<c?yr.OVERFLOW_TRUE:yr.OVERFLOW_FALSE,f=[c,d].join(yr.VALUE_SEPARATOR);return[yr.SCHEMA_VERSION,e.cacheHits,r,s,f].join(yr.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=yr.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof en?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(yr.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=ig.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const s={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,s=0;const c=e.errors.length;for(n=0;n<c;n++){const d=e.failedRequests[2*n]||Re.EMPTY_STRING,f=e.failedRequests[2*n+1]||Re.EMPTY_STRING,g=e.errors[n]||Re.EMPTY_STRING;if(s+=d.toString().length+f.toString().length+g.length+3,s<yr.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Re.EMPTY_STRING),e.push(this.regionSource||Re.EMPTY_STRING),e.push(this.regionOutcome||Re.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return Kj(e)}}/*! @azure/msal-common v15.13.0 2025-09-24 */const Zk="missing_kid_error",eI="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-09-24 */const qj={[Zk]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[eI]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class DE extends en{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,DE.prototype)}}function bS(t){return new DE(t,qj[t])}/*! @azure/msal-common v15.13.0 2025-09-24 */class jE{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw bS(Zk);if(!e.alg)throw bS(eI);const n=new jE({typ:e.typ||U2.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const LE="pkce_not_created",UE="ear_jwk_empty",tI="ear_jwe_empty",ex="crypto_nonexistent",Wv="empty_navigate_uri",nI="hash_empty_error",HE="no_state_in_hash",rI="hash_does_not_contain_known_properties",oI="unable_to_parse_state",iI="state_interaction_type_mismatch",sI="interaction_in_progress",aI="popup_window_error",cI="empty_window_error",sg="user_cancelled",$j="monitor_popup_timeout",lI="monitor_window_timeout",uI="redirect_in_iframe",dI="block_iframe_reload",hI="block_nested_popups",Vj="iframe_closed_prematurely",Xv="silent_logout_unsupported",fI="no_account_error",Yj="silent_prompt_value_error",mI="no_token_request_cache_error",gI="unable_to_parse_token_request_cache_error",Qj="auth_request_not_set_error",Wj="invalid_cache_type",Jv="non_browser_environment",Eh="database_not_open",ov="no_network_connectivity",pI="post_request_failed",yI="get_request_failed",tx="failed_to_parse_response",vI="unable_to_load_token",BE="crypto_key_not_found",CI="auth_code_required",wI="auth_code_or_nativeAccountId_required",bI="spa_code_and_nativeAccountId_present",zE="database_unavailable",xI="unable_to_acquire_token_from_native_platform",EI="native_handshake_timeout",AI="native_extension_not_installed",FE="native_connection_not_established",$m="uninitialized_public_client_application",TI="native_prompt_not_supported",SI="invalid_base64_string",_I="invalid_pop_token_request",kI="failed_to_build_headers",II="failed_to_parse_headers",Ry="failed_to_decrypt_ear_response",iv="timed_out";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Fa="For more visit: aka.ms/msaljs/browser-errors",Xj={[LE]:"The PKCE code challenge and verifier could not be generated.",[UE]:"No EAR encryption key provided. This is unexpected.",[tI]:"Server response does not contain ear_jwe property. This is unexpected.",[ex]:"The crypto object or function is not available.",[Wv]:"Navigation URI is empty. Please check stack trace for more info.",[nI]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Fa}`,[HE]:"Hash does not contain state. Please verify that the request originated from msal.",[rI]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Fa}`,[oI]:"Unable to parse state. Please verify that the request originated from msal.",[iI]:"Hash contains state but the interaction type does not match the caller.",[sI]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Fa}`,[aI]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[cI]:"window.open returned null or undefined window object.",[sg]:"User cancelled the flow.",[$j]:`Token acquisition in popup failed due to timeout.  ${Fa}`,[lI]:`Token acquisition in iframe failed due to timeout.  ${Fa}`,[uI]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[dI]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Fa}`,[hI]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Vj]:"The iframe being monitored was closed prematurely.",[Xv]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[fI]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Yj]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[mI]:"No token request found in cache.",[gI]:"The cached token request could not be parsed.",[Qj]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Wj]:"Invalid cache type",[Jv]:"Login and token requests are not supported in non-browser environments.",[Eh]:"Database is not open!",[ov]:"No network connectivity. Check your internet connection.",[pI]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[yI]:"Network request failed. Please check the network trace to determine root cause.",[tx]:"Failed to parse network response. Check network trace.",[vI]:"Error loading token to cache.",[BE]:"Cryptographic Key or Keypair not found in browser storage.",[CI]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[wI]:"An authorization code or nativeAccountId must be provided to this flow.",[bI]:"Request cannot contain both spa code and native account id.",[zE]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[xI]:`Unable to acquire token from native platform.  ${Fa}`,[EI]:"Timed out while attempting to establish connection to browser extension",[AI]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[FE]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Fa}`,[$m]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Fa}`,[TI]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[SI]:"Invalid base64 encoded string.",[_I]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[kI]:"Failed to build request headers object.",[II]:"Failed to parse response headers",[Ry]:"Failed to decrypt ear response",[iv]:"The request timed out."};class _g extends en{constructor(e,n){super(e,Xj[e],n),Object.setPrototypeOf(this,_g.prototype),this.name="BrowserAuthError"}}function Fe(t,e){return new _g(t,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const po={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},fi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Nm={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},tr={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},xS={GET:"GET",POST:"POST"},gl={SIGNIN:"signin",SIGNOUT:"signout"},Kn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},ay={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Zt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var et;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(et||(et={}));const kn={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},ES={scopes:Jh},RI="jwk",Jj={React:"@azure/msal-react"},nx="msal.db",Zj=1,eL=`${nx}.keys`,Jr={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},tL=[Jr.Default,Jr.Skip,Jr.RefreshTokenAndNetwork];/*! @azure/msal-browser v4.25.0 2025-10-09 */function cy(t){return encodeURIComponent(ag(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Sl(t){return NI(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ag(t){return NI(new TextEncoder().encode(t))}function NI(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */function is(t){return new TextDecoder().decode(xl(t))}function xl(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Fe(SI)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const nL="RSASSA-PKCS1-v1_5",tf="AES-GCM",OI="HKDF",KE="SHA-256",rL=2048,oL=new Uint8Array([1,0,1]),AS="0123456789abcdef",TS=new Uint32Array(1),GE="raw",MI="encrypt",qE="decrypt",iL="deriveKey",sL="crypto_subtle_undefined",$E={name:nL,hash:KE,modulusLength:rL,publicExponent:oL};function aL(t){if(!window)throw Fe(Jv);if(!window.crypto)throw Fe(ex);if(!t&&!window.crypto.subtle)throw Fe(ex,sL)}async function PI(t,e,n){e?.addQueueMeasurement(re.Sha256Digest,n);const s=new TextEncoder().encode(t);return window.crypto.subtle.digest(KE,s)}function cL(t){return window.crypto.getRandomValues(t)}function ub(){return window.crypto.getRandomValues(TS),TS[0]}function as(){const t=Date.now(),e=ub()*1024+(ub()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),s=e&2**30-1,c=ub();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|s>>>24,n[9]=s>>>16,n[10]=s>>>8,n[11]=s,n[12]=c>>>24,n[13]=c>>>16,n[14]=c>>>8,n[15]=c;let d="";for(let f=0;f<n.length;f++)d+=AS.charAt(n[f]>>>4),d+=AS.charAt(n[f]&15),(f===3||f===5||f===7||f===9)&&(d+="-");return d}async function lL(t,e){return window.crypto.subtle.generateKey($E,t,e)}async function db(t){return window.crypto.subtle.exportKey(RI,t)}async function uL(t,e,n){return window.crypto.subtle.importKey(RI,t,$E,e,n)}async function dL(t,e){return window.crypto.subtle.sign($E,t,e)}async function VE(){const t=await DI(),n={alg:"dir",kty:"oct",k:Sl(new Uint8Array(t))};return ag(JSON.stringify(n))}async function hL(t){const e=is(t),r=JSON.parse(e).k,s=xl(r);return window.crypto.subtle.importKey(GE,s,tf,!1,[qE])}async function fL(t,e){const n=e.split(".");if(n.length!==5)throw Fe(Ry,"jwe_length");const r=await hL(t).catch(()=>{throw Fe(Ry,"import_key")});try{const s=new TextEncoder().encode(n[0]),c=xl(n[2]),d=xl(n[3]),f=xl(n[4]),g=f.byteLength*8,y=new Uint8Array(d.length+f.length);y.set(d),y.set(f,d.length);const v=await window.crypto.subtle.decrypt({name:tf,iv:c,tagLength:g,additionalData:s},r,y);return new TextDecoder().decode(v)}catch{throw Fe(Ry,"decrypt")}}async function DI(){const t=await window.crypto.subtle.generateKey({name:tf,length:256},!0,[MI,qE]);return window.crypto.subtle.exportKey(GE,t)}async function SS(t){return window.crypto.subtle.importKey(GE,t,OI,!1,[iL])}async function jI(t,e,n){return window.crypto.subtle.deriveKey({name:OI,salt:e,hash:KE,info:new TextEncoder().encode(n)},t,{name:tf,length:256},!1,[MI,qE])}async function mL(t,e,n){const r=new TextEncoder().encode(e),s=window.crypto.getRandomValues(new Uint8Array(16)),c=await jI(t,s,n),d=await window.crypto.subtle.encrypt({name:tf,iv:new Uint8Array(12)},c,r);return{data:Sl(new Uint8Array(d)),nonce:Sl(s)}}async function _S(t,e,n,r){const s=xl(r),c=await jI(t,xl(e),n),d=await window.crypto.subtle.decrypt({name:tf,iv:new Uint8Array(12)},c,s);return new TextDecoder().decode(d)}async function LI(t){const e=await PI(t),n=new Uint8Array(e);return Sl(n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Zv="storage_not_supported",Zn="stubbed_public_client_application_called",YE="in_mem_redirect_unavailable";/*! @azure/msal-browser v4.25.0 2025-10-09 */const Ny={[Zv]:"Given storage configuration option was not supported.",[Zn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[YE]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};Ny[Zv],Ny[Zn],Ny[YE];class QE extends en{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,QE.prototype)}}function Fn(t){return new QE(t,Ny[t])}/*! @azure/msal-browser v4.25.0 2025-10-09 */function UI(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function gL(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function WE(){return window.parent!==window}function pL(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${po.POPUP_NAME_PREFIX}.`)===0}function $a(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function yL(){const e=new jt(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function vL(){if(jt.hashContainsKnownProperties(window.location.hash)&&WE())throw Fe(dI)}function CL(t){if(WE()&&!t)throw Fe(uI)}function wL(){if(pL())throw Fe(hI)}function HI(){if(typeof window>"u")throw Fe(Jv)}function BI(t){if(!t)throw Fe($m)}function XE(t){HI(),vL(),wL(),BI(t)}function kS(t,e){if(XE(t),CL(e.system.allowRedirectInIframe),e.cache.cacheLocation===tr.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Fn(YE)}function zI(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function bL(){return as()}/*! @azure/msal-browser v4.25.0 2025-10-09 */class sv{navigateInternal(e,n){return sv.defaultNavigateWindow(e,n)}navigateExternal(e,n){return sv.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,s)=>{setTimeout(()=>{s(Fe(iv,"failed_to_redirect"))},n.timeout)})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class xL{async sendGetRequestAsync(e,n){let r,s={},c=0;const d=IS(n);try{r=await fetch(e,{method:xS.GET,headers:d})}catch(f){throw Um(Fe(window.navigator.onLine?yI:ov),void 0,void 0,f)}s=RS(r.headers);try{return c=r.status,{headers:s,body:await r.json(),status:c}}catch(f){throw Um(Fe(tx),c,s,f)}}async sendPostRequestAsync(e,n){const r=n&&n.body||"",s=IS(n);let c,d=0,f={};try{c=await fetch(e,{method:xS.POST,headers:s,body:r})}catch(g){throw Um(Fe(window.navigator.onLine?pI:ov),void 0,void 0,g)}f=RS(c.headers);try{return d=c.status,{headers:f,body:await c.json(),status:d}}catch(g){throw Um(Fe(tx),d,f,g)}}}function IS(t){try{const e=new Headers;if(!(t&&t.headers))return e;const n=t.headers;return Object.entries(n).forEach(([r,s])=>{e.append(r,s)}),e}catch(e){throw Um(Fe(kI),void 0,void 0,e)}}function RS(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw Fe(II)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const EL=6e4,rx=1e4,AL=3e4,FI=2e3;function TL({auth:t,cache:e,system:n,telemetry:r},s){const c={clientId:Re.EMPTY_STRING,authority:`${Re.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Re.EMPTY_STRING,authorityMetadata:Re.EMPTY_STRING,redirectUri:typeof window<"u"?$a():"",postLogoutRedirectUri:Re.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:vo.AAD,OIDCOptions:{serverResponseType:Bv.FRAGMENT,defaultScopes:[Re.OPENID_SCOPE,Re.PROFILE_SCOPE,Re.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:uE.None,tenant:Re.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},d={cacheLocation:tr.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:tr.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===tr.LocalStorage),claimsBasedCachingEnabled:!1},f={loggerCallback:()=>{},logLevel:rn.Info,piiLoggingEnabled:!1},y={...{...kk,loggerOptions:f,networkClient:s?new xL:Lj,navigationClient:new sv,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||EL,iframeHashTimeout:n?.loadFrameTimeout||rx,navigateFrameWait:0,redirectNavigationTimeout:AL,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||FI,pollIntervalMilliseconds:po.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:n?.loggerOptions||f},v={application:{appName:Re.EMPTY_STRING,appVersion:Re.EMPTY_STRING},client:new _k};if(t?.protocolMode!==vo.OIDC&&t?.OIDCOptions&&new Qa(y.loggerOptions).warning(JSON.stringify(on(vk))),t?.protocolMode&&t.protocolMode===vo.OIDC&&y?.allowPlatformBroker)throw on(Ck);return{auth:{...c,...t,OIDCOptions:{...c.OIDCOptions,...t?.OIDCOptions}},cache:{...d,...e},system:y,telemetry:{...v,...r}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const SL="@azure/msal-browser",Hu="4.25.0";/*! @azure/msal-browser v4.25.0 2025-10-09 */const ur="msal",JE="browser",hb="-",hl=1,ox=1,_L=`${ur}.${JE}.log.level`,kL=`${ur}.${JE}.log.pii`,IL=`${ur}.${JE}.platform.auth.dom`,NS=`${ur}.version`,OS="account.keys",MS="token.keys";function Fs(t=ox){return t<1?`${ur}.${OS}`:`${ur}.${t}.${OS}`}function Mu(t,e=hl){return e<1?`${ur}.${MS}.${t}`:`${ur}.${e}.${MS}.${t}`}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ZE{static loggerCallback(e,n){switch(e){case rn.Error:console.error(n);return;case rn.Info:console.info(n);return;case rn.Verbose:console.debug(n);return;case rn.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=TL(e,this.browserEnvironment);let n;try{n=window[tr.SessionStorage]}catch{}const r=n?.getItem(_L),s=n?.getItem(kL)?.toLowerCase(),c=s==="true"?!0:s==="false"?!1:void 0,d={...this.config.system.loggerOptions},f=r&&Object.keys(rn).includes(r)?rn[r]:void 0;f&&(d.loggerCallback=ZE.loggerCallback,d.logLevel=f),c!==void 0&&(d.piiLoggingEnabled=c),this.logger=new Qa(d,SL,Hu),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Bu extends ZE{getModuleName(){return Bu.MODULE_NAME}getId(){return Bu.ID}async initialize(){return this.available=typeof window<"u",this.available}}Bu.MODULE_NAME="";Bu.ID="StandardOperatingContext";/*! @azure/msal-browser v4.25.0 2025-10-09 */class RL{constructor(){this.dbName=nx,this.version=Zj,this.tableName=eL,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",s=>{s.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",s=>{const c=s;this.db=c.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(Fe(zE)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(Eh));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);d.addEventListener("success",f=>{const g=f;this.closeConnection(),n(g.target.result)}),d.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,s)=>{if(!this.db)return s(Fe(Eh));const f=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);f.addEventListener("success",()=>{this.closeConnection(),r()}),f.addEventListener("error",g=>{this.closeConnection(),s(g)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(Eh));const d=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);d.addEventListener("success",()=>{this.closeConnection(),n()}),d.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Fe(Eh));const c=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();c.addEventListener("success",d=>{const f=d;this.closeConnection(),e(f.target.result)}),c.addEventListener("error",d=>{this.closeConnection(),n(d)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Fe(Eh));const d=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);d.addEventListener("success",f=>{const g=f;this.closeConnection(),n(g.target.result===1)}),d.addEventListener("error",f=>{this.closeConnection(),r(f)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(nx),s=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(s),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(s),e(!0))),r.addEventListener("error",()=>(clearTimeout(s),n(!1)))})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class eC{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,n){this.cache.set(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class NL{constructor(e){this.inMemoryCache=new eC,this.indexedDBCache=new RL,this.logger=e}handleDatabaseAccessError(e){if(e instanceof _g&&e.errorCode===zE)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Wa{constructor(e,n,r){this.logger=e,aL(r??!1),this.cache=new NL(this.logger),this.performanceClient=n}createNewGuid(){return as()}base64Encode(e){return ag(e)}base64Decode(e){return is(e)}base64UrlEncode(e){return cy(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const n=this.performanceClient?.startMeasurement(re.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await lL(Wa.EXTRACTABLE,Wa.POP_KEY_USAGES),s=await db(r.publicKey),c={e:s.e,kty:s.kty,n:s.n},d=PS(c),f=await this.hashString(d),g=await db(r.privateKey),y=await uL(g,!1,["sign"]);return await this.cache.setItem(f,{privateKey:y,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),f}async removeTokenBindingKey(e){if(await this.cache.removeItem(e),await this.cache.containsKey(e))throw De(sk)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,s){const c=this.performanceClient?.startMeasurement(re.CryptoOptsSignJwt,s),d=await this.cache.getItem(n);if(!d)throw Fe(BE);const f=await db(d.publicKey),g=PS(f),y=cy(JSON.stringify({kid:n})),v=jE.getShrHeaderString({...r?.header,alg:f.alg,kid:y}),x=cy(v);e.cnf={jwk:JSON.parse(g)};const b=cy(JSON.stringify(e)),A=`${x}.${b}`,_=new TextEncoder().encode(A),N=await dL(d.privateKey,_),M=Sl(new Uint8Array(N)),U=`${A}.${M}`;return c&&c.end({success:!0}),U}async hashString(e){return LI(e)}}Wa.POP_KEY_USAGES=["sign","verify"];Wa.EXTRACTABLE=!0;function PS(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v4.25.0 2025-10-09 */const OL=1440*60*1e3,ix={Lax:"Lax",None:"None"};class KI{initialize(){return Promise.resolve()}getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let s=0;s<r.length;s++){const c=r[s],[d,...f]=decodeURIComponent(c).trim().split("="),g=f.join("=");if(d===n)return g}return""}getUserData(){throw De(pt)}setItem(e,n,r,s=!0,c=ix.Lax){let d=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=${c};`;if(r){const f=ML(r);d+=`expires=${f};`}(s||c===ix.None)&&(d+="Secure;"),document.cookie=d}async setUserData(){return Promise.reject(De(pt))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const s=decodeURIComponent(r).trim().split("=");n.push(s[0])}),n}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function ML(t){const e=new Date;return new Date(e.getTime()+t*OL).toUTCString()}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Vm(t,e){const n=t.getItem(Fs(e));return n?JSON.parse(n):[]}function Ym(t,e,n){const r=e.getItem(Mu(t,n));if(r){const s=JSON.parse(r);if(s&&s.hasOwnProperty("idToken")&&s.hasOwnProperty("accessToken")&&s.hasOwnProperty("refreshToken"))return s}return{idToken:[],accessToken:[],refreshToken:[]}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function sx(t){return t.hasOwnProperty("id")&&t.hasOwnProperty("nonce")&&t.hasOwnProperty("data")}/*! @azure/msal-browser v4.25.0 2025-10-09 */const DS="msal.cache.encryption",PL="msal.broadcast.cache";class DL{constructor(e,n,r){if(!window.localStorage)throw Fn(Zv);this.memoryStorage=new eC,this.initialized=!1,this.clientId=e,this.logger=n,this.performanceClient=r,this.broadcast=new BroadcastChannel(PL)}async initialize(e){const n=new KI,r=n.getItem(DS);let s={key:"",id:""};if(r)try{s=JSON.parse(r)}catch{}if(s.key&&s.id){const c=Bo(xl,re.Base64Decode,this.logger,this.performanceClient,e)(s.key);this.encryptionCookie={id:s.id,key:await ke(SS,re.GenerateHKDF,this.logger,this.performanceClient,e)(c)}}else{const c=as(),d=await ke(DI,re.GenerateBaseKey,this.logger,this.performanceClient,e)(),f=Bo(Sl,re.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(d));this.encryptionCookie={id:c,key:await ke(SS,re.GenerateHKDF,this.logger,this.performanceClient,e)(d)};const g={id:c,key:f};n.setItem(DS,JSON.stringify(g),0,!0,ix.None)}await ke(this.importExistingCache.bind(this),re.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Fe($m);return this.memoryStorage.getItem(e)}async decryptData(e,n,r){if(!this.initialized||!this.encryptionCookie)throw Fe($m);if(n.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;const s=await ke(_S,re.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data);if(!s)return null;try{return JSON.parse(s)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,n){window.localStorage.setItem(e,n)}async setUserData(e,n,r,s){if(!this.initialized||!this.encryptionCookie)throw Fe($m);const{data:c,nonce:d}=await ke(mL,re.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,n,this.getContext(e)),f={id:this.encryptionCookie.id,nonce:d,data:c,lastUpdatedAt:s};this.memoryStorage.setItem(e,n),this.setItem(e,JSON.stringify(f)),this.broadcast.postMessage({key:e,value:n,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Vm(this).forEach(r=>this.removeItem(r));const n=Ym(this.clientId,this);n.idToken.forEach(r=>this.removeItem(r)),n.accessToken.forEach(r=>this.removeItem(r)),n.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(ur)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let n=Vm(this);n=await this.importArray(n,e),n.length?this.setItem(Fs(),JSON.stringify(n)):this.removeItem(Fs());const r=Ym(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Mu(this.clientId),JSON.stringify(r)):this.removeItem(Mu(this.clientId))}async getItemFromEncryptedCache(e,n){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let s;try{s=JSON.parse(r)}catch{return null}return sx(s)?s.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null):ke(_S,re.Decrypt,this.logger,this.performanceClient,n)(this.encryptionCookie.key,s.nonce,this.getContext(e),s.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},n),s)}async importArray(e,n){const r=[],s=[];return e.forEach(c=>{const d=this.getItemFromEncryptedCache(c,n).then(f=>{f?(this.memoryStorage.setItem(c,f),r.push(c)):this.removeItem(c)});s.push(d)}),await Promise.all(s),r}getContext(e){let n="";return e.includes(this.clientId)&&(n=this.clientId),n}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const n=this.performanceClient.startMeasurement(re.LocalStorageUpdated);n.add({isBackground:!0});const{key:r,value:s,context:c}=e.data;if(!r){this.logger.error("Broadcast event missing key"),n.end({success:!1,errorCode:"noKey"});return}if(c&&c!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${c}`),n.end({success:!1,errorCode:"contextMismatch"});return}s?(this.memoryStorage.setItem(r,s),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),n.end({success:!0})}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class jL{constructor(){if(!window.sessionStorage)throw Fn(Zv)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}async setUserData(e,n){this.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const Ge={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};/*! @azure/msal-browser v4.25.0 2025-10-09 */function jS(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class ax extends Jb{constructor(e,n,r,s,c,d,f){super(e,r,s,c,f),this.cacheConfig=n,this.logger=s,this.internalStorage=new eC,this.browserStorage=LS(e,n.cacheLocation,s,c),this.temporaryCacheStorage=LS(e,n.temporaryCacheLocation,s,c),this.cookieStorage=new KI,this.eventHandler=d}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const n=Vm(this.browserStorage,0),r=Ym(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:n.length,oldAccessCount:r.accessToken.length,oldIdCount:r.idToken.length,oldRefreshCount:r.refreshToken.length},e);const s=Vm(this.browserStorage,1),c=Ym(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:s.length,currAccessCount:c.accessToken.length,currIdCount:c.idToken.length,currRefreshCount:c.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(ox,n,s,e),this.updateV0ToCurrent(hl,r.idToken,c.idToken,e),this.updateV0ToCurrent(hl,r.accessToken,c.accessToken,e),this.updateV0ToCurrent(hl,r.refreshToken,c.refreshToken,e)]),n.length>0?this.browserStorage.setItem(Fs(0),JSON.stringify(n)):this.browserStorage.removeItem(Fs(0)),s.length>0?this.browserStorage.setItem(Fs(1),JSON.stringify(s)):this.browserStorage.removeItem(Fs(1)),this.setTokenKeys(r,e,0),this.setTokenKeys(c,e,1)}async updateV0ToCurrent(e,n,r,s){const c=[];for(const d of[...n]){const f=this.browserStorage.getItem(d),g=this.validateAndParseJson(f||"");if(!g){jS(n,d);continue}g.lastUpdatedAt||(g.lastUpdatedAt=Date.now().toString(),this.setItem(d,JSON.stringify(g),s));const y=sx(g)?await this.browserStorage.decryptData(d,g,s):g;let v;if(y&&(gS(y)||pS(y))&&(v=y.expiresOn),!y||yj(g.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||v&&tv(v,G_)){this.browserStorage.removeItem(d),jS(n,d),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},s);continue}if(this.cacheConfig.cacheLocation!==tr.LocalStorage||sx(g)){const x=`${ur}.${e}${hb}${d}`,b=this.browserStorage.getItem(x);if(b){const A=this.validateAndParseJson(b);if(Number(g.lastUpdatedAt)>Number(A.lastUpdatedAt)){c.push(this.setUserData(x,JSON.stringify(y),s,g.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},s)}));continue}}else{c.push(this.setUserData(x,JSON.stringify(y),s,g.lastUpdatedAt).then(()=>{r.push(x),this.performanceClient.incrementFields({upgradedCacheCount:1},s)}));continue}}}return Promise.all(c)}trackVersionChanges(e){const n=this.browserStorage.getItem(NS);n&&(this.logger.info(`MSAL.js was last initialized by version: ${n}`),this.performanceClient.addFields({previousLibraryVersion:n},e)),n!==Hu&&this.setItem(NS,Hu,e)}validateAndParseJson(e){if(!e)return null;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}setItem(e,n,r){let s=0,c=[];const d=20;for(let f=0;f<=d;f++)try{this.browserStorage.setItem(e,n),f>0&&(f<=s?this.removeAccessTokenKeys(c.slice(0,f),r,0):(this.removeAccessTokenKeys(c.slice(0,s),r,0),this.removeAccessTokenKeys(c.slice(s,f),r)));break}catch(g){const y=Xb(g);if(y.errorCode===Wy&&f<d){if(!c.length){const v=e===Mu(this.clientId,0)?JSON.parse(n).accessToken:this.getTokenKeys(0).accessToken,x=e===Mu(this.clientId)?JSON.parse(n).accessToken:this.getTokenKeys().accessToken;c=[...v,...x],s=v.length}if(c.length<=f)throw y;this.removeAccessToken(c[f],r,!1)}else throw y}}async setUserData(e,n,r,s){let c=0,d=[];const f=20;for(let g=0;g<=f;g++)try{await ke(this.browserStorage.setUserData.bind(this.browserStorage),re.SetUserData,this.logger,this.performanceClient)(e,n,r,s),g>0&&(g<=c?this.removeAccessTokenKeys(d.slice(0,g),r,0):(this.removeAccessTokenKeys(d.slice(0,c),r,0),this.removeAccessTokenKeys(d.slice(c,g),r)));break}catch(y){const v=Xb(y);if(v.errorCode===Wy&&g<f){if(!d.length){const x=this.getTokenKeys(0).accessToken,b=this.getTokenKeys().accessToken;d=[...x,...b],c=x.length}if(d.length<=g)throw v;this.removeAccessToken(d[g],r,!1)}else throw v}}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const s=this.validateAndParseJson(r);return!s||!ss.isAccountEntity(s)?null:Jb.toObject(new ss,s)}async setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=this.generateAccountKey(e.getAccountInfo()),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const c=this.addAccountKeyToMap(r,n);this.cacheConfig.cacheLocation===tr.LocalStorage&&c&&this.eventHandler.emitEvent(Ge.ACCOUNT_ADDED,void 0,e.getAccountInfo())}getAccountKeys(){return Vm(this.browserStorage)}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Fs(),JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),s=r.indexOf(e);if(s>-1){if(r.splice(s,1),r.length===0){this.removeItem(Fs());return}else this.setItem(Fs(),JSON.stringify(r),n);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){const r=this.getActiveAccount(n);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,n),super.removeAccount(e,n),this.removeAccountKeyFromMap(this.generateAccountKey(e),n),this.browserStorage.getKeys().forEach(s=>{s.includes(e.homeAccountId)&&s.includes(e.environment)&&this.browserStorage.removeItem(s)}),this.cacheConfig.cacheLocation===tr.LocalStorage&&this.eventHandler.emitEvent(Ge.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,n){super.removeIdToken(e,n);const r=this.getTokenKeys(),s=r.idToken.indexOf(e);s>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(s,1),this.setTokenKeys(r,n))}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),r&&this.removeAccessTokenKeys([e],n)}removeAccessTokenKeys(e,n,r=hl){this.logger.trace("removeAccessTokenKey called");const s=this.getTokenKeys(r);let c=0;if(e.forEach(d=>{const f=s.accessToken.indexOf(d);f>-1&&(s.accessToken.splice(f,1),c++)}),c>0){this.logger.info(`removed ${c} accessToken keys from tokenKeys map`),this.setTokenKeys(s,n,r);return}}removeRefreshToken(e,n){super.removeRefreshToken(e,n);const r=this.getTokenKeys(),s=r.refreshToken.indexOf(e);s>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(s,1),this.setTokenKeys(r,n))}getTokenKeys(e=hl){return Ym(this.clientId,this.browserStorage,e)}setTokenKeys(e,n,r=hl){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Mu(this.clientId,r));return}else this.setItem(Mu(this.clientId,r),JSON.stringify(e),n)}getIdTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const s=this.validateAndParseJson(r);return!s||!Cj(s)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),s)}async setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const c=this.getTokenKeys();c.idToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),c.idToken.push(r),this.setTokenKeys(c,n))}getAccessTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],n),null;const s=this.validateAndParseJson(r);return!s||!gS(s)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),s)}async setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const c=this.getTokenKeys(),d=c.accessToken.indexOf(r);d!==-1&&c.accessToken.splice(d,1),this.logger.trace(`access token ${d===-1?"added to":"updated in"} map`),c.accessToken.push(r),this.setTokenKeys(c,n)}getRefreshTokenCredential(e,n){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,n),null;const s=this.validateAndParseJson(r);return!s||!pS(s)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),s)}async setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=this.generateCredentialKey(e),s=Date.now().toString();e.lastUpdatedAt=s,await this.setUserData(r,JSON.stringify(e),n,s);const c=this.getTokenKeys();c.refreshToken.indexOf(r)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),c.refreshToken.push(r),this.setTokenKeys(c,n))}getAppMetadata(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Ej(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=xj(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!wj(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&Aj(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(ay.WRAPPER_SKU,e),this.internalStorage.setItem(ay.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(ay.WRAPPER_SKU)||Re.EMPTY_STRING,n=this.internalStorage.getItem(ay.WRAPPER_VER)||Re.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(nS.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(n);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const s=this.validateAndParseJson(r);return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId,tenantId:s.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(nS.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");const s={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:wo().toString()};this.setItem(r,JSON.stringify(s),n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Ge.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){const n=this.browserStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!bj(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const c=this.cookieStorage.getItem(r);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),c}const s=this.temporaryCacheStorage.getItem(r);if(!s){if(this.cacheConfig.cacheLocation===tr.LocalStorage){const c=this.browserStorage.getItem(r);if(c)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),c}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),s}setTemporaryCache(e,n,r){const s=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(s,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(s,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(n=>{(n.indexOf(ur)!==-1||n.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(n)}),this.browserStorage.getKeys().forEach(n=>{(n.indexOf(ur)!==-1||n.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(n)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(re.ClearTokensAndKeysWithClaims,e);const n=this.getTokenKeys();let r=0;n.accessToken.forEach(s=>{const c=this.getAccessTokenCredential(s,e);c?.requestedClaimsHash&&s.includes(c.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(s,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return Ho.startsWith(e,ur)?e:`${ur}.${this.clientId}.${e}`}generateCredentialKey(e){const n=e.credentialType===vr.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==$t.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${ur}.${hl}`,e.homeAccountId,e.environment,e.credentialType,n,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join(hb).toLowerCase()}generateAccountKey(e){const n=e.homeAccountId.split(".")[1];return[`${ur}.${ox}`,e.homeAccountId,e.environment,n||e.tenantId||""].join(hb).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Kn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Kn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Kn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Kn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Kn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,n){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=ag(JSON.stringify(e));if(this.setTemporaryCache(Kn.REQUEST_PARAMS,r,!0),n){const s=ag(n);this.setTemporaryCache(Kn.VERIFIER,s,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Kn.REQUEST_PARAMS,!0);if(!e)throw Fe(mI);const n=this.getTemporaryCache(Kn.VERIFIER,!0);let r,s="";try{r=JSON.parse(is(e)),n&&(s=is(n))}catch(c){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${c}`),Fe(gI)}return[r,s]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Kn.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress()?.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${ur}.${Kn.INTERACTION_STATUS_KEY}`,n=this.getTemporaryCache(e,!1);try{return n?JSON.parse(n):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),UI(window),null}}setInteractionInProgress(e,n=gl.SIGNIN){const r=`${ur}.${Kn.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Fe(sI);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,n){const r=qv(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let s;n.claims&&(s=await this.cryptoImpl.hashString(n.claims));const c=$v(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?mS(e.expiresOn):0,e.extExpiresOn?mS(e.extExpiresOn):0,is,void 0,e.tokenType,void 0,n.sshKid,n.claims,s),d={idToken:r,accessToken:c};return this.saveCacheRecord(d,e.correlationId)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(s){if(s instanceof _h&&this.performanceClient&&n)try{const c=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:c.refreshToken.length,cacheIdCount:c.idToken.length,cacheAtCount:c.accessToken.length},n)}catch{}throw s}}}function LS(t,e,n,r){try{switch(e){case tr.LocalStorage:return new DL(t,n,r);case tr.SessionStorage:return new jL;case tr.MemoryStorage:default:break}}catch(s){n.error(s)}return new eC}const LL=(t,e,n,r)=>{const s={cacheLocation:tr.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:tr.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new ax(t,s,Vy,e,n,r)};/*! @azure/msal-browser v4.25.0 2025-10-09 */function UL(t,e,n,r,s){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(s||{},r):[]}function HL(t,e,n,r){const s=n.getAccountInfoFilteredBy(t,r);return s?(e.verbose("getAccount: Account matching provided filter found, returning"),s):(e.verbose("getAccount: No matching account found, returning null"),null)}function BL(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const s=n.getAccountInfoFilteredBy({username:t},r);return s?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),s):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function zL(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const s=n.getAccountInfoFilteredBy({homeAccountId:t},r);return s?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),s):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function FL(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const s=n.getAccountInfoFilteredBy({localAccountId:t},r);return s?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),s):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function KL(t,e,n){e.setActiveAccount(t,n)}function GL(t,e){return t.getActiveAccount(e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const qL="msal.broadcast.event";class $L{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Qa({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(qL)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,n,r){if(typeof window<"u"){const s=r||bL();return this.eventCallbacks.has(s)?(this.logger.error(`Event callback with id: ${s} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(s,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${s}`),s)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,s){const c={eventType:e,interactionType:n||null,payload:r||null,error:s||null,timestamp:Date.now()};switch(e){case Ge.ACCOUNT_ADDED:case Ge.ACCOUNT_REMOVED:case Ge.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(c);break;default:this.invokeCallbacks(c);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([n,r],s)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${s}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const n=e.data;this.invokeCallbacks(n)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class GI{constructor(e,n,r,s,c,d,f,g,y){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=c,this.navigationClient=d,this.platformAuthProvider=g,this.correlationId=y||as(),this.logger=s.clone(po.MSAL_SKU,Hu,this.correlationId),this.performanceClient=f}async clearCacheOnLogout(e,n){if(n)try{this.browserStorage.removeAccount(n,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri;return jt.getAbsoluteUrl(n,$a())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ig(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(re.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const s={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e.requestAuthority||this.config.auth.authority,d=r?.length?r==="true":this.config.auth.instanceAware,f=n&&d?this.config.auth.authority.replace(jt.getDomainFromUrl(c),n.environment):c,g=Lr.generateAuthority(f,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),y=await ke(qk,re.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(g,this.config.system.networkClient,this.browserStorage,s,this.logger,this.correlationId,this.performanceClient);if(n&&!y.isAlias(n.environment))throw on(wk);return y}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function eA(t,e,n,r){n.addQueueMeasurement(re.InitializeBaseRequest,t.correlationId);const s=t.authority||e.auth.authority,c=[...t&&t.scopes||[]],d={...t,correlationId:t.correlationId,authority:s,scopes:c};if(!d.authenticationScheme)d.authenticationScheme=$t.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(d.authenticationScheme===$t.SSH){if(!t.sshJwk)throw on(zv);if(!t.sshKid)throw on(yk)}r.verbose(`Authentication Scheme set to "${d.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!Ho.isEmptyObj(t.claims)&&(d.requestedClaimsHash=await LI(t.claims)),d}async function VL(t,e,n,r,s){r.addQueueMeasurement(re.InitializeSilentRequest,t.correlationId);const c=await ke(eA,re.InitializeBaseRequest,s,r,t.correlationId)(t,n,r,s);return{...t,...c,account:e,forceRefresh:t.forceRefresh||!1}}function qI(t,e){let n;const r=t.httpMethod;if(e===vo.EAR){if(n=r||Ou.POST,n!==Ou.POST)throw on(bk)}else n=r||Ou.GET;if(t.authorizePostBodyParameters&&n!==Ou.POST)throw on(xk);return n}/*! @azure/msal-browser v4.25.0 2025-10-09 */class nf extends GI{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const n={correlationId:this.correlationId||as(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=jt.getAbsoluteUrl(e.postLogoutRedirectUri,$a())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=jt.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,$a())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=jt.getAbsoluteUrl($a(),$a())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(re.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await ke(this.getClientConfiguration.bind(this),re.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Wk(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:c,account:d}=e;this.performanceClient.addQueueMeasurement(re.StandardInteractionClientGetClientConfiguration,this.correlationId);const f=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:s,requestExtraQueryParameters:c,account:d}),g=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:f,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:g.loggerCallback,piiLoggingEnabled:g.piiLoggingEnabled,logLevel:g.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:po.MSAL_SKU,version:Hu,cpu:Re.EMPTY_STRING,os:Re.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(re.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),s={interactionType:n},c=ef.setRequestState(this.browserCrypto,e&&e.state||Re.EMPTY_STRING,s),f={...await ke(eA,re.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:c,nonce:e.nonce||as(),responseMode:this.config.auth.OIDCOptions.serverResponseType},g={...f,httpMethod:qI(f,this.config.auth.protocolMode)};if(e.loginHint||e.sid)return g;const y=e.account||this.browserStorage.getActiveAccount(this.correlationId);return y&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${y.homeAccountId}`,this.correlationId),g.account=y),g}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function YL(t,e){if(!e)return null;try{return ef.parseRequestState(t,e).libraryState.meta}catch{throw De(Ph)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function Qm(t,e,n){const r=Yy(t);if(!r)throw Ak(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Fe(rI)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Fe(nI));return r}function QL(t,e,n){if(!t.state)throw Fe(HE);const r=YL(e,t.state);if(!r)throw Fe(oI);if(r.interactionType!==n)throw Fe(iI)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class $I{constructor(e,n,r,s,c){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=s,this.performanceClient=c}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(re.HandleCodeResponse,n.correlationId);let r;try{r=Hj(e,n.state)}catch(s){throw s instanceof Ju&&s.subError===sg?Fe(sg):s}return ke(this.handleCodeResponseFromServer.bind(this),re.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(re.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await ke(this.authModule.updateAuthority.bind(this.authModule),re.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const c=this.createCcsCredentials(n);c&&(this.authCodeRequest.ccsCredential=c)}return await ke(this.authModule.acquireToken.bind(this.authModule),re.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:rs.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:rs.UPN}:null}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const WL="ContentError",XL="PageException",VI="user_switch";/*! @azure/msal-browser v4.25.0 2025-10-09 */const JL="USER_INTERACTION_REQUIRED",ZL="USER_CANCEL",eU="NO_NETWORK",tU="DISABLED",nU="ACCOUNT_UNAVAILABLE",rU="UX_NOT_ALLOWED";/*! @azure/msal-browser v4.25.0 2025-10-09 */const oU=-2147186943,iU={[VI]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class qs extends en{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,qs.prototype),this.name="NativeAuthError",this.ext=r}}function Ah(t){if(t.ext&&t.ext.status&&t.ext.status===tU||t.ext&&t.ext.error&&t.ext.error===oU)return!0;switch(t.errorCode){case WL:case XL:return!0;default:return!1}}function av(t,e,n){if(n&&n.status)switch(n.status){case nU:return rv(Vk);case JL:return new Co(t,e);case ZL:return Fe(sg);case eU:return Fe(ov);case rU:return rv(OE)}return new qs(t,iU[t]||e,n)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class YI extends nf{async acquireToken(e){this.performanceClient.addQueueMeasurement(re.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(Zt.acquireTokenSilent_silentFlow),r=await ke(this.getClientConfiguration.bind(this),re.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),s=new jj(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const d=(await ke(s.acquireCachedToken.bind(s),re.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),d}catch(c){throw c instanceof _g&&c.errorCode===BE&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),c}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n.correlationId,n?.account)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class Oy extends GI{constructor(e,n,r,s,c,d,f,g,y,v,x,b){super(e,n,r,s,c,d,g,y,b),this.apiId=f,this.accountId=v,this.platformAuthProvider=y,this.nativeStorageManager=x,this.silentCacheClient=new YI(e,this.nativeStorageManager,r,s,c,d,g,y,b);const A=this.platformAuthProvider.getExtensionName();this.skus=ig.makeExtraSkuString({libraryName:po.MSAL_SKU,libraryVersion:Hu,extensionName:A,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[XD]:this.skus}}async acquireToken(e,n){this.performanceClient.addQueueMeasurement(re.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(re.NativeInteractionClientAcquireToken,this.correlationId),s=wo(),c=this.initializeServerTelemetryManager(this.apiId);try{const d=await this.initializeNativeRequest(e);try{const g=await this.acquireTokensFromCache(this.accountId,d);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),g}catch(g){if(n===Jr.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),g;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const f=await this.platformAuthProvider.sendMessage(d);return await this.handleNativeResponse(f,d,s).then(g=>(r.end({success:!0,isNativeBroker:!0,requestId:g.requestId}),c.clearNativeBrokerErrorCode(),g)).catch(g=>{throw r.end({success:!1,errorCode:g.errorCode,subErrorCode:g.subError}),g})}catch(d){throw d instanceof qs&&c.setNativeBrokerErrorCode(d.errorCode),r.end({success:!1}),d}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:er.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),De(Qb);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw De(Qb);try{const s=this.createSilentCacheRequest(n,r),c=await this.silentCacheClient.acquireToken(s),d={...r,idTokenClaims:c?.idTokenClaims,idToken:c?.idToken};return{...c,account:d}}catch(s){throw s}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const s=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(s)}catch(f){if(f instanceof qs&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(f.errorCode),Ah(f)))throw f}this.browserStorage.setTemporaryCache(Kn.NATIVE_REQUEST,JSON.stringify(s),!0);const c={apiId:Zt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(d,c)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:s,...c}=r;s&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Kn.NATIVE_REQUEST));const d=wo();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const f=await this.platformAuthProvider.sendMessage(c),g=await this.handleNativeResponse(f,c,d);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),g}catch(f){throw f}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const s=Zh(e.id_token,is),c=this.createHomeAccountIdentifier(e,s),d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},this.correlationId)?.homeAccountId;if(n.extraParameters?.child_client_id&&e.account.id!==n.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(c!==d&&e.account.id!==n.accountId)throw av(VI);const f=await this.getDiscoveredAuthority({requestAuthority:n.authority}),g=ME(this.browserStorage,f,c,is,this.correlationId,s,e.client_info,void 0,s.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const y=await this.generateAuthenticationResult(e,n,s,g,f.canonicalAuthority,r);return await this.cacheAccount(g,this.correlationId),await this.cacheNativeTokens(e,n,c,s,e.access_token,y.tenantId,r),y}createHomeAccountIdentifier(e,n){return ss.generateHomeAccountId(e.client_info||Re.EMPTY_STRING,Zi.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return n?er.fromString(n):er.fromString(e)}async generatePopAccessToken(e,n){if(n.tokenType===$t.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Dh(this.browserCrypto),s={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw De(aE);return r.signPopToken(e.access_token,n.keyId,s)}else return e.access_token}async generateAuthenticationResult(e,n,r,s,c,d){const f=this.addTelemetryFromNativeResponse(e.properties.MATS),g=this.generateScopes(n.scope,e.scope),y=e.account.properties||{},v=y.UID||r.oid||r.sub||Re.EMPTY_STRING,x=y.TenantId||r.tid||Re.EMPTY_STRING,b=pE(s.getAccountInfo(),void 0,r,e.id_token);b.nativeAccountId!==e.account.id&&(b.nativeAccountId=e.account.id);const A=await this.generatePopAccessToken(e,n),I=n.tokenType===$t.POP?$t.POP:$t.BEARER;return{authority:c,uniqueId:v,tenantId:x,scopes:g.asArray(),account:b,idToken:e.id_token,idTokenClaims:r,accessToken:A,fromCache:f?this.isResponseFromCache(f):!1,expiresOn:Ih(d+e.expires_in),tokenType:I,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,n){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),n)}cacheNativeTokens(e,n,r,s,c,d,f){const g=qv(r,n.authority,e.id_token||"",n.clientId,s.tid||""),y=n.tokenType===$t.POP?Re.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,v=f+y,x=this.generateScopes(e.scope,n.scope),b=$v(r,n.authority,c,n.clientId,s.tid||d,x.printScopes(),v,0,is,void 0,n.tokenType,void 0,n.keyId),A={idToken:g,accessToken:b};return this.nativeStorageManager.saveCacheRecord(A,this.correlationId,n.storeInCache)}getExpiresInValue(e,n){return e===$t.POP?Re.SHR_NONCE_VALIDITY:(typeof n=="string"?parseInt(n,10):n)||0}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=await this.getCanonicalAuthority(e),{scopes:r,...s}=e,c=new er(r||[]);c.appendScopes(Jh);const d={...s,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:c.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(d.signPopToken&&e.popKid)throw Fe(_I);if(this.handleExtraBrokerParams(d),d.extraParameters=d.extraParameters||{},d.extraParameters.telemetry=fi.MATS_TELEMETRY,e.authenticationScheme===$t.POP){const f={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},g=new Dh(this.browserCrypto);let y;if(d.keyId)y=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:d.keyId})),d.signPopToken=!1;else{const v=await ke(g.generateCnf.bind(g),re.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(f,this.logger);y=v.reqCnfString,d.keyId=v.kid,d.signPopToken=!0}d.reqCnf=y}return this.addRequestSKUs(d),d}async getCanonicalAuthority(e){const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new jt(n);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case Zt.ssoSilent:case Zt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Cr.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case Cr.NONE:case Cr.CONSENT:case Cr.LOGIN:case Cr.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),Fe(TI)}}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(Jy)&&e.extraParameters.hasOwnProperty(Zy)&&e.extraParameters.hasOwnProperty(Lu);if(!e.embeddedClientId&&!n)return;let r="";const s=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Zy],r=e.extraParameters[Lu]),e.extraParameters={child_client_id:r,child_redirect_uri:s},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:s},this.correlationId)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function tA(t,e,n,r,s){const c=Uj({...t.auth,authority:e},n,r,s);if(TE(c,{sku:po.MSAL_SKU,version:Hu,os:"",cpu:""}),t.auth.protocolMode!==vo.OIDC&&SE(c,t.telemetry.application),n.platformBroker&&(tj(c),s.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===$t.POP)){const d=new Wa(r,s),f=new Dh(d);let g;n.popKid?g=d.encodeKid(n.popKid):g=(await ke(f.generateCnf.bind(f),re.PopTokenGenerateCnf,r,s,n.correlationId)(n,r)).reqCnfString,kE(c,g)}return Fv(c,n.correlationId,s),c}async function nA(t,e,n,r,s){if(!n.codeChallenge)throw on(hE);const c=await ke(tA,re.GetStandardParams,r,s,n.correlationId)(t,e,n,r,s);return CE(c,eE.CODE),Pk(c,n.codeChallenge,Re.S256_CODE_CHALLENGE_METHOD),bl(c,n.extraQueryParameters||{}),PE(e,c,t.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function rA(t,e,n,r,s,c){if(!r.earJwk)throw Fe(UE);const d=await tA(e,n,r,s,c);CE(d,eE.IDTOKEN_TOKEN_REFRESHTOKEN),hj(d,r.earJwk);const f=new Map;bl(f,r.extraQueryParameters||{});const g=PE(n,f,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return QI(t,g,d)}async function oA(t,e,n,r,s,c){const d=await tA(e,n,r,s,c);CE(d,eE.CODE),Pk(d,r.codeChallenge,r.codeChallengeMethod||Re.S256_CODE_CHALLENGE_METHOD),fj(d,r.authorizePostBodyParameters||{});const f=new Map;bl(f,r.extraQueryParameters||{});const g=PE(n,f,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return QI(t,g,d)}function QI(t,e,n){const r=t.createElement("form");return r.method="post",r.action=e,n.forEach((s,c)=>{const d=t.createElement("input");d.hidden=!0,d.name=c,d.value=s,r.appendChild(d)}),t.body.appendChild(r),r}async function WI(t,e,n,r,s,c,d,f,g,y){if(f.verbose("Account id found, calling WAM for token"),!y)throw Fe(FE);const v=new Wa(f,g),x=new Oy(r,s,v,f,d,r.system.navigationClient,n,g,y,e,c,t.correlationId),{userRequestState:b}=ef.parseRequestState(v,t.state);return ke(x.acquireToken.bind(x),re.NativeInteractionClientAcquireToken,f,g,t.correlationId)({...t,state:b,prompt:void 0})}async function cv(t,e,n,r,s,c,d,f,g,y,v,x){if(Gs.removeThrottle(d,s.auth.clientId,t),e.accountId)return ke(WI,re.HandleResponsePlatformBroker,y,v,t.correlationId)(t,e.accountId,r,s,d,f,g,y,v,x);const b={...t,code:e.code||"",codeVerifier:n},A=new $I(c,d,b,y,v);return await ke(A.handleCodeResponse.bind(A),re.HandleCodeResponse,y,v,t.correlationId)(e,t)}async function iA(t,e,n,r,s,c,d,f,g,y,v){if(Gs.removeThrottle(c,r.auth.clientId,t),Xk(e,t.state),!e.ear_jwe)throw Fe(tI);if(!t.earJwk)throw Fe(UE);const x=JSON.parse(await ke(fL,re.DecryptEarResponse,g,y,t.correlationId)(t.earJwk,e.ear_jwe));if(x.accountId)return ke(WI,re.HandleResponsePlatformBroker,g,y,t.correlationId)(t,x.accountId,n,r,c,d,f,g,y,v);const b=new Uu(r.auth.clientId,c,new Wa(g,y),g,null,null,y);b.validateTokenResponse(x);const A={code:"",state:t.state,nonce:t.nonce,client_info:x.client_info,cloud_graph_host_name:x.cloud_graph_host_name,cloud_instance_host_name:x.cloud_instance_host_name,cloud_instance_name:x.cloud_instance_name,msgraph_host:x.msgraph_host};return await ke(b.handleServerTokenResponse.bind(b),re.HandleServerTokenResponse,g,y,t.correlationId)(x,s,wo(),t,A,void 0,void 0,void 0,void 0)}/*! @azure/msal-browser v4.25.0 2025-10-09 */const sU=32;async function tC(t,e,n){t.addQueueMeasurement(re.GeneratePkceCodes,n);const r=Bo(aU,re.GenerateCodeVerifier,e,t,n)(t,e,n),s=await ke(cU,re.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:s}}function aU(t,e,n){try{const r=new Uint8Array(sU);return Bo(cL,re.GetRandomValues,e,t,n)(r),Sl(r)}catch{throw Fe(LE)}}async function cU(t,e,n,r){e.addQueueMeasurement(re.GenerateCodeChallengeFromVerifier,r);try{const s=await ke(PI,re.Sha256Digest,n,e,r)(t,e,r);return Sl(new Uint8Array(s))}catch{throw Fe(LE)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class lv{constructor(e,n,r,s){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=s,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(re.NativeMessageHandlerHandshake),this.platformAuthType=fi.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const n={method:Nm.GetToken,request:e},r={channel:fi.CHANNEL_ID,extensionId:this.extensionId,responseId:as(),body:n};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const s=await new Promise((d,f)=>{this.resolvers.set(r.responseId,{resolve:d,reject:f})});return this.validatePlatformBrokerResponse(s)}static async createProvider(e,n,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const s=new lv(e,n,r,fi.PREFERRED_EXTENSION_ID);return await s.sendHandshakeRequest(),s}catch{const c=new lv(e,n,r);return await c.sendHandshakeRequest(),c}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:fi.CHANNEL_ID,extensionId:this.extensionId,responseId:as(),body:{method:Nm.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Fe(EI)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==fi.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===Nm.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Fe(AI))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),s=this.handshakeResolvers.get(n.responseId);try{const c=n.body.method;if(c===Nm.Response){if(!r)return;const d=n.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(d)}`),d.status!=="Success")r.reject(av(d.code,d.description,d.ext));else if(d.result)d.result.code&&d.result.description?r.reject(av(d.result.code,d.result.description,d.result.ext)):r.resolve(d.result);else throw $b($y,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(c===Nm.HandshakeResponse){if(!s){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),s.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(c){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${c}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(c):s&&s.reject(c)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw $b($y,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===fi.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class sA{constructor(e,n,r){this.logger=e,this.performanceClient=n,this.correlationId=r,this.platformAuthType=fi.PLATFORM_DOM_PROVIDER}static async createProvider(e,n,r){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(fi.MICROSOFT_ENTRA_BROKERID))?.includes(fi.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new sA(e,n,r)}getExtensionId(){return fi.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return fi.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const n=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(n);return this.validatePlatformBrokerResponse(r)}catch(n){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),n}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:n,clientId:r,authority:s,scope:c,redirectUri:d,correlationId:f,state:g,storeInCache:y,embeddedClientId:v,extraParameters:x,...b}=e,A=this.getDOMExtraParams(b);return{accountId:n,brokerId:this.getExtensionId(),authority:s,clientId:r,correlationId:f||this.correlationId,extraParameters:{...x,...A},isSecurityTokenService:!1,redirectUri:d,scope:c,state:g,storeInCache:y,embeddedClientId:v}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const n=e;if(n.isSuccess===!1&&n.error&&n.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),av(n.error.code,n.error.description,{error:parseInt(n.error.errorCode),protocol_error:n.error.protocolError,status:n.error.status,properties:n.error.properties})}}throw $b($y,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((s,[c,d])=>(s[c]=String(d),s),{})}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function lU(t,e,n,r){t.trace("getPlatformAuthProvider called",n);const s=uU();t.trace("Has client allowed platform auth via DOM API: "+s);let c;try{s&&(c=await sA.createProvider(t,e,n)),c||(t.trace("Platform auth via DOM API not available, checking for extension"),c=await lv.createProvider(t,r||FI,e))}catch(d){t.trace("Platform auth not available",d)}return c}function uU(){let t;try{return t=window[tr.SessionStorage],t?.getItem(IL)==="true"}catch{return!1}}function cg(t,e,n,r){if(e.trace("isPlatformAuthAllowed called"),!t.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case $t.BEARER:case $t.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}/*! @azure/msal-browser v4.25.0 2025-10-09 */class dU extends nf{constructor(e,n,r,s,c,d,f,g,y,v){super(e,n,r,s,c,d,f,y,v),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=g,this.eventHandler=c}acquireToken(e,n){let r;try{if(r={popupName:this.generatePopupName(e.scopes||Jh,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,n);{const c={...e,httpMethod:qI(e,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(c,r,n)}}catch(s){return Promise.reject(s)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},s=e&&e.authority,c=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,s,c)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,s,c))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n,r){this.logger.verbose("acquireTokenPopupAsync called");const s=await ke(this.initializeAuthorizationRequest.bind(this),re.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,et.Popup);n.popup&&zI(s.authority);const c=cg(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return s.platformBroker=c,this.config.auth.protocolMode===vo.EAR?this.executeEarFlow(s,n):this.executeCodeFlow(s,n,r)}async executeCodeFlow(e,n,r){const s=e.correlationId,c=this.initializeServerTelemetryManager(Zt.acquireTokenPopup),d=r||await ke(tC,re.GeneratePkceCodes,this.logger,this.performanceClient,s)(this.performanceClient,this.logger,s),f={...e,codeChallenge:d.challenge};try{const g=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,s)({serverTelemetryManager:c,requestAuthority:f.authority,requestAzureCloudOptions:f.azureCloudOptions,requestExtraQueryParameters:f.extraQueryParameters,account:f.account});if(f.httpMethod===Ou.POST)return await this.executeCodeFlowWithPost(f,n,g,d.verifier);{const y=await ke(nA,re.GetAuthCodeUrl,this.logger,this.performanceClient,s)(this.config,g.authority,f,this.logger,this.performanceClient),v=this.initiateAuthRequest(y,n);this.eventHandler.emitEvent(Ge.POPUP_OPENED,et.Popup,{popupWindow:v},null);const x=await this.monitorPopupForHash(v,n.popupWindowParent),b=Bo(Qm,re.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(x,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await ke(cv,re.HandleResponseCode,this.logger,this.performanceClient,s)(e,b,d.verifier,Zt.acquireTokenPopup,this.config,g,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(g){throw n.popup?.close(),g instanceof en&&(g.setCorrelationId(this.correlationId),c.cacheFailedRequest(g)),g}}async executeEarFlow(e,n){const r=e.correlationId,s=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),c=await ke(VE,re.GenerateEarKey,this.logger,this.performanceClient,r)(),d={...e,earJwk:c},f=n.popup||this.openPopup("about:blank",n);(await rA(f.document,this.config,s,d,this.logger,this.performanceClient)).submit();const y=await ke(this.monitorPopupForHash.bind(this),re.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(f,n.popupWindowParent),v=Bo(Qm,re.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return ke(iA,re.HandleResponseEar,this.logger,this.performanceClient,r)(d,v,Zt.acquireTokenPopup,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,n,r,s){const c=e.correlationId,d=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,c)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),f=n.popup||this.openPopup("about:blank",n);(await oA(f.document,this.config,d,e,this.logger,this.performanceClient)).submit();const y=await ke(this.monitorPopupForHash.bind(this),re.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,c)(f,n.popupWindowParent),v=Bo(Qm,re.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(y,this.config.auth.OIDCOptions.serverResponseType,this.logger);return ke(cv,re.HandleResponseCode,this.logger,this.performanceClient,c)(e,v,s,Zt.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,n,r,s){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Ge.LOGOUT_START,et.Popup,e);const c=this.initializeServerTelemetryManager(Zt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);const d=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:c,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===vo.OIDC){if(this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,et.Popup,e),s){const y={apiId:Zt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=jt.getAbsoluteUrl(s,$a());await this.navigationClient.navigateInternal(v,y)}n.popup?.close();return}}const f=d.getLogoutUri(e);this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,et.Popup,e);const g=this.openPopup(f,n);if(this.eventHandler.emitEvent(Ge.POPUP_OPENED,et.Popup,{popupWindow:g},null),await this.monitorPopupForHash(g,n.popupWindowParent).catch(()=>{}),s){const y={apiId:Zt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=jt.getAbsoluteUrl(s,$a());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${v}`),await this.navigationClient.navigateInternal(v,y)}else this.logger.verbose("No main window navigation requested")}catch(d){throw n.popup?.close(),d instanceof en&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),this.eventHandler.emitEvent(Ge.LOGOUT_FAILURE,et.Popup,null,d),this.eventHandler.emitEvent(Ge.LOGOUT_END,et.Popup),d}this.eventHandler.emitEvent(Ge.LOGOUT_END,et.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Fe(Wv)}monitorPopupForHash(e,n){return new Promise((r,s)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const c=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(c),s(Fe(sg));return}let d="";try{d=e.location.href}catch{}if(!d||d==="about:blank")return;clearInterval(c);let f="";const g=this.config.auth.OIDCOptions.serverResponseType;e&&(g===Bv.QUERY?f=e.location.search:f=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(f)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Fe(cI);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),Fe(aI)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:s}){const c=s.screenLeft?s.screenLeft:s.screenX,d=s.screenTop?s.screenTop:s.screenY,f=s.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,g=s.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let y=r.popupSize?.width,v=r.popupSize?.height,x=r.popupPosition?.top,b=r.popupPosition?.left;return(!y||y<0||y>f)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),y=po.POPUP_WIDTH),(!v||v<0||v>g)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),v=po.POPUP_HEIGHT),(!x||x<0||x>g)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),x=Math.max(0,g/2-po.POPUP_HEIGHT/2+d)),(!b||b<0||b>f)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),b=Math.max(0,f/2-po.POPUP_WIDTH/2+c)),s.open(e,n,`width=${y}, height=${v}, top=${x}, left=${b}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,n){return`${po.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${po.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function hU(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation");return(t.length?t[0]:void 0)?.type}class fU extends nf{constructor(e,n,r,s,c,d,f,g,y,v){super(e,n,r,s,c,d,f,y,v),this.nativeStorage=g}async acquireToken(e){const n=await ke(this.initializeAuthorizationRequest.bind(this),re.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,et.Redirect);n.platformBroker=cg(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=c=>{c.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Ge.RESTORE_FROM_BFCACHE,et.Redirect))},s=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${s}`),this.browserStorage.setTemporaryCache(Kn.ORIGIN_URI,s,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===vo.EAR?await this.executeEarFlow(n):await this.executeCodeFlow(n,e.onRedirectNavigate)}catch(c){throw c instanceof en&&c.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),c}}async executeCodeFlow(e,n){const r=e.correlationId,s=this.initializeServerTelemetryManager(Zt.acquireTokenRedirect),c=await ke(tC,re.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),d={...e,codeChallenge:c.challenge};this.browserStorage.cacheAuthorizeRequest(d,c.verifier);try{if(d.httpMethod===Ou.POST)return await this.executeCodeFlowWithPost(d);{const f=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:d.authority,requestAzureCloudOptions:d.azureCloudOptions,requestExtraQueryParameters:d.extraQueryParameters,account:d.account}),g=await ke(nA,re.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,f.authority,d,this.logger,this.performanceClient);return await this.initiateAuthRequest(g,n)}}catch(f){throw f instanceof en&&(f.setCorrelationId(this.correlationId),s.cacheFailedRequest(f)),f}}async executeEarFlow(e){const n=e.correlationId,r=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await ke(VE,re.GenerateEarKey,this.logger,this.performanceClient,n)(),c={...e,earJwk:s};return this.browserStorage.cacheAuthorizeRequest(c),(await rA(document,this.config,r,c,this.logger,this.performanceClient)).submit(),new Promise((f,g)=>{setTimeout(()=>{g(Fe(iv,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const n=e.correlationId,r=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await oA(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((c,d)=>{setTimeout(()=>{d(Fe(iv,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",n,r,s){const c=this.initializeServerTelemetryManager(Zt.handleRedirectPromise);try{const[d,f]=this.getRedirectResponse(e||"");if(!d)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),hU()!=="back_forward"?s.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const g=this.browserStorage.getTemporaryCache(Kn.ORIGIN_URI,!0)||Re.EMPTY_STRING,y=cS(g),v=cS(window.location.href);if(y===v&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),g.indexOf("#")>-1&&gL(g),await this.handleResponse(d,n,r,c);if(this.config.auth.navigateToLoginRequestUrl){if(!WE()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Kn.URL_HASH,f,!0);const x={apiId:Zt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let b=!0;if(!g||g==="null"){const A=yL();this.browserStorage.setTemporaryCache(Kn.ORIGIN_URI,A,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),b=await this.navigationClient.navigateInternal(A,x)}else this.logger.verbose(`Navigating to loginRequestUrl: ${g}`),b=await this.navigationClient.navigateInternal(g,x);if(!b)return await this.handleResponse(d,n,r,c)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(d,n,r,c);return null}catch(d){throw d instanceof en&&(d.setCorrelationId(this.correlationId),c.cacheFailedRequest(d)),d}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===Bv.QUERY?n=window.location.search:n=window.location.hash);let r=Yy(n);if(r){try{QL(r,this.browserCrypto,et.Redirect)}catch(c){return c instanceof en&&this.logger.error(`Interaction type validation failed due to ${c.errorCode}: ${c.errorMessage}`),[null,""]}return UI(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const s=this.browserStorage.getTemporaryCache(Kn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Kn.URL_HASH)),s&&(r=Yy(s),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,s]):[null,""]}async handleResponse(e,n,r,s){if(!e.state)throw Fe(HE);if(e.ear_jwe){const f=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n.correlationId)({requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account});return ke(iA,re.HandleResponseEar,this.logger,this.performanceClient,n.correlationId)(n,e,Zt.acquireTokenRedirect,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const d=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:s,requestAuthority:n.authority});return ke(cv,re.HandleResponseCode,this.logger,this.performanceClient,n.correlationId)(n,e,r,Zt.acquireTokenRedirect,this.config,d,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Zt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=n||this.config.auth.onRedirectNavigate;if(typeof s=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),s(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Fe(Wv)}async logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Zt.logout);try{this.eventHandler.emitEvent(Ge.LOGOUT_START,et.Redirect,e),await this.clearCacheOnLogout(this.correlationId,n.account);const s={apiId:Zt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(c.authority.protocolMode===vo.OIDC)try{c.authority.endSessionEndpoint}catch{if(n.account?.homeAccountId){this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,et.Redirect,n);return}}const d=c.getLogoutUri(n);if(this.eventHandler.emitEvent(Ge.LOGOUT_SUCCESS,et.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(d)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,gl.SIGNOUT),await this.navigationClient.navigateExternal(d,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,gl.SIGNOUT),await this.navigationClient.navigateExternal(d,s);return}}catch(s){throw s instanceof en&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(Ge.LOGOUT_FAILURE,et.Redirect,null,s),this.eventHandler.emitEvent(Ge.LOGOUT_END,et.Redirect),s}this.eventHandler.emitEvent(Ge.LOGOUT_END,et.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return jt.getAbsoluteUrl(n,$a())}}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function mU(t,e,n,r,s){if(e.addQueueMeasurement(re.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),Fe(Wv);return s?ke(yU,re.SilentHandlerLoadFrame,n,e,r)(t,s,e,r):Bo(vU,re.SilentHandlerLoadFrameSync,n,e,r)(t)}async function gU(t,e,n,r,s){const c=nC();if(!c.contentDocument)throw"No document associated with iframe!";return(await oA(c.contentDocument,t,e,n,r,s)).submit(),c}async function pU(t,e,n,r,s){const c=nC();if(!c.contentDocument)throw"No document associated with iframe!";return(await rA(c.contentDocument,t,e,n,r,s)).submit(),c}async function US(t,e,n,r,s,c,d){return r.addQueueMeasurement(re.SilentHandlerMonitorIframeForHash,c),new Promise((f,g)=>{e<rx&&s.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${rx}ms). This may result in timeouts.`);const y=window.setTimeout(()=>{window.clearInterval(v),g(Fe(lI))},e),v=window.setInterval(()=>{let x="";const b=t.contentWindow;try{x=b?b.location.href:""}catch{}if(!x||x==="about:blank")return;let A="";b&&(d===Bv.QUERY?A=b.location.search:A=b.location.hash),window.clearTimeout(y),window.clearInterval(v),f(A)},n)}).finally(()=>{Bo(CU,re.RemoveHiddenIframe,s,r,c)(t)})}function yU(t,e,n,r){return n.addQueueMeasurement(re.SilentHandlerLoadFrame,r),new Promise((s,c)=>{const d=nC();window.setTimeout(()=>{if(!d){c("Unable to load iframe");return}d.src=t,s(d)},e)})}function vU(t){const e=nC();return e.src=t,e}function nC(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function CU(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class wU extends nf{constructor(e,n,r,s,c,d,f,g,y,v,x){super(e,n,r,s,c,d,g,v,x),this.apiId=f,this.nativeStorage=y}async acquireToken(e){this.performanceClient.addQueueMeasurement(re.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==Cr.NONE&&n.prompt!==Cr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${Cr.NONE}`),n.prompt=Cr.NONE):n.prompt=Cr.NONE;const r=await ke(this.initializeAuthorizationRequest.bind(this),re.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,et.Silent);return r.platformBroker=cg(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),zI(r.authority),this.config.auth.protocolMode===vo.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let n;const r=this.initializeServerTelemetryManager(this.apiId);try{return n=await ke(this.createAuthCodeClient.bind(this),re.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await ke(this.silentTokenHelper.bind(this),re.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(n,e)}catch(s){if(s instanceof en&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),!n||!(s instanceof en)||s.errorCode!==po.INVALID_GRANT_ERROR)throw s;return this.performanceClient.addFields({retryError:s.errorCode},this.correlationId),await ke(this.silentTokenHelper.bind(this),re.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(n,e)}}async executeEarFlow(e){const n=e.correlationId,r=await ke(this.getDiscoveredAuthority.bind(this),re.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await ke(VE,re.GenerateEarKey,this.logger,this.performanceClient,n)(),c={...e,earJwk:s},d=await ke(pU,re.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,n)(this.config,r,c,this.logger,this.performanceClient),f=this.config.auth.OIDCOptions.serverResponseType,g=await ke(US,re.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,n)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,f),y=Bo(Qm,re.DeserializeResponse,this.logger,this.performanceClient,n)(g,f,this.logger);return ke(iA,re.HandleResponseEar,this.logger,this.performanceClient,n)(c,y,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Fe(Xv))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(re.SilentIframeClientTokenHelper,r);const s=await ke(tC,re.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),c={...n,codeChallenge:s.challenge};let d;if(n.httpMethod===Ou.POST)d=await ke(gU,re.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,c,this.logger,this.performanceClient);else{const v=await ke(nA,re.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,c,this.logger,this.performanceClient);d=await ke(mU,re.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(v,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}const f=this.config.auth.OIDCOptions.serverResponseType,g=await ke(US,re.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(d,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,f),y=Bo(Qm,re.DeserializeResponse,this.logger,this.performanceClient,r)(g,f,this.logger);return ke(cv,re.HandleResponseCode,this.logger,this.performanceClient,r)(n,y,s.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class bU extends nf{async acquireToken(e){this.performanceClient.addQueueMeasurement(re.SilentRefreshClientAcquireToken,e.correlationId);const n=await ke(eA,re.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const s=this.initializeServerTelemetryManager(Zt.acquireTokenSilent_silentFlow),c=await this.createRefreshTokenClient({serverTelemetryManager:s,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return ke(c.acquireTokenByRefreshToken.bind(c),re.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(d=>{throw d.setCorrelationId(this.correlationId),s.cacheFailedRequest(d),d})}logout(){return Promise.reject(Fe(Xv))}async createRefreshTokenClient(e){const n=await ke(this.getClientConfiguration.bind(this),re.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Dj(n,this.performanceClient)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class xU{constructor(e,n,r,s){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=s}async loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Fe(Jv);const s=e.correlationId||as(),c=n.id_token?Zh(n.id_token,is):void 0,d={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},f=e.authority?new Lr(Lr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,d,this.logger,e.correlationId||as()):void 0,g=await this.loadAccount(e,r.clientInfo||n.client_info||"",s,c,f),y=await this.loadIdToken(n,g.homeAccountId,g.environment,g.realm,s),v=await this.loadAccessToken(e,n,g.homeAccountId,g.environment,g.realm,r,s),x=await this.loadRefreshToken(n,g.homeAccountId,g.environment,s);return this.generateAuthenticationResult(e,{account:g,idToken:y,accessToken:v,refreshToken:x},c,f)}async loadAccount(e,n,r,s,c){if(this.logger.verbose("TokenCache - loading account"),e.account){const y=ss.createFromAccountInfo(e.account);return await this.storage.setAccount(y,r),y}else if(!c||!n&&!s)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Fe(vI);const d=ss.generateHomeAccountId(n,c.authorityType,this.logger,this.cryptoObj,s),f=s?.tid,g=ME(this.storage,c,d,is,r,s,n,c.hostnameAndPort,f,void 0,void 0,this.logger);return await this.storage.setAccount(g,r),g}async loadIdToken(e,n,r,s,c){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const d=qv(n,r,e.id_token,this.config.auth.clientId,s);return await this.storage.setIdTokenCredential(d,c),d}async loadAccessToken(e,n,r,s,c,d,f){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const g=n.scope?er.fromString(n.scope):new er(e.scopes),y=d.expiresOn||n.expires_in+wo(),v=d.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+wo(),x=$v(r,s,n.access_token,this.config.auth.clientId,c,g.printScopes(),y,v,is);return await this.storage.setAccessTokenCredential(x,f),x}async loadRefreshToken(e,n,r,s){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const c=Kk(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(c,s),c}generateAuthenticationResult(e,n,r,s){let c="",d=[],f=null,g;n?.accessToken&&(c=n.accessToken.secret,d=er.fromString(n.accessToken.target).asArray(),f=Ih(n.accessToken.expiresOn),g=Ih(n.accessToken.extendedExpiresOn));const y=n.account;return{authority:s?s.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:d,account:y.getAccountInfo(),idToken:n.idToken?.secret||"",idTokenClaims:r||{},accessToken:c,fromCache:!0,expiresOn:f,correlationId:e.correlationId||"",requestId:"",extExpiresOn:g,familyId:n.refreshToken?.familyId||"",tokenType:n?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:y.cloudGraphHostName||"",msGraphHost:y.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class EU extends Wk{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v4.25.0 2025-10-09 */class AU extends nf{constructor(e,n,r,s,c,d,f,g,y,v){super(e,n,r,s,c,d,g,y,v),this.apiId=f}async acquireToken(e){if(!e.code)throw Fe(CI);const n=await ke(this.initializeAuthorizationRequest.bind(this),re.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,et.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const s={...n,code:e.code},c=await ke(this.getClientConfiguration.bind(this),re.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),d=new EU(c);this.logger.verbose("Auth code client created");const f=new $I(d,this.browserStorage,s,this.logger,this.performanceClient);return await ke(f.handleCodeResponseFromServer.bind(f),re.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(s){throw s instanceof en&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}logout(){return Promise.reject(Fe(Xv))}}/*! @azure/msal-browser v4.25.0 2025-10-09 */function TU(t,e,n){const r=window.msal?.clientIds||[],s=r.length,c=r.filter(d=>d===t).length;c>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:s,sameClientIdInstanceCount:c})}/*! @azure/msal-browser v4.25.0 2025-10-09 */function ly(t,e,n){try{XE(t)}catch(r){throw e.end({success:!1},r,n),r}}class rC{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Wa(this.logger,this.performanceClient):Vy,this.eventHandler=new $L(this.logger),this.browserStorage=this.isBrowserEnvironment?new ax(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,Sj(this.config.auth)):LL(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const n={cacheLocation:tr.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:tr.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new ax(this.config.auth.clientId,n,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new xU(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,n){const r=new rC(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,n){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Ge.INITIALIZE_END);return}const r=e?.correlationId||this.getRequestCorrelationId(),s=this.config.system.allowPlatformBroker,c=this.performanceClient.startMeasurement(re.InitializeClientApplication,r);if(this.eventHandler.emitEvent(Ge.INITIALIZE_START),!n)try{this.logMultipleInstances(c)}catch{}if(await ke(this.browserStorage.initialize.bind(this.browserStorage),re.InitializeCache,this.logger,this.performanceClient,r)(r),s)try{this.platformAuthProvider=await lU(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(d){this.logger.verbose(d)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Bo(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),re.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(Ge.INITIALIZE_END),c.end({allowPlatformBroker:s,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),BI(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===gl.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),s=this.browserStorage.getCachedNativeRequest(),c=s&&this.platformAuthProvider&&!e;let d;this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_START,et.Redirect);let f;try{if(c&&this.platformAuthProvider){d=this.performanceClient.startMeasurement(re.AcquireTokenRedirect,s?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),d.add({isPlatformBrokerRequest:!0});const g=new Oy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Zt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,s.accountId,this.nativeInternalStorage,s.correlationId);f=ke(g.handleRedirectPromise.bind(g),re.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(this.performanceClient,d.event.correlationId)}else{const[g,y]=this.browserStorage.getCachedRequest(),v=g.correlationId;d=this.performanceClient.startMeasurement(re.AcquireTokenRedirect,v),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const x=this.createRedirectClient(v);f=ke(x.handleRedirectPromise.bind(x),re.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,d.event.correlationId)(e,g,y,d)}}catch(g){throw this.browserStorage.resetRequestCache(),g}return f.then(g=>(g?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Ge.LOGIN_SUCCESS,et.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,et.Redirect,g),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),d.end({success:!0},void 0,g.account)):d.event.errorCode?d.end({success:!1},void 0):d.discard(),this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_END,et.Redirect),g)).catch(g=>{this.browserStorage.resetRequestCache();const y=g;throw r.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,et.Redirect,null,y):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,et.Redirect,null,y),this.eventHandler.emitEvent(Ge.HANDLE_REDIRECT_END,et.Redirect),d.end({success:!1},y),g})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(re.AcquireTokenPreRedirect,n);r.add({scenarioId:e.scenarioId});const s=e.onRedirectNavigate;if(s)e.onRedirectNavigate=d=>{const f=typeof s=="function"?s(d):void 0;return r.add({navigateCallbackResult:f!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,f};else{const d=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=f=>{const g=typeof d=="function"?d(f):void 0;return r.add({navigateCallbackResult:g!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,g}}const c=this.getAllAccounts().length>0;try{kS(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,gl.SIGNIN),c?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,et.Redirect,e):this.eventHandler.emitEvent(Ge.LOGIN_START,et.Redirect,e);let d;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?d=new Oy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Zt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(g=>{if(r.add({brokerErrorName:g.name,brokerErrorCode:g.errorCode}),g instanceof qs&&Ah(g))return this.platformAuthProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(g instanceof Co)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw g}):d=this.createRedirectClient(n).acquireToken(e),await d}catch(d){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(re.AcquireTokenRedirect,n).end({success:!1},d,e.account):r.end({success:!1},d,e.account),c?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,et.Redirect,null,d):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,et.Redirect,null,d),d}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(re.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",n),ly(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,gl.SIGNIN)}catch(f){return Promise.reject(f)}const s=this.getAllAccounts();s.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,et.Popup,e):this.eventHandler.emitEvent(Ge.LOGIN_START,et.Popup,e);let c;const d=this.getPreGeneratedPkceCodes(n);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),c=this.acquireTokenNative({...e,correlationId:n},Zt.acquireTokenPopup).then(f=>(r.end({success:!0},void 0,f.account),f)).catch(f=>{if(r.add({brokerErrorName:f.name,brokerErrorCode:f.errorCode}),f instanceof qs&&Ah(f))return this.platformAuthProvider=void 0,this.createPopupClient(n).acquireToken(e,d);if(f instanceof Co)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e,d);throw f})):c=this.createPopupClient(n).acquireToken(e,d),c.then(f=>(s.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Ge.LOGIN_SUCCESS,et.Popup,f):this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,et.Popup,f),r.end({success:!0,accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length},void 0,f.account),f)).catch(f=>(s.length>0?this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,et.Popup,null,f):this.eventHandler.emitEvent(Ge.LOGIN_FAILURE,et.Popup,null,f),r.end({success:!1},f,e.account),Promise.reject(f))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(re.SsoSilent,n),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),ly(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(Ge.SSO_SILENT_START,et.Silent,r);let s;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),s=this.acquireTokenNative(r,Zt.ssoSilent).catch(c=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof qs&&Ah(c))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw c})):s=this.createSilentIframeClient(r.correlationId).acquireToken(r),s.then(c=>(this.eventHandler.emitEvent(Ge.SSO_SILENT_SUCCESS,et.Silent,c),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),c)).catch(c=>{throw this.eventHandler.emitEvent(Ge.SSO_SILENT_FAILURE,et.Silent,null,c),this.ssoSilentMeasurement?.end({success:!1},c,e.account),c}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(re.AcquireTokenByCode,n);ly(this.initialized,r),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_START,et.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Fe(bI);if(e.code){const s=e.code;let c=this.hybridAuthCodeResponses.get(s);return c?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),c=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(d=>(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_SUCCESS,et.Silent,d),this.hybridAuthCodeResponses.delete(s),r.end({success:!0,accessTokenSize:d.accessToken.length,idTokenSize:d.idToken.length},void 0,d.account),d)).catch(d=>{throw this.hybridAuthCodeResponses.delete(s),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_FAILURE,et.Silent,null,d),r.end({success:!1},d),d}),this.hybridAuthCodeResponses.set(s,c)),await c}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});const s=await this.acquireTokenNative({...e,correlationId:n},Zt.acquireTokenByCode,e.nativeAccountId).catch(c=>{throw c instanceof qs&&Ah(c)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c});return r.end({success:!0},void 0,s.account),s}else throw Fe(xI);else throw Fe(wI)}catch(s){throw this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_BY_CODE_FAILURE,et.Silent,null,s),r.end({success:!1},s),s}}async acquireTokenByCodeAsync(e){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(re.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(s=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:s.fromCache}),s)).catch(s=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(re.AcquireTokenFromCache,e.correlationId),n){case Jr.Default:case Jr.AccessToken:case Jr.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return ke(r.acquireToken.bind(r),re.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw De(wl)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(re.AcquireTokenByRefreshToken,e.correlationId),n){case Jr.Default:case Jr.AccessTokenAndRefreshToken:case Jr.RefreshToken:case Jr.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return ke(r.acquireToken.bind(r),re.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw De(wl)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(re.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return ke(n.acquireToken.bind(n),re.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return kS(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,gl.SIGNOUT),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return XE(this.initialized),this.browserStorage.setInteractionInProgress(!0,gl.SIGNOUT),this.createPopupClient(n).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){const n=this.getRequestCorrelationId();return UL(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return HL(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return BL(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return zL(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return FL(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();KL(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return GL(this.browserStorage,e)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=ss.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r,s){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Fe(FE);return new Oy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,s)}canUsePlatformBroker(e,n){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!cg(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Cr.NONE:case Cr.CONSENT:case Cr.LOGIN:case Cr.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new dU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new fU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new wU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Zt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new YI(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new bU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new AU(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Zt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return HI(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==tr.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==tr.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?as():Re.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||ES})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||ES})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(re.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),ly(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",n);const s=e.account||this.getActiveAccount();if(!s)throw Fe(fI);return this.acquireTokenSilentDeduped(e,s,n).then(c=>(r.end({success:!0,fromCache:c.fromCache,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length},void 0,c.account),{...c,state:e.state,correlationId:n})).catch(c=>{throw c instanceof en&&c.setCorrelationId(n),r.end({success:!1},c,s),c})}async acquireTokenSilentDeduped(e,n,r){const s=Vv(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority},n.homeAccountId),c=JSON.stringify(s),d=this.activeSilentTokenRequests.get(c);if(typeof d>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const f=ke(this.acquireTokenSilentAsync.bind(this),re.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)({...e,correlationId:r},n);return this.activeSilentTokenRequests.set(c,f),f.finally(()=>{this.activeSilentTokenRequests.delete(c)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),d}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(re.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_START,et.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const s=await ke(VL,re.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),c=e.cacheLookupPolicy||Jr.Default;return this.acquireTokenSilentNoIframe(s,c).catch(async f=>{if(SU(f,c))if(this.activeIframeRequest)if(c!==Jr.Skip){const[y,v]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${v}`,s.correlationId);const x=this.performanceClient.startMeasurement(re.AwaitConcurrentIframe,s.correlationId);x.add({awaitIframeCorrelationId:v});const b=await y;if(x.end({success:b}),b)return this.logger.verbose(`Parallel iframe request with correlationId: ${v} succeeded. Retrying cache and/or RT redemption`,s.correlationId),this.acquireTokenSilentNoIframe(s,c);throw this.logger.info(`Iframe request with correlationId: ${v} failed. Interaction is required.`),f}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",s.correlationId),ke(this.acquireTokenBySilentIframe.bind(this),re.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s);else{let y;return this.activeIframeRequest=[new Promise(v=>{y=v}),s.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",s.correlationId),ke(this.acquireTokenBySilentIframe.bind(this),re.AcquireTokenBySilentIframe,this.logger,this.performanceClient,s.correlationId)(s).then(v=>(y(!0),v)).catch(v=>{throw y(!1),v}).finally(()=>{this.activeIframeRequest=void 0})}else throw f}).then(f=>(this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_SUCCESS,et.Silent,f),this.performanceClient.addFields({fromCache:f.fromCache},e.correlationId),f)).catch(f=>{throw this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_FAILURE,et.Silent,null,f),f}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return cg(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Zt.acquireTokenSilent_silentFlow,e.account.nativeAccountId,n).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof qs&&Ah(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,De(wl)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),n===Jr.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),ke(this.acquireTokenFromCache.bind(this),re.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Jr.AccessToken)throw r;return this.eventHandler.emitEvent(Ge.ACQUIRE_TOKEN_NETWORK_START,et.Silent,e),ke(this.acquireTokenByRefreshToken.bind(this),re.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await ke(tC,re.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const n=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${n?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!n},e),n}logMultipleInstances(e){const n=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(n),TU(n,e,this.logger)}}function SU(t,e){const n=!(t instanceof Co&&t.subError!==Qv),r=t.errorCode===po.INVALID_GRANT_ERROR||t.errorCode===wl,s=n&&r||t.errorCode===nv||t.errorCode===NE,c=tL.includes(e);return s&&c}/*! @azure/msal-browser v4.25.0 2025-10-09 */async function _U(t,e){const n=new Bu(t);return await n.initialize(),rC.createController(n,e)}/*! @azure/msal-browser v4.25.0 2025-10-09 */class aA{static async createPublicClientApplication(e){const n=await _U(e);return new aA(e,n)}constructor(e,n){this.isBroker=!1,this.controller=n||new rC(new Bu(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v4.25.0 2025-10-09 */const kU={initialize:()=>Promise.reject(Fn(Zn)),acquireTokenPopup:()=>Promise.reject(Fn(Zn)),acquireTokenRedirect:()=>Promise.reject(Fn(Zn)),acquireTokenSilent:()=>Promise.reject(Fn(Zn)),acquireTokenByCode:()=>Promise.reject(Fn(Zn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Fn(Zn)),loginPopup:()=>Promise.reject(Fn(Zn)),loginRedirect:()=>Promise.reject(Fn(Zn)),logout:()=>Promise.reject(Fn(Zn)),logoutRedirect:()=>Promise.reject(Fn(Zn)),logoutPopup:()=>Promise.reject(Fn(Zn)),ssoSilent:()=>Promise.reject(Fn(Zn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Fn(Zn)},getLogger:()=>{throw Fn(Zn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Fn(Zn)},hydrateCache:()=>Promise.reject(Fn(Zn)),clearCache:()=>Promise.reject(Fn(Zn))};/*! @azure/msal-browser v4.25.0 2025-10-09 */class IU{static getInteractionStatusFromEvent(e,n){switch(e.eventType){case Ge.LOGIN_START:return kn.Login;case Ge.SSO_SILENT_START:return kn.SsoSilent;case Ge.ACQUIRE_TOKEN_START:if(e.interactionType===et.Redirect||e.interactionType===et.Popup)return kn.AcquireToken;break;case Ge.HANDLE_REDIRECT_START:return kn.HandleRedirect;case Ge.LOGOUT_START:return kn.Logout;case Ge.SSO_SILENT_SUCCESS:case Ge.SSO_SILENT_FAILURE:if(n&&n!==kn.SsoSilent)break;return kn.None;case Ge.LOGOUT_END:if(n&&n!==kn.Logout)break;return kn.None;case Ge.HANDLE_REDIRECT_END:if(n&&n!==kn.HandleRedirect)break;return kn.None;case Ge.LOGIN_SUCCESS:case Ge.LOGIN_FAILURE:case Ge.ACQUIRE_TOKEN_SUCCESS:case Ge.ACQUIRE_TOKEN_FAILURE:case Ge.RESTORE_FROM_BFCACHE:if(e.interactionType===et.Redirect||e.interactionType===et.Popup){if(n&&n!==kn.Login&&n!==kn.AcquireToken)break;return kn.None}break}return null}}/*! @azure/msal-react v3.0.20 2025-09-24 */const RU={instance:kU,inProgress:kn.None,accounts:[],logger:new Qa({})},cA=k.createContext(RU);cA.Consumer;/*! @azure/msal-react v3.0.20 2025-09-24 */function HS(t,e){if(t.length!==e.length)return!1;const n=[...e];return t.every(r=>{const s=n.shift();return!r||!s?!1:r.homeAccountId===s.homeAccountId&&r.localAccountId===s.localAccountId&&r.username===s.username})}/*! @azure/msal-react v3.0.20 2025-09-24 */const NU="@azure/msal-react",BS="3.0.20";/*! @azure/msal-react v3.0.20 2025-09-24 */const uv={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},OU=(t,e)=>{const{type:n,payload:r}=e;let s=t.inProgress;switch(n){case uv.UNBLOCK_INPROGRESS:t.inProgress===kn.Startup&&(s=kn.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case uv.EVENT:const d=r.message,f=IU.getInteractionStatusFromEvent(d,t.inProgress);f&&(r.logger.info(`MsalProvider - ${d.eventType} results in setting inProgress from ${t.inProgress} to ${f}`),s=f);break;default:throw new Error(`Unknown action type: ${n}`)}if(s===kn.Startup)return t;const c=r.instance.getAllAccounts();return s!==t.inProgress&&!HS(c,t.accounts)?{...t,inProgress:s,accounts:c}:s!==t.inProgress?{...t,inProgress:s}:HS(c,t.accounts)?t:{...t,accounts:c}};function MU({instance:t,children:e}){k.useEffect(()=>{t.initializeWrapperLibrary(Jj.React,BS)},[t]);const n=k.useMemo(()=>t.getLogger().clone(NU,BS),[t]),[r,s]=k.useReducer(OU,void 0,()=>({inProgress:kn.Startup,accounts:[]}));k.useEffect(()=>{const d=t.addEventCallback(f=>{s({payload:{instance:t,logger:n,message:f},type:uv.EVENT})});return n.verbose(`MsalProvider - Registered event callback with id: ${d}`),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{s({payload:{instance:t,logger:n},type:uv.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{d&&(n.verbose(`MsalProvider - Removing event callback ${d}`),t.removeEventCallback(d))}},[t,n]);const c={instance:t,inProgress:r.inProgress,accounts:r.accounts,logger:n};return mo.createElement(cA.Provider,{value:c},e)}/*! @azure/msal-react v3.0.20 2025-09-24 */const lA=()=>k.useContext(cA);/*! @azure/msal-react v3.0.20 2025-09-24 */function PU(t,e){return t.length>0}function DU(t){const{accounts:e,inProgress:n}=lA();return k.useMemo(()=>n===kn.Startup?!1:PU(e),[e,n,t])}function zS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oC(...t){return e=>{let n=!1;const r=t.map(s=>{const c=zS(s,e);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let s=0;s<r.length;s++){const c=r[s];typeof c=="function"?c():zS(t[s],null)}}}}function Lt(...t){return k.useCallback(oC(...t),t)}function jh(t){const e=LU(t),n=k.forwardRef((r,s)=>{const{children:c,...d}=r,f=k.Children.toArray(c),g=f.find(HU);if(g){const y=g.props.children,v=f.map(x=>x===g?k.Children.count(y)>1?k.Children.only(null):k.isValidElement(y)?y.props.children:null:x);return h.jsx(e,{...d,ref:s,children:k.isValidElement(y)?k.cloneElement(y,void 0,v):null})}return h.jsx(e,{...d,ref:s,children:c})});return n.displayName=`${t}.Slot`,n}var jU=jh("Slot");function LU(t){const e=k.forwardRef((n,r)=>{const{children:s,...c}=n;if(k.isValidElement(s)){const d=zU(s),f=BU(c,s.props);return s.type!==k.Fragment&&(f.ref=r?oC(r,d):d),k.cloneElement(s,f)}return k.Children.count(s)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var UU=Symbol("radix.slottable");function HU(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===UU}function BU(t,e){const n={...e};for(const r in e){const s=t[r],c=e[r];/^on[A-Z]/.test(r)?s&&c?n[r]=(...f)=>{const g=c(...f);return s(...f),g}:s&&(n[r]=s):r==="style"?n[r]={...s,...c}:r==="className"&&(n[r]=[s,c].filter(Boolean).join(" "))}return{...t,...n}}function zU(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function XI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=XI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function JI(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=XI(t))&&(r&&(r+=" "),r+=e);return r}const FS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,KS=JI,ZI=(t,e)=>n=>{var r;if(e?.variants==null)return KS(t,n?.class,n?.className);const{variants:s,defaultVariants:c}=e,d=Object.keys(s).map(y=>{const v=n?.[y],x=c?.[y];if(v===null)return null;const b=FS(v)||FS(x);return s[y][b]}),f=n&&Object.entries(n).reduce((y,v)=>{let[x,b]=v;return b===void 0||(y[x]=b),y},{}),g=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((y,v)=>{let{class:x,className:b,...A}=v;return Object.entries(A).every(I=>{let[_,N]=I;return Array.isArray(N)?N.includes({...c,...f}[_]):{...c,...f}[_]===N})?[...y,x,b]:y},[]);return KS(t,d,g,n?.class,n?.className)},uA="-",FU=t=>{const e=GU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:d=>{const f=d.split(uA);return f[0]===""&&f.length!==1&&f.shift(),eR(f,e)||KU(d)},getConflictingClassGroupIds:(d,f)=>{const g=n[d]||[];return f&&r[d]?[...g,...r[d]]:g}}},eR=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?eR(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const c=t.join(uA);return e.validators.find(({validator:d})=>d(c))?.classGroupId},GS=/^\[(.+)\]$/,KU=t=>{if(GS.test(t)){const e=GS.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GU=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)cx(n[s],r,s,e);return r},cx=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const c=s===""?e:qS(e,s);c.classGroupId=n;return}if(typeof s=="function"){if(qU(s)){cx(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([c,d])=>{cx(d,qS(e,c),n,r)})})},qS=(t,e)=>{let n=t;return e.split(uA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qU=t=>t.isThemeGetter,$U=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(c,d)=>{n.set(c,d),e++,e>t&&(e=0,r=n,n=new Map)};return{get(c){let d=n.get(c);if(d!==void 0)return d;if((d=r.get(c))!==void 0)return s(c,d),d},set(c,d){n.has(c)?n.set(c,d):s(c,d)}}},lx="!",ux=":",VU=ux.length,YU=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const c=[];let d=0,f=0,g=0,y;for(let I=0;I<s.length;I++){let _=s[I];if(d===0&&f===0){if(_===ux){c.push(s.slice(g,I)),g=I+VU;continue}if(_==="/"){y=I;continue}}_==="["?d++:_==="]"?d--:_==="("?f++:_===")"&&f--}const v=c.length===0?s:s.substring(g),x=QU(v),b=x!==v,A=y&&y>g?y-g:void 0;return{modifiers:c,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:A}};if(e){const s=e+ux,c=r;r=d=>d.startsWith(s)?c(d.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:d,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=c=>n({className:c,parseClassName:s})}return r},QU=t=>t.endsWith(lx)?t.substring(0,t.length-1):t.startsWith(lx)?t.substring(1):t,WU=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let c=[];return r.forEach(d=>{d[0]==="["||e[d]?(s.push(...c.sort(),d),c=[]):c.push(d)}),s.push(...c.sort()),s}},XU=t=>({cache:$U(t.cacheSize),parseClassName:YU(t),sortModifiers:WU(t),...FU(t)}),JU=/\s+/,ZU=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:c}=e,d=[],f=t.trim().split(JU);let g="";for(let y=f.length-1;y>=0;y-=1){const v=f[y],{isExternal:x,modifiers:b,hasImportantModifier:A,baseClassName:I,maybePostfixModifierPosition:_}=n(v);if(x){g=v+(g.length>0?" "+g:g);continue}let N=!!_,M=r(N?I.substring(0,_):I);if(!M){if(!N){g=v+(g.length>0?" "+g:g);continue}if(M=r(I),!M){g=v+(g.length>0?" "+g:g);continue}N=!1}const U=c(b).join(":"),O=A?U+lx:U,L=O+M;if(d.includes(L))continue;d.push(L);const H=s(M,N);for(let G=0;G<H.length;++G){const V=H[G];d.push(O+V)}g=v+(g.length>0?" "+g:g)}return g};function eH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=tR(e))&&(r&&(r+=" "),r+=n);return r}const tR=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tR(t[r]))&&(n&&(n+=" "),n+=e);return n};function tH(t,...e){let n,r,s,c=d;function d(g){const y=e.reduce((v,x)=>x(v),t());return n=XU(y),r=n.cache.get,s=n.cache.set,c=f,f(g)}function f(g){const y=r(g);if(y)return y;const v=ZU(g,n);return s(g,v),v}return function(){return c(eH.apply(null,arguments))}}const Jn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},nR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nH=/^\d+\/\d+$/,rH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,sH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yh=t=>nH.test(t),vt=t=>!!t&&!Number.isNaN(Number(t)),cl=t=>!!t&&Number.isInteger(Number(t)),fb=t=>t.endsWith("%")&&vt(t.slice(0,-1)),Ka=t=>rH.test(t),cH=()=>!0,lH=t=>oH.test(t)&&!iH.test(t),oR=()=>!1,uH=t=>sH.test(t),dH=t=>aH.test(t),hH=t=>!Ve(t)&&!Ye(t),fH=t=>rf(t,aR,oR),Ve=t=>nR.test(t),ku=t=>rf(t,cR,lH),mb=t=>rf(t,vH,vt),$S=t=>rf(t,iR,oR),mH=t=>rf(t,sR,dH),uy=t=>rf(t,lR,uH),Ye=t=>rR.test(t),Om=t=>of(t,cR),gH=t=>of(t,CH),VS=t=>of(t,iR),pH=t=>of(t,aR),yH=t=>of(t,sR),dy=t=>of(t,lR,!0),rf=(t,e,n)=>{const r=nR.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},of=(t,e,n=!1)=>{const r=rR.exec(t);return r?r[1]?e(r[1]):n:!1},iR=t=>t==="position"||t==="percentage",sR=t=>t==="image"||t==="url",aR=t=>t==="length"||t==="size"||t==="bg-size",cR=t=>t==="length",vH=t=>t==="number",CH=t=>t==="family-name",lR=t=>t==="shadow",wH=()=>{const t=Jn("color"),e=Jn("font"),n=Jn("text"),r=Jn("font-weight"),s=Jn("tracking"),c=Jn("leading"),d=Jn("breakpoint"),f=Jn("container"),g=Jn("spacing"),y=Jn("radius"),v=Jn("shadow"),x=Jn("inset-shadow"),b=Jn("text-shadow"),A=Jn("drop-shadow"),I=Jn("blur"),_=Jn("perspective"),N=Jn("aspect"),M=Jn("ease"),U=Jn("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...L(),Ye,Ve],G=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],$=()=>[Ye,Ve,g],ee=()=>[yh,"full","auto",...$()],se=()=>[cl,"none","subgrid",Ye,Ve],ce=()=>["auto",{span:["full",cl,Ye,Ve]},cl,Ye,Ve],oe=()=>[cl,"auto",Ye,Ve],he=()=>["auto","min","max","fr",Ye,Ve],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...$()],F=()=>[yh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],Y=()=>[t,Ye,Ve],X=()=>[...L(),VS,$S,{position:[Ye,Ve]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",pH,fH,{size:[Ye,Ve]}],ie=()=>[fb,Om,ku],ue=()=>["","none","full",y,Ye,Ve],me=()=>["",vt,Om,ku],Oe=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],le=()=>[vt,fb,VS,$S],Ce=()=>["","none",I,Ye,Ve],je=()=>["none",vt,Ye,Ve],be=()=>["none",vt,Ye,Ve],we=()=>[vt,Ye,Ve],Ee=()=>[yh,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ka],breakpoint:[Ka],color:[cH],container:[Ka],"drop-shadow":[Ka],ease:["in","out","in-out"],font:[hH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ka],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ka],shadow:[Ka],spacing:["px",vt],text:[Ka],"text-shadow":[Ka],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",yh,Ve,Ye,N]}],container:["container"],columns:[{columns:[vt,Ve,Ye,f]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ee()}],"inset-x":[{"inset-x":ee()}],"inset-y":[{"inset-y":ee()}],start:[{start:ee()}],end:[{end:ee()}],top:[{top:ee()}],right:[{right:ee()}],bottom:[{bottom:ee()}],left:[{left:ee()}],visibility:["visible","invisible","collapse"],z:[{z:[cl,"auto",Ye,Ve]}],basis:[{basis:[yh,"full","auto",f,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[vt,yh,"auto","initial","none",Ve]}],grow:[{grow:["",vt,Ye,Ve]}],shrink:[{shrink:["",vt,Ye,Ve]}],order:[{order:[cl,"first","last","none",Ye,Ve]}],"grid-cols":[{"grid-cols":se()}],"col-start-end":[{col:ce()}],"col-start":[{"col-start":oe()}],"col-end":[{"col-end":oe()}],"grid-rows":[{"grid-rows":se()}],"row-start-end":[{row:ce()}],"row-start":[{"row-start":oe()}],"row-end":[{"row-end":oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":he()}],"auto-rows":[{"auto-rows":he()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[f,"screen",...F()]}],"min-w":[{"min-w":[f,"screen","none",...F()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",n,Om,ku]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ye,mb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",fb,Ve]}],"font-family":[{font:[gH,Ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ye,Ve]}],"line-clamp":[{"line-clamp":[vt,"none",Ye,mb]}],leading:[{leading:[c,...$()]}],"list-image":[{"list-image":["none",Ye,Ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ye,Ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[vt,"from-font","auto",Ye,ku]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[vt,"auto",Ye,Ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ye,Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ye,Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},cl,Ye,Ve],radial:["",Ye,Ve],conic:[cl,Ye,Ve]},yH,mH]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:me()}],"border-w-x":[{"border-x":me()}],"border-w-y":[{"border-y":me()}],"border-w-s":[{"border-s":me()}],"border-w-e":[{"border-e":me()}],"border-w-t":[{"border-t":me()}],"border-w-r":[{"border-r":me()}],"border-w-b":[{"border-b":me()}],"border-w-l":[{"border-l":me()}],"divide-x":[{"divide-x":me()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":me()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Oe(),"hidden","none"]}],"divide-style":[{divide:[...Oe(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...Oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[vt,Ye,Ve]}],"outline-w":[{outline:["",vt,Om,ku]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",v,dy,uy]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",x,dy,uy]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:me()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[vt,ku]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":me()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",b,dy,uy]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[vt,Ye,Ve]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":le()}],"mask-image-linear-to-pos":[{"mask-linear-to":le()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":le()}],"mask-image-t-to-pos":[{"mask-t-to":le()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":le()}],"mask-image-r-to-pos":[{"mask-r-to":le()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":le()}],"mask-image-b-to-pos":[{"mask-b-to":le()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":le()}],"mask-image-l-to-pos":[{"mask-l-to":le()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":le()}],"mask-image-x-to-pos":[{"mask-x-to":le()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":le()}],"mask-image-y-to-pos":[{"mask-y-to":le()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[Ye,Ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":le()}],"mask-image-radial-to-pos":[{"mask-radial-to":le()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":le()}],"mask-image-conic-to-pos":[{"mask-conic-to":le()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ye,Ve]}],filter:[{filter:["","none",Ye,Ve]}],blur:[{blur:Ce()}],brightness:[{brightness:[vt,Ye,Ve]}],contrast:[{contrast:[vt,Ye,Ve]}],"drop-shadow":[{"drop-shadow":["","none",A,dy,uy]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",vt,Ye,Ve]}],"hue-rotate":[{"hue-rotate":[vt,Ye,Ve]}],invert:[{invert:["",vt,Ye,Ve]}],saturate:[{saturate:[vt,Ye,Ve]}],sepia:[{sepia:["",vt,Ye,Ve]}],"backdrop-filter":[{"backdrop-filter":["","none",Ye,Ve]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[vt,Ye,Ve]}],"backdrop-contrast":[{"backdrop-contrast":[vt,Ye,Ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",vt,Ye,Ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[vt,Ye,Ve]}],"backdrop-invert":[{"backdrop-invert":["",vt,Ye,Ve]}],"backdrop-opacity":[{"backdrop-opacity":[vt,Ye,Ve]}],"backdrop-saturate":[{"backdrop-saturate":[vt,Ye,Ve]}],"backdrop-sepia":[{"backdrop-sepia":["",vt,Ye,Ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ye,Ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[vt,"initial",Ye,Ve]}],ease:[{ease:["linear","initial",M,Ye,Ve]}],delay:[{delay:[vt,Ye,Ve]}],animate:[{animate:["none",U,Ye,Ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,Ye,Ve]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:je()}],"rotate-x":[{"rotate-x":je()}],"rotate-y":[{"rotate-y":je()}],"rotate-z":[{"rotate-z":je()}],scale:[{scale:be()}],"scale-x":[{"scale-x":be()}],"scale-y":[{"scale-y":be()}],"scale-z":[{"scale-z":be()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Ye,Ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ye,Ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ye,Ve]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[vt,Om,ku,mb]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bH=tH(wH);function xt(...t){return bH(JI(t))}const xH=ZI("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ht({className:t,variant:e,size:n,asChild:r=!1,...s}){const c=r?jU:"button";return h.jsx(c,{"data-slot":"button",className:xt(xH({variant:e,size:n,className:t})),...s})}function We(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function oc(t,e=[]){let n=[];function r(c,d){const f=k.createContext(d),g=n.length;n=[...n,d];const y=x=>{const{scope:b,children:A,...I}=x,_=b?.[t]?.[g]||f,N=k.useMemo(()=>I,Object.values(I));return h.jsx(_.Provider,{value:N,children:A})};y.displayName=c+"Provider";function v(x,b){const A=b?.[t]?.[g]||f,I=k.useContext(A);if(I)return I;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${c}\``)}return[y,v]}const s=()=>{const c=n.map(d=>k.createContext(d));return function(f){const g=f?.[t]||c;return k.useMemo(()=>({[`__scope${t}`]:{...f,[t]:g}}),[f,g])}};return s.scopeName=t,[r,EH(s,...e)]}function EH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(c){const d=r.reduce((f,{useScope:g,scopeName:y})=>{const x=g(c)[`__scope${y}`];return{...f,...x}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}var br=globalThis?.document?k.useLayoutEffect:()=>{},AH=z_[" useInsertionEffect ".trim().toString()]||br;function Lh({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,c,d]=TH({defaultProp:e,onChange:n}),f=t!==void 0,g=f?t:s;{const v=k.useRef(t!==void 0);k.useEffect(()=>{const x=v.current;x!==f&&console.warn(`${r} is changing from ${x?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=f},[f,r])}const y=k.useCallback(v=>{if(f){const x=SH(v)?v(t):v;x!==t&&d.current?.(x)}else c(v)},[f,t,c,d]);return[g,y]}function TH({defaultProp:t,onChange:e}){const[n,r]=k.useState(t),s=k.useRef(n),c=k.useRef(e);return AH(()=>{c.current=e},[e]),k.useEffect(()=>{s.current!==n&&(c.current?.(n),s.current=n)},[n,s]),[n,r,c]}function SH(t){return typeof t=="function"}var kg=F_();const _H=Zx(kg);var kH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ft=kH.reduce((t,e)=>{const n=jh(`Primitive.${e}`),r=k.forwardRef((s,c)=>{const{asChild:d,...f}=s,g=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(g,{...f,ref:c})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function uR(t,e){t&&kg.flushSync(()=>t.dispatchEvent(e))}function dA(t){const e=t+"CollectionProvider",[n,r]=oc(e),[s,c]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=_=>{const{scope:N,children:M}=_,U=mo.useRef(null),O=mo.useRef(new Map).current;return h.jsx(s,{scope:N,itemMap:O,collectionRef:U,children:M})};d.displayName=e;const f=t+"CollectionSlot",g=jh(f),y=mo.forwardRef((_,N)=>{const{scope:M,children:U}=_,O=c(f,M),L=Lt(N,O.collectionRef);return h.jsx(g,{ref:L,children:U})});y.displayName=f;const v=t+"CollectionItemSlot",x="data-radix-collection-item",b=jh(v),A=mo.forwardRef((_,N)=>{const{scope:M,children:U,...O}=_,L=mo.useRef(null),H=Lt(N,L),G=c(v,M);return mo.useEffect(()=>(G.itemMap.set(L,{ref:L,...O}),()=>void G.itemMap.delete(L))),h.jsx(b,{[x]:"",ref:H,children:U})});A.displayName=v;function I(_){const N=c(t+"CollectionConsumer",_);return mo.useCallback(()=>{const U=N.collectionRef.current;if(!U)return[];const O=Array.from(U.querySelectorAll(`[${x}]`));return Array.from(N.itemMap.values()).sort((G,V)=>O.indexOf(G.ref.current)-O.indexOf(V.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:d,Slot:y,ItemSlot:A},I,r]}var IH=k.createContext(void 0);function Ig(t){const e=k.useContext(IH);return t||e||"ltr"}function wr(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>e.current?.(...n),[])}function RH(t,e=globalThis?.document){const n=wr(t);k.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var NH="DismissableLayer",dx="dismissableLayer.update",OH="dismissableLayer.pointerDownOutside",MH="dismissableLayer.focusOutside",YS,dR=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hA=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:c,onInteractOutside:d,onDismiss:f,...g}=t,y=k.useContext(dR),[v,x]=k.useState(null),b=v?.ownerDocument??globalThis?.document,[,A]=k.useState({}),I=Lt(e,V=>x(V)),_=Array.from(y.layers),[N]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),M=_.indexOf(N),U=v?_.indexOf(v):-1,O=y.layersWithOutsidePointerEventsDisabled.size>0,L=U>=M,H=jH(V=>{const $=V.target,ee=[...y.branches].some(se=>se.contains($));!L||ee||(s?.(V),d?.(V),V.defaultPrevented||f?.())},b),G=LH(V=>{const $=V.target;[...y.branches].some(se=>se.contains($))||(c?.(V),d?.(V),V.defaultPrevented||f?.())},b);return RH(V=>{U===y.layers.size-1&&(r?.(V),!V.defaultPrevented&&f&&(V.preventDefault(),f()))},b),k.useEffect(()=>{if(v)return n&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(YS=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(v)),y.layers.add(v),QS(),()=>{n&&y.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=YS)}},[v,b,n,y]),k.useEffect(()=>()=>{v&&(y.layers.delete(v),y.layersWithOutsidePointerEventsDisabled.delete(v),QS())},[v,y]),k.useEffect(()=>{const V=()=>A({});return document.addEventListener(dx,V),()=>document.removeEventListener(dx,V)},[]),h.jsx(ft.div,{...g,ref:I,style:{pointerEvents:O?L?"auto":"none":void 0,...t.style},onFocusCapture:We(t.onFocusCapture,G.onFocusCapture),onBlurCapture:We(t.onBlurCapture,G.onBlurCapture),onPointerDownCapture:We(t.onPointerDownCapture,H.onPointerDownCapture)})});hA.displayName=NH;var PH="DismissableLayerBranch",DH=k.forwardRef((t,e)=>{const n=k.useContext(dR),r=k.useRef(null),s=Lt(e,r);return k.useEffect(()=>{const c=r.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),h.jsx(ft.div,{...t,ref:s})});DH.displayName=PH;function jH(t,e=globalThis?.document){const n=wr(t),r=k.useRef(!1),s=k.useRef(()=>{});return k.useEffect(()=>{const c=f=>{if(f.target&&!r.current){let g=function(){hR(OH,n,y,{discrete:!0})};const y={originalEvent:f};f.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=g,e.addEventListener("click",s.current,{once:!0})):g()}else e.removeEventListener("click",s.current);r.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",c),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function LH(t,e=globalThis?.document){const n=wr(t),r=k.useRef(!1);return k.useEffect(()=>{const s=c=>{c.target&&!r.current&&hR(MH,n,{originalEvent:c},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QS(){const t=new CustomEvent(dx);document.dispatchEvent(t)}function hR(t,e,n,{discrete:r}){const s=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?uR(s,c):s.dispatchEvent(c)}var gb=0;function fR(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??WS()),document.body.insertAdjacentElement("beforeend",t[1]??WS()),gb++,()=>{gb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),gb--}},[])}function WS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pb="focusScope.autoFocusOnMount",yb="focusScope.autoFocusOnUnmount",XS={bubbles:!1,cancelable:!0},UH="FocusScope",fA=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:c,...d}=t,[f,g]=k.useState(null),y=wr(s),v=wr(c),x=k.useRef(null),b=Lt(e,_=>g(_)),A=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let _=function(O){if(A.paused||!f)return;const L=O.target;f.contains(L)?x.current=L:fl(x.current,{select:!0})},N=function(O){if(A.paused||!f)return;const L=O.relatedTarget;L!==null&&(f.contains(L)||fl(x.current,{select:!0}))},M=function(O){if(document.activeElement===document.body)for(const H of O)H.removedNodes.length>0&&fl(f)};document.addEventListener("focusin",_),document.addEventListener("focusout",N);const U=new MutationObserver(M);return f&&U.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",N),U.disconnect()}}},[r,f,A.paused]),k.useEffect(()=>{if(f){ZS.add(A);const _=document.activeElement;if(!f.contains(_)){const M=new CustomEvent(pb,XS);f.addEventListener(pb,y),f.dispatchEvent(M),M.defaultPrevented||(HH(GH(mR(f)),{select:!0}),document.activeElement===_&&fl(f))}return()=>{f.removeEventListener(pb,y),setTimeout(()=>{const M=new CustomEvent(yb,XS);f.addEventListener(yb,v),f.dispatchEvent(M),M.defaultPrevented||fl(_??document.body,{select:!0}),f.removeEventListener(yb,v),ZS.remove(A)},0)}}},[f,y,v,A]);const I=k.useCallback(_=>{if(!n&&!r||A.paused)return;const N=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,M=document.activeElement;if(N&&M){const U=_.currentTarget,[O,L]=BH(U);O&&L?!_.shiftKey&&M===L?(_.preventDefault(),n&&fl(O,{select:!0})):_.shiftKey&&M===O&&(_.preventDefault(),n&&fl(L,{select:!0})):M===U&&_.preventDefault()}},[n,r,A.paused]);return h.jsx(ft.div,{tabIndex:-1,...d,ref:b,onKeyDown:I})});fA.displayName=UH;function HH(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(fl(r,{select:e}),document.activeElement!==n)return}function BH(t){const e=mR(t),n=JS(e,t),r=JS(e.reverse(),t);return[n,r]}function mR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function JS(t,e){for(const n of t)if(!zH(n,{upTo:e}))return n}function zH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function FH(t){return t instanceof HTMLInputElement&&"select"in t}function fl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&FH(t)&&e&&t.select()}}var ZS=KH();function KH(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=e0(t,e),t.unshift(e)},remove(e){t=e0(t,e),t[0]?.resume()}}}function e0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function GH(t){return t.filter(e=>e.tagName!=="A")}var qH=z_[" useId ".trim().toString()]||(()=>{}),$H=0;function zu(t){const[e,n]=k.useState(qH());return br(()=>{n(r=>r??String($H++))},[t]),e?`radix-${e}`:""}const VH=["top","right","bottom","left"],_l=Math.min,jo=Math.max,dv=Math.round,hy=Math.floor,Qs=t=>({x:t,y:t}),YH={left:"right",right:"left",bottom:"top",top:"bottom"},QH={start:"end",end:"start"};function hx(t,e,n){return jo(t,_l(e,n))}function Xa(t,e){return typeof t=="function"?t(e):t}function Ja(t){return t.split("-")[0]}function sf(t){return t.split("-")[1]}function mA(t){return t==="x"?"y":"x"}function gA(t){return t==="y"?"height":"width"}const WH=new Set(["top","bottom"]);function $s(t){return WH.has(Ja(t))?"y":"x"}function pA(t){return mA($s(t))}function XH(t,e,n){n===void 0&&(n=!1);const r=sf(t),s=pA(t),c=gA(s);let d=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(d=hv(d)),[d,hv(d)]}function JH(t){const e=hv(t);return[fx(t),e,fx(e)]}function fx(t){return t.replace(/start|end/g,e=>QH[e])}const t0=["left","right"],n0=["right","left"],ZH=["top","bottom"],e4=["bottom","top"];function t4(t,e,n){switch(t){case"top":case"bottom":return n?e?n0:t0:e?t0:n0;case"left":case"right":return e?ZH:e4;default:return[]}}function n4(t,e,n,r){const s=sf(t);let c=t4(Ja(t),n==="start",r);return s&&(c=c.map(d=>d+"-"+s),e&&(c=c.concat(c.map(fx)))),c}function hv(t){return t.replace(/left|right|bottom|top/g,e=>YH[e])}function r4(t){return{top:0,right:0,bottom:0,left:0,...t}}function gR(t){return typeof t!="number"?r4(t):{top:t,right:t,bottom:t,left:t}}function fv(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function r0(t,e,n){let{reference:r,floating:s}=t;const c=$s(e),d=pA(e),f=gA(d),g=Ja(e),y=c==="y",v=r.x+r.width/2-s.width/2,x=r.y+r.height/2-s.height/2,b=r[f]/2-s[f]/2;let A;switch(g){case"top":A={x:v,y:r.y-s.height};break;case"bottom":A={x:v,y:r.y+r.height};break;case"right":A={x:r.x+r.width,y:x};break;case"left":A={x:r.x-s.width,y:x};break;default:A={x:r.x,y:r.y}}switch(sf(e)){case"start":A[d]-=b*(n&&y?-1:1);break;case"end":A[d]+=b*(n&&y?-1:1);break}return A}const o4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),g=await(d.isRTL==null?void 0:d.isRTL(e));let y=await d.getElementRects({reference:t,floating:e,strategy:s}),{x:v,y:x}=r0(y,r,g),b=r,A={},I=0;for(let _=0;_<f.length;_++){const{name:N,fn:M}=f[_],{x:U,y:O,data:L,reset:H}=await M({x:v,y:x,initialPlacement:r,placement:b,strategy:s,middlewareData:A,rects:y,platform:d,elements:{reference:t,floating:e}});v=U??v,x=O??x,A={...A,[N]:{...A[N],...L}},H&&I<=50&&(I++,typeof H=="object"&&(H.placement&&(b=H.placement),H.rects&&(y=H.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:s}):H.rects),{x:v,y:x}=r0(y,b,g)),_=-1)}return{x:v,y:x,placement:b,strategy:s,middlewareData:A}};async function lg(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:c,rects:d,elements:f,strategy:g}=t,{boundary:y="clippingAncestors",rootBoundary:v="viewport",elementContext:x="floating",altBoundary:b=!1,padding:A=0}=Xa(e,t),I=gR(A),N=f[b?x==="floating"?"reference":"floating":x],M=fv(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(N)))==null||n?N:N.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:y,rootBoundary:v,strategy:g})),U=x==="floating"?{x:r,y:s,width:d.floating.width,height:d.floating.height}:d.reference,O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),L=await(c.isElement==null?void 0:c.isElement(O))?await(c.getScale==null?void 0:c.getScale(O))||{x:1,y:1}:{x:1,y:1},H=fv(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:U,offsetParent:O,strategy:g}):U);return{top:(M.top-H.top+I.top)/L.y,bottom:(H.bottom-M.bottom+I.bottom)/L.y,left:(M.left-H.left+I.left)/L.x,right:(H.right-M.right+I.right)/L.x}}const i4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:c,platform:d,elements:f,middlewareData:g}=e,{element:y,padding:v=0}=Xa(t,e)||{};if(y==null)return{};const x=gR(v),b={x:n,y:r},A=pA(s),I=gA(A),_=await d.getDimensions(y),N=A==="y",M=N?"top":"left",U=N?"bottom":"right",O=N?"clientHeight":"clientWidth",L=c.reference[I]+c.reference[A]-b[A]-c.floating[I],H=b[A]-c.reference[A],G=await(d.getOffsetParent==null?void 0:d.getOffsetParent(y));let V=G?G[O]:0;(!V||!await(d.isElement==null?void 0:d.isElement(G)))&&(V=f.floating[O]||c.floating[I]);const $=L/2-H/2,ee=V/2-_[I]/2-1,se=_l(x[M],ee),ce=_l(x[U],ee),oe=se,he=V-_[I]-ce,W=V/2-_[I]/2+$,J=hx(oe,W,he),P=!g.arrow&&sf(s)!=null&&W!==J&&c.reference[I]/2-(W<oe?se:ce)-_[I]/2<0,F=P?W<oe?W-oe:W-he:0;return{[A]:b[A]+F,data:{[A]:J,centerOffset:W-J-F,...P&&{alignmentOffset:F}},reset:P}}}),s4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:c,rects:d,initialPlacement:f,platform:g,elements:y}=e,{mainAxis:v=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:_=!0,...N}=Xa(t,e);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const M=Ja(s),U=$s(f),O=Ja(f)===f,L=await(g.isRTL==null?void 0:g.isRTL(y.floating)),H=b||(O||!_?[hv(f)]:JH(f)),G=I!=="none";!b&&G&&H.push(...n4(f,_,I,L));const V=[f,...H],$=await lg(e,N),ee=[];let se=((r=c.flip)==null?void 0:r.overflows)||[];if(v&&ee.push($[M]),x){const W=XH(s,d,L);ee.push($[W[0]],$[W[1]])}if(se=[...se,{placement:s,overflows:ee}],!ee.every(W=>W<=0)){var ce,oe;const W=(((ce=c.flip)==null?void 0:ce.index)||0)+1,J=V[W];if(J&&(!(x==="alignment"?U!==$s(J):!1)||se.every(Y=>$s(Y.placement)===U?Y.overflows[0]>0:!0)))return{data:{index:W,overflows:se},reset:{placement:J}};let P=(oe=se.filter(F=>F.overflows[0]<=0).sort((F,Y)=>F.overflows[1]-Y.overflows[1])[0])==null?void 0:oe.placement;if(!P)switch(A){case"bestFit":{var he;const F=(he=se.filter(Y=>{if(G){const X=$s(Y.placement);return X===U||X==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(X=>X>0).reduce((X,B)=>X+B,0)]).sort((Y,X)=>Y[1]-X[1])[0])==null?void 0:he[0];F&&(P=F);break}case"initialPlacement":P=f;break}if(s!==P)return{reset:{placement:P}}}return{}}}};function o0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function i0(t){return VH.some(e=>t[e]>=0)}const a4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Xa(t,e);switch(r){case"referenceHidden":{const c=await lg(e,{...s,elementContext:"reference"}),d=o0(c,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:i0(d)}}}case"escaped":{const c=await lg(e,{...s,altBoundary:!0}),d=o0(c,n.floating);return{data:{escapedOffsets:d,escaped:i0(d)}}}default:return{}}}}},pR=new Set(["left","top"]);async function c4(t,e){const{placement:n,platform:r,elements:s}=t,c=await(r.isRTL==null?void 0:r.isRTL(s.floating)),d=Ja(n),f=sf(n),g=$s(n)==="y",y=pR.has(d)?-1:1,v=c&&g?-1:1,x=Xa(e,t);let{mainAxis:b,crossAxis:A,alignmentAxis:I}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return f&&typeof I=="number"&&(A=f==="end"?I*-1:I),g?{x:A*v,y:b*y}:{x:b*y,y:A*v}}const l4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:c,placement:d,middlewareData:f}=e,g=await c4(e,t);return d===((n=f.offset)==null?void 0:n.placement)&&(r=f.arrow)!=null&&r.alignmentOffset?{}:{x:s+g.x,y:c+g.y,data:{...g,placement:d}}}}},u4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:c=!0,crossAxis:d=!1,limiter:f={fn:N=>{let{x:M,y:U}=N;return{x:M,y:U}}},...g}=Xa(t,e),y={x:n,y:r},v=await lg(e,g),x=$s(Ja(s)),b=mA(x);let A=y[b],I=y[x];if(c){const N=b==="y"?"top":"left",M=b==="y"?"bottom":"right",U=A+v[N],O=A-v[M];A=hx(U,A,O)}if(d){const N=x==="y"?"top":"left",M=x==="y"?"bottom":"right",U=I+v[N],O=I-v[M];I=hx(U,I,O)}const _=f.fn({...e,[b]:A,[x]:I});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[b]:c,[x]:d}}}}}},d4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:c,middlewareData:d}=e,{offset:f=0,mainAxis:g=!0,crossAxis:y=!0}=Xa(t,e),v={x:n,y:r},x=$s(s),b=mA(x);let A=v[b],I=v[x];const _=Xa(f,e),N=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(g){const O=b==="y"?"height":"width",L=c.reference[b]-c.floating[O]+N.mainAxis,H=c.reference[b]+c.reference[O]-N.mainAxis;A<L?A=L:A>H&&(A=H)}if(y){var M,U;const O=b==="y"?"width":"height",L=pR.has(Ja(s)),H=c.reference[x]-c.floating[O]+(L&&((M=d.offset)==null?void 0:M[x])||0)+(L?0:N.crossAxis),G=c.reference[x]+c.reference[O]+(L?0:((U=d.offset)==null?void 0:U[x])||0)-(L?N.crossAxis:0);I<H?I=H:I>G&&(I=G)}return{[b]:A,[x]:I}}}},h4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:c,platform:d,elements:f}=e,{apply:g=()=>{},...y}=Xa(t,e),v=await lg(e,y),x=Ja(s),b=sf(s),A=$s(s)==="y",{width:I,height:_}=c.floating;let N,M;x==="top"||x==="bottom"?(N=x,M=b===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(M=x,N=b==="end"?"top":"bottom");const U=_-v.top-v.bottom,O=I-v.left-v.right,L=_l(_-v[N],U),H=_l(I-v[M],O),G=!e.middlewareData.shift;let V=L,$=H;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&($=O),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(V=U),G&&!b){const se=jo(v.left,0),ce=jo(v.right,0),oe=jo(v.top,0),he=jo(v.bottom,0);A?$=I-2*(se!==0||ce!==0?se+ce:jo(v.left,v.right)):V=_-2*(oe!==0||he!==0?oe+he:jo(v.top,v.bottom))}await g({...e,availableWidth:$,availableHeight:V});const ee=await d.getDimensions(f.floating);return I!==ee.width||_!==ee.height?{reset:{rects:!0}}:{}}}};function iC(){return typeof window<"u"}function af(t){return yR(t)?(t.nodeName||"").toLowerCase():"#document"}function zo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ea(t){var e;return(e=(yR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yR(t){return iC()?t instanceof Node||t instanceof zo(t).Node:!1}function cs(t){return iC()?t instanceof Element||t instanceof zo(t).Element:!1}function Js(t){return iC()?t instanceof HTMLElement||t instanceof zo(t).HTMLElement:!1}function s0(t){return!iC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof zo(t).ShadowRoot}const f4=new Set(["inline","contents"]);function Rg(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ls(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!f4.has(s)}const m4=new Set(["table","td","th"]);function g4(t){return m4.has(af(t))}const p4=[":popover-open",":modal"];function sC(t){return p4.some(e=>{try{return t.matches(e)}catch{return!1}})}const y4=["transform","translate","scale","rotate","perspective"],v4=["transform","translate","scale","rotate","perspective","filter"],C4=["paint","layout","strict","content"];function yA(t){const e=vA(),n=cs(t)?ls(t):t;return y4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||v4.some(r=>(n.willChange||"").includes(r))||C4.some(r=>(n.contain||"").includes(r))}function w4(t){let e=kl(t);for(;Js(e)&&!Uh(e);){if(yA(e))return e;if(sC(e))return null;e=kl(e)}return null}function vA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const b4=new Set(["html","body","#document"]);function Uh(t){return b4.has(af(t))}function ls(t){return zo(t).getComputedStyle(t)}function aC(t){return cs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function kl(t){if(af(t)==="html")return t;const e=t.assignedSlot||t.parentNode||s0(t)&&t.host||ea(t);return s0(e)?e.host:e}function vR(t){const e=kl(t);return Uh(e)?t.ownerDocument?t.ownerDocument.body:t.body:Js(e)&&Rg(e)?e:vR(e)}function ug(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=vR(t),c=s===((r=t.ownerDocument)==null?void 0:r.body),d=zo(s);if(c){const f=mx(d);return e.concat(d,d.visualViewport||[],Rg(s)?s:[],f&&n?ug(f):[])}return e.concat(s,ug(s,[],n))}function mx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function CR(t){const e=ls(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Js(t),c=s?t.offsetWidth:n,d=s?t.offsetHeight:r,f=dv(n)!==c||dv(r)!==d;return f&&(n=c,r=d),{width:n,height:r,$:f}}function CA(t){return cs(t)?t:t.contextElement}function Rh(t){const e=CA(t);if(!Js(e))return Qs(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:c}=CR(e);let d=(c?dv(n.width):n.width)/r,f=(c?dv(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const x4=Qs(0);function wR(t){const e=zo(t);return!vA()||!e.visualViewport?x4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function E4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==zo(t)?!1:e}function Fu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),c=CA(t);let d=Qs(1);e&&(r?cs(r)&&(d=Rh(r)):d=Rh(t));const f=E4(c,n,r)?wR(c):Qs(0);let g=(s.left+f.x)/d.x,y=(s.top+f.y)/d.y,v=s.width/d.x,x=s.height/d.y;if(c){const b=zo(c),A=r&&cs(r)?zo(r):r;let I=b,_=mx(I);for(;_&&r&&A!==I;){const N=Rh(_),M=_.getBoundingClientRect(),U=ls(_),O=M.left+(_.clientLeft+parseFloat(U.paddingLeft))*N.x,L=M.top+(_.clientTop+parseFloat(U.paddingTop))*N.y;g*=N.x,y*=N.y,v*=N.x,x*=N.y,g+=O,y+=L,I=zo(_),_=mx(I)}}return fv({width:v,height:x,x:g,y})}function cC(t,e){const n=aC(t).scrollLeft;return e?e.left+n:Fu(ea(t)).left+n}function bR(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-cC(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function A4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const c=s==="fixed",d=ea(r),f=e?sC(e.floating):!1;if(r===d||f&&c)return n;let g={scrollLeft:0,scrollTop:0},y=Qs(1);const v=Qs(0),x=Js(r);if((x||!x&&!c)&&((af(r)!=="body"||Rg(d))&&(g=aC(r)),Js(r))){const A=Fu(r);y=Rh(r),v.x=A.x+r.clientLeft,v.y=A.y+r.clientTop}const b=d&&!x&&!c?bR(d,g):Qs(0);return{width:n.width*y.x,height:n.height*y.y,x:n.x*y.x-g.scrollLeft*y.x+v.x+b.x,y:n.y*y.y-g.scrollTop*y.y+v.y+b.y}}function T4(t){return Array.from(t.getClientRects())}function S4(t){const e=ea(t),n=aC(t),r=t.ownerDocument.body,s=jo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),c=jo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+cC(t);const f=-n.scrollTop;return ls(r).direction==="rtl"&&(d+=jo(e.clientWidth,r.clientWidth)-s),{width:s,height:c,x:d,y:f}}const a0=25;function _4(t,e){const n=zo(t),r=ea(t),s=n.visualViewport;let c=r.clientWidth,d=r.clientHeight,f=0,g=0;if(s){c=s.width,d=s.height;const v=vA();(!v||v&&e==="fixed")&&(f=s.offsetLeft,g=s.offsetTop)}const y=cC(r);if(y<=0){const v=r.ownerDocument,x=v.body,b=getComputedStyle(x),A=v.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,I=Math.abs(r.clientWidth-x.clientWidth-A);I<=a0&&(c-=I)}else y<=a0&&(c+=y);return{width:c,height:d,x:f,y:g}}const k4=new Set(["absolute","fixed"]);function I4(t,e){const n=Fu(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,c=Js(t)?Rh(t):Qs(1),d=t.clientWidth*c.x,f=t.clientHeight*c.y,g=s*c.x,y=r*c.y;return{width:d,height:f,x:g,y}}function c0(t,e,n){let r;if(e==="viewport")r=_4(t,n);else if(e==="document")r=S4(ea(t));else if(cs(e))r=I4(e,n);else{const s=wR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return fv(r)}function xR(t,e){const n=kl(t);return n===e||!cs(n)||Uh(n)?!1:ls(n).position==="fixed"||xR(n,e)}function R4(t,e){const n=e.get(t);if(n)return n;let r=ug(t,[],!1).filter(f=>cs(f)&&af(f)!=="body"),s=null;const c=ls(t).position==="fixed";let d=c?kl(t):t;for(;cs(d)&&!Uh(d);){const f=ls(d),g=yA(d);!g&&f.position==="fixed"&&(s=null),(c?!g&&!s:!g&&f.position==="static"&&!!s&&k4.has(s.position)||Rg(d)&&!g&&xR(t,d))?r=r.filter(v=>v!==d):s=f,d=kl(d)}return e.set(t,r),r}function N4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const d=[...n==="clippingAncestors"?sC(e)?[]:R4(e,this._c):[].concat(n),r],f=d[0],g=d.reduce((y,v)=>{const x=c0(e,v,s);return y.top=jo(x.top,y.top),y.right=_l(x.right,y.right),y.bottom=_l(x.bottom,y.bottom),y.left=jo(x.left,y.left),y},c0(e,f,s));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function O4(t){const{width:e,height:n}=CR(t);return{width:e,height:n}}function M4(t,e,n){const r=Js(e),s=ea(e),c=n==="fixed",d=Fu(t,!0,c,e);let f={scrollLeft:0,scrollTop:0};const g=Qs(0);function y(){g.x=cC(s)}if(r||!r&&!c)if((af(e)!=="body"||Rg(s))&&(f=aC(e)),r){const A=Fu(e,!0,c,e);g.x=A.x+e.clientLeft,g.y=A.y+e.clientTop}else s&&y();c&&!r&&s&&y();const v=s&&!r&&!c?bR(s,f):Qs(0),x=d.left+f.scrollLeft-g.x-v.x,b=d.top+f.scrollTop-g.y-v.y;return{x,y:b,width:d.width,height:d.height}}function vb(t){return ls(t).position==="static"}function l0(t,e){if(!Js(t)||ls(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ea(t)===n&&(n=n.ownerDocument.body),n}function ER(t,e){const n=zo(t);if(sC(t))return n;if(!Js(t)){let s=kl(t);for(;s&&!Uh(s);){if(cs(s)&&!vb(s))return s;s=kl(s)}return n}let r=l0(t,e);for(;r&&g4(r)&&vb(r);)r=l0(r,e);return r&&Uh(r)&&vb(r)&&!yA(r)?n:r||w4(t)||n}const P4=async function(t){const e=this.getOffsetParent||ER,n=this.getDimensions,r=await n(t.floating);return{reference:M4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function D4(t){return ls(t).direction==="rtl"}const j4={convertOffsetParentRelativeRectToViewportRelativeRect:A4,getDocumentElement:ea,getClippingRect:N4,getOffsetParent:ER,getElementRects:P4,getClientRects:T4,getDimensions:O4,getScale:Rh,isElement:cs,isRTL:D4};function AR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function L4(t,e){let n=null,r;const s=ea(t);function c(){var f;clearTimeout(r),(f=n)==null||f.disconnect(),n=null}function d(f,g){f===void 0&&(f=!1),g===void 0&&(g=1),c();const y=t.getBoundingClientRect(),{left:v,top:x,width:b,height:A}=y;if(f||e(),!b||!A)return;const I=hy(x),_=hy(s.clientWidth-(v+b)),N=hy(s.clientHeight-(x+A)),M=hy(v),O={rootMargin:-I+"px "+-_+"px "+-N+"px "+-M+"px",threshold:jo(0,_l(1,g))||1};let L=!0;function H(G){const V=G[0].intersectionRatio;if(V!==g){if(!L)return d();V?d(!1,V):r=setTimeout(()=>{d(!1,1e-7)},1e3)}V===1&&!AR(y,t.getBoundingClientRect())&&d(),L=!1}try{n=new IntersectionObserver(H,{...O,root:s.ownerDocument})}catch{n=new IntersectionObserver(H,O)}n.observe(t)}return d(!0),c}function U4(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:g=!1}=r,y=CA(t),v=s||c?[...y?ug(y):[],...ug(e)]:[];v.forEach(M=>{s&&M.addEventListener("scroll",n,{passive:!0}),c&&M.addEventListener("resize",n)});const x=y&&f?L4(y,n):null;let b=-1,A=null;d&&(A=new ResizeObserver(M=>{let[U]=M;U&&U.target===y&&A&&(A.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var O;(O=A)==null||O.observe(e)})),n()}),y&&!g&&A.observe(y),A.observe(e));let I,_=g?Fu(t):null;g&&N();function N(){const M=Fu(t);_&&!AR(_,M)&&n(),_=M,I=requestAnimationFrame(N)}return n(),()=>{var M;v.forEach(U=>{s&&U.removeEventListener("scroll",n),c&&U.removeEventListener("resize",n)}),x?.(),(M=A)==null||M.disconnect(),A=null,g&&cancelAnimationFrame(I)}}const H4=l4,B4=u4,z4=s4,F4=h4,K4=a4,u0=i4,G4=d4,q4=(t,e,n)=>{const r=new Map,s={platform:j4,...n},c={...s.platform,_c:r};return o4(t,e,{...s,platform:c})};var $4=typeof document<"u",V4=function(){},My=$4?k.useLayoutEffect:V4;function mv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mv(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const c=s[r];if(!(c==="_owner"&&t.$$typeof)&&!mv(t[c],e[c]))return!1}return!0}return t!==t&&e!==e}function TR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function d0(t,e){const n=TR(t);return Math.round(e*n)/n}function Cb(t){const e=k.useRef(t);return My(()=>{e.current=t}),e}function Y4(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:g,open:y}=t,[v,x]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,A]=k.useState(r);mv(b,r)||A(r);const[I,_]=k.useState(null),[N,M]=k.useState(null),U=k.useCallback(Y=>{Y!==G.current&&(G.current=Y,_(Y))},[]),O=k.useCallback(Y=>{Y!==V.current&&(V.current=Y,M(Y))},[]),L=c||I,H=d||N,G=k.useRef(null),V=k.useRef(null),$=k.useRef(v),ee=g!=null,se=Cb(g),ce=Cb(s),oe=Cb(y),he=k.useCallback(()=>{if(!G.current||!V.current)return;const Y={placement:e,strategy:n,middleware:b};ce.current&&(Y.platform=ce.current),q4(G.current,V.current,Y).then(X=>{const B={...X,isPositioned:oe.current!==!1};W.current&&!mv($.current,B)&&($.current=B,kg.flushSync(()=>{x(B)}))})},[b,e,n,ce,oe]);My(()=>{y===!1&&$.current.isPositioned&&($.current.isPositioned=!1,x(Y=>({...Y,isPositioned:!1})))},[y]);const W=k.useRef(!1);My(()=>(W.current=!0,()=>{W.current=!1}),[]),My(()=>{if(L&&(G.current=L),H&&(V.current=H),L&&H){if(se.current)return se.current(L,H,he);he()}},[L,H,he,se,ee]);const J=k.useMemo(()=>({reference:G,floating:V,setReference:U,setFloating:O}),[U,O]),P=k.useMemo(()=>({reference:L,floating:H}),[L,H]),F=k.useMemo(()=>{const Y={position:n,left:0,top:0};if(!P.floating)return Y;const X=d0(P.floating,v.x),B=d0(P.floating,v.y);return f?{...Y,transform:"translate("+X+"px, "+B+"px)",...TR(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:B}},[n,f,P.floating,v.x,v.y]);return k.useMemo(()=>({...v,update:he,refs:J,elements:P,floatingStyles:F}),[v,he,J,P,F])}const Q4=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?u0({element:r.current,padding:s}).fn(n):{}:r?u0({element:r,padding:s}).fn(n):{}}}},W4=(t,e)=>({...H4(t),options:[t,e]}),X4=(t,e)=>({...B4(t),options:[t,e]}),J4=(t,e)=>({...G4(t),options:[t,e]}),Z4=(t,e)=>({...z4(t),options:[t,e]}),e3=(t,e)=>({...F4(t),options:[t,e]}),t3=(t,e)=>({...K4(t),options:[t,e]}),n3=(t,e)=>({...Q4(t),options:[t,e]});var r3="Arrow",SR=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...c}=t;return h.jsx(ft.svg,{...c,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});SR.displayName=r3;var o3=SR;function _R(t){const[e,n]=k.useState(void 0);return br(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const c=s[0];let d,f;if("borderBoxSize"in c){const g=c.borderBoxSize,y=Array.isArray(g)?g[0]:g;d=y.inlineSize,f=y.blockSize}else d=t.offsetWidth,f=t.offsetHeight;n({width:d,height:f})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var wA="Popper",[kR,lC]=oc(wA),[i3,IR]=kR(wA),RR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=k.useState(null);return h.jsx(i3,{scope:e,anchor:r,onAnchorChange:s,children:n})};RR.displayName=wA;var NR="PopperAnchor",OR=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,c=IR(NR,n),d=k.useRef(null),f=Lt(e,d),g=k.useRef(null);return k.useEffect(()=>{const y=g.current;g.current=r?.current||d.current,y!==g.current&&c.onAnchorChange(g.current)}),r?null:h.jsx(ft.div,{...s,ref:f})});OR.displayName=NR;var bA="PopperContent",[s3,a3]=kR(bA),MR=k.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:c="center",alignOffset:d=0,arrowPadding:f=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:v=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:A="optimized",onPlaced:I,..._}=t,N=IR(bA,n),[M,U]=k.useState(null),O=Lt(e,le=>U(le)),[L,H]=k.useState(null),G=_R(L),V=G?.width??0,$=G?.height??0,ee=r+(c!=="center"?"-"+c:""),se=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},ce=Array.isArray(y)?y:[y],oe=ce.length>0,he={padding:se,boundary:ce.filter(l3),altBoundary:oe},{refs:W,floatingStyles:J,placement:P,isPositioned:F,middlewareData:Y}=Y4({strategy:"fixed",placement:ee,whileElementsMounted:(...le)=>U4(...le,{animationFrame:A==="always"}),elements:{reference:N.anchor},middleware:[W4({mainAxis:s+$,alignmentAxis:d}),g&&X4({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?J4():void 0,...he}),g&&Z4({...he}),e3({...he,apply:({elements:le,rects:Ce,availableWidth:je,availableHeight:be})=>{const{width:we,height:Ee}=Ce.reference,Pe=le.floating.style;Pe.setProperty("--radix-popper-available-width",`${je}px`),Pe.setProperty("--radix-popper-available-height",`${be}px`),Pe.setProperty("--radix-popper-anchor-width",`${we}px`),Pe.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),L&&n3({element:L,padding:f}),u3({arrowWidth:V,arrowHeight:$}),b&&t3({strategy:"referenceHidden",...he})]}),[X,B]=jR(P),Q=wr(I);br(()=>{F&&Q?.()},[F,Q]);const ie=Y.arrow?.x,ue=Y.arrow?.y,me=Y.arrow?.centerOffset!==0,[Oe,xe]=k.useState();return br(()=>{M&&xe(window.getComputedStyle(M).zIndex)},[M]),h.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:F?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[Y.transformOrigin?.x,Y.transformOrigin?.y].join(" "),...Y.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(s3,{scope:n,placedSide:X,onArrowChange:H,arrowX:ie,arrowY:ue,shouldHideArrow:me,children:h.jsx(ft.div,{"data-side":X,"data-align":B,..._,ref:O,style:{..._.style,animation:F?void 0:"none"}})})})});MR.displayName=bA;var PR="PopperArrow",c3={top:"bottom",right:"left",bottom:"top",left:"right"},DR=k.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,c=a3(PR,r),d=c3[c.placedSide];return h.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:h.jsx(o3,{...s,ref:n,style:{...s.style,display:"block"}})})});DR.displayName=PR;function l3(t){return t!==null}var u3=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,d=s.arrow?.centerOffset!==0,f=d?0:t.arrowWidth,g=d?0:t.arrowHeight,[y,v]=jR(n),x={start:"0%",center:"50%",end:"100%"}[v],b=(s.arrow?.x??0)+f/2,A=(s.arrow?.y??0)+g/2;let I="",_="";return y==="bottom"?(I=d?x:`${b}px`,_=`${-g}px`):y==="top"?(I=d?x:`${b}px`,_=`${r.floating.height+g}px`):y==="right"?(I=`${-g}px`,_=d?x:`${A}px`):y==="left"&&(I=`${r.floating.width+g}px`,_=d?x:`${A}px`),{data:{x:I,y:_}}}});function jR(t){const[e,n="center"]=t.split("-");return[e,n]}var LR=RR,UR=OR,HR=MR,BR=DR,d3="Portal",xA=k.forwardRef((t,e)=>{const{container:n,...r}=t,[s,c]=k.useState(!1);br(()=>c(!0),[]);const d=n||s&&globalThis?.document?.body;return d?_H.createPortal(h.jsx(ft.div,{...r,ref:e}),d):null});xA.displayName=d3;function h3(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var ds=t=>{const{present:e,children:n}=t,r=f3(e),s=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),c=Lt(r.ref,m3(s));return typeof n=="function"||r.isPresent?k.cloneElement(s,{ref:c}):null};ds.displayName="Presence";function f3(t){const[e,n]=k.useState(),r=k.useRef(null),s=k.useRef(t),c=k.useRef("none"),d=t?"mounted":"unmounted",[f,g]=h3(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const y=fy(r.current);c.current=f==="mounted"?y:"none"},[f]),br(()=>{const y=r.current,v=s.current;if(v!==t){const b=c.current,A=fy(y);t?g("MOUNT"):A==="none"||y?.display==="none"?g("UNMOUNT"):g(v&&b!==A?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,g]),br(()=>{if(e){let y;const v=e.ownerDocument.defaultView??window,x=A=>{const _=fy(r.current).includes(CSS.escape(A.animationName));if(A.target===e&&_&&(g("ANIMATION_END"),!s.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",y=v.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},b=A=>{A.target===e&&(c.current=fy(r.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",x),e.addEventListener("animationend",x),()=>{v.clearTimeout(y),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",x),e.removeEventListener("animationend",x)}}else g("ANIMATION_END")},[e,g]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:k.useCallback(y=>{r.current=y?getComputedStyle(y):null,n(y)},[])}}function fy(t){return t?.animationName||"none"}function m3(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var wb="rovingFocusGroup.onEntryFocus",g3={bubbles:!1,cancelable:!0},Ng="RovingFocusGroup",[gx,zR,p3]=dA(Ng),[y3,uC]=oc(Ng,[p3]),[v3,C3]=y3(Ng),FR=k.forwardRef((t,e)=>h.jsx(gx.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(gx.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(w3,{...t,ref:e})})}));FR.displayName=Ng;var w3=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:g,onEntryFocus:y,preventScrollOnEntryFocus:v=!1,...x}=t,b=k.useRef(null),A=Lt(e,b),I=Ig(c),[_,N]=Lh({prop:d,defaultProp:f??null,onChange:g,caller:Ng}),[M,U]=k.useState(!1),O=wr(y),L=zR(n),H=k.useRef(!1),[G,V]=k.useState(0);return k.useEffect(()=>{const $=b.current;if($)return $.addEventListener(wb,O),()=>$.removeEventListener(wb,O)},[O]),h.jsx(v3,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:_,onItemFocus:k.useCallback($=>N($),[N]),onItemShiftTab:k.useCallback(()=>U(!0),[]),onFocusableItemAdd:k.useCallback(()=>V($=>$+1),[]),onFocusableItemRemove:k.useCallback(()=>V($=>$-1),[]),children:h.jsx(ft.div,{tabIndex:M||G===0?-1:0,"data-orientation":r,...x,ref:A,style:{outline:"none",...t.style},onMouseDown:We(t.onMouseDown,()=>{H.current=!0}),onFocus:We(t.onFocus,$=>{const ee=!H.current;if($.target===$.currentTarget&&ee&&!M){const se=new CustomEvent(wb,g3);if($.currentTarget.dispatchEvent(se),!se.defaultPrevented){const ce=L().filter(P=>P.focusable),oe=ce.find(P=>P.active),he=ce.find(P=>P.id===_),J=[oe,he,...ce].filter(Boolean).map(P=>P.ref.current);qR(J,v)}}H.current=!1}),onBlur:We(t.onBlur,()=>U(!1))})})}),KR="RovingFocusGroupItem",GR=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:c,children:d,...f}=t,g=zu(),y=c||g,v=C3(KR,n),x=v.currentTabStopId===y,b=zR(n),{onFocusableItemAdd:A,onFocusableItemRemove:I,currentTabStopId:_}=v;return k.useEffect(()=>{if(r)return A(),()=>I()},[r,A,I]),h.jsx(gx.ItemSlot,{scope:n,id:y,focusable:r,active:s,children:h.jsx(ft.span,{tabIndex:x?0:-1,"data-orientation":v.orientation,...f,ref:e,onMouseDown:We(t.onMouseDown,N=>{r?v.onItemFocus(y):N.preventDefault()}),onFocus:We(t.onFocus,()=>v.onItemFocus(y)),onKeyDown:We(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){v.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const M=E3(N,v.orientation,v.dir);if(M!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let O=b().filter(L=>L.focusable).map(L=>L.ref.current);if(M==="last")O.reverse();else if(M==="prev"||M==="next"){M==="prev"&&O.reverse();const L=O.indexOf(N.currentTarget);O=v.loop?A3(O,L+1):O.slice(L+1)}setTimeout(()=>qR(O))}}),children:typeof d=="function"?d({isCurrentTabStop:x,hasTabStop:_!=null}):d})})});GR.displayName=KR;var b3={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x3(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function E3(t,e,n){const r=x3(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return b3[r]}function qR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function A3(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $R=FR,VR=GR,T3=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},vh=new WeakMap,my=new WeakMap,gy={},bb=0,YR=function(t){return t&&(t.host||YR(t.parentNode))},S3=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},_3=function(t,e,n,r){var s=S3(e,Array.isArray(t)?t:[t]);gy[n]||(gy[n]=new WeakMap);var c=gy[n],d=[],f=new Set,g=new Set(s),y=function(x){!x||f.has(x)||(f.add(x),y(x.parentNode))};s.forEach(y);var v=function(x){!x||g.has(x)||Array.prototype.forEach.call(x.children,function(b){if(f.has(b))v(b);else try{var A=b.getAttribute(r),I=A!==null&&A!=="false",_=(vh.get(b)||0)+1,N=(c.get(b)||0)+1;vh.set(b,_),c.set(b,N),d.push(b),_===1&&I&&my.set(b,!0),N===1&&b.setAttribute(n,"true"),I||b.setAttribute(r,"true")}catch(M){console.error("aria-hidden: cannot operate on ",b,M)}})};return v(e),f.clear(),bb++,function(){d.forEach(function(x){var b=vh.get(x)-1,A=c.get(x)-1;vh.set(x,b),c.set(x,A),b||(my.has(x)||x.removeAttribute(r),my.delete(x)),A||x.removeAttribute(n)}),bb--,bb||(vh=new WeakMap,vh=new WeakMap,my=new WeakMap,gy={})}},QR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=T3(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),_3(r,s,n,"aria-hidden")):function(){return null}},px=function(t,e){return px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},px(t,e)};function WR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");px(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mi=function(){return mi=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},mi.apply(this,arguments)};function dC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XR(t,e,n,r){var s=arguments.length,c=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,r);else for(var f=t.length-1;f>=0;f--)(d=t[f])&&(c=(s<3?d(c):s>3?d(e,n,c):d(e,n))||c);return s>3&&c&&Object.defineProperty(e,n,c),c}function JR(t,e){return function(n,r){e(n,r,t)}}function ZR(t,e,n,r,s,c){function d(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=r.kind,g=f==="getter"?"get":f==="setter"?"set":"value",y=!e&&t?r.static?t:t.prototype:null,v=e||(y?Object.getOwnPropertyDescriptor(y,r.name):{}),x,b=!1,A=n.length-1;A>=0;A--){var I={};for(var _ in r)I[_]=_==="access"?{}:r[_];for(var _ in r.access)I.access[_]=r.access[_];I.addInitializer=function(M){if(b)throw new TypeError("Cannot add initializers after decoration has completed");c.push(d(M||null))};var N=(0,n[A])(f==="accessor"?{get:v.get,set:v.set}:v[g],I);if(f==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(x=d(N.get))&&(v.get=x),(x=d(N.set))&&(v.set=x),(x=d(N.init))&&s.unshift(x)}else(x=d(N))&&(f==="field"?s.unshift(x):v[g]=x)}y&&Object.defineProperty(y,r.name,v),b=!0}function eN(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function tN(t){return typeof t=="symbol"?t:"".concat(t)}function nN(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function rN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function qt(t,e,n,r){function s(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function f(v){try{y(r.next(v))}catch(x){d(x)}}function g(v){try{y(r.throw(v))}catch(x){d(x)}}function y(v){v.done?c(v.value):s(v.value).then(f,g)}y((r=r.apply(t,e||[])).next())})}function oN(t,e){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,s,c,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=f(0),d.throw=f(1),d.return=f(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(y){return function(v){return g([y,v])}}function g(y){if(r)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(n=0)),n;)try{if(r=1,s&&(c=y[0]&2?s.return:y[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,y[1])).done)return c;switch(s=0,c&&(y=[y[0]&2,c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,s=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(y[0]===6||y[0]===2)){n=0;continue}if(y[0]===3&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(y[0]===6&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=e.call(t,n)}catch(v){y=[6,v],s=0}finally{r=c=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var hC=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function iN(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&hC(e,t,n)}function gv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function EA(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,c=[],d;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)c.push(s.value)}catch(f){d={error:f}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(d)throw d.error}}return c}function sN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(EA(arguments[e]));return t}function aN(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var c=arguments[e],d=0,f=c.length;d<f;d++,s++)r[s]=c[d];return r}function AA(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,c;r<s;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))}function Hh(t){return this instanceof Hh?(this.v=t,this):new Hh(t)}function cN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,c=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",d),s[Symbol.asyncIterator]=function(){return this},s;function d(A){return function(I){return Promise.resolve(I).then(A,x)}}function f(A,I){r[A]&&(s[A]=function(_){return new Promise(function(N,M){c.push([A,_,N,M])>1||g(A,_)})},I&&(s[A]=I(s[A])))}function g(A,I){try{y(r[A](I))}catch(_){b(c[0][3],_)}}function y(A){A.value instanceof Hh?Promise.resolve(A.value.v).then(v,x):b(c[0][2],A)}function v(A){g("next",A)}function x(A){g("throw",A)}function b(A,I){A(I),c.shift(),c.length&&g(c[0][0],c[0][1])}}function lN(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,c){e[s]=t[s]?function(d){return(n=!n)?{value:Hh(t[s](d)),done:!1}:c?c(d):d}:c}}function uN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gv=="function"?gv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(c){n[c]=t[c]&&function(d){return new Promise(function(f,g){d=t[c](d),s(f,g,d.done,d.value)})}}function s(c,d,f,g){Promise.resolve(g).then(function(y){c({value:y,done:f})},d)}}function dN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var k3=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},yx=function(t){return yx=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},yx(t)};function hN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=yx(t),r=0;r<n.length;r++)n[r]!=="default"&&hC(e,t,n[r]);return k3(e,t),e}function fN(t){return t&&t.__esModule?t:{default:t}}function mN(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function gN(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function pN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function yN(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(c){return Promise.reject(c)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var I3=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function vN(t){function e(c){t.error=t.hasError?new I3(c,t.error,"An error was suppressed during disposal."):c,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var c=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(c).then(s,function(d){return e(d),s()})}else r|=1}catch(d){e(d)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function CN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,c,d){return r?e?".jsx":".js":s&&(!c||!d)?n:s+c+"."+d.toLowerCase()+"js"}):t}const R3={__extends:WR,__assign:mi,__rest:dC,__decorate:XR,__param:JR,__esDecorate:ZR,__runInitializers:eN,__propKey:tN,__setFunctionName:nN,__metadata:rN,__awaiter:qt,__generator:oN,__createBinding:hC,__exportStar:iN,__values:gv,__read:EA,__spread:sN,__spreadArrays:aN,__spreadArray:AA,__await:Hh,__asyncGenerator:cN,__asyncDelegator:lN,__asyncValues:uN,__makeTemplateObject:dN,__importStar:hN,__importDefault:fN,__classPrivateFieldGet:mN,__classPrivateFieldSet:gN,__classPrivateFieldIn:pN,__addDisposableResource:yN,__disposeResources:vN,__rewriteRelativeImportExtension:CN},N3=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:yN,get __assign(){return mi},__asyncDelegator:lN,__asyncGenerator:cN,__asyncValues:uN,__await:Hh,__awaiter:qt,__classPrivateFieldGet:mN,__classPrivateFieldIn:pN,__classPrivateFieldSet:gN,__createBinding:hC,__decorate:XR,__disposeResources:vN,__esDecorate:ZR,__exportStar:iN,__extends:WR,__generator:oN,__importDefault:fN,__importStar:hN,__makeTemplateObject:dN,__metadata:rN,__param:JR,__propKey:tN,__read:EA,__rest:dC,__rewriteRelativeImportExtension:CN,__runInitializers:eN,__setFunctionName:nN,__spread:sN,__spreadArray:AA,__spreadArrays:aN,__values:gv,default:R3},Symbol.toStringTag,{value:"Module"}));var Py="right-scroll-bar-position",Dy="width-before-scroll-bar",O3="with-scroll-bars-hidden",M3="--removed-body-scroll-bar-size";function xb(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function P3(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var D3=typeof window<"u"?k.useLayoutEffect:k.useEffect,h0=new WeakMap;function j3(t,e){var n=P3(null,function(r){return t.forEach(function(s){return xb(s,r)})});return D3(function(){var r=h0.get(n);if(r){var s=new Set(r),c=new Set(t),d=n.current;s.forEach(function(f){c.has(f)||xb(f,null)}),c.forEach(function(f){s.has(f)||xb(f,d)})}h0.set(n,t)},[t]),n}function L3(t){return t}function U3(t,e){e===void 0&&(e=L3);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var d=e(c,r);return n.push(d),function(){n=n.filter(function(f){return f!==d})}},assignSyncMedium:function(c){for(r=!0;n.length;){var d=n;n=[],d.forEach(c)}n={push:function(f){return c(f)},filter:function(){return n}}},assignMedium:function(c){r=!0;var d=[];if(n.length){var f=n;n=[],f.forEach(c),d=n}var g=function(){var v=d;d=[],v.forEach(c)},y=function(){return Promise.resolve().then(g)};y(),n={push:function(v){d.push(v),y()},filter:function(v){return d=d.filter(v),n}}}};return s}function H3(t){t===void 0&&(t={});var e=U3(null);return e.options=mi({async:!0,ssr:!1},t),e}var wN=function(t){var e=t.sideCar,n=dC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,mi({},n))};wN.isSideCarExport=!0;function B3(t,e){return t.useMedium(e),wN}var bN=H3(),Eb=function(){},fC=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:Eb,onWheelCapture:Eb,onTouchMoveCapture:Eb}),s=r[0],c=r[1],d=t.forwardProps,f=t.children,g=t.className,y=t.removeScrollBar,v=t.enabled,x=t.shards,b=t.sideCar,A=t.noRelative,I=t.noIsolation,_=t.inert,N=t.allowPinchZoom,M=t.as,U=M===void 0?"div":M,O=t.gapMode,L=dC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=b,G=j3([n,e]),V=mi(mi({},L),s);return k.createElement(k.Fragment,null,v&&k.createElement(H,{sideCar:bN,removeScrollBar:y,shards:x,noRelative:A,noIsolation:I,inert:_,setCallbacks:c,allowPinchZoom:!!N,lockRef:n,gapMode:O}),d?k.cloneElement(k.Children.only(f),mi(mi({},V),{ref:G})):k.createElement(U,mi({},V,{className:g,ref:G}),f))});fC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fC.classNames={fullWidth:Dy,zeroRight:Py};var z3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function F3(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=z3();return e&&t.setAttribute("nonce",e),t}function K3(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function G3(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var q3=function(){var t=0,e=null;return{add:function(n){t==0&&(e=F3())&&(K3(e,n),G3(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},$3=function(){var t=q3();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},xN=function(){var t=$3(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},V3={left:0,top:0,right:0,gap:0},Ab=function(t){return parseInt(t||"",10)||0},Y3=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ab(n),Ab(r),Ab(s)]},Q3=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return V3;var e=Y3(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},W3=xN(),Nh="data-scroll-locked",X3=function(t,e,n,r){var s=t.left,c=t.top,d=t.right,f=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(O3,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(f,"px ").concat(r,`;
  }
  body[`).concat(Nh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(f,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Py,` {
    right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(Dy,` {
    margin-right: `).concat(f,"px ").concat(r,`;
  }
  
  .`).concat(Py," .").concat(Py,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dy," .").concat(Dy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nh,`] {
    `).concat(M3,": ").concat(f,`px;
  }
`)},f0=function(){var t=parseInt(document.body.getAttribute(Nh)||"0",10);return isFinite(t)?t:0},J3=function(){k.useEffect(function(){return document.body.setAttribute(Nh,(f0()+1).toString()),function(){var t=f0()-1;t<=0?document.body.removeAttribute(Nh):document.body.setAttribute(Nh,t.toString())}},[])},Z3=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;J3();var c=k.useMemo(function(){return Q3(s)},[s]);return k.createElement(W3,{styles:X3(c,!e,s,n?"":"!important")})},vx=!1;if(typeof window<"u")try{var py=Object.defineProperty({},"passive",{get:function(){return vx=!0,!0}});window.addEventListener("test",py,py),window.removeEventListener("test",py,py)}catch{vx=!1}var Ch=vx?{passive:!1}:!1,eB=function(t){return t.tagName==="TEXTAREA"},EN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!eB(t)&&n[e]==="visible")},tB=function(t){return EN(t,"overflowY")},nB=function(t){return EN(t,"overflowX")},m0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=AN(t,r);if(s){var c=TN(t,r),d=c[1],f=c[2];if(d>f)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rB=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},oB=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},AN=function(t,e){return t==="v"?tB(e):nB(e)},TN=function(t,e){return t==="v"?rB(e):oB(e)},iB=function(t,e){return t==="h"&&e==="rtl"?-1:1},sB=function(t,e,n,r,s){var c=iB(t,window.getComputedStyle(e).direction),d=c*r,f=n.target,g=e.contains(f),y=!1,v=d>0,x=0,b=0;do{if(!f)break;var A=TN(t,f),I=A[0],_=A[1],N=A[2],M=_-N-c*I;(I||M)&&AN(t,f)&&(x+=M,b+=I);var U=f.parentNode;f=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!g&&f!==document.body||g&&(e.contains(f)||e===f));return(v&&Math.abs(x)<1||!v&&Math.abs(b)<1)&&(y=!0),y},yy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},g0=function(t){return[t.deltaX,t.deltaY]},p0=function(t){return t&&"current"in t?t.current:t},aB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},cB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},lB=0,wh=[];function uB(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),s=k.useState(lB++)[0],c=k.useState(xN)[0],d=k.useRef(t);k.useEffect(function(){d.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=AA([t.lockRef.current],(t.shards||[]).map(p0),!0).filter(Boolean);return _.forEach(function(N){return N.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var f=k.useCallback(function(_,N){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!d.current.allowPinchZoom;var M=yy(_),U=n.current,O="deltaX"in _?_.deltaX:U[0]-M[0],L="deltaY"in _?_.deltaY:U[1]-M[1],H,G=_.target,V=Math.abs(O)>Math.abs(L)?"h":"v";if("touches"in _&&V==="h"&&G.type==="range")return!1;var $=m0(V,G);if(!$)return!0;if($?H=V:(H=V==="v"?"h":"v",$=m0(V,G)),!$)return!1;if(!r.current&&"changedTouches"in _&&(O||L)&&(r.current=H),!H)return!0;var ee=r.current||H;return sB(ee,N,_,ee==="h"?O:L)},[]),g=k.useCallback(function(_){var N=_;if(!(!wh.length||wh[wh.length-1]!==c)){var M="deltaY"in N?g0(N):yy(N),U=e.current.filter(function(H){return H.name===N.type&&(H.target===N.target||N.target===H.shadowParent)&&aB(H.delta,M)})[0];if(U&&U.should){N.cancelable&&N.preventDefault();return}if(!U){var O=(d.current.shards||[]).map(p0).filter(Boolean).filter(function(H){return H.contains(N.target)}),L=O.length>0?f(N,O[0]):!d.current.noIsolation;L&&N.cancelable&&N.preventDefault()}}},[]),y=k.useCallback(function(_,N,M,U){var O={name:_,delta:N,target:M,should:U,shadowParent:dB(M)};e.current.push(O),setTimeout(function(){e.current=e.current.filter(function(L){return L!==O})},1)},[]),v=k.useCallback(function(_){n.current=yy(_),r.current=void 0},[]),x=k.useCallback(function(_){y(_.type,g0(_),_.target,f(_,t.lockRef.current))},[]),b=k.useCallback(function(_){y(_.type,yy(_),_.target,f(_,t.lockRef.current))},[]);k.useEffect(function(){return wh.push(c),t.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:b}),document.addEventListener("wheel",g,Ch),document.addEventListener("touchmove",g,Ch),document.addEventListener("touchstart",v,Ch),function(){wh=wh.filter(function(_){return _!==c}),document.removeEventListener("wheel",g,Ch),document.removeEventListener("touchmove",g,Ch),document.removeEventListener("touchstart",v,Ch)}},[]);var A=t.removeScrollBar,I=t.inert;return k.createElement(k.Fragment,null,I?k.createElement(c,{styles:cB(s)}):null,A?k.createElement(Z3,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function dB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const hB=B3(bN,uB);var TA=k.forwardRef(function(t,e){return k.createElement(fC,mi({},t,{ref:e,sideCar:hB}))});TA.classNames=fC.classNames;var Cx=["Enter"," "],fB=["ArrowDown","PageUp","Home"],SN=["ArrowUp","PageDown","End"],mB=[...fB,...SN],gB={ltr:[...Cx,"ArrowRight"],rtl:[...Cx,"ArrowLeft"]},pB={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Og="Menu",[dg,yB,vB]=dA(Og),[Zu,_N]=oc(Og,[vB,lC,uC]),mC=lC(),kN=uC(),[CB,ed]=Zu(Og),[wB,Mg]=Zu(Og),IN=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:c,modal:d=!0}=t,f=mC(e),[g,y]=k.useState(null),v=k.useRef(!1),x=wr(c),b=Ig(s);return k.useEffect(()=>{const A=()=>{v.current=!0,document.addEventListener("pointerdown",I,{capture:!0,once:!0}),document.addEventListener("pointermove",I,{capture:!0,once:!0})},I=()=>v.current=!1;return document.addEventListener("keydown",A,{capture:!0}),()=>{document.removeEventListener("keydown",A,{capture:!0}),document.removeEventListener("pointerdown",I,{capture:!0}),document.removeEventListener("pointermove",I,{capture:!0})}},[]),h.jsx(LR,{...f,children:h.jsx(CB,{scope:e,open:n,onOpenChange:x,content:g,onContentChange:y,children:h.jsx(wB,{scope:e,onClose:k.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:v,dir:b,modal:d,children:r})})})};IN.displayName=Og;var bB="MenuAnchor",SA=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=mC(n);return h.jsx(UR,{...s,...r,ref:e})});SA.displayName=bB;var _A="MenuPortal",[xB,RN]=Zu(_A,{forceMount:void 0}),NN=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,c=ed(_A,e);return h.jsx(xB,{scope:e,forceMount:n,children:h.jsx(ds,{present:n||c.open,children:h.jsx(xA,{asChild:!0,container:s,children:r})})})};NN.displayName=_A;var pi="MenuContent",[EB,kA]=Zu(pi),ON=k.forwardRef((t,e)=>{const n=RN(pi,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,c=ed(pi,t.__scopeMenu),d=Mg(pi,t.__scopeMenu);return h.jsx(dg.Provider,{scope:t.__scopeMenu,children:h.jsx(ds,{present:r||c.open,children:h.jsx(dg.Slot,{scope:t.__scopeMenu,children:d.modal?h.jsx(AB,{...s,ref:e}):h.jsx(TB,{...s,ref:e})})})})}),AB=k.forwardRef((t,e)=>{const n=ed(pi,t.__scopeMenu),r=k.useRef(null),s=Lt(e,r);return k.useEffect(()=>{const c=r.current;if(c)return QR(c)},[]),h.jsx(IA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:We(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),TB=k.forwardRef((t,e)=>{const n=ed(pi,t.__scopeMenu);return h.jsx(IA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),SB=jh("MenuContent.ScrollLock"),IA=k.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:f,onEntryFocus:g,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:A,disableOutsideScroll:I,..._}=t,N=ed(pi,n),M=Mg(pi,n),U=mC(n),O=kN(n),L=yB(n),[H,G]=k.useState(null),V=k.useRef(null),$=Lt(e,V,N.onContentChange),ee=k.useRef(0),se=k.useRef(""),ce=k.useRef(0),oe=k.useRef(null),he=k.useRef("right"),W=k.useRef(0),J=I?TA:k.Fragment,P=I?{as:SB,allowPinchZoom:!0}:void 0,F=X=>{const B=se.current+X,Q=L().filter(le=>!le.disabled),ie=document.activeElement,ue=Q.find(le=>le.ref.current===ie)?.textValue,me=Q.map(le=>le.textValue),Oe=UB(me,B,ue),xe=Q.find(le=>le.textValue===Oe)?.ref.current;(function le(Ce){se.current=Ce,window.clearTimeout(ee.current),Ce!==""&&(ee.current=window.setTimeout(()=>le(""),1e3))})(B),xe&&setTimeout(()=>xe.focus())};k.useEffect(()=>()=>window.clearTimeout(ee.current),[]),fR();const Y=k.useCallback(X=>he.current===oe.current?.side&&BB(X,oe.current?.area),[]);return h.jsx(EB,{scope:n,searchRef:se,onItemEnter:k.useCallback(X=>{Y(X)&&X.preventDefault()},[Y]),onItemLeave:k.useCallback(X=>{Y(X)||(V.current?.focus(),G(null))},[Y]),onTriggerLeave:k.useCallback(X=>{Y(X)&&X.preventDefault()},[Y]),pointerGraceTimerRef:ce,onPointerGraceIntentChange:k.useCallback(X=>{oe.current=X},[]),children:h.jsx(J,{...P,children:h.jsx(fA,{asChild:!0,trapped:s,onMountAutoFocus:We(c,X=>{X.preventDefault(),V.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:h.jsx(hA,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:y,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:b,onDismiss:A,children:h.jsx($R,{asChild:!0,...O,dir:M.dir,orientation:"vertical",loop:r,currentTabStopId:H,onCurrentTabStopIdChange:G,onEntryFocus:We(g,X=>{M.isUsingKeyboardRef.current||X.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(HR,{role:"menu","aria-orientation":"vertical","data-state":YN(N.open),"data-radix-menu-content":"",dir:M.dir,...U,..._,ref:$,style:{outline:"none",..._.style},onKeyDown:We(_.onKeyDown,X=>{const Q=X.target.closest("[data-radix-menu-content]")===X.currentTarget,ie=X.ctrlKey||X.altKey||X.metaKey,ue=X.key.length===1;Q&&(X.key==="Tab"&&X.preventDefault(),!ie&&ue&&F(X.key));const me=V.current;if(X.target!==me||!mB.includes(X.key))return;X.preventDefault();const xe=L().filter(le=>!le.disabled).map(le=>le.ref.current);SN.includes(X.key)&&xe.reverse(),jB(xe)}),onBlur:We(t.onBlur,X=>{X.currentTarget.contains(X.target)||(window.clearTimeout(ee.current),se.current="")}),onPointerMove:We(t.onPointerMove,hg(X=>{const B=X.target,Q=W.current!==X.clientX;if(X.currentTarget.contains(B)&&Q){const ie=X.clientX>W.current?"right":"left";he.current=ie,W.current=X.clientX}}))})})})})})})});ON.displayName=pi;var _B="MenuGroup",RA=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ft.div,{role:"group",...r,ref:e})});RA.displayName=_B;var kB="MenuLabel",MN=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ft.div,{...r,ref:e})});MN.displayName=kB;var pv="MenuItem",y0="menu.itemSelect",gC=k.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,c=k.useRef(null),d=Mg(pv,t.__scopeMenu),f=kA(pv,t.__scopeMenu),g=Lt(e,c),y=k.useRef(!1),v=()=>{const x=c.current;if(!n&&x){const b=new CustomEvent(y0,{bubbles:!0,cancelable:!0});x.addEventListener(y0,A=>r?.(A),{once:!0}),uR(x,b),b.defaultPrevented?y.current=!1:d.onClose()}};return h.jsx(PN,{...s,ref:g,disabled:n,onClick:We(t.onClick,v),onPointerDown:x=>{t.onPointerDown?.(x),y.current=!0},onPointerUp:We(t.onPointerUp,x=>{y.current||x.currentTarget?.click()}),onKeyDown:We(t.onKeyDown,x=>{const b=f.searchRef.current!=="";n||b&&x.key===" "||Cx.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});gC.displayName=pv;var PN=k.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...c}=t,d=kA(pv,n),f=kN(n),g=k.useRef(null),y=Lt(e,g),[v,x]=k.useState(!1),[b,A]=k.useState("");return k.useEffect(()=>{const I=g.current;I&&A((I.textContent??"").trim())},[c.children]),h.jsx(dg.ItemSlot,{scope:n,disabled:r,textValue:s??b,children:h.jsx(VR,{asChild:!0,...f,focusable:!r,children:h.jsx(ft.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...c,ref:y,onPointerMove:We(t.onPointerMove,hg(I=>{r?d.onItemLeave(I):(d.onItemEnter(I),I.defaultPrevented||I.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:We(t.onPointerLeave,hg(I=>d.onItemLeave(I))),onFocus:We(t.onFocus,()=>x(!0)),onBlur:We(t.onBlur,()=>x(!1))})})})}),IB="MenuCheckboxItem",DN=k.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return h.jsx(BN,{scope:t.__scopeMenu,checked:n,children:h.jsx(gC,{role:"menuitemcheckbox","aria-checked":yv(n)?"mixed":n,...s,ref:e,"data-state":OA(n),onSelect:We(s.onSelect,()=>r?.(yv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});DN.displayName=IB;var jN="MenuRadioGroup",[RB,NB]=Zu(jN,{value:void 0,onValueChange:()=>{}}),LN=k.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,c=wr(r);return h.jsx(RB,{scope:t.__scopeMenu,value:n,onValueChange:c,children:h.jsx(RA,{...s,ref:e})})});LN.displayName=jN;var UN="MenuRadioItem",HN=k.forwardRef((t,e)=>{const{value:n,...r}=t,s=NB(UN,t.__scopeMenu),c=n===s.value;return h.jsx(BN,{scope:t.__scopeMenu,checked:c,children:h.jsx(gC,{role:"menuitemradio","aria-checked":c,...r,ref:e,"data-state":OA(c),onSelect:We(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});HN.displayName=UN;var NA="MenuItemIndicator",[BN,OB]=Zu(NA,{checked:!1}),zN=k.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,c=OB(NA,n);return h.jsx(ds,{present:r||yv(c.checked)||c.checked===!0,children:h.jsx(ft.span,{...s,ref:e,"data-state":OA(c.checked)})})});zN.displayName=NA;var MB="MenuSeparator",FN=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(ft.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});FN.displayName=MB;var PB="MenuArrow",KN=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=mC(n);return h.jsx(BR,{...s,...r,ref:e})});KN.displayName=PB;var DB="MenuSub",[JY,GN]=Zu(DB),Hm="MenuSubTrigger",qN=k.forwardRef((t,e)=>{const n=ed(Hm,t.__scopeMenu),r=Mg(Hm,t.__scopeMenu),s=GN(Hm,t.__scopeMenu),c=kA(Hm,t.__scopeMenu),d=k.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:g}=c,y={__scopeMenu:t.__scopeMenu},v=k.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return k.useEffect(()=>v,[v]),k.useEffect(()=>{const x=f.current;return()=>{window.clearTimeout(x),g(null)}},[f,g]),h.jsx(SA,{asChild:!0,...y,children:h.jsx(PN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":YN(n.open),...t,ref:oC(e,s.onTriggerChange),onClick:x=>{t.onClick?.(x),!(t.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:We(t.onPointerMove,hg(x=>{c.onItemEnter(x),!x.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),v()},100))})),onPointerLeave:We(t.onPointerLeave,hg(x=>{v();const b=n.content?.getBoundingClientRect();if(b){const A=n.content?.dataset.side,I=A==="right",_=I?-5:5,N=b[I?"left":"right"],M=b[I?"right":"left"];c.onPointerGraceIntentChange({area:[{x:x.clientX+_,y:x.clientY},{x:N,y:b.top},{x:M,y:b.top},{x:M,y:b.bottom},{x:N,y:b.bottom}],side:A}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(x),x.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:We(t.onKeyDown,x=>{const b=c.searchRef.current!=="";t.disabled||b&&x.key===" "||gB[r.dir].includes(x.key)&&(n.onOpenChange(!0),n.content?.focus(),x.preventDefault())})})})});qN.displayName=Hm;var $N="MenuSubContent",VN=k.forwardRef((t,e)=>{const n=RN(pi,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,c=ed(pi,t.__scopeMenu),d=Mg(pi,t.__scopeMenu),f=GN($N,t.__scopeMenu),g=k.useRef(null),y=Lt(e,g);return h.jsx(dg.Provider,{scope:t.__scopeMenu,children:h.jsx(ds,{present:r||c.open,children:h.jsx(dg.Slot,{scope:t.__scopeMenu,children:h.jsx(IA,{id:f.contentId,"aria-labelledby":f.triggerId,...s,ref:y,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{d.isUsingKeyboardRef.current&&g.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:We(t.onFocusOutside,v=>{v.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:We(t.onEscapeKeyDown,v=>{d.onClose(),v.preventDefault()}),onKeyDown:We(t.onKeyDown,v=>{const x=v.currentTarget.contains(v.target),b=pB[d.dir].includes(v.key);x&&b&&(c.onOpenChange(!1),f.trigger?.focus(),v.preventDefault())})})})})})});VN.displayName=$N;function YN(t){return t?"open":"closed"}function yv(t){return t==="indeterminate"}function OA(t){return yv(t)?"indeterminate":t?"checked":"unchecked"}function jB(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function LB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function UB(t,e,n){const s=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=LB(t,Math.max(c,0));s.length===1&&(d=d.filter(y=>y!==n));const g=d.find(y=>y.toLowerCase().startsWith(s.toLowerCase()));return g!==n?g:void 0}function HB(t,e){const{x:n,y:r}=t;let s=!1;for(let c=0,d=e.length-1;c<e.length;d=c++){const f=e[c],g=e[d],y=f.x,v=f.y,x=g.x,b=g.y;v>r!=b>r&&n<(x-y)*(r-v)/(b-v)+y&&(s=!s)}return s}function BB(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return HB(n,e)}function hg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var zB=IN,FB=SA,KB=NN,GB=ON,qB=RA,$B=MN,VB=gC,YB=DN,QB=LN,WB=HN,XB=zN,JB=FN,ZB=KN,ez=qN,tz=VN,pC="DropdownMenu",[nz,ZY]=oc(pC,[_N]),eo=_N(),[rz,QN]=nz(pC),WN=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:c,onOpenChange:d,modal:f=!0}=t,g=eo(e),y=k.useRef(null),[v,x]=Lh({prop:s,defaultProp:c??!1,onChange:d,caller:pC});return h.jsx(rz,{scope:e,triggerId:zu(),triggerRef:y,contentId:zu(),open:v,onOpenChange:x,onOpenToggle:k.useCallback(()=>x(b=>!b),[x]),modal:f,children:h.jsx(zB,{...g,open:v,onOpenChange:x,dir:r,modal:f,children:n})})};WN.displayName=pC;var XN="DropdownMenuTrigger",JN=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,c=QN(XN,n),d=eo(n);return h.jsx(FB,{asChild:!0,...d,children:h.jsx(ft.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:oC(e,c.triggerRef),onPointerDown:We(t.onPointerDown,f=>{!r&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:We(t.onKeyDown,f=>{r||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});JN.displayName=XN;var oz="DropdownMenuPortal",ZN=t=>{const{__scopeDropdownMenu:e,...n}=t,r=eo(e);return h.jsx(KB,{...r,...n})};ZN.displayName=oz;var eO="DropdownMenuContent",tO=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=QN(eO,n),c=eo(n),d=k.useRef(!1);return h.jsx(GB,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...r,ref:e,onCloseAutoFocus:We(t.onCloseAutoFocus,f=>{d.current||s.triggerRef.current?.focus(),d.current=!1,f.preventDefault()}),onInteractOutside:We(t.onInteractOutside,f=>{const g=f.detail.originalEvent,y=g.button===0&&g.ctrlKey===!0,v=g.button===2||y;(!s.modal||v)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tO.displayName=eO;var iz="DropdownMenuGroup",sz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(qB,{...s,...r,ref:e})});sz.displayName=iz;var az="DropdownMenuLabel",nO=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx($B,{...s,...r,ref:e})});nO.displayName=az;var cz="DropdownMenuItem",rO=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(VB,{...s,...r,ref:e})});rO.displayName=cz;var lz="DropdownMenuCheckboxItem",uz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(YB,{...s,...r,ref:e})});uz.displayName=lz;var dz="DropdownMenuRadioGroup",hz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(QB,{...s,...r,ref:e})});hz.displayName=dz;var fz="DropdownMenuRadioItem",mz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(WB,{...s,...r,ref:e})});mz.displayName=fz;var gz="DropdownMenuItemIndicator",pz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(XB,{...s,...r,ref:e})});pz.displayName=gz;var yz="DropdownMenuSeparator",oO=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(JB,{...s,...r,ref:e})});oO.displayName=yz;var vz="DropdownMenuArrow",Cz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(ZB,{...s,...r,ref:e})});Cz.displayName=vz;var wz="DropdownMenuSubTrigger",bz=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(ez,{...s,...r,ref:e})});bz.displayName=wz;var xz="DropdownMenuSubContent",Ez=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=eo(n);return h.jsx(tz,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ez.displayName=xz;var Az=WN,Tz=JN,Sz=ZN,_z=tO,kz=nO,Iz=rO,Rz=oO;/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oz=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),v0=t=>{const e=Oz(t);return e.charAt(0).toUpperCase()+e.slice(1)},iO=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Mz=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:c,iconNode:d,...f},g)=>k.createElement("svg",{ref:g,...Pz,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:iO("lucide",s),...!c&&!Mz(f)&&{"aria-hidden":"true"},...f},[...d.map(([y,v])=>k.createElement(y,v)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(t,e)=>{const n=k.forwardRef(({className:r,...s},c)=>k.createElement(Dz,{ref:c,iconNode:e,className:iO(`lucide-${Nz(v0(t))}`,`lucide-${t}`,r),...s}));return n.displayName=v0(t),n};/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],MA=qe("activity",jz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Uz=qe("arrow-down",Lz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Bz=qe("arrow-left",Hz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],sO=qe("book-open",zz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Ws=qe("bot",Fz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Gz=qe("check-check",Kz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yC=qe("check",qz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],us=qe("chevron-down",$z);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vC=qe("chevron-right",Vz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],wx=qe("chevron-up",Yz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],Wz=qe("chevrons-down",Qz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bh=qe("circle-alert",Xz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vv=qe("circle-check-big",Jz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],go=qe("circle-check",Zz);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],t5=qe("circle-play",e5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CC=qe("circle-x",n5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],o5=qe("cloud",r5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],aO=qe("code",i5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]],a5=qe("container",s5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Wm=qe("copy",c5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],bx=qe("database",l5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cv=qe("download",u5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],h5=qe("ellipsis-vertical",d5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],PA=qe("external-link",f5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ku=qe("file-text",m5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],cO=qe("folder-open",g5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lO=qe("globe",p5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],v5=qe("grid-3x3",y5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],w5=qe("house",C5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],x5=qe("image",b5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wv=qe("info",E5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],T5=qe("key",A5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],_5=qe("lightbulb",S5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wC=qe("loader-circle",k5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R5=qe("log-out",I5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],O5=qe("map",N5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],C0=qe("maximize-2",M5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],D5=qe("maximize",P5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],uO=qe("message-square",j5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],U5=qe("moon",L5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],dO=qe("music",H5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],xx=qe("package",B5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],F5=qe("panel-right-close",z5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]],G5=qe("panel-right-open",K5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],$5=qe("paperclip",q5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Y5=qe("play",V5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hO=qe("plus",Q5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],fO=qe("rocket",W5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DA=qe("rotate-ccw",X5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fg=qe("search",J5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],eF=qe("send-horizontal",Z5);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Tb=qe("send",tF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M7 2h13a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-5",key:"bt2siv"}],["path",{d:"M10 10 2.5 2.5C2 2 2 2.5 2 5v3a2 2 0 0 0 2 2h6z",key:"1hjrv1"}],["path",{d:"M22 17v-1a2 2 0 0 0-2-2h-1",key:"1iynyr"}],["path",{d:"M4 14a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16.5l1-.5.5.5-8-8H4z",key:"161ggg"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rF=qe("server-off",nF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ex=qe("settings",oF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sF=qe("shield-check",iF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],cF=qe("shuffle",aF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],uF=qe("sun",lF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],mO=qe("trash-2",dF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fF=qe("triangle-alert",hF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gF=qe("upload",mF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jA=qe("user",pF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Gu=qe("workflow",yF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],bC=qe("wrench",vF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],LA=qe("x",CF);/**
 * @license lucide-react v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gO=qe("zap",wF);function xC({...t}){return h.jsx(Az,{"data-slot":"dropdown-menu",...t})}function EC({...t}){return h.jsx(Tz,{"data-slot":"dropdown-menu-trigger",...t})}function AC({className:t,sideOffset:e=4,...n}){return h.jsx(Sz,{children:h.jsx(_z,{"data-slot":"dropdown-menu-content",sideOffset:e,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Ur({className:t,inset:e,variant:n="default",...r}){return h.jsx(Iz,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function Ax({className:t,inset:e,...n}){return h.jsx(kz,{"data-slot":"dropdown-menu-label","data-inset":e,className:xt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function zh({className:t,...e}){return h.jsx(Rz,{"data-slot":"dropdown-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",t),...e})}function TC({size:t="md",className:e}){return h.jsx(wC,{className:xt("animate-spin",{"h-4 w-4":t==="sm","h-6 w-6":t==="md","h-8 w-8":t==="lg"},e)})}const bF=t=>t==="workflow"?Gu:Ws;function xF({agents:t,workflows:e,selectedItem:n,onSelect:r,onBrowseGallery:s,isLoading:c=!1}){const[d,f]=k.useState(!1),g=[...t,...e].sort((A,I)=>A.name?.localeCompare(I.name||A.id)||A.id.localeCompare(I.id)),y=A=>{r(A),f(!1)},v=n?bF(n.type):Ws,x=n?.name||n?.id||"Select Agent or Workflow",b=n?.metadata?.lazy_loaded!==!1;return h.jsxs(xC,{open:d,onOpenChange:f,children:[h.jsx(EC,{asChild:!0,children:h.jsx(ht,{variant:"outline",className:"w-64 justify-between font-mono text-sm",disabled:c,children:c?h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(TC,{size:"sm"}),h.jsx("span",{className:"text-muted-foreground",children:"Loading..."})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(v,{className:"h-4 w-4 flex-shrink-0"}),h.jsx("span",{className:"truncate",children:x}),n&&!b&&h.jsx(wC,{className:"h-3 w-3 text-muted-foreground animate-spin ml-auto flex-shrink-0"})]}),h.jsx(us,{className:"h-4 w-4 opacity-50"})]})})}),h.jsxs(AC,{className:"w-80 font-mono",children:[t.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs(Ax,{className:"flex items-center gap-2",children:[h.jsx(Ws,{className:"h-4 w-4"}),"Agents (",t.length,")"]}),t.map(A=>{const I=A.metadata?.lazy_loaded!==!1;return h.jsx(Ur,{className:"cursor-pointer group",children:h.jsx("div",{className:"flex items-center justify-between w-full gap-2",children:h.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",onClick:()=>y(A),children:[h.jsx(Ws,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("span",{className:"truncate font-medium block",children:A.name||A.id}),I&&A.description&&h.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:A.description})]})]})})},A.id)})]}),e.length>0&&h.jsxs(h.Fragment,{children:[t.length>0&&h.jsx(zh,{}),h.jsxs(Ax,{className:"flex items-center gap-2",children:[h.jsx(Gu,{className:"h-4 w-4"}),"Workflows (",e.length,")"]}),e.map(A=>{const I=A.metadata?.lazy_loaded!==!1;return h.jsx(Ur,{className:"cursor-pointer group",children:h.jsx("div",{className:"flex items-center justify-between w-full gap-2",children:h.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",onClick:()=>y(A),children:[h.jsx(Gu,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx("span",{className:"truncate font-medium block",children:A.name||A.id}),I&&A.description&&h.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:A.description})]})]})})},A.id)})]}),g.length===0&&h.jsx(Ur,{disabled:!0,children:h.jsx("div",{className:"text-center text-muted-foreground py-2",children:c?"Loading agents and workflows...":"No agents or workflows found"})}),h.jsx(zh,{}),h.jsxs(Ur,{className:"cursor-pointer text-primary",onClick:()=>{s?.(),f(!1)},children:[h.jsx(hO,{className:"h-4 w-4 mr-2"}),"Browse Gallery"]})]})]})}var EF=(t,e,n,r,s,c,d,f)=>{let g=document.documentElement,y=["light","dark"];function v(A){(Array.isArray(t)?t:[t]).forEach(I=>{let _=I==="class",N=_&&c?s.map(M=>c[M]||M):s;_?(g.classList.remove(...N),g.classList.add(c&&c[A]?c[A]:A)):g.setAttribute(I,A)}),x(A)}function x(A){f&&y.includes(A)&&(g.style.colorScheme=A)}function b(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)v(r);else try{let A=localStorage.getItem(e)||n,I=d&&A==="system"?b():A;v(I)}catch{}},w0=["light","dark"],pO="(prefers-color-scheme: dark)",AF=typeof window>"u",UA=k.createContext(void 0),TF={setTheme:t=>{},themes:[]},SF=()=>{var t;return(t=k.useContext(UA))!=null?t:TF},_F=t=>k.useContext(UA)?k.createElement(k.Fragment,null,t.children):k.createElement(IF,{...t}),kF=["light","dark"],IF=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:c=kF,defaultTheme:d=n?"system":"light",attribute:f="data-theme",value:g,children:y,nonce:v,scriptProps:x})=>{let[b,A]=k.useState(()=>NF(s,d)),[I,_]=k.useState(()=>b==="system"?Sb():b),N=g?Object.values(g):c,M=k.useCallback(H=>{let G=H;if(!G)return;H==="system"&&n&&(G=Sb());let V=g?g[G]:G,$=e?OF(v):null,ee=document.documentElement,se=ce=>{ce==="class"?(ee.classList.remove(...N),V&&ee.classList.add(V)):ce.startsWith("data-")&&(V?ee.setAttribute(ce,V):ee.removeAttribute(ce))};if(Array.isArray(f)?f.forEach(se):se(f),r){let ce=w0.includes(d)?d:null,oe=w0.includes(G)?G:ce;ee.style.colorScheme=oe}$?.()},[v]),U=k.useCallback(H=>{let G=typeof H=="function"?H(b):H;A(G);try{localStorage.setItem(s,G)}catch{}},[b]),O=k.useCallback(H=>{let G=Sb(H);_(G),b==="system"&&n&&!t&&M("system")},[b,t]);k.useEffect(()=>{let H=window.matchMedia(pO);return H.addListener(O),O(H),()=>H.removeListener(O)},[O]),k.useEffect(()=>{let H=G=>{G.key===s&&(G.newValue?A(G.newValue):U(d))};return window.addEventListener("storage",H),()=>window.removeEventListener("storage",H)},[U]),k.useEffect(()=>{M(t??b)},[t,b]);let L=k.useMemo(()=>({theme:b,setTheme:U,forcedTheme:t,resolvedTheme:b==="system"?I:b,themes:n?[...c,"system"]:c,systemTheme:n?I:void 0}),[b,U,t,I,n,c]);return k.createElement(UA.Provider,{value:L},k.createElement(RF,{forcedTheme:t,storageKey:s,attribute:f,enableSystem:n,enableColorScheme:r,defaultTheme:d,value:g,themes:c,nonce:v,scriptProps:x}),y)},RF=k.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:c,value:d,themes:f,nonce:g,scriptProps:y})=>{let v=JSON.stringify([n,e,c,t,f,d,r,s]).slice(1,-1);return k.createElement("script",{...y,suppressHydrationWarning:!0,nonce:typeof window>"u"?g:"",dangerouslySetInnerHTML:{__html:`(${EF.toString()})(${v})`}})}),NF=(t,e)=>{if(AF)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},OF=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},Sb=t=>(t||(t=window.matchMedia(pO)),t.matches?"dark":"light");function MF(){const{setTheme:t}=SF();return h.jsxs(xC,{children:[h.jsx(EC,{asChild:!0,children:h.jsxs(ht,{variant:"ghost",size:"sm",children:[h.jsx(uF,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),h.jsx(U5,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),h.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),h.jsxs(AC,{align:"end",children:[h.jsx(Ur,{onClick:()=>t("light"),children:"Light"}),h.jsx(Ur,{onClick:()=>t("dark"),children:"Dark"}),h.jsx(Ur,{onClick:()=>t("system"),children:"System"})]})]})}var Po;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(Po||(Po={}));const PF="v1.0",DF="https://graph.microsoft.com/",jF=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);let bv=class Tx extends Error{static setGraphClientError(e){let n;return e instanceof Error?n=e:(n=new Tx,n.customError=e),n}constructor(e){super(e),Object.setPrototypeOf(this,Tx.prototype)}};const LF=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],UF=t=>{const e=c=>c.replace(/\/+$/,""),n=c=>c.replace(/^\/+/,""),r=(c,d)=>[e(c),n(d)].join("/");return Array.prototype.slice.call(t).reduce(r)},_b=t=>{const e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t},yO=t=>CO(t),vO=(t,e)=>(e.forEach(n=>HF(n)),CO(t,e)),CO=(t,e=jF)=>{if(t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");const n=t.indexOf(":"),r=t.indexOf("/");let s="";if(r!==-1)return n!==-1&&n<r?(s=t.substring(0,n),e.has(s)):(s=t.substring(0,r),e.has(s))}return!1},HF=t=>{if(t.indexOf("/")!==-1)throw new bv("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class qu{constructor(e=[]){this.middlewareOptions=new Map;for(const n of e){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,n){this.middlewareOptions.set(e,n)}}const BF=()=>{let t="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t},wO=(t,e,n)=>{let r=null;if(typeof Request<"u"&&t instanceof Request)r=t.headers.get(n);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(n);else if(e.headers instanceof Array){const s=e.headers;for(let c=0,d=s.length;c<d;c++)if(s[c][0]===n){r=s[c][1];break}}else e.headers[n]!==void 0&&(r=e.headers[n]);return r},bO=(t,e,n,r)=>{if(typeof Request<"u"&&t instanceof Request)t.headers.set(n,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(n,r);else if(e.headers instanceof Array){let s=0;const c=e.headers.length;for(;s<c;s++){const d=e.headers[s];if(d[0]===n){d[1]=r;break}}s===c&&e.headers.push([n,r])}else Object.assign(e.headers,{[n]:r})},xO=(t,e,n,r)=>{typeof Request<"u"&&t instanceof Request?t.headers.append(n,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[n]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(n,r):e.headers instanceof Array?e.headers.push([n,r]):e.headers===void 0?e.headers={[n]:r}:e.headers[n]===void 0?e.headers[n]=r:e.headers[n]+=`, ${r}`)},zF=(t,e)=>qt(void 0,void 0,void 0,function*(){const n=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:s,referrer:c,referrerPolicy:d,mode:f,credentials:g,cache:y,redirect:v,integrity:x,keepalive:b,signal:A}=e;return new Request(t,{method:r,headers:s,body:n,referrer:c,referrerPolicy:d,mode:f,credentials:g,cache:y,redirect:v,integrity:x,keepalive:b,signal:A})});class FF{constructor(e,n){this.authenticationProvider=e,this.authenticationProviderOptions=n}}var Fh;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(Fh||(Fh={}));class El{constructor(){this.featureUsage=Fh.NONE}static updateFeatureUsageFlag(e,n){let r;e.middlewareControl instanceof qu?r=e.middlewareControl.getMiddlewareOptions(El):e.middlewareControl=new qu,typeof r>"u"&&(r=new El,e.middlewareControl.setMiddlewareOptions(El,r)),r.setFeatureUsage(n)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class mg{constructor(e){this.authenticationProvider=e}execute(e){return qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(yO(n)||e.customHosts&&vO(n,e.customHosts)){let r;e.middlewareControl instanceof qu&&(r=e.middlewareControl.getMiddlewareOptions(FF));let s,c;r&&(s=r.authenticationProvider,c=r.authenticationProviderOptions),s||(s=this.authenticationProvider);const f=`Bearer ${yield s.getAccessToken(c)}`;xO(e.request,e.options,mg.AUTHORIZATION_HEADER,f),El.updateFeatureUsageFlag(e,Fh.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[mg.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}mg.AUTHORIZATION_HEADER="Authorization";class KF{execute(e){return qt(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class In{constructor(e=In.DEFAULT_DELAY,n=In.DEFAULT_MAX_RETRIES,r=In.defaultShouldRetry){if(e>In.MAX_DELAY&&n>In.MAX_MAX_RETRIES){const s=new Error(`Delay and MaxRetries should not be more than ${In.MAX_DELAY} and ${In.MAX_MAX_RETRIES}`);throw s.name="MaxLimitExceeded",s}else if(e>In.MAX_DELAY){const s=new Error(`Delay should not be more than ${In.MAX_DELAY}`);throw s.name="MaxLimitExceeded",s}else if(n>In.MAX_MAX_RETRIES){const s=new Error(`MaxRetries should not be more than ${In.MAX_MAX_RETRIES}`);throw s.name="MaxLimitExceeded",s}else if(e<0&&n<0){const s=new Error("Delay and MaxRetries should not be negative");throw s.name="MinExpectationNotMet",s}else if(e<0){const s=new Error("Delay should not be negative");throw s.name="MinExpectationNotMet",s}else if(n<0){const s=new Error("MaxRetries should not be negative");throw s.name="MinExpectationNotMet",s}this.delay=Math.min(e,In.MAX_DELAY),this.maxRetries=Math.min(n,In.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return In.MAX_DELAY}}In.DEFAULT_DELAY=3;In.DEFAULT_MAX_RETRIES=3;In.MAX_DELAY=180;In.MAX_MAX_RETRIES=10;In.defaultShouldRetry=()=>!0;class Al{constructor(e=new In){this.options=e}isRetry(e){return Al.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,n){const r=typeof e=="string"?n.method:e.method;return!((r===Po.PUT||r===Po.PATCH||r===Po.POST)&&wO(e,n,"Content-Type")==="application/octet-stream")}getDelay(e,n,r){const s=()=>Number(Math.random().toFixed(3)),c=e.headers!==void 0?e.headers.get(Al.RETRY_AFTER_HEADER):null;let d;return c!==null?Number.isNaN(Number(c))?d=Math.round((new Date(c).getTime()-Date.now())/1e3):d=Number(c):d=n>=2?this.getExponentialBackOffTime(n)+r+s():r+s(),Math.min(d,this.options.getMaxDelay()+s())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return qt(this,void 0,void 0,function*(){const n=e*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(e){let n;return e.middlewareControl instanceof qu&&(n=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new In,this.options)),n}executeWithRetry(e,n,r){return qt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),n<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,n,e.request,e.options,e.response)){++n,bO(e.request,e.options,Al.RETRY_ATTEMPT_HEADER,n.toString());const s=this.getDelay(e.response,n,r.delay);return yield this.sleep(s),yield this.executeWithRetry(e,n,r)}else return})}execute(e){return qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return El.updateFeatureUsageFlag(e,Fh.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}Al.RETRY_STATUS_CODES=[429,503,504];Al.RETRY_ATTEMPT_HEADER="Retry-Attempt";Al.RETRY_AFTER_HEADER="Retry-After";class gi{constructor(e=gi.DEFAULT_MAX_REDIRECTS,n=gi.defaultShouldRedirect){if(e>gi.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${gi.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=n}}gi.DEFAULT_MAX_REDIRECTS=5;gi.MAX_MAX_REDIRECTS=20;gi.defaultShouldRedirect=()=>!0;class Lo{constructor(e=new gi){this.options=e}isRedirect(e){return Lo.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(Lo.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(Lo.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,s=r.exec(e);let c,d;s!==null&&(c=s[0]);const f=r.exec(n);return f!==null&&(d=f[0]),typeof c<"u"&&typeof d<"u"&&c!==d}updateRequestUrl(e,n){return qt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?e:yield zF(e,n.request)})}getOptions(e){let n;return e.middlewareControl instanceof qu&&(n=e.middlewareControl.getMiddlewareOptions(gi)),typeof n>"u"&&(n=Object.assign(new gi,this.options)),n}executeWithRedirect(e,n,r){return qt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const s=e.response;if(n<r.maxRedirects&&this.isRedirect(s)&&this.hasLocationHeader(s)&&r.shouldRedirect(s)){if(++n,s.status===Lo.STATUS_CODE_SEE_OTHER)e.options.method=Po.GET,delete e.options.body;else{const c=this.getLocationHeader(s);!this.isRelativeURL(c)&&this.shouldDropAuthorizationHeader(s.url,c)&&delete e.options.headers[Lo.AUTHORIZATION_HEADER],yield this.updateRequestUrl(c,e)}yield this.executeWithRedirect(e,n,r)}else return})}execute(e){return qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=Lo.MANUAL_REDIRECT,El.updateFeatureUsageFlag(e,Fh.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}}Lo.REDIRECT_STATUS_CODES=[301,302,303,307,308];Lo.STATUS_CODE_SEE_OTHER=303;Lo.LOCATION_HEADER="Location";Lo.AUTHORIZATION_HEADER="Authorization";Lo.MANUAL_REDIRECT="manual";const GF="3.0.7";class Do{execute(e){return qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(yO(n)||e.customHosts&&vO(n,e.customHosts)){let r=wO(e.request,e.options,Do.CLIENT_REQUEST_ID_HEADER);r||(r=BF(),bO(e.request,e.options,Do.CLIENT_REQUEST_ID_HEADER,r));let s=`${Do.PRODUCT_NAME}/${GF}`,c;if(e.middlewareControl instanceof qu&&(c=e.middlewareControl.getMiddlewareOptions(El)),c){const d=c.getFeatureUsage();s+=` (${Do.FEATURE_USAGE_STRING}=${d})`}xO(e.request,e.options,Do.SDK_VERSION_HEADER,s)}else delete e.options.headers[Do.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[Do.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Do.CLIENT_REQUEST_ID_HEADER="client-request-id";Do.SDK_VERSION_HEADER="SdkVersion";Do.PRODUCT_NAME="graph-js";Do.FEATURE_USAGE_STRING="featureUsage";var b0;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(b0||(b0={}));var es;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(es||(es={}));var Sx;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(Sx||(Sx={}));var xv;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(xv||(xv={}));var Ev;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Ev||(Ev={}));class Xm{static parseDocumentResponse(e,n){return typeof DOMParser<"u"?new Promise((r,s)=>{e.text().then(c=>{try{const f=new DOMParser().parseFromString(c,n);r(f)}catch(d){s(d)}})}):Promise.resolve(e.body)}static convertResponse(e,n){return qt(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const s=e.headers.get("Content-type");switch(n){case es.ARRAYBUFFER:r=yield e.arrayBuffer();break;case es.BLOB:r=yield e.blob();break;case es.DOCUMENT:r=yield Xm.parseDocumentResponse(e,Sx.TEXT_XML);break;case es.JSON:r=yield e.json();break;case es.STREAM:r=yield Promise.resolve(e.body);break;case es.TEXT:r=yield e.text();break;default:if(s!==null){const c=s.split(";")[0];new RegExp(Ev.DOCUMENT).test(c)?r=yield Xm.parseDocumentResponse(e,c):new RegExp(Ev.IMAGE).test(c)?r=e.blob():c===xv.TEXT_PLAIN?r=yield e.text():c===xv.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,n,r){return qt(this,void 0,void 0,function*(){if(n===es.RAW)return Promise.resolve(e);{const s=yield Xm.convertResponse(e,n);if(e.ok)if(typeof r=="function")r(null,s);else return s;else throw s}})}}class qF{constructor(e){this.provider=e}getAccessToken(){return qt(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.provider((r,s)=>qt(this,void 0,void 0,function*(){if(s)e(s);else{if(!r){const d="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new bv(d)}const c=yield bv.setGraphClientError(r);n(c)}}))})})}}class Jm extends Error{constructor(e=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,Jm.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class Av{static constructError(e,n,r){const s=new Jm(n,"",e);return e.name!==void 0&&(s.code=e.name),s.body=e.toString(),s.date=new Date,s.headers=r?.headers,s}static constructErrorFromResponse(e,n,r){const s=e.error,c=new Jm(n,s.message);return c.code=s.code,s.innerError!==void 0&&(c.requestId=s.innerError["request-id"],c.date=new Date(s.innerError.date)),c.body=JSON.stringify(s),c.headers=r?.headers,c}static getError(e=null,n=-1,r,s){return qt(this,void 0,void 0,function*(){let c;if(e&&e.error?c=Av.constructErrorFromResponse(e,n,s):e instanceof Error?c=Av.constructError(e,n,s):(c=new Jm(n),c.body=e),typeof r=="function")r(c,null);else return c})}}class $F{constructor(e,n,r){this.parsePath=s=>{if(s.indexOf("https://")!==-1){s=s.replace("https://","");const d=s.indexOf("/");d!==-1&&(this.urlComponents.host="https://"+s.substring(0,d),s=s.substring(d+1,s.length));const f=s.indexOf("/");f!==-1&&(this.urlComponents.version=s.substring(0,f),s=s.substring(f+1,s.length))}s.charAt(0)==="/"&&(s=s.substr(1));const c=s.indexOf("?");if(c===-1)this.urlComponents.path=s;else{this.urlComponents.path=s.substr(0,c);const d=s.substring(c+1,s.length).split("&");for(const f of d)this.parseQueryParameter(f)}},this.httpClient=e,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,n,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let s=[];r.length>1&&typeof n=="string"?s=Array.prototype.slice.call(r):typeof n=="string"?s.push(n):s=s.concat(n),this.urlComponents.oDataQueryParams[e]+=s.join(",")}buildFullUrl(){const e=UF([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,n=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&n.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&n.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const n=e.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.setURLComponentsQueryParamater(n,e[n]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const n=e.indexOf("="),r=e.substring(0,n),s=e.substring(n+1);this.setURLComponentsQueryParamater(r,s)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,n){if(LF.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],s=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=s?r+","+n:n}else this.urlComponents.otherURLQueryParams[e]=n}isValidQueryKeyValuePair(e){const n=e.indexOf("=");return!(n===-1||e.indexOf("(")!==-1&&e.indexOf("(")<n)}updateRequestOptions(e){const n=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(n,e.headers),Object.assign(n,this._headers),e.headers=n}send(e,n,r){var s;return qt(this,void 0,void 0,function*(){let c;const d=new qu(this._middlewareOptions);this.updateRequestOptions(n);const f=(s=this.config)===null||s===void 0?void 0:s.customHosts;try{return c=(yield this.httpClient.sendRequest({request:e,options:n,middlewareControl:d,customHosts:f})).response,yield Xm.getResponse(c,this._responseType,r)}catch(g){if(g instanceof bv)throw g;let y;throw c&&(y=c.status),yield Av.getError(g,y,r,c)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const n of e)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,n){return this._headers[e]=n,this}headers(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._headers[n]=e[n]);return this}option(e,n){return this._options[e]=n,this}options(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._options[n]=e[n]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Po.GET};return yield this.send(n,r,e)})}post(e,n){return qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),s={method:Po.POST,body:_b(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?s.headers={}:(this.setHeaderContentType(),s.headers=this._headers),yield this.send(r,s,n)})}create(e,n){return qt(this,void 0,void 0,function*(){return yield this.post(e,n)})}put(e,n){return qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const s={method:Po.PUT,body:_b(e)};return yield this.send(r,s,n)})}patch(e,n){return qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const s={method:Po.PATCH,body:_b(e)};return yield this.send(r,s,n)})}update(e,n){return qt(this,void 0,void 0,function*(){return yield this.patch(e,n)})}delete(e){return qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Po.DELETE};return yield this.send(n,r,e)})}del(e){return qt(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Po.GET};return this.responseType(es.STREAM),yield this.send(n,r,e)})}putStream(e,n){return qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),s={method:Po.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,s,n)})}}class EO{constructor(...e){if(!e||!e.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((n,r)=>{r<e.length-1&&n.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return qt(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(e),e})}}const VF=()=>typeof process=="object"&&typeof require=="function";class HA{static createWithAuthenticationProvider(e){const n=new mg(e),r=new Al(new In),s=new Do,c=new KF;if(n.setNext(r),VF()){const d=new Lo(new gi);r.setNext(d),d.setNext(s)}else r.setNext(s);return s.setNext(c),HA.createWithMiddleware(n)}static createWithMiddleware(...e){return new EO(...e)}}const YF=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){const t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){const t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};class Tv{static init(e){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=r==="authProvider"?new qF(e[r]):e[r]);return Tv.initWithMiddleware(n)}static initWithMiddleware(e){return new Tv(e)}constructor(e){this.config={baseUrl:DF,debugLogging:!1,defaultVersion:PF},YF();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let n;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)n=HA.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new EO(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(e){return new $F(this.httpClient,this.config,e)}}var kb={};const BA=S2(N3);var Mm={},Ib={};/*! @azure/msal-browser v4.25.0 2025-10-09 */var x0;function QF(){return x0||(x0=1,(function(t){/*! @azure/msal-common v15.13.0 2025-10-09 */const e={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},n={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},r={GET:"GET",POST:"POST"},s=[e.OPENID_SCOPE,e.PROFILE_SCOPE,e.OFFLINE_ACCESS_SCOPE],c=[...s,e.EMAIL_SCOPE],d={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},f={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},g={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},v={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},x={CODE:"code",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},b={QUERY:"query",FRAGMENT:"fragment"},A={QUERY:"query"},I={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},N={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},M={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},U="appmetadata",O="client_info",L="1",H={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},G={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},V={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},$={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ee={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},se={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ce={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},oe={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},he={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},W={Jwt:"JWT",Jwk:"JWK",Pop:"pop"},J=300;/*! @azure/msal-common v15.13.0 2025-10-09 */const P="unexpected_error",F="post_request_failed";var Y=Object.freeze({__proto__:null,postRequestFailed:F,unexpectedError:P});/*! @azure/msal-common v15.13.0 2025-10-09 */const X={[P]:"Unexpected error in authentication.",[F]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},B={unexpectedError:{code:P,desc:X[P]},postRequestFailed:{code:F,desc:X[F]}};class Q extends Error{constructor(i,u,p){const w=u?`${i}: ${u}`:i;super(w),Object.setPrototypeOf(this,Q.prototype),this.errorCode=i||e.EMPTY_STRING,this.errorMessage=u||e.EMPTY_STRING,this.subError=p||e.EMPTY_STRING,this.name="AuthError"}setCorrelationId(i){this.correlationId=i}}function ie(S,i){return new Q(S,i?`${X[S]} ${i}`:X[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */const ue="client_info_decoding_error",me="client_info_empty_error",Oe="token_parsing_error",xe="null_or_empty_token",le="endpoints_resolution_error",Ce="network_error",je="openid_config_error",be="hash_not_deserialized",we="invalid_state",Ee="state_mismatch",Pe="state_not_found",Me="nonce_mismatch",lt="auth_time_not_found",Mt="max_age_transpired",ge="multiple_matching_tokens",Be="multiple_matching_accounts",Xe="multiple_matching_appMetadata",it="request_cannot_be_made",ze="cannot_remove_empty_scope",tt="cannot_append_scopeset",mt="empty_input_scopeset",Ft="device_code_polling_cancelled",Hr="device_code_expired",wt="device_code_unknown_error",ut="no_account_in_silent_request",Et="invalid_cache_record",Vt="invalid_cache_environment",Pn="no_account_found",Ko="no_crypto_object",sc="unexpected_credential_type",vi="invalid_assertion",Ci="invalid_client_credential",Dn="token_refresh_required",wi="user_timeout_reached",bo="token_claims_cnf_required_for_signedjwt",ra="authorization_code_missing_from_server_response",bi="binding_key_not_removed",fs="end_session_endpoint_not_supported",Go="key_id_missing",xo="no_network_connectivity",oa="user_canceled",ia="missing_tenant_id_error",ct="method_not_implemented",qo="nested_app_auth_bridge_disabled";var Ol=Object.freeze({__proto__:null,authTimeNotFound:lt,authorizationCodeMissingFromServerResponse:ra,bindingKeyNotRemoved:bi,cannotAppendScopeSet:tt,cannotRemoveEmptyScope:ze,clientInfoDecodingError:ue,clientInfoEmptyError:me,deviceCodeExpired:Hr,deviceCodePollingCancelled:Ft,deviceCodeUnknownError:wt,emptyInputScopeSet:mt,endSessionEndpointNotSupported:fs,endpointResolutionError:le,hashNotDeserialized:be,invalidAssertion:vi,invalidCacheEnvironment:Vt,invalidCacheRecord:Et,invalidClientCredential:Ci,invalidState:we,keyIdMissing:Go,maxAgeTranspired:Mt,methodNotImplemented:ct,missingTenantIdError:ia,multipleMatchingAccounts:Be,multipleMatchingAppMetadata:Xe,multipleMatchingTokens:ge,nestedAppAuthBridgeDisabled:qo,networkError:Ce,noAccountFound:Pn,noAccountInSilentRequest:ut,noCryptoObject:Ko,noNetworkConnectivity:xo,nonceMismatch:Me,nullOrEmptyToken:xe,openIdConfigError:je,requestCannotBeMade:it,stateMismatch:Ee,stateNotFound:Pe,tokenClaimsCnfRequiredForSignedJwt:bo,tokenParsingError:Oe,tokenRefreshRequired:Dn,unexpectedCredentialType:sc,userCanceled:oa,userTimeoutReached:wi});/*! @azure/msal-common v15.13.0 2025-10-09 */const rt={[ue]:"The client info could not be parsed/decoded correctly",[me]:"The client info was empty",[Oe]:"Token cannot be parsed",[xe]:"The token is null or empty",[le]:"Endpoints cannot be resolved",[Ce]:"Network request failed",[je]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[be]:"The hash parameters could not be deserialized",[we]:"State was not the expected format",[Ee]:"State mismatch error",[Pe]:"State not found",[Me]:"Nonce mismatch error",[lt]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Mt]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ge]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Be]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Xe]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[it]:"Token request cannot be made without authorization code or refresh token.",[ze]:"Cannot remove null or empty scope from ScopeSet",[tt]:"Cannot append ScopeSet",[mt]:"Empty input ScopeSet cannot be processed",[Ft]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Hr]:"Device code is expired.",[wt]:"Device code stopped polling for unknown reasons.",[ut]:"Please pass an account object, silent flow is not supported without account information",[Et]:"Cache record object was null or undefined.",[Vt]:"Invalid environment when attempting to create cache entry",[Pn]:"No account found in cache for given key.",[Ko]:"No crypto object detected.",[sc]:"Unexpected credential type.",[vi]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Ci]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Dn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[wi]:"User defined timeout for device code polling reached",[bo]:"Cannot generate a POP jwt if the token_claims are not populated",[ra]:"Server response does not contain an authorization code to proceed",[bi]:"Could not remove the credential's binding key from storage.",[fs]:"The provided authority does not support logout",[Go]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[xo]:"No network connectivity. Check your internet connection.",[oa]:"User cancelled the flow.",[ia]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ct]:"This method has not been implemented",[qo]:"The nested app auth bridge is disabled"},lf={clientInfoDecodingError:{code:ue,desc:rt[ue]},clientInfoEmptyError:{code:me,desc:rt[me]},tokenParsingError:{code:Oe,desc:rt[Oe]},nullOrEmptyToken:{code:xe,desc:rt[xe]},endpointResolutionError:{code:le,desc:rt[le]},networkError:{code:Ce,desc:rt[Ce]},unableToGetOpenidConfigError:{code:je,desc:rt[je]},hashNotDeserialized:{code:be,desc:rt[be]},invalidStateError:{code:we,desc:rt[we]},stateMismatchError:{code:Ee,desc:rt[Ee]},stateNotFoundError:{code:Pe,desc:rt[Pe]},nonceMismatchError:{code:Me,desc:rt[Me]},authTimeNotFoundError:{code:lt,desc:rt[lt]},maxAgeTranspired:{code:Mt,desc:rt[Mt]},multipleMatchingTokens:{code:ge,desc:rt[ge]},multipleMatchingAccounts:{code:Be,desc:rt[Be]},multipleMatchingAppMetadata:{code:Xe,desc:rt[Xe]},tokenRequestCannotBeMade:{code:it,desc:rt[it]},removeEmptyScopeError:{code:ze,desc:rt[ze]},appendScopeSetError:{code:tt,desc:rt[tt]},emptyInputScopeSetError:{code:mt,desc:rt[mt]},DeviceCodePollingCancelled:{code:Ft,desc:rt[Ft]},DeviceCodeExpired:{code:Hr,desc:rt[Hr]},DeviceCodeUnknownError:{code:wt,desc:rt[wt]},NoAccountInSilentRequest:{code:ut,desc:rt[ut]},invalidCacheRecord:{code:Et,desc:rt[Et]},invalidCacheEnvironment:{code:Vt,desc:rt[Vt]},noAccountFound:{code:Pn,desc:rt[Pn]},noCryptoObj:{code:Ko,desc:rt[Ko]},unexpectedCredentialType:{code:sc,desc:rt[sc]},invalidAssertion:{code:vi,desc:rt[vi]},invalidClientCredential:{code:Ci,desc:rt[Ci]},tokenRefreshRequired:{code:Dn,desc:rt[Dn]},userTimeoutReached:{code:wi,desc:rt[wi]},tokenClaimsRequired:{code:bo,desc:rt[bo]},noAuthorizationCodeFromServer:{code:ra,desc:rt[ra]},bindingKeyNotRemovedError:{code:bi,desc:rt[bi]},logoutNotSupported:{code:fs,desc:rt[fs]},keyIdMissing:{code:Go,desc:rt[Go]},noNetworkConnectivity:{code:xo,desc:rt[xo]},userCanceledError:{code:oa,desc:rt[oa]},missingTenantIdError:{code:ia,desc:rt[ia]},nestedAppAuthBridgeDisabled:{code:qo,desc:rt[qo]}};class jn extends Q{constructor(i,u){super(i,u?`${rt[i]}: ${u}`:rt[i]),this.name="ClientAuthError",Object.setPrototypeOf(this,jn.prototype)}}function Ie(S,i){return new jn(S,i)}/*! @azure/msal-common v15.13.0 2025-10-09 */const En={createNewGuid:()=>{throw Ie(ct)},base64Decode:()=>{throw Ie(ct)},base64Encode:()=>{throw Ie(ct)},base64UrlEncode:()=>{throw Ie(ct)},encodeKid:()=>{throw Ie(ct)},async getPublicKeyThumbprint(){throw Ie(ct)},async removeTokenBindingKey(){throw Ie(ct)},async clearKeystore(){throw Ie(ct)},async signJwt(){throw Ie(ct)},async hashString(){throw Ie(ct)}};/*! @azure/msal-common v15.13.0 2025-10-09 */t.LogLevel=void 0,(function(S){S[S.Error=0]="Error",S[S.Warning=1]="Warning",S[S.Info=2]="Info",S[S.Verbose=3]="Verbose",S[S.Trace=4]="Trace"})(t.LogLevel||(t.LogLevel={}));class Ln{constructor(i,u,p){this.level=t.LogLevel.Info;const w=()=>{},T=i||Ln.createDefaultLoggerOptions();this.localCallback=T.loggerCallback||w,this.piiLoggingEnabled=T.piiLoggingEnabled||!1,this.level=typeof T.logLevel=="number"?T.logLevel:t.LogLevel.Info,this.correlationId=T.correlationId||e.EMPTY_STRING,this.packageName=u||e.EMPTY_STRING,this.packageVersion=p||e.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:t.LogLevel.Info}}clone(i,u,p){return new Ln({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:p||this.correlationId},i,u)}logMessage(i,u){if(u.logLevel>this.level||!this.piiLoggingEnabled&&u.containsPii)return;const T=`${`[${new Date().toUTCString()}] : [${u.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${t.LogLevel[u.logLevel]} - ${i}`;this.executeCallback(u.logLevel,T,u.containsPii||!1)}executeCallback(i,u,p){this.localCallback&&this.localCallback(i,u,p)}error(i,u){this.logMessage(i,{logLevel:t.LogLevel.Error,containsPii:!1,correlationId:u||e.EMPTY_STRING})}errorPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Error,containsPii:!0,correlationId:u||e.EMPTY_STRING})}warning(i,u){this.logMessage(i,{logLevel:t.LogLevel.Warning,containsPii:!1,correlationId:u||e.EMPTY_STRING})}warningPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Warning,containsPii:!0,correlationId:u||e.EMPTY_STRING})}info(i,u){this.logMessage(i,{logLevel:t.LogLevel.Info,containsPii:!1,correlationId:u||e.EMPTY_STRING})}infoPii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Info,containsPii:!0,correlationId:u||e.EMPTY_STRING})}verbose(i,u){this.logMessage(i,{logLevel:t.LogLevel.Verbose,containsPii:!1,correlationId:u||e.EMPTY_STRING})}verbosePii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Verbose,containsPii:!0,correlationId:u||e.EMPTY_STRING})}trace(i,u){this.logMessage(i,{logLevel:t.LogLevel.Trace,containsPii:!1,correlationId:u||e.EMPTY_STRING})}tracePii(i,u){this.logMessage(i,{logLevel:t.LogLevel.Trace,containsPii:!0,correlationId:u||e.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v15.13.0 2025-10-09 */const ac="@azure/msal-common",Ml="15.13.0";/*! @azure/msal-common v15.13.0 2025-10-09 */const cc={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};/*! @azure/msal-common v15.13.0 2025-10-09 */const ms="redirect_uri_empty",$o="claims_request_parsing_error",xi="authority_uri_insecure",dr="url_parse_error",Br="empty_url_error",to="empty_input_scopes_error",xr="invalid_claims",sn="token_request_empty",gs="logout_request_empty",sa="invalid_code_challenge_method",Er="pkce_params_missing",zr="invalid_cloud_discovery_metadata",aa="invalid_authority_metadata",Ei="untrusted_authority",Vo="missing_ssh_jwk",ca="missing_ssh_kid",Yo="missing_nonce_authentication_header",Eo="invalid_authentication_header",hr="cannot_set_OIDCOptions",Ai="cannot_allow_platform_broker",ps="authority_mismatch",Fr="invalid_request_method_for_EAR",Ti="invalid_authorize_post_body_parameters";var Pl=Object.freeze({__proto__:null,authorityMismatch:ps,authorityUriInsecure:xi,cannotAllowPlatformBroker:Ai,cannotSetOIDCOptions:hr,claimsRequestParsingError:$o,emptyInputScopesError:to,invalidAuthenticationHeader:Eo,invalidAuthorityMetadata:aa,invalidAuthorizePostBodyParameters:Ti,invalidClaims:xr,invalidCloudDiscoveryMetadata:zr,invalidCodeChallengeMethod:sa,invalidRequestMethodForEAR:Fr,logoutRequestEmpty:gs,missingNonceAuthenticationHeader:Yo,missingSshJwk:Vo,missingSshKid:ca,pkceParamsMissing:Er,redirectUriEmpty:ms,tokenRequestEmpty:sn,untrustedAuthority:Ei,urlEmptyError:Br,urlParseError:dr});/*! @azure/msal-common v15.13.0 2025-10-09 */const Yt={[ms]:"A redirect URI is required for all calls, and none has been set.",[$o]:"Could not parse the given claims request object.",[xi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[dr]:"URL could not be parsed into appropriate segments.",[Br]:"URL was empty or null.",[to]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[xr]:"Given claims parameter must be a stringified JSON object.",[sn]:"Token request was empty and not found in cache.",[gs]:"The logout request was null or undefined.",[sa]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Er]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[zr]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[aa]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ei]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Vo]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[ca]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Yo]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Eo]:"Invalid authentication header provided",[hr]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ai]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[ps]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Ti]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Fr]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},nd={redirectUriNotSet:{code:ms,desc:Yt[ms]},claimsRequestParsingError:{code:$o,desc:Yt[$o]},authorityUriInsecure:{code:xi,desc:Yt[xi]},urlParseError:{code:dr,desc:Yt[dr]},urlEmptyError:{code:Br,desc:Yt[Br]},emptyScopesError:{code:to,desc:Yt[to]},invalidClaimsRequest:{code:xr,desc:Yt[xr]},tokenRequestEmptyError:{code:sn,desc:Yt[sn]},logoutRequestEmptyError:{code:gs,desc:Yt[gs]},invalidCodeChallengeMethod:{code:sa,desc:Yt[sa]},invalidCodeChallengeParams:{code:Er,desc:Yt[Er]},invalidCloudDiscoveryMetadata:{code:zr,desc:Yt[zr]},invalidAuthorityMetadata:{code:aa,desc:Yt[aa]},untrustedAuthority:{code:Ei,desc:Yt[Ei]},missingSshJwk:{code:Vo,desc:Yt[Vo]},missingSshKid:{code:ca,desc:Yt[ca]},missingNonceAuthenticationHeader:{code:Yo,desc:Yt[Yo]},invalidAuthenticationHeader:{code:Eo,desc:Yt[Eo]},cannotSetOIDCOptions:{code:hr,desc:Yt[hr]},cannotAllowPlatformBroker:{code:Ai,desc:Yt[Ai]},authorityMismatch:{code:ps,desc:Yt[ps]},invalidAuthorizePostBodyParameters:{code:Ti,desc:Yt[Ti]},invalidRequestMethodForEAR:{code:Fr,desc:Yt[Fr]}};class qn extends Q{constructor(i){super(i,Yt[i]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,qn.prototype)}}function St(S){return new qn(S)}/*! @azure/msal-common v15.13.0 2025-10-09 */class $n{static isEmptyObj(i){if(i)try{const u=JSON.parse(i);return Object.keys(u).length===0}catch{}return!0}static startsWith(i,u){return i.indexOf(u)===0}static endsWith(i,u){return i.length>=u.length&&i.lastIndexOf(u)===i.length-u.length}static queryStringToObject(i){const u={},p=i.split("&"),w=T=>decodeURIComponent(T.replace(/\+/g," "));return p.forEach(T=>{if(T.trim()){const[R,j]=T.split(/=(.+)/g,2);R&&j&&(u[w(R)]=w(j))}}),u}static trimArrayEntries(i){return i.map(u=>u.trim())}static removeEmptyStringsFromArray(i){return i.filter(u=>!!u)}static jsonParseHelper(i){try{return JSON.parse(i)}catch{return null}}static matchPattern(i,u){return new RegExp(i.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class an{constructor(i){const u=i?$n.trimArrayEntries([...i]):[],p=u?$n.removeEmptyStringsFromArray(u):[];if(!p||!p.length)throw St(to);this.scopes=new Set,p.forEach(w=>this.scopes.add(w))}static fromString(i){const p=(i||e.EMPTY_STRING).split(" ");return new an(p)}static createSearchScopes(i){const u=i&&i.length>0?i:[...s],p=new an(u);return p.containsOnlyOIDCScopes()?p.removeScope(e.OFFLINE_ACCESS_SCOPE):p.removeOIDCScopes(),p}containsScope(i){const u=this.printScopesLowerCase().split(" "),p=new an(u);return i?p.scopes.has(i.toLowerCase()):!1}containsScopeSet(i){return!i||i.scopes.size<=0?!1:this.scopes.size>=i.scopes.size&&i.asArray().every(u=>this.containsScope(u))}containsOnlyOIDCScopes(){let i=0;return c.forEach(u=>{this.containsScope(u)&&(i+=1)}),this.scopes.size===i}appendScope(i){i&&this.scopes.add(i.trim())}appendScopes(i){try{i.forEach(u=>this.appendScope(u))}catch{throw Ie(tt)}}removeScope(i){if(!i)throw Ie(ze);this.scopes.delete(i.trim())}removeOIDCScopes(){c.forEach(i=>{this.scopes.delete(i)})}unionScopeSets(i){if(!i)throw Ie(mt);const u=new Set;return i.scopes.forEach(p=>u.add(p.toLowerCase())),this.scopes.forEach(p=>u.add(p.toLowerCase())),u}intersectingScopeSets(i){if(!i)throw Ie(mt);i.containsOnlyOIDCScopes()||i.removeOIDCScopes();const u=this.unionScopeSets(i),p=i.getScopeCount(),w=this.getScopeCount();return u.size<w+p}getScopeCount(){return this.scopes.size}asArray(){const i=[];return this.scopes.forEach(u=>i.push(u)),i}printScopes(){return this.scopes?this.asArray().join(" "):e.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v15.13.0 2025-10-09 */function lc(S,i){return!!S&&!!i&&S===i.split(".")[1]}function Si(S,i,u,p){if(p){const{oid:w,sub:T,tid:R,name:j,tfp:K,acr:te,preferred_username:ve,upn:Se,login_hint:Ue}=p,Qe=R||K||te||"";return{tenantId:Qe,localAccountId:w||T||"",name:j,username:ve||Se||"",loginHint:Ue,isHomeTenant:lc(Qe,S)}}else return{tenantId:u,localAccountId:i,username:"",isHomeTenant:lc(u,S)}}function Dl(S,i,u,p){let w=S;if(i){const{isHomeTenant:T,...R}=i;w={...S,...R}}if(u){const{isHomeTenant:T,...R}=Si(S.homeAccountId,S.localAccountId,S.tenantId,u);return w={...w,...R,idTokenClaims:u,idToken:p},w}return w}/*! @azure/msal-common v15.13.0 2025-10-09 */function An(S,i){const u=la(S);try{const p=i(u);return JSON.parse(p)}catch{throw Ie(Oe)}}function la(S){if(!S)throw Ie(xe);const u=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(S);if(!u||u.length<4)throw Ie(Oe);return u[2]}function jl(S,i){if(i===0||Date.now()-3e5>S+i)throw Ie(Mt)}/*! @azure/msal-common v15.13.0 2025-10-09 */function uc(S){if(!S)return S;let i=S.toLowerCase();return $n.endsWith(i,"?")?i=i.slice(0,-1):$n.endsWith(i,"?/")&&(i=i.slice(0,-2)),$n.endsWith(i,"/")||(i+="/"),i}function Qo(S){return S.startsWith("#/")?S.substring(2):S.startsWith("#")||S.startsWith("?")?S.substring(1):S}function Ll(S){if(!S||S.indexOf("=")<0)return null;try{const i=Qo(S),u=Object.fromEntries(new URLSearchParams(i));if(u.code||u.ear_jwe||u.error||u.error_description||u.state)return u}catch{throw Ie(be)}return null}function dc(S,i=!0,u){const p=new Array;return S.forEach((w,T)=>{!i&&u&&T in u?p.push(`${T}=${w}`):p.push(`${T}=${encodeURIComponent(w)}`)}),p.join("&")}function ua(S){if(!S)return S;const i=S.split("#")[0];try{const u=new URL(i),p=u.origin+u.pathname+u.search;return uc(p)}catch{return uc(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class _t{get urlString(){return this._urlString}constructor(i){if(this._urlString=i,!this._urlString)throw St(Br);i.includes("#")||(this._urlString=_t.canonicalizeUri(i))}static canonicalizeUri(i){if(i){let u=i.toLowerCase();return $n.endsWith(u,"?")?u=u.slice(0,-1):$n.endsWith(u,"?/")&&(u=u.slice(0,-2)),$n.endsWith(u,"/")||(u+="/"),u}return i}validateAsUri(){let i;try{i=this.getUrlComponents()}catch{throw St(dr)}if(!i.HostNameAndPort||!i.PathSegments)throw St(dr);if(!i.Protocol||i.Protocol.toLowerCase()!=="https:")throw St(xi)}static appendQueryString(i,u){return u?i.indexOf("?")<0?`${i}?${u}`:`${i}&${u}`:i}static removeHashFromUrl(i){return _t.canonicalizeUri(i.split("#")[0])}replaceTenantPath(i){const u=this.getUrlComponents(),p=u.PathSegments;return i&&p.length!==0&&(p[0]===g.COMMON||p[0]===g.ORGANIZATIONS)&&(p[0]=i),_t.constructAuthorityUriFromObject(u)}getUrlComponents(){const i=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),u=this.urlString.match(i);if(!u)throw St(dr);const p={Protocol:u[1],HostNameAndPort:u[4],AbsolutePath:u[5],QueryString:u[7]};let w=p.AbsolutePath.split("/");return w=w.filter(T=>T&&T.length>0),p.PathSegments=w,p.QueryString&&p.QueryString.endsWith("/")&&(p.QueryString=p.QueryString.substring(0,p.QueryString.length-1)),p}static getDomainFromUrl(i){const u=RegExp("^([^:/?#]+://)?([^/?#]*)"),p=i.match(u);if(!p)throw St(dr);return p[2]}static getAbsoluteUrl(i,u){if(i[0]===e.FORWARD_SLASH){const w=new _t(u).getUrlComponents();return w.Protocol+"//"+w.HostNameAndPort+i}return i}static constructAuthorityUriFromObject(i){return new _t(i.Protocol+"//"+i.HostNameAndPort+"/"+i.PathSegments.join("/"))}static hashContainsKnownProperties(i){return!!Ll(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const uf={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},df=uf.endpointMetadata,Ul=uf.instanceDiscoveryMetadata,zg=new Set;Ul.metadata.forEach(S=>{S.aliases.forEach(i=>{zg.add(i)})});function qC(S,i){let u;const p=S.canonicalAuthority;if(p){const w=new _t(p).getUrlComponents().HostNameAndPort;u=Hl(w,S.cloudDiscoveryMetadata?.metadata,G.CONFIG,i)||Hl(w,Ul.metadata,G.HARDCODED_VALUES,i)||S.knownAuthorities}return u||[]}function Hl(S,i,u,p){if(p?.trace(`getAliasesFromMetadata called with source: ${u}`),S&&i){const w=hc(i,S);if(w)return p?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${u}, returning aliases`),w.aliases;p?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${u}`)}return null}function hf(S){return hc(Ul.metadata,S)}function hc(S,i){for(let u=0;u<S.length;u++){const p=S[u];if(p.aliases.includes(i))return p}return null}/*! @azure/msal-common v15.13.0 2025-10-09 */const _i="cache_quota_exceeded",ys="cache_error_unknown";/*! @azure/msal-common v15.13.0 2025-10-09 */const rd={[_i]:"Exceeded cache storage capacity.",[ys]:"Unexpected error occurred when using cache storage."};class ki extends Q{constructor(i,u){const p=u||(rd[i]?rd[i]:rd[ys]);super(`${i}: ${p}`),Object.setPrototypeOf(this,ki.prototype),this.name="CacheError",this.errorCode=i,this.errorMessage=p}}function od(S){return S instanceof Error?S.name==="QuotaExceededError"||S.name==="NS_ERROR_DOM_QUOTA_REACHED"||S.message.includes("exceeded the quota")?new ki(_i):new ki(S.name,S.message):new ki(ys)}/*! @azure/msal-common v15.13.0 2025-10-09 */class da{constructor(i,u,p,w,T){this.clientId=i,this.cryptoImpl=u,this.commonLogger=p.clone(ac,Ml),this.staticAuthorityOptions=T,this.performanceClient=w}getAllAccounts(i,u){return this.buildTenantProfiles(this.getAccountsFilteredBy(i,u),u,i)}getAccountInfoFilteredBy(i,u){if(Object.keys(i).length===0||Object.values(i).every(w=>!w))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const p=this.getAllAccounts(i,u);return p.length>1?p.sort(T=>T.idTokenClaims?-1:1)[0]:p.length===1?p[0]:null}getBaseAccountInfo(i,u){const p=this.getAccountsFilteredBy(i,u);return p.length>0?p[0].getAccountInfo():null}buildTenantProfiles(i,u,p){return i.flatMap(w=>this.getTenantProfilesFromAccountEntity(w,u,p?.tenantId,p))}getTenantedAccountInfoByFilter(i,u,p,w,T){let R=null,j;if(T&&!this.tenantProfileMatchesFilter(p,T))return null;const K=this.getIdToken(i,w,u,p.tenantId);return K&&(j=An(K.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(j,T))?null:(R=Dl(i,p,j,K?.secret),R)}getTenantProfilesFromAccountEntity(i,u,p,w){const T=i.getAccountInfo();let R=T.tenantProfiles||new Map;const j=this.getTokenKeys();if(p){const te=R.get(p);if(te)R=new Map([[p,te]]);else return[]}const K=[];return R.forEach(te=>{const ve=this.getTenantedAccountInfoByFilter(T,j,te,u,w);ve&&K.push(ve)}),K}tenantProfileMatchesFilter(i,u){return!(u.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(i,u.localAccountId)||u.name&&i.name!==u.name||u.isHomeTenant!==void 0&&i.isHomeTenant!==u.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(i,u){return!(u&&(u.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(i,u.localAccountId)||u.loginHint&&!this.matchLoginHintFromTokenClaims(i,u.loginHint)||u.username&&!this.matchUsername(i.preferred_username,u.username)||u.name&&!this.matchName(i,u.name)||u.sid&&!this.matchSid(i,u.sid)))}async saveCacheRecord(i,u,p){if(!i)throw Ie(Et);try{i.account&&await this.setAccount(i.account,u),i.idToken&&p?.idToken!==!1&&await this.setIdTokenCredential(i.idToken,u),i.accessToken&&p?.accessToken!==!1&&await this.saveAccessToken(i.accessToken,u),i.refreshToken&&p?.refreshToken!==!1&&await this.setRefreshTokenCredential(i.refreshToken,u),i.appMetadata&&this.setAppMetadata(i.appMetadata,u)}catch(w){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),w instanceof Q?w:od(w)}}async saveAccessToken(i,u){const p={clientId:i.clientId,credentialType:i.credentialType,environment:i.environment,homeAccountId:i.homeAccountId,realm:i.realm,tokenType:i.tokenType,requestedClaimsHash:i.requestedClaimsHash},w=this.getTokenKeys(),T=an.fromString(i.target);w.accessToken.forEach(R=>{if(!this.accessTokenKeyMatchesFilter(R,p,!1))return;const j=this.getAccessTokenCredential(R,u);j&&this.credentialMatchesFilter(j,p)&&an.fromString(j.target).intersectingScopeSets(T)&&this.removeAccessToken(R,u)}),await this.setAccessTokenCredential(i,u)}getAccountsFilteredBy(i,u){const p=this.getAccountKeys(),w=[];return p.forEach(T=>{const R=this.getAccount(T,u);if(!R||i.homeAccountId&&!this.matchHomeAccountId(R,i.homeAccountId)||i.username&&!this.matchUsername(R.username,i.username)||i.environment&&!this.matchEnvironment(R,i.environment)||i.realm&&!this.matchRealm(R,i.realm)||i.nativeAccountId&&!this.matchNativeAccountId(R,i.nativeAccountId)||i.authorityType&&!this.matchAuthorityType(R,i.authorityType))return;const j={localAccountId:i?.localAccountId,name:i?.name},K=R.tenantProfiles?.filter(te=>this.tenantProfileMatchesFilter(te,j));K&&K.length===0||w.push(R)}),w}credentialMatchesFilter(i,u){return!(u.clientId&&!this.matchClientId(i,u.clientId)||u.userAssertionHash&&!this.matchUserAssertionHash(i,u.userAssertionHash)||typeof u.homeAccountId=="string"&&!this.matchHomeAccountId(i,u.homeAccountId)||u.environment&&!this.matchEnvironment(i,u.environment)||u.realm&&!this.matchRealm(i,u.realm)||u.credentialType&&!this.matchCredentialType(i,u.credentialType)||u.familyId&&!this.matchFamilyId(i,u.familyId)||u.target&&!this.matchTarget(i,u.target)||(u.requestedClaimsHash||i.requestedClaimsHash)&&i.requestedClaimsHash!==u.requestedClaimsHash||i.credentialType===M.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(u.tokenType&&!this.matchTokenType(i,u.tokenType)||u.tokenType===$.SSH&&u.keyId&&!this.matchKeyId(i,u.keyId)))}getAppMetadataFilteredBy(i){const u=this.getKeys(),p={};return u.forEach(w=>{if(!this.isAppMetadata(w))return;const T=this.getAppMetadata(w);T&&(i.environment&&!this.matchEnvironment(T,i.environment)||i.clientId&&!this.matchClientId(T,i.clientId)||(p[w]=T))}),p}getAuthorityMetadataByAlias(i){const u=this.getAuthorityMetadataKeys();let p=null;return u.forEach(w=>{if(!this.isAuthorityMetadata(w)||w.indexOf(this.clientId)===-1)return;const T=this.getAuthorityMetadata(w);T&&T.aliases.indexOf(i)!==-1&&(p=T)}),p}removeAllAccounts(i){this.getAllAccounts({},i).forEach(p=>{this.removeAccount(p,i)})}removeAccount(i,u){this.removeAccountContext(i,u);const p=this.getAccountKeys(),w=T=>T.includes(i.homeAccountId)&&T.includes(i.environment);p.filter(w).forEach(T=>{this.removeItem(T,u),this.performanceClient.incrementFields({accountsRemoved:1},u)})}removeAccountContext(i,u){const p=this.getTokenKeys(),w=T=>T.includes(i.homeAccountId)&&T.includes(i.environment);p.idToken.filter(w).forEach(T=>{this.removeIdToken(T,u)}),p.accessToken.filter(w).forEach(T=>{this.removeAccessToken(T,u)}),p.refreshToken.filter(w).forEach(T=>{this.removeRefreshToken(T,u)})}removeAccessToken(i,u){const p=this.getAccessTokenCredential(i,u);if(this.removeItem(i,u),this.performanceClient.incrementFields({accessTokensRemoved:1},u),!p||p.credentialType.toLowerCase()!==M.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||p.tokenType!==$.POP)return;const w=p.keyId;w&&this.cryptoImpl.removeTokenBindingKey(w).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${w}`,u),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},u)})}removeAppMetadata(i){return this.getKeys().forEach(p=>{this.isAppMetadata(p)&&this.removeItem(p,i)}),!0}getIdToken(i,u,p,w,T){this.commonLogger.trace("CacheManager - getIdToken called");const R={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:M.ID_TOKEN,clientId:this.clientId,realm:w},j=this.getIdTokensByFilter(R,u,p),K=j.size;if(K<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(K>1){let te=j;if(!w){const ve=new Map;j.forEach((Ue,Qe)=>{Ue.realm===i.tenantId&&ve.set(Qe,Ue)});const Se=ve.size;if(Se<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),j.values().next().value;if(Se===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),ve.values().next().value;te=ve}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),te.forEach((ve,Se)=>{this.removeIdToken(Se,u)}),T&&u&&T.addFields({multiMatchedID:j.size},u),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),j.values().next().value}getIdTokensByFilter(i,u,p){const w=p&&p.idToken||this.getTokenKeys().idToken,T=new Map;return w.forEach(R=>{if(!this.idTokenKeyMatchesFilter(R,{clientId:this.clientId,...i}))return;const j=this.getIdTokenCredential(R,u);j&&this.credentialMatchesFilter(j,i)&&T.set(R,j)}),T}idTokenKeyMatchesFilter(i,u){const p=i.toLowerCase();return!(u.clientId&&p.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&p.indexOf(u.homeAccountId.toLowerCase())===-1)}removeIdToken(i,u){this.removeItem(i,u)}removeRefreshToken(i,u){this.removeItem(i,u)}getAccessToken(i,u,p,w){const T=u.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",T);const R=an.createSearchScopes(u.scopes),j=u.authenticationScheme||$.BEARER,K=j&&j.toLowerCase()!==$.BEARER.toLowerCase()?M.ACCESS_TOKEN_WITH_AUTH_SCHEME:M.ACCESS_TOKEN,te={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:K,clientId:this.clientId,realm:w||i.tenantId,target:R,tokenType:j,keyId:u.sshKid,requestedClaimsHash:u.requestedClaimsHash},ve=p&&p.accessToken||this.getTokenKeys().accessToken,Se=[];ve.forEach(Qe=>{if(this.accessTokenKeyMatchesFilter(Qe,te,!0)){const Bt=this.getAccessTokenCredential(Qe,T);Bt&&this.credentialMatchesFilter(Bt,te)&&Se.push(Bt)}});const Ue=Se.length;return Ue<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",T),null):Ue>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",T),Se.forEach(Qe=>{this.removeAccessToken(this.generateCredentialKey(Qe),T)}),this.performanceClient.addFields({multiMatchedAT:Se.length},T),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",T),Se[0])}accessTokenKeyMatchesFilter(i,u,p){const w=i.toLowerCase();if(u.clientId&&w.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&w.indexOf(u.homeAccountId.toLowerCase())===-1||u.realm&&w.indexOf(u.realm.toLowerCase())===-1||u.requestedClaimsHash&&w.indexOf(u.requestedClaimsHash.toLowerCase())===-1)return!1;if(u.target){const T=u.target.asArray();for(let R=0;R<T.length;R++){if(p&&!w.includes(T[R].toLowerCase()))return!1;if(!p&&w.includes(T[R].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(i,u){const p=this.getTokenKeys(),w=[];return p.accessToken.forEach(T=>{if(!this.accessTokenKeyMatchesFilter(T,i,!0))return;const R=this.getAccessTokenCredential(T,u);R&&this.credentialMatchesFilter(R,i)&&w.push(R)}),w}getRefreshToken(i,u,p,w,T){this.commonLogger.trace("CacheManager - getRefreshToken called");const R=u?L:void 0,j={homeAccountId:i.homeAccountId,environment:i.environment,credentialType:M.REFRESH_TOKEN,clientId:this.clientId,familyId:R},K=w&&w.refreshToken||this.getTokenKeys().refreshToken,te=[];K.forEach(Se=>{if(this.refreshTokenKeyMatchesFilter(Se,j)){const Ue=this.getRefreshTokenCredential(Se,p);Ue&&this.credentialMatchesFilter(Ue,j)&&te.push(Ue)}});const ve=te.length;return ve<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(ve>1&&T&&p&&T.addFields({multiMatchedRT:ve},p),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),te[0])}refreshTokenKeyMatchesFilter(i,u){const p=i.toLowerCase();return!(u.familyId&&p.indexOf(u.familyId.toLowerCase())===-1||!u.familyId&&u.clientId&&p.indexOf(u.clientId.toLowerCase())===-1||u.homeAccountId&&p.indexOf(u.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(i){const u={environment:i,clientId:this.clientId},p=this.getAppMetadataFilteredBy(u),w=Object.keys(p).map(R=>p[R]),T=w.length;if(T<1)return null;if(T>1)throw Ie(Xe);return w[0]}isAppMetadataFOCI(i){const u=this.readAppMetadataFromCache(i);return!!(u&&u.familyId===L)}matchHomeAccountId(i,u){return typeof i.homeAccountId=="string"&&u===i.homeAccountId}matchLocalAccountIdFromTokenClaims(i,u){const p=i.oid||i.sub;return u===p}matchLocalAccountIdFromTenantProfile(i,u){return i.localAccountId===u}matchName(i,u){return u.toLowerCase()===i.name?.toLowerCase()}matchUsername(i,u){return!!(i&&typeof i=="string"&&u?.toLowerCase()===i.toLowerCase())}matchUserAssertionHash(i,u){return!!(i.userAssertionHash&&u===i.userAssertionHash)}matchEnvironment(i,u){if(this.staticAuthorityOptions){const w=qC(this.staticAuthorityOptions,this.commonLogger);if(w.includes(u)&&w.includes(i.environment))return!0}const p=this.getAuthorityMetadataByAlias(u);return!!(p&&p.aliases.indexOf(i.environment)>-1)}matchCredentialType(i,u){return i.credentialType&&u.toLowerCase()===i.credentialType.toLowerCase()}matchClientId(i,u){return!!(i.clientId&&u===i.clientId)}matchFamilyId(i,u){return!!(i.familyId&&u===i.familyId)}matchRealm(i,u){return i.realm?.toLowerCase()===u.toLowerCase()}matchNativeAccountId(i,u){return!!(i.nativeAccountId&&u===i.nativeAccountId)}matchLoginHintFromTokenClaims(i,u){return i.login_hint===u||i.preferred_username===u||i.upn===u}matchSid(i,u){return i.sid===u}matchAuthorityType(i,u){return!!(i.authorityType&&u.toLowerCase()===i.authorityType.toLowerCase())}matchTarget(i,u){return i.credentialType!==M.ACCESS_TOKEN&&i.credentialType!==M.ACCESS_TOKEN_WITH_AUTH_SCHEME||!i.target?!1:an.fromString(i.target).containsScopeSet(u)}matchTokenType(i,u){return!!(i.tokenType&&i.tokenType===u)}matchKeyId(i,u){return!!(i.keyId&&i.keyId===u)}isAppMetadata(i){return i.indexOf(U)!==-1}isAuthorityMetadata(i){return i.indexOf(H.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(i){return`${H.CACHE_KEY}-${this.clientId}-${i}`}static toObject(i,u){for(const p in u)i[p]=u[p];return i}}class Ii extends da{async setAccount(){throw Ie(ct)}getAccount(){throw Ie(ct)}async setIdTokenCredential(){throw Ie(ct)}getIdTokenCredential(){throw Ie(ct)}async setAccessTokenCredential(){throw Ie(ct)}getAccessTokenCredential(){throw Ie(ct)}async setRefreshTokenCredential(){throw Ie(ct)}getRefreshTokenCredential(){throw Ie(ct)}setAppMetadata(){throw Ie(ct)}getAppMetadata(){throw Ie(ct)}setServerTelemetry(){throw Ie(ct)}getServerTelemetry(){throw Ie(ct)}setAuthorityMetadata(){throw Ie(ct)}getAuthorityMetadata(){throw Ie(ct)}getAuthorityMetadataKeys(){throw Ie(ct)}setThrottlingCache(){throw Ie(ct)}getThrottlingCache(){throw Ie(ct)}removeItem(){throw Ie(ct)}getKeys(){throw Ie(ct)}getAccountKeys(){throw Ie(ct)}getTokenKeys(){throw Ie(ct)}generateCredentialKey(){throw Ie(ct)}generateAccountKey(){throw Ie(ct)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Vn={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};/*! @azure/msal-common v15.13.0 2025-10-09 */const q={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},vs=new Map([[q.AcquireTokenByCode,"ATByCode"],[q.AcquireTokenByRefreshToken,"ATByRT"],[q.AcquireTokenSilent,"ATS"],[q.AcquireTokenSilentAsync,"ATSAsync"],[q.AcquireTokenPopup,"ATPopup"],[q.AcquireTokenRedirect,"ATRedirect"],[q.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[q.CryptoOptsSignJwt,"CryptoSignJwt"],[q.SilentCacheClientAcquireToken,"SltCacheClientAT"],[q.SilentIframeClientAcquireToken,"SltIframeClientAT"],[q.SilentRefreshClientAcquireToken,"SltRClientAT"],[q.SsoSilent,"SsoSlt"],[q.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[q.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[q.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[q.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[q.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[q.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[q.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[q.BrokerHandhshake,"BrokerHandshake"],[q.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[q.AcquireTokenByBroker,"ATByBroker"],[q.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[q.RefreshTokenClientAcquireToken,"RTClientAT"],[q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[q.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[q.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[q.AcquireTokenFromCache,"ATFromCache"],[q.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[q.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[q.AcquireTokenBySilentIframe,"ATBySltIframe"],[q.InitializeBaseRequest,"InitBaseReq"],[q.InitializeSilentRequest,"InitSltReq"],[q.InitializeClientApplication,"InitClientApplication"],[q.InitializeCache,"InitCache"],[q.ImportExistingCache,"importCache"],[q.SetUserData,"setUserData"],[q.LocalStorageUpdated,"localStorageUpdated"],[q.SilentIframeClientTokenHelper,"SIClientTHelper"],[q.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[q.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[q.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[q.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[q.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[q.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[q.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[q.GetAuthCodeUrl,"GetAuthCodeUrl"],[q.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[q.HandleCodeResponse,"HandleCodeResp"],[q.HandleResponseEar,"HandleRespEar"],[q.HandleResponseCode,"HandleRespCode"],[q.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[q.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[q.AuthClientAcquireToken,"AuthClientAT"],[q.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[q.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[q.PopTokenGenerateCnf,"PopTGenCnf"],[q.PopTokenGenerateKid,"PopTGenKid"],[q.HandleServerTokenResponse,"HandleServerTRes"],[q.DeserializeResponse,"DeserializeRes"],[q.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[q.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[q.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[q.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[q.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[q.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[q.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[q.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[q.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[q.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[q.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[q.AcquireTokenByCodeAsync,"ATByCodeAsync"],[q.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[q.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[q.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[q.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[q.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[q.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[q.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[q.NativeGenerateAuthResult,"NtvGenAuthRes"],[q.RemoveHiddenIframe,"RemoveHiddenIframe"],[q.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[q.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[q.GeneratePkceCodes,"GenPkceCodes"],[q.GenerateCodeVerifier,"GenCodeVerifier"],[q.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[q.Sha256Digest,"Sha256Digest"],[q.GetRandomValues,"GetRandomValues"],[q.GenerateHKDF,"genHKDF"],[q.GenerateBaseKey,"genBaseKey"],[q.Base64Decode,"b64Decode"],[q.UrlEncodeArr,"urlEncArr"],[q.Encrypt,"encrypt"],[q.Decrypt,"decrypt"],[q.GenerateEarKey,"genEarKey"],[q.DecryptEarResponse,"decryptEarResp"]]),Bl={InProgress:1,Completed:2},id=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]);/*! @azure/msal-common v15.13.0 2025-10-09 */class sd{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class ha{generateId(){return"callback-id"}startMeasurement(i,u){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Bl.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:i,startTimeMs:Date.now(),correlationId:u||""},measurement:new sd}}startPerformanceMeasurement(){return new sd}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v15.13.0 2025-10-09 */const zl={tokenRenewalOffsetSeconds:J,preventCorsPreflight:!1},Fg={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:t.LogLevel.Info,correlationId:e.EMPTY_STRING},Ar={claimsBasedCachingEnabled:!1},fa={async sendGetRequestAsync(){throw Ie(ct)},async sendPostRequestAsync(){throw Ie(ct)}},ad={sku:e.SKU,version:Ml,cpu:e.EMPTY_STRING,os:e.EMPTY_STRING},Fl={clientSecret:e.EMPTY_STRING,clientAssertion:void 0},$C={azureCloudInstance:cc.None,tenant:`${e.DEFAULT_COMMON_TENANT}`},ff={application:{appName:"",appVersion:""}};function mf({authOptions:S,systemOptions:i,loggerOptions:u,cacheOptions:p,storageInterface:w,networkInterface:T,cryptoInterface:R,clientCredentials:j,libraryInfo:K,telemetry:te,serverTelemetryManager:ve,persistencePlugin:Se,serializableCache:Ue}){const Qe={...Fg,...u};return{authOptions:Kl(S),systemOptions:{...zl,...i},loggerOptions:Qe,cacheOptions:{...Ar,...p},storageInterface:w||new Ii(S.clientId,En,new Ln(Qe),new ha),networkInterface:T||fa,cryptoInterface:R||En,clientCredentials:j||Fl,libraryInfo:{...ad,...K},telemetry:{...ff,...te},serverTelemetryManager:ve||null,persistencePlugin:Se||null,serializableCache:Ue||null}}function Kl(S){return{clientCapabilities:[],azureCloudOptions:$C,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...S}}function Gl(S){return S.authOptions.authority.options.protocolMode===Vn.OIDC}/*! @azure/msal-common v15.13.0 2025-10-09 */const no={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v15.13.0 2025-10-09 */function cd(S,i){if(!S)throw Ie(me);try{const u=i(S);return JSON.parse(u)}catch{throw Ie(ue)}}function fc(S){if(!S)throw Ie(ue);const i=S.split(N.CLIENT_INFO_SEPARATOR,2);return{uid:i[0],utid:i.length<2?e.EMPTY_STRING:i[1]}}/*! @azure/msal-common v15.13.0 2025-10-09 */const ma="client_id",ld="redirect_uri",VC="response_type",YC="response_mode",QC="grant_type",WC="claims",XC="scope",Kg="refresh_token",JC="state",ZC="nonce",ew="prompt",tw="code",gf="code_challenge",nw="code_challenge_method",rw="code_verifier",ow="client-request-id",Gg="x-client-SKU",iw="x-client-VER",sw="x-client-OS",aw="x-client-CPU",cw="x-client-current-telemetry",lw="x-client-last-telemetry",uw="x-ms-lib-capability",dw="x-app-name",hw="x-app-ver",fw="post_logout_redirect_uri",pf="id_token_hint",ql="client_secret",mw="client_assertion",qg="client_assertion_type",yf="token_type",vf="req_cnf",Cf="return_spa_code",$g="nativebroker",mc="logout_hint",gw="sid",pw="login_hint",yw="domain_hint",Vg="x-client-xtra-sku",$l="brk_client_id",Cs="brk_redirect_uri",ga="instance_aware",vw="ear_jwk",ud="ear_jwe_crypto";/*! @azure/msal-common v15.13.0 2025-10-09 */function Vl(S,i,u){if(!i)return;const p=S.get(ma);p&&S.has($l)&&u?.addFields({embeddedClientId:p,embeddedRedirectUri:S.get(ld)},i)}function dd(S,i){S.set(VC,i)}function wf(S,i){S.set(YC,i||A.QUERY)}function bf(S){S.set($g,"1")}function hd(S,i,u=!0,p=s){u&&!p.includes("openid")&&!i.includes("openid")&&p.push("openid");const w=u?[...i||[],...p]:i||[],T=new an(w);S.set(XC,T.printScopes())}function fd(S,i){S.set(ma,i)}function md(S,i){S.set(ld,i)}function Cw(S,i){S.set(fw,i)}function ww(S,i){S.set(pf,i)}function bw(S,i){S.set(yw,i)}function gd(S,i){S.set(pw,i)}function pd(S,i){S.set(d.CCS_HEADER,`UPN:${i}`)}function Yn(S,i){S.set(d.CCS_HEADER,`Oid:${i.uid}@${i.utid}`)}function gc(S,i){S.set(gw,i)}function yd(S,i,u){const p=Ed(i,u);try{JSON.parse(p)}catch{throw St(xr)}S.set(WC,p)}function vd(S,i){S.set(ow,i)}function Cd(S,i){S.set(Gg,i.sku),S.set(iw,i.version),i.os&&S.set(sw,i.os),i.cpu&&S.set(aw,i.cpu)}function wd(S,i){i?.appName&&S.set(dw,i.appName),i?.appVersion&&S.set(hw,i.appVersion)}function xf(S,i){S.set(ew,i)}function Yg(S,i){i&&S.set(JC,i)}function pc(S,i){S.set(ZC,i)}function bd(S,i,u){if(i&&u)S.set(gf,i),S.set(nw,u);else throw St(Er)}function Yl(S,i){S.set(tw,i)}function Ef(S,i){S.set(Kg,i)}function Qg(S,i){S.set(rw,i)}function ws(S,i){S.set(ql,i)}function pa(S,i){i&&S.set(mw,i)}function xd(S,i){i&&S.set(qg,i)}function Af(S,i){S.set(QC,i)}function Ri(S){S.set(O,"1")}function Tf(S){S.has(ga)||S.set(ga,"true")}function Ni(S,i){Object.entries(i).forEach(([u,p])=>{!S.has(u)&&p&&S.set(u,p)})}function Ed(S,i){let u;if(!S)u={};else try{u=JSON.parse(S)}catch{throw St(xr)}return i&&i.length>0&&(u.hasOwnProperty(y.ACCESS_TOKEN)||(u[y.ACCESS_TOKEN]={}),u[y.ACCESS_TOKEN][y.XMS_CC]={values:i}),JSON.stringify(u)}function Sf(S,i){i&&(S.set(yf,$.POP),S.set(vf,i))}function Wg(S,i){i&&(S.set(yf,$.SSH),S.set(vf,i))}function Xg(S,i){S.set(cw,i.generateCurrentRequestHeaderValue()),S.set(lw,i.generateLastRequestHeaderValue())}function _f(S){S.set(uw,ee.X_MS_LIB_CAPABILITY_VALUE)}function Jg(S,i){S.set(mc,i)}function yc(S,i,u){S.has($l)||S.set($l,i),S.has(Cs)||S.set(Cs,u)}function Ao(S,i){S.set(vw,encodeURIComponent(i)),S.set(ud,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function Zg(S,i){Object.entries(i).forEach(([u,p])=>{p&&S.set(u,p)})}/*! @azure/msal-common v15.13.0 2025-10-09 */const mn={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v15.13.0 2025-10-09 */function ro(S){return S.hasOwnProperty("authorization_endpoint")&&S.hasOwnProperty("token_endpoint")&&S.hasOwnProperty("issuer")&&S.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v15.13.0 2025-10-09 */function vc(S){return S.hasOwnProperty("tenant_discovery_endpoint")&&S.hasOwnProperty("metadata")}/*! @azure/msal-common v15.13.0 2025-10-09 */function kf(S){return S.hasOwnProperty("error")&&S.hasOwnProperty("error_description")}/*! @azure/msal-common v15.13.0 2025-10-09 */const Qn=(S,i,u,p,w)=>(...T)=>{u.trace(`Executing function ${i}`);const R=p?.startMeasurement(i,w);if(w){const j=i+"CallCount";p?.incrementFields({[j]:1},w)}try{const j=S(...T);return R?.end({success:!0}),u.trace(`Returning result from ${i}`),j}catch(j){u.trace(`Error occurred in ${i}`);try{u.trace(JSON.stringify(j))}catch{u.trace("Unable to print error message.")}throw R?.end({success:!1},j),j}},Ae=(S,i,u,p,w)=>(...T)=>{u.trace(`Executing function ${i}`);const R=p?.startMeasurement(i,w);if(w){const j=i+"CallCount";p?.incrementFields({[j]:1},w)}return p?.setPreQueueTime(i,w),S(...T).then(j=>(u.trace(`Returning result from ${i}`),R?.end({success:!0}),j)).catch(j=>{u.trace(`Error occurred in ${i}`);try{u.trace(JSON.stringify(j))}catch{u.trace("Unable to print error message.")}throw R?.end({success:!1},j),j})};/*! @azure/msal-common v15.13.0 2025-10-09 */class Cc{constructor(i,u,p,w){this.networkInterface=i,this.logger=u,this.performanceClient=p,this.correlationId=w}async detectRegion(i,u){this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryDetectRegion,this.correlationId);let p=i;if(p)u.region_source=ce.ENVIRONMENT_VARIABLE;else{const w=Cc.IMDS_OPTIONS;try{const T=await Ae(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(e.IMDS_VERSION,w);if(T.status===n.SUCCESS&&(p=T.body,u.region_source=ce.IMDS),T.status===n.BAD_REQUEST){const R=await Ae(this.getCurrentVersion.bind(this),q.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(w);if(!R)return u.region_source=ce.FAILED_AUTO_DETECTION,null;const j=await Ae(this.getRegionFromIMDS.bind(this),q.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(R,w);j.status===n.SUCCESS&&(p=j.body,u.region_source=ce.IMDS)}}catch{return u.region_source=ce.FAILED_AUTO_DETECTION,null}}return p||(u.region_source=ce.FAILED_AUTO_DETECTION),p||null}async getRegionFromIMDS(i,u){return this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${e.IMDS_ENDPOINT}?api-version=${i}&format=text`,u,e.IMDS_TIMEOUT)}async getCurrentVersion(i){this.performanceClient?.addQueueMeasurement(q.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const u=await this.networkInterface.sendGetRequestAsync(`${e.IMDS_ENDPOINT}?format=json`,i);return u.status===n.BAD_REQUEST&&u.body&&u.body["newest-versions"]&&u.body["newest-versions"].length>0?u.body["newest-versions"][0]:null}catch{return null}}}Cc.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v15.13.0 2025-10-09 */function Tn(){return Math.round(new Date().getTime()/1e3)}function If(S){return S.getTime()/1e3}function oo(S){return S?new Date(Number(S)*1e3):new Date}function Wo(S,i){const u=Number(S)||0;return Tn()+i>u}function xw(S,i){const u=Number(S)+i*24*60*60*1e3;return Date.now()>u}function Tr(S){return Number(S)>Tn()}/*! @azure/msal-common v15.13.0 2025-10-09 */function wc(S,i,u,p,w){return{credentialType:M.ID_TOKEN,homeAccountId:S,environment:i,clientId:p,secret:u,realm:w,lastUpdatedAt:Date.now().toString()}}function io(S,i,u,p,w,T,R,j,K,te,ve,Se,Ue,Qe,Bt){const zt={homeAccountId:S,credentialType:M.ACCESS_TOKEN,secret:u,cachedAt:Tn().toString(),expiresOn:R.toString(),extendedExpiresOn:j.toString(),environment:i,clientId:p,realm:w,target:T,tokenType:ve||$.BEARER,lastUpdatedAt:Date.now().toString()};if(Se&&(zt.userAssertionHash=Se),te&&(zt.refreshOn=te.toString()),Qe&&(zt.requestedClaims=Qe,zt.requestedClaimsHash=Bt),zt.tokenType?.toLowerCase()!==$.BEARER.toLowerCase())switch(zt.credentialType=M.ACCESS_TOKEN_WITH_AUTH_SCHEME,zt.tokenType){case $.POP:const mr=An(u,K);if(!mr?.cnf?.kid)throw Ie(bo);zt.keyId=mr.cnf.kid;break;case $.SSH:zt.keyId=Ue}return zt}function Rf(S,i,u,p,w,T,R){const j={credentialType:M.REFRESH_TOKEN,homeAccountId:S,environment:i,clientId:p,secret:u,lastUpdatedAt:Date.now().toString()};return T&&(j.userAssertionHash=T),w&&(j.familyId=w),R&&(j.expiresOn=R.toString()),j}function bc(S){return S.hasOwnProperty("homeAccountId")&&S.hasOwnProperty("environment")&&S.hasOwnProperty("credentialType")&&S.hasOwnProperty("clientId")&&S.hasOwnProperty("secret")}function bs(S){return S?bc(S)&&S.hasOwnProperty("realm")&&S.hasOwnProperty("target")&&(S.credentialType===M.ACCESS_TOKEN||S.credentialType===M.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Nf(S){return S?bc(S)&&S.hasOwnProperty("realm")&&S.credentialType===M.ID_TOKEN:!1}function Ad(S){return S?bc(S)&&S.credentialType===M.REFRESH_TOKEN:!1}function xc(S,i){const u=S.indexOf(V.CACHE_KEY)===0;let p=!0;return i&&(p=i.hasOwnProperty("failedRequests")&&i.hasOwnProperty("errors")&&i.hasOwnProperty("cacheHits")),u&&p}function Ec(S,i){let u=!1;S&&(u=S.indexOf(ee.THROTTLING_PREFIX)===0);let p=!0;return i&&(p=i.hasOwnProperty("throttleTime")),u&&p}function Td({environment:S,clientId:i}){return[U,S,i].join(N.CACHE_KEY_SEPARATOR).toLowerCase()}function Sd(S,i){return i?S.indexOf(U)===0&&i.hasOwnProperty("clientId")&&i.hasOwnProperty("environment"):!1}function so(S,i){return i?S.indexOf(H.CACHE_KEY)===0&&i.hasOwnProperty("aliases")&&i.hasOwnProperty("preferred_cache")&&i.hasOwnProperty("preferred_network")&&i.hasOwnProperty("canonical_authority")&&i.hasOwnProperty("authorization_endpoint")&&i.hasOwnProperty("token_endpoint")&&i.hasOwnProperty("issuer")&&i.hasOwnProperty("aliasesFromNetwork")&&i.hasOwnProperty("endpointsFromNetwork")&&i.hasOwnProperty("expiresAt")&&i.hasOwnProperty("jwks_uri"):!1}function Kr(){return Tn()+H.REFRESH_TIME_SECONDS}function Xo(S,i,u){S.authorization_endpoint=i.authorization_endpoint,S.token_endpoint=i.token_endpoint,S.end_session_endpoint=i.end_session_endpoint,S.issuer=i.issuer,S.endpointsFromNetwork=u,S.jwks_uri=i.jwks_uri}function To(S,i,u){S.aliases=i.aliases,S.preferred_cache=i.preferred_cache,S.preferred_network=i.preferred_network,S.aliasesFromNetwork=u}function Jo(S){return S.expiresAt<=Tn()}/*! @azure/msal-common v15.13.0 2025-10-09 */class gn{constructor(i,u,p,w,T,R,j,K){this.canonicalAuthority=i,this._canonicalAuthority.validateAsUri(),this.networkInterface=u,this.cacheManager=p,this.authorityOptions=w,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=T,this.performanceClient=j,this.correlationId=R,this.managedIdentity=K||!1,this.regionDiscovery=new Cc(u,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(i){if(i.HostNameAndPort.endsWith(e.CIAM_AUTH_URL))return mn.Ciam;const u=i.PathSegments;if(u.length)switch(u[0].toLowerCase()){case e.ADFS:return mn.Adfs;case e.DSTS:return mn.Dsts}return mn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(i){this._canonicalAuthority=new _t(i),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Ie(le)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Ie(le)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Ie(le)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Ie(fs);return this.replacePath(this.metadata.end_session_endpoint)}else throw Ie(le)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Ie(le)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Ie(le)}canReplaceTenant(i){return i.PathSegments.length===1&&!gn.reservedTenantDomains.has(i.PathSegments[0])&&this.getAuthorityType(i)===mn.Default&&this.protocolMode!==Vn.OIDC}replaceTenant(i){return i.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(i){let u=i;const w=new _t(this.metadata.canonical_authority).getUrlComponents(),T=w.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((j,K)=>{let te=T[K];if(K===0&&this.canReplaceTenant(w)){const ve=new _t(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];te!==ve&&(this.logger.verbose(`Replacing tenant domain name ${te} with id ${ve}`),te=ve)}j!==te&&(u=u.replace(`/${te}/`,`/${j}/`))}),this.replaceTenant(u)}get defaultOpenIdConfigurationEndpoint(){const i=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===mn.Adfs||this.protocolMode===Vn.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(i)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(q.AuthorityResolveEndpointsAsync,this.correlationId);const i=this.getCurrentMetadataEntity(),u=await Ae(this.updateCloudDiscoveryMetadata.bind(this),q.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,i.preferred_network);const p=await Ae(this.updateEndpointMetadata.bind(this),q.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(i);this.updateCachedMetadata(i,u,{source:p}),this.performanceClient?.addFields({cloudDiscoverySource:u,authorityEndpointSource:p},this.correlationId)}getCurrentMetadataEntity(){let i=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return i||(i={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Kr(),jwks_uri:""}),i}updateCachedMetadata(i,u,p){u!==G.CACHE&&p?.source!==G.CACHE&&(i.expiresAt=Kr(),i.canonical_authority=this.canonicalAuthority);const w=this.cacheManager.generateAuthorityMetadataCacheKey(i.preferred_cache);this.cacheManager.setAuthorityMetadata(w,i),this.metadata=i}async updateEndpointMetadata(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateEndpointMetadata,this.correlationId);const u=this.updateEndpointMetadataFromLocalSources(i);if(u){if(u.source===G.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&u.metadata){const w=await Ae(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(u.metadata);Xo(i,w,!1),i.canonical_authority=this.canonicalAuthority}return u.source}let p=await Ae(this.getEndpointMetadataFromNetwork.bind(this),q.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(p)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(p=await Ae(this.updateMetadataWithRegionalInformation.bind(this),q.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(p)),Xo(i,p,!0),G.NETWORK;throw Ie(je,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(i){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const u=this.getEndpointMetadataFromConfig();if(u)return this.logger.verbose("Found endpoint metadata in authority configuration"),Xo(i,u,!1),{source:G.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const w=this.getEndpointMetadataFromHardcodedValues();if(w)return Xo(i,w,!1),{source:G.HARDCODED_VALUES,metadata:w};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const p=Jo(i);return this.isAuthoritySameType(i)&&i.endpointsFromNetwork&&!p?(this.logger.verbose("Found endpoint metadata in the cache."),{source:G.CACHE}):(p&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(i){return new _t(i.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw St(aa)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(q.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const i={},u=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${u}`);try{const p=await this.networkInterface.sendGetRequestAsync(u,i);return ro(p.body)?p.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(p){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${p}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in df?df[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const u=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(u){if(u!==e.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=oe.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=u,gn.replaceWithRegionalInformation(i,u);const p=await Ae(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),q.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(p)return this.regionDiscoveryMetadata.region_outcome=oe.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=p,gn.replaceWithRegionalInformation(i,p);this.regionDiscoveryMetadata.region_outcome=oe.AUTO_DETECTION_REQUESTED_FAILED}return i}async updateCloudDiscoveryMetadata(i){this.performanceClient?.addQueueMeasurement(q.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const u=this.updateCloudDiscoveryMetadataFromLocalSources(i);if(u)return u;const p=await Ae(this.getCloudDiscoveryMetadataFromNetwork.bind(this),q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(p)return To(i,p,!0),G.NETWORK;throw St(Ei)}updateCloudDiscoveryMetadataFromLocalSources(i){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||e.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||e.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${i.canonical_authority||e.NOT_APPLICABLE}`);const u=this.getCloudDiscoveryMetadataFromConfig();if(u)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),To(i,u,!1),G.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const w=hf(this.hostnameAndPort);if(w)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),To(i,w,!1),G.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const p=Jo(i);return this.isAuthoritySameType(i)&&i.aliasesFromNetwork&&!p?(this.logger.verbose("Found cloud discovery metadata in the cache."),G.CACHE):(p&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===mn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),gn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const i=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),u=hc(i.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),u)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),u;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),St(zr)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),gn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(q.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const i=`${e.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,u={};let p=null;try{const w=await this.networkInterface.sendGetRequestAsync(i,u);let T,R;if(vc(w.body))T=w.body,R=T.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${T.tenant_discovery_endpoint}`);else if(kf(w.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${w.status}`),T=w.body,T.error===e.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${T.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${T.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),R=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),p=hc(R,this.hostnameAndPort)}catch(w){if(w instanceof Q)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${w.errorCode}
Error Description: ${w.errorMessage}`);else{const T=w;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${T.name}
Error Description: ${T.message}`)}return null}return p||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),p=gn.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),p}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(u=>u&&_t.getDomainFromUrl(u).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(i,u){let p;if(u&&u.azureCloudInstance!==cc.None){const w=u.tenant?u.tenant:e.DEFAULT_COMMON_TENANT;p=`${u.azureCloudInstance}/${w}/`}return p||i}static createCloudDiscoveryMetadataFromHost(i){return{preferred_network:i,preferred_cache:i,aliases:[i]}}getPreferredCache(){if(this.managedIdentity)return e.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Ie(le)}isAlias(i){return this.metadata.aliases.indexOf(i)>-1}isAliasOfKnownMicrosoftAuthority(i){return zg.has(i)}static isPublicCloudAuthority(i){return e.KNOWN_PUBLIC_CLOUDS.indexOf(i)>=0}static buildRegionalAuthorityString(i,u,p){const w=new _t(i);w.validateAsUri();const T=w.getUrlComponents();let R=`${u}.${T.HostNameAndPort}`;this.isPublicCloudAuthority(T.HostNameAndPort)&&(R=`${u}.${e.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const j=_t.constructAuthorityUriFromObject({...w.getUrlComponents(),HostNameAndPort:R}).urlString;return p?`${j}?${p}`:j}static replaceWithRegionalInformation(i,u){const p={...i};return p.authorization_endpoint=gn.buildRegionalAuthorityString(p.authorization_endpoint,u),p.token_endpoint=gn.buildRegionalAuthorityString(p.token_endpoint,u),p.end_session_endpoint&&(p.end_session_endpoint=gn.buildRegionalAuthorityString(p.end_session_endpoint,u)),p}static transformCIAMAuthority(i){let u=i;const w=new _t(i).getUrlComponents();if(w.PathSegments.length===0&&w.HostNameAndPort.endsWith(e.CIAM_AUTH_URL)){const T=w.HostNameAndPort.split(".")[0];u=`${u}${T}${e.AAD_TENANT_DOMAIN_SUFFIX}`}return u}}gn.reservedTenantDomains=new Set(["{tenant}","{tenantid}",g.COMMON,g.CONSUMERS,g.ORGANIZATIONS]);function ep(S){const p=new _t(S).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(p){case g.COMMON:case g.ORGANIZATIONS:case g.CONSUMERS:return;default:return p}}function _d(S){return S.endsWith(e.FORWARD_SLASH)?S:`${S}${e.FORWARD_SLASH}`}function kd(S){const i=S.cloudDiscoveryMetadata;let u;if(i)try{u=JSON.parse(i)}catch{throw St(zr)}return{canonicalAuthority:S.authority?_d(S.authority):void 0,knownAuthorities:S.knownAuthorities,cloudDiscoveryMetadata:u}}/*! @azure/msal-common v15.13.0 2025-10-09 */async function nr(S,i,u,p,w,T,R){R?.addQueueMeasurement(q.AuthorityFactoryCreateDiscoveredInstance,T);const j=gn.transformCIAMAuthority(_d(S)),K=new gn(j,i,u,p,w,T,R);try{return await Ae(K.resolveEndpointsAsync.bind(K),q.AuthorityResolveEndpointsAsync,w,R,T)(),K}catch{throw Ie(le)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Nt extends Q{constructor(i,u,p,w,T){super(i,u,p),this.name="ServerError",this.errorNo=w,this.status=T,Object.setPrototypeOf(this,Nt.prototype)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function At(S,i,u){return{clientId:S,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:u,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid,embeddedClientId:i.embeddedClientId||i.tokenBodyParameters?.clientId}}/*! @azure/msal-common v15.13.0 2025-10-09 */class rr{static generateThrottlingStorageKey(i){return`${ee.THROTTLING_PREFIX}.${JSON.stringify(i)}`}static preProcess(i,u,p){const w=rr.generateThrottlingStorageKey(u),T=i.getThrottlingCache(w);if(T){if(T.throttleTime<Date.now()){i.removeItem(w,p);return}throw new Nt(T.errorCodes?.join(" ")||e.EMPTY_STRING,T.errorMessage,T.subError)}}static postProcess(i,u,p,w){if(rr.checkResponseStatus(p)||rr.checkResponseForRetryAfter(p)){const T={throttleTime:rr.calculateThrottleTime(parseInt(p.headers[d.RETRY_AFTER])),error:p.body.error,errorCodes:p.body.error_codes,errorMessage:p.body.error_description,subError:p.body.suberror};i.setThrottlingCache(rr.generateThrottlingStorageKey(u),T,w)}}static checkResponseStatus(i){return i.status===429||i.status>=500&&i.status<600}static checkResponseForRetryAfter(i){return i.headers?i.headers.hasOwnProperty(d.RETRY_AFTER)&&(i.status<200||i.status>=300):!1}static calculateThrottleTime(i){const u=i<=0?0:i,p=Date.now()/1e3;return Math.floor(Math.min(p+(u||ee.DEFAULT_THROTTLE_TIME_SECONDS),p+ee.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(i,u,p,w){const T=At(u,p,w),R=this.generateThrottlingStorageKey(T);i.removeItem(R,p.correlationId)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Gr extends Q{constructor(i,u,p){super(i.errorCode,i.errorMessage,i.subError),Object.setPrototypeOf(this,Gr.prototype),this.name="NetworkError",this.error=i,this.httpStatus=u,this.responseHeaders=p}}function ya(S,i,u,p){return S.errorMessage=`${S.errorMessage}, additionalErrorInfo: error.name:${p?.name}, error.message:${p?.message}`,new Gr(S,i,u)}/*! @azure/msal-common v15.13.0 2025-10-09 */class Oi{constructor(i,u){this.config=mf(i),this.logger=new Ln(this.config.loggerOptions,ac,Ml),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=u}createTokenRequestHeaders(i){const u={};if(u[d.CONTENT_TYPE]=e.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case no.HOME_ACCOUNT_ID:try{const p=fc(i.credential);u[d.CCS_HEADER]=`Oid:${p.uid}@${p.utid}`}catch(p){this.logger.verbose("Could not parse home account ID for CCS Header: "+p)}break;case no.UPN:u[d.CCS_HEADER]=`UPN: ${i.credential}`;break}return u}async executePostToTokenEndpoint(i,u,p,w,T,R){R&&this.performanceClient?.addQueueMeasurement(R,T);const j=await this.sendPostRequest(w,i,{body:u,headers:p},T);return this.config.serverTelemetryManager&&j.status<500&&j.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),j}async sendPostRequest(i,u,p,w){rr.preProcess(this.cacheManager,i,w);let T;try{T=await Ae(this.networkClient.sendPostRequestAsync.bind(this.networkClient),q.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,w)(u,p);const R=T.headers||{};this.performanceClient?.addFields({refreshTokenSize:T.body.refresh_token?.length||0,httpVerToken:R[d.X_MS_HTTP_VERSION]||"",requestId:R[d.X_MS_REQUEST_ID]||""},w)}catch(R){if(R instanceof Gr){const j=R.responseHeaders;throw j&&this.performanceClient?.addFields({httpVerToken:j[d.X_MS_HTTP_VERSION]||"",requestId:j[d.X_MS_REQUEST_ID]||"",contentTypeHeader:j[d.CONTENT_TYPE]||void 0,contentLengthHeader:j[d.CONTENT_LENGTH]||void 0,httpStatus:R.httpStatus},w),R.error}throw R instanceof Q?R:Ie(Ce)}return rr.postProcess(this.cacheManager,i,T,w),T}async updateAuthority(i,u){this.performanceClient?.addQueueMeasurement(q.UpdateTokenEndpointAuthority,u);const p=`https://${i}/${this.authority.tenant}/`,w=await nr(p,this.networkClient,this.cacheManager,this.authority.options,this.logger,u,this.performanceClient);this.authority=w}createTokenQueryParameters(i){const u=new Map;return i.embeddedClientId&&yc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenQueryParameters&&Ni(u,i.tokenQueryParameters),vd(u,i.correlationId),Vl(u,i.correlationId,this.performanceClient),dc(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function Of(S){return S&&(S.tid||S.tfp||S.acr)||null}/*! @azure/msal-common v15.13.0 2025-10-09 */class Sr{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(i=>[i.tenantId,i])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(i,u,p){const w=new Sr;u.authorityType===mn.Adfs?w.authorityType=_.ADFS_ACCOUNT_TYPE:u.protocolMode===Vn.OIDC?w.authorityType=_.GENERIC_ACCOUNT_TYPE:w.authorityType=_.MSSTS_ACCOUNT_TYPE;let T;i.clientInfo&&p&&(T=cd(i.clientInfo,p),T.xms_tdbr&&(w.dataBoundary=T.xms_tdbr==="EU"?"EU":"None")),w.clientInfo=i.clientInfo,w.homeAccountId=i.homeAccountId,w.nativeAccountId=i.nativeAccountId;const R=i.environment||u&&u.getPreferredCache();if(!R)throw Ie(Vt);w.environment=R,w.realm=T?.utid||Of(i.idTokenClaims)||"",w.localAccountId=T?.uid||i.idTokenClaims?.oid||i.idTokenClaims?.sub||"";const j=i.idTokenClaims?.preferred_username||i.idTokenClaims?.upn,K=i.idTokenClaims?.emails?i.idTokenClaims.emails[0]:null;if(w.username=j||K||"",w.loginHint=i.idTokenClaims?.login_hint,w.name=i.idTokenClaims?.name||"",w.cloudGraphHostName=i.cloudGraphHostName,w.msGraphHost=i.msGraphHost,i.tenantProfiles)w.tenantProfiles=i.tenantProfiles;else{const te=Si(i.homeAccountId,w.localAccountId,w.realm,i.idTokenClaims);w.tenantProfiles=[te]}return w}static createFromAccountInfo(i,u,p){const w=new Sr;return w.authorityType=i.authorityType||_.GENERIC_ACCOUNT_TYPE,w.homeAccountId=i.homeAccountId,w.localAccountId=i.localAccountId,w.nativeAccountId=i.nativeAccountId,w.realm=i.tenantId,w.environment=i.environment,w.username=i.username,w.name=i.name,w.loginHint=i.loginHint,w.cloudGraphHostName=u,w.msGraphHost=p,w.tenantProfiles=Array.from(i.tenantProfiles?.values()||[]),w.dataBoundary=i.dataBoundary,w}static generateHomeAccountId(i,u,p,w,T){if(!(u===mn.Adfs||u===mn.Dsts)){if(i)try{const R=cd(i,w.base64Decode);if(R.uid&&R.utid)return`${R.uid}.${R.utid}`}catch{}p.warning("No client info in response")}return T?.sub||""}static isAccountEntity(i){return i?i.hasOwnProperty("homeAccountId")&&i.hasOwnProperty("environment")&&i.hasOwnProperty("realm")&&i.hasOwnProperty("localAccountId")&&i.hasOwnProperty("username")&&i.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(i,u,p){if(!i||!u)return!1;let w=!0;if(p){const T=i.idTokenClaims||{},R=u.idTokenClaims||{};w=T.iat===R.iat&&T.nonce===R.nonce}return i.homeAccountId===u.homeAccountId&&i.localAccountId===u.localAccountId&&i.username===u.username&&i.tenantId===u.tenantId&&i.loginHint===u.loginHint&&i.environment===u.environment&&i.nativeAccountId===u.nativeAccountId&&w}}/*! @azure/msal-common v15.13.0 2025-10-09 */const So="no_tokens_found",Mi="native_account_unavailable",Ql="refresh_token_expired",xs="ux_not_allowed",Id="interaction_required",Es="consent_required",Zo="login_required",_r="bad_token";var Pi=Object.freeze({__proto__:null,badToken:_r,consentRequired:Es,interactionRequired:Id,loginRequired:Zo,nativeAccountUnavailable:Mi,noTokensFound:So,refreshTokenExpired:Ql,uxNotAllowed:xs});/*! @azure/msal-common v15.13.0 2025-10-09 */const Rd=[Id,Es,Zo,_r,xs],Mf=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],As={[So]:"No refresh token found in the cache. Please sign-in.",[Mi]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Ql]:"Refresh token has expired.",[_r]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[xs]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},Nd={noTokensFoundError:{code:So,desc:As[So]},native_account_unavailable:{code:Mi,desc:As[Mi]},bad_token:{code:_r,desc:As[_r]}};class Nn extends Q{constructor(i,u,p,w,T,R,j,K){super(i,u,p),Object.setPrototypeOf(this,Nn.prototype),this.timestamp=w||e.EMPTY_STRING,this.traceId=T||e.EMPTY_STRING,this.correlationId=R||e.EMPTY_STRING,this.claims=j||e.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=K}}function Wn(S,i,u){const p=!!S&&Rd.indexOf(S)>-1,w=!!u&&Mf.indexOf(u)>-1,T=!!i&&Rd.some(R=>i.indexOf(R)>-1);return p||T||w}function va(S){return new Nn(S,As[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */class Ca{static setRequestState(i,u,p){const w=Ca.generateLibraryState(i,p);return u?`${w}${e.RESOURCE_DELIM}${u}`:w}static generateLibraryState(i,u){if(!i)throw Ie(Ko);const p={id:i.createNewGuid()};u&&(p.meta=u);const w=JSON.stringify(p);return i.base64Encode(w)}static parseRequestState(i,u){if(!i)throw Ie(Ko);if(!u)throw Ie(we);try{const p=u.split(e.RESOURCE_DELIM),w=p[0],T=p.length>1?p.slice(1).join(e.RESOURCE_DELIM):e.EMPTY_STRING,R=i.base64Decode(w),j=JSON.parse(R);return{userRequestState:T||e.EMPTY_STRING,libraryState:j}}catch{throw Ie(we)}}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Ew={SW:"sw"};class wa{constructor(i,u){this.cryptoUtils=i,this.performanceClient=u}async generateCnf(i,u){this.performanceClient?.addQueueMeasurement(q.PopTokenGenerateCnf,i.correlationId);const p=await Ae(this.generateKid.bind(this),q.PopTokenGenerateCnf,u,this.performanceClient,i.correlationId)(i),w=this.cryptoUtils.base64UrlEncode(JSON.stringify(p));return{kid:p.kid,reqCnfString:w}}async generateKid(i){return this.performanceClient?.addQueueMeasurement(q.PopTokenGenerateKid,i.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(i),xms_ksl:Ew.SW}}async signPopToken(i,u,p){return this.signPayload(i,u,p)}async signPayload(i,u,p,w){const{resourceRequestMethod:T,resourceRequestUri:R,shrClaims:j,shrNonce:K,shrOptions:te}=p,Se=(R?new _t(R):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:i,ts:Tn(),m:T?.toUpperCase(),u:Se?.HostNameAndPort,nonce:K||this.cryptoUtils.createNewGuid(),p:Se?.AbsolutePath,q:Se?.QueryString?[[],Se.QueryString]:void 0,client_claims:j||void 0,...w},u,te,p.correlationId)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class Aw{constructor(i,u){this.cache=i,this.hasChanged=u}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v15.13.0 2025-10-09 */class tn{constructor(i,u,p,w,T,R,j){this.clientId=i,this.cacheStorage=u,this.cryptoObj=p,this.logger=w,this.serializableCache=T,this.persistencePlugin=R,this.performanceClient=j}validateTokenResponse(i,u){if(i.error||i.error_description||i.suberror){const p=`Error(s): ${i.error_codes||e.NOT_AVAILABLE} - Timestamp: ${i.timestamp||e.NOT_AVAILABLE} - Description: ${i.error_description||e.NOT_AVAILABLE} - Correlation ID: ${i.correlation_id||e.NOT_AVAILABLE} - Trace ID: ${i.trace_id||e.NOT_AVAILABLE}`,w=i.error_codes?.length?i.error_codes[0]:void 0,T=new Nt(i.error,p,i.suberror,w,i.status);if(u&&i.status&&i.status>=n.SERVER_ERROR_RANGE_START&&i.status<=n.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${T}`);return}else if(u&&i.status&&i.status>=n.CLIENT_ERROR_RANGE_START&&i.status<=n.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${T}`);return}throw Wn(i.error,i.error_description,i.suberror)?new Nn(i.error,i.error_description,i.suberror,i.timestamp||e.EMPTY_STRING,i.trace_id||e.EMPTY_STRING,i.correlation_id||e.EMPTY_STRING,i.claims||e.EMPTY_STRING,w):T}}async handleServerTokenResponse(i,u,p,w,T,R,j,K,te){this.performanceClient?.addQueueMeasurement(q.HandleServerTokenResponse,i.correlation_id);let ve;if(i.id_token){if(ve=An(i.id_token||e.EMPTY_STRING,this.cryptoObj.base64Decode),T&&T.nonce&&ve.nonce!==T.nonce)throw Ie(Me);if(w.maxAge||w.maxAge===0){const Bt=ve.auth_time;if(!Bt)throw Ie(lt);jl(Bt,w.maxAge)}}this.homeAccountIdentifier=Sr.generateHomeAccountId(i.client_info||e.EMPTY_STRING,u.authorityType,this.logger,this.cryptoObj,ve);let Se;T&&T.state&&(Se=Ca.parseRequestState(this.cryptoObj,T.state)),i.key_id=i.key_id||w.sshKid||void 0;const Ue=this.generateCacheRecord(i,u,p,w,ve,R,T);let Qe;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),Qe=new Aw(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(Qe)),j&&!K&&Ue.account){const Bt=this.cacheStorage.generateAccountKey(Ue.account.getAccountInfo());if(!this.cacheStorage.getAccount(Bt,w.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await tn.generateAuthenticationResult(this.cryptoObj,u,Ue,!1,w,ve,Se,void 0,te)}await this.cacheStorage.saveCacheRecord(Ue,w.correlationId,w.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&Qe&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(Qe))}return tn.generateAuthenticationResult(this.cryptoObj,u,Ue,!1,w,ve,Se,i,te)}generateCacheRecord(i,u,p,w,T,R,j){const K=u.getPreferredCache();if(!K)throw Ie(Vt);const te=Of(T);let ve,Se;i.id_token&&T&&(ve=wc(this.homeAccountIdentifier,K,i.id_token,this.clientId,te||""),Se=Wl(this.cacheStorage,u,this.homeAccountIdentifier,this.cryptoObj.base64Decode,w.correlationId,T,i.client_info,K,te,j,void 0,this.logger));let Ue=null;if(i.access_token){const zt=i.scope?an.fromString(i.scope):new an(w.scopes||[]),mr=(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,Wi=(typeof i.ext_expires_in=="string"?parseInt(i.ext_expires_in,10):i.ext_expires_in)||0,gr=(typeof i.refresh_in=="string"?parseInt(i.refresh_in,10):i.refresh_in)||void 0,tl=p+mr,ym=tl+Wi,dh=gr&&gr>0?p+gr:void 0;Ue=io(this.homeAccountIdentifier,K,i.access_token,this.clientId,te||u.tenant||"",zt.printScopes(),tl,ym,this.cryptoObj.base64Decode,dh,i.token_type,R,i.key_id,w.claims,w.requestedClaimsHash)}let Qe=null;if(i.refresh_token){let zt;if(i.refresh_token_expires_in){const mr=typeof i.refresh_token_expires_in=="string"?parseInt(i.refresh_token_expires_in,10):i.refresh_token_expires_in;zt=p+mr}Qe=Rf(this.homeAccountIdentifier,K,i.refresh_token,this.clientId,i.foci,R,zt)}let Bt=null;return i.foci&&(Bt={clientId:this.clientId,environment:K,familyId:i.foci}),{account:Se,idToken:ve,accessToken:Ue,refreshToken:Qe,appMetadata:Bt}}static async generateAuthenticationResult(i,u,p,w,T,R,j,K,te){let ve=e.EMPTY_STRING,Se=[],Ue=null,Qe,Bt,zt=e.EMPTY_STRING;if(p.accessToken){if(p.accessToken.tokenType===$.POP&&!T.popKid){const tl=new wa(i),{secret:ym,keyId:dh}=p.accessToken;if(!dh)throw Ie(Go);ve=await tl.signPopToken(ym,dh,T)}else ve=p.accessToken.secret;Se=an.fromString(p.accessToken.target).asArray(),Ue=oo(p.accessToken.expiresOn),Qe=oo(p.accessToken.extendedExpiresOn),p.accessToken.refreshOn&&(Bt=oo(p.accessToken.refreshOn))}p.appMetadata&&(zt=p.appMetadata.familyId===L?L:"");const mr=R?.oid||R?.sub||"",Wi=R?.tid||"";K?.spa_accountid&&p.account&&(p.account.nativeAccountId=K?.spa_accountid);const gr=p.account?Dl(p.account.getAccountInfo(),void 0,R,p.idToken?.secret):null;return{authority:u.canonicalAuthority,uniqueId:mr,tenantId:Wi,scopes:Se,account:gr,idToken:p?.idToken?.secret||"",idTokenClaims:R||{},accessToken:ve,fromCache:w,expiresOn:Ue,extExpiresOn:Qe,refreshOn:Bt,correlationId:T.correlationId,requestId:te||e.EMPTY_STRING,familyId:zt,tokenType:p.accessToken?.tokenType||e.EMPTY_STRING,state:j?j.userRequestState:e.EMPTY_STRING,cloudGraphHostName:p.account?.cloudGraphHostName||e.EMPTY_STRING,msGraphHost:p.account?.msGraphHost||e.EMPTY_STRING,code:K?.spa_code,fromNativeBroker:!1}}}function Wl(S,i,u,p,w,T,R,j,K,te,ve,Se){Se?.verbose("setCachedAccount called");const Qe=S.getAccountKeys().find(gr=>gr.startsWith(u));let Bt=null;Qe&&(Bt=S.getAccount(Qe,w));const zt=Bt||Sr.createAccount({homeAccountId:u,idTokenClaims:T,clientInfo:R,environment:j,cloudGraphHostName:te?.cloud_graph_host_name,msGraphHost:te?.msgraph_host,nativeAccountId:ve},i,p),mr=zt.tenantProfiles||[],Wi=K||zt.realm;if(Wi&&!mr.find(gr=>gr.tenantId===Wi)){const gr=Si(u,zt.localAccountId,Wi,T);mr.push(gr)}return zt.tenantProfiles=mr,zt}/*! @azure/msal-common v15.13.0 2025-10-09 */async function Ac(S,i,u){return typeof S=="string"?S:S({clientId:i,tokenEndpoint:u})}/*! @azure/msal-common v15.13.0 2025-10-09 */class Tc extends Oi{constructor(i,u){super(i,u),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(i,u){if(this.performanceClient?.addQueueMeasurement(q.AuthClientAcquireToken,i.correlationId),!i.code)throw Ie(it);const p=Tn(),w=await Ae(this.executeTokenRequest.bind(this),q.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(this.authority,i),T=w.headers?.[d.X_MS_REQUEST_ID],R=new tn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return R.validateTokenResponse(w.body),Ae(R.handleServerTokenResponse.bind(R),q.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(w.body,this.authority,p,i,u,void 0,void 0,void 0,T)}getLogoutUri(i){if(!i)throw St(gs);const u=this.createLogoutUrlQueryString(i);return _t.appendQueryString(this.authority.endSessionEndpoint,u)}async executeTokenRequest(i,u){this.performanceClient?.addQueueMeasurement(q.AuthClientExecuteTokenRequest,u.correlationId);const p=this.createTokenQueryParameters(u),w=_t.appendQueryString(i.tokenEndpoint,p),T=await Ae(this.createTokenRequestBody.bind(this),q.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,u.correlationId)(u);let R;if(u.clientInfo)try{const te=cd(u.clientInfo,this.cryptoUtils.base64Decode);R={credential:`${te.uid}${N.CLIENT_INFO_SEPARATOR}${te.utid}`,type:no.HOME_ACCOUNT_ID}}catch(te){this.logger.verbose("Could not parse client info for CCS Header: "+te)}const j=this.createTokenRequestHeaders(R||u.ccsCredential),K=At(this.config.authOptions.clientId,u);return Ae(this.executePostToTokenEndpoint.bind(this),q.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,u.correlationId)(w,T,j,K,u.correlationId,q.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(i){this.performanceClient?.addQueueMeasurement(q.AuthClientCreateTokenRequestBody,i.correlationId);const u=new Map;if(fd(u,i.embeddedClientId||i.tokenBodyParameters?.[ma]||this.config.authOptions.clientId),this.includeRedirectUri)md(u,i.redirectUri);else if(!i.redirectUri)throw St(ms);if(hd(u,i.scopes,!0,this.oidcDefaultScopes),Yl(u,i.code),Cd(u,this.config.libraryInfo),wd(u,this.config.telemetry.application),_f(u),this.serverTelemetryManager&&!Gl(this.config)&&Xg(u,this.serverTelemetryManager),i.codeVerifier&&Qg(u,i.codeVerifier),this.config.clientCredentials.clientSecret&&ws(u,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const w=this.config.clientCredentials.clientAssertion;pa(u,await Ac(w.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),xd(u,w.assertionType)}if(Af(u,I.AUTHORIZATION_CODE_GRANT),Ri(u),i.authenticationScheme===$.POP){const w=new wa(this.cryptoUtils,this.performanceClient);let T;i.popKid?T=this.cryptoUtils.encodeKid(i.popKid):T=(await Ae(w.generateCnf.bind(w),q.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,Sf(u,T)}else if(i.authenticationScheme===$.SSH)if(i.sshJwk)Wg(u,i.sshJwk);else throw St(Vo);(!$n.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&yd(u,i.claims,this.config.authOptions.clientCapabilities);let p;if(i.clientInfo)try{const w=cd(i.clientInfo,this.cryptoUtils.base64Decode);p={credential:`${w.uid}${N.CLIENT_INFO_SEPARATOR}${w.utid}`,type:no.HOME_ACCOUNT_ID}}catch(w){this.logger.verbose("Could not parse client info for CCS Header: "+w)}else p=i.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&p)switch(p.type){case no.HOME_ACCOUNT_ID:try{const w=fc(p.credential);Yn(u,w)}catch(w){this.logger.verbose("Could not parse home account ID for CCS Header: "+w)}break;case no.UPN:pd(u,p.credential);break}return i.embeddedClientId&&yc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenBodyParameters&&Ni(u,i.tokenBodyParameters),i.enableSpaAuthorizationCode&&(!i.tokenBodyParameters||!i.tokenBodyParameters[Cf])&&Ni(u,{[Cf]:"1"}),Vl(u,i.correlationId,this.performanceClient),dc(u)}createLogoutUrlQueryString(i){const u=new Map;return i.postLogoutRedirectUri&&Cw(u,i.postLogoutRedirectUri),i.correlationId&&vd(u,i.correlationId),i.idTokenHint&&ww(u,i.idTokenHint),i.state&&Yg(u,i.state),i.logoutHint&&Jg(u,i.logoutHint),i.extraQueryParameters&&Ni(u,i.extraQueryParameters),this.config.authOptions.instanceAware&&Tf(u),dc(u,this.config.authOptions.encodeExtraQueryParams,i.extraQueryParameters)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Pf=300;class Sc extends Oi{constructor(i,u){super(i,u)}async acquireToken(i){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireToken,i.correlationId);const u=Tn(),p=await Ae(this.executeTokenRequest.bind(this),q.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,i.correlationId)(i,this.authority),w=p.headers?.[d.X_MS_REQUEST_ID],T=new tn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return T.validateTokenResponse(p.body),Ae(T.handleServerTokenResponse.bind(T),q.HandleServerTokenResponse,this.logger,this.performanceClient,i.correlationId)(p.body,this.authority,u,i,void 0,void 0,!0,i.forceCache,w)}async acquireTokenByRefreshToken(i){if(!i)throw St(sn);if(this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireTokenByRefreshToken,i.correlationId),!i.account)throw Ie(ut);if(this.cacheManager.isAppMetadataFOCI(i.account.environment))try{return await Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!0)}catch(p){const w=p instanceof Nn&&p.errorCode===So,T=p instanceof Nt&&p.errorCode===se.INVALID_GRANT_ERROR&&p.subError===se.CLIENT_MISMATCH_ERROR;if(w||T)return Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1);throw p}return Ae(this.acquireTokenWithCachedRefreshToken.bind(this),q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,!1)}async acquireTokenWithCachedRefreshToken(i,u){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientAcquireTokenWithCachedRefreshToken,i.correlationId);const p=Qn(this.cacheManager.getRefreshToken.bind(this.cacheManager),q.CacheManagerGetRefreshToken,this.logger,this.performanceClient,i.correlationId)(i.account,u,i.correlationId,void 0,this.performanceClient);if(!p)throw va(So);if(p.expiresOn&&Wo(p.expiresOn,i.refreshTokenExpirationOffsetSeconds||Pf))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(p.expiresOn)},i.correlationId),va(Ql);const w={...i,refreshToken:p.secret,authenticationScheme:i.authenticationScheme||$.BEARER,ccsCredential:{credential:i.account.homeAccountId,type:no.HOME_ACCOUNT_ID}};try{return await Ae(this.acquireToken.bind(this),q.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(w)}catch(T){if(T instanceof Nn&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(p.expiresOn)},i.correlationId),T.subError===_r)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const R=this.cacheManager.generateCredentialKey(p);this.cacheManager.removeRefreshToken(R,i.correlationId)}throw T}}async executeTokenRequest(i,u){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientExecuteTokenRequest,i.correlationId);const p=this.createTokenQueryParameters(i),w=_t.appendQueryString(u.tokenEndpoint,p),T=await Ae(this.createTokenRequestBody.bind(this),q.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,i.correlationId)(i),R=this.createTokenRequestHeaders(i.ccsCredential),j=At(this.config.authOptions.clientId,i);return Ae(this.executePostToTokenEndpoint.bind(this),q.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,i.correlationId)(w,T,R,j,i.correlationId,q.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(i){this.performanceClient?.addQueueMeasurement(q.RefreshTokenClientCreateTokenRequestBody,i.correlationId);const u=new Map;if(fd(u,i.embeddedClientId||i.tokenBodyParameters?.[ma]||this.config.authOptions.clientId),i.redirectUri&&md(u,i.redirectUri),hd(u,i.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Af(u,I.REFRESH_TOKEN_GRANT),Ri(u),Cd(u,this.config.libraryInfo),wd(u,this.config.telemetry.application),_f(u),this.serverTelemetryManager&&!Gl(this.config)&&Xg(u,this.serverTelemetryManager),Ef(u,i.refreshToken),this.config.clientCredentials.clientSecret&&ws(u,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const p=this.config.clientCredentials.clientAssertion;pa(u,await Ac(p.assertion,this.config.authOptions.clientId,i.resourceRequestUri)),xd(u,p.assertionType)}if(i.authenticationScheme===$.POP){const p=new wa(this.cryptoUtils,this.performanceClient);let w;i.popKid?w=this.cryptoUtils.encodeKid(i.popKid):w=(await Ae(p.generateCnf.bind(p),q.PopTokenGenerateCnf,this.logger,this.performanceClient,i.correlationId)(i,this.logger)).reqCnfString,Sf(u,w)}else if(i.authenticationScheme===$.SSH)if(i.sshJwk)Wg(u,i.sshJwk);else throw St(Vo);if((!$n.isEmptyObj(i.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&yd(u,i.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&i.ccsCredential)switch(i.ccsCredential.type){case no.HOME_ACCOUNT_ID:try{const p=fc(i.ccsCredential.credential);Yn(u,p)}catch(p){this.logger.verbose("Could not parse home account ID for CCS Header: "+p)}break;case no.UPN:pd(u,i.ccsCredential.credential);break}return i.embeddedClientId&&yc(u,this.config.authOptions.clientId,this.config.authOptions.redirectUri),i.tokenBodyParameters&&Ni(u,i.tokenBodyParameters),Vl(u,i.correlationId,this.performanceClient),dc(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */class _c extends Oi{constructor(i,u){super(i,u)}async acquireCachedToken(i){this.performanceClient?.addQueueMeasurement(q.SilentFlowClientAcquireCachedToken,i.correlationId);let u=he.NOT_APPLICABLE;if(i.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!$n.isEmptyObj(i.claims))throw this.setCacheOutcome(he.FORCE_REFRESH_OR_CLAIMS,i.correlationId),Ie(Dn);if(!i.account)throw Ie(ut);const p=i.account.tenantId||ep(i.authority),w=this.cacheManager.getTokenKeys(),T=this.cacheManager.getAccessToken(i.account,i,w,p);if(T){if(Tr(T.cachedAt)||Wo(T.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(he.CACHED_ACCESS_TOKEN_EXPIRED,i.correlationId),Ie(Dn);T.refreshOn&&Wo(T.refreshOn,0)&&(u=he.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(he.NO_CACHED_ACCESS_TOKEN,i.correlationId),Ie(Dn);const R=i.authority||this.authority.getPreferredCache(),j={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(i.account),i.correlationId),accessToken:T,idToken:this.cacheManager.getIdToken(i.account,i.correlationId,w,p,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(R)};return this.setCacheOutcome(u,i.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ae(this.generateResultFromCacheRecord.bind(this),q.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,i.correlationId)(j,i),u]}setCacheOutcome(i,u){this.serverTelemetryManager?.setCacheOutcome(i),this.performanceClient?.addFields({cacheOutcome:i},u),i!==he.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${i}`)}async generateResultFromCacheRecord(i,u){this.performanceClient?.addQueueMeasurement(q.SilentFlowClientGenerateResultFromCacheRecord,u.correlationId);let p;if(i.idToken&&(p=An(i.idToken.secret,this.config.cryptoInterface.base64Decode)),u.maxAge||u.maxAge===0){const w=p?.auth_time;if(!w)throw Ie(lt);jl(w,u.maxAge)}return tn.generateAuthenticationResult(this.cryptoUtils,this.authority,i,!0,u,p)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Tw={sendGetRequestAsync:()=>Promise.reject(Ie(ct)),sendPostRequestAsync:()=>Promise.reject(Ie(ct))};/*! @azure/msal-common v15.13.0 2025-10-09 */function tp(S,i,u,p){const w=i.correlationId,T=new Map;fd(T,i.embeddedClientId||i.extraQueryParameters?.[ma]||S.clientId);const R=[...i.scopes||[],...i.extraScopesToConsent||[]];if(hd(T,R,!0,S.authority.options.OIDCOptions?.defaultScopes),md(T,i.redirectUri),vd(T,w),wf(T,i.responseMode),Ri(T),i.prompt&&(xf(T,i.prompt),p?.addFields({prompt:i.prompt},w)),i.domainHint&&(bw(T,i.domainHint),p?.addFields({domainHintFromRequest:!0},w)),i.prompt!==v.SELECT_ACCOUNT)if(i.sid&&i.prompt===v.NONE)u.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),gc(T,i.sid),p?.addFields({sidFromRequest:!0},w);else if(i.account){const j=Od(i.account);let K=rp(i.account);if(K&&i.domainHint&&(u.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),K=null),K){u.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),gd(T,K),p?.addFields({loginHintFromClaim:!0},w);try{const te=fc(i.account.homeAccountId);Yn(T,te)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(j&&i.prompt===v.NONE){u.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),gc(T,j),p?.addFields({sidFromClaim:!0},w);try{const te=fc(i.account.homeAccountId);Yn(T,te)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i.loginHint)u.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),gd(T,i.loginHint),pd(T,i.loginHint),p?.addFields({loginHintFromRequest:!0},w);else if(i.account.username){u.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),gd(T,i.account.username),p?.addFields({loginHintFromUpn:!0},w);try{const te=fc(i.account.homeAccountId);Yn(T,te)}catch{u.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else i.loginHint&&(u.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),gd(T,i.loginHint),pd(T,i.loginHint),p?.addFields({loginHintFromRequest:!0},w));else u.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return i.nonce&&pc(T,i.nonce),i.state&&Yg(T,i.state),(i.claims||S.clientCapabilities&&S.clientCapabilities.length>0)&&yd(T,i.claims,S.clientCapabilities),i.embeddedClientId&&yc(T,S.clientId,S.redirectUri),S.instanceAware&&(!i.extraQueryParameters||!Object.keys(i.extraQueryParameters).includes(ga))&&Tf(T),T}function Df(S,i,u,p){const w=dc(i,u,p);return _t.appendQueryString(S.authorizationEndpoint,w)}function np(S,i){if(Ts(S,i),!S.code)throw Ie(ra);return S}function Ts(S,i){if(!S.state||!i)throw S.state?Ie(Pe,"Cached State"):Ie(Pe,"Server State");let u,p;try{u=decodeURIComponent(S.state)}catch{throw Ie(we,S.state)}try{p=decodeURIComponent(i)}catch{throw Ie(we,S.state)}if(u!==p)throw Ie(Ee);if(S.error||S.error_description||S.suberror){const w=jf(S);throw Wn(S.error,S.error_description,S.suberror)?new Nn(S.error||"",S.error_description,S.suberror,S.timestamp||"",S.trace_id||"",S.correlation_id||"",S.claims||"",w):new Nt(S.error||"",S.error_description,S.suberror,w)}}function jf(S){const i="code=",u=S.error_uri?.lastIndexOf(i);return u&&u>=0?S.error_uri?.substring(u+i.length):void 0}function Od(S){return S.idTokenClaims?.sid||null}function rp(S){return S.loginHint||S.idTokenClaims?.login_hint||null}/*! @azure/msal-common v15.13.0 2025-10-09 */class Xl{constructor(i){this.headers=i}getShrNonce(){const i=this.headers[d.AuthenticationInfo];if(i){const p=this.parseChallenges(i);if(p.nextnonce)return p.nextnonce;throw St(Eo)}const u=this.headers[d.WWWAuthenticate];if(u){const p=this.parseChallenges(u);if(p.nonce)return p.nonce;throw St(Eo)}throw St(Yo)}parseChallenges(i){const u=i.indexOf(" "),p=i.substr(u+1).split(","),w={};return p.forEach(T=>{const[R,j]=T.split("=");w[R]=unescape(j.replace(/['"]+/g,e.EMPTY_STRING))}),w}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Lf=",",Jl="|";function Uf(S){const{skus:i,libraryName:u,libraryVersion:p,extensionName:w,extensionVersion:T}=S,R=new Map([[0,[u,p]],[2,[w,T]]]);let j=[];if(i?.length){if(j=i.split(Lf),j.length<4)return i}else j=Array.from({length:4},()=>Jl);return R.forEach((K,te)=>{K.length===2&&K[0]?.length&&K[1]?.length&&op({skuArr:j,index:te,skuName:K[0],skuVersion:K[1]})}),j.join(Lf)}function op(S){const{skuArr:i,index:u,skuName:p,skuVersion:w}=S;u>=i.length||(i[u]=[p,w].join(Jl))}class Ss{constructor(i,u){this.cacheOutcome=he.NOT_APPLICABLE,this.cacheManager=u,this.apiId=i.apiId,this.correlationId=i.correlationId,this.wrapperSKU=i.wrapperSKU||e.EMPTY_STRING,this.wrapperVer=i.wrapperVer||e.EMPTY_STRING,this.telemetryCacheKey=V.CACHE_KEY+N.CACHE_KEY_SEPARATOR+i.clientId}generateCurrentRequestHeaderValue(){const i=`${this.apiId}${V.VALUE_SEPARATOR}${this.cacheOutcome}`,u=[this.wrapperSKU,this.wrapperVer],p=this.getNativeBrokerErrorCode();p?.length&&u.push(`broker_error=${p}`);const w=u.join(V.VALUE_SEPARATOR),T=this.getRegionDiscoveryFields(),R=[i,T].join(V.VALUE_SEPARATOR);return[V.SCHEMA_VERSION,R,w].join(V.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const i=this.getLastRequests(),u=Ss.maxErrorsToSend(i),p=i.failedRequests.slice(0,2*u).join(V.VALUE_SEPARATOR),w=i.errors.slice(0,u).join(V.VALUE_SEPARATOR),T=i.errors.length,R=u<T?V.OVERFLOW_TRUE:V.OVERFLOW_FALSE,j=[T,R].join(V.VALUE_SEPARATOR);return[V.SCHEMA_VERSION,i.cacheHits,p,w,j].join(V.CATEGORY_SEPARATOR)}cacheFailedRequest(i){const u=this.getLastRequests();u.errors.length>=V.MAX_CACHED_ERRORS&&(u.failedRequests.shift(),u.failedRequests.shift(),u.errors.shift()),u.failedRequests.push(this.apiId,this.correlationId),i instanceof Error&&i&&i.toString()?i instanceof Q?i.subError?u.errors.push(i.subError):i.errorCode?u.errors.push(i.errorCode):u.errors.push(i.toString()):u.errors.push(i.toString()):u.errors.push(V.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,u,this.correlationId)}incrementCacheHits(){const i=this.getLastRequests();return i.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId),i.cacheHits}getLastRequests(){const i={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||i}clearTelemetryCache(){const i=this.getLastRequests(),u=Ss.maxErrorsToSend(i),p=i.errors.length;if(u===p)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const w={failedRequests:i.failedRequests.slice(u*2),errors:i.errors.slice(u),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,w,this.correlationId)}}static maxErrorsToSend(i){let u,p=0,w=0;const T=i.errors.length;for(u=0;u<T;u++){const R=i.failedRequests[2*u]||e.EMPTY_STRING,j=i.failedRequests[2*u+1]||e.EMPTY_STRING,K=i.errors[u]||e.EMPTY_STRING;if(w+=R.toString().length+j.toString().length+K.length+3,w<V.MAX_LAST_HEADER_BYTES)p+=1;else break}return p}getRegionDiscoveryFields(){const i=[];return i.push(this.regionUsed||e.EMPTY_STRING),i.push(this.regionSource||e.EMPTY_STRING),i.push(this.regionOutcome||e.EMPTY_STRING),i.join(",")}updateRegionDiscoveryMetadata(i){this.regionUsed=i.region_used,this.regionSource=i.region_source,this.regionOutcome=i.region_outcome}setCacheOutcome(i){this.cacheOutcome=i}setNativeBrokerErrorCode(i){const u=this.getLastRequests();u.nativeBrokerErrorCode=i,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,u,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const i=this.getLastRequests();delete i.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}static makeExtraSkuString(i){return Uf(i)}}/*! @azure/msal-common v15.13.0 2025-10-09 */const Hf="missing_kid_error",kc="missing_alg_error";/*! @azure/msal-common v15.13.0 2025-10-09 */const ip={[Hf]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[kc]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Md extends Q{constructor(i,u){super(i,u),this.name="JoseHeaderError",Object.setPrototypeOf(this,Md.prototype)}}function Di(S){return new Md(S,ip[S])}/*! @azure/msal-common v15.13.0 2025-10-09 */class Zl{constructor(i){this.typ=i.typ,this.alg=i.alg,this.kid=i.kid}static getShrHeaderString(i){if(!i.kid)throw Di(Hf);if(!i.alg)throw Di(kc);const u=new Zl({typ:i.typ||W.Pop,kid:i.kid,alg:i.alg});return JSON.stringify(u)}}/*! @azure/msal-common v15.13.0 2025-10-09 */function Bf(S,i,u){u&&u.push({name:i.get(S.name)||S.name})}function _s(S,i,u,p){if(!u?.length)return;const w=Qe=>Qe.length?Qe[Qe.length-1]:void 0,T=i.get(S.name)||S.name;if(w(u)?.name!==T)return;const j=u?.pop();if(!j)return;const K=p instanceof Q?p.errorCode:p instanceof Error?p.name:void 0,te=p instanceof Q?p.subError:void 0;K&&j.childErr!==K&&(j.err=K,te&&(j.subErr=te)),delete j.name,delete j.childErr;const ve={...j,dur:S.durationMs};S.success||(ve.fail=1);const Se=w(u);if(!Se)return{[T]:ve};K&&(Se.childErr=K);let Ue;if(!Se[T])Ue=T;else{const Qe=Object.keys(Se).filter(Bt=>Bt.startsWith(T)).length;Ue=`${T}_${Qe+1}`}return Se[Ue]=ve,Se}function ks(S,i,u,p=5){if(S instanceof Error){if(S instanceof Q){u.errorCode=S.errorCode,u.subErrorCode=S.subError,(S instanceof Nt||S instanceof Nn)&&(u.serverErrorNo=S.errorNo);return}else if(S instanceof ki){u.errorCode=S.errorCode;return}else if(u.errorStack?.length){i.trace("PerformanceClient.addErrorStack: Stack already exist",u.correlationId);return}else if(!S.stack?.length){i.trace("PerformanceClient.addErrorStack: Input stack is empty",u.correlationId);return}}else{i.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",u.correlationId);return}S.stack&&(u.errorStack=eu(S.stack,p)),u.errorName=S.name}function eu(S,i){if(i<0)return[];const u=S.split(`
`)||[],p=[],w=u[0];w.startsWith("TypeError: Cannot read property")||w.startsWith("TypeError: Cannot read properties of")||w.startsWith("TypeError: Cannot set property")||w.startsWith("TypeError: Cannot set properties of")||w.endsWith("is not a function")?p.push(tu(w)):(w.startsWith("SyntaxError")||w.startsWith("TypeError"))&&p.push(tu(w.replace(/['].*[']|["].*["]/g,"<redacted>")));for(let T=1;T<u.length&&!(p.length>=i);T++){const R=u[T];p.push(tu(R))}return p}function tu(S){const i=S.lastIndexOf(" ")+1;if(i<1)return S;const u=S.substring(i);let p=u.lastIndexOf("/");return p=p<0?u.lastIndexOf("\\"):p,p>=0?(S.substring(0,i)+"("+u.substring(p+1)+(u.charAt(u.length-1)===")"?"":")")).trimStart():S.trimStart()}function zf(S){const i=S?.idTokenClaims;if(i?.tfp||i?.acr)return"B2C";if(i?.tid){if(i?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}class nu{constructor(i,u,p,w,T,R,j,K){this.authority=u,this.libraryName=w,this.libraryVersion=T,this.applicationTelemetry=R,this.clientId=i,this.logger=p,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=j||new Set;for(const te of id)this.intFields.add(te);this.abbreviations=K||new Map;for(const[te,ve]of vs)this.abbreviations.set(te,ve)}startPerformanceMeasurement(i,u){return{}}getPreQueueTime(i,u){const p=this.preQueueTimeByCorrelationId.get(u);if(p){if(p.name!==i){this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${i}, unable to add queue measurement`);return}}else{this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${u}, unable to add queue measurement`);return}return p.time}calculateQueuedTime(i,u){return i<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${i}`),0):u<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${u}`),0):u<i?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):u-i}addQueueMeasurement(i,u,p,w){if(!u){this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${i}, cannot add queue measurement`);return}if(p===0)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${i} is ${p}`);else if(!p){this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${i}`);return}const T={eventName:i,queueTime:w?0:p,manuallyCompleted:w},R=this.queueMeasurements.get(u);if(R)R.push(T),this.queueMeasurements.set(u,R);else{this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${u} to queue measurements`);const j=[T];this.queueMeasurements.set(u,j)}this.preQueueTimeByCorrelationId.delete(u)}startMeasurement(i,u){const p=u||this.generateId();u||this.logger.info(`PerformanceClient: No correlation id provided for ${i}, generating`,p),this.logger.trace(`PerformanceClient: Performance measurement started for ${i}`,p);const w={eventId:this.generateId(),status:Bl.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:i,startTimeMs:Date.now(),correlationId:p,appName:this.applicationTelemetry?.appName,appVersion:this.applicationTelemetry?.appVersion};return this.cacheEventByCorrelationId(w),Bf(w,this.abbreviations,this.eventStack.get(p)),{end:(T,R,j)=>this.endMeasurement({...w,...T},R,j),discard:()=>this.discardMeasurements(w.correlationId),add:T=>this.addFields(T,w.correlationId),increment:T=>this.incrementFields(T,w.correlationId),event:w,measurement:new sd}}endMeasurement(i,u,p){const w=this.eventsByCorrelationId.get(i.correlationId);if(!w)return this.logger.trace(`PerformanceClient: Measurement not found for ${i.eventId}`,i.correlationId),null;const T=i.eventId===w.eventId;let R={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};i.durationMs=Math.round(i.durationMs||this.getDurationMs(i.startTimeMs));const j=JSON.stringify(_s(i,this.abbreviations,this.eventStack.get(w.correlationId),u));if(T?(R=this.getQueueInfo(i.correlationId),this.discardMeasurements(w.correlationId)):w.incompleteSubMeasurements?.delete(i.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${i.name}: ${i.durationMs} ms`,i.correlationId),u&&ks(u,this.logger,w),!T)return w[i.name+"DurationMs"]=Math.floor(i.durationMs),{...w};T&&!u&&(w.errorCode||w.subErrorCode)&&(this.logger.trace(`PerformanceClient: Remove error and sub-error codes for root event ${i.name} as intermediate error was successfully handled`,i.correlationId),w.errorCode=void 0,w.subErrorCode=void 0);let K={...w,...i},te=0;return K.incompleteSubMeasurements?.forEach(ve=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${ve.name} found for ${i.name}`,K.correlationId),te++}),K.incompleteSubMeasurements=void 0,K={...K,queuedTimeMs:R.totalQueueTime,queuedCount:R.totalQueueCount,queuedManuallyCompletedCount:R.manuallyCompletedCount,status:Bl.Completed,incompleteSubsCount:te,context:j},p&&(K.accountType=zf(p),K.dataBoundary=p.dataBoundary),this.truncateIntegralFields(K),this.emitEvents([K],i.correlationId),K}addFields(i,u){this.logger.trace("PerformanceClient: Updating static fields");const p=this.eventsByCorrelationId.get(u);p?this.eventsByCorrelationId.set(u,{...p,...i}):this.logger.trace("PerformanceClient: Event not found for",u)}incrementFields(i,u){this.logger.trace("PerformanceClient: Updating counters");const p=this.eventsByCorrelationId.get(u);if(p)for(const w in i){if(!p.hasOwnProperty(w))p[w]=0;else if(isNaN(Number(p[w])))return;p[w]+=i[w]}else this.logger.trace("PerformanceClient: Event not found for",u)}cacheEventByCorrelationId(i){const u=this.eventsByCorrelationId.get(i.correlationId);u?(this.logger.trace(`PerformanceClient: Performance measurement for ${i.name} added/updated`,i.correlationId),u.incompleteSubMeasurements=u.incompleteSubMeasurements||new Map,u.incompleteSubMeasurements.set(i.eventId,{name:i.name,startTimeMs:i.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${i.name} started`,i.correlationId),this.eventsByCorrelationId.set(i.correlationId,{...i}),this.eventStack.set(i.correlationId,[]))}getQueueInfo(i){const u=this.queueMeasurements.get(i);u||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${i}`);let p=0,w=0,T=0;return u?.forEach(R=>{p+=R.queueTime,w++,T+=R.manuallyCompleted?1:0}),{totalQueueTime:p,totalQueueCount:w,manuallyCompletedCount:T}}discardMeasurements(i){this.logger.trace("PerformanceClient: Performance measurements discarded",i),this.eventsByCorrelationId.delete(i),this.logger.trace("PerformanceClient: QueueMeasurements discarded",i),this.queueMeasurements.delete(i),this.logger.trace("PerformanceClient: Pre-queue times discarded",i),this.preQueueTimeByCorrelationId.delete(i),this.logger.trace("PerformanceClient: Event stack discarded",i),this.eventStack.delete(i)}addPerformanceCallback(i){for(const[p,w]of this.callbacks)if(w.toString()===i.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${p}`),p;const u=this.generateId();return this.callbacks.set(u,i),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${u}`),u}removePerformanceCallback(i){const u=this.callbacks.delete(i);return u?this.logger.verbose(`PerformanceClient: Performance callback ${i} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${i} not removed.`),u}emitEvents(i,u){this.logger.verbose("PerformanceClient: Emitting performance events",u),this.callbacks.forEach((p,w)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${w}`,u),p.apply(null,[i])})}truncateIntegralFields(i){this.intFields.forEach(u=>{u in i&&typeof i[u]=="number"&&(i[u]=Math.floor(i[u]))})}getDurationMs(i){const u=Date.now()-i;return u<0?u:0}}const ei="pkce_not_created",ru="ear_jwk_empty",Pd="ear_jwe_empty",_o="crypto_nonexistent",ti="empty_navigate_uri",Ic="hash_empty_error",Is="no_state_in_hash",ba="hash_does_not_contain_known_properties",ao="unable_to_parse_state",dt="state_interaction_type_mismatch",kt="interaction_in_progress",cn="popup_window_error",Rs="empty_window_error",qr="user_cancelled",ni="monitor_popup_timeout",Ns="monitor_window_timeout",ji="redirect_in_iframe",ri="block_iframe_reload",ou="block_nested_popups",ln="iframe_closed_prematurely",Li="silent_logout_unsupported",xa="no_account_error",iu="silent_prompt_value_error",Rc="no_token_request_cache_error",su="unable_to_parse_token_request_cache_error",Nc="auth_request_not_set_error",Oc="invalid_cache_type",Ui="non_browser_environment",pn="database_not_open",Qt="no_network_connectivity",Ea="post_request_failed",Hi="get_request_failed",Bi="failed_to_parse_response",Aa="unable_to_load_token",kr="crypto_key_not_found",Os="auth_code_required",Ta="auth_code_or_nativeAccountId_required",Sa="spa_code_and_nativeAccountId_present",_a="database_unavailable",Mc="unable_to_acquire_token_from_native_platform",Pc="native_handshake_timeout",Dc="native_extension_not_installed",ka="native_connection_not_established",zi="uninitialized_public_client_application",Ia="native_prompt_not_supported",jc="invalid_base64_string",au="invalid_pop_token_request",Dd="failed_to_build_headers",jd="failed_to_parse_headers",Lc="failed_to_decrypt_ear_response",Ra="timed_out";var sp=Object.freeze({__proto__:null,authCodeOrNativeAccountIdRequired:Ta,authCodeRequired:Os,authRequestNotSetError:Nc,blockIframeReload:ri,blockNestedPopups:ou,cryptoKeyNotFound:kr,cryptoNonExistent:_o,databaseNotOpen:pn,databaseUnavailable:_a,earJweEmpty:Pd,earJwkEmpty:ru,emptyNavigateUri:ti,emptyWindowError:Rs,failedToBuildHeaders:Dd,failedToDecryptEarResponse:Lc,failedToParseHeaders:jd,failedToParseResponse:Bi,getRequestFailed:Hi,hashDoesNotContainKnownProperties:ba,hashEmptyError:Ic,iframeClosedPrematurely:ln,interactionInProgress:kt,invalidBase64String:jc,invalidCacheType:Oc,invalidPopTokenRequest:au,monitorPopupTimeout:ni,monitorWindowTimeout:Ns,nativeConnectionNotEstablished:ka,nativeExtensionNotInstalled:Dc,nativeHandshakeTimeout:Pc,nativePromptNotSupported:Ia,noAccountError:xa,noNetworkConnectivity:Qt,noStateInHash:Is,noTokenRequestCacheError:Rc,nonBrowserEnvironment:Ui,pkceNotCreated:ei,popupWindowError:cn,postRequestFailed:Ea,redirectInIframe:ji,silentLogoutUnsupported:Li,silentPromptValueError:iu,spaCodeAndNativeAccountIdPresent:Sa,stateInteractionTypeMismatch:dt,timedOut:Ra,unableToAcquireTokenFromNativePlatform:Mc,unableToLoadToken:Aa,unableToParseState:ao,unableToParseTokenRequestCacheError:su,uninitializedPublicClientApplication:zi,userCancelled:qr});const oi="For more visit: aka.ms/msaljs/browser-errors",st={[ei]:"The PKCE code challenge and verifier could not be generated.",[ru]:"No EAR encryption key provided. This is unexpected.",[Pd]:"Server response does not contain ear_jwe property. This is unexpected.",[_o]:"The crypto object or function is not available.",[ti]:"Navigation URI is empty. Please check stack trace for more info.",[Ic]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${oi}`,[Is]:"Hash does not contain state. Please verify that the request originated from msal.",[ba]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${oi}`,[ao]:"Unable to parse state. Please verify that the request originated from msal.",[dt]:"Hash contains state but the interaction type does not match the caller.",[kt]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${oi}`,[cn]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Rs]:"window.open returned null or undefined window object.",[qr]:"User cancelled the flow.",[ni]:`Token acquisition in popup failed due to timeout.  ${oi}`,[Ns]:`Token acquisition in iframe failed due to timeout.  ${oi}`,[ji]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[ri]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${oi}`,[ou]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[ln]:"The iframe being monitored was closed prematurely.",[Li]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[xa]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[iu]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Rc]:"No token request found in cache.",[su]:"The cached token request could not be parsed.",[Nc]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Oc]:"Invalid cache type",[Ui]:"Login and token requests are not supported in non-browser environments.",[pn]:"Database is not open!",[Qt]:"No network connectivity. Check your internet connection.",[Ea]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Hi]:"Network request failed. Please check the network trace to determine root cause.",[Bi]:"Failed to parse network response. Check network trace.",[Aa]:"Error loading token to cache.",[kr]:"Cryptographic Key or Keypair not found in browser storage.",[Os]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ta]:"An authorization code or nativeAccountId must be provided to this flow.",[Sa]:"Request cannot contain both spa code and native account id.",[_a]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Mc]:`Unable to acquire token from native platform.  ${oi}`,[Pc]:"Timed out while attempting to establish connection to browser extension",[Dc]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ka]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${oi}`,[zi]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${oi}`,[Ia]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[jc]:"Invalid base64 encoded string.",[au]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Dd]:"Failed to build request headers object.",[jd]:"Failed to parse response headers",[Lc]:"Failed to decrypt ear response",[Ra]:"The request timed out."},ap={pkceNotGenerated:{code:ei,desc:st[ei]},cryptoDoesNotExist:{code:_o,desc:st[_o]},emptyNavigateUriError:{code:ti,desc:st[ti]},hashEmptyError:{code:Ic,desc:st[Ic]},hashDoesNotContainStateError:{code:Is,desc:st[Is]},hashDoesNotContainKnownPropertiesError:{code:ba,desc:st[ba]},unableToParseStateError:{code:ao,desc:st[ao]},stateInteractionTypeMismatchError:{code:dt,desc:st[dt]},interactionInProgress:{code:kt,desc:st[kt]},popupWindowError:{code:cn,desc:st[cn]},emptyWindowError:{code:Rs,desc:st[Rs]},userCancelledError:{code:qr,desc:st[qr]},monitorPopupTimeoutError:{code:ni,desc:st[ni]},monitorIframeTimeoutError:{code:Ns,desc:st[Ns]},redirectInIframeError:{code:ji,desc:st[ji]},blockTokenRequestsInHiddenIframeError:{code:ri,desc:st[ri]},blockAcquireTokenInPopupsError:{code:ou,desc:st[ou]},iframeClosedPrematurelyError:{code:ln,desc:st[ln]},silentLogoutUnsupportedError:{code:Li,desc:st[Li]},noAccountError:{code:xa,desc:st[xa]},silentPromptValueError:{code:iu,desc:st[iu]},noTokenRequestCacheError:{code:Rc,desc:st[Rc]},unableToParseTokenRequestCacheError:{code:su,desc:st[su]},authRequestNotSet:{code:Nc,desc:st[Nc]},invalidCacheType:{code:Oc,desc:st[Oc]},notInBrowserEnvironment:{code:Ui,desc:st[Ui]},databaseNotOpen:{code:pn,desc:st[pn]},noNetworkConnectivity:{code:Qt,desc:st[Qt]},postRequestFailed:{code:Ea,desc:st[Ea]},getRequestFailed:{code:Hi,desc:st[Hi]},failedToParseNetworkResponse:{code:Bi,desc:st[Bi]},unableToLoadTokenError:{code:Aa,desc:st[Aa]},signingKeyNotFoundInStorage:{code:kr,desc:st[kr]},authCodeRequired:{code:Os,desc:st[Os]},authCodeOrNativeAccountRequired:{code:Ta,desc:st[Ta]},spaCodeAndNativeAccountPresent:{code:Sa,desc:st[Sa]},databaseUnavailable:{code:_a,desc:st[_a]},unableToAcquireTokenFromNativePlatform:{code:Mc,desc:st[Mc]},nativeHandshakeTimeout:{code:Pc,desc:st[Pc]},nativeExtensionNotInstalled:{code:Dc,desc:st[Dc]},nativeConnectionNotEstablished:{code:ka,desc:st[ka]},uninitializedPublicClientApplication:{code:zi,desc:st[zi]},nativePromptNotSupported:{code:Ia,desc:st[Ia]},invalidBase64StringError:{code:jc,desc:st[jc]},invalidPopTokenRequest:{code:au,desc:st[au]}};class Na extends Q{constructor(i,u){super(i,st[i],u),Object.setPrototypeOf(this,Na.prototype),this.name="BrowserAuthError"}}function He(S,i){return new Na(S,i)}const or={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Xn={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Ms={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},yn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},cu={GET:"GET",POST:"POST"},co={SIGNIN:"signin",SIGNOUT:"signout"},Sn={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},lu={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Pt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};t.InteractionType=void 0,(function(S){S.Redirect="redirect",S.Popup="popup",S.Silent="silent",S.None="none"})(t.InteractionType||(t.InteractionType={}));const ir={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},Ld={scopes:s},Ff="jwk",Kf={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Ud="msal.db",cp=1,Gf=`${Ud}.keys`,_n={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},lp=[_n.Default,_n.Skip,_n.RefreshTokenAndNetwork];function Hd(S){return encodeURIComponent(Uc(S).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function ii(S){return qf(S).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Uc(S){return qf(new TextEncoder().encode(S))}function qf(S){const i=Array.from(S,u=>String.fromCodePoint(u)).join("");return btoa(i)}function $r(S){return new TextDecoder().decode(Fi(S))}function Fi(S){let i=S.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw He(jc)}const u=atob(i);return Uint8Array.from(u,p=>p.codePointAt(0)||0)}const up="RSASSA-PKCS1-v1_5",Hc="AES-GCM",dp="HKDF",Bd="SHA-256",uu=2048,$f=new Uint8Array([1,0,1]),du="0123456789abcdef",Vf=new Uint32Array(1),zd="raw",hu="encrypt",Fd="decrypt",hp="deriveKey",Sw="crypto_subtle_undefined",Ps={name:up,hash:Bd,modulusLength:uu,publicExponent:$f};function fu(S){if(!window)throw He(Ui);if(!window.crypto)throw He(_o);if(!S&&!window.crypto.subtle)throw He(_o,Sw)}async function mu(S,i,u){i?.addQueueMeasurement(q.Sha256Digest,u);const w=new TextEncoder().encode(S);return window.crypto.subtle.digest(Bd,w)}function gu(S){return window.crypto.getRandomValues(S)}function Bc(){return window.crypto.getRandomValues(Vf),Vf[0]}function sr(){const S=Date.now(),i=Bc()*1024+(Bc()&1023),u=new Uint8Array(16),p=Math.trunc(i/2**30),w=i&2**30-1,T=Bc();u[0]=S/2**40,u[1]=S/2**32,u[2]=S/2**24,u[3]=S/2**16,u[4]=S/2**8,u[5]=S,u[6]=112|p>>>8,u[7]=p,u[8]=128|w>>>24,u[9]=w>>>16,u[10]=w>>>8,u[11]=w,u[12]=T>>>24,u[13]=T>>>16,u[14]=T>>>8,u[15]=T;let R="";for(let j=0;j<u.length;j++)R+=du.charAt(u[j]>>>4),R+=du.charAt(u[j]&15),(j===3||j===5||j===7||j===9)&&(R+="-");return R}async function fp(S,i){return window.crypto.subtle.generateKey(Ps,S,i)}async function Ds(S){return window.crypto.subtle.exportKey(Ff,S)}async function mp(S,i,u){return window.crypto.subtle.importKey(Ff,S,Ps,i,u)}async function lo(S,i){return window.crypto.subtle.sign(Ps,S,i)}async function uo(){const S=await Ki(),u={alg:"dir",kty:"oct",k:ii(new Uint8Array(S))};return Uc(JSON.stringify(u))}async function js(S){const i=$r(S),p=JSON.parse(i).k,w=Fi(p);return window.crypto.subtle.importKey(zd,w,Hc,!1,[Fd])}async function gp(S,i){const u=i.split(".");if(u.length!==5)throw He(Lc,"jwe_length");const p=await js(S).catch(()=>{throw He(Lc,"import_key")});try{const w=new TextEncoder().encode(u[0]),T=Fi(u[2]),R=Fi(u[3]),j=Fi(u[4]),K=j.byteLength*8,te=new Uint8Array(R.length+j.length);te.set(R),te.set(j,R.length);const ve=await window.crypto.subtle.decrypt({name:Hc,iv:T,tagLength:K,additionalData:w},p,te);return new TextDecoder().decode(ve)}catch{throw He(Lc,"decrypt")}}async function Ki(){const S=await window.crypto.subtle.generateKey({name:Hc,length:256},!0,[hu,Fd]);return window.crypto.subtle.exportKey(zd,S)}async function si(S){return window.crypto.subtle.importKey(zd,S,dp,!1,[hp])}async function On(S,i,u){return window.crypto.subtle.deriveKey({name:dp,salt:i,hash:Bd,info:new TextEncoder().encode(u)},S,{name:Hc,length:256},!1,[hu,Fd])}async function Kd(S,i,u){const p=new TextEncoder().encode(i),w=window.crypto.getRandomValues(new Uint8Array(16)),T=await On(S,w,u),R=await window.crypto.subtle.encrypt({name:Hc,iv:new Uint8Array(12)},T,p);return{data:ii(new Uint8Array(R)),nonce:ii(w)}}async function Gd(S,i,u,p){const w=Fi(p),T=await On(S,Fi(i),u),R=await window.crypto.subtle.decrypt({name:Hc,iv:new Uint8Array(12)},T,w);return new TextDecoder().decode(R)}async function qd(S){const i=await mu(S),u=new Uint8Array(i);return ii(u)}const Oa="storage_not_supported",vn="stubbed_public_client_application_called",ko="in_mem_redirect_unavailable";var $d=Object.freeze({__proto__:null,inMemRedirectUnavailable:ko,storageNotSupported:Oa,stubbedPublicClientApplicationCalled:vn});const pu={[Oa]:"Given storage configuration option was not supported.",[vn]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ko]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},pp={storageNotSupportedError:{code:Oa,desc:pu[Oa]},stubPcaInstanceCalled:{code:vn,desc:pu[vn]},inMemRedirectUnavailable:{code:ko,desc:pu[ko]}};class yu extends Q{constructor(i,u){super(i,u),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,yu.prototype)}}function dn(S){return new yu(S,pu[S])}function Vd(S){S.location.hash="",typeof S.history.replaceState=="function"&&S.history.replaceState(null,"",`${S.location.origin}${S.location.pathname}${S.location.search}`)}function Yd(S){const i=S.split("#");i.shift(),window.location.hash=i.length>0?i.join("#"):""}function vu(){return window.parent!==window}function Yf(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${or.POPUP_NAME_PREFIX}.`)===0}function ai(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Qf(){const i=new _t(window.location.href).getUrlComponents();return`${i.Protocol}//${i.HostNameAndPort}/`}function Un(){if(_t.hashContainsKnownProperties(window.location.hash)&&vu())throw He(ri)}function zn(S){if(vu()&&!S)throw He(ji)}function Wf(){if(Yf())throw He(ou)}function Ot(){if(typeof window>"u")throw He(Ui)}function It(S){if(!S)throw He(zi)}function Cu(S){Ot(),Un(),Wf(),It(S)}function Qd(S,i){if(Cu(S),zn(i.system.allowRedirectInIframe),i.cache.cacheLocation===yn.MemoryStorage&&!i.cache.storeAuthStateInCookie)throw dn(ko)}function zc(S){const i=document.createElement("link");i.rel="preconnect",i.href=new URL(S).origin,i.crossOrigin="anonymous",document.head.appendChild(i),window.setTimeout(()=>{try{document.head.removeChild(i)}catch{}},1e4)}function Wd(){return sr()}var yp=Object.freeze({__proto__:null,addClientCapabilitiesToClaims:Ed,blockAPICallsBeforeInitialize:It,blockAcquireTokenInPopups:Wf,blockNonBrowserEnvironment:Ot,blockRedirectInIframe:zn,blockReloadInHiddenIframes:Un,clearHash:Vd,createGuid:Wd,getCurrentUri:ai,getHomepage:Qf,invoke:Qn,invokeAsync:Ae,isInIframe:vu,isInPopup:Yf,preconnect:zc,preflightCheck:Cu,redirectPreflightCheck:Qd,replaceHash:Yd});class Fc{navigateInternal(i,u){return Fc.defaultNavigateWindow(i,u)}navigateExternal(i,u){return Fc.defaultNavigateWindow(i,u)}static defaultNavigateWindow(i,u){return u.noHistory?window.location.replace(i):window.location.assign(i),new Promise((p,w)=>{setTimeout(()=>{w(He(Ra,"failed_to_redirect"))},u.timeout)})}}class Xf{async sendGetRequestAsync(i,u){let p,w={},T=0;const R=Xd(u);try{p=await fetch(i,{method:cu.GET,headers:R})}catch(j){throw ya(He(window.navigator.onLine?Hi:Qt),void 0,void 0,j)}w=Jd(p.headers);try{return T=p.status,{headers:w,body:await p.json(),status:T}}catch(j){throw ya(He(Bi),T,w,j)}}async sendPostRequestAsync(i,u){const p=u&&u.body||"",w=Xd(u);let T,R=0,j={};try{T=await fetch(i,{method:cu.POST,headers:w,body:p})}catch(K){throw ya(He(window.navigator.onLine?Ea:Qt),void 0,void 0,K)}j=Jd(T.headers);try{return R=T.status,{headers:j,body:await T.json(),status:R}}catch(K){throw ya(He(Bi),R,j,K)}}}function Xd(S){try{const i=new Headers;if(!(S&&S.headers))return i;const u=S.headers;return Object.entries(u).forEach(([p,w])=>{i.append(p,w)}),i}catch(i){throw ya(He(Dd),void 0,void 0,i)}}function Jd(S){try{const i={};return S.forEach((u,p)=>{i[p]=u}),i}catch{throw He(jd)}}const vp=6e4,Kc=1e4,Zd=3e4,eh=2e3;function Cp({auth:S,cache:i,system:u,telemetry:p},w){const T={clientId:e.EMPTY_STRING,authority:`${e.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:e.EMPTY_STRING,authorityMetadata:e.EMPTY_STRING,redirectUri:typeof window<"u"?ai():"",postLogoutRedirectUri:e.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Vn.AAD,OIDCOptions:{serverResponseType:b.FRAGMENT,defaultScopes:[e.OPENID_SCOPE,e.PROFILE_SCOPE,e.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:cc.None,tenant:e.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},R={cacheLocation:yn.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:yn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(i&&i.cacheLocation===yn.LocalStorage),claimsBasedCachingEnabled:!1},j={loggerCallback:()=>{},logLevel:t.LogLevel.Info,piiLoggingEnabled:!1},te={...{...zl,loggerOptions:j,networkClient:w?new Xf:Tw,navigationClient:new Fc,loadFrameTimeout:0,windowHashTimeout:u?.loadFrameTimeout||vp,iframeHashTimeout:u?.loadFrameTimeout||Kc,navigateFrameWait:0,redirectNavigationTimeout:Zd,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:u?.nativeBrokerHandshakeTimeout||eh,pollIntervalMilliseconds:or.DEFAULT_POLL_INTERVAL_MS},...u,loggerOptions:u?.loggerOptions||j},ve={application:{appName:e.EMPTY_STRING,appVersion:e.EMPTY_STRING},client:new ha};if(S?.protocolMode!==Vn.OIDC&&S?.OIDCOptions&&new Ln(te.loggerOptions).warning(JSON.stringify(St(hr))),S?.protocolMode&&S.protocolMode===Vn.OIDC&&te?.allowPlatformBroker)throw St(Ai);return{auth:{...T,...S,OIDCOptions:{...T.OIDCOptions,...S?.OIDCOptions}},cache:{...R,...i},system:te,telemetry:{...ve,...p}}}const Ma="@azure/msal-browser",Ir="4.25.0",Kt="msal",Gc="browser",Jf="-",Gi=1,Io=1,wp=`${Kt}.${Gc}.log.level`,th=`${Kt}.${Gc}.log.pii`,wu=`${Kt}.${Gc}.performance.enabled`,hn=`${Kt}.${Gc}.platform.auth.dom`,bp=`${Kt}.version`,xp="account.keys",Zf="token.keys";function Rr(S=Io){return S<1?`${Kt}.${xp}`:`${Kt}.${S}.${xp}`}function Nr(S,i=Gi){return i<1?`${Kt}.${Zf}.${S}`:`${Kt}.${i}.${Zf}.${S}`}class qc{static loggerCallback(i,u){switch(i){case t.LogLevel.Error:console.error(u);return;case t.LogLevel.Info:console.info(u);return;case t.LogLevel.Verbose:console.debug(u);return;case t.LogLevel.Warning:console.warn(u);return;default:console.log(u);return}}constructor(i){this.browserEnvironment=typeof window<"u",this.config=Cp(i,this.browserEnvironment);let u;try{u=window[yn.SessionStorage]}catch{}const p=u?.getItem(wp),w=u?.getItem(th)?.toLowerCase(),T=w==="true"?!0:w==="false"?!1:void 0,R={...this.config.system.loggerOptions},j=p&&Object.keys(t.LogLevel).includes(p)?t.LogLevel[p]:void 0;j&&(R.loggerCallback=qc.loggerCallback,R.logLevel=j),T!==void 0&&(R.piiLoggingEnabled=T),this.logger=new Ln(R,Ma,Ir),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}const ci={UserInteractionRequired:"USER_INTERACTION_REQUIRED",UserCancel:"USER_CANCEL",NoNetwork:"NO_NETWORK",TransientError:"TRANSIENT_ERROR",PersistentError:"PERSISTENT_ERROR",Disabled:"DISABLED",AccountUnavailable:"ACCOUNT_UNAVAILABLE",NestedAppAuthUnavailable:"NESTED_APP_AUTH_UNAVAILABLE"};class Hn{static async initializeNestedAppAuthBridge(){if(window===void 0)throw new Error("window is undefined");if(window.nestedAppAuthBridge===void 0)throw new Error("window.nestedAppAuthBridge is undefined");try{window.nestedAppAuthBridge.addEventListener("message",u=>{const p=typeof u=="string"?u:u.data,w=JSON.parse(p),T=Hn.bridgeRequests.find(R=>R.requestId===w.requestId);T!==void 0&&(Hn.bridgeRequests.splice(Hn.bridgeRequests.indexOf(T),1),w.success?T.resolve(w):T.reject(w.error))});const i=await new Promise((u,p)=>{const w=Hn.buildRequest("GetInitContext"),T={requestId:w.requestId,method:w.method,resolve:u,reject:p};Hn.bridgeRequests.push(T),window.nestedAppAuthBridge.postMessage(JSON.stringify(w))});return Hn.validateBridgeResultOrThrow(i.initContext)}catch(i){throw window.console.log(i),i}}getTokenInteractive(i){return this.getToken("GetTokenPopup",i)}getTokenSilent(i){return this.getToken("GetToken",i)}async getToken(i,u){const p=await this.sendRequest(i,{tokenParams:u});return{token:Hn.validateBridgeResultOrThrow(p.token),account:Hn.validateBridgeResultOrThrow(p.account)}}getHostCapabilities(){return this.capabilities??null}getAccountContext(){return this.accountContext?this.accountContext:null}static buildRequest(i,u){return{messageType:"NestedAppAuthRequest",method:i,requestId:sr(),sendTime:Date.now(),clientLibrary:or.MSAL_SKU,clientLibraryVersion:Ir,...u}}sendRequest(i,u){const p=Hn.buildRequest(i,u);return new Promise((T,R)=>{const j={requestId:p.requestId,method:p.method,resolve:T,reject:R};Hn.bridgeRequests.push(j),window.nestedAppAuthBridge.postMessage(JSON.stringify(p))})}static validateBridgeResultOrThrow(i){if(i===void 0)throw{status:ci.NestedAppAuthUnavailable};return i}constructor(i,u,p,w){this.sdkName=i,this.sdkVersion=u,this.accountContext=p,this.capabilities=w}static async create(){const i=await Hn.initializeNestedAppAuthBridge();return new Hn(i.sdkName,i.sdkVersion,i.accountContext,i.capabilities)}}Hn.bridgeRequests=[];class ar extends qc{constructor(){super(...arguments),this.bridgeProxy=void 0,this.accountContext=null}getModuleName(){return ar.MODULE_NAME}getId(){return ar.ID}getBridgeProxy(){return this.bridgeProxy}async initialize(){try{if(typeof window<"u"){typeof window.__initializeNestedAppAuth=="function"&&await window.__initializeNestedAppAuth();const i=await Hn.create();this.accountContext=i.getAccountContext(),this.bridgeProxy=i,this.available=i!==void 0}}catch(i){this.logger.infoPii(`Could not initialize Nested App Auth bridge (${i})`)}return this.logger.info(`Nested App Auth Bridge available: ${this.available}`),this.available}}ar.MODULE_NAME="",ar.ID="NestedAppOperatingContext";class qi extends qc{getModuleName(){return qi.MODULE_NAME}getId(){return qi.ID}async initialize(){return this.available=typeof window<"u",this.available}}qi.MODULE_NAME="",qi.ID="StandardOperatingContext";class em{constructor(){this.dbName=Ud,this.version=cp,this.tableName=Gf,this.dbOpen=!1}async open(){return new Promise((i,u)=>{const p=window.indexedDB.open(this.dbName,this.version);p.addEventListener("upgradeneeded",w=>{w.target.result.createObjectStore(this.tableName)}),p.addEventListener("success",w=>{const T=w;this.db=T.target.result,this.dbOpen=!0,i()}),p.addEventListener("error",()=>u(He(_a)))})}closeConnection(){const i=this.db;i&&this.dbOpen&&(i.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(i){return await this.validateDbIsOpen(),new Promise((u,p)=>{if(!this.db)return p(He(pn));const R=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(i);R.addEventListener("success",j=>{const K=j;this.closeConnection(),u(K.target.result)}),R.addEventListener("error",j=>{this.closeConnection(),p(j)})})}async setItem(i,u){return await this.validateDbIsOpen(),new Promise((p,w)=>{if(!this.db)return w(He(pn));const j=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(u,i);j.addEventListener("success",()=>{this.closeConnection(),p()}),j.addEventListener("error",K=>{this.closeConnection(),w(K)})})}async removeItem(i){return await this.validateDbIsOpen(),new Promise((u,p)=>{if(!this.db)return p(He(pn));const R=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(i);R.addEventListener("success",()=>{this.closeConnection(),u()}),R.addEventListener("error",j=>{this.closeConnection(),p(j)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((i,u)=>{if(!this.db)return u(He(pn));const T=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();T.addEventListener("success",R=>{const j=R;this.closeConnection(),i(j.target.result)}),T.addEventListener("error",R=>{this.closeConnection(),u(R)})})}async containsKey(i){return await this.validateDbIsOpen(),new Promise((u,p)=>{if(!this.db)return p(He(pn));const R=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(i);R.addEventListener("success",j=>{const K=j;this.closeConnection(),u(K.target.result===1)}),R.addEventListener("error",j=>{this.closeConnection(),p(j)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((i,u)=>{const p=window.indexedDB.deleteDatabase(Ud),w=setTimeout(()=>u(!1),200);p.addEventListener("success",()=>(clearTimeout(w),i(!0))),p.addEventListener("blocked",()=>(clearTimeout(w),i(!0))),p.addEventListener("error",()=>(clearTimeout(w),u(!1)))})}}class $c{constructor(){this.cache=new Map}async initialize(){}getItem(i){return this.cache.get(i)||null}getUserData(i){return this.getItem(i)}setItem(i,u){this.cache.set(i,u)}async setUserData(i,u){this.setItem(i,u)}removeItem(i){this.cache.delete(i)}getKeys(){const i=[];return this.cache.forEach((u,p)=>{i.push(p)}),i}containsKey(i){return this.cache.has(i)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class tm{constructor(i){this.inMemoryCache=new $c,this.indexedDBCache=new em,this.logger=i}handleDatabaseAccessError(i){if(i instanceof Na&&i.errorCode===_a)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw i}async getItem(i){const u=this.inMemoryCache.getItem(i);if(!u)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(i)}catch(p){this.handleDatabaseAccessError(p)}return u}async setItem(i,u){this.inMemoryCache.setItem(i,u);try{await this.indexedDBCache.setItem(i,u)}catch(p){this.handleDatabaseAccessError(p)}}async removeItem(i){this.inMemoryCache.removeItem(i);try{await this.indexedDBCache.removeItem(i)}catch(u){this.handleDatabaseAccessError(u)}}async getKeys(){const i=this.inMemoryCache.getKeys();if(i.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(u){this.handleDatabaseAccessError(u)}return i}async containsKey(i){const u=this.inMemoryCache.containsKey(i);if(!u)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(i)}catch(p){this.handleDatabaseAccessError(p)}return u}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const i=await this.indexedDBCache.deleteDatabase();return i&&this.logger.verbose("Persistent keystore deleted"),i}catch(i){return this.handleDatabaseAccessError(i),!1}}}class Or{constructor(i,u,p){this.logger=i,fu(p??!1),this.cache=new tm(this.logger),this.performanceClient=u}createNewGuid(){return sr()}base64Encode(i){return Uc(i)}base64Decode(i){return $r(i)}base64UrlEncode(i){return Hd(i)}encodeKid(i){return this.base64UrlEncode(JSON.stringify({kid:i}))}async getPublicKeyThumbprint(i){const u=this.performanceClient?.startMeasurement(q.CryptoOptsGetPublicKeyThumbprint,i.correlationId),p=await fp(Or.EXTRACTABLE,Or.POP_KEY_USAGES),w=await Ds(p.publicKey),T={e:w.e,kty:w.kty,n:w.n},R=bu(T),j=await this.hashString(R),K=await Ds(p.privateKey),te=await mp(K,!1,["sign"]);return await this.cache.setItem(j,{privateKey:te,publicKey:p.publicKey,requestMethod:i.resourceRequestMethod,requestUri:i.resourceRequestUri}),u&&u.end({success:!0}),j}async removeTokenBindingKey(i){if(await this.cache.removeItem(i),await this.cache.containsKey(i))throw Ie(bi)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(i){return i instanceof Error?this.logger.error(`Clearing keystore failed with error: ${i.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(i,u,p,w){const T=this.performanceClient?.startMeasurement(q.CryptoOptsSignJwt,w),R=await this.cache.getItem(u);if(!R)throw He(kr);const j=await Ds(R.publicKey),K=bu(j),te=Hd(JSON.stringify({kid:u})),ve=Zl.getShrHeaderString({...p?.header,alg:j.alg,kid:te}),Se=Hd(ve);i.cnf={jwk:JSON.parse(K)};const Ue=Hd(JSON.stringify(i)),Qe=`${Se}.${Ue}`,zt=new TextEncoder().encode(Qe),mr=await lo(R.privateKey,zt),Wi=ii(new Uint8Array(mr)),gr=`${Qe}.${Wi}`;return T&&T.end({success:!0}),gr}async hashString(i){return qd(i)}}Or.POP_KEY_USAGES=["sign","verify"],Or.EXTRACTABLE=!0;function bu(S){return JSON.stringify(S,Object.keys(S).sort())}const Ep=1440*60*1e3,Ro={Lax:"Lax",None:"None"};class Cn{initialize(){return Promise.resolve()}getItem(i){const u=`${encodeURIComponent(i)}`,p=document.cookie.split(";");for(let w=0;w<p.length;w++){const T=p[w],[R,...j]=decodeURIComponent(T).trim().split("="),K=j.join("=");if(R===u)return K}return""}getUserData(){throw Ie(ct)}setItem(i,u,p,w=!0,T=Ro.Lax){let R=`${encodeURIComponent(i)}=${encodeURIComponent(u)};path=/;SameSite=${T};`;if(p){const j=nm(p);R+=`expires=${j};`}(w||T===Ro.None)&&(R+="Secure;"),document.cookie=R}async setUserData(){return Promise.reject(Ie(ct))}removeItem(i){this.setItem(i,"",-1)}getKeys(){const i=document.cookie.split(";"),u=[];return i.forEach(p=>{const w=decodeURIComponent(p).trim().split("=");u.push(w[0])}),u}containsKey(i){return this.getKeys().includes(i)}decryptData(){return Promise.resolve(null)}}function nm(S){const i=new Date;return new Date(i.getTime()+S*Ep).toUTCString()}function Vc(S,i){const u=S.getItem(Rr(i));return u?JSON.parse(u):[]}function wn(S,i,u){const p=i.getItem(Nr(S,u));if(p){const w=JSON.parse(p);if(w&&w.hasOwnProperty("idToken")&&w.hasOwnProperty("accessToken")&&w.hasOwnProperty("refreshToken"))return w}return{idToken:[],accessToken:[],refreshToken:[]}}function rm(S){return S.hasOwnProperty("id")&&S.hasOwnProperty("nonce")&&S.hasOwnProperty("data")}const om="msal.cache.encryption",Ap="msal.broadcast.cache";class nn{constructor(i,u,p){if(!window.localStorage)throw dn(Oa);this.memoryStorage=new $c,this.initialized=!1,this.clientId=i,this.logger=u,this.performanceClient=p,this.broadcast=new BroadcastChannel(Ap)}async initialize(i){const u=new Cn,p=u.getItem(om);let w={key:"",id:""};if(p)try{w=JSON.parse(p)}catch{}if(w.key&&w.id){const T=Qn(Fi,q.Base64Decode,this.logger,this.performanceClient,i)(w.key);this.encryptionCookie={id:w.id,key:await Ae(si,q.GenerateHKDF,this.logger,this.performanceClient,i)(T)}}else{const T=sr(),R=await Ae(Ki,q.GenerateBaseKey,this.logger,this.performanceClient,i)(),j=Qn(ii,q.UrlEncodeArr,this.logger,this.performanceClient,i)(new Uint8Array(R));this.encryptionCookie={id:T,key:await Ae(si,q.GenerateHKDF,this.logger,this.performanceClient,i)(R)};const K={id:T,key:j};u.setItem(om,JSON.stringify(K),0,!0,Ro.None)}await Ae(this.importExistingCache.bind(this),q.ImportExistingCache,this.logger,this.performanceClient,i)(i),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(i){return window.localStorage.getItem(i)}getUserData(i){if(!this.initialized)throw He(zi);return this.memoryStorage.getItem(i)}async decryptData(i,u,p){if(!this.initialized||!this.encryptionCookie)throw He(zi);if(u.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},p),null;const w=await Ae(Gd,q.Decrypt,this.logger,this.performanceClient,p)(this.encryptionCookie.key,u.nonce,this.getContext(i),u.data);if(!w)return null;try{return JSON.parse(w)}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},p),null}}setItem(i,u){window.localStorage.setItem(i,u)}async setUserData(i,u,p,w){if(!this.initialized||!this.encryptionCookie)throw He(zi);const{data:T,nonce:R}=await Ae(Kd,q.Encrypt,this.logger,this.performanceClient,p)(this.encryptionCookie.key,u,this.getContext(i)),j={id:this.encryptionCookie.id,nonce:R,data:T,lastUpdatedAt:w};this.memoryStorage.setItem(i,u),this.setItem(i,JSON.stringify(j)),this.broadcast.postMessage({key:i,value:u,context:this.getContext(i)})}removeItem(i){this.memoryStorage.containsKey(i)&&(this.memoryStorage.removeItem(i),this.broadcast.postMessage({key:i,value:null,context:this.getContext(i)})),window.localStorage.removeItem(i)}getKeys(){return Object.keys(window.localStorage)}containsKey(i){return window.localStorage.hasOwnProperty(i)}clear(){this.memoryStorage.clear(),Vc(this).forEach(p=>this.removeItem(p));const u=wn(this.clientId,this);u.idToken.forEach(p=>this.removeItem(p)),u.accessToken.forEach(p=>this.removeItem(p)),u.refreshToken.forEach(p=>this.removeItem(p)),this.getKeys().forEach(p=>{(p.startsWith(Kt)||p.indexOf(this.clientId)!==-1)&&this.removeItem(p)})}async importExistingCache(i){if(!this.encryptionCookie)return;let u=Vc(this);u=await this.importArray(u,i),u.length?this.setItem(Rr(),JSON.stringify(u)):this.removeItem(Rr());const p=wn(this.clientId,this);p.idToken=await this.importArray(p.idToken,i),p.accessToken=await this.importArray(p.accessToken,i),p.refreshToken=await this.importArray(p.refreshToken,i),p.idToken.length||p.accessToken.length||p.refreshToken.length?this.setItem(Nr(this.clientId),JSON.stringify(p)):this.removeItem(Nr(this.clientId))}async getItemFromEncryptedCache(i,u){if(!this.encryptionCookie)return null;const p=this.getItem(i);if(!p)return null;let w;try{w=JSON.parse(p)}catch{return null}return rm(w)?w.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},u),null):Ae(Gd,q.Decrypt,this.logger,this.performanceClient,u)(this.encryptionCookie.key,w.nonce,this.getContext(i),w.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},u),w)}async importArray(i,u){const p=[],w=[];return i.forEach(T=>{const R=this.getItemFromEncryptedCache(T,u).then(j=>{j?(this.memoryStorage.setItem(T,j),p.push(T)):this.removeItem(T)});w.push(R)}),await Promise.all(w),p}getContext(i){let u="";return i.includes(this.clientId)&&(u=this.clientId),u}updateCache(i){this.logger.trace("Updating internal cache from broadcast event");const u=this.performanceClient.startMeasurement(q.LocalStorageUpdated);u.add({isBackground:!0});const{key:p,value:w,context:T}=i.data;if(!p){this.logger.error("Broadcast event missing key"),u.end({success:!1,errorCode:"noKey"});return}if(T&&T!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${T}`),u.end({success:!1,errorCode:"contextMismatch"});return}w?(this.memoryStorage.setItem(p,w),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(p),this.logger.verbose("Removed item from internal cache")),u.end({success:!0})}}class fr{constructor(){if(!window.sessionStorage)throw dn(Oa)}async initialize(){}getItem(i){return window.sessionStorage.getItem(i)}getUserData(i){return this.getItem(i)}setItem(i,u){window.sessionStorage.setItem(i,u)}async setUserData(i,u){this.setItem(i,u)}removeItem(i){window.sessionStorage.removeItem(i)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(i){return window.sessionStorage.hasOwnProperty(i)}decryptData(){return Promise.resolve(null)}}const Le={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function im(S,i){const u=S.indexOf(i);u>-1&&S.splice(u,1)}class Yc extends da{constructor(i,u,p,w,T,R,j){super(i,p,w,T,j),this.cacheConfig=u,this.logger=w,this.internalStorage=new $c,this.browserStorage=Tp(i,u.cacheLocation,w,T),this.temporaryCacheStorage=Tp(i,u.temporaryCacheLocation,w,T),this.cookieStorage=new Cn,this.eventHandler=R}async initialize(i){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},i),await this.browserStorage.initialize(i),await this.migrateExistingCache(i),this.trackVersionChanges(i)}async migrateExistingCache(i){const u=Vc(this.browserStorage,0),p=wn(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:u.length,oldAccessCount:p.accessToken.length,oldIdCount:p.idToken.length,oldRefreshCount:p.refreshToken.length},i);const w=Vc(this.browserStorage,1),T=wn(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:w.length,currAccessCount:T.accessToken.length,currIdCount:T.idToken.length,currRefreshCount:T.refreshToken.length},i),await Promise.all([this.updateV0ToCurrent(Io,u,w,i),this.updateV0ToCurrent(Gi,p.idToken,T.idToken,i),this.updateV0ToCurrent(Gi,p.accessToken,T.accessToken,i),this.updateV0ToCurrent(Gi,p.refreshToken,T.refreshToken,i)]),u.length>0?this.browserStorage.setItem(Rr(0),JSON.stringify(u)):this.browserStorage.removeItem(Rr(0)),w.length>0?this.browserStorage.setItem(Rr(1),JSON.stringify(w)):this.browserStorage.removeItem(Rr(1)),this.setTokenKeys(p,i,0),this.setTokenKeys(T,i,1)}async updateV0ToCurrent(i,u,p,w){const T=[];for(const R of[...u]){const j=this.browserStorage.getItem(R),K=this.validateAndParseJson(j||"");if(!K){im(u,R);continue}K.lastUpdatedAt||(K.lastUpdatedAt=Date.now().toString(),this.setItem(R,JSON.stringify(K),w));const te=rm(K)?await this.browserStorage.decryptData(R,K,w):K;let ve;if(te&&(bs(te)||Ad(te))&&(ve=te.expiresOn),!te||xw(K.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||ve&&Wo(ve,J)){this.browserStorage.removeItem(R),im(u,R),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},w);continue}if(this.cacheConfig.cacheLocation!==yn.LocalStorage||rm(K)){const Se=`${Kt}.${i}${Jf}${R}`,Ue=this.browserStorage.getItem(Se);if(Ue){const Qe=this.validateAndParseJson(Ue);if(Number(K.lastUpdatedAt)>Number(Qe.lastUpdatedAt)){T.push(this.setUserData(Se,JSON.stringify(te),w,K.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},w)}));continue}}else{T.push(this.setUserData(Se,JSON.stringify(te),w,K.lastUpdatedAt).then(()=>{p.push(Se),this.performanceClient.incrementFields({upgradedCacheCount:1},w)}));continue}}}return Promise.all(T)}trackVersionChanges(i){const u=this.browserStorage.getItem(bp);u&&(this.logger.info(`MSAL.js was last initialized by version: ${u}`),this.performanceClient.addFields({previousLibraryVersion:u},i)),u!==Ir&&this.setItem(bp,Ir,i)}validateAndParseJson(i){if(!i)return null;try{const u=JSON.parse(i);return u&&typeof u=="object"?u:null}catch{return null}}setItem(i,u,p){let w=0,T=[];const R=20;for(let j=0;j<=R;j++)try{this.browserStorage.setItem(i,u),j>0&&(j<=w?this.removeAccessTokenKeys(T.slice(0,j),p,0):(this.removeAccessTokenKeys(T.slice(0,w),p,0),this.removeAccessTokenKeys(T.slice(w,j),p)));break}catch(K){const te=od(K);if(te.errorCode===_i&&j<R){if(!T.length){const ve=i===Nr(this.clientId,0)?JSON.parse(u).accessToken:this.getTokenKeys(0).accessToken,Se=i===Nr(this.clientId)?JSON.parse(u).accessToken:this.getTokenKeys().accessToken;T=[...ve,...Se],w=ve.length}if(T.length<=j)throw te;this.removeAccessToken(T[j],p,!1)}else throw te}}async setUserData(i,u,p,w){let T=0,R=[];const j=20;for(let K=0;K<=j;K++)try{await Ae(this.browserStorage.setUserData.bind(this.browserStorage),q.SetUserData,this.logger,this.performanceClient)(i,u,p,w),K>0&&(K<=T?this.removeAccessTokenKeys(R.slice(0,K),p,0):(this.removeAccessTokenKeys(R.slice(0,T),p,0),this.removeAccessTokenKeys(R.slice(T,K),p)));break}catch(te){const ve=od(te);if(ve.errorCode===_i&&K<j){if(!R.length){const Se=this.getTokenKeys(0).accessToken,Ue=this.getTokenKeys().accessToken;R=[...Se,...Ue],T=Se.length}if(R.length<=K)throw ve;this.removeAccessToken(R[K],p,!1)}else throw ve}}getAccount(i,u){this.logger.trace("BrowserCacheManager.getAccount called");const p=this.browserStorage.getUserData(i);if(!p)return this.removeAccountKeyFromMap(i,u),null;const w=this.validateAndParseJson(p);return!w||!Sr.isAccountEntity(w)?null:da.toObject(new Sr,w)}async setAccount(i,u){this.logger.trace("BrowserCacheManager.setAccount called");const p=this.generateAccountKey(i.getAccountInfo()),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(p,JSON.stringify(i),u,w);const T=this.addAccountKeyToMap(p,u);this.cacheConfig.cacheLocation===yn.LocalStorage&&T&&this.eventHandler.emitEvent(Le.ACCOUNT_ADDED,void 0,i.getAccountInfo())}getAccountKeys(){return Vc(this.browserStorage)}addAccountKeyToMap(i,u){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${i}`);const p=this.getAccountKeys();return p.indexOf(i)===-1?(p.push(i),this.setItem(Rr(),JSON.stringify(p),u),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(i,u){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${i}`);const p=this.getAccountKeys(),w=p.indexOf(i);if(w>-1){if(p.splice(w,1),p.length===0){this.removeItem(Rr());return}else this.setItem(Rr(),JSON.stringify(p),u);this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(i,u){const p=this.getActiveAccount(u);p?.homeAccountId===i.homeAccountId&&p?.environment===i.environment&&this.setActiveAccount(null,u),super.removeAccount(i,u),this.removeAccountKeyFromMap(this.generateAccountKey(i),u),this.browserStorage.getKeys().forEach(w=>{w.includes(i.homeAccountId)&&w.includes(i.environment)&&this.browserStorage.removeItem(w)}),this.cacheConfig.cacheLocation===yn.LocalStorage&&this.eventHandler.emitEvent(Le.ACCOUNT_REMOVED,void 0,i)}removeIdToken(i,u){super.removeIdToken(i,u);const p=this.getTokenKeys(),w=p.idToken.indexOf(i);w>-1&&(this.logger.info("idToken removed from tokenKeys map"),p.idToken.splice(w,1),this.setTokenKeys(p,u))}removeAccessToken(i,u,p=!0){super.removeAccessToken(i,u),p&&this.removeAccessTokenKeys([i],u)}removeAccessTokenKeys(i,u,p=Gi){this.logger.trace("removeAccessTokenKey called");const w=this.getTokenKeys(p);let T=0;if(i.forEach(R=>{const j=w.accessToken.indexOf(R);j>-1&&(w.accessToken.splice(j,1),T++)}),T>0){this.logger.info(`removed ${T} accessToken keys from tokenKeys map`),this.setTokenKeys(w,u,p);return}}removeRefreshToken(i,u){super.removeRefreshToken(i,u);const p=this.getTokenKeys(),w=p.refreshToken.indexOf(i);w>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),p.refreshToken.splice(w,1),this.setTokenKeys(p,u))}getTokenKeys(i=Gi){return wn(this.clientId,this.browserStorage,i)}setTokenKeys(i,u,p=Gi){if(i.idToken.length===0&&i.accessToken.length===0&&i.refreshToken.length===0){this.removeItem(Nr(this.clientId,p));return}else this.setItem(Nr(this.clientId,p),JSON.stringify(i),u)}getIdTokenCredential(i,u){const p=this.browserStorage.getUserData(i);if(!p)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(i,u),null;const w=this.validateAndParseJson(p);return!w||!Nf(w)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),w)}async setIdTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const p=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(p,JSON.stringify(i),u,w);const T=this.getTokenKeys();T.idToken.indexOf(p)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),T.idToken.push(p),this.setTokenKeys(T,u))}getAccessTokenCredential(i,u){const p=this.browserStorage.getUserData(i);if(!p)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([i],u),null;const w=this.validateAndParseJson(p);return!w||!bs(w)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),w)}async setAccessTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const p=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(p,JSON.stringify(i),u,w);const T=this.getTokenKeys(),R=T.accessToken.indexOf(p);R!==-1&&T.accessToken.splice(R,1),this.logger.trace(`access token ${R===-1?"added to":"updated in"} map`),T.accessToken.push(p),this.setTokenKeys(T,u)}getRefreshTokenCredential(i,u){const p=this.browserStorage.getUserData(i);if(!p)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(i,u),null;const w=this.validateAndParseJson(p);return!w||!Ad(w)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),w)}async setRefreshTokenCredential(i,u){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const p=this.generateCredentialKey(i),w=Date.now().toString();i.lastUpdatedAt=w,await this.setUserData(p,JSON.stringify(i),u,w);const T=this.getTokenKeys();T.refreshToken.indexOf(p)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),T.refreshToken.push(p),this.setTokenKeys(T,u))}getAppMetadata(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const p=this.validateAndParseJson(u);return!p||!Sd(i,p)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),p)}setAppMetadata(i,u){this.logger.trace("BrowserCacheManager.setAppMetadata called");const p=Td(i);this.setItem(p,JSON.stringify(i),u)}getServerTelemetry(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const p=this.validateAndParseJson(u);return!p||!xc(i,p)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),p)}setServerTelemetry(i,u,p){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(i,JSON.stringify(u),p)}getAuthorityMetadata(i){const u=this.internalStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const p=this.validateAndParseJson(u);return p&&so(i,p)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),p):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(u=>this.isAuthorityMetadata(u))}setWrapperMetadata(i,u){this.internalStorage.setItem(lu.WRAPPER_SKU,i),this.internalStorage.setItem(lu.WRAPPER_VER,u)}getWrapperMetadata(){const i=this.internalStorage.getItem(lu.WRAPPER_SKU)||e.EMPTY_STRING,u=this.internalStorage.getItem(lu.WRAPPER_VER)||e.EMPTY_STRING;return[i,u]}setAuthorityMetadata(i,u){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(i,JSON.stringify(u))}getActiveAccount(i){const u=this.generateCacheKey(f.ACTIVE_ACCOUNT_FILTERS),p=this.browserStorage.getItem(u);if(!p)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const w=this.validateAndParseJson(p);return w?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:w.homeAccountId,localAccountId:w.localAccountId,tenantId:w.tenantId},i)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(i,u){const p=this.generateCacheKey(f.ACTIVE_ACCOUNT_FILTERS);if(i){this.logger.verbose("setActiveAccount: Active account set");const w={homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId,lastUpdatedAt:Tn().toString()};this.setItem(p,JSON.stringify(w),u)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(p);this.eventHandler.emitEvent(Le.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(i){const u=this.browserStorage.getItem(i);if(!u)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const p=this.validateAndParseJson(u);return!p||!Ec(i,p)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),p)}setThrottlingCache(i,u,p){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(i,JSON.stringify(u),p)}getTemporaryCache(i,u){const p=u?this.generateCacheKey(i):i;if(this.cacheConfig.storeAuthStateInCookie){const T=this.cookieStorage.getItem(p);if(T)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),T}const w=this.temporaryCacheStorage.getItem(p);if(!w){if(this.cacheConfig.cacheLocation===yn.LocalStorage){const T=this.browserStorage.getItem(p);if(T)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),T}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),w}setTemporaryCache(i,u,p){const w=p?this.generateCacheKey(i):i;this.temporaryCacheStorage.setItem(w,u),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(w,u,void 0,this.cacheConfig.secureCookies))}removeItem(i){this.browserStorage.removeItem(i)}removeTemporaryItem(i){this.temporaryCacheStorage.removeItem(i),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(i))}getKeys(){return this.browserStorage.getKeys()}clear(i){this.removeAllAccounts(i),this.removeAppMetadata(i),this.temporaryCacheStorage.getKeys().forEach(u=>{(u.indexOf(Kt)!==-1||u.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(u)}),this.browserStorage.getKeys().forEach(u=>{(u.indexOf(Kt)!==-1||u.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(u)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(i){this.performanceClient.addQueueMeasurement(q.ClearTokensAndKeysWithClaims,i);const u=this.getTokenKeys();let p=0;u.accessToken.forEach(w=>{const T=this.getAccessTokenCredential(w,i);T?.requestedClaimsHash&&w.includes(T.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(w,i),p++)}),p>0&&this.logger.warning(`${p} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(i){return $n.startsWith(i,Kt)?i:`${Kt}.${this.clientId}.${i}`}generateCredentialKey(i){const u=i.credentialType===M.REFRESH_TOKEN&&i.familyId||i.clientId,p=i.tokenType&&i.tokenType.toLowerCase()!==$.BEARER.toLowerCase()?i.tokenType.toLowerCase():"";return[`${Kt}.${Gi}`,i.homeAccountId,i.environment,i.credentialType,u,i.realm||"",i.target||"",i.requestedClaimsHash||"",p].join(Jf).toLowerCase()}generateAccountKey(i){const u=i.homeAccountId.split(".")[1];return[`${Kt}.${Io}`,i.homeAccountId,i.environment,u||i.tenantId||""].join(Jf).toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Sn.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Sn.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(Sn.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Sn.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Sn.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(i,u){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const p=Uc(JSON.stringify(i));if(this.setTemporaryCache(Sn.REQUEST_PARAMS,p,!0),u){const w=Uc(u);this.setTemporaryCache(Sn.VERIFIER,w,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const i=this.getTemporaryCache(Sn.REQUEST_PARAMS,!0);if(!i)throw He(Rc);const u=this.getTemporaryCache(Sn.VERIFIER,!0);let p,w="";try{p=JSON.parse($r(i)),u&&(w=$r(u))}catch(T){throw this.logger.errorPii(`Attempted to parse: ${i}`),this.logger.error(`Parsing cached token request threw with error: ${T}`),He(su)}return[p,w]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const i=this.getTemporaryCache(Sn.NATIVE_REQUEST,!0);if(!i)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const u=this.validateAndParseJson(i);return u||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(i){const u=this.getInteractionInProgress()?.clientId;return i?u===this.clientId:!!u}getInteractionInProgress(){const i=`${Kt}.${Sn.INTERACTION_STATUS_KEY}`,u=this.getTemporaryCache(i,!1);try{return u?JSON.parse(u):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(i),this.resetRequestCache(),Vd(window),null}}setInteractionInProgress(i,u=co.SIGNIN){const p=`${Kt}.${Sn.INTERACTION_STATUS_KEY}`;if(i){if(this.getInteractionInProgress())throw He(kt);this.setTemporaryCache(p,JSON.stringify({clientId:this.clientId,type:u}),!1)}else!i&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(p)}async hydrateCache(i,u){const p=wc(i.account?.homeAccountId,i.account?.environment,i.idToken,this.clientId,i.tenantId);let w;u.claims&&(w=await this.cryptoImpl.hashString(u.claims));const T=io(i.account?.homeAccountId,i.account.environment,i.accessToken,this.clientId,i.tenantId,i.scopes.join(" "),i.expiresOn?If(i.expiresOn):0,i.extExpiresOn?If(i.extExpiresOn):0,$r,void 0,i.tokenType,void 0,u.sshKid,u.claims,w),R={idToken:p,accessToken:T};return this.saveCacheRecord(R,i.correlationId)}async saveCacheRecord(i,u,p){try{await super.saveCacheRecord(i,u,p)}catch(w){if(w instanceof ki&&this.performanceClient&&u)try{const T=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:T.refreshToken.length,cacheIdCount:T.idToken.length,cacheAtCount:T.accessToken.length},u)}catch{}throw w}}}function Tp(S,i,u,p){try{switch(i){case yn.LocalStorage:return new nn(S,u,p);case yn.SessionStorage:return new fr;case yn.MemoryStorage:default:break}}catch(w){u.error(w)}return new $c}const xu=(S,i,u,p)=>{const w={cacheLocation:yn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:yn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Yc(S,w,En,i,u,p)};function Mr(S,i,u,p,w){return S.verbose("getAllAccounts called"),u?i.getAllAccounts(w||{},p):[]}function Vr(S,i,u,p){const w=u.getAccountInfoFilteredBy(S,p);return w?(i.verbose("getAccount: Account matching provided filter found, returning"),w):(i.verbose("getAccount: No matching account found, returning null"),null)}function sm(S,i,u,p){if(i.trace("getAccountByUsername called"),!S)return i.warning("getAccountByUsername: No username provided"),null;const w=u.getAccountInfoFilteredBy({username:S},p);return w?(i.verbose("getAccountByUsername: Account matching username found, returning"),i.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${S}`),w):(i.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Pr(S,i,u,p){if(i.trace("getAccountByHomeId called"),!S)return i.warning("getAccountByHomeId: No homeAccountId provided"),null;const w=u.getAccountInfoFilteredBy({homeAccountId:S},p);return w?(i.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),i.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${S}`),w):(i.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function am(S,i,u,p){if(i.trace("getAccountByLocalId called"),!S)return i.warning("getAccountByLocalId: No localAccountId provided"),null;const w=u.getAccountInfoFilteredBy({localAccountId:S},p);return w?(i.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),i.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${S}`),w):(i.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function $i(S,i,u){i.setActiveAccount(S,u)}function Ls(S,i){return S.getActiveAccount(i)}const Us="msal.broadcast.event";class Qc{constructor(i){this.eventCallbacks=new Map,this.logger=i||new Ln({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Us)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(i,u,p){if(typeof window<"u"){const w=p||Wd();return this.eventCallbacks.has(w)?(this.logger.error(`Event callback with id: ${w} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(w,[i,u||[]]),this.logger.verbose(`Event callback registered with id: ${w}`),w)}return null}removeEventCallback(i){this.eventCallbacks.delete(i),this.logger.verbose(`Event callback ${i} removed.`)}emitEvent(i,u,p,w){const T={eventType:i,interactionType:u||null,payload:p||null,error:w||null,timestamp:Date.now()};switch(i){case Le.ACCOUNT_ADDED:case Le.ACCOUNT_REMOVED:case Le.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(T);break;default:this.invokeCallbacks(T);break}}invokeCallbacks(i){this.eventCallbacks.forEach(([u,p],w)=>{(p.length===0||p.includes(i.eventType))&&(this.logger.verbose(`Emitting event to callback ${w}: ${i.eventType}`),u.apply(null,[i]))})}invokeCrossTabCallbacks(i){const u=i.data;this.invokeCallbacks(u)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}class nh{constructor(i,u,p,w,T,R,j,K,te){this.config=i,this.browserStorage=u,this.browserCrypto=p,this.networkClient=this.config.system.networkClient,this.eventHandler=T,this.navigationClient=R,this.platformAuthProvider=K,this.correlationId=te||sr(),this.logger=w.clone(or.MSAL_SKU,Ir,this.correlationId),this.performanceClient=j}async clearCacheOnLogout(i,u){if(u)try{this.browserStorage.removeAccount(u,i),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(i),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(i){this.logger.verbose("getRedirectUri called");const u=i||this.config.auth.redirectUri;return _t.getAbsoluteUrl(u,ai())}initializeServerTelemetryManager(i,u){this.logger.verbose("initializeServerTelemetryManager called");const p={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:i,forceRefresh:u||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Ss(p,this.browserStorage)}async getDiscoveredAuthority(i){const{account:u}=i,p=i.requestExtraQueryParameters&&i.requestExtraQueryParameters.hasOwnProperty("instance_aware")?i.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const w={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},T=i.requestAuthority||this.config.auth.authority,R=p?.length?p==="true":this.config.auth.instanceAware,j=u&&R?this.config.auth.authority.replace(_t.getDomainFromUrl(T),u.environment):T,K=gn.generateAuthority(j,i.requestAzureCloudOptions||this.config.auth.azureCloudOptions),te=await Ae(nr,q.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(K,this.config.system.networkClient,this.browserStorage,w,this.logger,this.correlationId,this.performanceClient);if(u&&!te.isAlias(u.environment))throw St(ps);return te}}async function ho(S,i,u,p){u.addQueueMeasurement(q.InitializeBaseRequest,S.correlationId);const w=S.authority||i.auth.authority,T=[...S&&S.scopes||[]],R={...S,correlationId:S.correlationId,authority:w,scopes:T};if(!R.authenticationScheme)R.authenticationScheme=$.BEARER,p.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(R.authenticationScheme===$.SSH){if(!S.sshJwk)throw St(Vo);if(!S.sshKid)throw St(ca)}p.verbose(`Authentication Scheme set to "${R.authenticationScheme}" as configured in Auth request`)}return i.cache.claimsBasedCachingEnabled&&S.claims&&!$n.isEmptyObj(S.claims)&&(R.requestedClaimsHash=await qd(S.claims)),R}async function Sp(S,i,u,p,w){p.addQueueMeasurement(q.InitializeSilentRequest,S.correlationId);const T=await Ae(ho,q.InitializeBaseRequest,w,p,S.correlationId)(S,u,p,w);return{...S,...T,account:i,forceRefresh:S.forceRefresh||!1}}function Pa(S,i){let u;const p=S.httpMethod;if(i===Vn.EAR){if(u=p||r.POST,u!==r.POST)throw St(Fr)}else u=p||r.GET;if(S.authorizePostBodyParameters&&u!==r.POST)throw St(Ti);return u}class li extends nh{initializeLogoutRequest(i){this.logger.verbose("initializeLogoutRequest called",i?.correlationId);const u={correlationId:this.correlationId||sr(),...i};if(i)if(i.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(i.account){const p=this.getLogoutHintFromIdTokenClaims(i.account);p&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),u.logoutHint=p)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!i||i.postLogoutRedirectUri!==null?i&&i.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",u.correlationId),u.postLogoutRedirectUri=_t.getAbsoluteUrl(i.postLogoutRedirectUri,ai())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",u.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",u.correlationId),u.postLogoutRedirectUri=_t.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ai())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",u.correlationId),u.postLogoutRedirectUri=_t.getAbsoluteUrl(ai(),ai())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",u.correlationId),u}getLogoutHintFromIdTokenClaims(i){const u=i.idTokenClaims;if(u){if(u.login_hint)return u.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(i){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const u=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(i);return new Tc(u,this.performanceClient)}async getClientConfiguration(i){const{serverTelemetryManager:u,requestAuthority:p,requestAzureCloudOptions:w,requestExtraQueryParameters:T,account:R}=i;this.performanceClient.addQueueMeasurement(q.StandardInteractionClientGetClientConfiguration,this.correlationId);const j=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:p,requestAzureCloudOptions:w,requestExtraQueryParameters:T,account:R}),K=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:j,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:K.loggerCallback,piiLoggingEnabled:K.piiLoggingEnabled,logLevel:K.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:u,libraryInfo:{sku:or.MSAL_SKU,version:Ir,cpu:e.EMPTY_STRING,os:e.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(i,u){this.performanceClient.addQueueMeasurement(q.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const p=this.getRedirectUri(i.redirectUri),w={interactionType:u},T=Ca.setRequestState(this.browserCrypto,i&&i.state||e.EMPTY_STRING,w),j={...await Ae(ho,q.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...i,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:p,state:T,nonce:i.nonce||sr(),responseMode:this.config.auth.OIDCOptions.serverResponseType},K={...j,httpMethod:Pa(j,this.config.auth.protocolMode)};if(i.loginHint||i.sid)return K;const te=i.account||this.browserStorage.getActiveAccount(this.correlationId);return te&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${te.homeAccountId}`,this.correlationId),K.account=te),K}}function Eu(S,i){if(!i)return null;try{return Ca.parseRequestState(S,i).libraryState.meta}catch{throw Ie(we)}}function ui(S,i,u){const p=Ll(S);if(!p)throw Qo(S)?(u.error(`A ${i} is present in the iframe but it does not contain known properties. It's likely that the ${i} has been replaced by code running on the redirectUri page.`),u.errorPii(`The ${i} detected is: ${S}`),He(ba)):(u.error(`The request has returned to the redirectUri but a ${i} is not present. It's likely that the ${i} has been removed or the page has been redirected by code running on the redirectUri page.`),He(Ic));return p}function _p(S,i,u){if(!S.state)throw He(Is);const p=Eu(i,S.state);if(!p)throw He(ao);if(p.interactionType!==u)throw He(dt)}class cm{constructor(i,u,p,w,T){this.authModule=i,this.browserStorage=u,this.authCodeRequest=p,this.logger=w,this.performanceClient=T}async handleCodeResponse(i,u){this.performanceClient.addQueueMeasurement(q.HandleCodeResponse,u.correlationId);let p;try{p=np(i,u.state)}catch(w){throw w instanceof Nt&&w.subError===qr?He(qr):w}return Ae(this.handleCodeResponseFromServer.bind(this),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,u.correlationId)(p,u)}async handleCodeResponseFromServer(i,u,p=!0){if(this.performanceClient.addQueueMeasurement(q.HandleCodeResponseFromServer,u.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await Ae(this.authModule.updateAuthority.bind(this.authModule),q.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,u.correlationId)(i.cloud_instance_host_name,u.correlationId),p&&(i.nonce=u.nonce||void 0),i.state=u.state,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const T=this.createCcsCredentials(u);T&&(this.authCodeRequest.ccsCredential=T)}return await Ae(this.authModule.acquireToken.bind(this.authModule),q.AuthClientAcquireToken,this.logger,this.performanceClient,u.correlationId)(this.authCodeRequest,i)}createCcsCredentials(i){return i.account?{credential:i.account.homeAccountId,type:no.HOME_ACCOUNT_ID}:i.loginHint?{credential:i.loginHint,type:no.UPN}:null}}const Au="ContentError",kp="PageException",Tu="user_switch",Ip="USER_INTERACTION_REQUIRED",kw="USER_CANCEL",Iw="NO_NETWORK",Ut="DISABLED",Wt="ACCOUNT_UNAVAILABLE",yt="UX_NOT_ALLOWED",Tt=-2147186943,Ht={[Tu]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class bn extends Q{constructor(i,u,p){super(i,u),Object.setPrototypeOf(this,bn.prototype),this.name="NativeAuthError",this.ext=p}}function Yr(S){if(S.ext&&S.ext.status&&S.ext.status===Ut||S.ext&&S.ext.error&&S.ext.error===Tt)return!0;switch(S.errorCode){case Au:case kp:return!0;default:return!1}}function Vi(S,i,u){if(u&&u.status)switch(u.status){case Wt:return va(Mi);case Ip:return new Nn(S,i);case kw:return He(qr);case Iw:return He(Qt);case yt:return va(xs)}return new bn(S,Ht[S]||i,u)}class rh extends li{async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentCacheClientAcquireToken,i.correlationId);const u=this.initializeServerTelemetryManager(Pt.acquireTokenSilent_silentFlow),p=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:u,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,account:i.account}),w=new _c(p,this.performanceClient);this.logger.verbose("Silent auth client created");try{const R=(await Ae(w.acquireCachedToken.bind(w),q.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,i.correlationId)(i))[0];return this.performanceClient.addFields({fromCache:!0},i.correlationId),R}catch(T){throw T instanceof Na&&T.errorCode===kr&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),T}}logout(i){this.logger.verbose("logoutRedirect called");const u=this.initializeLogoutRequest(i);return this.clearCacheOnLogout(u.correlationId,u?.account)}}class fo extends nh{constructor(i,u,p,w,T,R,j,K,te,ve,Se,Ue){super(i,u,p,w,T,R,K,te,Ue),this.apiId=j,this.accountId=ve,this.platformAuthProvider=te,this.nativeStorageManager=Se,this.silentCacheClient=new rh(i,this.nativeStorageManager,p,w,T,R,K,te,Ue);const Qe=this.platformAuthProvider.getExtensionName();this.skus=Ss.makeExtraSkuString({libraryName:or.MSAL_SKU,libraryVersion:Ir,extensionName:Qe,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(i){i.extraParameters={...i.extraParameters,[Vg]:this.skus}}async acquireToken(i,u){this.performanceClient.addQueueMeasurement(q.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const p=this.performanceClient.startMeasurement(q.NativeInteractionClientAcquireToken,this.correlationId),w=Tn(),T=this.initializeServerTelemetryManager(this.apiId);try{const R=await this.initializeNativeRequest(i);try{const K=await this.acquireTokensFromCache(this.accountId,R);return p.end({success:!0,isNativeBroker:!1,fromCache:!0}),K}catch(K){if(u===_n.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),p.end({success:!1,brokerErrorCode:"cache_request_failed"}),K;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const j=await this.platformAuthProvider.sendMessage(R);return await this.handleNativeResponse(j,R,w).then(K=>(p.end({success:!0,isNativeBroker:!0,requestId:K.requestId}),T.clearNativeBrokerErrorCode(),K)).catch(K=>{throw p.end({success:!1,errorCode:K.errorCode,subErrorCode:K.subError}),K})}catch(R){throw R instanceof bn&&T.setNativeBrokerErrorCode(R.errorCode),p.end({success:!1}),R}}createSilentCacheRequest(i,u){return{authority:i.authority,correlationId:this.correlationId,scopes:an.fromString(i.scope).asArray(),account:u,forceRefresh:!1}}async acquireTokensFromCache(i,u){if(!i)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Ie(Pn);const p=this.browserStorage.getBaseAccountInfo({nativeAccountId:i},this.correlationId);if(!p)throw Ie(Pn);try{const w=this.createSilentCacheRequest(u,p),T=await this.silentCacheClient.acquireToken(w),R={...p,idTokenClaims:T?.idTokenClaims,idToken:T?.idToken};return{...T,account:R}}catch(w){throw w}}async acquireTokenRedirect(i,u){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...p}=i;delete p.onRedirectNavigate;const w=await this.initializeNativeRequest(p);try{await this.platformAuthProvider.sendMessage(w)}catch(j){if(j instanceof bn&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(j.errorCode),Yr(j)))throw j}this.browserStorage.setTemporaryCache(Sn.NATIVE_REQUEST,JSON.stringify(w),!0);const T={apiId:Pt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},R=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(i.redirectUri);u.end({success:!0}),await this.navigationClient.navigateExternal(R,T)}async handleRedirectPromise(i,u){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const p=this.browserStorage.getCachedNativeRequest();if(!p)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),i&&u&&i?.addFields({errorCode:"no_cached_request"},u),null;const{prompt:w,...T}=p;w&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Sn.NATIVE_REQUEST));const R=Tn();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const j=await this.platformAuthProvider.sendMessage(T),K=await this.handleNativeResponse(j,T,R);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),i&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),K}catch(j){throw j}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(i,u,p){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const w=An(i.id_token,$r),T=this.createHomeAccountIdentifier(i,w),R=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:u.accountId},this.correlationId)?.homeAccountId;if(u.extraParameters?.child_client_id&&i.account.id!==u.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(T!==R&&i.account.id!==u.accountId)throw Vi(Tu);const j=await this.getDiscoveredAuthority({requestAuthority:u.authority}),K=Wl(this.browserStorage,j,T,$r,this.correlationId,w,i.client_info,void 0,w.tid,void 0,i.account.id,this.logger);i.expires_in=Number(i.expires_in);const te=await this.generateAuthenticationResult(i,u,w,K,j.canonicalAuthority,p);return await this.cacheAccount(K,this.correlationId),await this.cacheNativeTokens(i,u,T,w,i.access_token,te.tenantId,p),te}createHomeAccountIdentifier(i,u){return Sr.generateHomeAccountId(i.client_info||e.EMPTY_STRING,mn.Default,this.logger,this.browserCrypto,u)}generateScopes(i,u){return u?an.fromString(u):an.fromString(i)}async generatePopAccessToken(i,u){if(u.tokenType===$.POP&&u.signPopToken){if(i.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),i.shr;const p=new wa(this.browserCrypto),w={resourceRequestMethod:u.resourceRequestMethod,resourceRequestUri:u.resourceRequestUri,shrClaims:u.shrClaims,shrNonce:u.shrNonce};if(!u.keyId)throw Ie(Go);return p.signPopToken(i.access_token,u.keyId,w)}else return i.access_token}async generateAuthenticationResult(i,u,p,w,T,R){const j=this.addTelemetryFromNativeResponse(i.properties.MATS),K=this.generateScopes(u.scope,i.scope),te=i.account.properties||{},ve=te.UID||p.oid||p.sub||e.EMPTY_STRING,Se=te.TenantId||p.tid||e.EMPTY_STRING,Ue=Dl(w.getAccountInfo(),void 0,p,i.id_token);Ue.nativeAccountId!==i.account.id&&(Ue.nativeAccountId=i.account.id);const Qe=await this.generatePopAccessToken(i,u),Bt=u.tokenType===$.POP?$.POP:$.BEARER;return{authority:T,uniqueId:ve,tenantId:Se,scopes:K.asArray(),account:Ue,idToken:i.id_token,idTokenClaims:p,accessToken:Qe,fromCache:j?this.isResponseFromCache(j):!1,expiresOn:oo(R+i.expires_in),tokenType:Bt,correlationId:this.correlationId,state:i.state,fromNativeBroker:!0}}async cacheAccount(i,u){await this.browserStorage.setAccount(i,this.correlationId),this.browserStorage.removeAccountContext(i.getAccountInfo(),u)}cacheNativeTokens(i,u,p,w,T,R,j){const K=wc(p,u.authority,i.id_token||"",u.clientId,w.tid||""),te=u.tokenType===$.POP?e.SHR_NONCE_VALIDITY:(typeof i.expires_in=="string"?parseInt(i.expires_in,10):i.expires_in)||0,ve=j+te,Se=this.generateScopes(i.scope,u.scope),Ue=io(p,u.authority,T,u.clientId,w.tid||R,Se.printScopes(),ve,0,$r,void 0,u.tokenType,void 0,u.keyId),Qe={idToken:K,accessToken:Ue};return this.nativeStorageManager.saveCacheRecord(Qe,this.correlationId,u.storeInCache)}getExpiresInValue(i,u){return i===$.POP?e.SHR_NONCE_VALIDITY:(typeof u=="string"?parseInt(u,10):u)||0}addTelemetryFromNativeResponse(i){const u=this.getMATSFromResponse(i);return u?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:u.broker_version,matsAccountJoinOnStart:u.account_join_on_start,matsAccountJoinOnEnd:u.account_join_on_end,matsDeviceJoin:u.device_join,matsPromptBehavior:u.prompt_behavior,matsApiErrorCode:u.api_error_code,matsUiVisible:u.ui_visible,matsSilentCode:u.silent_code,matsSilentBiSubCode:u.silent_bi_sub_code,matsSilentMessage:u.silent_message,matsSilentStatus:u.silent_status,matsHttpStatus:u.http_status,matsHttpEventCount:u.http_event_count},this.correlationId),u):null}getMATSFromResponse(i){if(i)try{return JSON.parse(i)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(i){return typeof i.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!i.is_cached}async initializeNativeRequest(i){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const u=await this.getCanonicalAuthority(i),{scopes:p,...w}=i,T=new an(p||[]);T.appendScopes(s);const R={...w,accountId:this.accountId,clientId:this.config.auth.clientId,authority:u.urlString,scope:T.printScopes(),redirectUri:this.getRedirectUri(i.redirectUri),prompt:this.getPrompt(i.prompt),correlationId:this.correlationId,tokenType:i.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...i.extraQueryParameters,...i.tokenQueryParameters},extendedExpiryToken:!1,keyId:i.popKid};if(R.signPopToken&&i.popKid)throw He(au);if(this.handleExtraBrokerParams(R),R.extraParameters=R.extraParameters||{},R.extraParameters.telemetry=Xn.MATS_TELEMETRY,i.authenticationScheme===$.POP){const j={resourceRequestUri:i.resourceRequestUri,resourceRequestMethod:i.resourceRequestMethod,shrClaims:i.shrClaims,shrNonce:i.shrNonce},K=new wa(this.browserCrypto);let te;if(R.keyId)te=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:R.keyId})),R.signPopToken=!1;else{const ve=await Ae(K.generateCnf.bind(K),q.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(j,this.logger);te=ve.reqCnfString,R.keyId=ve.kid,R.signPopToken=!0}R.reqCnf=te}return this.addRequestSKUs(R),R}async getCanonicalAuthority(i){const u=i.authority||this.config.auth.authority;i.account&&await this.getDiscoveredAuthority({requestAuthority:u,requestAzureCloudOptions:i.azureCloudOptions,account:i.account});const p=new _t(u);return p.validateAsUri(),p}getPrompt(i){switch(this.apiId){case Pt.ssoSilent:case Pt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),v.NONE}if(!i){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(i){case v.NONE:case v.CONSENT:case v.LOGIN:case v.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),i;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${i} is not compatible with native flow`),He(Ia)}}handleExtraBrokerParams(i){const u=i.extraParameters&&i.extraParameters.hasOwnProperty($l)&&i.extraParameters.hasOwnProperty(Cs)&&i.extraParameters.hasOwnProperty(ma);if(!i.embeddedClientId&&!u)return;let p="";const w=i.redirectUri;i.embeddedClientId?(i.redirectUri=this.config.auth.redirectUri,p=i.embeddedClientId):i.extraParameters&&(i.redirectUri=i.extraParameters[Cs],p=i.extraParameters[ma]),i.extraParameters={child_client_id:p,child_redirect_uri:w},this.performanceClient?.addFields({embeddedClientId:p,embeddedRedirectUri:w},this.correlationId)}}async function un(S,i,u,p,w){const T=tp({...S.auth,authority:i},u,p,w);if(Cd(T,{sku:or.MSAL_SKU,version:Ir,os:"",cpu:""}),S.auth.protocolMode!==Vn.OIDC&&wd(T,S.telemetry.application),u.platformBroker&&(bf(T),w.addFields({isPlatformAuthorizeRequest:!0},u.correlationId),u.authenticationScheme===$.POP)){const R=new Or(p,w),j=new wa(R);let K;u.popKid?K=R.encodeKid(u.popKid):K=(await Ae(j.generateCnf.bind(j),q.PopTokenGenerateCnf,p,w,u.correlationId)(u,p)).reqCnfString,Sf(T,K)}return Vl(T,u.correlationId,w),T}async function di(S,i,u,p,w){if(!u.codeChallenge)throw St(Er);const T=await Ae(un,q.GetStandardParams,p,w,u.correlationId)(S,i,u,p,w);return dd(T,x.CODE),bd(T,u.codeChallenge,e.S256_CODE_CHALLENGE_METHOD),Ni(T,u.extraQueryParameters||{}),Df(i,T,S.auth.encodeExtraQueryParams,u.extraQueryParameters)}async function Yi(S,i,u,p,w,T){if(!p.earJwk)throw He(ru);const R=await un(i,u,p,w,T);dd(R,x.IDTOKEN_TOKEN_REFRESHTOKEN),Ao(R,p.earJwk);const j=new Map;Ni(j,p.extraQueryParameters||{});const K=Df(u,j,i.auth.encodeExtraQueryParams,p.extraQueryParameters);return Qr(S,K,R)}async function Su(S,i,u,p,w,T){const R=await un(i,u,p,w,T);dd(R,x.CODE),bd(R,p.codeChallenge,p.codeChallengeMethod||e.S256_CODE_CHALLENGE_METHOD),Zg(R,p.authorizePostBodyParameters||{});const j=new Map;Ni(j,p.extraQueryParameters||{});const K=Df(u,j,i.auth.encodeExtraQueryParams,p.extraQueryParameters);return Qr(S,K,R)}function Qr(S,i,u){const p=S.createElement("form");return p.method="post",p.action=i,u.forEach((w,T)=>{const R=S.createElement("input");R.hidden=!0,R.name=T,R.value=w,p.appendChild(R)}),S.body.appendChild(p),p}async function Da(S,i,u,p,w,T,R,j,K,te){if(j.verbose("Account id found, calling WAM for token"),!te)throw He(ka);const ve=new Or(j,K),Se=new fo(p,w,ve,j,R,p.system.navigationClient,u,K,te,i,T,S.correlationId),{userRequestState:Ue}=Ca.parseRequestState(ve,S.state);return Ae(Se.acquireToken.bind(Se),q.NativeInteractionClientAcquireToken,j,K,S.correlationId)({...S,state:Ue,prompt:void 0})}async function Hs(S,i,u,p,w,T,R,j,K,te,ve,Se){if(rr.removeThrottle(R,w.auth.clientId,S),i.accountId)return Ae(Da,q.HandleResponsePlatformBroker,te,ve,S.correlationId)(S,i.accountId,p,w,R,j,K,te,ve,Se);const Ue={...S,code:i.code||"",codeVerifier:u},Qe=new cm(T,R,Ue,te,ve);return await Ae(Qe.handleCodeResponse.bind(Qe),q.HandleCodeResponse,te,ve,S.correlationId)(i,S)}async function cr(S,i,u,p,w,T,R,j,K,te,ve){if(rr.removeThrottle(T,p.auth.clientId,S),Ts(i,S.state),!i.ear_jwe)throw He(Pd);if(!S.earJwk)throw He(ru);const Se=JSON.parse(await Ae(gp,q.DecryptEarResponse,K,te,S.correlationId)(S.earJwk,i.ear_jwe));if(Se.accountId)return Ae(Da,q.HandleResponsePlatformBroker,K,te,S.correlationId)(S,Se.accountId,u,p,T,R,j,K,te,ve);const Ue=new tn(p.auth.clientId,T,new Or(K,te),K,null,null,te);Ue.validateTokenResponse(Se);const Qe={code:"",state:S.state,nonce:S.nonce,client_info:Se.client_info,cloud_graph_host_name:Se.cloud_graph_host_name,cloud_instance_host_name:Se.cloud_instance_host_name,cloud_instance_name:Se.cloud_instance_name,msgraph_host:Se.msgraph_host};return await Ae(Ue.handleServerTokenResponse.bind(Ue),q.HandleServerTokenResponse,K,te,S.correlationId)(Se,w,Tn(),S,Qe,void 0,void 0,void 0,void 0)}const lm=32;async function Wc(S,i,u){S.addQueueMeasurement(q.GeneratePkceCodes,u);const p=Qn(oh,q.GenerateCodeVerifier,i,S,u)(S,i,u),w=await Ae(ih,q.GenerateCodeChallengeFromVerifier,i,S,u)(p,S,i,u);return{verifier:p,challenge:w}}function oh(S,i,u){try{const p=new Uint8Array(lm);return Qn(gu,q.GetRandomValues,i,S,u)(p),ii(p)}catch{throw He(ei)}}async function ih(S,i,u,p){i.addQueueMeasurement(q.GenerateCodeChallengeFromVerifier,p);try{const w=await Ae(mu,q.Sha256Digest,u,i,p)(S,i,p);return ii(new Uint8Array(w))}catch{throw He(ei)}}class No{constructor(i,u,p,w){this.logger=i,this.handshakeTimeoutMs=u,this.extensionId=w,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=p,this.handshakeEvent=p.startMeasurement(q.NativeMessageHandlerHandshake),this.platformAuthType=Xn.PLATFORM_EXTENSION_PROVIDER}async sendMessage(i){this.logger.trace(this.platformAuthType+" - sendMessage called.");const u={method:Ms.GetToken,request:i},p={channel:Xn.CHANNEL_ID,extensionId:this.extensionId,responseId:sr(),body:u};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(p)}`),this.messageChannel.port1.postMessage(p);const w=await new Promise((R,j)=>{this.resolvers.set(p.responseId,{resolve:R,reject:j})});return this.validatePlatformBrokerResponse(w)}static async createProvider(i,u,p){i.trace("PlatformAuthExtensionHandler - createProvider called.");try{const w=new No(i,u,p,Xn.PREFERRED_EXTENSION_ID);return await w.sendHandshakeRequest(),w}catch{const T=new No(i,u,p);return await T.sendHandshakeRequest(),T}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const i={channel:Xn.CHANNEL_ID,extensionId:this.extensionId,responseId:sr(),body:{method:Ms.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=u=>{this.onChannelMessage(u)},window.postMessage(i,window.origin,[this.messageChannel.port2]),new Promise((u,p)=>{this.handshakeResolvers.set(i.responseId,{resolve:u,reject:p}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),p(He(Pc)),this.handshakeResolvers.delete(i.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(i){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),i.source!==window)return;const u=i.data;if(!(!u.channel||u.channel!==Xn.CHANNEL_ID)&&!(u.extensionId&&u.extensionId!==this.extensionId)&&u.body.method===Ms.HandshakeRequest){const p=this.handshakeResolvers.get(u.responseId);if(!p){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${u.responseId}`);return}this.logger.verbose(u.extensionId?`Extension with id: ${u.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),p.reject(He(Dc))}}onChannelMessage(i){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const u=i.data,p=this.resolvers.get(u.responseId),w=this.handshakeResolvers.get(u.responseId);try{const T=u.body.method;if(T===Ms.Response){if(!p)return;const R=u.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(R)}`),R.status!=="Success")p.reject(Vi(R.code,R.description,R.ext));else if(R.result)R.result.code&&R.result.description?p.reject(Vi(R.result.code,R.result.description,R.result.ext)):p.resolve(R.result);else throw ie(P,"Event does not contain result.");this.resolvers.delete(u.responseId)}else if(T===Ms.HandshakeResponse){if(!w){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${u.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=u.extensionId,this.extensionVersion=u.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),w.resolve(),this.handshakeResolvers.delete(u.responseId)}}catch(T){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${T}`),this.logger.errorPii(`Unable to parse ${i}`),p?p.reject(T):w&&w.reject(T)}}validatePlatformBrokerResponse(i){if(i.hasOwnProperty("access_token")&&i.hasOwnProperty("id_token")&&i.hasOwnProperty("client_info")&&i.hasOwnProperty("account")&&i.hasOwnProperty("scope")&&i.hasOwnProperty("expires_in"))return i;throw ie(P,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Xn.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Bn{constructor(i,u,p){this.logger=i,this.performanceClient=u,this.correlationId=p,this.platformAuthType=Xn.PLATFORM_DOM_PROVIDER}static async createProvider(i,u,p){if(i.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(Xn.MICROSOFT_ENTRA_BROKERID))?.includes(Xn.PLATFORM_DOM_APIS))return i.trace("Platform auth api available in DOM"),new Bn(i,u,p)}getExtensionId(){return Xn.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Xn.DOM_API_NAME}async sendMessage(i){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const u=this.initializePlatformDOMRequest(i),p=await window.navigator.platformAuthentication.executeGetToken(u);return this.validatePlatformBrokerResponse(p)}catch(u){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),u}}initializePlatformDOMRequest(i){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:u,clientId:p,authority:w,scope:T,redirectUri:R,correlationId:j,state:K,storeInCache:te,embeddedClientId:ve,extraParameters:Se,...Ue}=i,Qe=this.getDOMExtraParams(Ue);return{accountId:u,brokerId:this.getExtensionId(),authority:w,clientId:p,correlationId:j||this.correlationId,extraParameters:{...Se,...Qe},isSecurityTokenService:!1,redirectUri:R,scope:T,state:K,storeInCache:te,embeddedClientId:ve}}validatePlatformBrokerResponse(i){if(i.hasOwnProperty("isSuccess")){if(i.hasOwnProperty("accessToken")&&i.hasOwnProperty("idToken")&&i.hasOwnProperty("clientInfo")&&i.hasOwnProperty("account")&&i.hasOwnProperty("scopes")&&i.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(i);if(i.hasOwnProperty("error")){const u=i;if(u.isSuccess===!1&&u.error&&u.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Vi(u.error.code,u.error.description,{error:parseInt(u.error.errorCode),protocol_error:u.error.protocolError,status:u.error.status,properties:u.error.properties})}}throw ie(P,"Response missing expected properties.")}convertToPlatformBrokerResponse(i){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:i.accessToken,id_token:i.idToken,client_info:i.clientInfo,account:i.account,expires_in:i.expiresIn,scope:i.scopes,state:i.state||"",properties:i.properties||{},extendedLifetimeToken:i.extendedLifetimeToken??!1,shr:i.proofOfPossessionPayload}}getDOMExtraParams(i){return{...Object.entries(i).reduce((w,[T,R])=>(w[T]=String(R),w),{})}}}async function Bs(S,i,u){const p=new Ln(S||{},Ma,Ir);p.trace("isPlatformBrokerAvailable called");const w=i||new ha;return typeof window>"u"?(p.trace("Non-browser environment detected, returning false"),!1):!!await ja(p,w,u||sr())}async function ja(S,i,u,p){S.trace("getPlatformAuthProvider called",u);const w=Xc();S.trace("Has client allowed platform auth via DOM API: "+w);let T;try{w&&(T=await Bn.createProvider(S,i,u)),T||(S.trace("Platform auth via DOM API not available, checking for extension"),T=await No.createProvider(S,p||eh,i))}catch(R){S.trace("Platform auth not available",R)}return T}function Xc(){let S;try{return S=window[yn.SessionStorage],S?.getItem(hn)==="true"}catch{return!1}}function La(S,i,u,p){if(i.trace("isPlatformAuthAllowed called"),!S.system.allowPlatformBroker)return i.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!u)return i.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(p)switch(p){case $.BEARER:case $.POP:return i.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return i.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class um extends li{constructor(i,u,p,w,T,R,j,K,te,ve){super(i,u,p,w,T,R,j,te,ve),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=K,this.eventHandler=T}acquireToken(i,u){let p;try{if(p={popupName:this.generatePopupName(i.scopes||s,i.authority||this.config.auth.authority),popupWindowAttributes:i.popupWindowAttributes||{},popupWindowParent:i.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(i,p,u);{const T={...i,httpMethod:Pa(i,this.config.auth.protocolMode)};return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),p.popup=this.openSizedPopup("about:blank",p),this.acquireTokenPopupAsync(T,p,u)}}catch(w){return Promise.reject(w)}}logout(i){try{this.logger.verbose("logoutPopup called");const u=this.initializeLogoutRequest(i),p={popupName:this.generateLogoutPopupName(u),popupWindowAttributes:i?.popupWindowAttributes||{},popupWindowParent:i?.popupWindowParent??window},w=i&&i.authority,T=i&&i.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(u,p,w,T)):(this.logger.verbose("asyncPopup set to false, opening popup"),p.popup=this.openSizedPopup("about:blank",p),this.logoutPopupAsync(u,p,w,T))}catch(u){return Promise.reject(u)}}async acquireTokenPopupAsync(i,u,p){this.logger.verbose("acquireTokenPopupAsync called");const w=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,t.InteractionType.Popup);u.popup&&zc(w.authority);const T=La(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme);return w.platformBroker=T,this.config.auth.protocolMode===Vn.EAR?this.executeEarFlow(w,u):this.executeCodeFlow(w,u,p)}async executeCodeFlow(i,u,p){const w=i.correlationId,T=this.initializeServerTelemetryManager(Pt.acquireTokenPopup),R=p||await Ae(Wc,q.GeneratePkceCodes,this.logger,this.performanceClient,w)(this.performanceClient,this.logger,w),j={...i,codeChallenge:R.challenge};try{const K=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,w)({serverTelemetryManager:T,requestAuthority:j.authority,requestAzureCloudOptions:j.azureCloudOptions,requestExtraQueryParameters:j.extraQueryParameters,account:j.account});if(j.httpMethod===r.POST)return await this.executeCodeFlowWithPost(j,u,K,R.verifier);{const te=await Ae(di,q.GetAuthCodeUrl,this.logger,this.performanceClient,w)(this.config,K.authority,j,this.logger,this.performanceClient),ve=this.initiateAuthRequest(te,u);this.eventHandler.emitEvent(Le.POPUP_OPENED,t.InteractionType.Popup,{popupWindow:ve},null);const Se=await this.monitorPopupForHash(ve,u.popupWindowParent),Ue=Qn(ui,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(Se,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await Ae(Hs,q.HandleResponseCode,this.logger,this.performanceClient,w)(i,Ue,R.verifier,Pt.acquireTokenPopup,this.config,K,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(K){throw u.popup?.close(),K instanceof Q&&(K.setCorrelationId(this.correlationId),T.cacheFailedRequest(K)),K}}async executeEarFlow(i,u){const p=i.correlationId,w=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,p)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),T=await Ae(uo,q.GenerateEarKey,this.logger,this.performanceClient,p)(),R={...i,earJwk:T},j=u.popup||this.openPopup("about:blank",u);(await Yi(j.document,this.config,w,R,this.logger,this.performanceClient)).submit();const te=await Ae(this.monitorPopupForHash.bind(this),q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,p)(j,u.popupWindowParent),ve=Qn(ui,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(te,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Ae(cr,q.HandleResponseEar,this.logger,this.performanceClient,p)(R,ve,Pt.acquireTokenPopup,this.config,w,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(i,u,p,w){const T=i.correlationId,R=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,T)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),j=u.popup||this.openPopup("about:blank",u);(await Su(j.document,this.config,R,i,this.logger,this.performanceClient)).submit();const te=await Ae(this.monitorPopupForHash.bind(this),q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,T)(j,u.popupWindowParent),ve=Qn(ui,q.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(te,this.config.auth.OIDCOptions.serverResponseType,this.logger);return Ae(Hs,q.HandleResponseCode,this.logger,this.performanceClient,T)(i,ve,w,Pt.acquireTokenPopup,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(i,u,p,w){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Le.LOGOUT_START,t.InteractionType.Popup,i);const T=this.initializeServerTelemetryManager(Pt.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,i.account);const R=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:T,requestAuthority:p,account:i.account||void 0});try{R.authority.endSessionEndpoint}catch{if(i.account?.homeAccountId&&i.postLogoutRedirectUri&&R.authority.protocolMode===Vn.OIDC){if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,t.InteractionType.Popup,i),w){const te={apiId:Pt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ve=_t.getAbsoluteUrl(w,ai());await this.navigationClient.navigateInternal(ve,te)}u.popup?.close();return}}const j=R.getLogoutUri(i);this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,t.InteractionType.Popup,i);const K=this.openPopup(j,u);if(this.eventHandler.emitEvent(Le.POPUP_OPENED,t.InteractionType.Popup,{popupWindow:K},null),await this.monitorPopupForHash(K,u.popupWindowParent).catch(()=>{}),w){const te={apiId:Pt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},ve=_t.getAbsoluteUrl(w,ai());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${ve}`),await this.navigationClient.navigateInternal(ve,te)}else this.logger.verbose("No main window navigation requested")}catch(R){throw u.popup?.close(),R instanceof Q&&(R.setCorrelationId(this.correlationId),T.cacheFailedRequest(R)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,t.InteractionType.Popup,null,R),this.eventHandler.emitEvent(Le.LOGOUT_END,t.InteractionType.Popup),R}this.eventHandler.emitEvent(Le.LOGOUT_END,t.InteractionType.Popup)}initiateAuthRequest(i,u){if(i)return this.logger.infoPii(`Navigate to: ${i}`),this.openPopup(i,u);throw this.logger.error("Navigate url is empty"),He(ti)}monitorPopupForHash(i,u){return new Promise((p,w)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const T=setInterval(()=>{if(i.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(T),w(He(qr));return}let R="";try{R=i.location.href}catch{}if(!R||R==="about:blank")return;clearInterval(T);let j="";const K=this.config.auth.OIDCOptions.serverResponseType;i&&(K===b.QUERY?j=i.location.search:j=i.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),p(j)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(i,u)})}openPopup(i,u){try{let p;if(u.popup?(p=u.popup,this.logger.verbosePii(`Navigating popup window to: ${i}`),p.location.assign(i)):typeof u.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${i}`),p=this.openSizedPopup(i,u)),!p)throw He(Rs);return p.focus&&p.focus(),this.currentWindow=p,u.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),p}catch(p){throw this.logger.error("error opening popup "+p.message),He(cn)}}openSizedPopup(i,{popupName:u,popupWindowAttributes:p,popupWindowParent:w}){const T=w.screenLeft?w.screenLeft:w.screenX,R=w.screenTop?w.screenTop:w.screenY,j=w.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,K=w.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let te=p.popupSize?.width,ve=p.popupSize?.height,Se=p.popupPosition?.top,Ue=p.popupPosition?.left;return(!te||te<0||te>j)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),te=or.POPUP_WIDTH),(!ve||ve<0||ve>K)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),ve=or.POPUP_HEIGHT),(!Se||Se<0||Se>K)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),Se=Math.max(0,K/2-or.POPUP_HEIGHT/2+R)),(!Ue||Ue<0||Ue>j)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),Ue=Math.max(0,j/2-or.POPUP_WIDTH/2+T)),w.open(i,u,`width=${te}, height=${ve}, top=${Se}, left=${Ue}, scrollbars=yes`)}unloadWindow(i){this.currentWindow&&this.currentWindow.close(),i.preventDefault()}cleanPopup(i,u){i.close(),u.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(i,u){return`${or.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${i.join("-")}.${u}.${this.correlationId}`}generateLogoutPopupName(i){const u=i.account&&i.account.homeAccountId;return`${or.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${u}.${this.correlationId}`}}function Rp(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const S=window.performance.getEntriesByType("navigation");return(S.length?S[0]:void 0)?.type}class _u extends li{constructor(i,u,p,w,T,R,j,K,te,ve){super(i,u,p,w,T,R,j,te,ve),this.nativeStorage=K}async acquireToken(i){const u=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(i,t.InteractionType.Redirect);u.platformBroker=La(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme);const p=T=>{T.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Le.RESTORE_FROM_BFCACHE,t.InteractionType.Redirect))},w=this.getRedirectStartPage(i.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${w}`),this.browserStorage.setTemporaryCache(Sn.ORIGIN_URI,w,!0),window.addEventListener("pageshow",p);try{this.config.auth.protocolMode===Vn.EAR?await this.executeEarFlow(u):await this.executeCodeFlow(u,i.onRedirectNavigate)}catch(T){throw T instanceof Q&&T.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",p),T}}async executeCodeFlow(i,u){const p=i.correlationId,w=this.initializeServerTelemetryManager(Pt.acquireTokenRedirect),T=await Ae(Wc,q.GeneratePkceCodes,this.logger,this.performanceClient,p)(this.performanceClient,this.logger,p),R={...i,codeChallenge:T.challenge};this.browserStorage.cacheAuthorizeRequest(R,T.verifier);try{if(R.httpMethod===r.POST)return await this.executeCodeFlowWithPost(R);{const j=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:w,requestAuthority:R.authority,requestAzureCloudOptions:R.azureCloudOptions,requestExtraQueryParameters:R.extraQueryParameters,account:R.account}),K=await Ae(di,q.GetAuthCodeUrl,this.logger,this.performanceClient,i.correlationId)(this.config,j.authority,R,this.logger,this.performanceClient);return await this.initiateAuthRequest(K,u)}}catch(j){throw j instanceof Q&&(j.setCorrelationId(this.correlationId),w.cacheFailedRequest(j)),j}}async executeEarFlow(i){const u=i.correlationId,p=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),w=await Ae(uo,q.GenerateEarKey,this.logger,this.performanceClient,u)(),T={...i,earJwk:w};return this.browserStorage.cacheAuthorizeRequest(T),(await Yi(document,this.config,p,T,this.logger,this.performanceClient)).submit(),new Promise((j,K)=>{setTimeout(()=>{K(He(Ra,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(i){const u=i.correlationId,p=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return this.browserStorage.cacheAuthorizeRequest(i),(await Su(document,this.config,p,i,this.logger,this.performanceClient)).submit(),new Promise((T,R)=>{setTimeout(()=>{R(He(Ra,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(i="",u,p,w){const T=this.initializeServerTelemetryManager(Pt.handleRedirectPromise);try{const[R,j]=this.getRedirectResponse(i||"");if(!R)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Rp()!=="back_forward"?w.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const K=this.browserStorage.getTemporaryCache(Sn.ORIGIN_URI,!0)||e.EMPTY_STRING,te=ua(K),ve=ua(window.location.href);if(te===ve&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),K.indexOf("#")>-1&&Yd(K),await this.handleResponse(R,u,p,T);if(this.config.auth.navigateToLoginRequestUrl){if(!vu()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Sn.URL_HASH,j,!0);const Se={apiId:Pt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let Ue=!0;if(!K||K==="null"){const Qe=Qf();this.browserStorage.setTemporaryCache(Sn.ORIGIN_URI,Qe,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),Ue=await this.navigationClient.navigateInternal(Qe,Se)}else this.logger.verbose(`Navigating to loginRequestUrl: ${K}`),Ue=await this.navigationClient.navigateInternal(K,Se);if(!Ue)return await this.handleResponse(R,u,p,T)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(R,u,p,T);return null}catch(R){throw R instanceof Q&&(R.setCorrelationId(this.correlationId),T.cacheFailedRequest(R)),R}}getRedirectResponse(i){this.logger.verbose("getRedirectResponseHash called");let u=i;u||(this.config.auth.OIDCOptions.serverResponseType===b.QUERY?u=window.location.search:u=window.location.hash);let p=Ll(u);if(p){try{_p(p,this.browserCrypto,t.InteractionType.Redirect)}catch(T){return T instanceof Q&&this.logger.error(`Interaction type validation failed due to ${T.errorCode}: ${T.errorMessage}`),[null,""]}return Vd(window),this.logger.verbose("Hash contains known properties, returning response hash"),[p,u]}const w=this.browserStorage.getTemporaryCache(Sn.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Sn.URL_HASH)),w&&(p=Ll(w),p)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[p,w]):[null,""]}async handleResponse(i,u,p,w){if(!i.state)throw He(Is);if(i.ear_jwe){const j=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u.correlationId)({requestAuthority:u.authority,requestAzureCloudOptions:u.azureCloudOptions,requestExtraQueryParameters:u.extraQueryParameters,account:u.account});return Ae(cr,q.HandleResponseEar,this.logger,this.performanceClient,u.correlationId)(u,i,Pt.acquireTokenRedirect,this.config,j,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const R=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:w,requestAuthority:u.authority});return Ae(Hs,q.HandleResponseCode,this.logger,this.performanceClient,u.correlationId)(u,i,p,Pt.acquireTokenRedirect,this.config,R,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(i,u){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),i){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${i}`);const p={apiId:Pt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},w=u||this.config.auth.onRedirectNavigate;if(typeof w=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),w(i)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(i,p);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(i,p);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),He(ti)}async logout(i){this.logger.verbose("logoutRedirect called");const u=this.initializeLogoutRequest(i),p=this.initializeServerTelemetryManager(Pt.logout);try{this.eventHandler.emitEvent(Le.LOGOUT_START,t.InteractionType.Redirect,i),await this.clearCacheOnLogout(this.correlationId,u.account);const w={apiId:Pt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},T=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:p,requestAuthority:i&&i.authority,requestExtraQueryParameters:i?.extraQueryParameters,account:i&&i.account||void 0});if(T.authority.protocolMode===Vn.OIDC)try{T.authority.endSessionEndpoint}catch{if(u.account?.homeAccountId){this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,t.InteractionType.Redirect,u);return}}const R=T.getLogoutUri(u);if(this.eventHandler.emitEvent(Le.LOGOUT_SUCCESS,t.InteractionType.Redirect,u),i&&typeof i.onRedirectNavigate=="function")if(i.onRedirectNavigate(R)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,co.SIGNOUT),await this.navigationClient.navigateExternal(R,w);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,co.SIGNOUT),await this.navigationClient.navigateExternal(R,w);return}}catch(w){throw w instanceof Q&&(w.setCorrelationId(this.correlationId),p.cacheFailedRequest(w)),this.eventHandler.emitEvent(Le.LOGOUT_FAILURE,t.InteractionType.Redirect,null,w),this.eventHandler.emitEvent(Le.LOGOUT_END,t.InteractionType.Redirect),w}this.eventHandler.emitEvent(Le.LOGOUT_END,t.InteractionType.Redirect)}getRedirectStartPage(i){const u=i||window.location.href;return _t.getAbsoluteUrl(u,ai())}}async function dm(S,i,u,p,w){if(i.addQueueMeasurement(q.SilentHandlerInitiateAuthRequest,p),!S)throw u.info("Navigate url is empty"),He(ti);return w?Ae(Op,q.SilentHandlerLoadFrame,u,i,p)(S,w,i,p):Qn(Mp,q.SilentHandlerLoadFrameSync,u,i,p)(S)}async function Wr(S,i,u,p,w){const T=sh();if(!T.contentDocument)throw"No document associated with iframe!";return(await Su(T.contentDocument,S,i,u,p,w)).submit(),T}async function Np(S,i,u,p,w){const T=sh();if(!T.contentDocument)throw"No document associated with iframe!";return(await Yi(T.contentDocument,S,i,u,p,w)).submit(),T}async function Dr(S,i,u,p,w,T,R){return p.addQueueMeasurement(q.SilentHandlerMonitorIframeForHash,T),new Promise((j,K)=>{i<Kc&&w.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${i}ms) than the default (${Kc}ms). This may result in timeouts.`);const te=window.setTimeout(()=>{window.clearInterval(ve),K(He(Ns))},i),ve=window.setInterval(()=>{let Se="";const Ue=S.contentWindow;try{Se=Ue?Ue.location.href:""}catch{}if(!Se||Se==="about:blank")return;let Qe="";Ue&&(R===b.QUERY?Qe=Ue.location.search:Qe=Ue.location.hash),window.clearTimeout(te),window.clearInterval(ve),j(Qe)},u)}).finally(()=>{Qn(zs,q.RemoveHiddenIframe,w,p,T)(S)})}function Op(S,i,u,p){return u.addQueueMeasurement(q.SilentHandlerLoadFrame,p),new Promise((w,T)=>{const R=sh();window.setTimeout(()=>{if(!R){T("Unable to load iframe");return}R.src=S,w(R)},i)})}function Mp(S){const i=sh();return i.src=S,i}function sh(){const S=document.createElement("iframe");return S.className="msalSilentIframe",S.style.visibility="hidden",S.style.position="absolute",S.style.width=S.style.height="0",S.style.border="0",S.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(S),S}function zs(S){document.body===S.parentNode&&document.body.removeChild(S)}class ah extends li{constructor(i,u,p,w,T,R,j,K,te,ve,Se){super(i,u,p,w,T,R,K,ve,Se),this.apiId=j,this.nativeStorage=te}async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentIframeClientAcquireToken,i.correlationId),!i.loginHint&&!i.sid&&(!i.account||!i.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const u={...i};u.prompt?u.prompt!==v.NONE&&u.prompt!==v.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${u.prompt} with ${v.NONE}`),u.prompt=v.NONE):u.prompt=v.NONE;const p=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(u,t.InteractionType.Silent);return p.platformBroker=La(this.config,this.logger,this.platformAuthProvider,p.authenticationScheme),zc(p.authority),this.config.auth.protocolMode===Vn.EAR?this.executeEarFlow(p):this.executeCodeFlow(p)}async executeCodeFlow(i){let u;const p=this.initializeServerTelemetryManager(this.apiId);try{return u=await Ae(this.createAuthCodeClient.bind(this),q.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:p,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),await Ae(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,i.correlationId)(u,i)}catch(w){if(w instanceof Q&&(w.setCorrelationId(this.correlationId),p.cacheFailedRequest(w)),!u||!(w instanceof Q)||w.errorCode!==or.INVALID_GRANT_ERROR)throw w;return this.performanceClient.addFields({retryError:w.errorCode},this.correlationId),await Ae(this.silentTokenHelper.bind(this),q.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(u,i)}}async executeEarFlow(i){const u=i.correlationId,p=await Ae(this.getDiscoveredAuthority.bind(this),q.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,u)({requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),w=await Ae(uo,q.GenerateEarKey,this.logger,this.performanceClient,u)(),T={...i,earJwk:w},R=await Ae(Np,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,u)(this.config,p,T,this.logger,this.performanceClient),j=this.config.auth.OIDCOptions.serverResponseType,K=await Ae(Dr,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,u)(R,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,u,j),te=Qn(ui,q.DeserializeResponse,this.logger,this.performanceClient,u)(K,j,this.logger);return Ae(cr,q.HandleResponseEar,this.logger,this.performanceClient,u)(T,te,this.apiId,this.config,p,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(He(Li))}async silentTokenHelper(i,u){const p=u.correlationId;this.performanceClient.addQueueMeasurement(q.SilentIframeClientTokenHelper,p);const w=await Ae(Wc,q.GeneratePkceCodes,this.logger,this.performanceClient,p)(this.performanceClient,this.logger,p),T={...u,codeChallenge:w.challenge};let R;if(u.httpMethod===r.POST)R=await Ae(Wr,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,p)(this.config,i.authority,T,this.logger,this.performanceClient);else{const ve=await Ae(di,q.GetAuthCodeUrl,this.logger,this.performanceClient,p)(this.config,i.authority,T,this.logger,this.performanceClient);R=await Ae(dm,q.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,p)(ve,this.performanceClient,this.logger,p,this.config.system.navigateFrameWait)}const j=this.config.auth.OIDCOptions.serverResponseType,K=await Ae(Dr,q.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,p)(R,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,p,j),te=Qn(ui,q.DeserializeResponse,this.logger,this.performanceClient,p)(K,j,this.logger);return Ae(Hs,q.HandleResponseCode,this.logger,this.performanceClient,p)(u,te,w.verifier,this.apiId,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class hm extends li{async acquireToken(i){this.performanceClient.addQueueMeasurement(q.SilentRefreshClientAcquireToken,i.correlationId);const u=await Ae(ho,q.InitializeBaseRequest,this.logger,this.performanceClient,i.correlationId)(i,this.config,this.performanceClient,this.logger),p={...i,...u};i.redirectUri&&(p.redirectUri=this.getRedirectUri(i.redirectUri));const w=this.initializeServerTelemetryManager(Pt.acquireTokenSilent_silentFlow),T=await this.createRefreshTokenClient({serverTelemetryManager:w,authorityUrl:p.authority,azureCloudOptions:p.azureCloudOptions,account:p.account});return Ae(T.acquireTokenByRefreshToken.bind(T),q.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(p).catch(R=>{throw R.setCorrelationId(this.correlationId),w.cacheFailedRequest(R),R})}logout(){return Promise.reject(He(Li))}async createRefreshTokenClient(i){const u=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i.serverTelemetryManager,requestAuthority:i.authorityUrl,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account});return new Sc(u,this.performanceClient)}}class Jc{constructor(i,u,p,w){this.isBrowserEnvironment=typeof window<"u",this.config=i,this.storage=u,this.logger=p,this.cryptoObj=w}async loadExternalTokens(i,u,p){if(!this.isBrowserEnvironment)throw He(Ui);const w=i.correlationId||sr(),T=u.id_token?An(u.id_token,$r):void 0,R={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},j=i.authority?new gn(gn.generateAuthority(i.authority,i.azureCloudOptions),this.config.system.networkClient,this.storage,R,this.logger,i.correlationId||sr()):void 0,K=await this.loadAccount(i,p.clientInfo||u.client_info||"",w,T,j),te=await this.loadIdToken(u,K.homeAccountId,K.environment,K.realm,w),ve=await this.loadAccessToken(i,u,K.homeAccountId,K.environment,K.realm,p,w),Se=await this.loadRefreshToken(u,K.homeAccountId,K.environment,w);return this.generateAuthenticationResult(i,{account:K,idToken:te,accessToken:ve,refreshToken:Se},T,j)}async loadAccount(i,u,p,w,T){if(this.logger.verbose("TokenCache - loading account"),i.account){const te=Sr.createFromAccountInfo(i.account);return await this.storage.setAccount(te,p),te}else if(!T||!u&&!w)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),He(Aa);const R=Sr.generateHomeAccountId(u,T.authorityType,this.logger,this.cryptoObj,w),j=w?.tid,K=Wl(this.storage,T,R,$r,p,w,u,T.hostnameAndPort,j,void 0,void 0,this.logger);return await this.storage.setAccount(K,p),K}async loadIdToken(i,u,p,w,T){if(!i.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const R=wc(u,p,i.id_token,this.config.auth.clientId,w);return await this.storage.setIdTokenCredential(R,T),R}async loadAccessToken(i,u,p,w,T,R,j){if(u.access_token)if(u.expires_in){if(!u.scope&&(!i.scopes||!i.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const K=u.scope?an.fromString(u.scope):new an(i.scopes),te=R.expiresOn||u.expires_in+Tn(),ve=R.extendedExpiresOn||(u.ext_expires_in||u.expires_in)+Tn(),Se=io(p,w,u.access_token,this.config.auth.clientId,T,K.printScopes(),te,ve,$r);return await this.storage.setAccessTokenCredential(Se,j),Se}async loadRefreshToken(i,u,p,w){if(!i.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const T=Rf(u,p,i.refresh_token,this.config.auth.clientId,i.foci,void 0,i.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(T,w),T}generateAuthenticationResult(i,u,p,w){let T="",R=[],j=null,K;u?.accessToken&&(T=u.accessToken.secret,R=an.fromString(u.accessToken.target).asArray(),j=oo(u.accessToken.expiresOn),K=oo(u.accessToken.extendedExpiresOn));const te=u.account;return{authority:w?w.canonicalAuthority:"",uniqueId:u.account.localAccountId,tenantId:u.account.realm,scopes:R,account:te.getAccountInfo(),idToken:u.idToken?.secret||"",idTokenClaims:p||{},accessToken:T,fromCache:!0,expiresOn:j,correlationId:i.correlationId||"",requestId:"",extExpiresOn:K,familyId:u.refreshToken?.familyId||"",tokenType:u?.accessToken?.tokenType||"",state:i.state||"",cloudGraphHostName:te.cloudGraphHostName||"",msGraphHost:te.msGraphHost||"",fromNativeBroker:!1}}}class Pp extends Tc{constructor(i){super(i),this.includeRedirectUri=!1}}class Dp extends li{constructor(i,u,p,w,T,R,j,K,te,ve){super(i,u,p,w,T,R,K,te,ve),this.apiId=j}async acquireToken(i){if(!i.code)throw He(Os);const u=await Ae(this.initializeAuthorizationRequest.bind(this),q.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,i.correlationId)(i,t.InteractionType.Silent),p=this.initializeServerTelemetryManager(this.apiId);try{const w={...u,code:i.code},T=await Ae(this.getClientConfiguration.bind(this),q.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,i.correlationId)({serverTelemetryManager:p,requestAuthority:u.authority,requestAzureCloudOptions:u.azureCloudOptions,requestExtraQueryParameters:u.extraQueryParameters,account:u.account}),R=new Pp(T);this.logger.verbose("Auth code client created");const j=new cm(R,this.browserStorage,w,this.logger,this.performanceClient);return await Ae(j.handleCodeResponseFromServer.bind(j),q.HandleCodeResponseFromServer,this.logger,this.performanceClient,i.correlationId)({code:i.code,msgraph_host:i.msGraphHost,cloud_graph_host_name:i.cloudGraphHostName,cloud_instance_host_name:i.cloudInstanceHostName},u,!1)}catch(w){throw w instanceof Q&&(w.setCorrelationId(this.correlationId),p.cacheFailedRequest(w)),w}}logout(){return Promise.reject(He(Li))}}function jp(S,i,u){const p=window.msal?.clientIds||[],w=p.length,T=p.filter(R=>R===S).length;T>1&&u.warning("There is already an instance of MSAL.js in the window with the same client id."),i.add({msalInstanceCount:w,sameClientIdInstanceCount:T})}function Zc(S,i,u){try{Cu(S)}catch(p){throw i.end({success:!1},p,u),p}}class Ua{constructor(i){this.operatingContext=i,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=i.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Or(this.logger,this.performanceClient):En,this.eventHandler=new Qc(this.logger),this.browserStorage=this.isBrowserEnvironment?new Yc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,kd(this.config.auth)):xu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const u={cacheLocation:yn.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:yn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Yc(this.config.auth.clientId,u,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Jc(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(i,u){const p=new Ua(i);return await p.initialize(u),p}trackPageVisibility(i){i&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},i))}async initialize(i,u){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END);return}const p=i?.correlationId||this.getRequestCorrelationId(),w=this.config.system.allowPlatformBroker,T=this.performanceClient.startMeasurement(q.InitializeClientApplication,p);if(this.eventHandler.emitEvent(Le.INITIALIZE_START),!u)try{this.logMultipleInstances(T)}catch{}if(await Ae(this.browserStorage.initialize.bind(this.browserStorage),q.InitializeCache,this.logger,this.performanceClient,p)(p),w)try{this.platformAuthProvider=await ja(this.logger,this.performanceClient,p,this.config.system.nativeBrokerHandshakeTimeout)}catch(R){this.logger.verbose(R)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Qn(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),q.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,p)(p)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(p),this.initialized=!0,this.eventHandler.emitEvent(Le.INITIALIZE_END),T.end({allowPlatformBroker:w,success:!0})}async handleRedirectPromise(i){if(this.logger.verbose("handleRedirectPromise called"),It(this.initialized),this.isBrowserEnvironment){const u=i||"";let p=this.redirectResponse.get(u);return typeof p>"u"?(p=this.handleRedirectPromiseInternal(i),this.redirectResponse.set(u,p),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),p}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(i){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===co.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const p=this.getAllAccounts(),w=this.browserStorage.getCachedNativeRequest(),T=w&&this.platformAuthProvider&&!i;let R;this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_START,t.InteractionType.Redirect);let j;try{if(T&&this.platformAuthProvider){R=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,w?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),R.add({isPlatformBrokerRequest:!0});const K=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Pt.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,w.accountId,this.nativeInternalStorage,w.correlationId);j=Ae(K.handleRedirectPromise.bind(K),q.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,R.event.correlationId)(this.performanceClient,R.event.correlationId)}else{const[K,te]=this.browserStorage.getCachedRequest(),ve=K.correlationId;R=this.performanceClient.startMeasurement(q.AcquireTokenRedirect,ve),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const Se=this.createRedirectClient(ve);j=Ae(Se.handleRedirectPromise.bind(Se),q.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,R.event.correlationId)(i,K,te,R)}}catch(K){throw this.browserStorage.resetRequestCache(),K}return j.then(K=>(K?(this.browserStorage.resetRequestCache(),p.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,t.InteractionType.Redirect,K),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Redirect,K),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),R.end({success:!0},void 0,K.account)):R.event.errorCode?R.end({success:!1},void 0):R.discard(),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,t.InteractionType.Redirect),K)).catch(K=>{this.browserStorage.resetRequestCache();const te=K;throw p.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Redirect,null,te):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,t.InteractionType.Redirect,null,te),this.eventHandler.emitEvent(Le.HANDLE_REDIRECT_END,t.InteractionType.Redirect),R.end({success:!1},te),K})}async acquireTokenRedirect(i){const u=this.getRequestCorrelationId(i);this.logger.verbose("acquireTokenRedirect called",u);const p=this.performanceClient.startMeasurement(q.AcquireTokenPreRedirect,u);p.add({scenarioId:i.scenarioId});const w=i.onRedirectNavigate;if(w)i.onRedirectNavigate=R=>{const j=typeof w=="function"?w(R):void 0;return p.add({navigateCallbackResult:j!==!1}),p.event=p.end({success:!0},void 0,i.account)||p.event,j};else{const R=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=j=>{const K=typeof R=="function"?R(j):void 0;return p.add({navigateCallbackResult:K!==!1}),p.event=p.end({success:!0},void 0,i.account)||p.event,K}}const T=this.getAllAccounts().length>0;try{Qd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,co.SIGNIN),T?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,t.InteractionType.Redirect,i):this.eventHandler.emitEvent(Le.LOGIN_START,t.InteractionType.Redirect,i);let R;return this.platformAuthProvider&&this.canUsePlatformBroker(i)?R=new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Pt.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(i),this.nativeInternalStorage,u).acquireTokenRedirect(i,p).catch(K=>{if(p.add({brokerErrorName:K.name,brokerErrorCode:K.errorCode}),K instanceof bn&&Yr(K))return this.platformAuthProvider=void 0,this.createRedirectClient(u).acquireToken(i);if(K instanceof Nn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(u).acquireToken(i);throw K}):R=this.createRedirectClient(u).acquireToken(i),await R}catch(R){throw this.browserStorage.resetRequestCache(),p.event.status===2?this.performanceClient.startMeasurement(q.AcquireTokenRedirect,u).end({success:!1},R,i.account):p.end({success:!1},R,i.account),T?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Redirect,null,R):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,t.InteractionType.Redirect,null,R),R}}acquireTokenPopup(i){const u=this.getRequestCorrelationId(i),p=this.performanceClient.startMeasurement(q.AcquireTokenPopup,u);p.add({scenarioId:i.scenarioId});try{this.logger.verbose("acquireTokenPopup called",u),Zc(this.initialized,p,i.account),this.browserStorage.setInteractionInProgress(!0,co.SIGNIN)}catch(j){return Promise.reject(j)}const w=this.getAllAccounts();w.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,t.InteractionType.Popup,i):this.eventHandler.emitEvent(Le.LOGIN_START,t.InteractionType.Popup,i);let T;const R=this.getPreGeneratedPkceCodes(u);return this.canUsePlatformBroker(i)?(p.add({isPlatformBrokerRequest:!0}),T=this.acquireTokenNative({...i,correlationId:u},Pt.acquireTokenPopup).then(j=>(p.end({success:!0},void 0,j.account),j)).catch(j=>{if(p.add({brokerErrorName:j.name,brokerErrorCode:j.errorCode}),j instanceof bn&&Yr(j))return this.platformAuthProvider=void 0,this.createPopupClient(u).acquireToken(i,R);if(j instanceof Nn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(u).acquireToken(i,R);throw j})):T=this.createPopupClient(u).acquireToken(i,R),T.then(j=>(w.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Le.LOGIN_SUCCESS,t.InteractionType.Popup,j):this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Popup,j),p.end({success:!0,accessTokenSize:j.accessToken.length,idTokenSize:j.idToken.length},void 0,j.account),j)).catch(j=>(w.length>0?this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Popup,null,j):this.eventHandler.emitEvent(Le.LOGIN_FAILURE,t.InteractionType.Popup,null,j),p.end({success:!1},j,i.account),Promise.reject(j))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(u)})}trackPageVisibilityWithMeasurement(){const i=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;i&&(this.logger.info("Perf: Visibility change detected in ",i.event.name),i.increment({visibilityChangeCount:1}))}async ssoSilent(i){const u=this.getRequestCorrelationId(i),p={...i,prompt:i.prompt,correlationId:u};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(q.SsoSilent,u),this.ssoSilentMeasurement?.add({scenarioId:i.scenarioId}),Zc(this.initialized,this.ssoSilentMeasurement,i.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",u),this.eventHandler.emitEvent(Le.SSO_SILENT_START,t.InteractionType.Silent,p);let w;return this.canUsePlatformBroker(p)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),w=this.acquireTokenNative(p,Pt.ssoSilent).catch(T=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:T.name,brokerErrorCode:T.errorCode}),T instanceof bn&&Yr(T))return this.platformAuthProvider=void 0,this.createSilentIframeClient(p.correlationId).acquireToken(p);throw T})):w=this.createSilentIframeClient(p.correlationId).acquireToken(p),w.then(T=>(this.eventHandler.emitEvent(Le.SSO_SILENT_SUCCESS,t.InteractionType.Silent,T),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:T.accessToken.length,idTokenSize:T.idToken.length},void 0,T.account),T)).catch(T=>{throw this.eventHandler.emitEvent(Le.SSO_SILENT_FAILURE,t.InteractionType.Silent,null,T),this.ssoSilentMeasurement?.end({success:!1},T,i.account),T}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(i){const u=this.getRequestCorrelationId(i);this.logger.trace("acquireTokenByCode called",u);const p=this.performanceClient.startMeasurement(q.AcquireTokenByCode,u);Zc(this.initialized,p),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_START,t.InteractionType.Silent,i),p.add({scenarioId:i.scenarioId});try{if(i.code&&i.nativeAccountId)throw He(Sa);if(i.code){const w=i.code;let T=this.hybridAuthCodeResponses.get(w);return T?(this.logger.verbose("Existing acquireTokenByCode request found",u),p.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",u),T=this.acquireTokenByCodeAsync({...i,correlationId:u}).then(R=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_SUCCESS,t.InteractionType.Silent,R),this.hybridAuthCodeResponses.delete(w),p.end({success:!0,accessTokenSize:R.accessToken.length,idTokenSize:R.idToken.length},void 0,R.account),R)).catch(R=>{throw this.hybridAuthCodeResponses.delete(w),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,t.InteractionType.Silent,null,R),p.end({success:!1},R),R}),this.hybridAuthCodeResponses.set(w,T)),await T}else if(i.nativeAccountId)if(this.canUsePlatformBroker(i,i.nativeAccountId)){p.add({isPlatformBrokerRequest:!0});const w=await this.acquireTokenNative({...i,correlationId:u},Pt.acquireTokenByCode,i.nativeAccountId).catch(T=>{throw T instanceof bn&&Yr(T)&&(this.platformAuthProvider=void 0),p.add({brokerErrorName:T.name,brokerErrorCode:T.errorCode}),T});return p.end({success:!0},void 0,w.account),w}else throw He(Mc);else throw He(Ta)}catch(w){throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_BY_CODE_FAILURE,t.InteractionType.Silent,null,w),p.end({success:!1},w),w}}async acquireTokenByCodeAsync(i){return this.logger.trace("acquireTokenByCodeAsync called",i.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(q.AcquireTokenByCodeAsync,i.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(i.correlationId).acquireToken(i).then(w=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:w.fromCache}),w)).catch(w=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},w),w}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(i,u){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenFromCache,i.correlationId),u){case _n.Default:case _n.AccessToken:case _n.AccessTokenAndRefreshToken:const p=this.createSilentCacheClient(i.correlationId);return Ae(p.acquireToken.bind(p),q.SilentCacheClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw Ie(Dn)}}async acquireTokenByRefreshToken(i,u){switch(this.performanceClient.addQueueMeasurement(q.AcquireTokenByRefreshToken,i.correlationId),u){case _n.Default:case _n.AccessTokenAndRefreshToken:case _n.RefreshToken:case _n.RefreshTokenAndNetwork:const p=this.createSilentRefreshClient(i.correlationId);return Ae(p.acquireToken.bind(p),q.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i);default:throw Ie(Dn)}}async acquireTokenBySilentIframe(i){this.performanceClient.addQueueMeasurement(q.AcquireTokenBySilentIframe,i.correlationId);const u=this.createSilentIframeClient(i.correlationId);return Ae(u.acquireToken.bind(u),q.SilentIframeClientAcquireToken,this.logger,this.performanceClient,i.correlationId)(i)}async logout(i){const u=this.getRequestCorrelationId(i);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",u),this.logoutRedirect({correlationId:u,...i})}async logoutRedirect(i){const u=this.getRequestCorrelationId(i);return Qd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,co.SIGNOUT),this.createRedirectClient(u).logout(i)}logoutPopup(i){try{const u=this.getRequestCorrelationId(i);return Cu(this.initialized),this.browserStorage.setInteractionInProgress(!0,co.SIGNOUT),this.createPopupClient(u).logout(i).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(u){return Promise.reject(u)}}async clearCache(i){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const u=this.getRequestCorrelationId(i);return this.createSilentCacheClient(u).logout(i)}getAllAccounts(i){const u=this.getRequestCorrelationId();return Mr(this.logger,this.browserStorage,this.isBrowserEnvironment,u,i)}getAccount(i){const u=this.getRequestCorrelationId();return Vr(i,this.logger,this.browserStorage,u)}getAccountByUsername(i){const u=this.getRequestCorrelationId();return sm(i,this.logger,this.browserStorage,u)}getAccountByHomeId(i){const u=this.getRequestCorrelationId();return Pr(i,this.logger,this.browserStorage,u)}getAccountByLocalId(i){const u=this.getRequestCorrelationId();return am(i,this.logger,this.browserStorage,u)}setActiveAccount(i){const u=this.getRequestCorrelationId();$i(i,this.browserStorage,u)}getActiveAccount(){const i=this.getRequestCorrelationId();return Ls(this.browserStorage,i)}async hydrateCache(i,u){this.logger.verbose("hydrateCache called");const p=Sr.createFromAccountInfo(i.account,i.cloudGraphHostName,i.msGraphHost);return await this.browserStorage.setAccount(p,i.correlationId),i.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(i,u)):this.browserStorage.hydrateCache(i,u)}async acquireTokenNative(i,u,p,w){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw He(ka);return new fo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,u,this.performanceClient,this.platformAuthProvider,p||this.getNativeAccountId(i),this.nativeInternalStorage,i.correlationId).acquireToken(i,w)}canUsePlatformBroker(i,u){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!La(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(i.prompt)switch(i.prompt){case v.NONE:case v.CONSENT:case v.LOGIN:case v.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${i.prompt} is not compatible with platform broker flow, returning false`),!1}return!u&&!this.getNativeAccountId(i)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(i){const u=i.account||this.getAccount({loginHint:i.loginHint,sid:i.sid})||this.getActiveAccount();return u&&u.nativeAccountId||""}createPopupClient(i){return new um(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createRedirectClient(i){return new _u(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createSilentIframeClient(i){return new ah(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Pt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,i)}createSilentCacheClient(i){return new rh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,i)}createSilentRefreshClient(i){return new hm(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,i)}createSilentAuthCodeClient(i){return new Dp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Pt.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,i)}addEventCallback(i,u){return this.eventHandler.addEventCallback(i,u)}removeEventCallback(i){this.eventHandler.removeEventCallback(i)}addPerformanceCallback(i){return Ot(),this.performanceClient.addPerformanceCallback(i)}removePerformanceCallback(i){return this.performanceClient.removePerformanceCallback(i)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==yn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==yn.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(i){this.logger=i}initializeWrapperLibrary(i,u){this.browserStorage.setWrapperMetadata(i,u)}setNavigationClient(i){this.navigationClient=i}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(i){return i?.correlationId?i.correlationId:this.isBrowserEnvironment?sr():e.EMPTY_STRING}async loginRedirect(i){const u=this.getRequestCorrelationId(i);return this.logger.verbose("loginRedirect called",u),this.acquireTokenRedirect({correlationId:u,...i||Ld})}loginPopup(i){const u=this.getRequestCorrelationId(i);return this.logger.verbose("loginPopup called",u),this.acquireTokenPopup({correlationId:u,...i||Ld})}async acquireTokenSilent(i){const u=this.getRequestCorrelationId(i),p=this.performanceClient.startMeasurement(q.AcquireTokenSilent,u);p.add({cacheLookupPolicy:i.cacheLookupPolicy,scenarioId:i.scenarioId}),Zc(this.initialized,p,i.account),this.logger.verbose("acquireTokenSilent called",u);const w=i.account||this.getActiveAccount();if(!w)throw He(xa);return this.acquireTokenSilentDeduped(i,w,u).then(T=>(p.end({success:!0,fromCache:T.fromCache,accessTokenSize:T.accessToken.length,idTokenSize:T.idToken.length},void 0,T.account),{...T,state:i.state,correlationId:u})).catch(T=>{throw T instanceof Q&&T.setCorrelationId(u),p.end({success:!1},T,w),T})}async acquireTokenSilentDeduped(i,u,p){const w=At(this.config.auth.clientId,{...i,authority:i.authority||this.config.auth.authority},u.homeAccountId),T=JSON.stringify(w),R=this.activeSilentTokenRequests.get(T);if(typeof R>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",p),this.performanceClient.addFields({deduped:!1},p);const j=Ae(this.acquireTokenSilentAsync.bind(this),q.AcquireTokenSilentAsync,this.logger,this.performanceClient,p)({...i,correlationId:p},u);return this.activeSilentTokenRequests.set(T,j),j.finally(()=>{this.activeSilentTokenRequests.delete(T)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",p),this.performanceClient.addFields({deduped:!0},p),R}async acquireTokenSilentAsync(i,u){const p=()=>this.trackPageVisibility(i.correlationId);this.performanceClient.addQueueMeasurement(q.AcquireTokenSilentAsync,i.correlationId),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,t.InteractionType.Silent,i),i.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},i.correlationId),document.addEventListener("visibilitychange",p);const w=await Ae(Sp,q.InitializeSilentRequest,this.logger,this.performanceClient,i.correlationId)(i,u,this.config,this.performanceClient,this.logger),T=i.cacheLookupPolicy||_n.Default;return this.acquireTokenSilentNoIframe(w,T).catch(async j=>{if(Rw(j,T))if(this.activeIframeRequest)if(T!==_n.Skip){const[te,ve]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${ve}`,w.correlationId);const Se=this.performanceClient.startMeasurement(q.AwaitConcurrentIframe,w.correlationId);Se.add({awaitIframeCorrelationId:ve});const Ue=await te;if(Se.end({success:Ue}),Ue)return this.logger.verbose(`Parallel iframe request with correlationId: ${ve} succeeded. Retrying cache and/or RT redemption`,w.correlationId),this.acquireTokenSilentNoIframe(w,T);throw this.logger.info(`Iframe request with correlationId: ${ve} failed. Interaction is required.`),j}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",w.correlationId),Ae(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,w.correlationId)(w);else{let te;return this.activeIframeRequest=[new Promise(ve=>{te=ve}),w.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",w.correlationId),Ae(this.acquireTokenBySilentIframe.bind(this),q.AcquireTokenBySilentIframe,this.logger,this.performanceClient,w.correlationId)(w).then(ve=>(te(!0),ve)).catch(ve=>{throw te(!1),ve}).finally(()=>{this.activeIframeRequest=void 0})}else throw j}).then(j=>(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,j),this.performanceClient.addFields({fromCache:j.fromCache},i.correlationId),j)).catch(j=>{throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null,j),j}).finally(()=>{document.removeEventListener("visibilitychange",p)})}async acquireTokenSilentNoIframe(i,u){return La(this.config,this.logger,this.platformAuthProvider,i.authenticationScheme)&&i.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},i.correlationId),this.acquireTokenNative(i,Pt.acquireTokenSilent_silentFlow,i.account.nativeAccountId,u).catch(async p=>{throw this.performanceClient.addFields({brokerErrorName:p.name,brokerErrorCode:p.errorCode},i.correlationId),p instanceof bn&&Yr(p)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,Ie(Dn)):p})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),u===_n.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),Ae(this.acquireTokenFromCache.bind(this),q.AcquireTokenFromCache,this.logger,this.performanceClient,i.correlationId)(i,u).catch(p=>{if(u===_n.AccessToken)throw p;return this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_NETWORK_START,t.InteractionType.Silent,i),Ae(this.acquireTokenByRefreshToken.bind(this),q.AcquireTokenByRefreshToken,this.logger,this.performanceClient,i.correlationId)(i,u)}))}async preGeneratePkceCodes(i){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await Ae(Wc,q.GeneratePkceCodes,this.logger,this.performanceClient,i)(this.performanceClient,this.logger,i),Promise.resolve()}getPreGeneratedPkceCodes(i){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const u=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose(`${u?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!u},i),u}logMultipleInstances(i){const u=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(u),jp(u,i,this.logger)}}function Rw(S,i){const u=!(S instanceof Nn&&S.subError!==_r),p=S.errorCode===or.INVALID_GRANT_ERROR||S.errorCode===Dn,w=u&&p||S.errorCode===So||S.errorCode===Ql,T=lp.includes(i);return w&&T}function Nw(S){return S.status!==void 0}class Ow{constructor(i,u,p,w){this.clientId=i,this.clientCapabilities=u,this.crypto=p,this.logger=w}toNaaTokenRequest(i){let u;i.extraQueryParameters===void 0?u=new Map:u=new Map(Object.entries(i.extraQueryParameters));const p=i.correlationId||this.crypto.createNewGuid(),w=Ed(i.claims,this.clientCapabilities),T=i.scopes||s;return{platformBrokerId:i.account?.homeAccountId,clientId:this.clientId,authority:i.authority,scope:T.join(" "),correlationId:p,claims:$n.isEmptyObj(w)?void 0:w,state:i.state,authenticationScheme:i.authenticationScheme||$.BEARER,extraParameters:u}}fromNaaTokenResponse(i,u,p){if(!u.token.id_token||!u.token.access_token)throw Ie(xe);const w=oo(p+(u.token.expires_in||0)),T=An(u.token.id_token,this.crypto.base64Decode),R=this.fromNaaAccountInfo(u.account,u.token.id_token,T),j=u.token.scope||i.scope;return{authority:u.token.authority||R.environment,uniqueId:R.localAccountId,tenantId:R.tenantId,scopes:j.split(" "),account:R,idToken:u.token.id_token,idTokenClaims:T,accessToken:u.token.access_token,fromCache:!1,expiresOn:w,tokenType:i.authenticationScheme||$.BEARER,correlationId:i.correlationId,extExpiresOn:w,state:i.state}}fromNaaAccountInfo(i,u,p){const w=p||i.idTokenClaims,T=i.localAccountId||w?.oid||w?.sub||"",R=i.tenantId||w?.tid||"",j=i.homeAccountId||`${T}.${R}`,K=i.username||w?.preferred_username||"",te=i.name||w?.name,ve=i.loginHint||w?.login_hint,Se=new Map,Ue=Si(j,T,R,w);return Se.set(R,Ue),{homeAccountId:j,environment:i.environment,tenantId:R,username:K,localAccountId:T,name:te,loginHint:ve,idToken:u,idTokenClaims:w,tenantProfiles:Se}}fromBridgeError(i){if(Nw(i))switch(i.status){case ci.UserCancel:return new jn(oa);case ci.NoNetwork:return new jn(xo);case ci.AccountUnavailable:return new jn(Pn);case ci.Disabled:return new jn(qo);case ci.NestedAppAuthUnavailable:return new jn(i.code||qo,i.description);case ci.TransientError:case ci.PersistentError:return new Nt(i.code,i.description);case ci.UserInteractionRequired:return new Nn(i.code,i.description);default:return new Q(i.code,i.description)}else return new Q("unknown_error","An unknown error occurred")}toAuthenticationResultFromCache(i,u,p,w,T){if(!u||!p)throw Ie(xe);const R=An(u.secret,this.crypto.base64Decode),j=p.target||w.scopes.join(" ");return{authority:p.environment||i.environment,uniqueId:i.localAccountId,tenantId:i.tenantId,scopes:j.split(" "),account:i,idToken:u.secret,idTokenClaims:R||{},accessToken:p.secret,fromCache:!0,expiresOn:oo(p.expiresOn),extExpiresOn:oo(p.extendedExpiresOn),tokenType:w.authenticationScheme||$.BEARER,correlationId:T,state:w.state}}}const fm={unsupportedMethod:{code:"unsupported_method",desc:"This method is not supported in nested app environment."}};class Mn extends Q{constructor(i,u){super(i,u),Object.setPrototypeOf(this,Mn.prototype),this.name="NestedAppAuthError"}static createUnsupportedError(){return new Mn(fm.unsupportedMethod.code,fm.unsupportedMethod.desc)}}class Qi{constructor(i){this.operatingContext=i;const u=this.operatingContext.getBridgeProxy();if(u!==void 0)this.bridgeProxy=u;else throw new Error("unexpected: bridgeProxy is undefined");this.config=i.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=i.isBrowserEnvironment()?new Or(this.logger,this.performanceClient,!0):En,this.eventHandler=new Qc(this.logger),this.browserStorage=this.operatingContext.isBrowserEnvironment()?new Yc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,kd(this.config.auth)):xu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler),this.nestedAppAuthAdapter=new Ow(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger);const p=this.bridgeProxy.getAccountContext();this.currentAccountContext=p||null}static async createController(i){const u=new Qi(i);return Promise.resolve(u)}async initialize(i,u){const p=i?.correlationId||sr();return await this.browserStorage.initialize(p),Promise.resolve()}ensureValidRequest(i){return i?.correlationId?i:{...i,correlationId:this.browserCrypto.createNewGuid()}}async acquireTokenInteractive(i){const u=this.ensureValidRequest(i);this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,t.InteractionType.Popup,u);const p=this.performanceClient.startMeasurement(q.AcquireTokenPopup,u.correlationId);p.add({nestedAppAuthRequest:!0});try{const w=this.nestedAppAuthAdapter.toNaaTokenRequest(u),T=Tn(),R=await this.bridgeProxy.getTokenInteractive(w),j={...this.nestedAppAuthAdapter.fromNaaTokenResponse(w,R,T)};try{await this.hydrateCache(j,i)}catch(K){this.logger.warningPii(`Failed to hydrate cache. Error: ${K}`,u.correlationId)}return this.currentAccountContext={homeAccountId:j.account.homeAccountId,environment:j.account.environment,tenantId:j.account.tenantId},this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Popup,j),p.add({accessTokenSize:j.accessToken.length,idTokenSize:j.idToken.length}),p.end({success:!0,requestId:j.requestId},void 0,j.account),j}catch(w){const T=w instanceof Q?w:this.nestedAppAuthAdapter.fromBridgeError(w);throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Popup,null,w),p.end({success:!1},w,i.account),T}}async acquireTokenSilentInternal(i){const u=this.ensureValidRequest(i);this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_START,t.InteractionType.Silent,u);const p=await this.acquireTokenFromCache(u);if(p)return this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,p),p;const w=this.performanceClient.startMeasurement(q.SsoSilent,u.correlationId);w.increment({visibilityChangeCount:0}),w.add({nestedAppAuthRequest:!0});try{const T=this.nestedAppAuthAdapter.toNaaTokenRequest(u);T.forceRefresh=u.forceRefresh;const R=Tn(),j=await this.bridgeProxy.getTokenSilent(T),K=this.nestedAppAuthAdapter.fromNaaTokenResponse(T,j,R);try{await this.hydrateCache(K,i)}catch(te){this.logger.warningPii(`Failed to hydrate cache. Error: ${te}`,u.correlationId)}return this.currentAccountContext={homeAccountId:K.account.homeAccountId,environment:K.account.environment,tenantId:K.account.tenantId},this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,K),w?.add({accessTokenSize:K.accessToken.length,idTokenSize:K.idToken.length}),w?.end({success:!0,requestId:K.requestId},void 0,K.account),K}catch(T){const R=T instanceof Q?T:this.nestedAppAuthAdapter.fromBridgeError(T);throw this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null,T),w?.end({success:!1},T,i.account),R}}async acquireTokenFromCache(i){const u=this.performanceClient.startMeasurement(q.AcquireTokenSilent,i.correlationId);if(u?.add({nestedAppAuthRequest:!0}),i.claims)return this.logger.verbose("Claims are present in the request, skipping cache lookup"),null;if(i.forceRefresh)return this.logger.verbose("forceRefresh is set to true, skipping cache lookup"),null;let p=null;switch(i.cacheLookupPolicy||(i.cacheLookupPolicy=_n.Default),i.cacheLookupPolicy){case _n.Default:case _n.AccessToken:case _n.AccessTokenAndRefreshToken:p=await this.acquireTokenFromCacheInternal(i);break;default:return null}return p?(this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_SUCCESS,t.InteractionType.Silent,p),u.add({accessTokenSize:p.accessToken.length,idTokenSize:p.idToken.length}),u.end({success:!0},void 0,p.account),p):(this.logger.warning("Cached tokens are not found for the account, proceeding with silent token request."),this.eventHandler.emitEvent(Le.ACQUIRE_TOKEN_FAILURE,t.InteractionType.Silent,null),u.end({success:!1},void 0,i.account),null)}async acquireTokenFromCacheInternal(i){const u=this.bridgeProxy.getAccountContext()||this.currentAccountContext;let p=null;const w=i.correlationId||this.browserCrypto.createNewGuid();if(u&&(p=Vr(u,this.logger,this.browserStorage,w)),!p)return this.logger.verbose("No active account found, falling back to the host"),Promise.resolve(null);this.logger.verbose("active account found, attempting to acquire token silently");const T={...i,correlationId:i.correlationId||this.browserCrypto.createNewGuid(),authority:i.authority||p.environment,scopes:i.scopes?.length?i.scopes:[...s]},R=this.browserStorage.getTokenKeys(),j=this.browserStorage.getAccessToken(p,T,R,p.tenantId);if(j){if(Tr(j.cachedAt)||Wo(j.expiresOn,this.config.system.tokenRenewalOffsetSeconds))return this.logger.verbose("Cached access token has expired"),Promise.resolve(null)}else return this.logger.verbose("No cached access token found"),Promise.resolve(null);const K=this.browserStorage.getIdToken(p,T.correlationId,R,p.tenantId,this.performanceClient);return K?this.nestedAppAuthAdapter.toAuthenticationResultFromCache(p,K,j,T,T.correlationId):(this.logger.verbose("No cached id token found"),Promise.resolve(null))}async acquireTokenPopup(i){return this.acquireTokenInteractive(i)}acquireTokenRedirect(i){throw Mn.createUnsupportedError()}async acquireTokenSilent(i){return this.acquireTokenSilentInternal(i)}acquireTokenByCode(i){throw Mn.createUnsupportedError()}acquireTokenNative(i,u,p){throw Mn.createUnsupportedError()}acquireTokenByRefreshToken(i,u){throw Mn.createUnsupportedError()}addEventCallback(i,u){return this.eventHandler.addEventCallback(i,u)}removeEventCallback(i){this.eventHandler.removeEventCallback(i)}addPerformanceCallback(i){throw Mn.createUnsupportedError()}removePerformanceCallback(i){throw Mn.createUnsupportedError()}enableAccountStorageEvents(){throw Mn.createUnsupportedError()}disableAccountStorageEvents(){throw Mn.createUnsupportedError()}getAllAccounts(i){const u=this.browserCrypto.createNewGuid();return Mr(this.logger,this.browserStorage,this.isBrowserEnv(),u,i)}getAccount(i){const u=this.browserCrypto.createNewGuid();return Vr(i,this.logger,this.browserStorage,u)}getAccountByUsername(i){const u=this.browserCrypto.createNewGuid();return sm(i,this.logger,this.browserStorage,u)}getAccountByHomeId(i){const u=this.browserCrypto.createNewGuid();return Pr(i,this.logger,this.browserStorage,u)}getAccountByLocalId(i){const u=this.browserCrypto.createNewGuid();return am(i,this.logger,this.browserStorage,u)}setActiveAccount(i){const u=this.browserCrypto.createNewGuid();return $i(i,this.browserStorage,u)}getActiveAccount(){const i=this.browserCrypto.createNewGuid();return Ls(this.browserStorage,i)}handleRedirectPromise(i){return Promise.resolve(null)}loginPopup(i){return this.acquireTokenInteractive(i||Ld)}loginRedirect(i){throw Mn.createUnsupportedError()}logout(i){throw Mn.createUnsupportedError()}logoutRedirect(i){throw Mn.createUnsupportedError()}logoutPopup(i){throw Mn.createUnsupportedError()}ssoSilent(i){return this.acquireTokenSilentInternal(i)}getTokenCache(){throw Mn.createUnsupportedError()}getLogger(){return this.logger}setLogger(i){this.logger=i}initializeWrapperLibrary(i,u){}setNavigationClient(i){this.logger.warning("setNavigationClient is not supported in nested app auth")}getConfiguration(){return this.config}isBrowserEnv(){return this.operatingContext.isBrowserEnvironment()}getBrowserCrypto(){return this.browserCrypto}getPerformanceClient(){throw Mn.createUnsupportedError()}getRedirectResponse(){throw Mn.createUnsupportedError()}async clearCache(i){throw Mn.createUnsupportedError()}async hydrateCache(i,u){this.logger.verbose("hydrateCache called");const p=Sr.createFromAccountInfo(i.account,i.cloudGraphHostName,i.msGraphHost);return await this.browserStorage.setAccount(p,i.correlationId),this.browserStorage.hydrateCache(i,u)}}async function ch(S,i){const u=new qi(S);return await u.initialize(),Ua.createController(u,i)}async function mm(S){const i=new qi(S),u=new ar(S),p=[i.initialize(),u.initialize()];return await Promise.all(p),u.isAvailable()&&S.auth.supportsNestedAppAuth?Qi.createController(u):i.isAvailable()?Ua.createController(i):null}class el{static async createPublicClientApplication(i){const u=await ch(i);return new el(i,u)}constructor(i,u){this.isBroker=!1,this.controller=u||new Ua(new qi(i))}async initialize(i){return this.controller.initialize(i,this.isBroker)}async acquireTokenPopup(i){return this.controller.acquireTokenPopup(i)}acquireTokenRedirect(i){return this.controller.acquireTokenRedirect(i)}acquireTokenSilent(i){return this.controller.acquireTokenSilent(i)}acquireTokenByCode(i){return this.controller.acquireTokenByCode(i)}addEventCallback(i,u){return this.controller.addEventCallback(i,u)}removeEventCallback(i){return this.controller.removeEventCallback(i)}addPerformanceCallback(i){return this.controller.addPerformanceCallback(i)}removePerformanceCallback(i){return this.controller.removePerformanceCallback(i)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(i){return this.controller.getAccount(i)}getAccountByHomeId(i){return this.controller.getAccountByHomeId(i)}getAccountByLocalId(i){return this.controller.getAccountByLocalId(i)}getAccountByUsername(i){return this.controller.getAccountByUsername(i)}getAllAccounts(i){return this.controller.getAllAccounts(i)}handleRedirectPromise(i){return this.controller.handleRedirectPromise(i)}loginPopup(i){return this.controller.loginPopup(i)}loginRedirect(i){return this.controller.loginRedirect(i)}logout(i){return this.controller.logout(i)}logoutRedirect(i){return this.controller.logoutRedirect(i)}logoutPopup(i){return this.controller.logoutPopup(i)}ssoSilent(i){return this.controller.ssoSilent(i)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(i){this.controller.setLogger(i)}setActiveAccount(i){this.controller.setActiveAccount(i)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(i,u){return this.controller.initializeWrapperLibrary(i,u)}setNavigationClient(i){this.controller.setNavigationClient(i)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(i,u){return this.controller.hydrateCache(i,u)}clearCache(i){return this.controller.clearCache(i)}}async function Lp(S){const i=new ar(S);if(await i.initialize(),i.isAvailable()){const u=new Qi(i),p=new el(S,u);return await p.initialize(),p}return gm(S)}async function gm(S){const i=new el(S);return await i.initialize(),i}class pm{constructor(i){this.initialized=!1,this.operatingContext=i,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=i.getConfig(),this.logger=i.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Or(this.logger,this.performanceClient):En,this.eventHandler=new Qc(this.logger),this.browserStorage=this.isBrowserEnvironment?new Yc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,void 0):xu(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler)}getBrowserStorage(){return this.browserStorage}getAccount(i){return null}getAccountByHomeId(i){return null}getAccountByLocalId(i){return null}getAccountByUsername(i){return null}getAllAccounts(){return[]}initialize(){return this.initialized=!0,Promise.resolve()}acquireTokenPopup(i){return It(this.initialized),Ot(),{}}acquireTokenRedirect(i){return It(this.initialized),Ot(),Promise.resolve()}acquireTokenSilent(i){return It(this.initialized),Ot(),{}}acquireTokenByCode(i){return It(this.initialized),Ot(),{}}acquireTokenNative(i,u,p){return It(this.initialized),Ot(),{}}acquireTokenByRefreshToken(i,u){return It(this.initialized),Ot(),{}}addEventCallback(i,u){return null}removeEventCallback(i){}addPerformanceCallback(i){return It(this.initialized),Ot(),""}removePerformanceCallback(i){return It(this.initialized),Ot(),!0}enableAccountStorageEvents(){It(this.initialized),Ot()}disableAccountStorageEvents(){It(this.initialized),Ot()}handleRedirectPromise(i){return It(this.initialized),Promise.resolve(null)}loginPopup(i){return It(this.initialized),Ot(),{}}loginRedirect(i){return It(this.initialized),Ot(),{}}logout(i){return It(this.initialized),Ot(),{}}logoutRedirect(i){return It(this.initialized),Ot(),{}}logoutPopup(i){return It(this.initialized),Ot(),{}}ssoSilent(i){return It(this.initialized),Ot(),{}}getTokenCache(){return It(this.initialized),Ot(),{}}getLogger(){return this.logger}setLogger(i){It(this.initialized),Ot()}setActiveAccount(i){It(this.initialized),Ot()}getActiveAccount(){return It(this.initialized),Ot(),null}initializeWrapperLibrary(i,u){this.browserStorage.setWrapperMetadata(i,u)}setNavigationClient(i){It(this.initialized),Ot()}getConfiguration(){return this.config}isBrowserEnv(){return It(this.initialized),Ot(),!0}getBrowserCrypto(){return It(this.initialized),Ot(),{}}getPerformanceClient(){return It(this.initialized),Ot(),{}}getRedirectResponse(){return It(this.initialized),Ot(),{}}async clearCache(i){It(this.initialized),Ot()}async hydrateCache(i,u){It(this.initialized),Ot()}}class Ha extends qc{getId(){return Ha.ID}getModuleName(){return Ha.MODULE_NAME}async initialize(){return!0}}Ha.MODULE_NAME="",Ha.ID="UnknownOperatingContext";class Ba{static async createPublicClientApplication(i){const u=await mm(i);let p;return u!==null?p=new Ba(i,u):p=new Ba(i),p}constructor(i,u){if(this.configuration=i,u)this.controller=u;else{const p=new Ha(i);this.controller=new pm(p)}}async initialize(){if(this.controller instanceof pm){const i=await mm(this.configuration);return i!==null&&(this.controller=i),this.controller.initialize()}return Promise.resolve()}async acquireTokenPopup(i){return this.controller.acquireTokenPopup(i)}acquireTokenRedirect(i){return this.controller.acquireTokenRedirect(i)}acquireTokenSilent(i){return this.controller.acquireTokenSilent(i)}acquireTokenByCode(i){return this.controller.acquireTokenByCode(i)}addEventCallback(i,u){return this.controller.addEventCallback(i,u)}removeEventCallback(i){return this.controller.removeEventCallback(i)}addPerformanceCallback(i){return this.controller.addPerformanceCallback(i)}removePerformanceCallback(i){return this.controller.removePerformanceCallback(i)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(i){return this.controller.getAccount(i)}getAccountByHomeId(i){return this.controller.getAccountByHomeId(i)}getAccountByLocalId(i){return this.controller.getAccountByLocalId(i)}getAccountByUsername(i){return this.controller.getAccountByUsername(i)}getAllAccounts(i){return this.controller.getAllAccounts(i)}handleRedirectPromise(i){return this.controller.handleRedirectPromise(i)}loginPopup(i){return this.controller.loginPopup(i)}loginRedirect(i){return this.controller.loginRedirect(i)}logout(i){return this.controller.logout(i)}logoutRedirect(i){return this.controller.logoutRedirect(i)}logoutPopup(i){return this.controller.logoutPopup(i)}ssoSilent(i){return this.controller.ssoSilent(i)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(i){this.controller.setLogger(i)}setActiveAccount(i){this.controller.setActiveAccount(i)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(i,u){return this.controller.initializeWrapperLibrary(i,u)}setNavigationClient(i){this.controller.setNavigationClient(i)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(i,u){return this.controller.hydrateCache(i,u)}clearCache(i){return this.controller.clearCache(i)}}const Up={initialize:()=>Promise.reject(dn(vn)),acquireTokenPopup:()=>Promise.reject(dn(vn)),acquireTokenRedirect:()=>Promise.reject(dn(vn)),acquireTokenSilent:()=>Promise.reject(dn(vn)),acquireTokenByCode:()=>Promise.reject(dn(vn)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(dn(vn)),loginPopup:()=>Promise.reject(dn(vn)),loginRedirect:()=>Promise.reject(dn(vn)),logout:()=>Promise.reject(dn(vn)),logoutRedirect:()=>Promise.reject(dn(vn)),logoutPopup:()=>Promise.reject(dn(vn)),ssoSilent:()=>Promise.reject(dn(vn)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw dn(vn)},getLogger:()=>{throw dn(vn)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw dn(vn)},hydrateCache:()=>Promise.reject(dn(vn)),clearCache:()=>Promise.reject(dn(vn))};class Hp{static getInteractionStatusFromEvent(i,u){switch(i.eventType){case Le.LOGIN_START:return ir.Login;case Le.SSO_SILENT_START:return ir.SsoSilent;case Le.ACQUIRE_TOKEN_START:if(i.interactionType===t.InteractionType.Redirect||i.interactionType===t.InteractionType.Popup)return ir.AcquireToken;break;case Le.HANDLE_REDIRECT_START:return ir.HandleRedirect;case Le.LOGOUT_START:return ir.Logout;case Le.SSO_SILENT_SUCCESS:case Le.SSO_SILENT_FAILURE:if(u&&u!==ir.SsoSilent)break;return ir.None;case Le.LOGOUT_END:if(u&&u!==ir.Logout)break;return ir.None;case Le.HANDLE_REDIRECT_END:if(u&&u!==ir.HandleRedirect)break;return ir.None;case Le.LOGIN_SUCCESS:case Le.LOGIN_FAILURE:case Le.ACQUIRE_TOKEN_SUCCESS:case Le.ACQUIRE_TOKEN_FAILURE:case Le.RESTORE_FROM_BFCACHE:if(i.interactionType===t.InteractionType.Redirect||i.interactionType===t.InteractionType.Popup){if(u&&u!==ir.Login&&u!==ir.AcquireToken)break;return ir.None}break}return null}}class Gt{constructor(i,u){const p=u&&u.loggerOptions||{};this.logger=new Ln(p,Ma,Ir),this.cryptoOps=new Or(this.logger),this.popTokenGenerator=new wa(this.cryptoOps),this.shrParameters=i}async generatePublicKeyThumbprint(){const{kid:i}=await this.popTokenGenerator.generateKid(this.shrParameters);return i}async signRequest(i,u,p){return this.popTokenGenerator.signPayload(i,u,this.shrParameters,p)}async removeKeys(i){return this.cryptoOps.removeTokenBindingKey(i).then(()=>!0).catch(u=>{if(u instanceof jn&&u.errorCode===bi)return!1;throw u})}}function lh(){let S;try{S=window[yn.SessionStorage];const i=S?.getItem(wu);if(Number(i)===1)return Promise.resolve().then(function(){return Pw})}catch{}}function uh(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.now=="function"}function Bp(S){if(!(!S||!uh()))return Math.round(window.performance.now()-S)}class Mw extends nu{constructor(i,u,p){super(i.auth.clientId,i.auth.authority||`${e.DEFAULT_AUTHORITY}`,new Ln(i.system?.loggerOptions||{},Ma,Ir),Ma,Ir,i.telemetry?.application||{appName:"",appVersion:""},u,p)}generateId(){return sr()}getPageVisibility(){return document.visibilityState?.toString()||null}deleteIncompleteSubMeasurements(i){lh()?.then(u=>{const p=this.eventsByCorrelationId.get(i.event.correlationId),w=p&&p.eventId===i.event.eventId,T=[];w&&p?.incompleteSubMeasurements&&p.incompleteSubMeasurements.forEach(R=>{T.push({...R})}),u.BrowserPerformanceMeasurement.flushMeasurements(i.event.correlationId,T)})}startMeasurement(i,u){const p=this.getPageVisibility(),w=super.startMeasurement(i,u),T=uh()?window.performance.now():void 0,R=lh()?.then(j=>new j.BrowserPerformanceMeasurement(i,w.event.correlationId));return R?.then(j=>j.startMeasurement()),{...w,end:(j,K,te)=>{const ve=w.end({...j,startPageVisibility:p,endPageVisibility:this.getPageVisibility(),durationMs:Bp(T)},K,te);return R?.then(Se=>Se.endMeasurement()),this.deleteIncompleteSubMeasurements(w),ve},discard:()=>{w.discard(),R?.then(j=>j.flushMeasurement()),this.deleteIncompleteSubMeasurements(w)}}}setPreQueueTime(i,u){if(!uh()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${i}`);return}if(!u){this.logger.trace(`BrowserPerformanceClient: correlationId for ${i} not provided, unable to set telemetry queue time`);return}const p=this.preQueueTimeByCorrelationId.get(u);p&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${p.name} found`,u),this.addQueueMeasurement(p.name,u,void 0,!0)),this.preQueueTimeByCorrelationId.set(u,{name:i,time:window.performance.now()})}addQueueMeasurement(i,u,p,w){if(!uh()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${i}`);return}if(!u){this.logger.trace(`BrowserPerformanceClient: correlationId for ${i} not provided, unable to add queue measurement`);return}const T=super.getPreQueueTime(i,u);if(!T)return;const R=window.performance.now(),j=p||super.calculateQueuedTime(T,R);return super.addQueueMeasurement(i,u,j,w)}}class Xr{constructor(i,u){this.correlationId=u,this.measureName=Xr.makeMeasureName(i,u),this.startMark=Xr.makeStartMark(i,u),this.endMark=Xr.makeEndMark(i,u)}static makeMeasureName(i,u){return`msal.measure.${i}.${u}`}static makeStartMark(i,u){return`msal.start.${i}.${u}`}static makeEndMark(i,u){return`msal.end.${i}.${u}`}static supportsBrowserPerformance(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.mark=="function"&&typeof window.performance.measure=="function"&&typeof window.performance.clearMarks=="function"&&typeof window.performance.clearMeasures=="function"&&typeof window.performance.getEntriesByName=="function"}static flushMeasurements(i,u){if(Xr.supportsBrowserPerformance())try{u.forEach(p=>{const w=Xr.makeMeasureName(p.name,i);window.performance.getEntriesByName(w,"measure").length>0&&(window.performance.clearMeasures(w),window.performance.clearMarks(Xr.makeStartMark(w,i)),window.performance.clearMarks(Xr.makeEndMark(w,i)))})}catch{}}startMeasurement(){if(Xr.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch{}}endMeasurement(){if(Xr.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch{}}flushMeasurement(){if(Xr.supportsBrowserPerformance())try{const i=window.performance.getEntriesByName(this.measureName,"measure");if(i.length>0){const u=i[0].duration;return window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),u}}catch{}return null}}var Pw=Object.freeze({__proto__:null,BrowserPerformanceMeasurement:Xr});t.AccountEntity=Sr,t.ApiId=Pt,t.AuthError=Q,t.AuthErrorCodes=Y,t.AuthErrorMessage=B,t.AuthenticationHeaderParser=Xl,t.AuthenticationScheme=$,t.AzureCloudInstance=cc,t.BrowserAuthError=Na,t.BrowserAuthErrorCodes=sp,t.BrowserAuthErrorMessage=ap,t.BrowserCacheLocation=yn,t.BrowserConfigurationAuthError=yu,t.BrowserConfigurationAuthErrorCodes=$d,t.BrowserConfigurationAuthErrorMessage=pp,t.BrowserPerformanceClient=Mw,t.BrowserPerformanceMeasurement=Xr,t.BrowserUtils=yp,t.CacheLookupPolicy=_n,t.ClientAuthError=jn,t.ClientAuthErrorCodes=Ol,t.ClientAuthErrorMessage=lf,t.ClientConfigurationError=qn,t.ClientConfigurationErrorCodes=Pl,t.ClientConfigurationErrorMessage=nd,t.DEFAULT_IFRAME_TIMEOUT_MS=Kc,t.EventHandler=Qc,t.EventMessageUtils=Hp,t.EventType=Le,t.InteractionRequiredAuthError=Nn,t.InteractionRequiredAuthErrorCodes=Pi,t.InteractionRequiredAuthErrorMessage=Nd,t.InteractionStatus=ir,t.JsonWebTokenTypes=W,t.LocalStorage=nn,t.Logger=Ln,t.MemoryStorage=$c,t.NavigationClient=Fc,t.OIDC_DEFAULT_SCOPES=s,t.PerformanceEvents=q,t.PromptValue=v,t.ProtocolMode=Vn,t.PublicClientApplication=el,t.PublicClientNext=Ba,t.ServerError=Nt,t.ServerResponseType=b,t.SessionStorage=fr,t.SignedHttpRequest=Gt,t.StringUtils=$n,t.StubPerformanceClient=ha,t.UrlString=_t,t.WrapperSKU=Kf,t.createNestablePublicClientApplication=Lp,t.createStandardPublicClientApplication=gm,t.isPlatformBrokerAvailable=Bs,t.stubbedPublicClientApplication=Up,t.version=Ir})(Ib)),Ib}var Pm={},E0;function WF(){if(E0)return Pm;E0=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.GraphClientError=void 0;var t=BA,e=(function(n){t.__extends(r,n);function r(s){var c=n.call(this,s)||this;return Object.setPrototypeOf(c,r.prototype),c}return r.setGraphClientError=function(s){var c;return s instanceof Error?c=s:(c=new r,c.customError=s),c},r})(Error);return Pm.GraphClientError=e,Pm}var A0;function XF(){if(A0)return Mm;A0=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.AuthCodeMSALBrowserAuthenticationProvider=void 0;var t=BA,e=QF(),n=WF(),r=(function(){function s(c,d){if(this.publicClientApplication=c,this.options=d,!d||!c)throw new n.GraphClientError("Please pass valid PublicClientApplication instance and AuthCodeMSALBrowserAuthenticationProviderOptions instance to instantiate MSALBrowserAuthenticationProvider")}return s.prototype.getAccessToken=function(){return t.__awaiter(this,void 0,void 0,function(){var c,d,f,y,g,y;return t.__generator(this,function(v){switch(v.label){case 0:if(c=this.options&&this.options.scopes,d=this.options&&this.options.account,f=new n.GraphClientError,!c||c.length===0)throw f.name="Empty Scopes",f.message="Scopes cannot be empty, Please provide scopes",f;v.label=1;case 1:return v.trys.push([1,3,,9]),[4,this.publicClientApplication.acquireTokenSilent({scopes:c,account:d})];case 2:if(y=v.sent(),!y||!y.accessToken)throw f.name="Access token is undefined",f.message="Received empty access token from PublicClientApplication",f;return[2,y.accessToken];case 3:return g=v.sent(),g instanceof e.InteractionRequiredAuthError?this.options.interactionType!==e.InteractionType.Redirect?[3,4]:(this.publicClientApplication.acquireTokenRedirect({scopes:c}),[3,6]):[3,7];case 4:return this.options.interactionType!==e.InteractionType.Popup?[3,6]:[4,this.publicClientApplication.acquireTokenPopup({scopes:c})];case 5:return y=v.sent(),[2,y.accessToken];case 6:return[3,8];case 7:throw g;case 8:return[3,9];case 9:return[2]}})})},s})();return Mm.AuthCodeMSALBrowserAuthenticationProvider=r,Mm}var Rb={},T0;function JF(){return T0||(T0=1,Object.defineProperty(Rb,"__esModule",{value:!0})),Rb}var S0;function ZF(){return S0||(S0=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=BA;e.__exportStar(XF(),t),e.__exportStar(JF(),t)})(kb)),kb}var e6=ZF();const AO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_AZURE_AD_API_SCOPES:"api://af251976-54e5-4230-919a-75faa3e3d7b6/Agent.Execute.Default",VITE_AZURE_AD_CLIENT_ID:"45042e4a-4e25-481c-94fa-4e7878105fcc",VITE_AZURE_AD_POST_LOGOUT_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_TENANT_ID:"4e206573-d2b2-43e2-8958-ef4cdbd26f7f",VITE_GRAPH_SCOPES:"User.Read"},TO=typeof window<"u",t6=t=>{const e=AO[t];if(!e)throw new Error(`Missing required environment variable: ${t}`);return e},n6=()=>"https://login.microsoftonline.com/4e206573-d2b2-43e2-8958-ef4cdbd26f7f",SO=(t,{fallback:e,relativeTo:n}={})=>{const r=AO[t],s=c=>{try{return new URL(c).toString()}catch{if(!n)throw new Error(`Unable to resolve relative URI "${c}" for ${t}. Provide an absolute URL or ensure a browser origin is available.`);return new URL(c,n).toString()}};if(r)return s(r);if(e)return s(e);throw new Error(`Unable to determine value for ${t}. Set it explicitly in your environment.`)},_O=(t,e=[])=>t?t.split(/[ ,]+/).map(n=>n.trim()).filter(Boolean):e,kO=TO?window.location.origin:void 0,r6=t6("VITE_AZURE_AD_CLIENT_ID"),o6=n6(),IO=SO("VITE_AZURE_AD_REDIRECT_URI",{fallback:"/auth/callback",relativeTo:kO}),i6=SO("VITE_AZURE_AD_POST_LOGOUT_REDIRECT_URI",{fallback:IO,relativeTo:kO}),RO=_O("User.Read",["User.Read"]),bh=_O("api://af251976-54e5-4230-919a-75faa3e3d7b6/Agent.Execute.Default",[]),_0={scopes:RO},_x=new aA({auth:{clientId:r6,authority:o6,redirectUri:IO,postLogoutRedirectUri:i6},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:TO&&(window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident"))},system:{loggerOptions:{logLevel:rn.Warning,loggerCallback(t,e,n){n||(t===rn.Error?console.error(e):t===rn.Warning&&console.warn(e))}}}}),s6=t=>new e6.AuthCodeMSALBrowserAuthenticationProvider(_x,{account:t,scopes:RO,interactionType:et.Popup}),NO=t=>Tv.initWithMiddleware({authProvider:s6(t)});async function a6(t){return NO(t).api("/me").get()}async function c6(t){const e=NO(t);try{const n=await e.api("/me/photo/$value").responseType(es.BLOB).get();return n instanceof Blob?n:new Blob([n])}catch(n){if((typeof n?.statusCode=="number"||typeof n?.statusCode=="number"?n.statusCode:void 0)===404)return null;throw n}}const zA="devui_msal_login_hint",FA=typeof window<"u",l6=()=>{if(!FA)return null;try{return window.localStorage.getItem(zA)}catch(t){return console.warn("Unable to read login hint from storage",t),null}},u6=t=>{if(FA)try{window.localStorage.setItem(zA,t)}catch(e){console.warn("Unable to persist login hint",e)}},d6=()=>{if(FA)try{window.localStorage.removeItem(zA)}catch(t){console.warn("Unable to clear login hint",t)}},h6=t=>{if(!t)return"ME";const e=t.trim().split(/\s+/);return e.length===1?e[0].slice(0,2).toUpperCase():e[0].charAt(0).toUpperCase()+e[e.length-1].charAt(0).toUpperCase()};function f6(){const{instance:t,accounts:e}=lA(),[n,r]=k.useState({loading:!1}),[s,c]=k.useState({loading:!1}),d=k.useMemo(()=>t.getActiveAccount()??e[0]??null,[e,t]);if(k.useEffect(()=>{if(!d){r({account:void 0,profile:void 0,loading:!1}),c(U=>(U.url&&U.url.startsWith("blob:")&&URL.revokeObjectURL(U.url),{accountId:void 0,url:void 0,loading:!1}));return}const M=t.getActiveAccount();(!M||M.homeAccountId!==d.homeAccountId)&&t.setActiveAccount(d)},[d,t]),k.useEffect(()=>{if(!d){r({account:void 0,profile:void 0,loading:!1});return}let M=!1;return r(U=>U.account?.homeAccountId===d.homeAccountId&&(U.loading||U.profile)?U:{account:d,profile:U.account?.homeAccountId===d.homeAccountId?U.profile:void 0,loading:!0,error:void 0}),a6(d).then(U=>{M||r({account:d,profile:U,loading:!1,error:void 0})}).catch(U=>{M||r({account:d,profile:void 0,loading:!1,error:U instanceof Error?U.message:"Failed to load profile information."})}),()=>{M=!0}},[d?.homeAccountId]),k.useEffect(()=>{if(!d){c({accountId:void 0,url:void 0,loading:!1});return}let M=!1,U,O;return c(L=>L.accountId===d.homeAccountId?(O=L.url,{accountId:d.homeAccountId,url:L.url,loading:!0,error:void 0}):(O=L.url,O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0),{accountId:d.homeAccountId,url:void 0,loading:!0,error:void 0})),c6(d).then(L=>{if(!M){if(!L){c({accountId:d.homeAccountId,url:void 0,loading:!1,error:void 0}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0);return}U=URL.createObjectURL(L),c({accountId:d.homeAccountId,url:U,loading:!1,error:void 0}),O&&O!==U&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0)}}).catch(L=>{if(M)return;if((typeof L?.statusCode=="number"?L.statusCode:void 0)===404){c({accountId:d.homeAccountId,url:void 0,loading:!1,error:void 0}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0);return}console.warn("Failed to load profile photo",L),c({accountId:d.homeAccountId,url:void 0,loading:!1,error:L instanceof Error?L.message:"Failed to load profile photo."}),O&&O.startsWith("blob:")&&(URL.revokeObjectURL(O),O=void 0)}),()=>{M=!0,U&&URL.revokeObjectURL(U)}},[d?.homeAccountId]),!d)return null;const{profile:f,loading:g,error:y}=n,{url:v,loading:x}=s,b=f?.displayName??d.name??d.username,A=f?.mail??f?.userPrincipalName??d.username,I=g?null:h6(b),_=()=>{d6(),t.logoutRedirect({account:d})},N=(g||x)&&!v;return h.jsxs(xC,{children:[h.jsx(EC,{asChild:!0,children:h.jsxs(ht,{variant:"ghost",size:"sm",className:"gap-2 px-2 py-1.5 h-9 rounded-full border border-border/60",children:[h.jsx("span",{className:"relative flex h-7 w-7 items-center justify-center overflow-hidden rounded-full border border-border/60 bg-primary/5 text-xs font-semibold text-foreground",children:v?h.jsx("img",{src:v,alt:"","aria-hidden":"true",className:"h-full w-full object-cover",draggable:!1}):N?h.jsx(TC,{size:"sm",className:"text-primary"}):I??h.jsx(jA,{className:"h-4 w-4"})}),h.jsx("span",{className:"max-w-[140px] truncate text-sm font-medium text-foreground",children:b})]})}),h.jsxs(AC,{align:"end",className:"w-60",children:[h.jsxs(Ax,{className:"flex flex-col items-start gap-0.5",children:[h.jsx("span",{className:"text-sm font-semibold text-foreground",children:b}),A&&h.jsx("span",{className:"text-xs text-muted-foreground truncate",children:A})]}),y&&h.jsxs(h.Fragment,{children:[h.jsx(zh,{}),h.jsx(Ur,{disabled:!0,className:"text-xs text-destructive",children:y})]}),h.jsx(zh,{}),h.jsxs(Ur,{onClick:_,children:[h.jsx(R5,{className:"h-4 w-4"}),"Sign out"]})]})]})}function k0({agents:t,workflows:e,selectedItem:n,onSelect:r,onBrowseGallery:s,isLoading:c=!1,onSettingsClick:d}){return h.jsxs("header",{className:"flex h-14 items-center gap-4 border-b px-4",children:[h.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 805 805",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:[h.jsx("path",{d:"M402.488 119.713C439.197 119.713 468.955 149.472 468.955 186.18C468.955 192.086 471.708 197.849 476.915 200.635L546.702 237.977C555.862 242.879 566.95 240.96 576.092 236.023C585.476 230.955 596.218 228.078 607.632 228.078C644.341 228.078 674.098 257.836 674.099 294.545C674.099 316.95 663.013 336.765 646.028 348.806C637.861 354.595 631.412 363.24 631.412 373.251V430.818C631.412 440.83 637.861 449.475 646.028 455.264C663.013 467.305 674.099 487.121 674.099 509.526C674.099 546.235 644.341 575.994 607.632 575.994C598.598 575.994 589.985 574.191 582.133 570.926C573.644 567.397 563.91 566.393 555.804 570.731L469.581 616.867C469.193 617.074 468.955 617.479 468.955 617.919C468.955 654.628 439.197 684.386 402.488 684.386C365.779 684.386 336.021 654.628 336.021 617.919C336.021 616.802 335.423 615.765 334.439 615.238L249.895 570C241.61 565.567 231.646 566.713 223.034 570.472C214.898 574.024 205.914 575.994 196.47 575.994C159.761 575.994 130.002 546.235 130.002 509.526C130.002 486.66 141.549 466.49 159.13 454.531C167.604 448.766 174.349 439.975 174.349 429.726V372.538C174.349 362.289 167.604 353.498 159.13 347.734C141.549 335.774 130.002 315.604 130.002 292.738C130.002 256.029 159.761 226.271 196.47 226.271C208.223 226.271 219.263 229.322 228.843 234.674C238.065 239.827 249.351 241.894 258.666 236.91L328.655 199.459C333.448 196.895 336.021 191.616 336.021 186.18C336.021 149.471 365.779 119.713 402.488 119.713ZM475.716 394.444C471.337 396.787 468.955 401.586 468.955 406.552C468.955 429.68 457.142 450.048 439.221 461.954C430.571 467.7 423.653 476.574 423.653 486.959V537.511C423.653 547.896 430.746 556.851 439.379 562.622C449 569.053 461.434 572.052 471.637 566.592L527.264 536.826C536.887 531.677 541.164 520.44 541.164 509.526C541.164 485.968 553.42 465.272 571.904 453.468C580.846 447.757 588.054 438.749 588.054 428.139V371.427C588.054 363.494 582.671 356.676 575.716 352.862C569.342 349.366 561.663 348.454 555.253 351.884L475.716 394.444ZM247.992 349.841C241.997 346.633 234.806 347.465 228.873 350.785C222.524 354.337 217.706 360.639 217.706 367.915V429.162C217.706 439.537 224.611 448.404 233.248 454.152C251.144 466.062 262.937 486.417 262.937 509.526C262.937 519.654 267.026 529.991 275.955 534.769L334.852 566.284C344.582 571.49 356.362 568.81 365.528 562.667C373.735 557.166 380.296 548.643 380.296 538.764V486.305C380.296 476.067 373.564 467.282 365.103 461.516C347.548 449.552 336.021 429.398 336.021 406.552C336.021 400.967 333.389 395.536 328.465 392.902L247.992 349.841ZM270.019 280.008C265.421 282.469 262.936 287.522 262.937 292.738C262.937 293.308 262.929 293.876 262.915 294.443C262.615 306.354 266.961 318.871 277.466 324.492L334.017 354.751C344.13 360.163 356.442 357.269 366.027 350.969C376.495 344.088 389.024 340.085 402.488 340.085C416.203 340.085 428.947 344.239 439.532 351.357C449.163 357.834 461.63 360.861 471.864 355.385L526.625 326.083C537.106 320.474 541.458 307.999 541.182 296.115C541.17 295.593 541.164 295.069 541.164 294.545C541.164 288.551 538.376 282.696 533.091 279.868L463.562 242.664C454.384 237.753 443.274 239.688 434.123 244.65C424.716 249.75 413.941 252.647 402.488 252.647C390.83 252.647 379.873 249.646 370.348 244.373C361.148 239.281 349.917 237.256 340.646 242.217L270.019 280.008Z",fill:"url(#paint0_linear_510_1294)"}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"paint0_linear_510_1294",x1:"255.628",y1:"-34.3245",x2:"618.483",y2:"632.032",gradientUnits:"userSpaceOnUse",children:[h.jsx("stop",{stopColor:"#D59FFF"}),h.jsx("stop",{offset:"1",stopColor:"#8562C5"})]})})]}),"Dev UI"]}),h.jsx(xF,{agents:t,workflows:e,selectedItem:n,onSelect:r,onBrowseGallery:s,isLoading:c}),h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsx(f6,{}),h.jsx(MF,{}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:f=>{f.stopPropagation(),d?.()},children:h.jsx(Ex,{className:"h-4 w-4"})})]})]})}function kx(t,[e,n]){return Math.min(n,Math.max(e,t))}function m6(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var KA="ScrollArea",[OO,eQ]=oc(KA),[g6,yi]=OO(KA),MO=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:c=600,...d}=t,[f,g]=k.useState(null),[y,v]=k.useState(null),[x,b]=k.useState(null),[A,I]=k.useState(null),[_,N]=k.useState(null),[M,U]=k.useState(0),[O,L]=k.useState(0),[H,G]=k.useState(!1),[V,$]=k.useState(!1),ee=Lt(e,ce=>g(ce)),se=Ig(s);return h.jsx(g6,{scope:n,type:r,dir:se,scrollHideDelay:c,scrollArea:f,viewport:y,onViewportChange:v,content:x,onContentChange:b,scrollbarX:A,onScrollbarXChange:I,scrollbarXEnabled:H,onScrollbarXEnabledChange:G,scrollbarY:_,onScrollbarYChange:N,scrollbarYEnabled:V,onScrollbarYEnabledChange:$,onCornerWidthChange:U,onCornerHeightChange:L,children:h.jsx(ft.div,{dir:se,...d,ref:ee,style:{position:"relative","--radix-scroll-area-corner-width":M+"px","--radix-scroll-area-corner-height":O+"px",...t.style}})})});MO.displayName=KA;var PO="ScrollAreaViewport",DO=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...c}=t,d=yi(PO,n),f=k.useRef(null),g=Lt(e,f,d.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),h.jsx(ft.div,{"data-radix-scroll-area-viewport":"",...c,ref:g,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:h.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});DO.displayName=PO;var ta="ScrollAreaScrollbar",GA=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=yi(ta,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:d}=s,f=t.orientation==="horizontal";return k.useEffect(()=>(f?c(!0):d(!0),()=>{f?c(!1):d(!1)}),[f,c,d]),s.type==="hover"?h.jsx(p6,{...r,ref:e,forceMount:n}):s.type==="scroll"?h.jsx(y6,{...r,ref:e,forceMount:n}):s.type==="auto"?h.jsx(jO,{...r,ref:e,forceMount:n}):s.type==="always"?h.jsx(qA,{...r,ref:e}):null});GA.displayName=ta;var p6=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=yi(ta,t.__scopeScrollArea),[c,d]=k.useState(!1);return k.useEffect(()=>{const f=s.scrollArea;let g=0;if(f){const y=()=>{window.clearTimeout(g),d(!0)},v=()=>{g=window.setTimeout(()=>d(!1),s.scrollHideDelay)};return f.addEventListener("pointerenter",y),f.addEventListener("pointerleave",v),()=>{window.clearTimeout(g),f.removeEventListener("pointerenter",y),f.removeEventListener("pointerleave",v)}}},[s.scrollArea,s.scrollHideDelay]),h.jsx(ds,{present:n||c,children:h.jsx(jO,{"data-state":c?"visible":"hidden",...r,ref:e})})}),y6=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=yi(ta,t.__scopeScrollArea),c=t.orientation==="horizontal",d=_C(()=>g("SCROLL_END"),100),[f,g]=m6("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(f==="idle"){const y=window.setTimeout(()=>g("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(y)}},[f,s.scrollHideDelay,g]),k.useEffect(()=>{const y=s.viewport,v=c?"scrollLeft":"scrollTop";if(y){let x=y[v];const b=()=>{const A=y[v];x!==A&&(g("SCROLL"),d()),x=A};return y.addEventListener("scroll",b),()=>y.removeEventListener("scroll",b)}},[s.viewport,c,g,d]),h.jsx(ds,{present:n||f!=="hidden",children:h.jsx(qA,{"data-state":f==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:We(t.onPointerEnter,()=>g("POINTER_ENTER")),onPointerLeave:We(t.onPointerLeave,()=>g("POINTER_LEAVE"))})})}),jO=k.forwardRef((t,e)=>{const n=yi(ta,t.__scopeScrollArea),{forceMount:r,...s}=t,[c,d]=k.useState(!1),f=t.orientation==="horizontal",g=_C(()=>{if(n.viewport){const y=n.viewport.offsetWidth<n.viewport.scrollWidth,v=n.viewport.offsetHeight<n.viewport.scrollHeight;d(f?y:v)}},10);return Kh(n.viewport,g),Kh(n.content,g),h.jsx(ds,{present:r||c,children:h.jsx(qA,{"data-state":c?"visible":"hidden",...s,ref:e})})}),qA=k.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=yi(ta,t.__scopeScrollArea),c=k.useRef(null),d=k.useRef(0),[f,g]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),y=zO(f.viewport,f.content),v={...r,sizes:f,onSizesChange:g,hasThumb:y>0&&y<1,onThumbChange:b=>c.current=b,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:b=>d.current=b};function x(b,A){return E6(b,d.current,f,A)}return n==="horizontal"?h.jsx(v6,{...v,ref:e,onThumbPositionChange:()=>{if(s.viewport&&c.current){const b=s.viewport.scrollLeft,A=I0(b,f,s.dir);c.current.style.transform=`translate3d(${A}px, 0, 0)`}},onWheelScroll:b=>{s.viewport&&(s.viewport.scrollLeft=b)},onDragScroll:b=>{s.viewport&&(s.viewport.scrollLeft=x(b,s.dir))}}):n==="vertical"?h.jsx(C6,{...v,ref:e,onThumbPositionChange:()=>{if(s.viewport&&c.current){const b=s.viewport.scrollTop,A=I0(b,f);c.current.style.transform=`translate3d(0, ${A}px, 0)`}},onWheelScroll:b=>{s.viewport&&(s.viewport.scrollTop=b)},onDragScroll:b=>{s.viewport&&(s.viewport.scrollTop=x(b))}}):null}),v6=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,c=yi(ta,t.__scopeScrollArea),[d,f]=k.useState(),g=k.useRef(null),y=Lt(e,g,c.onScrollbarXChange);return k.useEffect(()=>{g.current&&f(getComputedStyle(g.current))},[g]),h.jsx(UO,{"data-orientation":"horizontal",...s,ref:y,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":SC(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.x),onDragScroll:v=>t.onDragScroll(v.x),onWheelScroll:(v,x)=>{if(c.viewport){const b=c.viewport.scrollLeft+v.deltaX;t.onWheelScroll(b),KO(b,x)&&v.preventDefault()}},onResize:()=>{g.current&&c.viewport&&d&&r({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:g.current.clientWidth,paddingStart:_v(d.paddingLeft),paddingEnd:_v(d.paddingRight)}})}})}),C6=k.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,c=yi(ta,t.__scopeScrollArea),[d,f]=k.useState(),g=k.useRef(null),y=Lt(e,g,c.onScrollbarYChange);return k.useEffect(()=>{g.current&&f(getComputedStyle(g.current))},[g]),h.jsx(UO,{"data-orientation":"vertical",...s,ref:y,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":SC(n)+"px",...t.style},onThumbPointerDown:v=>t.onThumbPointerDown(v.y),onDragScroll:v=>t.onDragScroll(v.y),onWheelScroll:(v,x)=>{if(c.viewport){const b=c.viewport.scrollTop+v.deltaY;t.onWheelScroll(b),KO(b,x)&&v.preventDefault()}},onResize:()=>{g.current&&c.viewport&&d&&r({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:g.current.clientHeight,paddingStart:_v(d.paddingTop),paddingEnd:_v(d.paddingBottom)}})}})}),[w6,LO]=OO(ta),UO=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:c,onThumbPointerUp:d,onThumbPointerDown:f,onThumbPositionChange:g,onDragScroll:y,onWheelScroll:v,onResize:x,...b}=t,A=yi(ta,n),[I,_]=k.useState(null),N=Lt(e,ee=>_(ee)),M=k.useRef(null),U=k.useRef(""),O=A.viewport,L=r.content-r.viewport,H=wr(v),G=wr(g),V=_C(x,10);function $(ee){if(M.current){const se=ee.clientX-M.current.left,ce=ee.clientY-M.current.top;y({x:se,y:ce})}}return k.useEffect(()=>{const ee=se=>{const ce=se.target;I?.contains(ce)&&H(se,L)};return document.addEventListener("wheel",ee,{passive:!1}),()=>document.removeEventListener("wheel",ee,{passive:!1})},[O,I,L,H]),k.useEffect(G,[r,G]),Kh(I,V),Kh(A.content,V),h.jsx(w6,{scope:n,scrollbar:I,hasThumb:s,onThumbChange:wr(c),onThumbPointerUp:wr(d),onThumbPositionChange:G,onThumbPointerDown:wr(f),children:h.jsx(ft.div,{...b,ref:N,style:{position:"absolute",...b.style},onPointerDown:We(t.onPointerDown,ee=>{ee.button===0&&(ee.target.setPointerCapture(ee.pointerId),M.current=I.getBoundingClientRect(),U.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A.viewport&&(A.viewport.style.scrollBehavior="auto"),$(ee))}),onPointerMove:We(t.onPointerMove,$),onPointerUp:We(t.onPointerUp,ee=>{const se=ee.target;se.hasPointerCapture(ee.pointerId)&&se.releasePointerCapture(ee.pointerId),document.body.style.webkitUserSelect=U.current,A.viewport&&(A.viewport.style.scrollBehavior=""),M.current=null})})})}),Sv="ScrollAreaThumb",HO=k.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=LO(Sv,t.__scopeScrollArea);return h.jsx(ds,{present:n||s.hasThumb,children:h.jsx(b6,{ref:e,...r})})}),b6=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,c=yi(Sv,n),d=LO(Sv,n),{onThumbPositionChange:f}=d,g=Lt(e,x=>d.onThumbChange(x)),y=k.useRef(void 0),v=_C(()=>{y.current&&(y.current(),y.current=void 0)},100);return k.useEffect(()=>{const x=c.viewport;if(x){const b=()=>{if(v(),!y.current){const A=A6(x,f);y.current=A,f()}};return f(),x.addEventListener("scroll",b),()=>x.removeEventListener("scroll",b)}},[c.viewport,v,f]),h.jsx(ft.div,{"data-state":d.hasThumb?"visible":"hidden",...s,ref:g,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:We(t.onPointerDownCapture,x=>{const A=x.target.getBoundingClientRect(),I=x.clientX-A.left,_=x.clientY-A.top;d.onThumbPointerDown({x:I,y:_})}),onPointerUp:We(t.onPointerUp,d.onThumbPointerUp)})});HO.displayName=Sv;var $A="ScrollAreaCorner",BO=k.forwardRef((t,e)=>{const n=yi($A,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(x6,{...t,ref:e}):null});BO.displayName=$A;var x6=k.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=yi($A,n),[c,d]=k.useState(0),[f,g]=k.useState(0),y=!!(c&&f);return Kh(s.scrollbarX,()=>{const v=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(v),g(v)}),Kh(s.scrollbarY,()=>{const v=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(v),d(v)}),y?h.jsx(ft.div,{...r,ref:e,style:{width:c,height:f,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function _v(t){return t?parseInt(t,10):0}function zO(t,e){const n=t/e;return isNaN(n)?0:n}function SC(t){const e=zO(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function E6(t,e,n,r="ltr"){const s=SC(n),c=s/2,d=e||c,f=s-d,g=n.scrollbar.paddingStart+d,y=n.scrollbar.size-n.scrollbar.paddingEnd-f,v=n.content-n.viewport,x=r==="ltr"?[0,v]:[v*-1,0];return FO([g,y],x)(t)}function I0(t,e,n="ltr"){const r=SC(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=e.scrollbar.size-s,d=e.content-e.viewport,f=c-r,g=n==="ltr"?[0,d]:[d*-1,0],y=kx(t,g);return FO([0,d],[0,f])(y)}function FO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function KO(t,e){return t>0&&t<e}var A6=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function s(){const c={left:t.scrollLeft,top:t.scrollTop},d=n.left!==c.left,f=n.top!==c.top;(d||f)&&e(),n=c,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function _C(t,e){const n=wr(t),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Kh(t,e){const n=wr(e);br(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var GO=MO,T6=DO,S6=BO;const td=k.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(GO,{ref:r,className:xt("relative overflow-hidden",t),...n,children:[h.jsx(T6,{className:"h-full w-full rounded-[inherit]",children:e}),h.jsx(qO,{}),h.jsx(S6,{})]}));td.displayName=GO.displayName;const qO=k.forwardRef(({className:t,orientation:e="vertical",...n},r)=>h.jsx(GA,{ref:r,orientation:e,className:xt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:h.jsx(HO,{className:"relative flex-1 rounded-full bg-border"})}));qO.displayName=GA.displayName;var kC="Tabs",[_6,tQ]=oc(kC,[uC]),$O=uC(),[k6,VA]=_6(kC),VO=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:c,orientation:d="horizontal",dir:f,activationMode:g="automatic",...y}=t,v=Ig(f),[x,b]=Lh({prop:r,onChange:s,defaultProp:c??"",caller:kC});return h.jsx(k6,{scope:n,baseId:zu(),value:x,onValueChange:b,orientation:d,dir:v,activationMode:g,children:h.jsx(ft.div,{dir:v,"data-orientation":d,...y,ref:e})})});VO.displayName=kC;var YO="TabsList",QO=k.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,c=VA(YO,n),d=$O(n);return h.jsx($R,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:r,children:h.jsx(ft.div,{role:"tablist","aria-orientation":c.orientation,...s,ref:e})})});QO.displayName=YO;var WO="TabsTrigger",XO=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...c}=t,d=VA(WO,n),f=$O(n),g=eM(d.baseId,r),y=tM(d.baseId,r),v=r===d.value;return h.jsx(VR,{asChild:!0,...f,focusable:!s,active:v,children:h.jsx(ft.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":y,"data-state":v?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:g,...c,ref:e,onMouseDown:We(t.onMouseDown,x=>{!s&&x.button===0&&x.ctrlKey===!1?d.onValueChange(r):x.preventDefault()}),onKeyDown:We(t.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&d.onValueChange(r)}),onFocus:We(t.onFocus,()=>{const x=d.activationMode!=="manual";!v&&!s&&x&&d.onValueChange(r)})})})});XO.displayName=WO;var JO="TabsContent",ZO=k.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:c,...d}=t,f=VA(JO,n),g=eM(f.baseId,r),y=tM(f.baseId,r),v=r===f.value,x=k.useRef(v);return k.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),h.jsx(ds,{present:s||v,children:({present:b})=>h.jsx(ft.div,{"data-state":v?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":g,hidden:!b,id:y,tabIndex:0,...d,ref:e,style:{...t.style,animationDuration:x.current?"0s":void 0},children:b&&c})})});ZO.displayName=JO;function eM(t,e){return`${t}-trigger-${e}`}function tM(t,e){return`${t}-content-${e}`}var I6=VO,nM=QO,rM=XO,oM=ZO;const R6=I6,iM=k.forwardRef(({className:t,...e},n)=>h.jsx(nM,{ref:n,className:xt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));iM.displayName=nM.displayName;const jy=k.forwardRef(({className:t,...e},n)=>h.jsx(rM,{ref:n,className:xt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));jy.displayName=rM.displayName;const Ly=k.forwardRef(({className:t,...e},n)=>h.jsx(oM,{ref:n,className:xt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ly.displayName=oM.displayName;const N6=ZI("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vs({className:t,variant:e,...n}){return h.jsx("div",{className:xt(N6({variant:e}),t),...n})}function YA(){return h.jsx("div",{className:"flex items-center gap-2 py-3 px-2",children:h.jsx("div",{className:"flex-1 border-t border-border/50"})})}function QA(t){const e=[];let n=!1;for(let r=0;r<t.length;r++){const s=t[r];n&&s.type!=="response.done"&&(e.push({type:"separator",id:`sep-${r}`}),n=!1),e.push(s),(s.type==="response.done"||s.type==="response.completed")&&(n=!0)}return e}function $u(t){if(t.type==="response.function_result.complete"){const e=t;return{call_id:e.call_id,output:e.output,status:e.status}}return null}function sM(t){if("timestamp"in t&&typeof t.timestamp=="string")return new Date(t.timestamp).toLocaleTimeString();if("data"in t&&t.data&&typeof t.data=="object"&&"timestamp"in t.data){const e=t.data.timestamp;if(typeof e=="string")return new Date(e).toLocaleTimeString()}if("response"in t&&t.response&&typeof t.response=="object"&&"created_at"in t.response){const e=t.response.created_at;if(typeof e=="number")return new Date(e*1e3).toLocaleTimeString()}return"sequence_number"in t&&typeof t.sequence_number=="number"?`#${t.sequence_number}`:""}function aM(t){const e=[],n=new Map,r=new Map;let s="";for(const c of t){if(c.type==="response.trace_event.complete"||c.type==="response.trace.complete")continue;if(c.type==="response.output_item.added"){const g=c.item;if(g.type==="function_call"&&g.call_id&&g.name){const y=g.call_id;n.set(y,{name:g.name,arguments:"",callId:y,itemId:g.id,timestamp:new Date().toISOString()}),r.set(y,g.name)}e.push(c);continue}const d=$u(c)!==null;if(c.type==="response.completed"||c.type==="response.done"||c.type==="error"||c.type==="response.workflow_event.complete"||c.type==="response.trace_event.complete"||c.type==="response.trace.complete"||d){if(s.trim()&&(e.push({type:"response.output_text.delta",delta:s.trim()}),s=""),(c.type==="response.trace_event.complete"||c.type==="response.trace.complete")&&"data"in c){const g=c.data;if(g.attributes&&g.attributes["gen_ai.output.messages"]&&typeof g.attributes["gen_ai.output.messages"]=="string")try{const y=JSON.parse(g.attributes["gen_ai.output.messages"]);for(const v of y)if(v.parts)for(const x of v.parts)x.type==="tool_call"&&x.name&&x.id&&r.set(x.id,x.name)}catch{}}const f=$u(c);if(f){const g=f.call_id;if(g&&n.has(g)){const y=n.get(g),v=r.get(g)||y.name||"unknown";e.push({type:"response.function_call.complete",data:{name:v,arguments:y.arguments,call_id:y.callId}}),n.delete(g)}}e.push(c);continue}if(c.type==="response.function_call.delta"&&"data"in c){const f=c.data,g=f.call_id||`call_${Date.now()}`;n.has(g)||n.set(g,{name:f.name||void 0,arguments:"",callId:g,timestamp:new Date().toISOString()}),f.name&&f.name.trim()&&(n.get(g).name=f.name.trim());continue}if(c.type==="response.function_call.complete"&&"data"in c){e.push(c);continue}if(c.type==="response.function_call_arguments.delta"){let f="",g=null;if("delta"in c&&typeof c.delta=="string"&&(f=c.delta),"item_id"in c&&c.item_id){const y=c.item_id;for(const[v,x]of n.entries())if(x.itemId===y||v===y){g=v;break}}if(f&&g){const y=n.get(g);if(y){if(f==="{}"&&y.arguments==="")continue;y.arguments+=f}else console.warn(`Received argument delta for unknown call with item_id: ${"item_id"in c?c.item_id:"unknown"}`)}continue}if(c.type==="response.output_text.delta"&&"delta"in c){s+=c.delta||"",s.length>100&&(s.includes(`

`)||s.trim().match(/[.!?]\s*$/))&&(e.push({type:"response.output_text.delta",delta:s.trim()}),s="");continue}c.type!=="response.usage.complete"&&e.push(c)}for(const[,c]of n)if(c.arguments.trim()&&c.arguments.trim().length>2){const d=r.get(c.callId)||c.name||"unknown";e.push({type:"response.function_call.complete",data:{name:d,arguments:c.arguments,call_id:c.callId}})}return s.trim()&&e.push({type:"response.output_text.delta",delta:s.trim()}),e}function O6(t){switch(t.type){case"response.output_text.delta":if("delta"in t){const e=t.delta||"";return e.length>60?`${e.slice(0,60)}...`:e}return"Text output";case"response.function_call.complete":if("data"in t&&t.data){const e=t.data;let n=e.name||"unknown";(!n||n==="unknown")&&(n="function_call");const r=e.arguments?typeof e.arguments=="string"?e.arguments.slice(0,30):JSON.stringify(e.arguments).slice(0,30):"";return`Calling ${n}(${r}${r.length>=30?"...":""})`}return"Function call";case"response.function_call_arguments.delta":return"delta"in t&&t.delta?`Function arg delta: ${t.delta.slice(0,30)}${t.delta.length>30?"...":""}`:"Function arguments...";case"response.function_result.complete":{const n=t.output.slice(0,40);return`Function result: ${n}${n.length>=40?"...":""}`}case"response.output_item.added":{const e=t;return e.item.type==="function_call"?`Tool call: ${e.item.name}`:"Output item added"}case"response.workflow_event.complete":return"data"in t&&t.data?`Executor: ${t.data.executor_id||"unknown"}`:"Workflow event";case"response.trace_event.complete":case"response.trace.complete":return"data"in t&&t.data?`Trace: ${t.data.operation_name||"unknown"}`:"Trace event";case"response.completed":if("response"in t&&t.response&&"usage"in t.response){const n=t.response.usage;if(n)return`Response complete (${n.total_tokens} tokens)`}return"Response complete";case"response.done":return"Response complete";case"error":return"message"in t&&typeof t.message=="string"?t.message:"Error occurred";default:return`${t.type}`}}function M6(t){switch(t){case"response.output_text.delta":return uO;case"response.function_call.complete":case"response.function_call.delta":case"response.function_call_arguments.delta":return bC;case"response.function_result.complete":return go;case"response.output_item.added":return go;case"response.workflow_event.complete":return MA;case"response.trace_event.complete":case"response.trace.complete":return fg;case"response.completed":return go;case"response.done":return go;case"error":return CC;default:return Bh}}function P6(t){switch(t){case"response.output_text.delta":return"text-gray-600 dark:text-gray-400";case"response.function_call.complete":case"response.function_call.delta":case"response.function_call_arguments.delta":return"text-blue-600 dark:text-blue-400";case"response.function_result.complete":return"text-green-600 dark:text-green-400";case"response.output_item.added":return"text-green-600 dark:text-green-400";case"response.workflow_event.complete":return"text-purple-600 dark:text-purple-400";case"response.trace_event.complete":case"response.trace.complete":return"text-orange-600 dark:text-orange-400";case"response.completed":return"text-green-600 dark:text-green-400";case"response.done":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";default:return"text-gray-600 dark:text-gray-400"}}function D6({event:t}){const[e,n]=k.useState(!1),r=M6(t.type),s=P6(t.type),c=sM(t),d=O6(t),f=t.type==="response.function_call.complete"&&"data"in t&&t.data||t.type==="response.function_result.complete"||t.type==="response.output_item.added"&&$u(t)!==null||t.type==="response.workflow_event.complete"&&"data"in t&&t.data||t.type==="response.trace_event.complete"&&"data"in t&&t.data||t.type==="response.trace.complete"&&"data"in t&&t.data||t.type==="response.output_text.delta"&&"delta"in t&&t.delta&&t.delta.length>100||t.type==="response.completed"&&"response"in t&&t.response||t.type==="error";return h.jsxs("div",{className:"border-l-2 border-muted pl-3 py-2 hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[h.jsx(r,{className:`h-3 w-3 ${s}`}),h.jsx("span",{className:"font-mono",children:c}),h.jsx(Vs,{variant:"outline",className:"text-xs py-0",children:t.type.replace("response.","")})]}),h.jsxs("div",{className:"text-sm",children:[h.jsxs("div",{className:`flex items-center gap-2 ${f?"cursor-pointer":""}`,onClick:()=>f&&n(!e),children:[f&&h.jsx("div",{className:"text-muted-foreground",children:e?h.jsx(us,{className:"h-3 w-3"}):h.jsx(vC,{className:"h-3 w-3"})}),h.jsx("div",{className:"text-muted-foreground flex-1",children:f&&d.length>80?`${d.slice(0,80)}...`:d})]}),e&&f&&h.jsx("div",{className:"mt-2 ml-5 p-3 bg-muted/30 rounded border",children:h.jsx(j6,{event:t})})]})]})}function j6({event:t}){if(t.type==="error"){const e=t;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(CC,{className:"h-4 w-4 text-red-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Error Details"})]}),h.jsxs("div",{className:"text-xs",children:[e.message&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Message:"}),h.jsx("div",{className:"mt-1",children:h.jsx("pre",{className:"text-xs bg-destructive/10 border border-destructive/30 rounded p-2 text-destructive whitespace-pre-wrap break-all",children:e.message})})]}),e.code&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Code:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.code})]}),e.param&&h.jsxs("div",{className:"mb-2",children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Parameter:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.param})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Raw Event:"}),h.jsx("div",{className:"mt-1",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap break-all max-h-32 overflow-auto",children:JSON.stringify(t,null,2)})})]})]})]})}switch(t.type){case"response.function_call.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(bC,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Function Call"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Function:"}),h.jsx("span",{className:"ml-2 font-mono bg-blue-100 dark:bg-blue-900 px-2 py-1 rounded",children:e.name||"unknown"})]}),e.call_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.call_id})]}),e.arguments&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Arguments:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:typeof e.arguments=="string"?e.arguments:JSON.stringify(e.arguments,null,1)})})]})]})]})}break;case"response.function_result.complete":{const e=t;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(go,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Function Result"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.call_id})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${e.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.status})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Output:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:e.output})})]})]})]})}case"response.output_item.added":{const e=$u(t);if(e)return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(go,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Function Result"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.call_id})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${e.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.status})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Output:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:e.output})})]})]})]});break}case"response.workflow_event.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(MA,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Workflow Event"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Event Type:"}),h.jsx("span",{className:"ml-2 font-mono bg-purple-100 dark:bg-purple-900 px-2 py-1 rounded",children:e.event_type||"unknown"})]}),e.executor_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Executor:"}),h.jsx("span",{className:"ml-2 font-mono",children:e.executor_id})]}),e.timestamp&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Timestamp:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.timestamp})]}),e.data&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Data:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:typeof e.data=="string"?e.data:JSON.stringify(e.data,null,1)})})]})]})]})}break;case"response.trace_event.complete":case"response.trace.complete":if("data"in t&&t.data){const e=t.data;return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fg,{className:"h-4 w-4 text-orange-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Trace Event"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Operation:"}),h.jsx("span",{className:"ml-2 font-mono bg-orange-100 dark:bg-orange-900 px-2 py-1 rounded",children:e.operation_name||"unknown"})]}),e.span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Span ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.span_id})]}),e.trace_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Trace ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.trace_id})]}),e.duration_ms&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Duration:"}),h.jsxs("span",{className:"ml-2 font-mono text-xs",children:[Number(e.duration_ms).toFixed(2),"ms"]})]}),e.status&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${e.status==="StatusCode.UNSET"||e.status==="OK"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:e.status||"unknown"})]}),e.entity_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Entity:"}),h.jsx("span",{className:"ml-2 font-mono text-xs",children:e.entity_id})]}),e.attributes&&Object.keys(e.attributes).length>0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Attributes:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap break-all",children:(()=>{try{const n={...e.attributes};return Object.keys(n).forEach(r=>{if(typeof n[r]=="string"&&n[r].startsWith("["))try{n[r]=JSON.parse(n[r])}catch{}}),JSON.stringify(n,null,2)}catch{return JSON.stringify(e.attributes,null,2)}})()})})]})]})]})}break;case"response.output_text.delta":if("delta"in t&&t.delta)return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(uO,{className:"h-4 w-4 text-gray-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Text Output"})]}),h.jsx("div",{className:"max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:t.delta})})]});break;case"response.completed":if("response"in t&&t.response){const n=t.response;return h.jsx("div",{className:"space-y-2",children:h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[n.usage&&h.jsxs(h.Fragment,{children:[h.jsx("div",{children:h.jsx("span",{className:"font-medium text-muted-foreground",children:"Usage:"})}),h.jsxs("div",{className:"ml-4 space-y-1",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Input tokens:"}),h.jsx("span",{className:"ml-2 font-mono",children:n.usage.input_tokens})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Output tokens:"}),h.jsx("span",{className:"ml-2 font-mono",children:n.usage.output_tokens})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Total tokens:"}),h.jsx("span",{className:"ml-2 font-mono bg-green-100 dark:bg-green-900 px-2 py-1 rounded",children:n.usage.total_tokens})]})]})]}),n.id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Response ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:n.id})]}),n.model&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Model:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:n.model})]})]})})}break;default:return h.jsx("div",{className:"text-xs text-muted-foreground",children:h.jsx("pre",{className:"bg-background border rounded p-2 overflow-auto max-h-32",children:JSON.stringify(t,null,2)})})}return null}function L6({events:t,isStreaming:e}){const n=k.useRef(null),r=aM(t),c=[...QA(r)].reverse();return h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(MA,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Events"}),h.jsxs(Vs,{variant:"outline",children:[r.length,t.length>r.length?` (${t.length} raw)`:""]})]}),e&&h.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[h.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-green-500 dark:bg-green-400"}),"Streaming"]})]}),h.jsx(td,{ref:n,className:"flex-1",children:h.jsx("div",{className:"p-3",children:r.length===0?h.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:t.length===0?"No events yet. Start a conversation to see real-time events.":"Processing events... Accumulated events will appear here."}):h.jsx("div",{className:"space-y-2",children:c.map((d,f)=>"type"in d&&d.type==="separator"?h.jsx(YA,{},d.id):h.jsx(D6,{event:d},`${d.type}-${f}`))})})})]})}function U6({events:t}){const e=t.filter(s=>s.type==="response.trace_event.complete"||s.type==="response.trace.complete"),r=[...QA(e)].reverse();return h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-2 p-3 border-b",children:[h.jsx(fg,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Traces"}),h.jsx(Vs,{variant:"outline",children:e.length})]}),h.jsx(td,{className:"flex-1",children:h.jsx("div",{className:"p-3",children:e.length===0?h.jsxs("div",{className:"text-center text-muted-foreground text-sm py-8",children:["No trace data available.",h.jsx("br",{}),t&&t.length>0&&h.jsxs("div",{className:"mt-3 text-xs border rounded p-2",children:[" ",h.jsx(wv,{className:"inline h-4 w-4 mr-1  "}),"You may have to set the environment variable"," ",h.jsx("span",{className:"font-mono bg-accent/10 px-1 rounded",children:"ENABLE_OTEL=true"})," ","or restart devui with the tracing flag"," ",h.jsx("div",{className:"font-mono bg-accent/10 px-1 rounded",children:"devui --tracing"}),"to enable tracing."]})]}):h.jsx("div",{className:"space-y-3",children:r.map((s,c)=>"type"in s&&s.type==="separator"?h.jsx(YA,{},s.id):h.jsx(H6,{event:s},c))})})})]})}function H6({event:t}){const[e,n]=k.useState(!1);if(t.type!=="response.trace_event.complete"&&t.type!=="response.trace.complete"||!("data"in t))return h.jsxs("div",{className:"border rounded p-3 text-red-600 dark:text-red-400 text-xs",children:["Error: Expected trace event but got ",t.type]});const r=t.data;let s=new Date().toLocaleTimeString();r.end_time?s=new Date(r.end_time*1e3).toLocaleTimeString():r.start_time?s=new Date(r.start_time*1e3).toLocaleTimeString():r.timestamp&&(s=new Date(r.timestamp).toLocaleTimeString());const c=r.operation_name||"Unknown Operation",d=r.duration_ms?`${Number(r.duration_ms).toFixed(1)}ms`:"",f=r.entity_id||"";return h.jsxs("div",{className:"border-l-2 border-muted pl-3 py-2 hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-1",children:[h.jsx(fg,{className:"h-3 w-3 text-orange-600 dark:text-orange-400"}),h.jsx("span",{className:"font-mono",children:s}),h.jsx(Vs,{variant:"outline",className:"text-xs py-0",children:"trace"}),d&&h.jsx(Vs,{variant:"secondary",className:"text-xs py-0",children:d})]}),h.jsxs("div",{className:"text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>n(!e),children:[h.jsx("div",{className:"text-muted-foreground",children:e?h.jsx(us,{className:"h-3 w-3"}):h.jsx(vC,{className:"h-3 w-3"})}),h.jsxs("div",{className:"text-muted-foreground flex-1 break-all",children:[h.jsx("span",{className:"font-medium",children:c}),f&&h.jsxs("span",{className:"ml-2 text-xs",children:["(",f,")"]})]})]}),e&&h.jsx("div",{className:"mt-2 ml-5 p-3 bg-muted/30 rounded border",children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fg,{className:"h-4 w-4 text-orange-500"}),h.jsx("span",{className:"font-semibold text-sm",children:"Trace Details"})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Operation:"}),h.jsx("span",{className:"ml-2 font-mono bg-orange-100 dark:bg-orange-900 px-2 py-1 rounded",children:c})]}),r.span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Span ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:r.span_id})]}),r.trace_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Trace ID:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:r.trace_id})]}),r.parent_span_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Parent Span:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:r.parent_span_id})]}),r.duration_ms&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Duration:"}),h.jsxs("span",{className:"ml-2 font-mono text-xs",children:[Number(r.duration_ms).toFixed(2),"ms"]})]}),r.status&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${r.status==="StatusCode.UNSET"||r.status==="OK"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:r.status||"unknown"})]}),r.entity_id&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Entity:"}),h.jsx("span",{className:"ml-2 font-mono text-xs break-all",children:r.entity_id})]}),r.attributes&&Object.keys(r.attributes).length>0&&h.jsxs("div",{children:[h.jsx("span",{className:"font-medium text-muted-foreground",children:"Attributes:"}),h.jsx("div",{className:"mt-1 max-h-32 overflow-auto",children:h.jsx("pre",{className:"text-xs bg-background border rounded p-2 whitespace-pre-wrap max-w-full break-all",children:(()=>{try{const g={...r.attributes};return Object.keys(g).forEach(y=>{if(typeof g[y]=="string"&&g[y].startsWith("["))try{g[y]=JSON.parse(g[y])}catch{}}),JSON.stringify(g,null,2)}catch{return JSON.stringify(r.attributes,null,2)}})()})})]})]})]})})]})]})}function B6({events:t}){const e=aM(t),n=[],r=e.filter(g=>g.type==="response.function_call.complete"),s=t.filter(g=>$u(g)!==null),c=new Map;s.forEach(g=>{const y=$u(g);y&&c.set(y.call_id,g)}),r.forEach(g=>{if(n.push(g),"data"in g&&g.data&&g.data.call_id){const y=String(g.data.call_id),v=c.get(y);v&&(n.push(v),c.delete(y))}}),c.forEach(g=>{n.push(g)});const f=[...QA(n)].reverse();return h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-2 p-3 border-b",children:[h.jsx(bC,{className:"h-4 w-4"}),h.jsx("span",{className:"font-medium",children:"Tools"}),h.jsx(Vs,{variant:"outline",children:n.length})]}),h.jsx(td,{className:"flex-1",children:h.jsx("div",{className:"p-3",children:n.length===0?h.jsx("div",{className:"text-center text-muted-foreground text-sm py-8",children:"No tool executions yet. Tool calls will appear here during conversations."}):h.jsx("div",{className:"space-y-3",children:f.map((g,y)=>"type"in g&&g.type==="separator"?h.jsx(YA,{},g.id):h.jsx(z6,{event:g},y))})})})]})}function z6({event:t}){const e=sM(t),n=t.type==="response.function_call.complete",r=$u(t),s=r!==null;if(!n&&!s)return null;const c=n&&"data"in t?t.data:null;return h.jsxs("div",{className:"border rounded p-3",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gO,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-400"}),h.jsx("span",{className:"font-medium text-sm",children:n?"Tool Call":"Tool Result"}),n&&c&&c.name!==void 0&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",String(c.name),")"]})]}),h.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:e})]}),n&&c&&h.jsxs("div",{className:"p-2 bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(bC,{className:"h-3 w-3 text-blue-600 dark:text-blue-400"}),h.jsx("span",{className:"text-xs font-mono bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:"CALL"}),h.jsx("span",{className:"font-medium text-sm",children:String(c.name||"unknown")})]}),c.arguments!==void 0&&h.jsxs("div",{className:"text-xs",children:[h.jsx("span",{className:"text-muted-foreground mb-1 block",children:"Arguments:"}),h.jsx("pre",{className:"p-2 bg-background border rounded text-xs overflow-auto max-h-32 max-w-full break-all whitespace-pre-wrap",children:typeof c.arguments=="string"?c.arguments:JSON.stringify(c.arguments,null,1)})]})]}),s&&r&&h.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-950/50 border border-green-200 dark:border-green-800 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(go,{className:"h-3 w-3 text-green-600 dark:text-green-400"}),h.jsx("span",{className:"text-xs font-mono bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"RESULT"}),r.status!=="completed"&&h.jsx("span",{className:"ml-auto px-2 py-1 rounded text-xs font-medium bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200",children:r.status})]}),h.jsxs("div",{className:"text-xs space-y-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-muted-foreground",children:"Call ID:"}),h.jsx("span",{className:"font-mono text-xs break-all",children:r.call_id})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground block mb-1",children:"Output:"}),h.jsx("pre",{className:"p-2 bg-background border rounded text-xs overflow-auto max-h-32 break-all whitespace-pre-wrap",children:r.output})]})]})]})]})}function F6({events:t,isStreaming:e=!1,onClose:n}){return h.jsx("div",{className:"flex-1 border-l flex flex-col min-h-0",children:h.jsxs(R6,{defaultValue:"events",className:"flex-1 flex flex-col min-h-0",children:[h.jsxs("div",{className:"px-3 pt-3 flex items-center gap-2 flex-shrink-0",children:[h.jsxs(iM,{className:"flex-1",children:[h.jsx(jy,{value:"events",className:"flex-1",children:"Events"}),h.jsx(jy,{value:"traces",className:"flex-1",children:"Traces"}),h.jsx(jy,{value:"tools",className:"flex-1",children:"Tools"})]}),n&&h.jsx(ht,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0 flex-shrink-0",title:"Hide debug panel",children:h.jsx(F5,{className:"h-4 w-4"})})]}),h.jsx(Ly,{value:"events",className:"flex-1 mt-0 overflow-hidden",children:h.jsx(L6,{events:t,isStreaming:e})}),h.jsx(Ly,{value:"traces",className:"flex-1 mt-0 overflow-hidden",children:h.jsx(U6,{events:t})}),h.jsx(Ly,{value:"tools",className:"flex-1 mt-0 overflow-hidden",children:h.jsx(B6,{events:t})})]})})}function Za({open:t,onOpenChange:e,children:n}){return t?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>e(!1),children:[h.jsx("div",{className:"absolute inset-0 bg-black/50"}),h.jsx("div",{onClick:r=>r.stopPropagation(),children:n})]}):null}function ec({children:t,className:e=""}){const r=e.includes("w-[")||e.includes("w-full")||e.includes("max-w-")?"":"max-w-lg w-full";return h.jsx("div",{className:`relative bg-background border rounded-lg shadow-lg max-h-[90vh] overflow-hidden ${r} ${e}`,children:t})}function tc({children:t,className:e=""}){return h.jsx("div",{className:`space-y-2 ${e}`,children:t})}function nc({children:t,className:e=""}){return h.jsx("h2",{className:`text-lg font-semibold ${e}`,children:t})}function K6({children:t,className:e=""}){return h.jsx("p",{className:`text-sm text-muted-foreground ${e}`,children:t})}function Il({onClose:t}){return h.jsx(ht,{variant:"ghost",size:"sm",onClick:t,className:"absolute top-4 right-4 h-8 w-8 p-0 rounded-sm opacity-70 hover:opacity-100",children:h.jsx(LA,{className:"h-4 w-4"})})}function G6({children:t}){return h.jsx("div",{className:"flex justify-end gap-2 p-4 border-t bg-muted/50",children:t})}function Ix({className:t,type:e,...n}){return h.jsx("input",{type:e,"data-slot":"input",className:xt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var q6="Label",cM=k.forwardRef((t,e)=>h.jsx(ft.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));cM.displayName=q6;var $6=cM;function ml({className:t,...e}){return h.jsx($6,{"data-slot":"label",className:xt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function R0({open:t,onOpenChange:e,onBackendUrlChange:n}){const[r,s]=k.useState("settings"),c="http://localhost:8080",[d,f]=k.useState(()=>localStorage.getItem("devui_backend_url")||c),[g,y]=k.useState(d),v=()=>{try{new URL(g),localStorage.setItem("devui_backend_url",g),f(g),n?.(g),e(!1),window.location.reload()}catch{alert("Please enter a valid URL (e.g., http://localhost:8080)")}},x=()=>{localStorage.removeItem("devui_backend_url"),y(c),f(c),n?.(c),window.location.reload()},b=g!==d,A=!localStorage.getItem("devui_backend_url");return h.jsx(Za,{open:t,onOpenChange:e,children:h.jsxs(ec,{className:"w-[600px] max-w-[90vw]",children:[h.jsx(tc,{className:"p-6 pb-2",children:h.jsx(nc,{children:"Settings"})}),h.jsx(Il,{onClose:()=>e(!1)}),h.jsxs("div",{className:"flex border-b px-6",children:[h.jsxs("button",{onClick:()=>s("settings"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="settings"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:["Settings",r==="settings"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),h.jsxs("button",{onClick:()=>s("about"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="about"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:["About",r==="about"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]}),h.jsxs("div",{className:"px-6 pb-6 min-h-[240px]",children:[r==="settings"&&h.jsx("div",{className:"space-y-6 pt-4",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(ml,{htmlFor:"backend-url",className:"text-sm font-medium",children:"Backend URL"}),!A&&h.jsxs(ht,{variant:"ghost",size:"sm",onClick:x,className:"h-7 text-xs",title:"Reset to default",children:[h.jsx(DA,{className:"h-3 w-3 mr-1"}),"Reset"]})]}),h.jsx(Ix,{id:"backend-url",type:"url",value:g,onChange:I=>y(I.target.value),placeholder:"http://localhost:8080",className:"font-mono text-sm"}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default: ",h.jsx("span",{className:"font-mono",children:c})]}),h.jsx("div",{className:"flex gap-2 pt-2 min-h-[36px]",children:b&&h.jsxs(h.Fragment,{children:[h.jsx(ht,{onClick:v,size:"sm",className:"flex-1",children:"Apply & Reload"}),h.jsx(ht,{onClick:()=>y(d),variant:"outline",size:"sm",className:"flex-1",children:"Cancel"})]})})]})}),r==="about"&&h.jsxs("div",{className:"space-y-4 pt-4",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"DevUI is a sample app for getting started with Agent Framework."}),h.jsx("div",{className:"flex justify-center pt-2",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:()=>window.open("https://github.com/microsoft/agent-framework","_blank"),className:"text-xs",children:[h.jsx(PA,{className:"h-3 w-3 mr-1"}),"Learn More about Agent Framework"]})})]})]})]})})}function V6({open:t,onClose:e,agentName:n="Agent"}){const[r,s]=k.useState("docker"),[c,d]=k.useState(null),f=k.useRef(null);k.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const g=async(b,A)=>{try{await navigator.clipboard.writeText(b),d(A),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{d(null),f.current=null},2e3)}catch(I){console.error("Failed to copy template:",I),d(null)}},y=`# Dockerfile for ${n}
FROM python:3.11-slim

WORKDIR /app

# Install dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy agent/workflow directories
COPY . .

# Expose DevUI default port
EXPOSE 8080

# Run DevUI server
CMD ["devui", ".", "--port", "8080", "--host", "0.0.0.0"]
`,v=`# docker-compose.yml
version: '3.8'

services:
  ${n.toLowerCase().replace(/\s+/g,"-")}:
    build: .
    environment:
      # OpenAI
      - OPENAI_API_KEY=\${OPENAI_API_KEY}
      - OPENAI_CHAT_MODEL_ID=\${OPENAI_CHAT_MODEL_ID:-gpt-4o-mini}
      # Or Azure OpenAI
      - AZURE_OPENAI_API_KEY=\${AZURE_OPENAI_API_KEY}
      - AZURE_OPENAI_ENDPOINT=\${AZURE_OPENAI_ENDPOINT}
      - AZURE_OPENAI_CHAT_DEPLOYMENT_NAME=\${AZURE_OPENAI_CHAT_DEPLOYMENT_NAME}
      # Optional: Enable tracing
      - ENABLE_OTEL=\${ENABLE_OTEL:-false}
    ports:
      - "8080:8080"
    restart: unless-stopped
`,x=`# requirements.txt
agent-framework-devui>=0.1.0
agent-framework>=0.1.0
# Chat clients (install what you need)
openai>=1.0.0
# azure-openai
# anthropic
`;return h.jsx(Za,{open:t,onOpenChange:e,children:h.jsxs(ec,{className:"w-[800px] max-w-[90vw]",children:[h.jsx(Il,{onClose:e}),h.jsxs(tc,{className:"p-6 pb-2",children:[h.jsxs(nc,{className:"flex items-center gap-2",children:[h.jsx(fO,{className:"h-5 w-5"}),"Deploy ",n]}),h.jsx("p",{className:"text-sm text-muted-foreground pt-1",children:"Get started with containerizing your agent for deployment."})]}),h.jsxs("div",{className:"flex border-b px-6",children:[h.jsxs("button",{onClick:()=>s("docker"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="docker"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[h.jsx(a5,{className:"h-4 w-4 mr-2 inline"}),"Docker",r==="docker"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),h.jsxs("button",{onClick:()=>s("azure"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${r==="azure"?"text-foreground":"text-muted-foreground hover:text-foreground"}`,children:[h.jsx(o5,{className:"h-4 w-4 mr-2 inline"}),"Azure",r==="azure"&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]}),h.jsx("div",{className:"px-6 pb-6 min-h-[400px]",children:h.jsx(td,{className:"h-[500px]",children:h.jsxs("div",{className:"pr-4",children:[r==="docker"&&h.jsxs("div",{className:"space-y-4 pt-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Containerize with Docker"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Package your agent as a Docker container for consistent deployment anywhere."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm font-medium",children:"Dockerfile"}),h.jsx(ht,{size:"sm",variant:"ghost",onClick:()=>g(y,"dockerfile"),children:c==="dockerfile"?h.jsxs(h.Fragment,{children:[h.jsx(go,{className:"h-4 w-4 mr-1 text-green-500"}),"Copied!"]}):h.jsxs(h.Fragment,{children:[h.jsx(Wm,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),h.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs overflow-x-auto border",children:y})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm font-medium",children:"docker-compose.yml"}),h.jsx(ht,{size:"sm",variant:"ghost",onClick:()=>g(v,"compose"),children:c==="compose"?h.jsxs(h.Fragment,{children:[h.jsx(go,{className:"h-4 w-4 mr-1 text-green-500"}),"Copied!"]}):h.jsxs(h.Fragment,{children:[h.jsx(Wm,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),h.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs overflow-x-auto border",children:v})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("span",{className:"text-sm font-medium",children:"requirements.txt"}),h.jsx(ht,{size:"sm",variant:"ghost",onClick:()=>g(x,"requirements"),children:c==="requirements"?h.jsxs(h.Fragment,{children:[h.jsx(go,{className:"h-4 w-4 mr-1 text-green-500"}),"Copied!"]}):h.jsxs(h.Fragment,{children:[h.jsx(Wm,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),h.jsx("pre",{className:"bg-muted p-3 rounded-md text-xs overflow-x-auto border",children:x})]}),h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:[h.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Quick Start"}),h.jsxs("ol",{className:"text-xs space-y-1 list-decimal list-inside text-muted-foreground",children:[h.jsx("li",{children:"Save the files above to your project directory"}),h.jsxs("li",{children:["Build:"," ",h.jsxs("code",{className:"bg-muted px-1 rounded",children:["docker build -t ",n.toLowerCase(),"-agent ."]})]}),h.jsxs("li",{children:["Run:"," ",h.jsx("code",{className:"bg-muted px-1 rounded",children:"docker-compose up"})]}),h.jsx("li",{children:"Your agent is now running in a container!"})]})]}),h.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-md p-3",children:[h.jsx("h4",{className:"text-sm font-semibold mb-2 text-amber-900 dark:text-amber-100",children:" Production Considerations"}),h.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside text-amber-800 dark:text-amber-200",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"In-memory state:"})," Conversations are lost when container restarts"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"No authentication:"})," Add reverse proxy (nginx, Caddy) with auth for production"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Security:"})," Use Azure Key Vault for secrets management"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Scaling:"})," Single instance only due to in-memory conversation store"]})]})]}),h.jsxs("div",{className:"border-t pt-4",children:[h.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Pre-Deployment Checklist"}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(go,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),h.jsx("span",{className:"text-muted-foreground",children:"Set environment variables (API keys, secrets)"})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(go,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),h.jsx("span",{className:"text-muted-foreground",children:"Test agent locally in container"})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(go,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),h.jsx("span",{className:"text-muted-foreground",children:"Configure logging and monitoring"})]}),h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx(go,{className:"h-4 w-4 mt-0.5 text-muted-foreground flex-shrink-0"}),h.jsx("span",{className:"text-muted-foreground",children:"Set up error handling and retries"})]})]})]})]}),r==="azure"&&h.jsxs("div",{className:"space-y-4 pt-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Deploy to Azure Container Apps"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Azure Container Apps provides serverless containers with auto-scaling and integrated monitoring."})]}),h.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[h.jsx("h4",{className:"font-medium text-sm",children:"Prerequisites"}),h.jsxs("ul",{className:"text-xs space-y-1 list-disc list-inside text-muted-foreground",children:[h.jsx("li",{children:"Azure subscription"}),h.jsxs("li",{children:["Azure CLI installed (",h.jsx("code",{className:"bg-muted px-1 rounded",children:"az --version"}),")"]}),h.jsx("li",{children:"Docker installed and running"}),h.jsxs("li",{children:["Logged in to Azure:"," ",h.jsx("code",{className:"bg-muted px-1 rounded",children:"az login"})]})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium text-sm",children:"Deployment Steps"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"border-l-2 border-primary pl-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:"1"}),h.jsx("h5",{className:"font-medium text-sm",children:"Create Azure Container Registry"})]}),h.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto border mt-2",children:`# Create resource group
az group create --name myResourceGroup --location eastus

# Create container registry
az acr create --resource-group myResourceGroup \\
  --name myregistry --sku Basic`})]}),h.jsxs("div",{className:"border-l-2 border-primary pl-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:"2"}),h.jsx("h5",{className:"font-medium text-sm",children:"Build and Push Docker Image"})]}),h.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto border mt-2",children:`# Build and push in one command
az acr build --registry myregistry \\
  --image ${n.toLowerCase()}-agent:latest .`})]}),h.jsxs("div",{className:"border-l-2 border-primary pl-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:"3"}),h.jsx("h5",{className:"font-medium text-sm",children:"Create Container Apps Environment"})]}),h.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto border mt-2",children:`az containerapp env create --name myEnvironment \\
  --resource-group myResourceGroup \\
  --location eastus`})]}),h.jsxs("div",{className:"border-l-2 border-primary pl-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:"4"}),h.jsx("h5",{className:"font-medium text-sm",children:"Deploy Container App"})]}),h.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto border mt-2",children:`az containerapp create --name ${n.toLowerCase()}-app \\
  --resource-group myResourceGroup \\
  --environment myEnvironment \\
  --image myregistry.azurecr.io/${n.toLowerCase()}-agent:latest \\
  --target-port 8080 \\
  --ingress 'external' \\
  --registry-server myregistry.azurecr.io \\
  --env-vars OPENAI_API_KEY=secretref:openai-key OPENAI_CHAT_MODEL_ID=gpt-4o-mini`})]}),h.jsxs("div",{className:"border-l-2 border-primary pl-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-bold",children:"5"}),h.jsx("h5",{className:"font-medium text-sm",children:"Get Application URL"})]}),h.jsx("pre",{className:"bg-muted p-2 rounded text-xs overflow-x-auto border mt-2",children:`az containerapp show --name ${n.toLowerCase()}-app \\
  --resource-group myResourceGroup \\
  --query properties.configuration.ingress.fqdn`})]})]})]}),h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/50 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:[h.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Learn More"}),h.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Explore Azure Container Apps documentation for advanced features like scaling, monitoring, and CI/CD integration."}),h.jsx(ht,{size:"sm",variant:"outline",className:"w-full",asChild:!0,children:h.jsxs("a",{href:"https://learn.microsoft.com/azure/container-apps/",target:"_blank",rel:"noopener noreferrer",children:[h.jsx(PA,{className:"h-3 w-3 mr-1"}),"View Azure Container Apps Documentation"]})})]})]})]})})})]})})}function Y6({className:t,...e}){return h.jsx("div",{"data-slot":"card",className:xt("bg-card text-card-foreground flex flex-col gap-6 rounded border py-6 shadow-sm",t),...e})}function Q6({className:t,...e}){return h.jsx("div",{"data-slot":"card-header",className:xt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function lM({className:t,...e}){return h.jsx("div",{"data-slot":"card-title",className:xt("leading-none font-semibold",t),...e})}function W6({className:t,...e}){return h.jsx("div",{"data-slot":"card-description",className:xt("text-muted-foreground text-sm",t),...e})}function X6({className:t,...e}){return h.jsx("div",{"data-slot":"card-content",className:xt("px-6",t),...e})}function J6({className:t,...e}){return h.jsx("div",{"data-slot":"card-footer",className:xt("flex items-center px-6 [.border-t]:pt-6",t),...e})}const pl=[{id:"foundry-weather-agent",name:"Azure AI Weather Agent",description:"Weather agent using Azure AI Agent (Foundry) with Azure CLI authentication",type:"agent",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/foundry_agent/agent.py",tags:["azure-ai","foundry","tools"],author:"Microsoft",difficulty:"beginner",features:["Azure AI Agent integration","Azure CLI authentication","Mock weather tools"],requiredEnvVars:[{name:"AZURE_AI_PROJECT_ENDPOINT",description:"Azure AI Foundry project endpoint URL",required:!0,example:"https://your-project.api.azureml.ms"},{name:"FOUNDRY_MODEL_DEPLOYMENT_NAME",description:"Name of the deployed model in Azure AI Foundry",required:!0,example:"gpt-4o"}]},{id:"weather-agent-azure",name:"Azure OpenAI Weather Agent",description:"Weather agent using Azure OpenAI with API key authentication",type:"agent",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/weather_agent_azure/agent.py",tags:["azure","openai","tools"],author:"Microsoft",difficulty:"beginner",features:["Azure OpenAI integration","API key authentication","Function calling","Mock weather tools"],requiredEnvVars:[{name:"AZURE_OPENAI_API_KEY",description:"Azure OpenAI API key",required:!0},{name:"AZURE_OPENAI_CHAT_DEPLOYMENT_NAME",description:"Name of the deployed model in Azure OpenAI",required:!0,example:"gpt-4o"},{name:"AZURE_OPENAI_ENDPOINT",description:"Azure OpenAI endpoint URL",required:!0,example:"https://your-resource.openai.azure.com"}]},{id:"spam-workflow",name:"Spam Detection Workflow",description:"5-step workflow demonstrating email spam detection with branching logic",type:"workflow",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/spam_workflow/workflow.py",tags:["workflow","branching","multi-step"],author:"Microsoft",difficulty:"beginner",features:["Sequential execution","Conditional branching","Mock spam detection"]},{id:"fanout-workflow",name:"Complex Fan-In/Fan-Out Workflow",description:"Advanced data processing workflow with parallel validation, transformation, and quality assurance stages",type:"workflow",url:"https://raw.githubusercontent.com/microsoft/agent-framework/main/python/samples/getting_started/devui/fanout_workflow/workflow.py",tags:["workflow","fan-out","fan-in","parallel"],author:"Microsoft",difficulty:"advanced",features:["Fan-out pattern","Parallel execution","Complex state management","Multi-stage processing"]}];pl.filter(t=>t.type==="agent"),pl.filter(t=>t.type==="workflow"),pl.filter(t=>t.difficulty==="beginner"),pl.filter(t=>t.difficulty==="intermediate"),pl.filter(t=>t.difficulty==="advanced");const Z6=t=>{switch(t){case"beginner":return"bg-green-100 text-green-700 border-green-200";case"intermediate":return"bg-yellow-100 text-yellow-700 border-yellow-200";case"advanced":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},uM=k.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,role:"alert",className:xt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",t),...e}));uM.displayName="Alert";const dM=k.forwardRef(({className:t,...e},n)=>h.jsx("h5",{ref:n,className:xt("mb-1 font-medium leading-none tracking-tight",t),...e}));dM.displayName="AlertTitle";const hM=k.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:xt("text-sm [&_p]:leading-relaxed",t),...e}));hM.displayName="AlertDescription";function fM({children:t,copyable:e=!1}){const[n,r]=k.useState(!1),s=()=>{navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)};return h.jsxs("div",{className:"relative",children:[h.jsx("pre",{className:"bg-muted p-3 rounded-md text-sm overflow-x-auto font-mono",children:h.jsx("code",{children:t})}),e&&h.jsx(ht,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-6 w-6 p-0",onClick:s,children:n?h.jsx(yC,{className:"h-3 w-3"}):h.jsx(Wm,{className:"h-3 w-3"})})]})}function vy({number:t,title:e,description:n,code:r,action:s,copyable:c=!1}){return h.jsxs("div",{className:"flex gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground font-semibold",children:t})}),h.jsxs("div",{className:"flex-1 space-y-2",children:[h.jsx("h4",{className:"font-semibold",children:e}),n&&h.jsx("p",{className:"text-sm text-muted-foreground",children:n}),r&&h.jsx(fM,{copyable:c,children:r}),s&&h.jsx("div",{children:s})]})]})}function eK({sample:t,open:e,onOpenChange:n}){const r=t.requiredEnvVars&&t.requiredEnvVars.length>0,s=r?0:-1;return h.jsx(Za,{open:e,onOpenChange:n,children:h.jsxs(ec,{className:"max-w-3xl",children:[h.jsxs(tc,{className:"px-6 pt-6 pb-2",children:[h.jsxs(nc,{children:["Setup: ",t.name]}),h.jsxs(K6,{children:["Follow these steps to run this sample ",t.type," locally"]})]}),h.jsx("div",{className:"px-6 pb-6",children:h.jsx(td,{className:"h-[500px]",children:h.jsxs("div",{className:"space-y-6 pr-4",children:[h.jsx(vy,{number:1,title:"Download the sample file",action:h.jsx(ht,{asChild:!0,size:"sm",children:h.jsxs("a",{href:t.url,download:`${t.id}.py`,target:"_blank",rel:"noopener noreferrer",children:[h.jsx(Cv,{className:"h-4 w-4 mr-2"}),"Download ",t.id,".py"]})})}),h.jsx(vy,{number:2,title:"Create a project folder",description:"Create a dedicated folder for this sample and move the downloaded file there:",code:`mkdir -p ~/my-agents/${t.id}
mv ~/Downloads/${t.id}.py ~/my-agents/${t.id}/`,copyable:!0}),r&&h.jsx(vy,{number:3,title:"Set up environment variables",description:"Create a .env file in the project folder with these required variables:",code:t.requiredEnvVars.map(c=>`${c.name}=${c.example||"your-value-here"}
# ${c.description}`).join(`

`),copyable:!0}),h.jsx(vy,{number:4+s,title:"Run with DevUI",description:"Navigate to the folder and start DevUI:",code:`cd ~/my-agents/${t.id}
devui .`,copyable:!0}),h.jsxs(uM,{children:[h.jsx(_5,{className:"h-4 w-4"}),h.jsx(dM,{children:"Alternative: Run Programmatically"}),h.jsxs(hM,{className:"mt-2",children:[h.jsxs("p",{className:"mb-2",children:["You can also run the ",t.type," directly in Python:"]}),h.jsx(fM,{copyable:!0,children:`from ${t.id} import ${t.type}
import asyncio

async def main():
    response = await ${t.type}.run("Hello!")
    print(response)

asyncio.run(main())`})]})]}),h.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[h.jsx(ht,{variant:"outline",size:"sm",asChild:!0,children:h.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:[h.jsx(PA,{className:"h-4 w-4 mr-2"}),"View Source"]})}),h.jsx(ht,{variant:"outline",size:"sm",asChild:!0,children:h.jsxs("a",{href:"https://github.com/microsoft/agent-framework#readme",target:"_blank",rel:"noopener noreferrer",children:[h.jsx(sO,{className:"h-4 w-4 mr-2"}),"Documentation"]})})]})]})})})]})})}function tK({sample:t}){const[e,n]=k.useState(!1),r=t.type==="workflow"?Gu:Ws;return h.jsxs(h.Fragment,{children:[h.jsxs(Y6,{className:"hover:shadow-md transition-shadow duration-200 h-full flex flex-col overflow-hidden w-full",children:[h.jsxs(Q6,{className:"pb-3 min-w-0",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(r,{className:"h-5 w-5"}),h.jsx(Vs,{variant:"secondary",className:"text-xs",children:t.type})]}),h.jsx(Vs,{variant:"outline",className:xt("text-xs border",Z6(t.difficulty)),children:t.difficulty})]}),h.jsx(lM,{className:"text-lg leading-tight",children:t.name}),h.jsx(W6,{className:"text-sm line-clamp-3",children:t.description})]}),h.jsx(X6,{className:"pt-0 flex-1 min-w-0 overflow-hidden",children:h.jsxs("div",{className:"space-y-3 min-w-0",children:[h.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(s=>h.jsx(Vs,{variant:"outline",className:"text-xs",children:s},s)),t.tags.length>3&&h.jsxs(Vs,{variant:"outline",className:"text-xs",children:["+",t.tags.length-3]})]}),t.requiredEnvVars&&t.requiredEnvVars.length>0&&h.jsxs("details",{className:"group min-w-0 max-w-full overflow-hidden",children:[h.jsxs("summary",{className:"cursor-pointer list-none p-2 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md hover:bg-amber-100 dark:hover:bg-amber-950/30 transition-colors flex items-center justify-between gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx(T5,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-500 flex-shrink-0"}),h.jsxs("span",{className:"text-xs font-medium text-amber-900 dark:text-amber-100 truncate",children:["Requires ",t.requiredEnvVars.length," env var",t.requiredEnvVars.length>1?"s":""]})]}),h.jsx(us,{className:"h-3 w-3 text-amber-600 dark:text-amber-500 flex-shrink-0 group-open:rotate-180 transition-transform"})]}),h.jsx("div",{className:"mt-2 p-2 bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-md space-y-2 min-w-0 max-w-full overflow-hidden",children:t.requiredEnvVars.map(s=>h.jsxs("div",{className:"text-xs min-w-0 max-w-full overflow-hidden",children:[h.jsx("div",{className:"font-mono font-medium text-amber-900 dark:text-amber-100 break-words",children:s.name}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300 mt-0.5 break-words",children:s.description}),s.example&&h.jsx("div",{className:"font-mono text-amber-600 dark:text-amber-400 mt-0.5 break-all",children:s.example})]},s.name))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Key Features:"}),h.jsx("ul",{className:"text-xs space-y-1",children:t.features.slice(0,3).map(s=>h.jsxs("li",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-1 h-1 rounded-full bg-current opacity-50"}),h.jsx("span",{children:s})]},s))})]})]})}),h.jsxs(J6,{className:"pt-3 flex-col gap-3",children:[h.jsx("div",{className:"w-full flex items-center justify-between text-xs text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(jA,{className:"h-3 w-3"}),h.jsx("span",{children:t.author})]})}),h.jsxs("div",{className:"w-full flex gap-2",children:[h.jsx(ht,{asChild:!0,className:"flex-1",size:"sm",children:h.jsxs("a",{href:t.url,download:`${t.id}.py`,target:"_blank",rel:"noopener noreferrer",children:[h.jsx(Cv,{className:"h-4 w-4 mr-2"}),"Download"]})}),h.jsxs(ht,{variant:"outline",className:"flex-1",size:"sm",onClick:()=>n(!0),children:[h.jsx(sO,{className:"h-4 w-4 mr-2"}),"Setup Guide"]})]})]})]}),h.jsx(eK,{sample:t,open:e,onOpenChange:n})]})}function Nb({samples:t}){return h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(e=>h.jsx("div",{className:"min-w-0",children:h.jsx(tK,{sample:e})},e.id))})}function N0({onClose:t,variant:e="inline",hasExistingEntities:n=!1}){return e==="inline"?h.jsx("div",{className:"flex-1 overflow-auto",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsx("div",{className:"mb-8 p-4 bg-muted/50 border border-border rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(fF,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold mb-1",children:"No agents or workflows configured yet!"}),h.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["You can configure agents or workflows by running"," ",h.jsx("code",{className:"px-1.5 py-0.5 bg-background rounded text-xs",children:"devui"})," ","in a directory containing them."]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse the sample agents and workflows below. Download them, review the code, and run them locally to get started quickly."})]})]})}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sample Gallery"}),h.jsx(Nb,{samples:pl})]}),h.jsx("div",{className:"text-center mt-12 pt-8 border-t",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Want to create your own agents or workflows? Check out the"," ",h.jsx("a",{href:"https://github.com/microsoft/agent-framework",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"documentation"})]})})]})}):e==="route"?h.jsx("div",{className:"h-full overflow-auto",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[h.jsxs("div",{className:"mb-8",children:[n&&h.jsx("div",{className:"mb-4",children:h.jsxs(ht,{variant:"ghost",onClick:t,className:"gap-2",children:[h.jsx(Bz,{className:"h-4 w-4"}),"Back"]})}),h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Sample Gallery"}),h.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Browse sample agents and workflows to learn the Agent Framework. Download these curated examples and run them locally. Examples range from beginner to advanced."})]})]}),h.jsx(Nb,{samples:pl}),h.jsx("div",{className:"text-center mt-12 pt-8 border-t",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Want to create your own agents or workflows? Check out the"," ",h.jsx("a",{href:"https://github.com/microsoft/agent-framework",className:"text-primary hover:underline",target:"_blank",rel:"noopener noreferrer",children:"documentation"})]})})]})}):h.jsx(Nb,{samples:pl})}function Uy({className:t,...e}){return h.jsx("textarea",{"data-slot":"textarea",className:xt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function nK({onFilesSelected:t,accept:e="image/*,.pdf,audio/*,.wav,.mp3,.m4a,.ogg",multiple:n=!0,maxSize:r=50*1024*1024,disabled:s=!1,className:c=""}){const d=k.useRef(null),f=b=>{if(!b||b.length===0)return;const A=[],I=[];Array.from(b).forEach(_=>{if(_.size>r){I.push(`${_.name} is too large (max ${rK(r)})`);return}if(e&&!oK(_,e)){I.push(`${_.name} is not an accepted file type`);return}A.push(_)}),I.length>0&&console.warn("File upload errors:",I),A.length>0&&t(A)},g=()=>{d.current&&d.current.click()},y=b=>{f(b.target.files),b.target.value=""},v=b=>{if(b.preventDefault(),b.stopPropagation(),s)return;const A=b.dataTransfer.files;f(A)},x=b=>{b.preventDefault(),b.stopPropagation()};return h.jsxs("div",{className:c,children:[h.jsx("input",{ref:d,type:"file",accept:e,multiple:n,onChange:y,className:"hidden",disabled:s}),h.jsx(ht,{type:"button",variant:"outline",size:"icon",onClick:g,disabled:s,onDrop:v,onDragOver:x,className:"shrink-0 transition-colors hover:bg-muted",title:"Upload files (images, PDFs, audio)",children:h.jsx(gF,{className:"h-4 w-4"})})]})}function rK(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}function oK(t,e){return e.split(",").map(r=>r.trim()).some(r=>{if(r.startsWith("."))return t.name.toLowerCase().endsWith(r.toLowerCase());if(r.includes("/*")){const[s]=r.split("/");return t.type.startsWith(s+"/")}else return t.type===r})}function iK({attachments:t,onRemoveAttachment:e,className:n=""}){return t.length===0?null:h.jsx("div",{className:`flex flex-wrap gap-2 p-2 bg-muted rounded-lg ${n}`,children:t.map(r=>h.jsx(sK,{attachment:r,onRemove:()=>e(r.id)},r.id))})}function sK({attachment:t,onRemove:e}){const[n,r]=k.useState(!1),s=()=>{switch(t.type){case"image":return t.preview?h.jsx("img",{src:t.preview,alt:t.file.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-200",children:h.jsx(x5,{className:"h-6 w-6 text-gray-400"})});case"pdf":return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-red-50",children:[h.jsx(Ku,{className:"h-6 w-6 text-red-500 mb-1"}),h.jsx("span",{className:"text-xs text-red-600",children:"PDF"})]});case"audio":return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-purple-50",children:[h.jsx(dO,{className:"h-6 w-6 text-purple-500 mb-1"}),h.jsx("span",{className:"text-xs text-purple-600",children:"AUDIO"})]});default:return h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full bg-gray-100",children:[h.jsx(Ku,{className:"h-6 w-6 text-gray-500 mb-1"}),h.jsx("span",{className:"text-xs text-gray-600",children:"FILE"})]})}};return h.jsxs("div",{className:"relative w-16 h-16 rounded border overflow-hidden group cursor-pointer",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),title:t.file.name,children:[s(),h.jsx("div",{className:`absolute inset-0 bg-black/60 flex items-center justify-center transition-all duration-200 ease-in-out ${n?"opacity-100 backdrop-blur-sm":"opacity-0 pointer-events-none"}`,onClick:e,children:h.jsx("div",{className:`transition-all duration-200 ease-in-out ${n?"scale-100 opacity-100":"scale-75 opacity-0"}`,children:h.jsx(mO,{className:"h-5 w-5 text-white drop-shadow-lg"})})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white text-xs p-1 truncate opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:t.file.name})]})}function aK({code:t,language:e}){const[n,r]=k.useState(!1),s=k.useRef(null);k.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]);const c=async()=>{try{await navigator.clipboard.writeText(t),r(!0),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{r(!1),s.current=null},2e3)}catch(d){console.error("Failed to copy code:",d)}};return h.jsxs("div",{className:"relative group",children:[h.jsx("pre",{className:"my-3 p-3 bg-foreground/5 dark:bg-foreground/10 rounded overflow-x-auto border border-foreground/10",children:h.jsxs("code",{className:"text-xs font-mono block whitespace-pre-wrap break-words",children:[e&&h.jsx("span",{className:"opacity-60 text-[10px] mb-1 block uppercase",children:e}),t]})}),h.jsx("button",{onClick:c,className:`absolute top-2 right-2 p-1.5 rounded-md border shadow-sm
                   bg-background hover:bg-accent
                   text-muted-foreground hover:text-foreground
                   transition-all duration-200
                   opacity-0 group-hover:opacity-100`,title:n?"Copied!":"Copy code",children:n?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-600 dark:text-green-400",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]})}function cK({content:t,className:e=""}){const n=t.split(`
`),r=[];let s=0;for(;s<n.length;){const c=n[s];if(c.trim().startsWith("```")){const f=[],y=c.trim().match(/^```(\w+)?/)?.[1]||"";for(s++;s<n.length&&!n[s].trim().startsWith("```");)f.push(n[s]),s++;s++,r.push(h.jsx(aK,{code:f.join(`
`),language:y},r.length));continue}const d=c.match(/^(#{1,6})\s+(.+)$/);if(d){const f=d[1].length,g=d[2],v=`${["text-2xl","text-xl","text-lg","text-base","text-sm","text-sm"][f-1]} font-semibold mt-4 mb-2 first:mt-0 break-words`,x=f===1?h.jsx("h1",{className:v,children:Oo(g)},r.length):f===2?h.jsx("h2",{className:v,children:Oo(g)},r.length):f===3?h.jsx("h3",{className:v,children:Oo(g)},r.length):f===4?h.jsx("h4",{className:v,children:Oo(g)},r.length):f===5?h.jsx("h5",{className:v,children:Oo(g)},r.length):h.jsx("h6",{className:v,children:Oo(g)},r.length);r.push(x),s++;continue}if(c.match(/^[\s]*[-*+]\s+/)){const f=[];for(;s<n.length&&n[s].match(/^[\s]*[-*+]\s+/);){const g=n[s].replace(/^[\s]*[-*+]\s+/,"");f.push(g),s++}r.push(h.jsx("ul",{className:"my-2 ml-4 list-disc space-y-1 break-words",children:f.map((g,y)=>h.jsx("li",{className:"text-sm break-words",children:Oo(g)},y))},r.length));continue}if(c.match(/^[\s]*\d+\.\s+/)){const f=[];for(;s<n.length&&n[s].match(/^[\s]*\d+\.\s+/);){const g=n[s].replace(/^[\s]*\d+\.\s+/,"");f.push(g),s++}r.push(h.jsx("ol",{className:"my-2 ml-4 list-decimal space-y-1 break-words",children:f.map((g,y)=>h.jsx("li",{className:"text-sm break-words",children:Oo(g)},y))},r.length));continue}if(c.trim().startsWith("|")&&c.trim().endsWith("|")){const f=[];for(;s<n.length&&n[s].trim().startsWith("|")&&n[s].trim().endsWith("|");)f.push(n[s].trim()),s++;if(f.length>=2){const g=f[0].split("|").slice(1,-1).map(v=>v.trim());if(f[1].match(/^\|[\s\-:|]+\|$/)){const v=f.slice(2).map(x=>x.split("|").slice(1,-1).map(b=>b.trim()));r.push(h.jsx("div",{className:"my-3 overflow-x-auto",children:h.jsxs("table",{className:"min-w-full border border-foreground/10 text-sm",children:[h.jsx("thead",{className:"bg-foreground/5",children:h.jsx("tr",{children:g.map((x,b)=>h.jsx("th",{className:"border-b border-foreground/10 px-3 py-2 text-left font-semibold break-words",children:Oo(x)},b))})}),h.jsx("tbody",{children:v.map((x,b)=>h.jsx("tr",{className:"border-b border-foreground/5 last:border-b-0",children:x.map((A,I)=>h.jsx("td",{className:"px-3 py-2 border-r border-foreground/5 last:border-r-0 break-words",children:Oo(A)},I))},b))})]})},r.length));continue}}for(const g of f)r.push(h.jsx("p",{className:"my-1",children:Oo(g)},r.length));continue}if(c.trim().startsWith(">")){const f=[];for(;s<n.length&&n[s].trim().startsWith(">");)f.push(n[s].replace(/^>\s?/,"")),s++;r.push(h.jsx("blockquote",{className:"my-2 pl-4 border-l-4 border-current/30 opacity-80 italic break-words",children:f.map((g,y)=>h.jsx("div",{className:"break-words",children:Oo(g)},y))},r.length));continue}if(c.match(/^[\s]*[-*_]{3,}[\s]*$/)){r.push(h.jsx("hr",{className:"my-4 border-t border-border"},r.length)),s++;continue}if(c.trim()===""){r.push(h.jsx("div",{className:"h-2"},r.length)),s++;continue}r.push(h.jsx("p",{className:"my-1 break-words",children:Oo(c)},r.length)),s++}return h.jsx("div",{className:`markdown-content break-words ${e}`,children:r})}function Oo(t){const e=[];let n=t,r=0;for(;n.length>0;){const s=n.match(/`([^`]+)`/);if(s&&s.index!==void 0){s.index>0&&e.push(h.jsx("span",{children:Zm(n.slice(0,s.index))},r++)),e.push(h.jsx("code",{className:"px-1.5 py-0.5 bg-foreground/10 rounded text-xs font-mono border border-foreground/20",children:s[1]},r++)),n=n.slice(s.index+s[0].length);continue}e.push(h.jsx("span",{children:Zm(n)},r++));break}return e}function Zm(t){const e=[];let n=t,r=0;for(;n.length>0;){const s=[{regex:/\*\*\[([^\]]+)\]\(([^)]+)\)\*\*/,component:"strong-link"},{regex:/__\[([^\]]+)\]\(([^)]+)\)__/,component:"strong-link"},{regex:/\*\[([^\]]+)\]\(([^)]+)\)\*/,component:"em-link"},{regex:/_\[([^\]]+)\]\(([^)]+)\)_/,component:"em-link"},{regex:/\[([^\]]+)\]\(([^)]+)\)/,component:"link"},{regex:/\*\*(.+?)\*\*/,component:"strong"},{regex:/__(.+?)__/,component:"strong"},{regex:/\*(.+?)\*/,component:"em"},{regex:/_(.+?)_/,component:"em"}];let c=!1;for(const d of s){const f=n.match(d.regex);if(f&&f.index!==void 0){if(f.index>0&&e.push(n.slice(0,f.index)),d.component==="strong")e.push(h.jsx("strong",{className:"font-semibold",children:f[1]},r++));else if(d.component==="em")e.push(h.jsx("em",{className:"italic",children:f[1]},r++));else if(d.component==="strong-link"){const g=f[1],y=f[2],v=Zm(g);e.push(h.jsx("strong",{className:"font-semibold",children:h.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-words",children:v})},r++))}else if(d.component==="em-link"){const g=f[1],y=f[2],v=Zm(g);e.push(h.jsx("em",{className:"italic",children:h.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-words",children:v})},r++))}else if(d.component==="link"){const g=f[1],y=f[2],v=Zm(g);e.push(h.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline break-words",children:v},r++))}n=n.slice(f.index+f[0].length),c=!0;break}}if(!c){n.length>0&&e.push(n);break}}return e}function lK({content:t,className:e,isStreaming:n}){if(t.type!=="text")return null;const r=t.text;return h.jsxs("div",{className:`break-words ${e||""}`,children:[h.jsx(cK,{content:r}),n&&r.length>0&&h.jsx("span",{className:"ml-1 inline-block h-2 w-2 animate-pulse rounded-full bg-current"})]})}function uK({content:t,className:e}){const[n,r]=k.useState(!1),[s,c]=k.useState(!1);if(t.type!=="input_image")return null;const d=t.image_url;return n?h.jsx("div",{className:`my-2 p-3 border rounded-lg bg-muted ${e||""}`,children:h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(Ku,{className:"h-4 w-4"}),h.jsx("span",{children:"Image could not be loaded"})]})}):h.jsxs("div",{className:`my-2 ${e||""}`,children:[h.jsx("img",{src:d,alt:"Uploaded image",className:`rounded-lg border max-w-full transition-all cursor-pointer ${s?"max-h-none":"max-h-64"}`,onClick:()=>c(!s),onError:()=>r(!0)}),s&&h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Click to collapse"})]})}function dK({content:t,className:e}){if(t.type!=="input_file")return null;const n=t.file_url||t.file_data,r=t.filename||"file",s=r?.toLowerCase().endsWith(".pdf")||n?.includes("application/pdf"),c=r?.toLowerCase().match(/\.(mp3|wav|m4a|ogg|flac|aac)$/);return s&&n?h.jsxs("div",{className:`my-2 ${e||""}`,children:[h.jsx("div",{className:"border rounded-lg overflow-hidden",children:h.jsx("iframe",{src:n,className:"w-full h-96",title:r})}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx(Ku,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:r}),n&&h.jsxs("a",{href:n,download:r,className:"ml-auto text-xs text-primary hover:underline flex items-center gap-1",children:[h.jsx(Cv,{className:"h-3 w-3"}),"Download"]})]})]}):c&&n?h.jsxs("div",{className:`my-2 p-3 border rounded-lg ${e||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(dO,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm font-medium",children:r})]}),h.jsxs("audio",{controls:!0,className:"w-full",children:[h.jsx("source",{src:n}),"Your browser does not support audio playback."]})]}):h.jsx("div",{className:`my-2 p-3 border rounded-lg bg-muted ${e||""}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ku,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm",children:r})]}),n&&h.jsxs("a",{href:n,download:r,className:"text-xs text-primary hover:underline flex items-center gap-1",children:[h.jsx(Cv,{className:"h-3 w-3"}),"Download"]})]})})}function hK({content:t,className:e,isStreaming:n}){switch(t.type){case"text":return h.jsx(lK,{content:t,className:e,isStreaming:n});case"input_image":return h.jsx(uK,{content:t,className:e});case"input_file":return h.jsx(dK,{content:t,className:e});default:return null}}function fK({name:t,arguments:e,className:n}){const[r,s]=k.useState(!1);let c;try{c=typeof e=="string"?JSON.parse(e):e}catch{c=e}return h.jsxs("div",{className:`my-2 p-3 border rounded bg-blue-50 dark:bg-blue-950/20 ${n||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>s(!r),children:[h.jsx(aO,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),h.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:["Function Call: ",t]}),r?h.jsx(us,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 ml-auto"}):h.jsx(vC,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 ml-auto"})]}),r&&h.jsxs("div",{className:"mt-2 text-xs font-mono bg-white dark:bg-gray-900 p-2 rounded border",children:[h.jsx("div",{className:"text-blue-600 dark:text-blue-400 mb-1",children:"Arguments:"}),h.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(c,null,2)})]})]})}function mK({output:t,call_id:e,className:n}){const[r,s]=k.useState(!1);let c;try{c=typeof t=="string"?JSON.parse(t):t}catch{c=t}return h.jsxs("div",{className:`my-2 p-3 border rounded bg-green-50 dark:bg-green-950/20 ${n||""}`,children:[h.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>s(!r),children:[h.jsx(aO,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),h.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-300",children:"Function Result"}),r?h.jsx(us,{className:"h-4 w-4 text-green-600 dark:text-green-400 ml-auto"}):h.jsx(vC,{className:"h-4 w-4 text-green-600 dark:text-green-400 ml-auto"})]}),r&&h.jsxs("div",{className:"mt-2 text-xs font-mono bg-white dark:bg-gray-900 p-2 rounded border",children:[h.jsx("div",{className:"text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(c,null,2)}),h.jsxs("div",{className:"text-gray-500 text-[10px] mt-2",children:["Call ID: ",e]})]})]})}function O0({item:t,className:e}){if(t.type==="message"){const n=t.status==="in_progress",r=t.content.length>0;return h.jsxs("div",{className:e,children:[t.content.map((s,c)=>h.jsx(hK,{content:s,className:c>0?"mt-2":"",isStreaming:n},c)),n&&!r&&h.jsx("div",{className:"flex items-center space-x-1",children:h.jsxs("div",{className:"flex space-x-1",children:[h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:-0.3s]"}),h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current [animation-delay:-0.15s]"}),h.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-current"})]})})]})}return t.type==="function_call"?h.jsx(fK,{name:t.name,arguments:t.arguments,className:e}):t.type==="function_call_output"?h.jsx(mK,{output:t.output,call_id:t.call_id,className:e}):null}function mM(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var gM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),gK="VisuallyHidden",pK=k.forwardRef((t,e)=>h.jsx(ft.span,{...t,ref:e,style:{...gM,...t.style}}));pK.displayName=gK;var yK=[" ","Enter","ArrowUp","ArrowDown"],vK=[" ","Enter"],Vu="Select",[IC,RC,CK]=dA(Vu),[cf,nQ]=oc(Vu,[CK,lC]),NC=lC(),[wK,Rl]=cf(Vu),[bK,xK]=cf(Vu),pM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:c,value:d,defaultValue:f,onValueChange:g,dir:y,name:v,autoComplete:x,disabled:b,required:A,form:I}=t,_=NC(e),[N,M]=k.useState(null),[U,O]=k.useState(null),[L,H]=k.useState(!1),G=Ig(y),[V,$]=Lh({prop:r,defaultProp:s??!1,onChange:c,caller:Vu}),[ee,se]=Lh({prop:d,defaultProp:f,onChange:g,caller:Vu}),ce=k.useRef(null),oe=N?I||!!N.closest("form"):!0,[he,W]=k.useState(new Set),J=Array.from(he).map(P=>P.props.value).join(";");return h.jsx(LR,{..._,children:h.jsxs(wK,{required:A,scope:e,trigger:N,onTriggerChange:M,valueNode:U,onValueNodeChange:O,valueNodeHasChildren:L,onValueNodeHasChildrenChange:H,contentId:zu(),value:ee,onValueChange:se,open:V,onOpenChange:$,dir:G,triggerPointerDownPosRef:ce,disabled:b,children:[h.jsx(IC.Provider,{scope:e,children:h.jsx(bK,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(P=>{W(F=>new Set(F).add(P))},[]),onNativeOptionRemove:k.useCallback(P=>{W(F=>{const Y=new Set(F);return Y.delete(P),Y})},[]),children:n})}),oe?h.jsxs(UM,{"aria-hidden":!0,required:A,tabIndex:-1,name:v,autoComplete:x,value:ee,onChange:P=>se(P.target.value),disabled:b,form:I,children:[ee===void 0?h.jsx("option",{value:""}):null,Array.from(he)]},J):null]})})};pM.displayName=Vu;var yM="SelectTrigger",vM=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,c=NC(n),d=Rl(yM,n),f=d.disabled||r,g=Lt(e,d.onTriggerChange),y=RC(n),v=k.useRef("touch"),[x,b,A]=BM(_=>{const N=y().filter(O=>!O.disabled),M=N.find(O=>O.value===d.value),U=zM(N,_,M);U!==void 0&&d.onValueChange(U.value)}),I=_=>{f||(d.onOpenChange(!0),A()),_&&(d.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return h.jsx(UR,{asChild:!0,...c,children:h.jsx(ft.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":HM(d.value)?"":void 0,...s,ref:g,onClick:We(s.onClick,_=>{_.currentTarget.focus(),v.current!=="mouse"&&I(_)}),onPointerDown:We(s.onPointerDown,_=>{v.current=_.pointerType;const N=_.target;N.hasPointerCapture(_.pointerId)&&N.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(I(_),_.preventDefault())}),onKeyDown:We(s.onKeyDown,_=>{const N=x.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&b(_.key),!(N&&_.key===" ")&&yK.includes(_.key)&&(I(),_.preventDefault())})})})});vM.displayName=yM;var CM="SelectValue",wM=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:c,placeholder:d="",...f}=t,g=Rl(CM,n),{onValueNodeHasChildrenChange:y}=g,v=c!==void 0,x=Lt(e,g.onValueNodeChange);return br(()=>{y(v)},[y,v]),h.jsx(ft.span,{...f,ref:x,style:{pointerEvents:"none"},children:HM(g.value)?h.jsx(h.Fragment,{children:d}):c})});wM.displayName=CM;var EK="SelectIcon",bM=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return h.jsx(ft.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});bM.displayName=EK;var AK="SelectPortal",xM=t=>h.jsx(xA,{asChild:!0,...t});xM.displayName=AK;var Yu="SelectContent",EM=k.forwardRef((t,e)=>{const n=Rl(Yu,t.__scopeSelect),[r,s]=k.useState();if(br(()=>{s(new DocumentFragment)},[]),!n.open){const c=r;return c?kg.createPortal(h.jsx(AM,{scope:t.__scopeSelect,children:h.jsx(IC.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),c):null}return h.jsx(TM,{...t,ref:e})});EM.displayName=Yu;var Ji=10,[AM,Nl]=cf(Yu),TK="SelectContentImpl",SK=jh("SelectContent.RemoveScroll"),TM=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:c,onPointerDownOutside:d,side:f,sideOffset:g,align:y,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:A,sticky:I,hideWhenDetached:_,avoidCollisions:N,...M}=t,U=Rl(Yu,n),[O,L]=k.useState(null),[H,G]=k.useState(null),V=Lt(e,le=>L(le)),[$,ee]=k.useState(null),[se,ce]=k.useState(null),oe=RC(n),[he,W]=k.useState(!1),J=k.useRef(!1);k.useEffect(()=>{if(O)return QR(O)},[O]),fR();const P=k.useCallback(le=>{const[Ce,...je]=oe().map(Ee=>Ee.ref.current),[be]=je.slice(-1),we=document.activeElement;for(const Ee of le)if(Ee===we||(Ee?.scrollIntoView({block:"nearest"}),Ee===Ce&&H&&(H.scrollTop=0),Ee===be&&H&&(H.scrollTop=H.scrollHeight),Ee?.focus(),document.activeElement!==we))return},[oe,H]),F=k.useCallback(()=>P([$,O]),[P,$,O]);k.useEffect(()=>{he&&F()},[he,F]);const{onOpenChange:Y,triggerPointerDownPosRef:X}=U;k.useEffect(()=>{if(O){let le={x:0,y:0};const Ce=be=>{le={x:Math.abs(Math.round(be.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(be.pageY)-(X.current?.y??0))}},je=be=>{le.x<=10&&le.y<=10?be.preventDefault():O.contains(be.target)||Y(!1),document.removeEventListener("pointermove",Ce),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",je,{capture:!0})}}},[O,Y,X]),k.useEffect(()=>{const le=()=>Y(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[Y]);const[B,Q]=BM(le=>{const Ce=oe().filter(we=>!we.disabled),je=Ce.find(we=>we.ref.current===document.activeElement),be=zM(Ce,le,je);be&&setTimeout(()=>be.ref.current.focus())}),ie=k.useCallback((le,Ce,je)=>{const be=!J.current&&!je;(U.value!==void 0&&U.value===Ce||be)&&(ee(le),be&&(J.current=!0))},[U.value]),ue=k.useCallback(()=>O?.focus(),[O]),me=k.useCallback((le,Ce,je)=>{const be=!J.current&&!je;(U.value!==void 0&&U.value===Ce||be)&&ce(le)},[U.value]),Oe=r==="popper"?Rx:SM,xe=Oe===Rx?{side:f,sideOffset:g,align:y,alignOffset:v,arrowPadding:x,collisionBoundary:b,collisionPadding:A,sticky:I,hideWhenDetached:_,avoidCollisions:N}:{};return h.jsx(AM,{scope:n,content:O,viewport:H,onViewportChange:G,itemRefCallback:ie,selectedItem:$,onItemLeave:ue,itemTextRefCallback:me,focusSelectedItem:F,selectedItemText:se,position:r,isPositioned:he,searchRef:B,children:h.jsx(TA,{as:SK,allowPinchZoom:!0,children:h.jsx(fA,{asChild:!0,trapped:U.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:We(s,le=>{U.trigger?.focus({preventScroll:!0}),le.preventDefault()}),children:h.jsx(hA,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>U.onOpenChange(!1),children:h.jsx(Oe,{role:"listbox",id:U.contentId,"data-state":U.open?"open":"closed",dir:U.dir,onContextMenu:le=>le.preventDefault(),...M,...xe,onPlaced:()=>W(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...M.style},onKeyDown:We(M.onKeyDown,le=>{const Ce=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Ce&&le.key.length===1&&Q(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let be=oe().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(le.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const we=le.target,Ee=be.indexOf(we);be=be.slice(Ee+1)}setTimeout(()=>P(be)),le.preventDefault()}})})})})})})});TM.displayName=TK;var _K="SelectItemAlignedPosition",SM=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,c=Rl(Yu,n),d=Nl(Yu,n),[f,g]=k.useState(null),[y,v]=k.useState(null),x=Lt(e,V=>v(V)),b=RC(n),A=k.useRef(!1),I=k.useRef(!0),{viewport:_,selectedItem:N,selectedItemText:M,focusSelectedItem:U}=d,O=k.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&y&&_&&N&&M){const V=c.trigger.getBoundingClientRect(),$=y.getBoundingClientRect(),ee=c.valueNode.getBoundingClientRect(),se=M.getBoundingClientRect();if(c.dir!=="rtl"){const we=se.left-$.left,Ee=ee.left-we,Pe=V.left-Ee,Me=V.width+Pe,lt=Math.max(Me,$.width),Mt=window.innerWidth-Ji,ge=kx(Ee,[Ji,Math.max(Ji,Mt-lt)]);f.style.minWidth=Me+"px",f.style.left=ge+"px"}else{const we=$.right-se.right,Ee=window.innerWidth-ee.right-we,Pe=window.innerWidth-V.right-Ee,Me=V.width+Pe,lt=Math.max(Me,$.width),Mt=window.innerWidth-Ji,ge=kx(Ee,[Ji,Math.max(Ji,Mt-lt)]);f.style.minWidth=Me+"px",f.style.right=ge+"px"}const ce=b(),oe=window.innerHeight-Ji*2,he=_.scrollHeight,W=window.getComputedStyle(y),J=parseInt(W.borderTopWidth,10),P=parseInt(W.paddingTop,10),F=parseInt(W.borderBottomWidth,10),Y=parseInt(W.paddingBottom,10),X=J+P+he+Y+F,B=Math.min(N.offsetHeight*5,X),Q=window.getComputedStyle(_),ie=parseInt(Q.paddingTop,10),ue=parseInt(Q.paddingBottom,10),me=V.top+V.height/2-Ji,Oe=oe-me,xe=N.offsetHeight/2,le=N.offsetTop+xe,Ce=J+P+le,je=X-Ce;if(Ce<=me){const we=ce.length>0&&N===ce[ce.length-1].ref.current;f.style.bottom="0px";const Ee=y.clientHeight-_.offsetTop-_.offsetHeight,Pe=Math.max(Oe,xe+(we?ue:0)+Ee+F),Me=Ce+Pe;f.style.height=Me+"px"}else{const we=ce.length>0&&N===ce[0].ref.current;f.style.top="0px";const Pe=Math.max(me,J+_.offsetTop+(we?ie:0)+xe)+je;f.style.height=Pe+"px",_.scrollTop=Ce-me+_.offsetTop}f.style.margin=`${Ji}px 0`,f.style.minHeight=B+"px",f.style.maxHeight=oe+"px",r?.(),requestAnimationFrame(()=>A.current=!0)}},[b,c.trigger,c.valueNode,f,y,_,N,M,c.dir,r]);br(()=>O(),[O]);const[L,H]=k.useState();br(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]);const G=k.useCallback(V=>{V&&I.current===!0&&(O(),U?.(),I.current=!1)},[O,U]);return h.jsx(IK,{scope:n,contentWrapper:f,shouldExpandOnScrollRef:A,onScrollButtonChange:G,children:h.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:h.jsx(ft.div,{...s,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});SM.displayName=_K;var kK="SelectPopperPosition",Rx=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Ji,...c}=t,d=NC(n);return h.jsx(HR,{...d,...c,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rx.displayName=kK;var[IK,WA]=cf(Yu,{}),Nx="SelectViewport",_M=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,c=Nl(Nx,n),d=WA(Nx,n),f=Lt(e,c.onViewportChange),g=k.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(IC.Slot,{scope:n,children:h.jsx(ft.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:We(s.onScroll,y=>{const v=y.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=d;if(b?.current&&x){const A=Math.abs(g.current-v.scrollTop);if(A>0){const I=window.innerHeight-Ji*2,_=parseFloat(x.style.minHeight),N=parseFloat(x.style.height),M=Math.max(_,N);if(M<I){const U=M+A,O=Math.min(I,U),L=U-O;x.style.height=O+"px",x.style.bottom==="0px"&&(v.scrollTop=L>0?L:0,x.style.justifyContent="flex-end")}}}g.current=v.scrollTop})})})]})});_M.displayName=Nx;var kM="SelectGroup",[RK,NK]=cf(kM),OK=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=zu();return h.jsx(RK,{scope:n,id:s,children:h.jsx(ft.div,{role:"group","aria-labelledby":s,...r,ref:e})})});OK.displayName=kM;var IM="SelectLabel",MK=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=NK(IM,n);return h.jsx(ft.div,{id:s.id,...r,ref:e})});MK.displayName=IM;var kv="SelectItem",[PK,RM]=cf(kv),NM=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:c,...d}=t,f=Rl(kv,n),g=Nl(kv,n),y=f.value===r,[v,x]=k.useState(c??""),[b,A]=k.useState(!1),I=Lt(e,U=>g.itemRefCallback?.(U,r,s)),_=zu(),N=k.useRef("touch"),M=()=>{s||(f.onValueChange(r),f.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(PK,{scope:n,value:r,disabled:s,textId:_,isSelected:y,onItemTextChange:k.useCallback(U=>{x(O=>O||(U?.textContent??"").trim())},[]),children:h.jsx(IC.ItemSlot,{scope:n,value:r,disabled:s,textValue:v,children:h.jsx(ft.div,{role:"option","aria-labelledby":_,"data-highlighted":b?"":void 0,"aria-selected":y&&b,"data-state":y?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...d,ref:I,onFocus:We(d.onFocus,()=>A(!0)),onBlur:We(d.onBlur,()=>A(!1)),onClick:We(d.onClick,()=>{N.current!=="mouse"&&M()}),onPointerUp:We(d.onPointerUp,()=>{N.current==="mouse"&&M()}),onPointerDown:We(d.onPointerDown,U=>{N.current=U.pointerType}),onPointerMove:We(d.onPointerMove,U=>{N.current=U.pointerType,s?g.onItemLeave?.():N.current==="mouse"&&U.currentTarget.focus({preventScroll:!0})}),onPointerLeave:We(d.onPointerLeave,U=>{U.currentTarget===document.activeElement&&g.onItemLeave?.()}),onKeyDown:We(d.onKeyDown,U=>{g.searchRef?.current!==""&&U.key===" "||(vK.includes(U.key)&&M(),U.key===" "&&U.preventDefault())})})})})});NM.displayName=kv;var Bm="SelectItemText",OM=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...c}=t,d=Rl(Bm,n),f=Nl(Bm,n),g=RM(Bm,n),y=xK(Bm,n),[v,x]=k.useState(null),b=Lt(e,M=>x(M),g.onItemTextChange,M=>f.itemTextRefCallback?.(M,g.value,g.disabled)),A=v?.textContent,I=k.useMemo(()=>h.jsx("option",{value:g.value,disabled:g.disabled,children:A},g.value),[g.disabled,g.value,A]),{onNativeOptionAdd:_,onNativeOptionRemove:N}=y;return br(()=>(_(I),()=>N(I)),[_,N,I]),h.jsxs(h.Fragment,{children:[h.jsx(ft.span,{id:g.textId,...c,ref:b}),g.isSelected&&d.valueNode&&!d.valueNodeHasChildren?kg.createPortal(c.children,d.valueNode):null]})});OM.displayName=Bm;var MM="SelectItemIndicator",PM=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return RM(MM,n).isSelected?h.jsx(ft.span,{"aria-hidden":!0,...r,ref:e}):null});PM.displayName=MM;var Ox="SelectScrollUpButton",DM=k.forwardRef((t,e)=>{const n=Nl(Ox,t.__scopeSelect),r=WA(Ox,t.__scopeSelect),[s,c]=k.useState(!1),d=Lt(e,r.onScrollButtonChange);return br(()=>{if(n.viewport&&n.isPositioned){let f=function(){const y=g.scrollTop>0;c(y)};const g=n.viewport;return f(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),s?h.jsx(LM,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:g}=n;f&&g&&(f.scrollTop=f.scrollTop-g.offsetHeight)}}):null});DM.displayName=Ox;var Mx="SelectScrollDownButton",jM=k.forwardRef((t,e)=>{const n=Nl(Mx,t.__scopeSelect),r=WA(Mx,t.__scopeSelect),[s,c]=k.useState(!1),d=Lt(e,r.onScrollButtonChange);return br(()=>{if(n.viewport&&n.isPositioned){let f=function(){const y=g.scrollHeight-g.clientHeight,v=Math.ceil(g.scrollTop)<y;c(v)};const g=n.viewport;return f(),g.addEventListener("scroll",f),()=>g.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),s?h.jsx(LM,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:g}=n;f&&g&&(f.scrollTop=f.scrollTop+g.offsetHeight)}}):null});jM.displayName=Mx;var LM=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,c=Nl("SelectScrollButton",n),d=k.useRef(null),f=RC(n),g=k.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return k.useEffect(()=>()=>g(),[g]),br(()=>{f().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),h.jsx(ft.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:We(s.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:We(s.onPointerMove,()=>{c.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:We(s.onPointerLeave,()=>{g()})})}),DK="SelectSeparator",jK=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(ft.div,{"aria-hidden":!0,...r,ref:e})});jK.displayName=DK;var Px="SelectArrow",LK=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=NC(n),c=Rl(Px,n),d=Nl(Px,n);return c.open&&d.position==="popper"?h.jsx(BR,{...s,...r,ref:e}):null});LK.displayName=Px;var UK="SelectBubbleInput",UM=k.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=k.useRef(null),c=Lt(r,s),d=mM(e);return k.useEffect(()=>{const f=s.current;if(!f)return;const g=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(g,"value").set;if(d!==e&&v){const x=new Event("change",{bubbles:!0});v.call(f,e),f.dispatchEvent(x)}},[d,e]),h.jsx(ft.select,{...n,style:{...gM,...n.style},ref:c,defaultValue:e})});UM.displayName=UK;function HM(t){return t===""||t===void 0}function BM(t){const e=wr(t),n=k.useRef(""),r=k.useRef(0),s=k.useCallback(d=>{const f=n.current+d;e(f),(function g(y){n.current=y,window.clearTimeout(r.current),y!==""&&(r.current=window.setTimeout(()=>g(""),1e3))})(f)},[e]),c=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,c]}function zM(t,e,n){const s=e.length>1&&Array.from(e).every(y=>y===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=HK(t,Math.max(c,0));s.length===1&&(d=d.filter(y=>y!==n));const g=d.find(y=>y.textValue.toLowerCase().startsWith(s.toLowerCase()));return g!==n?g:void 0}function HK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var BK=pM,zK=vM,FK=wM,KK=bM,GK=xM,qK=EM,$K=_M,VK=NM,YK=OM,QK=PM,WK=DM,XK=jM;function FM({...t}){return h.jsx(BK,{"data-slot":"select",...t})}function KM({...t}){return h.jsx(FK,{"data-slot":"select-value",...t})}function GM({className:t,size:e="default",children:n,...r}){return h.jsxs(zK,{"data-slot":"select-trigger","data-size":e,className:xt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,h.jsx(KK,{asChild:!0,children:h.jsx(us,{className:"size-4 opacity-50"})})]})}function qM({className:t,children:e,position:n="popper",...r}){return h.jsx(GK,{children:h.jsxs(qK,{"data-slot":"select-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(JK,{}),h.jsx($K,{className:xt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),h.jsx(ZK,{})]})})}function $M({className:t,children:e,...n}){return h.jsxs(VK,{"data-slot":"select-item",className:xt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(QK,{children:h.jsx(yC,{className:"size-4"})})}),h.jsx(YK,{children:e})]})}function JK({className:t,...e}){return h.jsx(WK,{"data-slot":"select-scroll-up-button",className:xt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(wx,{className:"size-4"})})}function ZK({className:t,...e}){return h.jsx(XK,{"data-slot":"select-scroll-down-button",className:xt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(us,{className:"size-4"})})}function Iu({title:t,icon:e,children:n,className:r=""}){return h.jsxs("div",{className:`border rounded-lg p-4 bg-card ${r}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e,h.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})}function eG({agent:t,open:e,onOpenChange:n}){const r=t.source==="directory"?h.jsx(cO,{className:"h-4 w-4 text-muted-foreground"}):t.source==="in_memory"?h.jsx(bx,{className:"h-4 w-4 text-muted-foreground"}):h.jsx(lO,{className:"h-4 w-4 text-muted-foreground"}),s=t.source==="directory"?"Local":t.source==="in_memory"?"In-Memory":"Gallery";return h.jsx(Za,{open:e,onOpenChange:n,children:h.jsxs(ec,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsx(nc,{children:"Agent Details"}),h.jsx(Il,{onClose:()=>n(!1)})]}),h.jsxs("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Ws,{className:"h-6 w-6 text-primary"}),h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name||t.id})]}),t.description&&h.jsx("p",{className:"text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"h-px bg-border mb-6"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(t.model||t.chat_client_type)&&h.jsx(Iu,{title:"Model & Client",icon:h.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsxs("div",{className:"space-y-1",children:[t.model&&h.jsx("div",{className:"font-mono text-foreground",children:t.model}),t.chat_client_type&&h.jsxs("div",{className:"text-xs",children:["(",t.chat_client_type,")"]})]})}),h.jsx(Iu,{title:"Source",icon:r,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-foreground",children:s}),t.module_path&&h.jsx("div",{className:"font-mono text-xs break-all",children:t.module_path})]})}),h.jsx(Iu,{title:"Environment",icon:t.has_env?h.jsx(CC,{className:"h-4 w-4 text-orange-500"}):h.jsx(vv,{className:"h-4 w-4 text-green-500"}),className:"md:col-span-2",children:h.jsx("div",{className:t.has_env?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:t.has_env?"Requires environment variables":"No environment variables required"})})]}),t.instructions&&h.jsx(Iu,{title:"Instructions",icon:h.jsx(Ku,{className:"h-4 w-4 text-muted-foreground"}),className:"mb-4",children:h.jsx("div",{className:"text-sm text-foreground leading-relaxed whitespace-pre-wrap",children:t.instructions})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(Iu,{title:`Tools (${t.tools.length})`,icon:h.jsx(xx,{className:"h-4 w-4 text-muted-foreground"}),children:t.tools.length>0?h.jsx("ul",{className:"space-y-1",children:t.tools.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:[" ",c]},d))}):h.jsx("div",{className:"text-muted-foreground",children:"No tools configured"})}),t.middleware&&t.middleware.length>0&&h.jsx(Iu,{title:`Middleware (${t.middleware.length})`,icon:h.jsx(xx,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsx("ul",{className:"space-y-1",children:t.middleware.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:[" ",c]},d))})}),t.context_providers&&t.context_providers.length>0&&h.jsx(Iu,{title:`Context Providers (${t.context_providers.length})`,icon:h.jsx(bx,{className:"h-4 w-4 text-muted-foreground"}),className:!t.middleware||t.middleware.length===0?"md:col-start-2":"",children:h.jsx("ul",{className:"space-y-1",children:t.context_providers.map((c,d)=>h.jsxs("li",{className:"font-mono text-xs text-foreground",children:[" ",c]},d))})})]})]})]})})}const tG="http://localhost:8080";function nG(){return localStorage.getItem("devui_backend_url")||tG}class rG{baseUrl;authProvider;accessToken;accessTokenExpiry;constructor(e){this.baseUrl=e||nG()}setBaseUrl(e){this.baseUrl=e}getBaseUrl(){return this.baseUrl}setAuthProvider(e){this.authProvider=e}clearAuthProvider(e){(!e||this.authProvider===e)&&(this.authProvider=void 0)}setAccessToken(e,n){this.accessToken=e,this.accessTokenExpiry=n}clearAccessToken(){this.accessToken=void 0,this.accessTokenExpiry=void 0}hasValidAccessToken(){return this.accessToken?typeof this.accessTokenExpiry!="number"?!0:Date.now()+3e4<this.accessTokenExpiry:!1}async authorizedFetch(e,n={}){const r=new Headers(n.headers??{});!(n.body instanceof FormData)&&!r.has("Content-Type")&&n.method&&n.method.toUpperCase()!=="GET"&&r.set("Content-Type","application/json");let s;if(this.hasValidAccessToken())s={token:this.accessToken,expiresAt:this.accessTokenExpiry};else if(this.authProvider){const c=await this.authProvider();if(!c?.token)throw new Error("API authentication is still in progress. Retry once the session is ready.");s=c,this.setAccessToken(c.token,c.expiresAt)}if(!s)throw new Error("API authentication is not available. Sign in again to continue.");return r.set("Authorization",`Bearer ${s.token}`),fetch(e,{...n,headers:r})}async request(e,n={}){const r=`${this.baseUrl}${e}`,s=await this.authorizedFetch(r,n);if(!s.ok){let c=`API request failed: ${s.status} ${s.statusText}`;try{const d=await s.json();d.detail&&(c=d.detail)}catch{}throw new Error(c)}return s.json()}async getHealth(){return this.request("/health")}async getEntities(){const e=await this.request("/v1/entities"),n=[],r=[];return e.entities.forEach(s=>{if(s.type==="agent")n.push({id:s.id,name:s.name,description:s.description,type:"agent",source:s.source||"directory",tools:(s.tools||[]).map(c=>typeof c=="string"?c:JSON.stringify(c)),has_env:!1,module_path:typeof s.metadata?.module_path=="string"?s.metadata.module_path:void 0,metadata:s.metadata,instructions:s.instructions,model:s.model,chat_client_type:s.chat_client_type,context_providers:s.context_providers,middleware:s.middleware});else if(s.type==="workflow"){const c=s.tools?.[0],d=typeof c=="string"?c:"";r.push({id:s.id,name:s.name,description:s.description,type:"workflow",source:s.source||"directory",executors:(s.tools||[]).map(f=>typeof f=="string"?f:JSON.stringify(f)),has_env:!1,module_path:typeof s.metadata?.module_path=="string"?s.metadata.module_path:void 0,metadata:s.metadata,input_schema:s.input_schema||{type:"string"},input_type_name:s.input_type_name||"Input",start_executor_id:d})}}),{entities:[...n,...r],agents:n,workflows:r}}async getAgents(){const{agents:e}=await this.getEntities();return e}async getWorkflows(){const{workflows:e}=await this.getEntities();return e}async getAgentInfo(e){return this.request(`/v1/entities/${e}/info`)}async getWorkflowInfo(e){return this.request(`/v1/entities/${e}/info`)}async createConversation(e){const n=await this.request("/v1/conversations",{method:"POST",body:JSON.stringify({metadata:e})});return{id:n.id,object:"conversation",created_at:n.created_at,metadata:n.metadata}}async listConversations(e){const n=e?`/v1/conversations?agent_id=${encodeURIComponent(e)}`:"/v1/conversations",r=await this.request(n);return{data:r.data.map(s=>({id:s.id,object:"conversation",created_at:s.created_at,metadata:s.metadata})),has_more:r.has_more}}async getConversation(e){const n=await this.request(`/v1/conversations/${e}`);return{id:n.id,object:"conversation",created_at:n.created_at,metadata:n.metadata}}async deleteConversation(e){try{return await this.request(`/v1/conversations/${e}`,{method:"DELETE"}),!0}catch{return!1}}async listConversationItems(e,n){const r=new URLSearchParams;n?.limit&&r.set("limit",n.limit.toString()),n?.after&&r.set("after",n.after),n?.order&&r.set("order",n.order);const s=r.toString(),c=`/v1/conversations/${e}/items${s?`?${s}`:""}`;return this.request(c)}async*streamAgentExecutionOpenAI(e,n){const r={model:e,input:n.input,stream:!0,conversation:n.conversation_id};return yield*this.streamAgentExecutionOpenAIDirect(e,r)}async*streamAgentExecutionOpenAIDirect(e,n){const r=await this.authorizedFetch(`${this.baseUrl}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(n)});if(!r.ok){let f=`Request failed with status ${r.status}`;try{const g=await r.json();g.error&&g.error.message?f=g.error.message:g.detail&&(f=g.detail)}catch{}throw new Error(f)}const s=r.body?.getReader();if(!s)throw new Error("Response body is not readable");const c=new TextDecoder;let d="";try{for(;;){const{done:f,value:g}=await s.read();if(f)break;d+=c.decode(g,{stream:!0});const y=d.split(`
`);d=y.pop()||"";for(const v of y)if(v.startsWith("data: ")){const x=v.slice(6);if(x==="[DONE]")return;try{yield JSON.parse(x)}catch(b){console.error("Failed to parse OpenAI SSE event:",b)}}}}finally{s.releaseLock()}}async*streamWorkflowExecutionOpenAI(e,n){const r={model:e,input:n.input_data||"",stream:!0,conversation:n.conversation_id},s=await this.authorizedFetch(`${this.baseUrl}/v1/responses`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream"},body:JSON.stringify(r)});if(!s.ok){let g=`Request failed with status ${s.status}`;try{const y=await s.json();y.error&&y.error.message?g=y.error.message:y.detail&&(g=y.detail)}catch{}throw new Error(g)}const c=s.body?.getReader();if(!c)throw new Error("Response body is not readable");const d=new TextDecoder;let f="";try{for(;;){const{done:g,value:y}=await c.read();if(g)break;f+=d.decode(y,{stream:!0});const v=f.split(`
`);f=v.pop()||"";for(const x of v)if(x.startsWith("data: ")){const b=x.slice(6);if(b==="[DONE]")return;try{yield JSON.parse(b)}catch(A){console.error("Failed to parse OpenAI SSE event:",A)}}}}finally{c.releaseLock()}}async runAgent(e,n){return this.request(`/agents/${e}/run`,{method:"POST",body:JSON.stringify(n)})}async runWorkflow(e,n){return this.request(`/workflows/${e}/run`,{method:"POST",body:JSON.stringify(n)})}async addEntity(e,n){const r=await this.request("/v1/entities/add",{method:"POST",body:JSON.stringify({url:e,metadata:n})});if(!r.success||!r.entity)throw new Error("Failed to add entity");return r.entity}async removeEntity(e){if(!(await this.request(`/v1/entities/${e}`,{method:"DELETE"})).success)throw new Error("Failed to remove entity")}}const fn=new rG,M0=t=>{let e;const n=new Set,r=(y,v)=>{const x=typeof y=="function"?y(e):y;if(!Object.is(x,e)){const b=e;e=v??(typeof x!="object"||x===null)?x:Object.assign({},e,x),n.forEach(A=>A(e,b))}},s=()=>e,f={setState:r,getState:s,getInitialState:()=>g,subscribe:y=>(n.add(y),()=>n.delete(y))},g=e=t(r,s,f);return f},oG=(t=>t?M0(t):M0),iG=t=>t;function sG(t,e=iG){const n=mo.useSyncExternalStore(t.subscribe,mo.useCallback(()=>e(t.getState()),[t,e]),mo.useCallback(()=>e(t.getInitialState()),[t,e]));return mo.useDebugValue(n),n}const aG=t=>{const e=oG(t),n=r=>sG(e,r);return Object.assign(n,e),n},cG=(t=>aG),P0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:8080",VITE_AZURE_AD_API_SCOPES:"api://af251976-54e5-4230-919a-75faa3e3d7b6/Agent.Execute.Default",VITE_AZURE_AD_CLIENT_ID:"45042e4a-4e25-481c-94fa-4e7878105fcc",VITE_AZURE_AD_POST_LOGOUT_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_REDIRECT_URI:"/auth/callback",VITE_AZURE_AD_TENANT_ID:"4e206573-d2b2-43e2-8958-ef4cdbd26f7f",VITE_GRAPH_SCOPES:"User.Read"},gg=new Map,Cy=t=>{const e=gg.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,r])=>[n,r.getState()])):{}},lG=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const r=gg.get(n.name);if(r)return{type:"tracked",store:t,...r};const s={connection:e.connect(n),stores:{}};return gg.set(n.name,s),{type:"tracked",store:t,...s}},uG=(t,e)=>{if(e===void 0)return;const n=gg.get(t);n&&(delete n.stores[e],Object.keys(n.stores).length===0&&gg.delete(t))},dG=t=>{var e,n;if(!t)return;const r=t.split(`
`),s=r.findIndex(d=>d.includes("api.setState"));if(s<0)return;const c=((e=r[s+1])==null?void 0:e.trim())||"";return(n=/.+ (.+) .+/.exec(c))==null?void 0:n[1]},hG=(t,e={})=>(n,r,s)=>{const{enabled:c,anonymousActionType:d,store:f,...g}=e;let y;try{y=(c??(P0?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!y)return t(n,r,s);const{connection:v,...x}=lG(f,y,g);let b=!0;s.setState=((_,N,M)=>{const U=n(_,N);if(!b)return U;const O=M===void 0?{type:d||dG(new Error().stack)||"anonymous"}:typeof M=="string"?{type:M}:M;return f===void 0?(v?.send(O,r()),U):(v?.send({...O,type:`${f}/${O.type}`},{...Cy(g.name),[f]:s.getState()}),U)}),s.devtools={cleanup:()=>{v&&typeof v.unsubscribe=="function"&&v.unsubscribe(),uG(g.name,f)}};const A=(..._)=>{const N=b;b=!1,n(..._),b=N},I=t(s.setState,r,s);if(x.type==="untracked"?v?.init(I):(x.stores[x.store]=s,v?.init(Object.fromEntries(Object.entries(x.stores).map(([_,N])=>[_,_===x.store?I:N.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let _=!1;const N=s.dispatch;s.dispatch=(...M)=>{(P0?"production":void 0)!=="production"&&M[0].type==="__setState"&&!_&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),_=!0),N(...M)}}return v.subscribe(_=>{var N;switch(_.type){case"ACTION":if(typeof _.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Ob(_.payload,M=>{if(M.type==="__setState"){if(f===void 0){A(M.state);return}Object.keys(M.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const U=M.state[f];if(U==null)return;JSON.stringify(s.getState())!==JSON.stringify(U)&&A(U);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(M)});case"DISPATCH":switch(_.payload.type){case"RESET":return A(I),f===void 0?v?.init(s.getState()):v?.init(Cy(g.name));case"COMMIT":if(f===void 0){v?.init(s.getState());return}return v?.init(Cy(g.name));case"ROLLBACK":return Ob(_.state,M=>{if(f===void 0){A(M),v?.init(s.getState());return}A(M[f]),v?.init(Cy(g.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Ob(_.state,M=>{if(f===void 0){A(M);return}JSON.stringify(s.getState())!==JSON.stringify(M[f])&&A(M[f])});case"IMPORT_STATE":{const{nextLiftedState:M}=_.payload,U=(N=M.computedStates.slice(-1)[0])==null?void 0:N.state;if(!U)return;A(f===void 0?U:U[f]),v?.send(null,M);return}case"PAUSE_RECORDING":return b=!b}return}}),I},fG=hG,Ob=(t,e)=>{let n;try{n=JSON.parse(t)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&e(n)};function mG(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var c;const d=g=>g===null?null:JSON.parse(g,void 0),f=(c=n.getItem(s))!=null?c:null;return f instanceof Promise?f.then(d):d(f)},setItem:(s,c)=>n.setItem(s,JSON.stringify(c,void 0)),removeItem:s=>n.removeItem(s)}}const Dx=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Dx(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Dx(r)(n)}}}},gG=(t,e)=>(n,r,s)=>{let c={storage:mG(()=>localStorage),partialize:_=>_,version:0,merge:(_,N)=>({...N,..._}),...e},d=!1;const f=new Set,g=new Set;let y=c.storage;if(!y)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),n(..._)},r,s);const v=()=>{const _=c.partialize({...r()});return y.setItem(c.name,{state:_,version:c.version})},x=s.setState;s.setState=(_,N)=>(x(_,N),v());const b=t((..._)=>(n(..._),v()),r,s);s.getInitialState=()=>b;let A;const I=()=>{var _,N;if(!y)return;d=!1,f.forEach(U=>{var O;return U((O=r())!=null?O:b)});const M=((N=c.onRehydrateStorage)==null?void 0:N.call(c,(_=r())!=null?_:b))||void 0;return Dx(y.getItem.bind(y))(c.name).then(U=>{if(U)if(typeof U.version=="number"&&U.version!==c.version){if(c.migrate){const O=c.migrate(U.state,U.version);return O instanceof Promise?O.then(L=>[!0,L]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,U.state];return[!1,void 0]}).then(U=>{var O;const[L,H]=U;if(A=c.merge(H,(O=r())!=null?O:b),n(A,!0),L)return v()}).then(()=>{M?.(A,void 0),A=r(),d=!0,g.forEach(U=>U(A))}).catch(U=>{M?.(void 0,U)})};return s.persist={setOptions:_=>{c={...c,..._},_.storage&&(y=_.storage)},clearStorage:()=>{y?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>I(),hasHydrated:()=>d,onHydrate:_=>(f.add(_),()=>{f.delete(_)}),onFinishHydration:_=>(g.add(_),()=>{g.delete(_)})},c.skipHydration||I(),A||b},pG=gG,Ke=cG()(fG(pG(t=>({agents:[],workflows:[],selectedAgent:void 0,isLoadingEntities:!0,entityError:null,currentConversation:void 0,availableConversations:[],chatItems:[],isStreaming:!1,isSubmitting:!1,loadingConversations:!1,inputValue:"",attachments:[],conversationUsage:{total_tokens:0,message_count:0},pendingApprovals:[],showDebugPanel:!0,debugPanelWidth:320,debugEvents:[],isResizing:!1,showAboutModal:!1,showGallery:!1,showDeployModal:!1,showEntityNotFoundToast:!1,setAgents:e=>t({agents:e}),setWorkflows:e=>t({workflows:e}),setSelectedAgent:e=>t({selectedAgent:e}),addAgent:e=>t(n=>({agents:[...n.agents,e]})),addWorkflow:e=>t(n=>({workflows:[...n.workflows,e]})),updateAgent:e=>t(n=>({agents:n.agents.map(r=>r.id===e.id?e:r),selectedAgent:n.selectedAgent?.id===e.id&&n.selectedAgent.type==="agent"?e:n.selectedAgent})),updateWorkflow:e=>t(n=>({workflows:n.workflows.map(r=>r.id===e.id?e:r),selectedAgent:n.selectedAgent?.id===e.id&&n.selectedAgent.type==="workflow"?e:n.selectedAgent})),removeEntity:e=>t(n=>({agents:n.agents.filter(r=>r.id!==e),workflows:n.workflows.filter(r=>r.id!==e),selectedAgent:n.selectedAgent?.id===e?void 0:n.selectedAgent})),setEntityError:e=>t({entityError:e}),setIsLoadingEntities:e=>t({isLoadingEntities:e}),setCurrentConversation:e=>t({currentConversation:e}),setAvailableConversations:e=>t({availableConversations:e}),setChatItems:e=>t({chatItems:e}),setIsStreaming:e=>t({isStreaming:e}),setIsSubmitting:e=>t({isSubmitting:e}),setLoadingConversations:e=>t({loadingConversations:e}),setInputValue:e=>t({inputValue:e}),setAttachments:e=>t({attachments:e}),updateConversationUsage:e=>t(n=>({conversationUsage:{total_tokens:n.conversationUsage.total_tokens+e,message_count:n.conversationUsage.message_count+1}})),setPendingApprovals:e=>t({pendingApprovals:e}),setShowDebugPanel:e=>t({showDebugPanel:e}),setDebugPanelWidth:e=>t({debugPanelWidth:e}),addDebugEvent:e=>t(n=>({debugEvents:[...n.debugEvents,e]})),clearDebugEvents:()=>t({debugEvents:[]}),setIsResizing:e=>t({isResizing:e}),setShowAboutModal:e=>t({showAboutModal:e}),setShowGallery:e=>t({showGallery:e}),setShowDeployModal:e=>t({showDeployModal:e}),setShowEntityNotFoundToast:e=>t({showEntityNotFoundToast:e}),selectEntity:e=>{t({selectedAgent:e,currentConversation:void 0,availableConversations:[],chatItems:[],inputValue:"",attachments:[],conversationUsage:{total_tokens:0,message_count:0},isStreaming:!1,isSubmitting:!1,pendingApprovals:[],debugEvents:[]});const n=new URL(window.location.href);n.searchParams.set("entity_id",e.id),window.history.pushState({},"",n)}}),{name:"devui-storage",partialize:t=>({showDebugPanel:t.showDebugPanel,debugPanelWidth:t.debugPanelWidth})}),{name:"DevUI Store"}));function yG({item:t}){const[e,n]=k.useState(!1),[r,s]=k.useState(!1),c=()=>t.type==="message"?t.content.filter(f=>f.type==="text").map(f=>f.text).join(`
`):"",d=async()=>{const f=c();if(f)try{await navigator.clipboard.writeText(f),s(!0),setTimeout(()=>s(!1),2e3)}catch(g){console.error("Failed to copy:",g)}};if(t.type==="message"){const f=t.role==="user",g=t.status==="incomplete",y=f?jA:g?Bh:Ws,v=c();return h.jsxs("div",{className:`flex gap-3 ${f?"flex-row-reverse":""}`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[h.jsx("div",{className:`flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border ${f?"bg-primary text-primary-foreground":g?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-400 border-orange-200 dark:border-orange-800":"bg-muted"}`,children:h.jsx(y,{className:"h-4 w-4"})}),h.jsxs("div",{className:`flex flex-col space-y-1 ${f?"items-end":"items-start"} max-w-[80%]`,children:[h.jsxs("div",{className:"relative group",children:[h.jsxs("div",{className:`rounded px-3 py-2 text-sm break-all ${f?"bg-primary text-primary-foreground":g?"bg-orange-50 dark:bg-orange-950/50 text-orange-800 dark:text-orange-200 border border-orange-200 dark:border-orange-800":"bg-muted"}`,children:[g&&h.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[h.jsx(Bh,{className:"h-4 w-4 text-orange-500 mt-0.5 flex-shrink-0"}),h.jsx("span",{className:"font-medium text-sm",children:"Unable to process request"})]}),h.jsx("div",{className:g?"text-xs leading-relaxed break-all":"",children:h.jsx(O0,{item:t})})]}),v&&e&&h.jsx("button",{onClick:d,className:`absolute top-1 right-1
                           p-1.5 rounded-md border shadow-sm
                           bg-background hover:bg-accent
                           text-muted-foreground hover:text-foreground
                           transition-all duration-200 ease-in-out
                           opacity-0 group-hover:opacity-100`,title:r?"Copied!":"Copy message",children:r?h.jsx(Gz,{className:"h-3.5 w-3.5 text-green-600 dark:text-green-400"}):h.jsx(Wm,{className:"h-3.5 w-3.5"})})]}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground font-mono",children:[h.jsx("span",{children:new Date().toLocaleTimeString()}),!f&&t.usage&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:""}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["",t.usage.input_tokens]}),h.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["",t.usage.output_tokens]}),h.jsxs("span",{children:["(",t.usage.total_tokens," tokens)"]})]})]})]})]})]})}return h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:"flex h-8 w-8 shrink-0 select-none items-center justify-center rounded-md border bg-muted",children:h.jsx(Ws,{className:"h-4 w-4"})}),h.jsx("div",{className:"flex flex-col space-y-1 items-start max-w-[80%]",children:h.jsx("div",{className:"rounded px-3 py-2 text-sm bg-muted",children:h.jsx(O0,{item:t})})})]})}function vG({selectedAgent:t,onDebugEvent:e}){const n=Ke(ge=>ge.currentConversation),r=Ke(ge=>ge.availableConversations),s=Ke(ge=>ge.chatItems),c=Ke(ge=>ge.isStreaming),d=Ke(ge=>ge.isSubmitting),f=Ke(ge=>ge.loadingConversations),g=Ke(ge=>ge.inputValue),y=Ke(ge=>ge.attachments),v=Ke(ge=>ge.conversationUsage),x=Ke(ge=>ge.pendingApprovals),b=Ke(ge=>ge.setCurrentConversation),A=Ke(ge=>ge.setAvailableConversations),I=Ke(ge=>ge.setChatItems),_=Ke(ge=>ge.setIsStreaming),N=Ke(ge=>ge.setIsSubmitting),M=Ke(ge=>ge.setLoadingConversations),U=Ke(ge=>ge.setInputValue),O=Ke(ge=>ge.setAttachments),L=Ke(ge=>ge.updateConversationUsage),H=Ke(ge=>ge.setPendingApprovals),[G,V]=k.useState(!1),[$,ee]=k.useState(0),[se,ce]=k.useState(null),[oe,he]=k.useState(!1),W=k.useRef(null),J=k.useRef(null),P=k.useRef(""),F=k.useRef(null),Y=k.useRef(null),X=k.useRef(!1);k.useEffect(()=>{if(!J.current)return;const ge=W.current?.querySelector("[data-radix-scroll-area-viewport]");let Be=!1;if(ge){const{scrollTop:Xe,scrollHeight:it,clientHeight:ze}=ge,tt=it-Xe-ze<100;Be=X.current||tt}else Be=!0;Be&&J.current.scrollIntoView({behavior:c?"instant":"smooth"}),X.current&&!c&&(X.current=!1)},[s,c]),k.useEffect(()=>{!c&&!d&&F.current?.focus()},[c,d]),k.useEffect(()=>{const ge=async()=>{if(t){M(!0);try{try{const{data:ze}=await fn.listConversations(t.id);if(ze.length>0){const tt=ze[0];A(ze),b(tt);try{const{data:mt}=await fn.listConversationItems(tt.id);I(mt),_(!1)}catch{console.debug(`No items found for conversation ${tt.id}, starting fresh`),I([]),_(!1)}localStorage.setItem(`devui_convs_${t.id}`,JSON.stringify(ze));return}}catch{}const Be=`devui_convs_${t.id}`,Xe=localStorage.getItem(Be);if(Xe)try{const ze=JSON.parse(Xe);if(ze.length>0)try{await fn.listConversationItems(ze[0].id),A(ze),b(ze[0]),I([]),_(!1);return}catch{console.debug(`Cached conversation ${ze[0].id} no longer exists, clearing cache`),localStorage.removeItem(Be)}}catch{localStorage.removeItem(Be)}const it=await fn.createConversation({agent_id:t.id});b(it),A([it]),I([]),_(!1),localStorage.setItem(Be,JSON.stringify([it]))}catch{A([]),I([]),_(!1)}finally{M(!1)}}};I([]),_(!1),b(void 0),P.current="",ge()},[t,M,A,b,I,_]);const B=async ge=>{const Be=[];for(const Xe of ge){const it=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ze=Ce(Xe);let tt;ze==="image"&&(tt=await je(Xe)),Be.push({id:it,file:Xe,preview:tt,type:ze})}O([...Ke.getState().attachments,...Be])},Q=ge=>{O(Ke.getState().attachments.filter(Be=>Be.id!==ge))},ie=ge=>{ge.preventDefault(),ge.stopPropagation(),ee(Be=>Be+1),ge.dataTransfer.items&&ge.dataTransfer.items.length>0&&V(!0)},ue=ge=>{ge.preventDefault(),ge.stopPropagation();const Be=$-1;ee(Be),Be===0&&V(!1)},me=ge=>{ge.preventDefault(),ge.stopPropagation()},Oe=async ge=>{if(ge.preventDefault(),ge.stopPropagation(),V(!1),ee(0),d||c)return;const Be=Array.from(ge.dataTransfer.files);Be.length>0&&await B(Be)},xe=async ge=>{const Be=Array.from(ge.clipboardData.items),Xe=[];let it=!1;const ze=8e3;for(const tt of Be)if(tt.type.startsWith("image/")){ge.preventDefault();const mt=tt.getAsFile();if(mt){const Ft=Date.now();Xe.push(new File([mt],`screenshot-${Ft}.png`,{type:mt.type}))}}else tt.type==="text/plain"&&!it&&(it=!0,ge.preventDefault(),await new Promise(mt=>{tt.getAsString(Ft=>{const Hr=(Ft.match(/\n/g)||[]).length;if(Ft.length>ze||Hr>50||/^\s*[{[][\s\S]*[}\]]\s*$/.test(Ft)||/^<\?xml|^<html|^<!DOCTYPE/i.test(Ft)){const ut=le(Ft),Et=Date.now(),Vt=new Blob([Ft],{type:"text/plain"});Xe.push(new File([Vt],`pasted-text-${Et}${ut}`,{type:"text/plain"}))}else{const ut=F.current;if(ut){const Et=ut.selectionStart,Vt=ut.selectionEnd,Pn=ut.value,Ko=Pn.slice(0,Et)+Ft+Pn.slice(Vt);U(Ko),setTimeout(()=>{ut.selectionStart=ut.selectionEnd=Et+Ft.length,ut.focus()},0)}}mt()})}));if(Xe.length>0){await B(Xe);const tt=Xe.length===1?Xe[0].name.includes("screenshot")?"Screenshot added as attachment":"Large text converted to file":`${Xe.length} files added`;ce(tt),setTimeout(()=>ce(null),3e3)}},le=ge=>{const Be=ge.trim(),Xe=Be.split(`
`);if(/^{[\s\S]*}$|^\[[\s\S]*\]$/.test(Be))return".json";if(/^<\?xml|^<html|^<!DOCTYPE/i.test(Be))return".html";if(/^```/.test(Be))return".md";if(/\t/.test(ge)&&Xe.length>1)return".tsv";if(Xe.length>2){const it=Xe.filter(tt=>tt.includes(",")),ze=Xe.filter(tt=>tt.includes(";"));if(it.length>Xe.length*.5&&it.reduce((mt,Ft)=>mt+(Ft.match(/,/g)||[]).length,0)/it.length>=2||ze.length>Xe.length*.5&&ze.reduce((mt,Ft)=>mt+(Ft.match(/;/g)||[]).length,0)/ze.length>=2)return".csv"}return".txt"},Ce=ge=>ge.type.startsWith("image/")?"image":ge.type==="application/pdf"?"pdf":ge.type.startsWith("audio/")?"audio":"other",je=ge=>new Promise((Be,Xe)=>{const it=new FileReader;it.onload=()=>Be(it.result),it.onerror=Xe,it.readAsDataURL(ge)}),be=k.useCallback(async()=>{if(t)try{const ge=await fn.createConversation({agent_id:t.id});b(ge),A([ge,...Ke.getState().availableConversations]),I([]),_(!1),Ke.setState({conversationUsage:{total_tokens:0,message_count:0}}),P.current="";const Be=`devui_convs_${t.id}`,Xe=[ge,...r];localStorage.setItem(Be,JSON.stringify(Xe))}catch{}},[t,r,b,A,I,_]),we=k.useCallback(async(ge,Be)=>{if(Be&&(Be.preventDefault(),Be.stopPropagation()),!!confirm("Delete this conversation? This cannot be undone."))try{if(await fn.deleteConversation(ge)){const it=r.filter(ze=>ze.id!==ge);if(A(it),t){const ze=`devui_convs_${t.id}`;localStorage.setItem(ze,JSON.stringify(it))}if(n?.id===ge)if(it.length>0){const ze=it[0];b(ze),I([]),_(!1)}else b(void 0),I([]),_(!1),Ke.setState({conversationUsage:{total_tokens:0,message_count:0}}),P.current="";e("clear")}}catch{alert("Failed to delete conversation. Please try again.")}},[r,n,t,e,A,b,I,_]),Ee=k.useCallback(async ge=>{const Be=r.find(Xe=>Xe.id===ge);if(Be){b(Be),e("clear");try{const it=(await fn.listConversationItems(ge)).data;I(it),_(!1),Ke.setState({conversationUsage:{total_tokens:0,message_count:it.length}})}catch{console.debug(`No items found for conversation ${ge}, starting with empty chat`),I([]),_(!1),Ke.setState({conversationUsage:{total_tokens:0,message_count:0}})}P.current=""}},[r,e,b,I,_]),Pe=async(ge,Be)=>{const Xe=x.find(tt=>tt.request_id===ge);if(!Xe)return;const ze={input:[{type:"message",role:"user",content:[{type:"function_approval_response",request_id:ge,approved:Be,function_call:Xe.function_call}]}],conversation_id:n?.id};return H(Ke.getState().pendingApprovals.filter(tt=>tt.request_id!==ge)),ze},Me=k.useCallback(async ge=>{if(!t)return;const Be=[];for(const ze of ge.input)if(ze.type==="message"&&Array.isArray(ze.content)){for(const tt of ze.content)if(tt.type==="input_text")Be.push({type:"text",text:tt.text});else if(tt.type==="input_image")Be.push({type:"input_image",image_url:tt.image_url||"",detail:"auto"});else if(tt.type==="input_file"){const mt=tt;Be.push({type:"input_file",file_data:mt.file_data,filename:mt.filename})}}const Xe={id:`user-${Date.now()}`,type:"message",role:"user",content:Be,status:"completed"};I([...Ke.getState().chatItems,Xe]),_(!0);const it={id:`assistant-${Date.now()}`,type:"message",role:"assistant",content:[],status:"in_progress"};I([...Ke.getState().chatItems,it]);try{let ze=n;if(!ze)try{ze=await fn.createConversation({agent_id:t.id}),b(ze),A([ze,...Ke.getState().availableConversations])}catch{}const tt={input:ge.input,conversation_id:ze?.id};P.current="";const mt=fn.streamAgentExecutionOpenAI(t.id,tt);for await(const wt of mt){if(e(wt),wt.type==="response.completed"){const Et=wt.response?.usage;Et&&(Y.current={input_tokens:Et.input_tokens,output_tokens:Et.output_tokens,total_tokens:Et.total_tokens});continue}if(wt.type==="response.function_approval.requested"){const ut=wt;H([...Ke.getState().pendingApprovals,{request_id:ut.request_id,function_call:ut.function_call}]);continue}if(wt.type==="response.function_approval.responded"){const ut=wt;H(Ke.getState().pendingApprovals.filter(Et=>Et.request_id!==ut.request_id));continue}if(wt.type==="error"){const Et=wt.message||"An error occurred",Vt=Ke.getState().chatItems;I(Vt.map(Pn=>Pn.id===it.id&&Pn.type==="message"?{...Pn,content:[{type:"text",text:Et}],status:"incomplete"}:Pn)),_(!1);return}if(wt.type==="response.output_text.delta"&&"delta"in wt&&wt.delta){P.current+=wt.delta;const ut=Ke.getState().chatItems;I(ut.map(Et=>Et.id===it.id&&Et.type==="message"?{...Et,content:[{type:"text",text:P.current}],status:"in_progress"}:Et))}}const Ft=Y.current,Hr=Ke.getState().chatItems;I(Hr.map(wt=>wt.id===it.id&&wt.type==="message"?{...wt,status:"completed",usage:Ft||void 0}:wt)),_(!1),Ft&&L(Ft.total_tokens),Y.current=null}catch(ze){const tt=Ke.getState().chatItems;I(tt.map(mt=>mt.id===it.id&&mt.type==="message"?{...mt,content:[{type:"text",text:`Error: ${ze instanceof Error?ze.message:"Failed to get response"}`}],status:"incomplete"}:mt)),_(!1)}},[t,n,e,I,_,b,A,H,L]),lt=async ge=>{if(ge.preventDefault(),!g.trim()&&y.length===0||d||!t)return;X.current=!0,N(!0);const Be=g.trim();U("");try{if(y.length>0||Be){const Xe=[];Be&&Xe.push({text:Be,type:"input_text"});for(const ze of y){const tt=await je(ze.file);if(ze.file.type.startsWith("image/"))Xe.push({detail:"auto",type:"input_image",image_url:tt});else if(ze.file.type==="text/plain"&&(ze.file.name.includes("pasted-text-")||ze.file.name.endsWith(".txt")||ze.file.name.endsWith(".csv")||ze.file.name.endsWith(".json")||ze.file.name.endsWith(".html")||ze.file.name.endsWith(".md")||ze.file.name.endsWith(".tsv"))){const mt=await ze.file.text();Xe.push({text:mt,type:"input_text"})}else{const mt=tt.split(",")[1];Xe.push({type:"input_file",file_data:mt,file_url:tt,filename:ze.file.name})}}await Me({input:[{type:"message",role:"user",content:Xe}],conversation_id:n?.id})}else await Me({input:[{type:"message",role:"user",content:[{text:Be,type:"input_text"}]}],conversation_id:n?.id});O([])}finally{N(!1)}},Mt=t&&!d&&!c&&(g.trim()||y.length>0);return h.jsxs("div",{className:"flex h-[calc(100vh-3.5rem)] flex-col",children:[h.jsxs("div",{className:"border-b pb-2  p-4 flex-shrink-0",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx("h2",{className:"font-semibold text-sm truncate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ws,{className:"h-4 w-4 flex-shrink-0"}),h.jsxs("span",{className:"truncate",children:["Chat with ",t.name||t.id]})]})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>he(!0),className:"h-6 w-6 p-0 flex-shrink-0",title:"View agent details",children:h.jsx(wv,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0",children:[h.jsxs(FM,{value:n?.id||"",onValueChange:Ee,disabled:f||d,children:[h.jsx(GM,{className:"w-full sm:w-64",children:h.jsx(KM,{placeholder:f?"Loading...":r.length===0?"No conversations":n?`Conversation ${n.id.slice(-8)}`:"Select conversation",children:n&&h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("span",{children:["Conversation ",n.id.slice(-8)]}),v.total_tokens>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-muted-foreground",children:""}),h.jsxs("span",{className:"text-muted-foreground",children:[v.total_tokens>=1e3?`${(v.total_tokens/1e3).toFixed(1)}k`:v.total_tokens," ","tokens"]})]})]})})}),h.jsx(qM,{children:r.map(ge=>h.jsx($M,{value:ge.id,children:h.jsxs("div",{className:"flex items-center justify-between w-full",children:[h.jsxs("span",{children:["Conversation ",ge.id.slice(-8)]}),ge.created_at&&h.jsx("span",{className:"text-xs text-muted-foreground ml-3",children:new Date(ge.created_at*1e3).toLocaleDateString()})]})},ge.id))})]}),h.jsx(ht,{variant:"outline",size:"icon",onClick:()=>n&&we(n.id),disabled:!n||d,title:n?`Delete Conversation ${n.id.slice(-8)}`:"No conversation selected",children:h.jsx(mO,{className:"h-4 w-4"})}),h.jsxs(ht,{variant:"outline",size:"lg",onClick:be,disabled:!t||d,className:"whitespace-nowrap ",children:[h.jsx(hO,{className:"h-4 w-4 mr-2"}),h.jsx("span",{className:"hidden md:inline",children:" New Conversation"})]})]})]}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),h.jsx(td,{className:"flex-1 p-4 h-0",ref:W,children:h.jsxs("div",{className:"space-y-4",children:[s.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:[h.jsxs("div",{className:"text-muted-foreground text-sm",children:["Start a conversation with"," ",t.name||t.id]}),h.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Type a message below to begin"})]}):s.map(ge=>h.jsx(yG,{item:ge},ge.id)),h.jsx("div",{ref:J})]})}),x.length>0&&h.jsx("div",{className:"border-t bg-amber-50 dark:bg-amber-950/20 p-4 flex-shrink-0",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Bh,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 mt-0.5 flex-shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h4",{className:"font-medium text-sm mb-2",children:"Approval Required"}),h.jsx("div",{className:"space-y-2",children:x.map(ge=>h.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-3 border border-amber-200 dark:border-amber-900",children:[h.jsxs("div",{className:"font-mono text-xs mb-3 break-all",children:[h.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:ge.function_call.name}),h.jsx("span",{className:"text-gray-500",children:"("}),h.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:JSON.stringify(ge.function_call.arguments)}),h.jsx("span",{className:"text-gray-500",children:")"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(ht,{size:"sm",onClick:async()=>{const Be=await Pe(ge.request_id,!0);Be&&await Me(Be)},variant:"default",className:"flex-1 sm:flex-none",children:[h.jsx(yC,{className:"h-4 w-4 mr-1"}),"Approve"]}),h.jsxs(ht,{size:"sm",onClick:async()=>{const Be=await Pe(ge.request_id,!1);Be&&await Me(Be)},variant:"outline",className:"flex-1 sm:flex-none",children:[h.jsx(LA,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]},ge.request_id))})]})]})}),h.jsx("div",{className:"border-t flex-shrink-0",children:h.jsxs("div",{className:`p-4 relative transition-all duration-300 ease-in-out ${G?"bg-blue-50 dark:bg-blue-950/20":""}`,onDragEnter:ie,onDragLeave:ue,onDragOver:me,onDrop:Oe,children:[G&&h.jsx("div",{className:"absolute inset-2 border-2 border-dashed border-blue-400 dark:border-blue-500 rounded-lg bg-blue-50/80 dark:bg-blue-950/40 backdrop-blur-sm flex items-center justify-center transition-all duration-200 ease-in-out z-10",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-1",children:"Drop files here"}),h.jsx("div",{className:"text-blue-500 dark:text-blue-500 text-xs",children:"Images, PDFs, and other files"})]})}),y.length>0&&h.jsx("div",{className:"mb-3",children:h.jsx(iK,{attachments:y,onRemoveAttachment:Q})}),se&&h.jsxs("div",{className:`absolute bottom-24 left-1/2 -translate-x-1/2 z-20
                          bg-blue-500 text-white px-4 py-2 rounded-full text-sm
                          animate-in slide-in-from-bottom-2 fade-in duration-200
                          flex items-center gap-2 shadow-lg`,children:[se.includes("screenshot")?h.jsx($5,{className:"h-3 w-3"}):h.jsx(Ku,{className:"h-3 w-3"}),se]}),h.jsxs("form",{onSubmit:lt,className:"flex gap-2 items-end",children:[h.jsx(Uy,{ref:F,value:g,onChange:ge=>U(ge.target.value),onPaste:xe,onKeyDown:ge=>{ge.key==="Enter"&&!ge.shiftKey&&(ge.preventDefault(),lt(ge))},placeholder:`Message ${t.name||t.id}... (Shift+Enter for new line)`,disabled:d||c,className:"flex-1 min-h-[40px] max-h-[200px] resize-none",style:{fieldSizing:"content"}}),h.jsx(nK,{onFilesSelected:B,disabled:d||c}),h.jsx(ht,{type:"submit",size:"icon",disabled:!Mt,className:"shrink-0 h-10",children:d?h.jsx(TC,{size:"sm"}):h.jsx(eF,{className:"h-4 w-4"})})]})]})}),h.jsx(eG,{agent:t,open:oe,onOpenChange:he})]})}function eg({message:t="Loading...",description:e,size:n="md",className:r,fullPage:s=!1}){const c=h.jsxs("div",{className:xt("flex flex-col items-center justify-center gap-3",s?"min-h-[50vh]":"py-8",r),children:[h.jsx(TC,{size:n,className:"text-muted-foreground"}),h.jsxs("div",{className:"text-center space-y-1",children:[h.jsx("p",{className:xt("font-medium text-muted-foreground",n==="sm"&&"text-sm",n==="lg"&&"text-lg"),children:t}),e&&h.jsx("p",{className:"text-sm text-muted-foreground/80",children:e})]})]});return s?h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:c}):c}var OC="Checkbox",[CG,rQ]=oc(OC),[wG,XA]=CG(OC);function bG(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:c,form:d,name:f,onCheckedChange:g,required:y,value:v="on",internal_do_not_use_render:x}=t,[b,A]=Lh({prop:n,defaultProp:s??!1,onChange:g,caller:OC}),[I,_]=k.useState(null),[N,M]=k.useState(null),U=k.useRef(!1),O=I?!!d||!!I.closest("form"):!0,L={checked:b,disabled:c,setChecked:A,control:I,setControl:_,name:f,form:d,value:v,hasConsumerStoppedPropagationRef:U,required:y,defaultChecked:Tl(s)?!1:s,isFormControl:O,bubbleInput:N,setBubbleInput:M};return h.jsx(wG,{scope:e,...L,children:xG(x)?x(L):r})}var VM="CheckboxTrigger",YM=k.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:c,value:d,disabled:f,checked:g,required:y,setControl:v,setChecked:x,hasConsumerStoppedPropagationRef:b,isFormControl:A,bubbleInput:I}=XA(VM,t),_=Lt(s,v),N=k.useRef(g);return k.useEffect(()=>{const M=c?.form;if(M){const U=()=>x(N.current);return M.addEventListener("reset",U),()=>M.removeEventListener("reset",U)}},[c,x]),h.jsx(ft.button,{type:"button",role:"checkbox","aria-checked":Tl(g)?"mixed":g,"aria-required":y,"data-state":e1(g),"data-disabled":f?"":void 0,disabled:f,value:d,...r,ref:_,onKeyDown:We(e,M=>{M.key==="Enter"&&M.preventDefault()}),onClick:We(n,M=>{x(U=>Tl(U)?!0:!U),I&&A&&(b.current=M.isPropagationStopped(),b.current||M.stopPropagation())})})});YM.displayName=VM;var QM=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:c,required:d,disabled:f,value:g,onCheckedChange:y,form:v,...x}=t;return h.jsx(bG,{__scopeCheckbox:n,checked:s,defaultChecked:c,disabled:f,required:d,onCheckedChange:y,name:r,form:v,value:g,internal_do_not_use_render:({isFormControl:b})=>h.jsxs(h.Fragment,{children:[h.jsx(YM,{...x,ref:e,__scopeCheckbox:n}),b&&h.jsx(ZM,{__scopeCheckbox:n})]})})});QM.displayName=OC;var WM="CheckboxIndicator",XM=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,c=XA(WM,n);return h.jsx(ds,{present:r||Tl(c.checked)||c.checked===!0,children:h.jsx(ft.span,{"data-state":e1(c.checked),"data-disabled":c.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});XM.displayName=WM;var JM="CheckboxBubbleInput",ZM=k.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:c,defaultChecked:d,required:f,disabled:g,name:y,value:v,form:x,bubbleInput:b,setBubbleInput:A}=XA(JM,t),I=Lt(n,A),_=mM(c),N=_R(r);k.useEffect(()=>{const U=b;if(!U)return;const O=window.HTMLInputElement.prototype,H=Object.getOwnPropertyDescriptor(O,"checked").set,G=!s.current;if(_!==c&&H){const V=new Event("click",{bubbles:G});U.indeterminate=Tl(c),H.call(U,Tl(c)?!1:c),U.dispatchEvent(V)}},[b,_,c,s]);const M=k.useRef(Tl(c)?!1:c);return h.jsx(ft.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??M.current,required:f,disabled:g,name:y,value:v,form:x,...e,tabIndex:-1,ref:I,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ZM.displayName=JM;function xG(t){return typeof t=="function"}function Tl(t){return t==="indeterminate"}function e1(t){return Tl(t)?"indeterminate":t?"checked":"unchecked"}function zm({className:t,...e}){return h.jsx(QM,{"data-slot":"checkbox",className:xt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(XM,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:h.jsx(yC,{className:"size-3.5"})})})}function EG(t){return["name","title","id","key","label","type","status","tag","category","code","username","password"].includes(t.toLowerCase())}function ll({name:t,schema:e,value:n,onChange:r,isRequired:s=!1}){const{type:c,description:d,enum:f,default:g}=e,y=e.format==="textarea"||d&&d.length>100||c==="string"&&!f&&!EG(t),v=y||d&&d.length>150,x=y||d&&d.length>80||c==="array",b=(()=>{switch(c){case"string":return f?h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsxs(FM,{value:typeof n=="string"&&n?n:typeof g=="string"?g:f[0],onValueChange:I=>r(I),children:[h.jsx(GM,{children:h.jsx(KM,{placeholder:`Select ${t}`})}),h.jsx(qM,{children:f.map(I=>h.jsx($M,{value:I,children:I},I))})]}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]}):y||d&&d.length>100?h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(Uy,{id:t,value:typeof n=="string"?n:"",onChange:I=>r(I.target.value),placeholder:typeof g=="string"?g:`Enter ${t}`,rows:y?4:2,className:"min-w-[300px] w-full"}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(Ix,{id:t,type:"text",value:typeof n=="string"?n:"",onChange:I=>r(I.target.value),placeholder:typeof g=="string"?g:`Enter ${t}`}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"number":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(Ix,{id:t,type:"number",value:typeof n=="number"?n:"",onChange:I=>{const _=parseFloat(I.target.value);r(isNaN(_)?"":_)},placeholder:typeof g=="number"?g.toString():`Enter ${t}`}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"boolean":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(zm,{id:t,checked:!!n,onCheckedChange:I=>r(I)}),h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]})]}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"array":return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(Uy,{id:t,value:Array.isArray(n)?n.join(", "):typeof n=="string"?n:"",onChange:I=>{const _=I.target.value.split(",").map(N=>N.trim()).filter(N=>N.length>0);r(_)},placeholder:"Enter items separated by commas",rows:2}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]});case"object":default:return h.jsxs("div",{className:"space-y-2",children:[h.jsxs(ml,{htmlFor:t,children:[t,s&&h.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),h.jsx(Uy,{id:t,value:typeof n=="object"&&n!==null?JSON.stringify(n,null,2):typeof n=="string"?n:"",onChange:I=>{try{const _=JSON.parse(I.target.value);r(_)}catch{r(I.target.value)}},placeholder:'{"key": "value"}',rows:3}),d&&h.jsx("p",{className:"text-sm text-muted-foreground",children:d})]})}})(),A=()=>v?"md:col-span-2 lg:col-span-3 xl:col-span-4":x?"xl:col-span-2":"";return h.jsx("div",{className:A(),children:b})}function AG({inputSchema:t,inputTypeName:e,onSubmit:n,isSubmitting:r=!1,className:s}){const[c,d]=k.useState(!1),[f,g]=k.useState(!1),y=s?.includes("embedded"),[v,x]=k.useState({}),[b,A]=k.useState(!1),I=t.properties||{},_=Object.keys(I),N=t.required||[],M=t.type==="string"&&!t.enum,U=_.filter(P=>!N.includes(P)),O=N.includes("role")&&U.some(P=>["text","message","content"].includes(P))&&I.role?.type==="string",L=_.filter(P=>N.includes(P)&&!(O&&P==="role")),H=U,G=O?[...H].sort((P,F)=>{const Y=X=>["text","message","content"].includes(X)?1:0;return Y(F)-Y(P)}):H,$=Math.max(0,(O?1:6)-L.length),ee=G.slice(0,$),se=G.slice($),ce=se.length>0,oe=L.length>0,he=M?v.value!==void 0&&v.value!=="":N.length>0?N.every(P=>O&&P==="role"&&v.role==="user"?!0:v[P]!==void 0&&v[P]!==""):Object.keys(v).length>0;k.useEffect(()=>{if(t.type==="string")x({value:t.default||""});else if(t.type==="object"&&t.properties){const P={};Object.entries(t.properties).forEach(([F,Y])=>{Y.default!==void 0?P[F]=Y.default:Y.enum&&Y.enum.length>0&&(P[F]=Y.enum[0])}),O&&!P.role&&(P.role="user"),x(P)}},[t,O]);const W=P=>{if(P.preventDefault(),A(!0),t.type==="string")n({input:v.value||""});else if(t.type==="object"){const F=t.properties||{},Y=Object.keys(F);if(Y.length===1){const X=Y[0];n({[X]:v[X]||""})}else{const X={};Object.keys(v).forEach(B=>{const Q=v[B];(N.includes(B)||Q!==void 0&&Q!==""&&Q!==null)&&(X[B]=Q)}),n(X)}}else n(v);y||d(!1),A(!1)},J=(P,F)=>{x(Y=>({...Y,[P]:F}))};return y?h.jsxs("form",{onSubmit:W,className:s,children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[M&&h.jsx(ll,{name:"Input",schema:t,value:v.value,onChange:P=>J("value",P),isRequired:!1}),!M&&h.jsxs(h.Fragment,{children:[L.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!0},P)),oe&&H.length>0&&h.jsx("div",{className:"sm:col-span-2 border-t border-border my-2"}),ee.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!1},P)),ce&&h.jsx("div",{className:"sm:col-span-2",children:h.jsx(ht,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(!f),className:"w-full justify-center gap-2",children:f?h.jsxs(h.Fragment,{children:[h.jsx(wx,{className:"h-4 w-4"}),"Hide ",se.length," optional field",se.length!==1?"s":""]}):h.jsxs(h.Fragment,{children:[h.jsx(us,{className:"h-4 w-4"}),"Show ",se.length," optional field",se.length!==1?"s":""]})})}),f&&se.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!1},P))]})]}),h.jsx("div",{className:"flex gap-2 mt-4 justify-end",children:h.jsxs(ht,{type:"submit",disabled:b||!he,size:"default",children:[h.jsx(Tb,{className:"h-4 w-4"}),b?"Running...":"Run Workflow"]})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:xt("flex flex-col",s),children:[h.jsxs("div",{className:"border-b border-border px-4 py-3 bg-muted",children:[h.jsx(lM,{className:"text-sm mb-3",children:"Run Workflow"}),h.jsxs(ht,{onClick:()=>d(!0),disabled:r,className:"w-full",size:"default",children:[h.jsx(Tb,{className:"h-4 w-4 mr-2"}),r?"Running...":"Run Workflow"]})]}),h.jsxs("div",{className:"px-4 py-3",children:[h.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.jsx("strong",{children:"Input Type:"})," ",h.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:e}),t.type==="object"&&t.properties&&h.jsxs("span",{className:"ml-2",children:["(",Object.keys(t.properties).length," field",Object.keys(t.properties).length!==1?"s":"",")"]})]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Click "Run Workflow" to configure inputs and execute'})]})]}),h.jsx(Za,{open:c,onOpenChange:d,children:h.jsxs(ec,{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{children:[h.jsx(nc,{children:"Run Workflow"}),h.jsx(Il,{onClose:()=>d(!1)})]}),h.jsx("div",{className:"px-8 py-4 border-b flex-shrink-0",children:h.jsx("div",{className:"text-sm text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"font-medium",children:"Input Type:"}),h.jsx("code",{className:"bg-muted px-3 py-1 text-xs font-mono",children:e}),t.type==="object"&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:[_.length," field",_.length!==1?"s":""]})]})})}),h.jsx("div",{className:"px-8 py-6 overflow-y-auto flex-1 min-h-0",children:h.jsx("form",{id:"workflow-modal-form",onSubmit:W,children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 max-w-none",children:[M&&h.jsxs("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:[h.jsx(ll,{name:"Input",schema:t,value:v.value,onChange:P=>J("value",P),isRequired:!1}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:t.description})]}),!M&&h.jsxs(h.Fragment,{children:[L.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!0},P)),oe&&H.length>0&&h.jsx("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:h.jsx("div",{className:"border-t border-border"})}),ee.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!1},P)),ce&&h.jsx("div",{className:"md:col-span-2 lg:col-span-3 xl:col-span-4",children:h.jsx(ht,{type:"button",variant:"ghost",size:"sm",onClick:()=>g(!f),className:"w-full justify-center gap-2",children:f?h.jsxs(h.Fragment,{children:[h.jsx(wx,{className:"h-4 w-4"}),"Hide ",se.length," optional field",se.length!==1?"s":""]}):h.jsxs(h.Fragment,{children:[h.jsx(us,{className:"h-4 w-4"}),"Show ",se.length," optional field",se.length!==1?"s":""]})})}),f&&se.map(P=>h.jsx(ll,{name:P,schema:I[P],value:v[P],onChange:F=>J(P,F),isRequired:!1},P))]})]})})}),h.jsx("div",{className:"px-8 py-4 border-t flex-shrink-0",children:h.jsxs(G6,{children:[h.jsx(ht,{variant:"outline",onClick:()=>d(!1),disabled:b,children:"Cancel"}),h.jsxs(ht,{type:"submit",form:"workflow-modal-form",disabled:b||!he,children:[h.jsx(Tb,{className:"h-4 w-4 mr-2"}),b?"Running...":"Run Workflow"]})]})})]})})]})}function Gn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Gn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var TG={value:()=>{}};function MC(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Hy(n)}function Hy(t){this._=t}function SG(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Hy.prototype=MC.prototype={constructor:Hy,on:function(t,e){var n=this._,r=SG(t+"",n),s,c=-1,d=r.length;if(arguments.length<2){for(;++c<d;)if((s=(t=r[c]).type)&&(s=_G(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++c<d;)if(s=(t=r[c]).type)n[s]=D0(n[s],t.name,e);else if(e==null)for(s in n)n[s]=D0(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Hy(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,c;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(c=this._[t],r=0,s=c.length;r<s;++r)c[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,c=r.length;s<c;++s)r[s].value.apply(e,n)}};function _G(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function D0(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=TG,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var jx="http://www.w3.org/1999/xhtml";const j0={svg:"http://www.w3.org/2000/svg",xhtml:jx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function PC(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),j0.hasOwnProperty(e)?{space:j0[e],local:t}:t}function kG(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===jx&&e.documentElement.namespaceURI===jx?e.createElement(t):e.createElementNS(n,t)}}function IG(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function t1(t){var e=PC(t);return(e.local?IG:kG)(e)}function RG(){}function JA(t){return t==null?RG:function(){return this.querySelector(t)}}function NG(t){typeof t!="function"&&(t=JA(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var c=e[s],d=c.length,f=r[s]=new Array(d),g,y,v=0;v<d;++v)(g=c[v])&&(y=t.call(g,g.__data__,v,c))&&("__data__"in g&&(y.__data__=g.__data__),f[v]=y);return new Fo(r,this._parents)}function OG(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function MG(){return[]}function n1(t){return t==null?MG:function(){return this.querySelectorAll(t)}}function PG(t){return function(){return OG(t.apply(this,arguments))}}function DG(t){typeof t=="function"?t=PG(t):t=n1(t);for(var e=this._groups,n=e.length,r=[],s=[],c=0;c<n;++c)for(var d=e[c],f=d.length,g,y=0;y<f;++y)(g=d[y])&&(r.push(t.call(g,g.__data__,y,d)),s.push(g));return new Fo(r,s)}function r1(t){return function(){return this.matches(t)}}function o1(t){return function(e){return e.matches(t)}}var jG=Array.prototype.find;function LG(t){return function(){return jG.call(this.children,t)}}function UG(){return this.firstElementChild}function HG(t){return this.select(t==null?UG:LG(typeof t=="function"?t:o1(t)))}var BG=Array.prototype.filter;function zG(){return Array.from(this.children)}function FG(t){return function(){return BG.call(this.children,t)}}function KG(t){return this.selectAll(t==null?zG:FG(typeof t=="function"?t:o1(t)))}function GG(t){typeof t!="function"&&(t=r1(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var c=e[s],d=c.length,f=r[s]=[],g,y=0;y<d;++y)(g=c[y])&&t.call(g,g.__data__,y,c)&&f.push(g);return new Fo(r,this._parents)}function i1(t){return new Array(t.length)}function qG(){return new Fo(this._enter||this._groups.map(i1),this._parents)}function Iv(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Iv.prototype={constructor:Iv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $G(t){return function(){return t}}function VG(t,e,n,r,s,c){for(var d=0,f,g=e.length,y=c.length;d<y;++d)(f=e[d])?(f.__data__=c[d],r[d]=f):n[d]=new Iv(t,c[d]);for(;d<g;++d)(f=e[d])&&(s[d]=f)}function YG(t,e,n,r,s,c,d){var f,g,y=new Map,v=e.length,x=c.length,b=new Array(v),A;for(f=0;f<v;++f)(g=e[f])&&(b[f]=A=d.call(g,g.__data__,f,e)+"",y.has(A)?s[f]=g:y.set(A,g));for(f=0;f<x;++f)A=d.call(t,c[f],f,c)+"",(g=y.get(A))?(r[f]=g,g.__data__=c[f],y.delete(A)):n[f]=new Iv(t,c[f]);for(f=0;f<v;++f)(g=e[f])&&y.get(b[f])===g&&(s[f]=g)}function QG(t){return t.__data__}function WG(t,e){if(!arguments.length)return Array.from(this,QG);var n=e?YG:VG,r=this._parents,s=this._groups;typeof t!="function"&&(t=$G(t));for(var c=s.length,d=new Array(c),f=new Array(c),g=new Array(c),y=0;y<c;++y){var v=r[y],x=s[y],b=x.length,A=XG(t.call(v,v&&v.__data__,y,r)),I=A.length,_=f[y]=new Array(I),N=d[y]=new Array(I),M=g[y]=new Array(b);n(v,x,_,N,M,A,e);for(var U=0,O=0,L,H;U<I;++U)if(L=_[U]){for(U>=O&&(O=U+1);!(H=N[O])&&++O<I;);L._next=H||null}}return d=new Fo(d,r),d._enter=f,d._exit=g,d}function XG(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function JG(){return new Fo(this._exit||this._groups.map(i1),this._parents)}function ZG(t,e,n){var r=this.enter(),s=this,c=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?c.remove():n(c),r&&s?r.merge(s).order():s}function eq(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,c=r.length,d=Math.min(s,c),f=new Array(s),g=0;g<d;++g)for(var y=n[g],v=r[g],x=y.length,b=f[g]=new Array(x),A,I=0;I<x;++I)(A=y[I]||v[I])&&(b[I]=A);for(;g<s;++g)f[g]=n[g];return new Fo(f,this._parents)}function tq(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,c=r[s],d;--s>=0;)(d=r[s])&&(c&&d.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(d,c),c=d);return this}function nq(t){t||(t=rq);function e(x,b){return x&&b?t(x.__data__,b.__data__):!x-!b}for(var n=this._groups,r=n.length,s=new Array(r),c=0;c<r;++c){for(var d=n[c],f=d.length,g=s[c]=new Array(f),y,v=0;v<f;++v)(y=d[v])&&(g[v]=y);g.sort(e)}return new Fo(s,this._parents).order()}function rq(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function oq(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function iq(){return Array.from(this)}function sq(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,c=r.length;s<c;++s){var d=r[s];if(d)return d}return null}function aq(){let t=0;for(const e of this)++t;return t}function cq(){return!this.node()}function lq(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],c=0,d=s.length,f;c<d;++c)(f=s[c])&&t.call(f,f.__data__,c,s);return this}function uq(t){return function(){this.removeAttribute(t)}}function dq(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hq(t,e){return function(){this.setAttribute(t,e)}}function fq(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mq(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gq(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function pq(t,e){var n=PC(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?dq:uq:typeof e=="function"?n.local?gq:mq:n.local?fq:hq)(n,e))}function s1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yq(t){return function(){this.style.removeProperty(t)}}function vq(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Cq(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function wq(t,e,n){return arguments.length>1?this.each((e==null?yq:typeof e=="function"?Cq:vq)(t,e,n??"")):Gh(this.node(),t)}function Gh(t,e){return t.style.getPropertyValue(e)||s1(t).getComputedStyle(t,null).getPropertyValue(e)}function bq(t){return function(){delete this[t]}}function xq(t,e){return function(){this[t]=e}}function Eq(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Aq(t,e){return arguments.length>1?this.each((e==null?bq:typeof e=="function"?Eq:xq)(t,e)):this.node()[t]}function a1(t){return t.trim().split(/^|\s+/)}function ZA(t){return t.classList||new c1(t)}function c1(t){this._node=t,this._names=a1(t.getAttribute("class")||"")}c1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function l1(t,e){for(var n=ZA(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function u1(t,e){for(var n=ZA(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function Tq(t){return function(){l1(this,t)}}function Sq(t){return function(){u1(this,t)}}function _q(t,e){return function(){(e.apply(this,arguments)?l1:u1)(this,t)}}function kq(t,e){var n=a1(t+"");if(arguments.length<2){for(var r=ZA(this.node()),s=-1,c=n.length;++s<c;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?_q:e?Tq:Sq)(n,e))}function Iq(){this.textContent=""}function Rq(t){return function(){this.textContent=t}}function Nq(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Oq(t){return arguments.length?this.each(t==null?Iq:(typeof t=="function"?Nq:Rq)(t)):this.node().textContent}function Mq(){this.innerHTML=""}function Pq(t){return function(){this.innerHTML=t}}function Dq(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function jq(t){return arguments.length?this.each(t==null?Mq:(typeof t=="function"?Dq:Pq)(t)):this.node().innerHTML}function Lq(){this.nextSibling&&this.parentNode.appendChild(this)}function Uq(){return this.each(Lq)}function Hq(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bq(){return this.each(Hq)}function zq(t){var e=typeof t=="function"?t:t1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fq(){return null}function Kq(t,e){var n=typeof t=="function"?t:t1(t),r=e==null?Fq:typeof e=="function"?e:JA(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Gq(){var t=this.parentNode;t&&t.removeChild(this)}function qq(){return this.each(Gq)}function $q(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vq(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yq(t){return this.select(t?Vq:$q)}function Qq(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wq(t){return function(e){t.call(this,e,this.__data__)}}function Xq(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Jq(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,c;n<s;++n)c=e[n],(!t.type||c.type===t.type)&&c.name===t.name?this.removeEventListener(c.type,c.listener,c.options):e[++r]=c;++r?e.length=r:delete this.__on}}}function Zq(t,e,n){return function(){var r=this.__on,s,c=Wq(e);if(r){for(var d=0,f=r.length;d<f;++d)if((s=r[d]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=n),s.value=e;return}}this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,options:n},r?r.push(s):this.__on=[s]}}function e8(t,e,n){var r=Xq(t+""),s,c=r.length,d;if(arguments.length<2){var f=this.node().__on;if(f){for(var g=0,y=f.length,v;g<y;++g)for(s=0,v=f[g];s<c;++s)if((d=r[s]).type===v.type&&d.name===v.name)return v.value}return}for(f=e?Zq:Jq,s=0;s<c;++s)this.each(f(r[s],e,n));return this}function d1(t,e,n){var r=s1(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function t8(t,e){return function(){return d1(this,t,e)}}function n8(t,e){return function(){return d1(this,t,e.apply(this,arguments))}}function r8(t,e){return this.each((typeof e=="function"?n8:t8)(t,e))}function*o8(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,c=r.length,d;s<c;++s)(d=r[s])&&(yield d)}var h1=[null];function Fo(t,e){this._groups=t,this._parents=e}function Pg(){return new Fo([[document.documentElement]],h1)}function i8(){return this}Fo.prototype=Pg.prototype={constructor:Fo,select:NG,selectAll:DG,selectChild:HG,selectChildren:KG,filter:GG,data:WG,enter:qG,exit:JG,join:ZG,merge:eq,selection:i8,order:tq,sort:nq,call:oq,nodes:iq,node:sq,size:aq,empty:cq,each:lq,attr:pq,style:wq,property:Aq,classed:kq,text:Oq,html:jq,raise:Uq,lower:Bq,append:zq,insert:Kq,remove:qq,clone:Yq,datum:Qq,on:e8,dispatch:r8,[Symbol.iterator]:o8};function Uo(t){return typeof t=="string"?new Fo([[document.querySelector(t)]],[document.documentElement]):new Fo([[t]],h1)}function s8(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ts(t,e){if(t=s8(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const a8={passive:!1},pg={capture:!0,passive:!1};function Mb(t){t.stopImmediatePropagation()}function Oh(t){t.preventDefault(),t.stopImmediatePropagation()}function f1(t){var e=t.document.documentElement,n=Uo(t).on("dragstart.drag",Oh,pg);"onselectstart"in e?n.on("selectstart.drag",Oh,pg):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function m1(t,e){var n=t.document.documentElement,r=Uo(t).on("dragstart.drag",null);e&&(r.on("click.drag",Oh,pg),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wy=t=>()=>t;function Lx(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:c,x:d,y:f,dx:g,dy:y,dispatch:v}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:d,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:y,enumerable:!0,configurable:!0},_:{value:v}})}Lx.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function c8(t){return!t.ctrlKey&&!t.button}function l8(){return this.parentNode}function u8(t,e){return e??{x:t.x,y:t.y}}function d8(){return navigator.maxTouchPoints||"ontouchstart"in this}function g1(){var t=c8,e=l8,n=u8,r=d8,s={},c=MC("start","drag","end"),d=0,f,g,y,v,x=0;function b(L){L.on("mousedown.drag",A).filter(r).on("touchstart.drag",N).on("touchmove.drag",M,a8).on("touchend.drag touchcancel.drag",U).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function A(L,H){if(!(v||!t.call(this,L,H))){var G=O(this,e.call(this,L,H),L,H,"mouse");G&&(Uo(L.view).on("mousemove.drag",I,pg).on("mouseup.drag",_,pg),f1(L.view),Mb(L),y=!1,f=L.clientX,g=L.clientY,G("start",L))}}function I(L){if(Oh(L),!y){var H=L.clientX-f,G=L.clientY-g;y=H*H+G*G>x}s.mouse("drag",L)}function _(L){Uo(L.view).on("mousemove.drag mouseup.drag",null),m1(L.view,y),Oh(L),s.mouse("end",L)}function N(L,H){if(t.call(this,L,H)){var G=L.changedTouches,V=e.call(this,L,H),$=G.length,ee,se;for(ee=0;ee<$;++ee)(se=O(this,V,L,H,G[ee].identifier,G[ee]))&&(Mb(L),se("start",L,G[ee]))}}function M(L){var H=L.changedTouches,G=H.length,V,$;for(V=0;V<G;++V)($=s[H[V].identifier])&&(Oh(L),$("drag",L,H[V]))}function U(L){var H=L.changedTouches,G=H.length,V,$;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),V=0;V<G;++V)($=s[H[V].identifier])&&(Mb(L),$("end",L,H[V]))}function O(L,H,G,V,$,ee){var se=c.copy(),ce=ts(ee||G,H),oe,he,W;if((W=n.call(L,new Lx("beforestart",{sourceEvent:G,target:b,identifier:$,active:d,x:ce[0],y:ce[1],dx:0,dy:0,dispatch:se}),V))!=null)return oe=W.x-ce[0]||0,he=W.y-ce[1]||0,function J(P,F,Y){var X=ce,B;switch(P){case"start":s[$]=J,B=d++;break;case"end":delete s[$],--d;case"drag":ce=ts(Y||F,H),B=d;break}se.call(P,L,new Lx(P,{sourceEvent:F,subject:W,target:b,identifier:$,active:B,x:ce[0]+oe,y:ce[1]+he,dx:ce[0]-X[0],dy:ce[1]-X[1],dispatch:se}),V)}}return b.filter=function(L){return arguments.length?(t=typeof L=="function"?L:wy(!!L),b):t},b.container=function(L){return arguments.length?(e=typeof L=="function"?L:wy(L),b):e},b.subject=function(L){return arguments.length?(n=typeof L=="function"?L:wy(L),b):n},b.touchable=function(L){return arguments.length?(r=typeof L=="function"?L:wy(!!L),b):r},b.on=function(){var L=c.on.apply(c,arguments);return L===c?b:L},b.clickDistance=function(L){return arguments.length?(x=(L=+L)*L,b):Math.sqrt(x)},b}function eT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function p1(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Dg(){}var yg=.7,Rv=1/yg,Mh="\\s*([+-]?\\d+)\\s*",vg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h8=/^#([0-9a-f]{3,8})$/,f8=new RegExp(`^rgb\\(${Mh},${Mh},${Mh}\\)$`),m8=new RegExp(`^rgb\\(${Xs},${Xs},${Xs}\\)$`),g8=new RegExp(`^rgba\\(${Mh},${Mh},${Mh},${vg}\\)$`),p8=new RegExp(`^rgba\\(${Xs},${Xs},${Xs},${vg}\\)$`),y8=new RegExp(`^hsl\\(${vg},${Xs},${Xs}\\)$`),v8=new RegExp(`^hsla\\(${vg},${Xs},${Xs},${vg}\\)$`),L0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eT(Dg,Qu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:U0,formatHex:U0,formatHex8:C8,formatHsl:w8,formatRgb:H0,toString:H0});function U0(){return this.rgb().formatHex()}function C8(){return this.rgb().formatHex8()}function w8(){return y1(this).formatHsl()}function H0(){return this.rgb().formatRgb()}function Qu(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=h8.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?B0(e):n===3?new yo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?by(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?by(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=f8.exec(t))?new yo(e[1],e[2],e[3],1):(e=m8.exec(t))?new yo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=g8.exec(t))?by(e[1],e[2],e[3],e[4]):(e=p8.exec(t))?by(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=y8.exec(t))?K0(e[1],e[2]/100,e[3]/100,1):(e=v8.exec(t))?K0(e[1],e[2]/100,e[3]/100,e[4]):L0.hasOwnProperty(t)?B0(L0[t]):t==="transparent"?new yo(NaN,NaN,NaN,0):null}function B0(t){return new yo(t>>16&255,t>>8&255,t&255,1)}function by(t,e,n,r){return r<=0&&(t=e=n=NaN),new yo(t,e,n,r)}function b8(t){return t instanceof Dg||(t=Qu(t)),t?(t=t.rgb(),new yo(t.r,t.g,t.b,t.opacity)):new yo}function Ux(t,e,n,r){return arguments.length===1?b8(t):new yo(t,e,n,r??1)}function yo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}eT(yo,Ux,p1(Dg,{brighter(t){return t=t==null?Rv:Math.pow(Rv,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yg:Math.pow(yg,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yo(Du(this.r),Du(this.g),Du(this.b),Nv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z0,formatHex:z0,formatHex8:x8,formatRgb:F0,toString:F0}));function z0(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}`}function x8(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}${Pu((isNaN(this.opacity)?1:this.opacity)*255)}`}function F0(){const t=Nv(this.opacity);return`${t===1?"rgb(":"rgba("}${Du(this.r)}, ${Du(this.g)}, ${Du(this.b)}${t===1?")":`, ${t})`}`}function Nv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Du(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pu(t){return t=Du(t),(t<16?"0":"")+t.toString(16)}function K0(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ns(t,e,n,r)}function y1(t){if(t instanceof ns)return new ns(t.h,t.s,t.l,t.opacity);if(t instanceof Dg||(t=Qu(t)),!t)return new ns;if(t instanceof ns)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),c=Math.max(e,n,r),d=NaN,f=c-s,g=(c+s)/2;return f?(e===c?d=(n-r)/f+(n<r)*6:n===c?d=(r-e)/f+2:d=(e-n)/f+4,f/=g<.5?c+s:2-c-s,d*=60):f=g>0&&g<1?0:d,new ns(d,f,g,t.opacity)}function E8(t,e,n,r){return arguments.length===1?y1(t):new ns(t,e,n,r??1)}function ns(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}eT(ns,E8,p1(Dg,{brighter(t){return t=t==null?Rv:Math.pow(Rv,t),new ns(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yg:Math.pow(yg,t),new ns(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new yo(Pb(t>=240?t-240:t+120,s,r),Pb(t,s,r),Pb(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new ns(G0(this.h),xy(this.s),xy(this.l),Nv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nv(this.opacity);return`${t===1?"hsl(":"hsla("}${G0(this.h)}, ${xy(this.s)*100}%, ${xy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function G0(t){return t=(t||0)%360,t<0?t+360:t}function xy(t){return Math.max(0,Math.min(1,t||0))}function Pb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const tT=t=>()=>t;function A8(t,e){return function(n){return t+n*e}}function T8(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function S8(t){return(t=+t)==1?v1:function(e,n){return n-e?T8(e,n,t):tT(isNaN(e)?n:e)}}function v1(t,e){var n=e-t;return n?A8(t,n):tT(isNaN(t)?e:t)}const Ov=(function t(e){var n=S8(e);function r(s,c){var d=n((s=Ux(s)).r,(c=Ux(c)).r),f=n(s.g,c.g),g=n(s.b,c.b),y=v1(s.opacity,c.opacity);return function(v){return s.r=d(v),s.g=f(v),s.b=g(v),s.opacity=y(v),s+""}}return r.gamma=t,r})(1);function _8(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(c){for(s=0;s<n;++s)r[s]=t[s]*(1-c)+e[s]*c;return r}}function k8(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function I8(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),c=new Array(n),d;for(d=0;d<r;++d)s[d]=tg(t[d],e[d]);for(;d<n;++d)c[d]=e[d];return function(f){for(d=0;d<r;++d)c[d]=s[d](f);return c}}function R8(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ks(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function N8(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=tg(t[s],e[s]):r[s]=e[s];return function(c){for(s in n)r[s]=n[s](c);return r}}var Hx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Db=new RegExp(Hx.source,"g");function O8(t){return function(){return t}}function M8(t){return function(e){return t(e)+""}}function C1(t,e){var n=Hx.lastIndex=Db.lastIndex=0,r,s,c,d=-1,f=[],g=[];for(t=t+"",e=e+"";(r=Hx.exec(t))&&(s=Db.exec(e));)(c=s.index)>n&&(c=e.slice(n,c),f[d]?f[d]+=c:f[++d]=c),(r=r[0])===(s=s[0])?f[d]?f[d]+=s:f[++d]=s:(f[++d]=null,g.push({i:d,x:Ks(r,s)})),n=Db.lastIndex;return n<e.length&&(c=e.slice(n),f[d]?f[d]+=c:f[++d]=c),f.length<2?g[0]?M8(g[0].x):O8(e):(e=g.length,function(y){for(var v=0,x;v<e;++v)f[(x=g[v]).i]=x.x(y);return f.join("")})}function tg(t,e){var n=typeof e,r;return e==null||n==="boolean"?tT(e):(n==="number"?Ks:n==="string"?(r=Qu(e))?(e=r,Ov):C1:e instanceof Qu?Ov:e instanceof Date?R8:k8(e)?_8:Array.isArray(e)?I8:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?N8:Ks)(t,e)}var q0=180/Math.PI,Bx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function w1(t,e,n,r,s,c){var d,f,g;return(d=Math.sqrt(t*t+e*e))&&(t/=d,e/=d),(g=t*n+e*r)&&(n-=t*g,r-=e*g),(f=Math.sqrt(n*n+r*r))&&(n/=f,r/=f,g/=f),t*r<e*n&&(t=-t,e=-e,g=-g,d=-d),{translateX:s,translateY:c,rotate:Math.atan2(e,t)*q0,skewX:Math.atan(g)*q0,scaleX:d,scaleY:f}}var Ey;function P8(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bx:w1(e.a,e.b,e.c,e.d,e.e,e.f)}function D8(t){return t==null||(Ey||(Ey=document.createElementNS("http://www.w3.org/2000/svg","g")),Ey.setAttribute("transform",t),!(t=Ey.transform.baseVal.consolidate()))?Bx:(t=t.matrix,w1(t.a,t.b,t.c,t.d,t.e,t.f))}function b1(t,e,n,r){function s(y){return y.length?y.pop()+" ":""}function c(y,v,x,b,A,I){if(y!==x||v!==b){var _=A.push("translate(",null,e,null,n);I.push({i:_-4,x:Ks(y,x)},{i:_-2,x:Ks(v,b)})}else(x||b)&&A.push("translate("+x+e+b+n)}function d(y,v,x,b){y!==v?(y-v>180?v+=360:v-y>180&&(y+=360),b.push({i:x.push(s(x)+"rotate(",null,r)-2,x:Ks(y,v)})):v&&x.push(s(x)+"rotate("+v+r)}function f(y,v,x,b){y!==v?b.push({i:x.push(s(x)+"skewX(",null,r)-2,x:Ks(y,v)}):v&&x.push(s(x)+"skewX("+v+r)}function g(y,v,x,b,A,I){if(y!==x||v!==b){var _=A.push(s(A)+"scale(",null,",",null,")");I.push({i:_-4,x:Ks(y,x)},{i:_-2,x:Ks(v,b)})}else(x!==1||b!==1)&&A.push(s(A)+"scale("+x+","+b+")")}return function(y,v){var x=[],b=[];return y=t(y),v=t(v),c(y.translateX,y.translateY,v.translateX,v.translateY,x,b),d(y.rotate,v.rotate,x,b),f(y.skewX,v.skewX,x,b),g(y.scaleX,y.scaleY,v.scaleX,v.scaleY,x,b),y=v=null,function(A){for(var I=-1,_=b.length,N;++I<_;)x[(N=b[I]).i]=N.x(A);return x.join("")}}}var j8=b1(P8,"px, ","px)","deg)"),L8=b1(D8,", ",")",")"),U8=1e-12;function $0(t){return((t=Math.exp(t))+1/t)/2}function H8(t){return((t=Math.exp(t))-1/t)/2}function B8(t){return((t=Math.exp(2*t))-1)/(t+1)}const By=(function t(e,n,r){function s(c,d){var f=c[0],g=c[1],y=c[2],v=d[0],x=d[1],b=d[2],A=v-f,I=x-g,_=A*A+I*I,N,M;if(_<U8)M=Math.log(b/y)/e,N=function(V){return[f+V*A,g+V*I,y*Math.exp(e*V*M)]};else{var U=Math.sqrt(_),O=(b*b-y*y+r*_)/(2*y*n*U),L=(b*b-y*y-r*_)/(2*b*n*U),H=Math.log(Math.sqrt(O*O+1)-O),G=Math.log(Math.sqrt(L*L+1)-L);M=(G-H)/e,N=function(V){var $=V*M,ee=$0(H),se=y/(n*U)*(ee*B8(e*$+H)-H8(H));return[f+se*A,g+se*I,y*ee/$0(e*$+H)]}}return N.duration=M*1e3*e/Math.SQRT2,N}return s.rho=function(c){var d=Math.max(.001,+c),f=d*d,g=f*f;return t(d,f,g)},s})(Math.SQRT2,2,4);var qh=0,Fm=0,Dm=0,x1=1e3,Mv,Km,Pv=0,Wu=0,DC=0,Cg=typeof performance=="object"&&performance.now?performance:Date,E1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nT(){return Wu||(E1(z8),Wu=Cg.now()+DC)}function z8(){Wu=0}function Dv(){this._call=this._time=this._next=null}Dv.prototype=A1.prototype={constructor:Dv,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?nT():+n)+(e==null?0:+e),!this._next&&Km!==this&&(Km?Km._next=this:Mv=this,Km=this),this._call=t,this._time=n,zx()},stop:function(){this._call&&(this._call=null,this._time=1/0,zx())}};function A1(t,e,n){var r=new Dv;return r.restart(t,e,n),r}function F8(){nT(),++qh;for(var t=Mv,e;t;)(e=Wu-t._time)>=0&&t._call.call(void 0,e),t=t._next;--qh}function V0(){Wu=(Pv=Cg.now())+DC,qh=Fm=0;try{F8()}finally{qh=0,G8(),Wu=0}}function K8(){var t=Cg.now(),e=t-Pv;e>x1&&(DC-=e,Pv=t)}function G8(){for(var t,e=Mv,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Mv=n);Km=t,zx(r)}function zx(t){if(!qh){Fm&&(Fm=clearTimeout(Fm));var e=t-Wu;e>24?(t<1/0&&(Fm=setTimeout(V0,t-Cg.now()-DC)),Dm&&(Dm=clearInterval(Dm))):(Dm||(Pv=Cg.now(),Dm=setInterval(K8,x1)),qh=1,E1(V0))}}function Y0(t,e,n){var r=new Dv;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var q8=MC("start","end","cancel","interrupt"),$8=[],T1=0,Q0=1,Fx=2,zy=3,W0=4,Kx=5,Fy=6;function jC(t,e,n,r,s,c){var d=t.__transition;if(!d)t.__transition={};else if(n in d)return;V8(t,n,{name:e,index:r,group:s,on:q8,tween:$8,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:T1})}function rT(t,e){var n=hs(t,e);if(n.state>T1)throw new Error("too late; already scheduled");return n}function na(t,e){var n=hs(t,e);if(n.state>zy)throw new Error("too late; already running");return n}function hs(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function V8(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=A1(c,0,n.time);function c(y){n.state=Q0,n.timer.restart(d,n.delay,n.time),n.delay<=y&&d(y-n.delay)}function d(y){var v,x,b,A;if(n.state!==Q0)return g();for(v in r)if(A=r[v],A.name===n.name){if(A.state===zy)return Y0(d);A.state===W0?(A.state=Fy,A.timer.stop(),A.on.call("interrupt",t,t.__data__,A.index,A.group),delete r[v]):+v<e&&(A.state=Fy,A.timer.stop(),A.on.call("cancel",t,t.__data__,A.index,A.group),delete r[v])}if(Y0(function(){n.state===zy&&(n.state=W0,n.timer.restart(f,n.delay,n.time),f(y))}),n.state=Fx,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fx){for(n.state=zy,s=new Array(b=n.tween.length),v=0,x=-1;v<b;++v)(A=n.tween[v].value.call(t,t.__data__,n.index,n.group))&&(s[++x]=A);s.length=x+1}}function f(y){for(var v=y<n.duration?n.ease.call(null,y/n.duration):(n.timer.restart(g),n.state=Kx,1),x=-1,b=s.length;++x<b;)s[x].call(t,v);n.state===Kx&&(n.on.call("end",t,t.__data__,n.index,n.group),g())}function g(){n.state=Fy,n.timer.stop(),delete r[e];for(var y in r)return;delete t.__transition}}function Ky(t,e){var n=t.__transition,r,s,c=!0,d;if(n){e=e==null?null:e+"";for(d in n){if((r=n[d]).name!==e){c=!1;continue}s=r.state>Fx&&r.state<Kx,r.state=Fy,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[d]}c&&delete t.__transition}}function Y8(t){return this.each(function(){Ky(this,t)})}function Q8(t,e){var n,r;return function(){var s=na(this,t),c=s.tween;if(c!==n){r=n=c;for(var d=0,f=r.length;d<f;++d)if(r[d].name===e){r=r.slice(),r.splice(d,1);break}}s.tween=r}}function W8(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var c=na(this,t),d=c.tween;if(d!==r){s=(r=d).slice();for(var f={name:e,value:n},g=0,y=s.length;g<y;++g)if(s[g].name===e){s[g]=f;break}g===y&&s.push(f)}c.tween=s}}function X8(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=hs(this.node(),n).tween,s=0,c=r.length,d;s<c;++s)if((d=r[s]).name===t)return d.value;return null}return this.each((e==null?Q8:W8)(n,t,e))}function oT(t,e,n){var r=t._id;return t.each(function(){var s=na(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return hs(s,r).value[e]}}function S1(t,e){var n;return(typeof e=="number"?Ks:e instanceof Qu?Ov:(n=Qu(e))?(e=n,Ov):C1)(t,e)}function J8(t){return function(){this.removeAttribute(t)}}function Z8(t){return function(){this.removeAttributeNS(t.space,t.local)}}function e$(t,e,n){var r,s=n+"",c;return function(){var d=this.getAttribute(t);return d===s?null:d===r?c:c=e(r=d,n)}}function t$(t,e,n){var r,s=n+"",c;return function(){var d=this.getAttributeNS(t.space,t.local);return d===s?null:d===r?c:c=e(r=d,n)}}function n$(t,e,n){var r,s,c;return function(){var d,f=n(this),g;return f==null?void this.removeAttribute(t):(d=this.getAttribute(t),g=f+"",d===g?null:d===r&&g===s?c:(s=g,c=e(r=d,f)))}}function r$(t,e,n){var r,s,c;return function(){var d,f=n(this),g;return f==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),g=f+"",d===g?null:d===r&&g===s?c:(s=g,c=e(r=d,f)))}}function o$(t,e){var n=PC(t),r=n==="transform"?L8:S1;return this.attrTween(t,typeof e=="function"?(n.local?r$:n$)(n,r,oT(this,"attr."+t,e)):e==null?(n.local?Z8:J8)(n):(n.local?t$:e$)(n,r,e))}function i$(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function s$(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function a$(t,e){var n,r;function s(){var c=e.apply(this,arguments);return c!==r&&(n=(r=c)&&s$(t,c)),n}return s._value=e,s}function c$(t,e){var n,r;function s(){var c=e.apply(this,arguments);return c!==r&&(n=(r=c)&&i$(t,c)),n}return s._value=e,s}function l$(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=PC(t);return this.tween(n,(r.local?a$:c$)(r,e))}function u$(t,e){return function(){rT(this,t).delay=+e.apply(this,arguments)}}function d$(t,e){return e=+e,function(){rT(this,t).delay=e}}function h$(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?u$:d$)(e,t)):hs(this.node(),e).delay}function f$(t,e){return function(){na(this,t).duration=+e.apply(this,arguments)}}function m$(t,e){return e=+e,function(){na(this,t).duration=e}}function g$(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?f$:m$)(e,t)):hs(this.node(),e).duration}function p$(t,e){if(typeof e!="function")throw new Error;return function(){na(this,t).ease=e}}function y$(t){var e=this._id;return arguments.length?this.each(p$(e,t)):hs(this.node(),e).ease}function v$(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;na(this,t).ease=n}}function C$(t){if(typeof t!="function")throw new Error;return this.each(v$(this._id,t))}function w$(t){typeof t!="function"&&(t=r1(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var c=e[s],d=c.length,f=r[s]=[],g,y=0;y<d;++y)(g=c[y])&&t.call(g,g.__data__,y,c)&&f.push(g);return new rc(r,this._parents,this._name,this._id)}function b$(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,c=Math.min(r,s),d=new Array(r),f=0;f<c;++f)for(var g=e[f],y=n[f],v=g.length,x=d[f]=new Array(v),b,A=0;A<v;++A)(b=g[A]||y[A])&&(x[A]=b);for(;f<r;++f)d[f]=e[f];return new rc(d,this._parents,this._name,this._id)}function x$(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function E$(t,e,n){var r,s,c=x$(e)?rT:na;return function(){var d=c(this,t),f=d.on;f!==r&&(s=(r=f).copy()).on(e,n),d.on=s}}function A$(t,e){var n=this._id;return arguments.length<2?hs(this.node(),n).on.on(t):this.each(E$(n,t,e))}function T$(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function S$(){return this.on("end.remove",T$(this._id))}function _$(t){var e=this._name,n=this._id;typeof t!="function"&&(t=JA(t));for(var r=this._groups,s=r.length,c=new Array(s),d=0;d<s;++d)for(var f=r[d],g=f.length,y=c[d]=new Array(g),v,x,b=0;b<g;++b)(v=f[b])&&(x=t.call(v,v.__data__,b,f))&&("__data__"in v&&(x.__data__=v.__data__),y[b]=x,jC(y[b],e,n,b,y,hs(v,n)));return new rc(c,this._parents,e,n)}function k$(t){var e=this._name,n=this._id;typeof t!="function"&&(t=n1(t));for(var r=this._groups,s=r.length,c=[],d=[],f=0;f<s;++f)for(var g=r[f],y=g.length,v,x=0;x<y;++x)if(v=g[x]){for(var b=t.call(v,v.__data__,x,g),A,I=hs(v,n),_=0,N=b.length;_<N;++_)(A=b[_])&&jC(A,e,n,_,b,I);c.push(b),d.push(v)}return new rc(c,d,e,n)}var I$=Pg.prototype.constructor;function R$(){return new I$(this._groups,this._parents)}function N$(t,e){var n,r,s;return function(){var c=Gh(this,t),d=(this.style.removeProperty(t),Gh(this,t));return c===d?null:c===n&&d===r?s:s=e(n=c,r=d)}}function _1(t){return function(){this.style.removeProperty(t)}}function O$(t,e,n){var r,s=n+"",c;return function(){var d=Gh(this,t);return d===s?null:d===r?c:c=e(r=d,n)}}function M$(t,e,n){var r,s,c;return function(){var d=Gh(this,t),f=n(this),g=f+"";return f==null&&(g=f=(this.style.removeProperty(t),Gh(this,t))),d===g?null:d===r&&g===s?c:(s=g,c=e(r=d,f))}}function P$(t,e){var n,r,s,c="style."+e,d="end."+c,f;return function(){var g=na(this,t),y=g.on,v=g.value[c]==null?f||(f=_1(e)):void 0;(y!==n||s!==v)&&(r=(n=y).copy()).on(d,s=v),g.on=r}}function D$(t,e,n){var r=(t+="")=="transform"?j8:S1;return e==null?this.styleTween(t,N$(t,r)).on("end.style."+t,_1(t)):typeof e=="function"?this.styleTween(t,M$(t,r,oT(this,"style."+t,e))).each(P$(this._id,t)):this.styleTween(t,O$(t,r,e),n).on("end.style."+t,null)}function j$(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function L$(t,e,n){var r,s;function c(){var d=e.apply(this,arguments);return d!==s&&(r=(s=d)&&j$(t,d,n)),r}return c._value=e,c}function U$(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,L$(t,e,n??""))}function H$(t){return function(){this.textContent=t}}function B$(t){return function(){var e=t(this);this.textContent=e??""}}function z$(t){return this.tween("text",typeof t=="function"?B$(oT(this,"text",t)):H$(t==null?"":t+""))}function F$(t){return function(e){this.textContent=t.call(this,e)}}function K$(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&F$(s)),e}return r._value=t,r}function G$(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,K$(t))}function q$(){for(var t=this._name,e=this._id,n=k1(),r=this._groups,s=r.length,c=0;c<s;++c)for(var d=r[c],f=d.length,g,y=0;y<f;++y)if(g=d[y]){var v=hs(g,e);jC(g,t,n,y,d,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new rc(r,this._parents,t,n)}function $$(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(c,d){var f={value:d},g={value:function(){--s===0&&c()}};n.each(function(){var y=na(this,r),v=y.on;v!==t&&(e=(t=v).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(g)),y.on=e}),s===0&&c()})}var V$=0;function rc(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function k1(){return++V$}var Ga=Pg.prototype;rc.prototype={constructor:rc,select:_$,selectAll:k$,selectChild:Ga.selectChild,selectChildren:Ga.selectChildren,filter:w$,merge:b$,selection:R$,transition:q$,call:Ga.call,nodes:Ga.nodes,node:Ga.node,size:Ga.size,empty:Ga.empty,each:Ga.each,on:A$,attr:o$,attrTween:l$,style:D$,styleTween:U$,text:z$,textTween:G$,remove:S$,tween:X8,delay:h$,duration:g$,ease:y$,easeVarying:C$,end:$$,[Symbol.iterator]:Ga[Symbol.iterator]};function Y$(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Q$={time:null,delay:0,duration:250,ease:Y$};function W$(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function X$(t){var e,n;t instanceof rc?(e=t._id,t=t._name):(e=k1(),(n=Q$).time=nT(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,c=0;c<s;++c)for(var d=r[c],f=d.length,g,y=0;y<f;++y)(g=d[y])&&jC(g,t,e,y,d,n||W$(g,e));return new rc(r,this._parents,t,e)}Pg.prototype.interrupt=Y8;Pg.prototype.transition=X$;const Ay=t=>()=>t;function J$(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Va(t,e,n){this.k=t,this.x=e,this.y=n}Va.prototype={constructor:Va,scale:function(t){return t===1?this:new Va(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Va(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var LC=new Va(1,0,0);I1.prototype=Va.prototype;function I1(t){for(;!t.__zoom;)if(!(t=t.parentNode))return LC;return t.__zoom}function jb(t){t.stopImmediatePropagation()}function jm(t){t.preventDefault(),t.stopImmediatePropagation()}function Z$(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function e9(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function X0(){return this.__zoom||LC}function t9(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function n9(){return navigator.maxTouchPoints||"ontouchstart"in this}function r9(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],c=t.invertY(e[0][1])-n[0][1],d=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),d>c?(c+d)/2:Math.min(0,c)||Math.max(0,d))}function R1(){var t=Z$,e=e9,n=r9,r=t9,s=n9,c=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],f=250,g=By,y=MC("start","zoom","end"),v,x,b,A=500,I=150,_=0,N=10;function M(W){W.property("__zoom",X0).on("wheel.zoom",$,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",se).filter(s).on("touchstart.zoom",ce).on("touchmove.zoom",oe).on("touchend.zoom touchcancel.zoom",he).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}M.transform=function(W,J,P,F){var Y=W.selection?W.selection():W;Y.property("__zoom",X0),W!==Y?H(W,J,P,F):Y.interrupt().each(function(){G(this,arguments).event(F).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},M.scaleBy=function(W,J,P,F){M.scaleTo(W,function(){var Y=this.__zoom.k,X=typeof J=="function"?J.apply(this,arguments):J;return Y*X},P,F)},M.scaleTo=function(W,J,P,F){M.transform(W,function(){var Y=e.apply(this,arguments),X=this.__zoom,B=P==null?L(Y):typeof P=="function"?P.apply(this,arguments):P,Q=X.invert(B),ie=typeof J=="function"?J.apply(this,arguments):J;return n(O(U(X,ie),B,Q),Y,d)},P,F)},M.translateBy=function(W,J,P,F){M.transform(W,function(){return n(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),d)},null,F)},M.translateTo=function(W,J,P,F,Y){M.transform(W,function(){var X=e.apply(this,arguments),B=this.__zoom,Q=F==null?L(X):typeof F=="function"?F.apply(this,arguments):F;return n(LC.translate(Q[0],Q[1]).scale(B.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof P=="function"?-P.apply(this,arguments):-P),X,d)},F,Y)};function U(W,J){return J=Math.max(c[0],Math.min(c[1],J)),J===W.k?W:new Va(J,W.x,W.y)}function O(W,J,P){var F=J[0]-P[0]*W.k,Y=J[1]-P[1]*W.k;return F===W.x&&Y===W.y?W:new Va(W.k,F,Y)}function L(W){return[(+W[0][0]+ +W[1][0])/2,(+W[0][1]+ +W[1][1])/2]}function H(W,J,P,F){W.on("start.zoom",function(){G(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){G(this,arguments).event(F).end()}).tween("zoom",function(){var Y=this,X=arguments,B=G(Y,X).event(F),Q=e.apply(Y,X),ie=P==null?L(Q):typeof P=="function"?P.apply(Y,X):P,ue=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),me=Y.__zoom,Oe=typeof J=="function"?J.apply(Y,X):J,xe=g(me.invert(ie).concat(ue/me.k),Oe.invert(ie).concat(ue/Oe.k));return function(le){if(le===1)le=Oe;else{var Ce=xe(le),je=ue/Ce[2];le=new Va(je,ie[0]-Ce[0]*je,ie[1]-Ce[1]*je)}B.zoom(null,le)}})}function G(W,J,P){return!P&&W.__zooming||new V(W,J)}function V(W,J){this.that=W,this.args=J,this.active=0,this.sourceEvent=null,this.extent=e.apply(W,J),this.taps=0}V.prototype={event:function(W){return W&&(this.sourceEvent=W),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(W,J){return this.mouse&&W!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&W!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&W!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(W){var J=Uo(this.that).datum();y.call(W,this.that,new J$(W,{sourceEvent:this.sourceEvent,target:M,transform:this.that.__zoom,dispatch:y}),J)}};function $(W,...J){if(!t.apply(this,arguments))return;var P=G(this,J).event(W),F=this.__zoom,Y=Math.max(c[0],Math.min(c[1],F.k*Math.pow(2,r.apply(this,arguments)))),X=ts(W);if(P.wheel)(P.mouse[0][0]!==X[0]||P.mouse[0][1]!==X[1])&&(P.mouse[1]=F.invert(P.mouse[0]=X)),clearTimeout(P.wheel);else{if(F.k===Y)return;P.mouse=[X,F.invert(X)],Ky(this),P.start()}jm(W),P.wheel=setTimeout(B,I),P.zoom("mouse",n(O(U(F,Y),P.mouse[0],P.mouse[1]),P.extent,d));function B(){P.wheel=null,P.end()}}function ee(W,...J){if(b||!t.apply(this,arguments))return;var P=W.currentTarget,F=G(this,J,!0).event(W),Y=Uo(W.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",ue,!0),X=ts(W,P),B=W.clientX,Q=W.clientY;f1(W.view),jb(W),F.mouse=[X,this.__zoom.invert(X)],Ky(this),F.start();function ie(me){if(jm(me),!F.moved){var Oe=me.clientX-B,xe=me.clientY-Q;F.moved=Oe*Oe+xe*xe>_}F.event(me).zoom("mouse",n(O(F.that.__zoom,F.mouse[0]=ts(me,P),F.mouse[1]),F.extent,d))}function ue(me){Y.on("mousemove.zoom mouseup.zoom",null),m1(me.view,F.moved),jm(me),F.event(me).end()}}function se(W,...J){if(t.apply(this,arguments)){var P=this.__zoom,F=ts(W.changedTouches?W.changedTouches[0]:W,this),Y=P.invert(F),X=P.k*(W.shiftKey?.5:2),B=n(O(U(P,X),F,Y),e.apply(this,J),d);jm(W),f>0?Uo(this).transition().duration(f).call(H,B,F,W):Uo(this).call(M.transform,B,F,W)}}function ce(W,...J){if(t.apply(this,arguments)){var P=W.touches,F=P.length,Y=G(this,J,W.changedTouches.length===F).event(W),X,B,Q,ie;for(jb(W),B=0;B<F;++B)Q=P[B],ie=ts(Q,this),ie=[ie,this.__zoom.invert(ie),Q.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ie[2]&&(Y.touch1=ie,Y.taps=0):(Y.touch0=ie,X=!0,Y.taps=1+!!v);v&&(v=clearTimeout(v)),X&&(Y.taps<2&&(x=ie[0],v=setTimeout(function(){v=null},A)),Ky(this),Y.start())}}function oe(W,...J){if(this.__zooming){var P=G(this,J).event(W),F=W.changedTouches,Y=F.length,X,B,Q,ie;for(jm(W),X=0;X<Y;++X)B=F[X],Q=ts(B,this),P.touch0&&P.touch0[2]===B.identifier?P.touch0[0]=Q:P.touch1&&P.touch1[2]===B.identifier&&(P.touch1[0]=Q);if(B=P.that.__zoom,P.touch1){var ue=P.touch0[0],me=P.touch0[1],Oe=P.touch1[0],xe=P.touch1[1],le=(le=Oe[0]-ue[0])*le+(le=Oe[1]-ue[1])*le,Ce=(Ce=xe[0]-me[0])*Ce+(Ce=xe[1]-me[1])*Ce;B=U(B,Math.sqrt(le/Ce)),Q=[(ue[0]+Oe[0])/2,(ue[1]+Oe[1])/2],ie=[(me[0]+xe[0])/2,(me[1]+xe[1])/2]}else if(P.touch0)Q=P.touch0[0],ie=P.touch0[1];else return;P.zoom("touch",n(O(B,Q,ie),P.extent,d))}}function he(W,...J){if(this.__zooming){var P=G(this,J).event(W),F=W.changedTouches,Y=F.length,X,B;for(jb(W),b&&clearTimeout(b),b=setTimeout(function(){b=null},A),X=0;X<Y;++X)B=F[X],P.touch0&&P.touch0[2]===B.identifier?delete P.touch0:P.touch1&&P.touch1[2]===B.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(B=ts(B,this),Math.hypot(x[0]-B[0],x[1]-B[1])<N)){var Q=Uo(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return M.wheelDelta=function(W){return arguments.length?(r=typeof W=="function"?W:Ay(+W),M):r},M.filter=function(W){return arguments.length?(t=typeof W=="function"?W:Ay(!!W),M):t},M.touchable=function(W){return arguments.length?(s=typeof W=="function"?W:Ay(!!W),M):s},M.extent=function(W){return arguments.length?(e=typeof W=="function"?W:Ay([[+W[0][0],+W[0][1]],[+W[1][0],+W[1][1]]]),M):e},M.scaleExtent=function(W){return arguments.length?(c[0]=+W[0],c[1]=+W[1],M):[c[0],c[1]]},M.translateExtent=function(W){return arguments.length?(d[0][0]=+W[0][0],d[1][0]=+W[1][0],d[0][1]=+W[0][1],d[1][1]=+W[1][1],M):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},M.constrain=function(W){return arguments.length?(n=W,M):n},M.duration=function(W){return arguments.length?(f=+W,M):f},M.interpolate=function(W){return arguments.length?(g=W,M):g},M.on=function(){var W=y.on.apply(y,arguments);return W===y?M:W},M.clickDistance=function(W){return arguments.length?(_=(W=+W)*W,M):Math.sqrt(_)},M.tapDistance=function(W){return arguments.length?(N=+W,M):N},M}const Zs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},wg=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],N1=["Enter"," ","Escape"],O1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var $h;(function(t){t.Strict="strict",t.Loose="loose"})($h||($h={}));var ju;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ju||(ju={}));var bg;(function(t){t.Partial="partial",t.Full="full"})(bg||(bg={}));const M1={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var yl;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(yl||(yl={}));var jv;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(jv||(jv={}));var Ze;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Ze||(Ze={}));const J0={[Ze.Left]:Ze.Right,[Ze.Right]:Ze.Left,[Ze.Top]:Ze.Bottom,[Ze.Bottom]:Ze.Top};function P1(t){return t===null?null:t?"valid":"invalid"}const D1=t=>"id"in t&&"source"in t&&"target"in t,o9=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),iT=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),jg=(t,e=[0,0])=>{const{width:n,height:r}=ic(t),s=t.origin??e,c=n*s[0],d=r*s[1];return{x:t.position.x-c,y:t.position.y-d}},i9=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const c=typeof s=="string";let d=!e.nodeLookup&&!c?s:void 0;e.nodeLookup&&(d=c?e.nodeLookup.get(s):iT(s)?s:e.nodeLookup.get(s.id));const f=d?Lv(d,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return UC(r,f)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return HC(n)},Lg=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const s=Lv(r);n=UC(n,s)}}),HC(n)},sT=(t,e,[n,r,s]=[0,0,1],c=!1,d=!1)=>{const f={...Hg(e,[n,r,s]),width:e.width/s,height:e.height/s},g=[];for(const y of t.values()){const{measured:v,selectable:x=!0,hidden:b=!1}=y;if(d&&!x||b)continue;const A=v.width??y.width??y.initialWidth??null,I=v.height??y.height??y.initialHeight??null,_=xg(f,Yh(y)),N=(A??0)*(I??0),M=c&&_>0;(!y.internals.handleBounds||M||_>=N||y.dragging)&&g.push(y)}return g},s9=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function a9(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(s=>s.id)):null;return t.forEach(s=>{s.measured.width&&s.measured.height&&(e?.includeHiddenNodes||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function c9({nodes:t,width:e,height:n,panZoom:r,minZoom:s,maxZoom:c},d){if(t.size===0)return Promise.resolve(!0);const f=a9(t,d),g=Lg(f),y=aT(g,e,n,d?.minZoom??s,d?.maxZoom??c,d?.padding??.1);return await r.setViewport(y,{duration:d?.duration,ease:d?.ease,interpolate:d?.interpolate}),Promise.resolve(!0)}function j1({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:c}){const d=n.get(t),f=d.parentId?n.get(d.parentId):void 0,{x:g,y}=f?f.internals.positionAbsolute:{x:0,y:0},v=d.origin??r;let x=d.extent||s;if(d.extent==="parent"&&!d.expandParent)if(!f)c?.("005",Zs.error005());else{const A=f.measured.width,I=f.measured.height;A&&I&&(x=[[g,y],[g+A,y+I]])}else f&&Qh(d.extent)&&(x=[[d.extent[0][0]+g,d.extent[0][1]+y],[d.extent[1][0]+g,d.extent[1][1]+y]]);const b=Qh(x)?Xu(e,x,d.measured):e;return(d.measured.width===void 0||d.measured.height===void 0)&&c?.("015",Zs.error015()),{position:{x:b.x-g+(d.measured.width??0)*v[0],y:b.y-y+(d.measured.height??0)*v[1]},positionAbsolute:b}}async function l9({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:s}){const c=new Set(t.map(b=>b.id)),d=[];for(const b of n){if(b.deletable===!1)continue;const A=c.has(b.id),I=!A&&b.parentId&&d.find(_=>_.id===b.parentId);(A||I)&&d.push(b)}const f=new Set(e.map(b=>b.id)),g=r.filter(b=>b.deletable!==!1),v=s9(d,g);for(const b of g)f.has(b.id)&&!v.find(I=>I.id===b.id)&&v.push(b);if(!s)return{edges:v,nodes:d};const x=await s({nodes:d,edges:v});return typeof x=="boolean"?x?{edges:v,nodes:d}:{edges:[],nodes:[]}:x}const Vh=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Xu=(t={x:0,y:0},e,n)=>({x:Vh(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Vh(t.y,e[0][1],e[1][1]-(n?.height??0))});function L1(t,e,n){const{width:r,height:s}=ic(n),{x:c,y:d}=n.internals.positionAbsolute;return Xu(t,[[c,d],[c+r,d+s]],e)}const Z0=(t,e,n)=>t<e?Vh(Math.abs(t-e),1,e)/e:t>n?-Vh(Math.abs(t-n),1,e)/e:0,U1=(t,e,n=15,r=40)=>{const s=Z0(t.x,r,e.width-r)*n,c=Z0(t.y,r,e.height-r)*n;return[s,c]},UC=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Gx=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),HC=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Yh=(t,e=[0,0])=>{const{x:n,y:r}=iT(t)?t.internals.positionAbsolute:jg(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Lv=(t,e=[0,0])=>{const{x:n,y:r}=iT(t)?t.internals.positionAbsolute:jg(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},H1=(t,e)=>HC(UC(Gx(t),Gx(e))),xg=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},e_=t=>os(t.width)&&os(t.height)&&os(t.x)&&os(t.y),os=t=>!isNaN(t)&&isFinite(t),u9=(t,e)=>{},Ug=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Hg=({x:t,y:e},[n,r,s],c=!1,d=[1,1])=>{const f={x:(t-n)/s,y:(e-r)/s};return c?Ug(f,d):f},Uv=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r});function xh(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function d9(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=xh(t,n),s=xh(t,e);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof t=="object"){const r=xh(t.top??t.y??0,n),s=xh(t.bottom??t.y??0,n),c=xh(t.left??t.x??0,e),d=xh(t.right??t.x??0,e);return{top:r,right:d,bottom:s,left:c,x:c+d,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function h9(t,e,n,r,s,c){const{x:d,y:f}=Uv(t,[e,n,r]),{x:g,y}=Uv({x:t.x+t.width,y:t.y+t.height},[e,n,r]),v=s-g,x=c-y;return{left:Math.floor(d),top:Math.floor(f),right:Math.floor(v),bottom:Math.floor(x)}}const aT=(t,e,n,r,s,c)=>{const d=d9(c,e,n),f=(e-d.x)/t.width,g=(n-d.y)/t.height,y=Math.min(f,g),v=Vh(y,r,s),x=t.x+t.width/2,b=t.y+t.height/2,A=e/2-x*v,I=n/2-b*v,_=h9(t,A,I,v,e,n),N={left:Math.min(_.left-d.left,0),top:Math.min(_.top-d.top,0),right:Math.min(_.right-d.right,0),bottom:Math.min(_.bottom-d.bottom,0)};return{x:A-N.left+N.right,y:I-N.top+N.bottom,zoom:v}},Eg=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Qh(t){return t!=null&&t!=="parent"}function ic(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function B1(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function z1(t,e={width:0,height:0},n,r,s){const c={...t},d=r.get(n);if(d){const f=d.origin||s;c.x+=d.internals.positionAbsolute.x-(e.width??0)*f[0],c.y+=d.internals.positionAbsolute.y-(e.height??0)*f[1]}return c}function t_(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function f9(){let t,e;return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}function m9(t){return{...O1,...t||{}}}function ng(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:c,y:d}=Ys(t),f=Hg({x:c-(s?.left??0),y:d-(s?.top??0)},r),{x:g,y}=n?Ug(f,e):f;return{xSnapped:g,ySnapped:y,...f}}const cT=t=>({width:t.offsetWidth,height:t.offsetHeight}),F1=t=>t?.getRootNode?.()||window?.document,g9=["INPUT","SELECT","TEXTAREA"];function K1(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:g9.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const G1=t=>"clientX"in t,Ys=(t,e)=>{const n=G1(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},n_=(t,e,n,r,s)=>{const c=e.querySelectorAll(`.${t}`);return!c||!c.length?null:Array.from(c).map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),type:t,nodeId:s,position:d.getAttribute("data-handlepos"),x:(f.left-n.left)/r,y:(f.top-n.top)/r,...cT(d)}})};function q1({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:c,targetControlX:d,targetControlY:f}){const g=t*.125+s*.375+d*.375+n*.125,y=e*.125+c*.375+f*.375+r*.125,v=Math.abs(g-t),x=Math.abs(y-e);return[g,y,v,x]}function Ty(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function r_({pos:t,x1:e,y1:n,x2:r,y2:s,c}){switch(t){case Ze.Left:return[e-Ty(e-r,c),n];case Ze.Right:return[e+Ty(r-e,c),n];case Ze.Top:return[e,n-Ty(n-s,c)];case Ze.Bottom:return[e,n+Ty(s-n,c)]}}function $1({sourceX:t,sourceY:e,sourcePosition:n=Ze.Bottom,targetX:r,targetY:s,targetPosition:c=Ze.Top,curvature:d=.25}){const[f,g]=r_({pos:n,x1:t,y1:e,x2:r,y2:s,c:d}),[y,v]=r_({pos:c,x1:r,y1:s,x2:t,y2:e,c:d}),[x,b,A,I]=q1({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:f,sourceControlY:g,targetControlX:y,targetControlY:v});return[`M${t},${e} C${f},${g} ${y},${v} ${r},${s}`,x,b,A,I]}function V1({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,c=n<t?n+s:n-s,d=Math.abs(r-e)/2,f=r<e?r+d:r-d;return[c,f,s,d]}function p9({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r,elevateOnSelect:s=!1}){if(r!==void 0)return r;const c=s&&n?1e3:0,d=Math.max(t.parentId?t.internals.z:0,e.parentId?e.internals.z:0);return c+d}function y9({sourceNode:t,targetNode:e,width:n,height:r,transform:s}){const c=UC(Lv(t),Lv(e));c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return xg(d,HC(c))>0}const v9=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,C9=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),w9=(t,e)=>{if(!t.source||!t.target)return e;let n;return D1(t)?n={...t}:n={...t,id:v9(t)},C9(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Y1({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,c,d,f]=V1({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,c,d,f]}const o_={[Ze.Left]:{x:-1,y:0},[Ze.Right]:{x:1,y:0},[Ze.Top]:{x:0,y:-1},[Ze.Bottom]:{x:0,y:1}},b9=({source:t,sourcePosition:e=Ze.Bottom,target:n})=>e===Ze.Left||e===Ze.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},i_=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function x9({source:t,sourcePosition:e=Ze.Bottom,target:n,targetPosition:r=Ze.Top,center:s,offset:c,stepPosition:d}){const f=o_[e],g=o_[r],y={x:t.x+f.x*c,y:t.y+f.y*c},v={x:n.x+g.x*c,y:n.y+g.y*c},x=b9({source:y,sourcePosition:e,target:v}),b=x.x!==0?"x":"y",A=x[b];let I=[],_,N;const M={x:0,y:0},U={x:0,y:0},[,,O,L]=V1({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(f[b]*g[b]===-1){b==="x"?(_=s.x??y.x+(v.x-y.x)*d,N=s.y??(y.y+v.y)/2):(_=s.x??(y.x+v.x)/2,N=s.y??y.y+(v.y-y.y)*d);const G=[{x:_,y:y.y},{x:_,y:v.y}],V=[{x:y.x,y:N},{x:v.x,y:N}];f[b]===A?I=b==="x"?G:V:I=b==="x"?V:G}else{const G=[{x:y.x,y:v.y}],V=[{x:v.x,y:y.y}];if(b==="x"?I=f.x===A?V:G:I=f.y===A?G:V,e===r){const oe=Math.abs(t[b]-n[b]);if(oe<=c){const he=Math.min(c-1,c-oe);f[b]===A?M[b]=(y[b]>t[b]?-1:1)*he:U[b]=(v[b]>n[b]?-1:1)*he}}if(e!==r){const oe=b==="x"?"y":"x",he=f[b]===g[oe],W=y[oe]>v[oe],J=y[oe]<v[oe];(f[b]===1&&(!he&&W||he&&J)||f[b]!==1&&(!he&&J||he&&W))&&(I=b==="x"?G:V)}const $={x:y.x+M.x,y:y.y+M.y},ee={x:v.x+U.x,y:v.y+U.y},se=Math.max(Math.abs($.x-I[0].x),Math.abs(ee.x-I[0].x)),ce=Math.max(Math.abs($.y-I[0].y),Math.abs(ee.y-I[0].y));se>=ce?(_=($.x+ee.x)/2,N=I[0].y):(_=I[0].x,N=($.y+ee.y)/2)}return[[t,{x:y.x+M.x,y:y.y+M.y},...I,{x:v.x+U.x,y:v.y+U.y},n],_,N,O,L]}function E9(t,e,n,r){const s=Math.min(i_(t,e)/2,i_(e,n)/2,r),{x:c,y:d}=e;if(t.x===c&&c===n.x||t.y===d&&d===n.y)return`L${c} ${d}`;if(t.y===d){const y=t.x<n.x?-1:1,v=t.y<n.y?1:-1;return`L ${c+s*y},${d}Q ${c},${d} ${c},${d+s*v}`}const f=t.x<n.x?1:-1,g=t.y<n.y?-1:1;return`L ${c},${d+s*g}Q ${c},${d} ${c+s*f},${d}`}function qx({sourceX:t,sourceY:e,sourcePosition:n=Ze.Bottom,targetX:r,targetY:s,targetPosition:c=Ze.Top,borderRadius:d=5,centerX:f,centerY:g,offset:y=20,stepPosition:v=.5}){const[x,b,A,I,_]=x9({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:c,center:{x:f,y:g},offset:y,stepPosition:v});return[x.reduce((M,U,O)=>{let L="";return O>0&&O<x.length-1?L=E9(x[O-1],U,x[O+1],d):L=`${O===0?"M":"L"}${U.x} ${U.y}`,M+=L,M},""),b,A,I,_]}function s_(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function A9(t){const{sourceNode:e,targetNode:n}=t;if(!s_(e)||!s_(n))return null;const r=e.internals.handleBounds||a_(e.handles),s=n.internals.handleBounds||a_(n.handles),c=c_(r?.source??[],t.sourceHandle),d=c_(t.connectionMode===$h.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),t.targetHandle);if(!c||!d)return t.onError?.("008",Zs.error008(c?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const f=c?.position||Ze.Bottom,g=d?.position||Ze.Top,y=Ag(e,c,f),v=Ag(n,d,g);return{sourceX:y.x,sourceY:y.y,targetX:v.x,targetY:v.y,sourcePosition:f,targetPosition:g}}function a_(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function Ag(t,e,n=Ze.Left,r=!1){const s=(e?.x??0)+t.internals.positionAbsolute.x,c=(e?.y??0)+t.internals.positionAbsolute.y,{width:d,height:f}=e??ic(t);if(r)return{x:s+d/2,y:c+f/2};switch(e?.position??n){case Ze.Top:return{x:s+d/2,y:c};case Ze.Right:return{x:s+d,y:c+f/2};case Ze.Bottom:return{x:s+d/2,y:c+f};case Ze.Left:return{x:s,y:c+f/2}}}function c_(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function $x(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function T9(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const c=new Set;return t.reduce((d,f)=>([f.markerStart||r,f.markerEnd||s].forEach(g=>{if(g&&typeof g=="object"){const y=$x(g,e);c.has(y)||(d.push({id:y,color:g.color||n,...g}),c.add(y))}}),d),[]).sort((d,f)=>d.id.localeCompare(f.id))}const lT={nodeOrigin:[0,0],nodeExtent:wg,elevateNodesOnSelect:!0,defaults:{}},S9={...lT,checkEquality:!0};function uT(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function _9(t,e,n){const r=uT(lT,n);for(const s of t.values())if(s.parentId)dT(s,t,e,r);else{const c=jg(s,r.nodeOrigin),d=Qh(s.extent)?s.extent:r.nodeExtent,f=Xu(c,d,ic(s));s.internals.positionAbsolute=f}}function Vx(t,e,n,r){const s=uT(S9,r);let c=t.length>0;const d=new Map(e),f=s?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const g of t){let y=d.get(g.id);if(s.checkEquality&&g===y?.internals.userNode)e.set(g.id,y);else{const v=jg(g,s.nodeOrigin),x=Qh(g.extent)?g.extent:s.nodeExtent,b=Xu(v,x,ic(g));y={...s.defaults,...g,measured:{width:g.measured?.width,height:g.measured?.height},internals:{positionAbsolute:b,handleBounds:g.measured?y?.internals.handleBounds:void 0,z:Q1(g,f),userNode:g}},e.set(g.id,y)}(y.measured===void 0||y.measured.width===void 0||y.measured.height===void 0)&&!y.hidden&&(c=!1),g.parentId&&dT(y,e,n,r)}return c}function k9(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function dT(t,e,n,r){const{elevateNodesOnSelect:s,nodeOrigin:c,nodeExtent:d}=uT(lT,r),f=t.parentId,g=e.get(f);if(!g){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}k9(t,n);const y=s?1e3:0,{x:v,y:x,z:b}=I9(t,g,c,d,y),{positionAbsolute:A}=t.internals,I=v!==A.x||x!==A.y;(I||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:I?{x:v,y:x}:A,z:b}})}function Q1(t,e){return(os(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function I9(t,e,n,r,s){const{x:c,y:d}=e.internals.positionAbsolute,f=ic(t),g=jg(t,n),y=Qh(t.extent)?Xu(g,t.extent,f):g;let v=Xu({x:c+y.x,y:d+y.y},r,f);t.extent==="parent"&&(v=L1(v,f,e));const x=Q1(t,s),b=e.internals.z??0;return{x:v.x,y:v.y,z:b>=x?b+1:x}}function hT(t,e,n,r=[0,0]){const s=[],c=new Map;for(const d of t){const f=e.get(d.parentId);if(!f)continue;const g=c.get(d.parentId)?.expandedRect??Yh(f),y=H1(g,d.rect);c.set(d.parentId,{expandedRect:y,parent:f})}return c.size>0&&c.forEach(({expandedRect:d,parent:f},g)=>{const y=f.internals.positionAbsolute,v=ic(f),x=f.origin??r,b=d.x<y.x?Math.round(Math.abs(y.x-d.x)):0,A=d.y<y.y?Math.round(Math.abs(y.y-d.y)):0,I=Math.max(v.width,Math.round(d.width)),_=Math.max(v.height,Math.round(d.height)),N=(I-v.width)*x[0],M=(_-v.height)*x[1];(b>0||A>0||N||M)&&(s.push({id:g,type:"position",position:{x:f.position.x-b+N,y:f.position.y-A+M}}),n.get(g)?.forEach(U=>{t.some(O=>O.id===U.id)||s.push({id:U.id,type:"position",position:{x:U.position.x+b,y:U.position.y+A}})})),(v.width<d.width||v.height<d.height||b||A)&&s.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:I+(b?x[0]*b-N:0),height:_+(A?x[1]*A-M:0)}})}),s}function R9(t,e,n,r,s,c){const d=r?.querySelector(".xyflow__viewport");let f=!1;if(!d)return{changes:[],updatedInternals:f};const g=[],y=window.getComputedStyle(d),{m22:v}=new window.DOMMatrixReadOnly(y.transform),x=[];for(const b of t.values()){const A=e.get(b.id);if(!A)continue;if(A.hidden){e.set(A.id,{...A,internals:{...A.internals,handleBounds:void 0}}),f=!0;continue}const I=cT(b.nodeElement),_=A.measured.width!==I.width||A.measured.height!==I.height;if(!!(I.width&&I.height&&(_||!A.internals.handleBounds||b.force))){const M=b.nodeElement.getBoundingClientRect(),U=Qh(A.extent)?A.extent:c;let{positionAbsolute:O}=A.internals;A.parentId&&A.extent==="parent"?O=L1(O,I,e.get(A.parentId)):U&&(O=Xu(O,U,I));const L={...A,measured:I,internals:{...A.internals,positionAbsolute:O,handleBounds:{source:n_("source",b.nodeElement,M,v,A.id),target:n_("target",b.nodeElement,M,v,A.id)}}};e.set(A.id,L),A.parentId&&dT(L,e,n,{nodeOrigin:s}),f=!0,_&&(g.push({id:A.id,type:"dimensions",dimensions:I}),A.expandParent&&A.parentId&&x.push({id:A.id,parentId:A.parentId,rect:Yh(L,s)}))}}if(x.length>0){const b=hT(x,e,n,s);g.push(...b)}return{changes:g,updatedInternals:f}}async function N9({delta:t,panZoom:e,transform:n,translateExtent:r,width:s,height:c}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const d=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[s,c]],r),f=!!d&&(d.x!==n[0]||d.y!==n[1]||d.k!==n[2]);return Promise.resolve(f)}function l_(t,e,n,r,s,c){let d=s;const f=r.get(d)||new Map;r.set(d,f.set(n,e)),d=`${s}-${t}`;const g=r.get(d)||new Map;if(r.set(d,g.set(n,e)),c){d=`${s}-${t}-${c}`;const y=r.get(d)||new Map;r.set(d,y.set(n,e))}}function W1(t,e,n){t.clear(),e.clear();for(const r of n){const{source:s,target:c,sourceHandle:d=null,targetHandle:f=null}=r,g={edgeId:r.id,source:s,target:c,sourceHandle:d,targetHandle:f},y=`${s}-${d}--${c}-${f}`,v=`${c}-${f}--${s}-${d}`;l_("source",g,v,t,s,d),l_("target",g,y,t,c,f),e.set(r.id,r)}}function X1(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:X1(n,e):!1}function u_(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function O9(t,e,n,r){const s=new Map;for(const[c,d]of t)if((d.selected||d.id===r)&&(!d.parentId||!X1(d,t))&&(d.draggable||e&&typeof d.draggable>"u")){const f=t.get(c);f&&s.set(c,{id:c,position:f.position||{x:0,y:0},distance:{x:n.x-f.internals.positionAbsolute.x,y:n.y-f.internals.positionAbsolute.y},extent:f.extent,parentId:f.parentId,origin:f.origin,expandParent:f.expandParent,internals:{positionAbsolute:f.internals.positionAbsolute||{x:0,y:0}},measured:{width:f.measured.width??0,height:f.measured.height??0}})}return s}function Lb({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const s=[];for(const[d,f]of e){const g=n.get(d)?.internals.userNode;g&&s.push({...g,position:f.position,dragging:r})}if(!t)return[s[0],s];const c=n.get(t)?.internals.userNode;return[c?{...c,position:e.get(t)?.position||c.position,dragging:r}:s[0],s]}function M9({dragItems:t,snapGrid:e,x:n,y:r}){const s=t.values().next().value;if(!s)return null;const c={x:n-s.distance.x,y:r-s.distance.y},d=Ug(c,e);return{x:d.x-c.x,y:d.y-c.y}}function P9({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:s}){let c={x:null,y:null},d=0,f=new Map,g=!1,y={x:0,y:0},v=null,x=!1,b=null,A=!1,I=!1,_=null;function N({noDragClassName:U,handleSelector:O,domNode:L,isSelectable:H,nodeId:G,nodeClickDistance:V=0}){b=Uo(L);function $({x:oe,y:he}){const{nodeLookup:W,nodeExtent:J,snapGrid:P,snapToGrid:F,nodeOrigin:Y,onNodeDrag:X,onSelectionDrag:B,onError:Q,updateNodePositions:ie}=e();c={x:oe,y:he};let ue=!1;const me=f.size>1,Oe=me&&J?Gx(Lg(f)):null,xe=me&&F?M9({dragItems:f,snapGrid:P,x:oe,y:he}):null;for(const[le,Ce]of f){if(!W.has(le))continue;let je={x:oe-Ce.distance.x,y:he-Ce.distance.y};F&&(je=xe?{x:Math.round(je.x+xe.x),y:Math.round(je.y+xe.y)}:Ug(je,P));let be=null;if(me&&J&&!Ce.extent&&Oe){const{positionAbsolute:Pe}=Ce.internals,Me=Pe.x-Oe.x+J[0][0],lt=Pe.x+Ce.measured.width-Oe.x2+J[1][0],Mt=Pe.y-Oe.y+J[0][1],ge=Pe.y+Ce.measured.height-Oe.y2+J[1][1];be=[[Me,Mt],[lt,ge]]}const{position:we,positionAbsolute:Ee}=j1({nodeId:le,nextPosition:je,nodeLookup:W,nodeExtent:be||J,nodeOrigin:Y,onError:Q});ue=ue||Ce.position.x!==we.x||Ce.position.y!==we.y,Ce.position=we,Ce.internals.positionAbsolute=Ee}if(I=I||ue,!!ue&&(ie(f,!0),_&&(r||X||!G&&B))){const[le,Ce]=Lb({nodeId:G,dragItems:f,nodeLookup:W});r?.(_,f,le,Ce),X?.(_,le,Ce),G||B?.(_,Ce)}}async function ee(){if(!v)return;const{transform:oe,panBy:he,autoPanSpeed:W,autoPanOnNodeDrag:J}=e();if(!J){g=!1,cancelAnimationFrame(d);return}const[P,F]=U1(y,v,W);(P!==0||F!==0)&&(c.x=(c.x??0)-P/oe[2],c.y=(c.y??0)-F/oe[2],await he({x:P,y:F})&&$(c)),d=requestAnimationFrame(ee)}function se(oe){const{nodeLookup:he,multiSelectionActive:W,nodesDraggable:J,transform:P,snapGrid:F,snapToGrid:Y,selectNodesOnDrag:X,onNodeDragStart:B,onSelectionDragStart:Q,unselectNodesAndEdges:ie}=e();x=!0,(!X||!H)&&!W&&G&&(he.get(G)?.selected||ie()),H&&X&&G&&t?.(G);const ue=ng(oe.sourceEvent,{transform:P,snapGrid:F,snapToGrid:Y,containerBounds:v});if(c=ue,f=O9(he,J,ue,G),f.size>0&&(n||B||!G&&Q)){const[me,Oe]=Lb({nodeId:G,dragItems:f,nodeLookup:he});n?.(oe.sourceEvent,f,me,Oe),B?.(oe.sourceEvent,me,Oe),G||Q?.(oe.sourceEvent,Oe)}}const ce=g1().clickDistance(V).on("start",oe=>{const{domNode:he,nodeDragThreshold:W,transform:J,snapGrid:P,snapToGrid:F}=e();v=he?.getBoundingClientRect()||null,A=!1,I=!1,_=oe.sourceEvent,W===0&&se(oe),c=ng(oe.sourceEvent,{transform:J,snapGrid:P,snapToGrid:F,containerBounds:v}),y=Ys(oe.sourceEvent,v)}).on("drag",oe=>{const{autoPanOnNodeDrag:he,transform:W,snapGrid:J,snapToGrid:P,nodeDragThreshold:F,nodeLookup:Y}=e(),X=ng(oe.sourceEvent,{transform:W,snapGrid:J,snapToGrid:P,containerBounds:v});if(_=oe.sourceEvent,(oe.sourceEvent.type==="touchmove"&&oe.sourceEvent.touches.length>1||G&&!Y.has(G))&&(A=!0),!A){if(!g&&he&&x&&(g=!0,ee()),!x){const B=X.xSnapped-(c.x??0),Q=X.ySnapped-(c.y??0);Math.sqrt(B*B+Q*Q)>F&&se(oe)}(c.x!==X.xSnapped||c.y!==X.ySnapped)&&f&&x&&(y=Ys(oe.sourceEvent,v),$(X))}}).on("end",oe=>{if(!(!x||A)&&(g=!1,x=!1,cancelAnimationFrame(d),f.size>0)){const{nodeLookup:he,updateNodePositions:W,onNodeDragStop:J,onSelectionDragStop:P}=e();if(I&&(W(f,!1),I=!1),s||J||!G&&P){const[F,Y]=Lb({nodeId:G,dragItems:f,nodeLookup:he,dragging:!1});s?.(oe.sourceEvent,f,F,Y),J?.(oe.sourceEvent,F,Y),G||P?.(oe.sourceEvent,Y)}}}).filter(oe=>{const he=oe.target;return!oe.button&&(!U||!u_(he,`.${U}`,L))&&(!O||u_(he,O,L))});b.call(ce)}function M(){b?.on(".drag",null)}return{update:N,destroy:M}}function D9(t,e,n){const r=[],s={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const c of e.values())xg(s,Yh(c))>0&&r.push(c);return r}const j9=250;function L9(t,e,n,r){let s=[],c=1/0;const d=D9(t,n,e+j9);for(const f of d){const g=[...f.internals.handleBounds?.source??[],...f.internals.handleBounds?.target??[]];for(const y of g){if(r.nodeId===y.nodeId&&r.type===y.type&&r.id===y.id)continue;const{x:v,y:x}=Ag(f,y,y.position,!0),b=Math.sqrt(Math.pow(v-t.x,2)+Math.pow(x-t.y,2));b>e||(b<c?(s=[{...y,x:v,y:x}],c=b):b===c&&s.push({...y,x:v,y:x}))}}if(!s.length)return null;if(s.length>1){const f=r.type==="source"?"target":"source";return s.find(g=>g.type===f)??s[0]}return s[0]}function J1(t,e,n,r,s,c=!1){const d=r.get(t);if(!d)return null;const f=s==="strict"?d.internals.handleBounds?.[e]:[...d.internals.handleBounds?.source??[],...d.internals.handleBounds?.target??[]],g=(n?f?.find(y=>y.id===n):f?.[0])??null;return g&&c?{...g,...Ag(d,g,g.position,!0)}:g}function Z1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function U9(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const eP=()=>!0;function H9(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:c,isTarget:d,domNode:f,nodeLookup:g,lib:y,autoPanOnConnect:v,flowId:x,panBy:b,cancelConnection:A,onConnectStart:I,onConnect:_,onConnectEnd:N,isValidConnection:M=eP,onReconnectEnd:U,updateConnection:O,getTransform:L,getFromHandle:H,autoPanSpeed:G,dragThreshold:V=1,handleDomNode:$}){const ee=F1(t.target);let se=0,ce;const{x:oe,y:he}=Ys(t),W=Z1(c,$),J=f?.getBoundingClientRect();let P=!1;if(!J||!W)return;const F=J1(s,W,r,g,e);if(!F)return;let Y=Ys(t,J),X=!1,B=null,Q=!1,ie=null;function ue(){if(!v||!J)return;const[we,Ee]=U1(Y,J,G);b({x:we,y:Ee}),se=requestAnimationFrame(ue)}const me={...F,nodeId:s,type:W,position:F.position},Oe=g.get(s);let le={inProgress:!0,isValid:null,from:Ag(Oe,me,Ze.Left,!0),fromHandle:me,fromPosition:me.position,fromNode:Oe,to:Y,toHandle:null,toPosition:J0[me.position],toNode:null};function Ce(){P=!0,O(le),I?.(t,{nodeId:s,handleId:r,handleType:W})}V===0&&Ce();function je(we){if(!P){const{x:lt,y:Mt}=Ys(we),ge=lt-oe,Be=Mt-he;if(!(ge*ge+Be*Be>V*V))return;Ce()}if(!H()||!me){be(we);return}const Ee=L();Y=Ys(we,J),ce=L9(Hg(Y,Ee,!1,[1,1]),n,g,me),X||(ue(),X=!0);const Pe=tP(we,{handle:ce,connectionMode:e,fromNodeId:s,fromHandleId:r,fromType:d?"target":"source",isValidConnection:M,doc:ee,lib:y,flowId:x,nodeLookup:g});ie=Pe.handleDomNode,B=Pe.connection,Q=U9(!!ce,Pe.isValid);const Me={...le,isValid:Q,to:Pe.toHandle&&Q?Uv({x:Pe.toHandle.x,y:Pe.toHandle.y},Ee):Y,toHandle:Pe.toHandle,toPosition:Q&&Pe.toHandle?Pe.toHandle.position:J0[me.position],toNode:Pe.toHandle?g.get(Pe.toHandle.nodeId):null};Q&&ce&&le.toHandle&&Me.toHandle&&le.toHandle.type===Me.toHandle.type&&le.toHandle.nodeId===Me.toHandle.nodeId&&le.toHandle.id===Me.toHandle.id&&le.to.x===Me.to.x&&le.to.y===Me.to.y||(O(Me),le=Me)}function be(we){if(P){(ce||ie)&&B&&Q&&_?.(B);const{inProgress:Ee,...Pe}=le,Me={...Pe,toPosition:le.toHandle?le.toPosition:null};N?.(we,Me),c&&U?.(we,Me)}A(),cancelAnimationFrame(se),X=!1,Q=!1,B=null,ie=null,ee.removeEventListener("mousemove",je),ee.removeEventListener("mouseup",be),ee.removeEventListener("touchmove",je),ee.removeEventListener("touchend",be)}ee.addEventListener("mousemove",je),ee.addEventListener("mouseup",be),ee.addEventListener("touchmove",je),ee.addEventListener("touchend",be)}function tP(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:c,doc:d,lib:f,flowId:g,isValidConnection:y=eP,nodeLookup:v}){const x=c==="target",b=e?d.querySelector(`.${f}-flow__handle[data-id="${g}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:A,y:I}=Ys(t),_=d.elementFromPoint(A,I),N=_?.classList.contains(`${f}-flow__handle`)?_:b,M={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const U=Z1(void 0,N),O=N.getAttribute("data-nodeid"),L=N.getAttribute("data-handleid"),H=N.classList.contains("connectable"),G=N.classList.contains("connectableend");if(!O||!U)return M;const V={source:x?O:r,sourceHandle:x?L:s,target:x?r:O,targetHandle:x?s:L};M.connection=V;const ee=H&&G&&(n===$h.Strict?x&&U==="source"||!x&&U==="target":O!==r||L!==s);M.isValid=ee&&y(V),M.toHandle=J1(O,U,L,v,n,!0)}return M}const Yx={onPointerDown:H9,isValid:tP};function B9({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const s=Uo(t);function c({translateExtent:f,width:g,height:y,zoomStep:v=1,pannable:x=!0,zoomable:b=!0,inversePan:A=!1}){const I=O=>{if(O.sourceEvent.type!=="wheel"||!e)return;const L=n(),H=O.sourceEvent.ctrlKey&&Eg()?10:1,G=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*v,V=L[2]*Math.pow(2,G*H);e.scaleTo(V)};let _=[0,0];const N=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(_=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},M=O=>{const L=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const H=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],G=[H[0]-_[0],H[1]-_[1]];_=H;const V=r()*Math.max(L[2],Math.log(L[2]))*(A?-1:1),$={x:L[0]-G[0]*V,y:L[1]-G[1]*V},ee=[[0,0],[g,y]];e.setViewportConstrained({x:$.x,y:$.y,zoom:L[2]},ee,f)},U=R1().on("start",N).on("zoom",x?M:null).on("zoom.wheel",b?I:null);s.call(U,{})}function d(){s.on("zoom",null)}return{update:c,destroy:d,pointer:ts}}const z9=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,BC=t=>({x:t.x,y:t.y,zoom:t.k}),Ub=({x:t,y:e,zoom:n})=>LC.translate(t,e).scale(n),Th=(t,e)=>t.target.closest(`.${e}`),nP=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),F9=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Hb=(t,e=0,n=F9,r=()=>{})=>{const s=typeof e=="number"&&e>0;return s||r(),s?t.transition().duration(e).ease(n).on("end",r):t},rP=t=>{const e=t.ctrlKey&&Eg()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function K9({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:c,zoomOnPinch:d,onPanZoomStart:f,onPanZoom:g,onPanZoomEnd:y}){return v=>{if(Th(v,e))return!1;v.preventDefault(),v.stopImmediatePropagation();const x=n.property("__zoom").k||1;if(v.ctrlKey&&d){const N=ts(v),M=rP(v),U=x*Math.pow(2,M);r.scaleTo(n,U,N,v);return}const b=v.deltaMode===1?20:1;let A=s===ju.Vertical?0:v.deltaX*b,I=s===ju.Horizontal?0:v.deltaY*b;!Eg()&&v.shiftKey&&s!==ju.Vertical&&(A=v.deltaY*b,I=0),r.translateBy(n,-(A/x)*c,-(I/x)*c,{internal:!0});const _=BC(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,f?.(v,_)),t.isPanScrolling&&(g?.(v,_),t.panScrollTimeout=setTimeout(()=>{y?.(v,_),t.isPanScrolling=!1},150))}}function G9({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,s){const c=r.type==="wheel",d=!e&&c&&!r.ctrlKey,f=Th(r,t);if(r.ctrlKey&&c&&f&&r.preventDefault(),d||f)return null;r.preventDefault(),n.call(this,r,s)}}function q9({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const s=BC(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=s,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,s)}}function $9({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return c=>{t.usedRightMouseButton=!!(n&&nP(e,t.mouseButton??0)),c.sourceEvent?.sync||r([c.transform.x,c.transform.y,c.transform.k]),s&&!c.sourceEvent?.internal&&s?.(c.sourceEvent,BC(c.transform))}}function V9({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:c}){return d=>{if(!d.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,c&&nP(e,t.mouseButton??0)&&!t.usedRightMouseButton&&d.sourceEvent&&c(d.sourceEvent),t.usedRightMouseButton=!1,r(!1),s&&z9(t.prevViewport,d.transform))){const f=BC(d.transform);t.prevViewport=f,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{s?.(d.sourceEvent,f)},n?150:0)}}}function Y9({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:c,userSelectionActive:d,noWheelClassName:f,noPanClassName:g,lib:y}){return v=>{const x=t||e,b=n&&v.ctrlKey;if(v.button===1&&v.type==="mousedown"&&(Th(v,`${y}-flow__node`)||Th(v,`${y}-flow__edge`)))return!0;if(!r&&!x&&!s&&!c&&!n||d||Th(v,f)&&v.type==="wheel"||Th(v,g)&&(v.type!=="wheel"||s&&v.type==="wheel"&&!t)||!n&&v.ctrlKey&&v.type==="wheel")return!1;if(!n&&v.type==="touchstart"&&v.touches?.length>1)return v.preventDefault(),!1;if(!x&&!s&&!b&&v.type==="wheel"||!r&&(v.type==="mousedown"||v.type==="touchstart")||Array.isArray(r)&&!r.includes(v.button)&&v.type==="mousedown")return!1;const A=Array.isArray(r)&&r.includes(v.button)||!v.button||v.button<=1;return(!v.ctrlKey||v.type==="wheel")&&A}}function Q9({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:c,onPanZoom:d,onPanZoomStart:f,onPanZoomEnd:g,onDraggingChange:y}){const v={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},x=t.getBoundingClientRect(),b=R1().clickDistance(!os(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(s),A=Uo(t).call(b);O({x:c.x,y:c.y,zoom:Vh(c.zoom,e,n)},[[0,0],[x.width,x.height]],s);const I=A.on("wheel.zoom"),_=A.on("dblclick.zoom");b.wheelDelta(rP);function N(oe,he){return A?new Promise(W=>{b?.interpolate(he?.interpolate==="linear"?tg:By).transform(Hb(A,he?.duration,he?.ease,()=>W(!0)),oe)}):Promise.resolve(!1)}function M({noWheelClassName:oe,noPanClassName:he,onPaneContextMenu:W,userSelectionActive:J,panOnScroll:P,panOnDrag:F,panOnScrollMode:Y,panOnScrollSpeed:X,preventScrolling:B,zoomOnPinch:Q,zoomOnScroll:ie,zoomOnDoubleClick:ue,zoomActivationKeyPressed:me,lib:Oe,onTransformChange:xe}){J&&!v.isZoomingOrPanning&&U();const Ce=P&&!me&&!J?K9({zoomPanValues:v,noWheelClassName:oe,d3Selection:A,d3Zoom:b,panOnScrollMode:Y,panOnScrollSpeed:X,zoomOnPinch:Q,onPanZoomStart:f,onPanZoom:d,onPanZoomEnd:g}):G9({noWheelClassName:oe,preventScrolling:B,d3ZoomHandler:I});if(A.on("wheel.zoom",Ce,{passive:!1}),!J){const be=q9({zoomPanValues:v,onDraggingChange:y,onPanZoomStart:f});b.on("start",be);const we=$9({zoomPanValues:v,panOnDrag:F,onPaneContextMenu:!!W,onPanZoom:d,onTransformChange:xe});b.on("zoom",we);const Ee=V9({zoomPanValues:v,panOnDrag:F,panOnScroll:P,onPaneContextMenu:W,onPanZoomEnd:g,onDraggingChange:y});b.on("end",Ee)}const je=Y9({zoomActivationKeyPressed:me,panOnDrag:F,zoomOnScroll:ie,panOnScroll:P,zoomOnDoubleClick:ue,zoomOnPinch:Q,userSelectionActive:J,noPanClassName:he,noWheelClassName:oe,lib:Oe});b.filter(je),ue?A.on("dblclick.zoom",_):A.on("dblclick.zoom",null)}function U(){b.on("zoom",null)}async function O(oe,he,W){const J=Ub(oe),P=b?.constrain()(J,he,W);return P&&await N(P),new Promise(F=>F(P))}async function L(oe,he){const W=Ub(oe);return await N(W,he),new Promise(J=>J(W))}function H(oe){if(A){const he=Ub(oe),W=A.property("__zoom");(W.k!==oe.zoom||W.x!==oe.x||W.y!==oe.y)&&b?.transform(A,he,null,{sync:!0})}}function G(){const oe=A?I1(A.node()):{x:0,y:0,k:1};return{x:oe.x,y:oe.y,zoom:oe.k}}function V(oe,he){return A?new Promise(W=>{b?.interpolate(he?.interpolate==="linear"?tg:By).scaleTo(Hb(A,he?.duration,he?.ease,()=>W(!0)),oe)}):Promise.resolve(!1)}function $(oe,he){return A?new Promise(W=>{b?.interpolate(he?.interpolate==="linear"?tg:By).scaleBy(Hb(A,he?.duration,he?.ease,()=>W(!0)),oe)}):Promise.resolve(!1)}function ee(oe){b?.scaleExtent(oe)}function se(oe){b?.translateExtent(oe)}function ce(oe){const he=!os(oe)||oe<0?0:oe;b?.clickDistance(he)}return{update:M,destroy:U,setViewport:L,setViewportConstrained:O,getViewport:G,scaleTo:V,scaleBy:$,setScaleExtent:ee,setTranslateExtent:se,syncViewport:H,setClickDistance:ce}}var Wh;(function(t){t.Line="line",t.Handle="handle"})(Wh||(Wh={}));function W9({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:s,affectsY:c}){const d=t-e,f=n-r,g=[d>0?1:d<0?-1:0,f>0?1:f<0?-1:0];return d&&s&&(g[0]=g[0]*-1),f&&c&&(g[1]=g[1]*-1),g}function X9(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),s=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:s}}function ul(t,e){return Math.max(0,e-t)}function dl(t,e){return Math.max(0,t-e)}function Sy(t,e,n){return Math.max(0,e-t,t-n)}function d_(t,e){return t?!e:e}function J9(t,e,n,r,s,c,d,f){let{affectsX:g,affectsY:y}=e;const{isHorizontal:v,isVertical:x}=e,b=v&&x,{xSnapped:A,ySnapped:I}=n,{minWidth:_,maxWidth:N,minHeight:M,maxHeight:U}=r,{x:O,y:L,width:H,height:G,aspectRatio:V}=t;let $=Math.floor(v?A-t.pointerX:0),ee=Math.floor(x?I-t.pointerY:0);const se=H+(g?-$:$),ce=G+(y?-ee:ee),oe=-c[0]*H,he=-c[1]*G;let W=Sy(se,_,N),J=Sy(ce,M,U);if(d){let Y=0,X=0;g&&$<0?Y=ul(O+$+oe,d[0][0]):!g&&$>0&&(Y=dl(O+se+oe,d[1][0])),y&&ee<0?X=ul(L+ee+he,d[0][1]):!y&&ee>0&&(X=dl(L+ce+he,d[1][1])),W=Math.max(W,Y),J=Math.max(J,X)}if(f){let Y=0,X=0;g&&$>0?Y=dl(O+$,f[0][0]):!g&&$<0&&(Y=ul(O+se,f[1][0])),y&&ee>0?X=dl(L+ee,f[0][1]):!y&&ee<0&&(X=ul(L+ce,f[1][1])),W=Math.max(W,Y),J=Math.max(J,X)}if(s){if(v){const Y=Sy(se/V,M,U)*V;if(W=Math.max(W,Y),d){let X=0;!g&&!y||g&&!y&&b?X=dl(L+he+se/V,d[1][1])*V:X=ul(L+he+(g?$:-$)/V,d[0][1])*V,W=Math.max(W,X)}if(f){let X=0;!g&&!y||g&&!y&&b?X=ul(L+se/V,f[1][1])*V:X=dl(L+(g?$:-$)/V,f[0][1])*V,W=Math.max(W,X)}}if(x){const Y=Sy(ce*V,_,N)/V;if(J=Math.max(J,Y),d){let X=0;!g&&!y||y&&!g&&b?X=dl(O+ce*V+oe,d[1][0])/V:X=ul(O+(y?ee:-ee)*V+oe,d[0][0])/V,J=Math.max(J,X)}if(f){let X=0;!g&&!y||y&&!g&&b?X=ul(O+ce*V,f[1][0])/V:X=dl(O+(y?ee:-ee)*V,f[0][0])/V,J=Math.max(J,X)}}}ee=ee+(ee<0?J:-J),$=$+($<0?W:-W),s&&(b?se>ce*V?ee=(d_(g,y)?-$:$)/V:$=(d_(g,y)?-ee:ee)*V:v?(ee=$/V,y=g):($=ee*V,g=y));const P=g?O+$:O,F=y?L+ee:L;return{width:H+(g?-$:$),height:G+(y?-ee:ee),x:c[0]*$*(g?-1:1)+P,y:c[1]*ee*(y?-1:1)+F}}const oP={width:0,height:0,x:0,y:0},Z9={...oP,pointerX:0,pointerY:0,aspectRatio:1};function eV(t){return[[0,0],[t.measured.width,t.measured.height]]}function tV(t,e,n){const r=e.position.x+t.position.x,s=e.position.y+t.position.y,c=t.measured.width??0,d=t.measured.height??0,f=n[0]*c,g=n[1]*d;return[[r-f,s-g],[r+c-f,s+d-g]]}function nV({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:s}){const c=Uo(t);function d({controlPosition:g,boundaries:y,keepAspectRatio:v,resizeDirection:x,onResizeStart:b,onResize:A,onResizeEnd:I,shouldResize:_}){let N={...oP},M={...Z9};const U=X9(g);let O,L=null,H=[],G,V,$;const ee=g1().on("start",se=>{const{nodeLookup:ce,transform:oe,snapGrid:he,snapToGrid:W,nodeOrigin:J,paneDomNode:P}=n();if(O=ce.get(e),!O)return;L=P?.getBoundingClientRect()??null;const{xSnapped:F,ySnapped:Y}=ng(se.sourceEvent,{transform:oe,snapGrid:he,snapToGrid:W,containerBounds:L});N={width:O.measured.width??0,height:O.measured.height??0,x:O.position.x??0,y:O.position.y??0},M={...N,pointerX:F,pointerY:Y,aspectRatio:N.width/N.height},G=void 0,O.parentId&&(O.extent==="parent"||O.expandParent)&&(G=ce.get(O.parentId),V=G&&O.extent==="parent"?eV(G):void 0),H=[],$=void 0;for(const[X,B]of ce)if(B.parentId===e&&(H.push({id:X,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const Q=tV(B,O,B.origin??J);$?$=[[Math.min(Q[0][0],$[0][0]),Math.min(Q[0][1],$[0][1])],[Math.max(Q[1][0],$[1][0]),Math.max(Q[1][1],$[1][1])]]:$=Q}b?.(se,{...N})}).on("drag",se=>{const{transform:ce,snapGrid:oe,snapToGrid:he,nodeOrigin:W}=n(),J=ng(se.sourceEvent,{transform:ce,snapGrid:oe,snapToGrid:he,containerBounds:L}),P=[];if(!O)return;const{x:F,y:Y,width:X,height:B}=N,Q={},ie=O.origin??W,{width:ue,height:me,x:Oe,y:xe}=J9(M,U,J,y,v,ie,V,$),le=ue!==X,Ce=me!==B,je=Oe!==F&&le,be=xe!==Y&&Ce;if(!je&&!be&&!le&&!Ce)return;if((je||be||ie[0]===1||ie[1]===1)&&(Q.x=je?Oe:N.x,Q.y=be?xe:N.y,N.x=Q.x,N.y=Q.y,H.length>0)){const Me=Oe-F,lt=xe-Y;for(const Mt of H)Mt.position={x:Mt.position.x-Me+ie[0]*(ue-X),y:Mt.position.y-lt+ie[1]*(me-B)},P.push(Mt)}if((le||Ce)&&(Q.width=le&&(!x||x==="horizontal")?ue:N.width,Q.height=Ce&&(!x||x==="vertical")?me:N.height,N.width=Q.width,N.height=Q.height),G&&O.expandParent){const Me=ie[0]*(Q.width??0);Q.x&&Q.x<Me&&(N.x=Me,M.x=M.x-(Q.x-Me));const lt=ie[1]*(Q.height??0);Q.y&&Q.y<lt&&(N.y=lt,M.y=M.y-(Q.y-lt))}const we=W9({width:N.width,prevWidth:X,height:N.height,prevHeight:B,affectsX:U.affectsX,affectsY:U.affectsY}),Ee={...N,direction:we};_?.(se,Ee)!==!1&&(A?.(se,Ee),r(Q,P))}).on("end",se=>{I?.(se,{...N}),s?.({...N})});c.call(ee)}function f(){c.on(".drag",null)}return{update:d,destroy:f}}var Bb={exports:{}},zb={},Fb={exports:{}},Kb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function rV(){if(h_)return Kb;h_=1;var t=Sg();function e(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(x,b){var A=b(),I=r({inst:{value:A,getSnapshot:b}}),_=I[0].inst,N=I[1];return c(function(){_.value=A,_.getSnapshot=b,g(_)&&N({inst:_})},[x,A,b]),s(function(){return g(_)&&N({inst:_}),x(function(){g(_)&&N({inst:_})})},[x]),d(A),A}function g(x){var b=x.getSnapshot;x=x.value;try{var A=b();return!n(x,A)}catch{return!0}}function y(x,b){return b()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y:f;return Kb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:v,Kb}var f_;function oV(){return f_||(f_=1,Fb.exports=rV()),Fb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function iV(){if(m_)return zb;m_=1;var t=Sg(),e=oV();function n(y,v){return y===v&&(y!==0||1/y===1/v)||y!==y&&v!==v}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,c=t.useRef,d=t.useEffect,f=t.useMemo,g=t.useDebugValue;return zb.useSyncExternalStoreWithSelector=function(y,v,x,b,A){var I=c(null);if(I.current===null){var _={hasValue:!1,value:null};I.current=_}else _=I.current;I=f(function(){function M(G){if(!U){if(U=!0,O=G,G=b(G),A!==void 0&&_.hasValue){var V=_.value;if(A(V,G))return L=V}return L=G}if(V=L,r(O,G))return V;var $=b(G);return A!==void 0&&A(V,$)?(O=G,V):(O=G,L=$)}var U=!1,O,L,H=x===void 0?null:x;return[function(){return M(v())},H===null?void 0:function(){return M(H())}]},[v,x,b,A]);var N=s(y,I[0],I[1]);return d(function(){_.hasValue=!0,_.value=N},[N]),g(N),N},zb}var g_;function sV(){return g_||(g_=1,Bb.exports=iV()),Bb.exports}var aV=sV();const cV=Zx(aV),lV={},p_=t=>{let e;const n=new Set,r=(v,x)=>{const b=typeof v=="function"?v(e):v;if(!Object.is(b,e)){const A=e;e=x??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(I=>I(e,A))}},s=()=>e,g={setState:r,getState:s,getInitialState:()=>y,subscribe:v=>(n.add(v),()=>n.delete(v)),destroy:()=>{(lV?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},y=e=t(r,s,g);return g},uV=t=>t?p_(t):p_,{useDebugValue:dV}=mo,{useSyncExternalStoreWithSelector:hV}=cV,fV=t=>t;function iP(t,e=fV,n){const r=hV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return dV(r),r}const y_=(t,e)=>{const n=uV(t),r=(s,c=e)=>iP(n,s,c);return Object.assign(r,n),r},mV=(t,e)=>t?y_(t,e):y_;function Rn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const zC=k.createContext(null),gV=zC.Provider,sP=Zs.error001();function Rt(t,e){const n=k.useContext(zC);if(n===null)throw new Error(sP);return iP(n,t,e)}function xn(){const t=k.useContext(zC);if(t===null)throw new Error(sP);return k.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const v_={display:"none"},pV={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},aP="react-flow__node-desc",cP="react-flow__edge-desc",yV="react-flow__aria-live",vV=t=>t.ariaLiveMessage,CV=t=>t.ariaLabelConfig;function wV({rfId:t}){const e=Rt(vV);return h.jsx("div",{id:`${yV}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:pV,children:e})}function bV({rfId:t,disableKeyboardA11y:e}){const n=Rt(CV);return h.jsxs(h.Fragment,{children:[h.jsx("div",{id:`${aP}-${t}`,style:v_,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),h.jsx("div",{id:`${cP}-${t}`,style:v_,children:n["edge.a11yDescription.default"]}),!e&&h.jsx(wV,{rfId:t})]})}const FC=k.forwardRef(({position:t="top-left",children:e,className:n,style:r,...s},c)=>{const d=`${t}`.split("-");return h.jsx("div",{className:Gn(["react-flow__panel",n,...d]),style:r,ref:c,...s,children:e})});FC.displayName="Panel";function xV({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:h.jsx(FC,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const EV=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},_y=t=>t.id;function AV(t,e){return Rn(t.selectedNodes.map(_y),e.selectedNodes.map(_y))&&Rn(t.selectedEdges.map(_y),e.selectedEdges.map(_y))}function TV({onSelectionChange:t}){const e=xn(),{selectedNodes:n,selectedEdges:r}=Rt(EV,AV);return k.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChangeHandlers.forEach(c=>c(s))},[n,r,t]),null}const SV=t=>!!t.onSelectionChangeHandlers;function _V({onSelectionChange:t}){const e=Rt(SV);return t||e?h.jsx(TV,{onSelectionChange:t}):null}const lP=[0,0],kV={x:0,y:0,zoom:1},IV=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],C_=[...IV,"rfId"],RV=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),w_={translateExtent:wg,nodeOrigin:lP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function NV(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:c,setNodeExtent:d,reset:f,setDefaultNodesAndEdges:g,setPaneClickDistance:y}=Rt(RV,Rn),v=xn();k.useEffect(()=>(g(t.defaultNodes,t.defaultEdges),()=>{x.current=w_,f()}),[]);const x=k.useRef(w_);return k.useEffect(()=>{for(const b of C_){const A=t[b],I=x.current[b];A!==I&&(typeof t[b]>"u"||(b==="nodes"?e(A):b==="edges"?n(A):b==="minZoom"?r(A):b==="maxZoom"?s(A):b==="translateExtent"?c(A):b==="nodeExtent"?d(A):b==="paneClickDistance"?y(A):b==="ariaLabelConfig"?v.setState({ariaLabelConfig:m9(A)}):b==="fitView"?v.setState({fitViewQueued:A}):b==="fitViewOptions"?v.setState({fitViewOptions:A}):v.setState({[b]:A})))}x.current=t},C_.map(b=>t[b])),null}function b_(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function OV(t){const[e,n]=k.useState(t==="system"?null:t);return k.useEffect(()=>{if(t!=="system"){n(t);return}const r=b_(),s=()=>n(r?.matches?"dark":"light");return s(),r?.addEventListener("change",s),()=>{r?.removeEventListener("change",s)}},[t]),e!==null?e:b_()?.matches?"dark":"light"}const x_=typeof document<"u"?document:null;function Tg(t=null,e={target:x_,actInsideInputWithModifier:!0}){const[n,r]=k.useState(!1),s=k.useRef(!1),c=k.useRef(new Set([])),[d,f]=k.useMemo(()=>{if(t!==null){const y=(Array.isArray(t)?t:[t]).filter(x=>typeof x=="string").map(x=>x.replace("+",`
`).replace(`

`,`
+`).split(`
`)),v=y.reduce((x,b)=>x.concat(...b),[]);return[y,v]}return[[],[]]},[t]);return k.useEffect(()=>{const g=e?.target??x_,y=e?.actInsideInputWithModifier??!0;if(t!==null){const v=A=>{if(s.current=A.ctrlKey||A.metaKey||A.shiftKey||A.altKey,(!s.current||s.current&&!y)&&K1(A))return!1;const _=A_(A.code,f);if(c.current.add(A[_]),E_(d,c.current,!1)){const N=A.composedPath?.()?.[0]||A.target,M=N?.nodeName==="BUTTON"||N?.nodeName==="A";e.preventDefault!==!1&&(s.current||!M)&&A.preventDefault(),r(!0)}},x=A=>{const I=A_(A.code,f);E_(d,c.current,!0)?(r(!1),c.current.clear()):c.current.delete(A[I]),A.key==="Meta"&&c.current.clear(),s.current=!1},b=()=>{c.current.clear(),r(!1)};return g?.addEventListener("keydown",v),g?.addEventListener("keyup",x),window.addEventListener("blur",b),window.addEventListener("contextmenu",b),()=>{g?.removeEventListener("keydown",v),g?.removeEventListener("keyup",x),window.removeEventListener("blur",b),window.removeEventListener("contextmenu",b)}}},[t,r]),n}function E_(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function A_(t,e){return e.includes(t)?"code":"key"}const MV=()=>{const t=xn();return k.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,s,c],panZoom:d}=t.getState();return d?(await d.setViewport({x:e.x??r,y:e.y??s,zoom:e.zoom??c},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:s,minZoom:c,maxZoom:d,panZoom:f}=t.getState(),g=aT(e,r,s,c,d,n?.padding??.1);return f?(await f.setViewport(g,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:s,snapToGrid:c,domNode:d}=t.getState();if(!d)return e;const{x:f,y:g}=d.getBoundingClientRect(),y={x:e.x-f,y:e.y-g},v=n.snapGrid??s,x=n.snapToGrid??c;return Hg(y,r,x,v)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:s,y:c}=r.getBoundingClientRect(),d=Uv(e,n);return{x:d.x+s,y:d.y+c}}}),[])};function uP(t,e){const n=[],r=new Map,s=[];for(const c of t)if(c.type==="add"){s.push(c);continue}else if(c.type==="remove"||c.type==="replace")r.set(c.id,[c]);else{const d=r.get(c.id);d?d.push(c):r.set(c.id,[c])}for(const c of e){const d=r.get(c.id);if(!d){n.push(c);continue}if(d[0].type==="remove")continue;if(d[0].type==="replace"){n.push({...d[0].item});continue}const f={...c};for(const g of d)PV(g,f);n.push(f)}return s.length&&s.forEach(c=>{c.index!==void 0?n.splice(c.index,0,{...c.item}):n.push({...c.item})}),n}function PV(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function dP(t,e){return uP(t,e)}function hP(t,e){return uP(t,e)}function Nu(t,e){return{id:t,type:"select",selected:e}}function Sh(t,e=new Set,n=!1){const r=[];for(const[s,c]of t){const d=e.has(s);!(c.selected===void 0&&!d)&&c.selected!==d&&(n&&(c.selected=d),r.push(Nu(c.id,d)))}return r}function T_({items:t=[],lookup:e}){const n=[],r=new Map(t.map(s=>[s.id,s]));for(const[s,c]of t.entries()){const d=e.get(c.id),f=d?.internals?.userNode??d;f!==void 0&&f!==c&&n.push({id:c.id,item:c,type:"replace"}),f===void 0&&n.push({item:c,type:"add",index:s})}for(const[s]of e)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function S_(t){return{id:t.id,type:"remove"}}const __=t=>o9(t),DV=t=>D1(t);function fP(t){return k.forwardRef(t)}const jV=typeof window<"u"?k.useLayoutEffect:k.useEffect;function k_(t){const[e,n]=k.useState(BigInt(0)),[r]=k.useState(()=>LV(()=>n(s=>s+BigInt(1))));return jV(()=>{const s=r.get();s.length&&(t(s),r.reset())},[e]),r}function LV(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const mP=k.createContext(null);function UV({children:t}){const e=xn(),n=k.useCallback(f=>{const{nodes:g=[],setNodes:y,hasDefaultNodes:v,onNodesChange:x,nodeLookup:b,fitViewQueued:A}=e.getState();let I=g;for(const N of f)I=typeof N=="function"?N(I):N;const _=T_({items:I,lookup:b});v&&y(I),_.length>0?x?.(_):A&&window.requestAnimationFrame(()=>{const{fitViewQueued:N,nodes:M,setNodes:U}=e.getState();N&&U(M)})},[]),r=k_(n),s=k.useCallback(f=>{const{edges:g=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:x,edgeLookup:b}=e.getState();let A=g;for(const I of f)A=typeof I=="function"?I(A):I;v?y(A):x&&x(T_({items:A,lookup:b}))},[]),c=k_(s),d=k.useMemo(()=>({nodeQueue:r,edgeQueue:c}),[]);return h.jsx(mP.Provider,{value:d,children:t})}function HV(){const t=k.useContext(mP);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const BV=t=>!!t.panZoom;function Bg(){const t=MV(),e=xn(),n=HV(),r=Rt(BV),s=k.useMemo(()=>{const c=x=>e.getState().nodeLookup.get(x),d=x=>{n.nodeQueue.push(x)},f=x=>{n.edgeQueue.push(x)},g=x=>{const{nodeLookup:b,nodeOrigin:A}=e.getState(),I=__(x)?x:b.get(x.id),_=I.parentId?z1(I.position,I.measured,I.parentId,b,A):I.position,N={...I,position:_,width:I.measured?.width??I.width,height:I.measured?.height??I.height};return Yh(N)},y=(x,b,A={replace:!1})=>{d(I=>I.map(_=>{if(_.id===x){const N=typeof b=="function"?b(_):b;return A.replace&&__(N)?N:{..._,...N}}return _}))},v=(x,b,A={replace:!1})=>{f(I=>I.map(_=>{if(_.id===x){const N=typeof b=="function"?b(_):b;return A.replace&&DV(N)?N:{..._,...N}}return _}))};return{getNodes:()=>e.getState().nodes.map(x=>({...x})),getNode:x=>c(x)?.internals.userNode,getInternalNode:c,getEdges:()=>{const{edges:x=[]}=e.getState();return x.map(b=>({...b}))},getEdge:x=>e.getState().edgeLookup.get(x),setNodes:d,setEdges:f,addNodes:x=>{const b=Array.isArray(x)?x:[x];n.nodeQueue.push(A=>[...A,...b])},addEdges:x=>{const b=Array.isArray(x)?x:[x];n.edgeQueue.push(A=>[...A,...b])},toObject:()=>{const{nodes:x=[],edges:b=[],transform:A}=e.getState(),[I,_,N]=A;return{nodes:x.map(M=>({...M})),edges:b.map(M=>({...M})),viewport:{x:I,y:_,zoom:N}}},deleteElements:async({nodes:x=[],edges:b=[]})=>{const{nodes:A,edges:I,onNodesDelete:_,onEdgesDelete:N,triggerNodeChanges:M,triggerEdgeChanges:U,onDelete:O,onBeforeDelete:L}=e.getState(),{nodes:H,edges:G}=await l9({nodesToRemove:x,edgesToRemove:b,nodes:A,edges:I,onBeforeDelete:L}),V=G.length>0,$=H.length>0;if(V){const ee=G.map(S_);N?.(G),U(ee)}if($){const ee=H.map(S_);_?.(H),M(ee)}return($||V)&&O?.({nodes:H,edges:G}),{deletedNodes:H,deletedEdges:G}},getIntersectingNodes:(x,b=!0,A)=>{const I=e_(x),_=I?x:g(x),N=A!==void 0;return _?(A||e.getState().nodes).filter(M=>{const U=e.getState().nodeLookup.get(M.id);if(U&&!I&&(M.id===x.id||!U.internals.positionAbsolute))return!1;const O=Yh(N?M:U),L=xg(O,_);return b&&L>0||L>=O.width*O.height||L>=_.width*_.height}):[]},isNodeIntersecting:(x,b,A=!0)=>{const _=e_(x)?x:g(x);if(!_)return!1;const N=xg(_,b);return A&&N>0||N>=_.width*_.height},updateNode:y,updateNodeData:(x,b,A={replace:!1})=>{y(x,I=>{const _=typeof b=="function"?b(I):b;return A.replace?{...I,data:_}:{...I,data:{...I.data,..._}}},A)},updateEdge:v,updateEdgeData:(x,b,A={replace:!1})=>{v(x,I=>{const _=typeof b=="function"?b(I):b;return A.replace?{...I,data:_}:{...I,data:{...I.data,..._}}},A)},getNodesBounds:x=>{const{nodeLookup:b,nodeOrigin:A}=e.getState();return i9(x,{nodeLookup:b,nodeOrigin:A})},getHandleConnections:({type:x,id:b,nodeId:A})=>Array.from(e.getState().connectionLookup.get(`${A}-${x}${b?`-${b}`:""}`)?.values()??[]),getNodeConnections:({type:x,handleId:b,nodeId:A})=>Array.from(e.getState().connectionLookup.get(`${A}${x?b?`-${x}-${b}`:`-${x}`:""}`)?.values()??[]),fitView:async x=>{const b=e.getState().fitViewResolver??f9();return e.setState({fitViewQueued:!0,fitViewOptions:x,fitViewResolver:b}),n.nodeQueue.push(A=>[...A]),b.promise}}},[]);return k.useMemo(()=>({...s,...t,viewportInitialized:r}),[r])}const I_=t=>t.selected,zV=typeof window<"u"?window:void 0;function FV({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=xn(),{deleteElements:r}=Bg(),s=Tg(t,{actInsideInputWithModifier:!1}),c=Tg(e,{target:zV});k.useEffect(()=>{if(s){const{edges:d,nodes:f}=n.getState();r({nodes:f.filter(I_),edges:d.filter(I_)}),n.setState({nodesSelectionActive:!1})}},[s]),k.useEffect(()=>{n.setState({multiSelectionActive:c})},[c])}function KV(t){const e=xn();k.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=cT(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Zs.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const KC={position:"absolute",width:"100%",height:"100%",top:0,left:0},GV=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function qV({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=ju.Free,zoomOnDoubleClick:d=!0,panOnDrag:f=!0,defaultViewport:g,translateExtent:y,minZoom:v,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:A=!0,children:I,noWheelClassName:_,noPanClassName:N,onViewportChange:M,isControlledViewport:U,paneClickDistance:O}){const L=xn(),H=k.useRef(null),{userSelectionActive:G,lib:V}=Rt(GV,Rn),$=Tg(b),ee=k.useRef();KV(H);const se=k.useCallback(ce=>{M?.({x:ce[0],y:ce[1],zoom:ce[2]}),U||L.setState({transform:ce})},[M,U]);return k.useEffect(()=>{if(H.current){ee.current=Q9({domNode:H.current,minZoom:v,maxZoom:x,translateExtent:y,viewport:g,paneClickDistance:O,onDraggingChange:W=>L.setState({paneDragging:W}),onPanZoomStart:(W,J)=>{const{onViewportChangeStart:P,onMoveStart:F}=L.getState();F?.(W,J),P?.(J)},onPanZoom:(W,J)=>{const{onViewportChange:P,onMove:F}=L.getState();F?.(W,J),P?.(J)},onPanZoomEnd:(W,J)=>{const{onViewportChangeEnd:P,onMoveEnd:F}=L.getState();F?.(W,J),P?.(J)}});const{x:ce,y:oe,zoom:he}=ee.current.getViewport();return L.setState({panZoom:ee.current,transform:[ce,oe,he],domNode:H.current.closest(".react-flow")}),()=>{ee.current?.destroy()}}},[]),k.useEffect(()=>{ee.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:c,zoomOnDoubleClick:d,panOnDrag:f,zoomActivationKeyPressed:$,preventScrolling:A,noPanClassName:N,userSelectionActive:G,noWheelClassName:_,lib:V,onTransformChange:se})},[t,e,n,r,s,c,d,f,$,A,N,G,_,V,se]),h.jsx("div",{className:"react-flow__renderer",ref:H,style:KC,children:I})}const $V=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function VV(){const{userSelectionActive:t,userSelectionRect:e}=Rt($V,Rn);return t&&e?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Gb=(t,e)=>n=>{n.target===e.current&&t?.(n)},YV=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function QV({isSelecting:t,selectionKeyPressed:e,selectionMode:n=bg.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:c,onSelectionEnd:d,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:y,onPaneMouseEnter:v,onPaneMouseMove:x,onPaneMouseLeave:b,children:A}){const I=xn(),{userSelectionActive:_,elementsSelectable:N,dragging:M,connectionInProgress:U}=Rt(YV,Rn),O=N&&(t||_),L=k.useRef(null),H=k.useRef(),G=k.useRef(new Set),V=k.useRef(new Set),$=k.useRef(!1),ee=k.useRef(!1),se=F=>{if($.current||U){$.current=!1;return}f?.(F),I.getState().resetSelectedElements(),I.setState({nodesSelectionActive:!1})},ce=F=>{if(Array.isArray(r)&&r?.includes(2)){F.preventDefault();return}g?.(F)},oe=y?F=>y(F):void 0,he=F=>{const{resetSelectedElements:Y,domNode:X}=I.getState();if(H.current=X?.getBoundingClientRect(),!N||!t||F.button!==0||F.target!==L.current||!H.current)return;F.target?.setPointerCapture?.(F.pointerId),ee.current=!0,$.current=!1;const{x:B,y:Q}=Ys(F.nativeEvent,H.current);Y(),I.setState({userSelectionRect:{width:0,height:0,startX:B,startY:Q,x:B,y:Q}}),c?.(F)},W=F=>{const{userSelectionRect:Y,transform:X,nodeLookup:B,edgeLookup:Q,connectionLookup:ie,triggerNodeChanges:ue,triggerEdgeChanges:me,defaultEdgeOptions:Oe}=I.getState();if(!H.current||!Y)return;$.current=!0;const{x:xe,y:le}=Ys(F.nativeEvent,H.current),{startX:Ce,startY:je}=Y,be={startX:Ce,startY:je,x:xe<Ce?xe:Ce,y:le<je?le:je,width:Math.abs(xe-Ce),height:Math.abs(le-je)},we=G.current,Ee=V.current;G.current=new Set(sT(B,be,X,n===bg.Partial,!0).map(Me=>Me.id)),V.current=new Set;const Pe=Oe?.selectable??!0;for(const Me of G.current){const lt=ie.get(Me);if(lt)for(const{edgeId:Mt}of lt.values()){const ge=Q.get(Mt);ge&&(ge.selectable??Pe)&&V.current.add(Mt)}}if(!t_(we,G.current)){const Me=Sh(B,G.current,!0);ue(Me)}if(!t_(Ee,V.current)){const Me=Sh(Q,V.current);me(Me)}I.setState({userSelectionRect:be,userSelectionActive:!0,nodesSelectionActive:!1})},J=F=>{if(F.button!==0||!ee.current)return;F.target?.releasePointerCapture?.(F.pointerId);const{userSelectionRect:Y}=I.getState();!_&&Y&&F.target===L.current&&se?.(F),I.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:G.current.size>0}),d?.(F),(e||s)&&($.current=!1),ee.current=!1},P=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:Gn(["react-flow__pane",{draggable:P,dragging:M,selection:t}]),onClick:O?void 0:Gb(se,L),onContextMenu:Gb(ce,L),onWheel:Gb(oe,L),onPointerEnter:O?void 0:v,onPointerDown:O?he:x,onPointerMove:O?W:x,onPointerUp:O?J:void 0,onPointerLeave:b,ref:L,style:KC,children:[A,h.jsx(VV,{})]})}function Qx({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:d,nodeLookup:f,onError:g}=e.getState(),y=f.get(t);if(!y){g?.("012",Zs.error012(t));return}e.setState({nodesSelectionActive:!1}),y.selected?(n||y.selected&&d)&&(c({nodes:[y],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function gP({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:c,nodeClickDistance:d}){const f=xn(),[g,y]=k.useState(!1),v=k.useRef();return k.useEffect(()=>{v.current=P9({getStoreItems:()=>f.getState(),onNodeMouseDown:x=>{Qx({id:x,store:f,nodeRef:t})},onDragStart:()=>{y(!0)},onDragStop:()=>{y(!1)}})},[]),k.useEffect(()=>{if(e)v.current?.destroy();else if(t.current)return v.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:c,nodeId:s,nodeClickDistance:d}),()=>{v.current?.destroy()}},[n,r,e,c,t,s]),g}const WV=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function pP(){const t=xn();return k.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:c,nodesDraggable:d,onError:f,updateNodePositions:g,nodeLookup:y,nodeOrigin:v}=t.getState(),x=new Map,b=WV(d),A=s?c[0]:5,I=s?c[1]:5,_=n.direction.x*A*n.factor,N=n.direction.y*I*n.factor;for(const[,M]of y){if(!b(M))continue;let U={x:M.internals.positionAbsolute.x+_,y:M.internals.positionAbsolute.y+N};s&&(U=Ug(U,c));const{position:O,positionAbsolute:L}=j1({nodeId:M.id,nextPosition:U,nodeLookup:y,nodeExtent:r,nodeOrigin:v,onError:f});M.position=O,M.internals.positionAbsolute=L,x.set(M.id,M)}g(x)},[])}const fT=k.createContext(null),XV=fT.Provider;fT.Consumer;const yP=()=>k.useContext(fT),JV=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),ZV=(t,e,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:c,connection:d}=r,{fromHandle:f,toHandle:g,isValid:y}=d,v=g?.nodeId===t&&g?.id===e&&g?.type===n;return{connectingFrom:f?.nodeId===t&&f?.id===e&&f?.type===n,connectingTo:v,clickConnecting:s?.nodeId===t&&s?.id===e&&s?.type===n,isPossibleEndHandle:c===$h.Strict?f?.type!==n:t!==f?.nodeId||e!==f?.id,connectionInProcess:!!f,clickConnectionInProcess:!!s,valid:v&&y}};function e7({type:t="source",position:e=Ze.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:d,onConnect:f,children:g,className:y,onMouseDown:v,onTouchStart:x,...b},A){const I=d||null,_=t==="target",N=xn(),M=yP(),{connectOnClick:U,noPanClassName:O,rfId:L}=Rt(JV,Rn),{connectingFrom:H,connectingTo:G,clickConnecting:V,isPossibleEndHandle:$,connectionInProcess:ee,clickConnectionInProcess:se,valid:ce}=Rt(ZV(M,I,t),Rn);M||N.getState().onError?.("010",Zs.error010());const oe=J=>{const{defaultEdgeOptions:P,onConnect:F,hasDefaultEdges:Y}=N.getState(),X={...P,...J};if(Y){const{edges:B,setEdges:Q}=N.getState();Q(w9(X,B))}F?.(X),f?.(X)},he=J=>{if(!M)return;const P=G1(J.nativeEvent);if(s&&(P&&J.button===0||!P)){const F=N.getState();Yx.onPointerDown(J.nativeEvent,{handleDomNode:J.currentTarget,autoPanOnConnect:F.autoPanOnConnect,connectionMode:F.connectionMode,connectionRadius:F.connectionRadius,domNode:F.domNode,nodeLookup:F.nodeLookup,lib:F.lib,isTarget:_,handleId:I,nodeId:M,flowId:F.rfId,panBy:F.panBy,cancelConnection:F.cancelConnection,onConnectStart:F.onConnectStart,onConnectEnd:F.onConnectEnd,updateConnection:F.updateConnection,onConnect:oe,isValidConnection:n||F.isValidConnection,getTransform:()=>N.getState().transform,getFromHandle:()=>N.getState().connection.fromHandle,autoPanSpeed:F.autoPanSpeed,dragThreshold:F.connectionDragThreshold})}P?v?.(J):x?.(J)},W=J=>{const{onClickConnectStart:P,onClickConnectEnd:F,connectionClickStartHandle:Y,connectionMode:X,isValidConnection:B,lib:Q,rfId:ie,nodeLookup:ue,connection:me}=N.getState();if(!M||!Y&&!s)return;if(!Y){P?.(J.nativeEvent,{nodeId:M,handleId:I,handleType:t}),N.setState({connectionClickStartHandle:{nodeId:M,type:t,id:I}});return}const Oe=F1(J.target),xe=n||B,{connection:le,isValid:Ce}=Yx.isValid(J.nativeEvent,{handle:{nodeId:M,id:I,type:t},connectionMode:X,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:xe,flowId:ie,doc:Oe,lib:Q,nodeLookup:ue});Ce&&le&&oe(le);const je=structuredClone(me);delete je.inProgress,je.toPosition=je.toHandle?je.toHandle.position:null,F?.(J,je),N.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":I,"data-nodeid":M,"data-handlepos":e,"data-id":`${L}-${M}-${I}-${t}`,className:Gn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,y,{source:!_,target:_,connectable:r,connectablestart:s,connectableend:c,clickconnecting:V,connectingfrom:H,connectingto:G,valid:ce,connectionindicator:r&&(!ee||$)&&(ee||se?c:s)}]),onMouseDown:he,onTouchStart:he,onClick:U?W:void 0,ref:A,...b,children:g})}const Xh=k.memo(fP(e7));function t7({data:t,isConnectable:e,sourcePosition:n=Ze.Bottom}){return h.jsxs(h.Fragment,{children:[t?.label,h.jsx(Xh,{type:"source",position:n,isConnectable:e})]})}function n7({data:t,isConnectable:e,targetPosition:n=Ze.Top,sourcePosition:r=Ze.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(Xh,{type:"target",position:n,isConnectable:e}),t?.label,h.jsx(Xh,{type:"source",position:r,isConnectable:e})]})}function r7(){return null}function o7({data:t,isConnectable:e,targetPosition:n=Ze.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(Xh,{type:"target",position:n,isConnectable:e}),t?.label]})}const Hv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},R_={input:t7,default:n7,output:o7,group:r7};function i7(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const s7=t=>{const{width:e,height:n,x:r,y:s}=Lg(t.nodeLookup,{filter:c=>!!c.selected});return{width:os(e)?e:null,height:os(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${s}px)`}};function a7({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=xn(),{width:s,height:c,transformString:d,userSelectionActive:f}=Rt(s7,Rn),g=pP(),y=k.useRef(null);if(k.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),gP({nodeRef:y}),f||!s||!c)return null;const v=t?b=>{const A=r.getState().nodes.filter(I=>I.selected);t(b,A)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(Hv,b.key)&&(b.preventDefault(),g({direction:Hv[b.key],factor:b.shiftKey?4:1}))};return h.jsx("div",{className:Gn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d},children:h.jsx("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:n?void 0:-1,onKeyDown:n?void 0:x,style:{width:s,height:c}})})}const N_=typeof window<"u"?window:void 0,c7=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function vP({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:d,paneClickDistance:f,deleteKeyCode:g,selectionKeyCode:y,selectionOnDrag:v,selectionMode:x,onSelectionStart:b,onSelectionEnd:A,multiSelectionKeyCode:I,panActivationKeyCode:_,zoomActivationKeyCode:N,elementsSelectable:M,zoomOnScroll:U,zoomOnPinch:O,panOnScroll:L,panOnScrollSpeed:H,panOnScrollMode:G,zoomOnDoubleClick:V,panOnDrag:$,defaultViewport:ee,translateExtent:se,minZoom:ce,maxZoom:oe,preventScrolling:he,onSelectionContextMenu:W,noWheelClassName:J,noPanClassName:P,disableKeyboardA11y:F,onViewportChange:Y,isControlledViewport:X}){const{nodesSelectionActive:B,userSelectionActive:Q}=Rt(c7),ie=Tg(y,{target:N_}),ue=Tg(_,{target:N_}),me=ue||$,Oe=ue||L,xe=v&&me!==!0,le=ie||Q||xe;return FV({deleteKeyCode:g,multiSelectionKeyCode:I}),h.jsx(qV,{onPaneContextMenu:c,elementsSelectable:M,zoomOnScroll:U,zoomOnPinch:O,panOnScroll:Oe,panOnScrollSpeed:H,panOnScrollMode:G,zoomOnDoubleClick:V,panOnDrag:!ie&&me,defaultViewport:ee,translateExtent:se,minZoom:ce,maxZoom:oe,zoomActivationKeyCode:N,preventScrolling:he,noWheelClassName:J,noPanClassName:P,onViewportChange:Y,isControlledViewport:X,paneClickDistance:f,children:h.jsxs(QV,{onSelectionStart:b,onSelectionEnd:A,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:d,panOnDrag:me,isSelecting:!!le,selectionMode:x,selectionKeyPressed:ie,selectionOnDrag:xe,children:[t,B&&h.jsx(a7,{onSelectionContextMenu:W,noPanClassName:P,disableKeyboardA11y:F})]})})}vP.displayName="FlowRenderer";const l7=k.memo(vP),u7=t=>e=>t?sT(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function d7(t){return Rt(k.useCallback(u7(t),[t]),Rn)}const h7=t=>t.updateNodeInternals;function f7(){const t=Rt(h7),[e]=k.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const c=s.target.getAttribute("data-id");r.set(c,{id:c,nodeElement:s.target,force:!0})}),t(r)}));return k.useEffect(()=>()=>{e?.disconnect()},[e]),e}function m7({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const s=xn(),c=k.useRef(null),d=k.useRef(null),f=k.useRef(t.sourcePosition),g=k.useRef(t.targetPosition),y=k.useRef(e),v=n&&!!t.internals.handleBounds;return k.useEffect(()=>{c.current&&!t.hidden&&(!v||d.current!==c.current)&&(d.current&&r?.unobserve(d.current),r?.observe(c.current),d.current=c.current)},[v,t.hidden]),k.useEffect(()=>()=>{d.current&&(r?.unobserve(d.current),d.current=null)},[]),k.useEffect(()=>{if(c.current){const x=y.current!==e,b=f.current!==t.sourcePosition,A=g.current!==t.targetPosition;(x||b||A)&&(y.current=e,f.current=t.sourcePosition,g.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:c.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),c}function g7({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:c,onDoubleClick:d,nodesDraggable:f,elementsSelectable:g,nodesConnectable:y,nodesFocusable:v,resizeObserver:x,noDragClassName:b,noPanClassName:A,disableKeyboardA11y:I,rfId:_,nodeTypes:N,nodeClickDistance:M,onError:U}){const{node:O,internals:L,isParent:H}=Rt(Ce=>{const je=Ce.nodeLookup.get(t),be=Ce.parentLookup.has(t);return{node:je,internals:je.internals,isParent:be}},Rn);let G=O.type||"default",V=N?.[G]||R_[G];V===void 0&&(U?.("003",Zs.error003(G)),G="default",V=N?.default||R_.default);const $=!!(O.draggable||f&&typeof O.draggable>"u"),ee=!!(O.selectable||g&&typeof O.selectable>"u"),se=!!(O.connectable||y&&typeof O.connectable>"u"),ce=!!(O.focusable||v&&typeof O.focusable>"u"),oe=xn(),he=B1(O),W=m7({node:O,nodeType:G,hasDimensions:he,resizeObserver:x}),J=gP({nodeRef:W,disabled:O.hidden||!$,noDragClassName:b,handleSelector:O.dragHandle,nodeId:t,isSelectable:ee,nodeClickDistance:M}),P=pP();if(O.hidden)return null;const F=ic(O),Y=i7(O),X=ee||$||e||n||r||s,B=n?Ce=>n(Ce,{...L.userNode}):void 0,Q=r?Ce=>r(Ce,{...L.userNode}):void 0,ie=s?Ce=>s(Ce,{...L.userNode}):void 0,ue=c?Ce=>c(Ce,{...L.userNode}):void 0,me=d?Ce=>d(Ce,{...L.userNode}):void 0,Oe=Ce=>{const{selectNodesOnDrag:je,nodeDragThreshold:be}=oe.getState();ee&&(!je||!$||be>0)&&Qx({id:t,store:oe,nodeRef:W}),e&&e(Ce,{...L.userNode})},xe=Ce=>{if(!(K1(Ce.nativeEvent)||I)){if(N1.includes(Ce.key)&&ee){const je=Ce.key==="Escape";Qx({id:t,store:oe,unselect:je,nodeRef:W})}else if($&&O.selected&&Object.prototype.hasOwnProperty.call(Hv,Ce.key)){Ce.preventDefault();const{ariaLabelConfig:je}=oe.getState();oe.setState({ariaLiveMessage:je["node.a11yDescription.ariaLiveMessage"]({direction:Ce.key.replace("Arrow","").toLowerCase(),x:~~L.positionAbsolute.x,y:~~L.positionAbsolute.y})}),P({direction:Hv[Ce.key],factor:Ce.shiftKey?4:1})}}},le=()=>{if(I||!W.current?.matches(":focus-visible"))return;const{transform:Ce,width:je,height:be,autoPanOnNodeFocus:we,setCenter:Ee}=oe.getState();if(!we)return;sT(new Map([[t,O]]),{x:0,y:0,width:je,height:be},Ce,!0).length>0||Ee(O.position.x+F.width/2,O.position.y+F.height/2,{zoom:Ce[2]})};return h.jsx("div",{className:Gn(["react-flow__node",`react-flow__node-${G}`,{[A]:$},O.className,{selected:O.selected,selectable:ee,parent:H,draggable:$,dragging:J}]),ref:W,style:{zIndex:L.z,transform:`translate(${L.positionAbsolute.x}px,${L.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:he?"visible":"hidden",...O.style,...Y},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:B,onMouseMove:Q,onMouseLeave:ie,onContextMenu:ue,onClick:Oe,onDoubleClick:me,onKeyDown:ce?xe:void 0,tabIndex:ce?0:void 0,onFocus:ce?le:void 0,role:O.ariaRole??(ce?"group":void 0),"aria-roledescription":"node","aria-describedby":I?void 0:`${aP}-${_}`,"aria-label":O.ariaLabel,...O.domAttributes,children:h.jsx(XV,{value:t,children:h.jsx(V,{id:t,data:O.data,type:G,positionAbsoluteX:L.positionAbsolute.x,positionAbsoluteY:L.positionAbsolute.y,selected:O.selected??!1,selectable:ee,draggable:$,deletable:O.deletable??!0,isConnectable:se,sourcePosition:O.sourcePosition,targetPosition:O.targetPosition,dragging:J,dragHandle:O.dragHandle,zIndex:L.z,parentId:O.parentId,...F})})})}const p7=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function CP(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:c}=Rt(p7,Rn),d=d7(t.onlyRenderVisibleElements),f=f7();return h.jsx("div",{className:"react-flow__nodes",style:KC,children:d.map(g=>h.jsx(g7,{id:g,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:f,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:t.nodeClickDistance,onError:c},g))})}CP.displayName="NodeRenderer";const y7=k.memo(CP);function v7(t){return Rt(k.useCallback(n=>{if(!t)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const c=n.nodeLookup.get(s.source),d=n.nodeLookup.get(s.target);c&&d&&y9({sourceNode:c,targetNode:d,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[t]),Rn)}const C7=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return h.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},w7=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return h.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},O_={[jv.Arrow]:C7,[jv.ArrowClosed]:w7};function b7(t){const e=xn();return k.useMemo(()=>Object.prototype.hasOwnProperty.call(O_,t)?O_[t]:(e.getState().onError?.("009",Zs.error009(t)),null),[t])}const x7=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:d,orient:f="auto-start-reverse"})=>{const g=b7(e);return g?h.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:f,refX:"0",refY:"0",children:h.jsx(g,{color:n,strokeWidth:d})}):null},wP=({defaultColor:t,rfId:e})=>{const n=Rt(c=>c.edges),r=Rt(c=>c.defaultEdgeOptions),s=k.useMemo(()=>T9(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return s.length?h.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:h.jsx("defs",{children:s.map(c=>h.jsx(x7,{id:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,strokeWidth:c.strokeWidth,orient:c.orient},c.id))})}):null};wP.displayName="MarkerDefinitions";var E7=k.memo(wP);function bP({x:t,y:e,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:c,labelBgPadding:d=[2,4],labelBgBorderRadius:f=2,children:g,className:y,...v}){const[x,b]=k.useState({x:1,y:0,width:0,height:0}),A=Gn(["react-flow__edge-textwrapper",y]),I=k.useRef(null);return k.useEffect(()=>{if(I.current){const _=I.current.getBBox();b({x:_.x,y:_.y,width:_.width,height:_.height})}},[n]),n?h.jsxs("g",{transform:`translate(${t-x.width/2} ${e-x.height/2})`,className:A,visibility:x.width?"visible":"hidden",...v,children:[s&&h.jsx("rect",{width:x.width+2*d[0],x:-d[0],y:-d[1],height:x.height+2*d[1],className:"react-flow__edge-textbg",style:c,rx:f,ry:f}),h.jsx("text",{className:"react-flow__edge-text",y:x.height/2,dy:"0.3em",ref:I,style:r,children:n}),g]}):null}bP.displayName="EdgeText";const A7=k.memo(bP);function GC({path:t,labelX:e,labelY:n,label:r,labelStyle:s,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g,interactionWidth:y=20,...v}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{...v,d:t,fill:"none",className:Gn(["react-flow__edge-path",v.className])}),y?h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}):null,r&&os(e)&&os(n)?h.jsx(A7,{x:e,y:n,label:r,labelStyle:s,labelShowBg:c,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:g}):null]})}function M_({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===Ze.Left||t===Ze.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function xP({sourceX:t,sourceY:e,sourcePosition:n=Ze.Bottom,targetX:r,targetY:s,targetPosition:c=Ze.Top}){const[d,f]=M_({pos:n,x1:t,y1:e,x2:r,y2:s}),[g,y]=M_({pos:c,x1:r,y1:s,x2:t,y2:e}),[v,x,b,A]=q1({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:d,sourceControlY:f,targetControlX:g,targetControlY:y});return[`M${t},${e} C${d},${f} ${g},${y} ${r},${s}`,v,x,b,A]}function EP(t){return k.memo(({id:e,sourceX:n,sourceY:r,targetX:s,targetY:c,sourcePosition:d,targetPosition:f,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:A,style:I,markerEnd:_,markerStart:N,interactionWidth:M})=>{const[U,O,L]=xP({sourceX:n,sourceY:r,sourcePosition:d,targetX:s,targetY:c,targetPosition:f}),H=t.isInternal?void 0:e;return h.jsx(GC,{id:H,path:U,labelX:O,labelY:L,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:A,style:I,markerEnd:_,markerStart:N,interactionWidth:M})})}const T7=EP({isInternal:!1}),AP=EP({isInternal:!0});T7.displayName="SimpleBezierEdge";AP.displayName="SimpleBezierEdgeInternal";function TP(t){return k.memo(({id:e,sourceX:n,sourceY:r,targetX:s,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:x,style:b,sourcePosition:A=Ze.Bottom,targetPosition:I=Ze.Top,markerEnd:_,markerStart:N,pathOptions:M,interactionWidth:U})=>{const[O,L,H]=qx({sourceX:n,sourceY:r,sourcePosition:A,targetX:s,targetY:c,targetPosition:I,borderRadius:M?.borderRadius,offset:M?.offset,stepPosition:M?.stepPosition}),G=t.isInternal?void 0:e;return h.jsx(GC,{id:G,path:O,labelX:L,labelY:H,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:x,style:b,markerEnd:_,markerStart:N,interactionWidth:U})})}const SP=TP({isInternal:!1}),_P=TP({isInternal:!0});SP.displayName="SmoothStepEdge";_P.displayName="SmoothStepEdgeInternal";function kP(t){return k.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return h.jsx(SP,{...n,id:r,pathOptions:k.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const S7=kP({isInternal:!1}),IP=kP({isInternal:!0});S7.displayName="StepEdge";IP.displayName="StepEdgeInternal";function RP(t){return k.memo(({id:e,sourceX:n,sourceY:r,targetX:s,targetY:c,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:x,style:b,markerEnd:A,markerStart:I,interactionWidth:_})=>{const[N,M,U]=Y1({sourceX:n,sourceY:r,targetX:s,targetY:c}),O=t.isInternal?void 0:e;return h.jsx(GC,{id:O,path:N,labelX:M,labelY:U,label:d,labelStyle:f,labelShowBg:g,labelBgStyle:y,labelBgPadding:v,labelBgBorderRadius:x,style:b,markerEnd:A,markerStart:I,interactionWidth:_})})}const _7=RP({isInternal:!1}),NP=RP({isInternal:!0});_7.displayName="StraightEdge";NP.displayName="StraightEdgeInternal";function OP(t){return k.memo(({id:e,sourceX:n,sourceY:r,targetX:s,targetY:c,sourcePosition:d=Ze.Bottom,targetPosition:f=Ze.Top,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:A,style:I,markerEnd:_,markerStart:N,pathOptions:M,interactionWidth:U})=>{const[O,L,H]=$1({sourceX:n,sourceY:r,sourcePosition:d,targetX:s,targetY:c,targetPosition:f,curvature:M?.curvature}),G=t.isInternal?void 0:e;return h.jsx(GC,{id:G,path:O,labelX:L,labelY:H,label:g,labelStyle:y,labelShowBg:v,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:A,style:I,markerEnd:_,markerStart:N,interactionWidth:U})})}const k7=OP({isInternal:!1}),MP=OP({isInternal:!0});k7.displayName="BezierEdge";MP.displayName="BezierEdgeInternal";const P_={default:MP,straight:NP,step:IP,smoothstep:_P,simplebezier:AP},D_={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},I7=(t,e,n)=>n===Ze.Left?t-e:n===Ze.Right?t+e:t,R7=(t,e,n)=>n===Ze.Top?t-e:n===Ze.Bottom?t+e:t,j_="react-flow__edgeupdater";function L_({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:c,onMouseOut:d,type:f}){return h.jsx("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:d,className:Gn([j_,`${j_}-${f}`]),cx:I7(e,r,t),cy:R7(n,r,t),r,stroke:"transparent",fill:"transparent"})}function N7({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:s,targetX:c,targetY:d,sourcePosition:f,targetPosition:g,onReconnect:y,onReconnectStart:v,onReconnectEnd:x,setReconnecting:b,setUpdateHover:A}){const I=xn(),_=(L,H)=>{if(L.button!==0)return;const{autoPanOnConnect:G,domNode:V,isValidConnection:$,connectionMode:ee,connectionRadius:se,lib:ce,onConnectStart:oe,onConnectEnd:he,cancelConnection:W,nodeLookup:J,rfId:P,panBy:F,updateConnection:Y}=I.getState(),X=H.type==="target",B=(ue,me)=>{b(!1),x?.(ue,n,H.type,me)},Q=ue=>y?.(n,ue),ie=(ue,me)=>{b(!0),v?.(L,n,H.type),oe?.(ue,me)};Yx.onPointerDown(L.nativeEvent,{autoPanOnConnect:G,connectionMode:ee,connectionRadius:se,domNode:V,handleId:H.id,nodeId:H.nodeId,nodeLookup:J,isTarget:X,edgeUpdaterType:H.type,lib:ce,flowId:P,cancelConnection:W,panBy:F,isValidConnection:$,onConnect:Q,onConnectStart:ie,onConnectEnd:he,onReconnectEnd:B,updateConnection:Y,getTransform:()=>I.getState().transform,getFromHandle:()=>I.getState().connection.fromHandle,dragThreshold:I.getState().connectionDragThreshold,handleDomNode:L.currentTarget})},N=L=>_(L,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),M=L=>_(L,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),U=()=>A(!0),O=()=>A(!1);return h.jsxs(h.Fragment,{children:[(t===!0||t==="source")&&h.jsx(L_,{position:f,centerX:r,centerY:s,radius:e,onMouseDown:N,onMouseEnter:U,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&h.jsx(L_,{position:g,centerX:c,centerY:d,radius:e,onMouseDown:M,onMouseEnter:U,onMouseOut:O,type:"target"})]})}function O7({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:y,reconnectRadius:v,onReconnect:x,onReconnectStart:b,onReconnectEnd:A,rfId:I,edgeTypes:_,noPanClassName:N,onError:M,disableKeyboardA11y:U}){let O=Rt(Ee=>Ee.edgeLookup.get(t));const L=Rt(Ee=>Ee.defaultEdgeOptions);O=L?{...L,...O}:O;let H=O.type||"default",G=_?.[H]||P_[H];G===void 0&&(M?.("011",Zs.error011(H)),H="default",G=_?.default||P_.default);const V=!!(O.focusable||e&&typeof O.focusable>"u"),$=typeof x<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),ee=!!(O.selectable||r&&typeof O.selectable>"u"),se=k.useRef(null),[ce,oe]=k.useState(!1),[he,W]=k.useState(!1),J=xn(),{zIndex:P,sourceX:F,sourceY:Y,targetX:X,targetY:B,sourcePosition:Q,targetPosition:ie}=Rt(k.useCallback(Ee=>{const Pe=Ee.nodeLookup.get(O.source),Me=Ee.nodeLookup.get(O.target);if(!Pe||!Me)return{zIndex:O.zIndex,...D_};const lt=A9({id:t,sourceNode:Pe,targetNode:Me,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:Ee.connectionMode,onError:M});return{zIndex:p9({selected:O.selected,zIndex:O.zIndex,sourceNode:Pe,targetNode:Me,elevateOnSelect:Ee.elevateEdgesOnSelect}),...lt||D_}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),Rn),ue=k.useMemo(()=>O.markerStart?`url('#${$x(O.markerStart,I)}')`:void 0,[O.markerStart,I]),me=k.useMemo(()=>O.markerEnd?`url('#${$x(O.markerEnd,I)}')`:void 0,[O.markerEnd,I]);if(O.hidden||F===null||Y===null||X===null||B===null)return null;const Oe=Ee=>{const{addSelectedEdges:Pe,unselectNodesAndEdges:Me,multiSelectionActive:lt}=J.getState();ee&&(J.setState({nodesSelectionActive:!1}),O.selected&&lt?(Me({nodes:[],edges:[O]}),se.current?.blur()):Pe([t])),s&&s(Ee,O)},xe=c?Ee=>{c(Ee,{...O})}:void 0,le=d?Ee=>{d(Ee,{...O})}:void 0,Ce=f?Ee=>{f(Ee,{...O})}:void 0,je=g?Ee=>{g(Ee,{...O})}:void 0,be=y?Ee=>{y(Ee,{...O})}:void 0,we=Ee=>{if(!U&&N1.includes(Ee.key)&&ee){const{unselectNodesAndEdges:Pe,addSelectedEdges:Me}=J.getState();Ee.key==="Escape"?(se.current?.blur(),Pe({edges:[O]})):Me([t])}};return h.jsx("svg",{style:{zIndex:P},children:h.jsxs("g",{className:Gn(["react-flow__edge",`react-flow__edge-${H}`,O.className,N,{selected:O.selected,animated:O.animated,inactive:!ee&&!s,updating:ce,selectable:ee}]),onClick:Oe,onDoubleClick:xe,onContextMenu:le,onMouseEnter:Ce,onMouseMove:je,onMouseLeave:be,onKeyDown:V?we:void 0,tabIndex:V?0:void 0,role:O.ariaRole??(V?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":V?`${cP}-${I}`:void 0,ref:se,...O.domAttributes,children:[!he&&h.jsx(G,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:ee,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:F,sourceY:Y,targetX:X,targetY:B,sourcePosition:Q,targetPosition:ie,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:ue,markerEnd:me,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),$&&h.jsx(N7,{edge:O,isReconnectable:$,reconnectRadius:v,onReconnect:x,onReconnectStart:b,onReconnectEnd:A,sourceX:F,sourceY:Y,targetX:X,targetY:B,sourcePosition:Q,targetPosition:ie,setUpdateHover:oe,setReconnecting:W})]})})}const M7=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function PP({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:c,onEdgeContextMenu:d,onEdgeMouseEnter:f,onEdgeMouseMove:g,onEdgeMouseLeave:y,onEdgeClick:v,reconnectRadius:x,onEdgeDoubleClick:b,onReconnectStart:A,onReconnectEnd:I,disableKeyboardA11y:_}){const{edgesFocusable:N,edgesReconnectable:M,elementsSelectable:U,onError:O}=Rt(M7,Rn),L=v7(e);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(E7,{defaultColor:t,rfId:n}),L.map(H=>h.jsx(O7,{id:H,edgesFocusable:N,edgesReconnectable:M,elementsSelectable:U,noPanClassName:s,onReconnect:c,onContextMenu:d,onMouseEnter:f,onMouseMove:g,onMouseLeave:y,onClick:v,reconnectRadius:x,onDoubleClick:b,onReconnectStart:A,onReconnectEnd:I,rfId:n,onError:O,edgeTypes:r,disableKeyboardA11y:_},H))]})}PP.displayName="EdgeRenderer";const P7=k.memo(PP),D7=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function j7({children:t}){const e=Rt(D7);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function L7(t){const e=Bg(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const U7=t=>t.panZoom?.syncViewport;function H7(t){const e=Rt(U7),n=xn();return k.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function B7(t){return t.connection.inProgress?{...t.connection,to:Hg(t.connection.to,t.transform)}:{...t.connection}}function z7(t){return B7}function F7(t){const e=z7();return Rt(e,Rn)}const K7=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function G7({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:s,width:c,height:d,isValid:f,inProgress:g}=Rt(K7,Rn);return!(c&&s&&g)?null:h.jsx("svg",{style:t,width:c,height:d,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:Gn(["react-flow__connection",P1(f)]),children:h.jsx(DP,{style:e,type:n,CustomComponent:r,isValid:f})})})}const DP=({style:t,type:e=yl.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:c,fromNode:d,fromHandle:f,fromPosition:g,to:y,toNode:v,toHandle:x,toPosition:b}=F7();if(!s)return;if(n)return h.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:d,fromHandle:f,fromX:c.x,fromY:c.y,toX:y.x,toY:y.y,fromPosition:g,toPosition:b,connectionStatus:P1(r),toNode:v,toHandle:x});let A="";const I={sourceX:c.x,sourceY:c.y,sourcePosition:g,targetX:y.x,targetY:y.y,targetPosition:b};switch(e){case yl.Bezier:[A]=$1(I);break;case yl.SimpleBezier:[A]=xP(I);break;case yl.Step:[A]=qx({...I,borderRadius:0});break;case yl.SmoothStep:[A]=qx(I);break;default:[A]=Y1(I)}return h.jsx("path",{d:A,fill:"none",className:"react-flow__connection-path",style:t})};DP.displayName="ConnectionLine";const q7={};function U_(t=q7){k.useRef(t),xn(),k.useEffect(()=>{},[t])}function $7(){xn(),k.useRef(!1),k.useEffect(()=>{},[])}function jP({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:v,onSelectionContextMenu:x,onSelectionStart:b,onSelectionEnd:A,connectionLineType:I,connectionLineStyle:_,connectionLineComponent:N,connectionLineContainerStyle:M,selectionKeyCode:U,selectionOnDrag:O,selectionMode:L,multiSelectionKeyCode:H,panActivationKeyCode:G,zoomActivationKeyCode:V,deleteKeyCode:$,onlyRenderVisibleElements:ee,elementsSelectable:se,defaultViewport:ce,translateExtent:oe,minZoom:he,maxZoom:W,preventScrolling:J,defaultMarkerColor:P,zoomOnScroll:F,zoomOnPinch:Y,panOnScroll:X,panOnScrollSpeed:B,panOnScrollMode:Q,zoomOnDoubleClick:ie,panOnDrag:ue,onPaneClick:me,onPaneMouseEnter:Oe,onPaneMouseMove:xe,onPaneMouseLeave:le,onPaneScroll:Ce,onPaneContextMenu:je,paneClickDistance:be,nodeClickDistance:we,onEdgeContextMenu:Ee,onEdgeMouseEnter:Pe,onEdgeMouseMove:Me,onEdgeMouseLeave:lt,reconnectRadius:Mt,onReconnect:ge,onReconnectStart:Be,onReconnectEnd:Xe,noDragClassName:it,noWheelClassName:ze,noPanClassName:tt,disableKeyboardA11y:mt,nodeExtent:Ft,rfId:Hr,viewport:wt,onViewportChange:ut}){return U_(t),U_(e),$7(),L7(n),H7(wt),h.jsx(l7,{onPaneClick:me,onPaneMouseEnter:Oe,onPaneMouseMove:xe,onPaneMouseLeave:le,onPaneContextMenu:je,onPaneScroll:Ce,paneClickDistance:be,deleteKeyCode:$,selectionKeyCode:U,selectionOnDrag:O,selectionMode:L,onSelectionStart:b,onSelectionEnd:A,multiSelectionKeyCode:H,panActivationKeyCode:G,zoomActivationKeyCode:V,elementsSelectable:se,zoomOnScroll:F,zoomOnPinch:Y,zoomOnDoubleClick:ie,panOnScroll:X,panOnScrollSpeed:B,panOnScrollMode:Q,panOnDrag:ue,defaultViewport:ce,translateExtent:oe,minZoom:he,maxZoom:W,onSelectionContextMenu:x,preventScrolling:J,noDragClassName:it,noWheelClassName:ze,noPanClassName:tt,disableKeyboardA11y:mt,onViewportChange:ut,isControlledViewport:!!wt,children:h.jsxs(j7,{children:[h.jsx(P7,{edgeTypes:e,onEdgeClick:s,onEdgeDoubleClick:d,onReconnect:ge,onReconnectStart:Be,onReconnectEnd:Xe,onlyRenderVisibleElements:ee,onEdgeContextMenu:Ee,onEdgeMouseEnter:Pe,onEdgeMouseMove:Me,onEdgeMouseLeave:lt,reconnectRadius:Mt,defaultMarkerColor:P,noPanClassName:tt,disableKeyboardA11y:mt,rfId:Hr}),h.jsx(G7,{style:_,type:I,component:N,containerStyle:M}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(y7,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:c,onNodeMouseEnter:f,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:v,nodeClickDistance:we,onlyRenderVisibleElements:ee,noPanClassName:tt,noDragClassName:it,disableKeyboardA11y:mt,nodeExtent:Ft,rfId:Hr}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}jP.displayName="GraphView";const V7=k.memo(jP),H_=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:s,height:c,fitView:d,fitViewOptions:f,minZoom:g=.5,maxZoom:y=2,nodeOrigin:v,nodeExtent:x}={})=>{const b=new Map,A=new Map,I=new Map,_=new Map,N=r??e??[],M=n??t??[],U=v??[0,0],O=x??wg;W1(I,_,N);const L=Vx(M,b,A,{nodeOrigin:U,nodeExtent:O,elevateNodesOnSelect:!1});let H=[0,0,1];if(d&&s&&c){const G=Lg(b,{filter:se=>!!((se.width||se.initialWidth)&&(se.height||se.initialHeight))}),{x:V,y:$,zoom:ee}=aT(G,s,c,g,y,f?.padding??.1);H=[V,$,ee]}return{rfId:"1",width:0,height:0,transform:H,nodes:M,nodesInitialized:L,nodeLookup:b,parentLookup:A,edges:N,edgeLookup:_,connectionLookup:I,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:g,maxZoom:y,translateExtent:wg,nodeExtent:O,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:$h.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:U,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:d??!1,fitViewOptions:f,fitViewResolver:null,connection:{...M1},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:u9,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:O1}},Y7=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:s,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:y,nodeOrigin:v,nodeExtent:x})=>mV((b,A)=>{async function I(){const{nodeLookup:_,panZoom:N,fitViewOptions:M,fitViewResolver:U,width:O,height:L,minZoom:H,maxZoom:G}=A();N&&(await c9({nodes:_,width:O,height:L,panZoom:N,minZoom:H,maxZoom:G},M),U?.resolve(!0),b({fitViewResolver:null}))}return{...H_({nodes:t,edges:e,width:s,height:c,fitView:d,fitViewOptions:f,minZoom:g,maxZoom:y,nodeOrigin:v,nodeExtent:x,defaultNodes:n,defaultEdges:r}),setNodes:_=>{const{nodeLookup:N,parentLookup:M,nodeOrigin:U,elevateNodesOnSelect:O,fitViewQueued:L}=A(),H=Vx(_,N,M,{nodeOrigin:U,nodeExtent:x,elevateNodesOnSelect:O,checkEquality:!0});L&&H?(I(),b({nodes:_,nodesInitialized:H,fitViewQueued:!1,fitViewOptions:void 0})):b({nodes:_,nodesInitialized:H})},setEdges:_=>{const{connectionLookup:N,edgeLookup:M}=A();W1(N,M,_),b({edges:_})},setDefaultNodesAndEdges:(_,N)=>{if(_){const{setNodes:M}=A();M(_),b({hasDefaultNodes:!0})}if(N){const{setEdges:M}=A();M(N),b({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:N,nodeLookup:M,parentLookup:U,domNode:O,nodeOrigin:L,nodeExtent:H,debug:G,fitViewQueued:V}=A(),{changes:$,updatedInternals:ee}=R9(_,M,U,O,L,H);ee&&(_9(M,U,{nodeOrigin:L,nodeExtent:H}),V?(I(),b({fitViewQueued:!1,fitViewOptions:void 0})):b({}),$?.length>0&&(G&&console.log("React Flow: trigger node changes",$),N?.($)))},updateNodePositions:(_,N=!1)=>{const M=[],U=[],{nodeLookup:O,triggerNodeChanges:L}=A();for(const[H,G]of _){const V=O.get(H),$=!!(V?.expandParent&&V?.parentId&&G?.position),ee={id:H,type:"position",position:$?{x:Math.max(0,G.position.x),y:Math.max(0,G.position.y)}:G.position,dragging:N};$&&V.parentId&&M.push({id:H,parentId:V.parentId,rect:{...G.internals.positionAbsolute,width:G.measured.width??0,height:G.measured.height??0}}),U.push(ee)}if(M.length>0){const{parentLookup:H,nodeOrigin:G}=A(),V=hT(M,O,H,G);U.push(...V)}L(U)},triggerNodeChanges:_=>{const{onNodesChange:N,setNodes:M,nodes:U,hasDefaultNodes:O,debug:L}=A();if(_?.length){if(O){const H=dP(_,U);M(H)}L&&console.log("React Flow: trigger node changes",_),N?.(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:N,setEdges:M,edges:U,hasDefaultEdges:O,debug:L}=A();if(_?.length){if(O){const H=hP(_,U);M(H)}L&&console.log("React Flow: trigger edge changes",_),N?.(_)}},addSelectedNodes:_=>{const{multiSelectionActive:N,edgeLookup:M,nodeLookup:U,triggerNodeChanges:O,triggerEdgeChanges:L}=A();if(N){const H=_.map(G=>Nu(G,!0));O(H);return}O(Sh(U,new Set([..._]),!0)),L(Sh(M))},addSelectedEdges:_=>{const{multiSelectionActive:N,edgeLookup:M,nodeLookup:U,triggerNodeChanges:O,triggerEdgeChanges:L}=A();if(N){const H=_.map(G=>Nu(G,!0));L(H);return}L(Sh(M,new Set([..._]))),O(Sh(U,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:N}={})=>{const{edges:M,nodes:U,nodeLookup:O,triggerNodeChanges:L,triggerEdgeChanges:H}=A(),G=_||U,V=N||M,$=G.map(se=>{const ce=O.get(se.id);return ce&&(ce.selected=!1),Nu(se.id,!1)}),ee=V.map(se=>Nu(se.id,!1));L($),H(ee)},setMinZoom:_=>{const{panZoom:N,maxZoom:M}=A();N?.setScaleExtent([_,M]),b({minZoom:_})},setMaxZoom:_=>{const{panZoom:N,minZoom:M}=A();N?.setScaleExtent([M,_]),b({maxZoom:_})},setTranslateExtent:_=>{A().panZoom?.setTranslateExtent(_),b({translateExtent:_})},setPaneClickDistance:_=>{A().panZoom?.setClickDistance(_)},resetSelectedElements:()=>{const{edges:_,nodes:N,triggerNodeChanges:M,triggerEdgeChanges:U,elementsSelectable:O}=A();if(!O)return;const L=N.reduce((G,V)=>V.selected?[...G,Nu(V.id,!1)]:G,[]),H=_.reduce((G,V)=>V.selected?[...G,Nu(V.id,!1)]:G,[]);M(L),U(H)},setNodeExtent:_=>{const{nodes:N,nodeLookup:M,parentLookup:U,nodeOrigin:O,elevateNodesOnSelect:L,nodeExtent:H}=A();_[0][0]===H[0][0]&&_[0][1]===H[0][1]&&_[1][0]===H[1][0]&&_[1][1]===H[1][1]||(Vx(N,M,U,{nodeOrigin:O,nodeExtent:_,elevateNodesOnSelect:L,checkEquality:!1}),b({nodeExtent:_}))},panBy:_=>{const{transform:N,width:M,height:U,panZoom:O,translateExtent:L}=A();return N9({delta:_,panZoom:O,transform:N,translateExtent:L,width:M,height:U})},setCenter:async(_,N,M)=>{const{width:U,height:O,maxZoom:L,panZoom:H}=A();if(!H)return Promise.resolve(!1);const G=typeof M?.zoom<"u"?M.zoom:L;return await H.setViewport({x:U/2-_*G,y:O/2-N*G,zoom:G},{duration:M?.duration,ease:M?.ease,interpolate:M?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{b({connection:{...M1}})},updateConnection:_=>{b({connection:_})},reset:()=>b({...H_()})}},Object.is);function Q7({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:c,initialMinZoom:d,initialMaxZoom:f,initialFitViewOptions:g,fitView:y,nodeOrigin:v,nodeExtent:x,children:b}){const[A]=k.useState(()=>Y7({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:s,height:c,fitView:y,minZoom:d,maxZoom:f,fitViewOptions:g,nodeOrigin:v,nodeExtent:x}));return h.jsx(gV,{value:A,children:h.jsx(UV,{children:b})})}function W7({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:s,width:c,height:d,fitView:f,fitViewOptions:g,minZoom:y,maxZoom:v,nodeOrigin:x,nodeExtent:b}){return k.useContext(zC)?h.jsx(h.Fragment,{children:t}):h.jsx(Q7,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:c,initialHeight:d,fitView:f,initialFitViewOptions:g,initialMinZoom:y,initialMaxZoom:v,nodeOrigin:x,nodeExtent:b,children:t})}const X7={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function J7({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:c,edgeTypes:d,onNodeClick:f,onEdgeClick:g,onInit:y,onMove:v,onMoveStart:x,onMoveEnd:b,onConnect:A,onConnectStart:I,onConnectEnd:_,onClickConnectStart:N,onClickConnectEnd:M,onNodeMouseEnter:U,onNodeMouseMove:O,onNodeMouseLeave:L,onNodeContextMenu:H,onNodeDoubleClick:G,onNodeDragStart:V,onNodeDrag:$,onNodeDragStop:ee,onNodesDelete:se,onEdgesDelete:ce,onDelete:oe,onSelectionChange:he,onSelectionDragStart:W,onSelectionDrag:J,onSelectionDragStop:P,onSelectionContextMenu:F,onSelectionStart:Y,onSelectionEnd:X,onBeforeDelete:B,connectionMode:Q,connectionLineType:ie=yl.Bezier,connectionLineStyle:ue,connectionLineComponent:me,connectionLineContainerStyle:Oe,deleteKeyCode:xe="Backspace",selectionKeyCode:le="Shift",selectionOnDrag:Ce=!1,selectionMode:je=bg.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:we=Eg()?"Meta":"Control",zoomActivationKeyCode:Ee=Eg()?"Meta":"Control",snapToGrid:Pe,snapGrid:Me,onlyRenderVisibleElements:lt=!1,selectNodesOnDrag:Mt,nodesDraggable:ge,autoPanOnNodeFocus:Be,nodesConnectable:Xe,nodesFocusable:it,nodeOrigin:ze=lP,edgesFocusable:tt,edgesReconnectable:mt,elementsSelectable:Ft=!0,defaultViewport:Hr=kV,minZoom:wt=.5,maxZoom:ut=2,translateExtent:Et=wg,preventScrolling:Vt=!0,nodeExtent:Pn,defaultMarkerColor:Ko="#b1b1b7",zoomOnScroll:sc=!0,zoomOnPinch:vi=!0,panOnScroll:Ci=!1,panOnScrollSpeed:Dn=.5,panOnScrollMode:wi=ju.Free,zoomOnDoubleClick:bo=!0,panOnDrag:ra=!0,onPaneClick:bi,onPaneMouseEnter:fs,onPaneMouseMove:Go,onPaneMouseLeave:xo,onPaneScroll:oa,onPaneContextMenu:ia,paneClickDistance:ct=0,nodeClickDistance:qo=0,children:Ol,onReconnect:rt,onReconnectStart:lf,onReconnectEnd:jn,onEdgeContextMenu:Ie,onEdgeDoubleClick:En,onEdgeMouseEnter:Ln,onEdgeMouseMove:ac,onEdgeMouseLeave:Ml,reconnectRadius:cc=10,onNodesChange:ms,onEdgesChange:$o,noDragClassName:xi="nodrag",noWheelClassName:dr="nowheel",noPanClassName:Br="nopan",fitView:to,fitViewOptions:xr,connectOnClick:sn,attributionPosition:gs,proOptions:sa,defaultEdgeOptions:Er,elevateNodesOnSelect:zr,elevateEdgesOnSelect:aa,disableKeyboardA11y:Ei=!1,autoPanOnConnect:Vo,autoPanOnNodeDrag:ca,autoPanSpeed:Yo,connectionRadius:Eo,isValidConnection:hr,onError:Ai,style:ps,id:Fr,nodeDragThreshold:Ti,connectionDragThreshold:Pl,viewport:Yt,onViewportChange:nd,width:qn,height:St,colorMode:$n="light",debug:an,onScroll:lc,ariaLabelConfig:Si,...Dl},An){const la=Fr||"1",jl=OV($n),uc=k.useCallback(Qo=>{Qo.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),lc?.(Qo)},[lc]);return h.jsx("div",{"data-testid":"rf__wrapper",...Dl,onScroll:uc,style:{...ps,...X7},ref:An,className:Gn(["react-flow",s,jl]),id:Fr,role:"application",children:h.jsxs(W7,{nodes:t,edges:e,width:qn,height:St,fitView:to,fitViewOptions:xr,minZoom:wt,maxZoom:ut,nodeOrigin:ze,nodeExtent:Pn,children:[h.jsx(V7,{onInit:y,onNodeClick:f,onEdgeClick:g,onNodeMouseEnter:U,onNodeMouseMove:O,onNodeMouseLeave:L,onNodeContextMenu:H,onNodeDoubleClick:G,nodeTypes:c,edgeTypes:d,connectionLineType:ie,connectionLineStyle:ue,connectionLineComponent:me,connectionLineContainerStyle:Oe,selectionKeyCode:le,selectionOnDrag:Ce,selectionMode:je,deleteKeyCode:xe,multiSelectionKeyCode:we,panActivationKeyCode:be,zoomActivationKeyCode:Ee,onlyRenderVisibleElements:lt,defaultViewport:Hr,translateExtent:Et,minZoom:wt,maxZoom:ut,preventScrolling:Vt,zoomOnScroll:sc,zoomOnPinch:vi,zoomOnDoubleClick:bo,panOnScroll:Ci,panOnScrollSpeed:Dn,panOnScrollMode:wi,panOnDrag:ra,onPaneClick:bi,onPaneMouseEnter:fs,onPaneMouseMove:Go,onPaneMouseLeave:xo,onPaneScroll:oa,onPaneContextMenu:ia,paneClickDistance:ct,nodeClickDistance:qo,onSelectionContextMenu:F,onSelectionStart:Y,onSelectionEnd:X,onReconnect:rt,onReconnectStart:lf,onReconnectEnd:jn,onEdgeContextMenu:Ie,onEdgeDoubleClick:En,onEdgeMouseEnter:Ln,onEdgeMouseMove:ac,onEdgeMouseLeave:Ml,reconnectRadius:cc,defaultMarkerColor:Ko,noDragClassName:xi,noWheelClassName:dr,noPanClassName:Br,rfId:la,disableKeyboardA11y:Ei,nodeExtent:Pn,viewport:Yt,onViewportChange:nd}),h.jsx(NV,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:A,onConnectStart:I,onConnectEnd:_,onClickConnectStart:N,onClickConnectEnd:M,nodesDraggable:ge,autoPanOnNodeFocus:Be,nodesConnectable:Xe,nodesFocusable:it,edgesFocusable:tt,edgesReconnectable:mt,elementsSelectable:Ft,elevateNodesOnSelect:zr,elevateEdgesOnSelect:aa,minZoom:wt,maxZoom:ut,nodeExtent:Pn,onNodesChange:ms,onEdgesChange:$o,snapToGrid:Pe,snapGrid:Me,connectionMode:Q,translateExtent:Et,connectOnClick:sn,defaultEdgeOptions:Er,fitView:to,fitViewOptions:xr,onNodesDelete:se,onEdgesDelete:ce,onDelete:oe,onNodeDragStart:V,onNodeDrag:$,onNodeDragStop:ee,onSelectionDrag:J,onSelectionDragStart:W,onSelectionDragStop:P,onMove:v,onMoveStart:x,onMoveEnd:b,noPanClassName:Br,nodeOrigin:ze,rfId:la,autoPanOnConnect:Vo,autoPanOnNodeDrag:ca,autoPanSpeed:Yo,onError:Ai,connectionRadius:Eo,isValidConnection:hr,selectNodesOnDrag:Mt,nodeDragThreshold:Ti,connectionDragThreshold:Pl,onBeforeDelete:B,paneClickDistance:ct,debug:an,ariaLabelConfig:Si}),h.jsx(_V,{onSelectionChange:he}),Ol,h.jsx(xV,{proOptions:sa,position:gs}),h.jsx(bV,{rfId:la,disableKeyboardA11y:Ei})]})})}var Z7=fP(J7);function eY(t){const[e,n]=k.useState(t),r=k.useCallback(s=>n(c=>dP(s,c)),[]);return[e,n,r]}function tY(t){const[e,n]=k.useState(t),r=k.useCallback(s=>n(c=>hP(s,c)),[]);return[e,n,r]}function nY({dimensions:t,lineWidth:e,variant:n,className:r}){return h.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Gn(["react-flow__background-pattern",n,r])})}function rY({radius:t,className:e}){return h.jsx("circle",{cx:t,cy:t,r:t,className:Gn(["react-flow__background-pattern","dots",e])})}var Ya;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ya||(Ya={}));const oY={[Ya.Dots]:1,[Ya.Lines]:1,[Ya.Cross]:6},iY=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function LP({id:t,variant:e=Ya.Dots,gap:n=20,size:r,lineWidth:s=1,offset:c=0,color:d,bgColor:f,style:g,className:y,patternClassName:v}){const x=k.useRef(null),{transform:b,patternId:A}=Rt(iY,Rn),I=r||oY[e],_=e===Ya.Dots,N=e===Ya.Cross,M=Array.isArray(n)?n:[n,n],U=[M[0]*b[2]||1,M[1]*b[2]||1],O=I*b[2],L=Array.isArray(c)?c:[c,c],H=N?[O,O]:U,G=[L[0]*b[2]||1+H[0]/2,L[1]*b[2]||1+H[1]/2],V=`${A}${t||""}`;return h.jsxs("svg",{className:Gn(["react-flow__background",y]),style:{...g,...KC,"--xy-background-color-props":f,"--xy-background-pattern-color-props":d},ref:x,"data-testid":"rf__background",children:[h.jsx("pattern",{id:V,x:b[0]%U[0],y:b[1]%U[1],width:U[0],height:U[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${G[0]},-${G[1]})`,children:_?h.jsx(rY,{radius:O/2,className:v}):h.jsx(nY,{dimensions:H,lineWidth:s,variant:e,className:v})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${V})`})]})}LP.displayName="Background";const sY=k.memo(LP);function aY(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function cY(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function lY(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function uY(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function dY(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ky({children:t,className:e,...n}){return h.jsx("button",{type:"button",className:Gn(["react-flow__controls-button",e]),...n,children:t})}const hY=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function UP({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:d,onFitView:f,onInteractiveChange:g,className:y,children:v,position:x="bottom-left",orientation:b="vertical","aria-label":A}){const I=xn(),{isInteractive:_,minZoomReached:N,maxZoomReached:M,ariaLabelConfig:U}=Rt(hY,Rn),{zoomIn:O,zoomOut:L,fitView:H}=Bg(),G=()=>{O(),c?.()},V=()=>{L(),d?.()},$=()=>{H(s),f?.()},ee=()=>{I.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),g?.(!_)},se=b==="horizontal"?"horizontal":"vertical";return h.jsxs(FC,{className:Gn(["react-flow__controls",se,y]),position:x,style:t,"data-testid":"rf__controls","aria-label":A??U["controls.ariaLabel"],children:[e&&h.jsxs(h.Fragment,{children:[h.jsx(ky,{onClick:G,className:"react-flow__controls-zoomin",title:U["controls.zoomIn.ariaLabel"],"aria-label":U["controls.zoomIn.ariaLabel"],disabled:M,children:h.jsx(aY,{})}),h.jsx(ky,{onClick:V,className:"react-flow__controls-zoomout",title:U["controls.zoomOut.ariaLabel"],"aria-label":U["controls.zoomOut.ariaLabel"],disabled:N,children:h.jsx(cY,{})})]}),n&&h.jsx(ky,{className:"react-flow__controls-fitview",onClick:$,title:U["controls.fitView.ariaLabel"],"aria-label":U["controls.fitView.ariaLabel"],children:h.jsx(lY,{})}),r&&h.jsx(ky,{className:"react-flow__controls-interactive",onClick:ee,title:U["controls.interactive.ariaLabel"],"aria-label":U["controls.interactive.ariaLabel"],children:_?h.jsx(dY,{}):h.jsx(uY,{})}),v]})}UP.displayName="Controls";const fY=k.memo(UP);function mY({id:t,x:e,y:n,width:r,height:s,style:c,color:d,strokeColor:f,strokeWidth:g,className:y,borderRadius:v,shapeRendering:x,selected:b,onClick:A}){const{background:I,backgroundColor:_}=c||{},N=d||I||_;return h.jsx("rect",{className:Gn(["react-flow__minimap-node",{selected:b},y]),x:e,y:n,rx:v,ry:v,width:r,height:s,style:{fill:N,stroke:f,strokeWidth:g},shapeRendering:x,onClick:A?M=>A(M,t):void 0})}const gY=k.memo(mY),pY=t=>t.nodes.map(e=>e.id),qb=t=>t instanceof Function?t:()=>t;function yY({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:c=gY,onClick:d}){const f=Rt(pY,Rn),g=qb(e),y=qb(t),v=qb(n),x=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:f.map(b=>h.jsx(CY,{id:b,nodeColorFunc:g,nodeStrokeColorFunc:y,nodeClassNameFunc:v,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:c,onClick:d,shapeRendering:x},b))})}function vY({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:c,shapeRendering:d,NodeComponent:f,onClick:g}){const{node:y,x:v,y:x,width:b,height:A}=Rt(I=>{const{internals:_}=I.nodeLookup.get(t),N=_.userNode,{x:M,y:U}=_.positionAbsolute,{width:O,height:L}=ic(N);return{node:N,x:M,y:U,width:O,height:L}},Rn);return!y||y.hidden||!B1(y)?null:h.jsx(f,{x:v,y:x,width:b,height:A,style:y.style,selected:!!y.selected,className:r(y),color:e(y),borderRadius:s,strokeColor:n(y),strokeWidth:c,shapeRendering:d,onClick:g,id:y.id})}const CY=k.memo(vY);var wY=k.memo(yY);const bY=200,xY=150,EY=t=>!t.hidden,AY=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?H1(Lg(t.nodeLookup,{filter:EY}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},TY="react-flow__minimap-desc";function HP({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:c=5,nodeStrokeWidth:d,nodeComponent:f,bgColor:g,maskColor:y,maskStrokeColor:v,maskStrokeWidth:x,position:b="bottom-right",onClick:A,onNodeClick:I,pannable:_=!1,zoomable:N=!1,ariaLabel:M,inversePan:U,zoomStep:O=1,offsetScale:L=5}){const H=xn(),G=k.useRef(null),{boundingRect:V,viewBB:$,rfId:ee,panZoom:se,translateExtent:ce,flowWidth:oe,flowHeight:he,ariaLabelConfig:W}=Rt(AY,Rn),J=t?.width??bY,P=t?.height??xY,F=V.width/J,Y=V.height/P,X=Math.max(F,Y),B=X*J,Q=X*P,ie=L*X,ue=V.x-(B-V.width)/2-ie,me=V.y-(Q-V.height)/2-ie,Oe=B+ie*2,xe=Q+ie*2,le=`${TY}-${ee}`,Ce=k.useRef(0),je=k.useRef();Ce.current=X,k.useEffect(()=>{if(G.current&&se)return je.current=B9({domNode:G.current,panZoom:se,getTransform:()=>H.getState().transform,getViewScale:()=>Ce.current}),()=>{je.current?.destroy()}},[se]),k.useEffect(()=>{je.current?.update({translateExtent:ce,width:oe,height:he,inversePan:U,pannable:_,zoomStep:O,zoomable:N})},[_,N,U,O,ce,oe,he]);const be=A?Pe=>{const[Me,lt]=je.current?.pointer(Pe)||[0,0];A(Pe,{x:Me,y:lt})}:void 0,we=I?k.useCallback((Pe,Me)=>{const lt=H.getState().nodeLookup.get(Me).internals.userNode;I(Pe,lt)},[]):void 0,Ee=M??W["minimap.ariaLabel"];return h.jsx(FC,{position:b,style:{...t,"--xy-minimap-background-color-props":typeof g=="string"?g:void 0,"--xy-minimap-mask-background-color-props":typeof y=="string"?y:void 0,"--xy-minimap-mask-stroke-color-props":typeof v=="string"?v:void 0,"--xy-minimap-mask-stroke-width-props":typeof x=="number"?x*X:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof d=="number"?d:void 0},className:Gn(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:J,height:P,viewBox:`${ue} ${me} ${Oe} ${xe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":le,ref:G,onClick:be,children:[Ee&&h.jsx("title",{id:le,children:Ee}),h.jsx(wY,{onClick:we,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:c,nodeClassName:s,nodeStrokeWidth:d,nodeComponent:f}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-ie},${me-ie}h${Oe+ie*2}v${xe+ie*2}h${-Oe-ie*2}z
        M${$.x},${$.y}h${$.width}v${$.height}h${-$.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}HP.displayName="MiniMap";const SY=k.memo(HP),_Y=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,kY={[Wh.Line]:"right",[Wh.Handle]:"bottom-right"};function IY({nodeId:t,position:e,variant:n=Wh.Handle,className:r,style:s=void 0,children:c,color:d,minWidth:f=10,minHeight:g=10,maxWidth:y=Number.MAX_VALUE,maxHeight:v=Number.MAX_VALUE,keepAspectRatio:x=!1,resizeDirection:b,autoScale:A=!0,shouldResize:I,onResizeStart:_,onResize:N,onResizeEnd:M}){const U=yP(),O=typeof t=="string"?t:U,L=xn(),H=k.useRef(null),G=n===Wh.Handle,V=Rt(k.useCallback(_Y(G&&A),[G,A]),Rn),$=k.useRef(null),ee=e??kY[n];k.useEffect(()=>{if(!(!H.current||!O))return $.current||($.current=nV({domNode:H.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:ce,transform:oe,snapGrid:he,snapToGrid:W,nodeOrigin:J,domNode:P}=L.getState();return{nodeLookup:ce,transform:oe,snapGrid:he,snapToGrid:W,nodeOrigin:J,paneDomNode:P}},onChange:(ce,oe)=>{const{triggerNodeChanges:he,nodeLookup:W,parentLookup:J,nodeOrigin:P}=L.getState(),F=[],Y={x:ce.x,y:ce.y},X=W.get(O);if(X&&X.expandParent&&X.parentId){const B=X.origin??P,Q=ce.width??X.measured.width??0,ie=ce.height??X.measured.height??0,ue={id:X.id,parentId:X.parentId,rect:{width:Q,height:ie,...z1({x:ce.x??X.position.x,y:ce.y??X.position.y},{width:Q,height:ie},X.parentId,W,B)}},me=hT([ue],W,J,P);F.push(...me),Y.x=ce.x?Math.max(B[0]*Q,ce.x):void 0,Y.y=ce.y?Math.max(B[1]*ie,ce.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const B={id:O,type:"position",position:{...Y}};F.push(B)}if(ce.width!==void 0&&ce.height!==void 0){const Q={id:O,type:"dimensions",resizing:!0,setAttributes:b?b==="horizontal"?"width":"height":!0,dimensions:{width:ce.width,height:ce.height}};F.push(Q)}for(const B of oe){const Q={...B,type:"position"};F.push(Q)}he(F)},onEnd:({width:ce,height:oe})=>{const he={id:O,type:"dimensions",resizing:!1,dimensions:{width:ce,height:oe}};L.getState().triggerNodeChanges([he])}})),$.current.update({controlPosition:ee,boundaries:{minWidth:f,minHeight:g,maxWidth:y,maxHeight:v},keepAspectRatio:x,resizeDirection:b,onResizeStart:_,onResize:N,onResizeEnd:M,shouldResize:I}),()=>{$.current?.destroy()}},[ee,f,g,y,v,x,_,N,M,I]);const se=ee.split("-");return h.jsx("div",{className:Gn(["react-flow__resize-control","nodrag",...se,n,r]),ref:H,style:{...s,scale:V,...d&&{[G?"backgroundColor":"borderColor"]:d}},children:c})}k.memo(IY);const RY=t=>{switch(t){case"running":return{borderColor:"border-[#643FB2] dark:border-[#8B5CF6]",glow:"shadow-lg shadow-[#643FB2]/20",badgeColor:"bg-[#643FB2] dark:bg-[#8B5CF6]"};case"completed":return{borderColor:"border-green-500 dark:border-green-400",glow:"shadow-lg shadow-green-500/20",badgeColor:"bg-green-500 dark:bg-green-400"};case"failed":return{borderColor:"border-red-500 dark:border-red-400",glow:"shadow-lg shadow-red-500/20",badgeColor:"bg-red-500 dark:bg-red-400"};case"cancelled":return{borderColor:"border-orange-500 dark:border-orange-400",glow:"shadow-lg shadow-orange-500/20",badgeColor:"bg-orange-500 dark:bg-orange-400"};case"pending":default:return{borderColor:"border-gray-300 dark:border-gray-600",glow:"",badgeColor:"bg-gray-400 dark:bg-gray-500"}}},BP=k.memo(({data:t,selected:e})=>{const n=t,r=RY(n.state),s=n.inputData||n.outputData||n.error,c=n.state==="running",d=n.layoutDirection==="TB",f=d?Ze.Top:Ze.Left,g=d?Ze.Bottom:Ze.Right,y=()=>{const v=[];if(n.error&&typeof n.error=="string"&&v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-red-600 dark:text-red-400 mb-1",children:"Error:"}),h.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-950/20 p-2 rounded border border-red-200 dark:border-red-800",children:n.error})]},"error")),n.outputData)try{const x=typeof n.outputData=="string"?n.outputData:JSON.stringify(n.outputData,null,2);v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-green-50 dark:bg-green-950/20 p-2 rounded border border-green-200 dark:border-green-800 max-h-20 overflow-auto",children:h.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:x})})]},"output"))}catch{v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-green-600 dark:text-green-400 mb-1",children:"Output:"}),h.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-green-50 dark:bg-green-950/20 p-2 rounded border border-green-200 dark:border-green-800",children:"[Unable to display output data]"})]},"output"))}if(n.inputData)try{const x=typeof n.inputData=="string"?n.inputData:JSON.stringify(n.inputData,null,2);v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Input:"}),h.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-300 bg-blue-50 dark:bg-blue-950/20 p-2 rounded border border-blue-200 dark:border-blue-800 max-h-20 overflow-auto",children:h.jsx("pre",{className:"whitespace-pre-wrap font-mono",children:x})})]},"input"))}catch{v.push(h.jsxs("div",{className:"mb-2",children:[h.jsx("div",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Input:"}),h.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-950/20 p-2 rounded border border-blue-200 dark:border-blue-800",children:"[Unable to display input data]"})]},"input"))}return v.length>0?v:null};return h.jsxs("div",{className:xt("group relative w-64 bg-card dark:bg-card rounded border-2 transition-all duration-200",r.borderColor,e?"ring-2 ring-blue-500 ring-offset-2":"",c?r.glow:"shadow-sm"),children:[!n.isStartNode&&h.jsx(Xh,{type:"target",position:f,className:"!w-2 !h-2 !rounded-full !border !border-gray-600 dark:!border-gray-500 transition-colors !min-w-0 !min-h-0",style:{backgroundColor:n.state==="running"?"#643FB2":n.state==="completed"?"#10b981":n.state==="failed"?"#ef4444":n.state==="cancelled"?"#f97316":"#4b5563"}}),!n.isEndNode&&h.jsx(Xh,{type:"source",position:g,className:"!w-2 !h-2 !rounded-full !border !border-gray-600 dark:!border-gray-500 transition-colors !min-w-0 !min-h-0",style:{backgroundColor:n.state==="running"?"#643FB2":n.state==="completed"?"#10b981":n.state==="failed"?"#ef4444":n.state==="cancelled"?"#f97316":"#4b5563"}}),h.jsxs("div",{className:"p-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsxs("div",{className:"flex-shrink-0 relative",children:[h.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-900/90 dark:bg-gray-800/90 flex items-center justify-center",children:n.isStartNode?h.jsx(w5,{className:"w-5 h-5 text-[#643FB2] dark:text-[#8B5CF6]"}):h.jsx(Gu,{className:"w-5 h-5 text-gray-300 dark:text-gray-400"})}),c&&h.jsx("div",{className:xt("absolute -top-1 -right-1 w-3 h-3 rounded-full animate-pulse",r.badgeColor)})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:n.name||n.executorId}),n.executorType&&h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5",children:n.executorType})]})]}),s&&h.jsx("div",{className:"mt-3",children:y()}),c&&h.jsx("div",{className:"absolute inset-0 rounded border-2 border-[#643FB2]/30 dark:border-[#8B5CF6]/30 animate-pulse pointer-events-none"})]})]})});BP.displayName="ExecutorNode";function NY(t,e,n="LR"){if(t.length===0)return t;if(t.length===1)return t.map(I=>({...I,position:{x:0,y:0}}));const r=new Map,s=new Map;t.forEach(I=>{r.set(I.id,[]),s.set(I.id,[])}),e.forEach(I=>{r.get(I.source)?.push(I.target),s.get(I.target)?.push(I.source)});const c=t.filter(I=>(s.get(I.id)||[]).length===0);c.length===0&&c.push(t[0]);const d=220,f=120,g=n==="LR"?350:280,y=n==="TB"?250:180,v=new Map,x=new Map,b=[],A=new Set;for(c.forEach(I=>{b.push({nodeId:I.id,level:0})});b.length>0;){const{nodeId:I,level:_}=b.shift();if(A.has(I))continue;A.add(I),x.has(_)||x.set(_,[]),x.get(_).push(I),(r.get(I)||[]).forEach(M=>{A.has(M)||b.push({nodeId:M,level:_+1})})}return t.forEach(I=>{if(!A.has(I.id)){const N=Math.max(...Array.from(x.keys()),-1)+1;x.has(N)||x.set(N,[]),x.get(N).push(I.id)}}),x.forEach((I,_)=>{const N=I.length;I.forEach((M,U)=>{let O,L;n==="LR"?(O=_*g,L=-((N-1)*y)/2+U*y):(L=_*y,O=-((N-1)*g)/2+U*g),v.set(M,{x:O,y:L,level:_})})}),t.map(I=>{const _=v.get(I.id)||{x:0,y:0};return{...I,position:{x:_.x-d/2,y:_.y-f/2}}})}function OY(t){return typeof t=="object"&&t!==null&&"id"in t&&"edge_groups"in t&&"executors"in t&&"start_executor_id"in t&&"max_iterations"in t&&typeof t.id=="string"&&Array.isArray(t.edge_groups)&&typeof t.executors=="object"&&typeof t.start_executor_id=="string"&&typeof t.max_iterations=="number"}function zP(t){return OY(t)?t:null}function Wx(t,e,n){if(!t)return console.warn("convertWorkflowDumpToNodes: workflowDump is undefined"),[];const r=zP(t);let s,c;return r?(s=Object.values(r.executors).map(f=>({id:f.id,type:f.type,name:f.name||f.id,description:f.description,config:f.config})),c=r.start_executor_id):(s=FP(t),c=t?.start_executor_id),!s||!Array.isArray(s)||s.length===0?(console.warn("No executors found in workflow dump. Available keys:",Object.keys(t)),[]):s.map(f=>({id:f.id,type:"executor",position:{x:0,y:0},data:{executorId:f.id,executorType:f.type,name:f.name||f.id,state:"pending",isStartNode:f.id===c,layoutDirection:n||"LR",onNodeClick:e}}))}function Xx(t){if(!t)return console.warn("convertWorkflowDumpToEdges: workflowDump is undefined"),[];const e=zP(t);let n;return e?(n=[],e.edge_groups.forEach(s=>{s.edges.forEach(c=>{n.push({source:c.source_id,target:c.target_id,condition:c.condition_name})})})):n=KP(t),!n||!Array.isArray(n)||n.length===0?(console.warn("No connections found in workflow dump. Available keys:",Object.keys(t)),[]):n.map(s=>({id:`${s.source}-${s.target}`,source:s.source,target:s.target,type:"default",animated:!1,style:{stroke:"#6b7280",strokeWidth:2}}))}function FP(t){if(t.executors&&typeof t.executors=="object"&&!Array.isArray(t.executors)){const r=t.executors;return Object.entries(r).map(([s,c])=>({id:s,type:c.type_||c.type||"executor",name:c.name||s,description:c.description,config:c.config}))}const e=["executors","agents","steps","nodes"];for(const r of e)if(t[r]&&Array.isArray(t[r]))return t[r];if(t.config&&typeof t.config=="object")return FP(t.config);const n=[];return Object.entries(t).forEach(([r,s])=>{if(typeof s=="object"&&s!==null&&("type"in s||"type_"in s)){const c=s;n.push({id:r,type:c.type_||c.type||"executor",name:c.name||r,description:c.description,config:c.config})}}),n}function KP(t){if(t.edge_groups&&Array.isArray(t.edge_groups)){const n=[];return t.edge_groups.forEach(r=>{if(typeof r=="object"&&r!==null&&"edges"in r){const s=r.edges;Array.isArray(s)&&s.forEach(c=>{if(typeof c=="object"&&c!==null&&"source_id"in c&&"target_id"in c){const d=c;n.push({source:d.source_id,target:d.target_id,condition:d.condition_name||void 0})}})}}),n}const e=["connections","edges","transitions","links"];for(const n of e)if(t[n]&&Array.isArray(t[n]))return t[n];return t.config&&typeof t.config=="object"?KP(t.config):[]}function Jx(t,e,n="LR"){return NY(t,e,n)}function MY(t,e){const n={};let r=!1;return t.forEach(s=>{if(s.type==="response.output_item.added"||s.type==="response.output_item.done"){const c=s.item;if(c&&c.type==="executor_action"&&c.executor_id){const d=c.executor_id;let f="pending",g;s.type==="response.output_item.added"?f="running":s.type==="response.output_item.done"&&(c.status==="completed"?f="completed":c.status==="failed"?(f="failed",g=c.error?typeof c.error=="string"?c.error:JSON.stringify(c.error):"Execution failed"):c.status==="cancelled"&&(f="cancelled")),n[d]={nodeId:d,state:f,data:c.result,error:g,timestamp:new Date().toISOString()}}}else if(s.type==="response.created"||s.type==="response.in_progress")r=!0;else if(s.type==="response.workflow_event.complete"&&"data"in s&&s.data){const d=s.data,f=d.executor_id,g=d.event_type,y=d.data;let v="pending",x;g==="ExecutorInvokedEvent"?v="running":g==="ExecutorCompletedEvent"?v="completed":g?.includes("Error")||g?.includes("Failed")?(v="failed",x=typeof y=="string"?y:"Execution failed"):g?.includes("Cancel")?v="cancelled":g==="WorkflowCompletedEvent"||g==="WorkflowOutputEvent"?v="completed":g==="WorkflowStartedEvent"&&(r=!0),f&&(n[f]={nodeId:f,state:v,data:y,error:x,timestamp:new Date().toISOString()})}}),r&&e&&!n[e]&&(n[e]={nodeId:e,state:"running",data:void 0,error:void 0,timestamp:new Date().toISOString()}),n}function PY(t,e){return t.map(n=>{const r=e[n.id];return r?{...n,data:{...n.data,state:r.state,outputData:r.data,error:r.error,layoutDirection:n.data.layoutDirection}}:n})}function DY(t){const e={};return t.forEach(r=>{if(r.type==="response.output_item.added"||r.type==="response.output_item.done"){const s=r.item;if(s&&s.type==="executor_action"&&s.executor_id){const c=s.executor_id;e[c]={lastEvent:r.type==="response.output_item.added"?"ExecutorInvokedEvent":"ExecutorCompletedEvent",timestamp:new Date().toISOString()}}}else if(r.type==="response.workflow_event.complete"&&"data"in r&&r.data){const c=r.data,d=c.executor_id,f=c.event_type;d&&(f==="ExecutorInvokedEvent"||f==="ExecutorCompletedEvent")&&(e[d]={lastEvent:f,timestamp:new Date().toISOString()})}}),Object.entries(e).filter(([,r])=>r.lastEvent==="ExecutorInvokedEvent").map(([r])=>r)}function jY(t,e){const n=DY(e),r={};return e.forEach(s=>{if(s.type==="response.workflow_event.complete"&&"data"in s&&s.data){const d=s.data,f=d.executor_id,g=d.event_type;f&&g&&(r[f]||(r[f]={completed:!1,invoked:!1}),g==="ExecutorInvokedEvent"?r[f].invoked=!0:g==="ExecutorCompletedEvent"&&(r[f].completed=!0))}}),t.map(s=>{const c=r[s.source],d=r[s.target],f=n.includes(s.target);let g={...s.style},y=!1;return c?.completed&&f?(g={stroke:"#643FB2",strokeWidth:3,strokeDasharray:"5,5"},y=!0):c?.completed&&d?.completed?g={stroke:"#10b981",strokeWidth:2}:c?.completed&&d?.invoked?g={stroke:"#f59e0b",strokeWidth:2}:g={stroke:"#6b7280",strokeWidth:2},{...s,style:g,animated:y}})}const LY={executor:BP};function UY({workflowDump:t,onNodeSelect:e,viewOptions:n,onToggleViewOption:r,layoutDirection:s,onLayoutDirectionChange:c}){const{fitView:d,setViewport:f,setNodes:g}=Bg(),y=()=>{f({x:0,y:0,zoom:1})},v=()=>{d({padding:.2})},x=()=>{if(!t)return;const b=Wx(t,e,s),A=Xx(t),I=Jx(b,A,s);g(I)};return h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsxs(xC,{children:[h.jsx(EC,{asChild:!0,children:h.jsxs(ht,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-white/90 backdrop-blur-sm border-gray-200 shadow-sm hover:bg-white dark:bg-gray-800/90 dark:border-gray-600 dark:hover:bg-gray-800",children:[h.jsx(h5,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"View options"})]})}),h.jsxs(AC,{align:"end",className:"w-56",children:[h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("showMinimap"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(O5,{className:"mr-2 h-4 w-4"}),"Show Minimap"]}),h.jsx(zm,{checked:n.showMinimap,onChange:()=>{}})]}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("showGrid"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(v5,{className:"mr-2 h-4 w-4"}),"Show Grid"]}),h.jsx(zm,{checked:n.showGrid,onChange:()=>{}})]}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>r?.("animateRun"),children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(gO,{className:"mr-2 h-4 w-4"}),"Animate Run"]}),h.jsx(zm,{checked:n.animateRun,onChange:()=>{}})]}),h.jsx(zh,{}),h.jsxs(Ur,{className:"flex items-center justify-between",onClick:()=>{const b=s==="LR"?"TB":"LR";if(c?.(b),t){const A=Wx(t,e,b),I=Xx(t),_=Jx(A,I,b);g(_)}},children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Uz,{className:"mr-2 h-4 w-4"}),"Vertical Layout"]}),h.jsx(zm,{checked:s==="TB",onChange:()=>{}})]}),h.jsx(zh,{}),h.jsxs(Ur,{onClick:y,children:[h.jsx(DA,{className:"mr-2 h-4 w-4"}),"Reset Zoom"]}),h.jsxs(Ur,{onClick:v,children:[h.jsx(D5,{className:"mr-2 h-4 w-4"}),"Fit to Screen"]}),h.jsxs(Ur,{onClick:x,children:[h.jsx(cF,{className:"mr-2 h-4 w-4"}),"Auto-arrange"]})]})]})})}function HY({nodes:t,nodeUpdates:e,isStreaming:n,animateRun:r}){const{fitView:s}=Bg();return k.useEffect(()=>{if(r)if(n){const c=t.filter(d=>d.data.state==="running");if(c.length>0){const d=c[0];s({nodes:[d],duration:800,padding:.3,minZoom:.8,maxZoom:1.5})}}else t.length>0&&s({duration:1e3,padding:.2})},[e,n,r,t]),null}const BY=k.memo(function({workflowDump:e,events:n,isStreaming:r,onNodeSelect:s,className:c="",viewOptions:d={showMinimap:!1,showGrid:!0,animateRun:!0},onToggleViewOption:f,layoutDirection:g="LR",onLayoutDirectionChange:y}){const{initialNodes:v,initialEdges:x}=k.useMemo(()=>{if(!e)return{initialNodes:[],initialEdges:[]};const L=Wx(e,s,g),H=Xx(e);return{initialNodes:L.length>0?Jx(L,H,g):L,initialEdges:H}},[e,s,g]),[b,A,I]=eY(v),[_,N,M]=tY(x),U=k.useMemo(()=>MY(n,e?.start_executor_id),[n,e?.start_executor_id]);k.useMemo(()=>{Object.keys(U).length>0?A(L=>PY(L,U)):n.length===0&&A(L=>L.map(H=>({...H,data:{...H.data,state:"pending",outputData:void 0,error:void 0}})))},[U,A,n.length]),k.useMemo(()=>{n.length>0?N(L=>jY(L,n)):N(L=>L.map(H=>({...H,animated:!1,style:{stroke:"#6b7280",strokeWidth:2}})))},[n,N]),k.useEffect(()=>{v.length>0&&(A(v),N(x))},[e]);const O=k.useCallback((L,H)=>{L.stopPropagation(),s?.(H.data.executorId,H.data)},[s]);return e?v.length===0?h.jsx("div",{className:`flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 ${c}`,children:h.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[h.jsx("div",{className:"text-lg font-medium mb-2",children:"No Executors Found"}),h.jsx("div",{className:"text-sm",children:"Could not extract executors from workflow dump."}),h.jsxs("details",{className:"mt-2 text-xs",children:[h.jsx("summary",{className:"cursor-pointer",children:"Debug Info"}),h.jsx("pre",{className:"mt-1 p-2 bg-gray-100 dark:bg-gray-800 rounded text-left overflow-auto",children:JSON.stringify(e,null,2)})]})]})}):h.jsxs("div",{className:`h-full w-full ${c}`,children:[h.jsxs(Z7,{nodes:b,edges:_,onNodesChange:I,onEdgesChange:M,onNodeClick:O,nodeTypes:LY,fitView:!0,fitViewOptions:{padding:.2},minZoom:.1,maxZoom:1.5,defaultEdgeOptions:{type:"default",animated:!1,style:{stroke:"#6b7280",strokeWidth:2}},nodesDraggable:!r,nodesConnectable:!1,elementsSelectable:!0,proOptions:{hideAttribution:!0},children:[d.showGrid&&h.jsx(sY,{variant:Ya.Dots,gap:20,size:1,color:"#e5e7eb",className:"dark:opacity-30"}),h.jsx(fY,{position:"bottom-left",showInteractive:!1,style:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"3px"},className:"dark:!bg-gray-800/90 dark:!border-gray-600"}),d.showMinimap&&h.jsx(SY,{nodeColor:L=>{switch(L.data?.state){case"running":return"#643FB2";case"completed":return"#10b981";case"failed":return"#ef4444";case"cancelled":return"#f97316";default:return"#6b7280"}},maskColor:"rgba(0, 0, 0, 0.1)",position:"bottom-right",style:{backgroundColor:"rgba(255, 255, 255, 0.9)",border:"1px solid #e5e7eb",borderRadius:"8px"},className:"dark:!bg-gray-800/90 dark:!border-gray-600"}),h.jsx(HY,{nodes:b,nodeUpdates:U,isStreaming:r,animateRun:d.animateRun}),h.jsx(UY,{workflowDump:e,onNodeSelect:s,viewOptions:d,onToggleViewOption:f,layoutDirection:g,onLayoutDirectionChange:y})]}),h.jsx("style",{children:`
        .react-flow__edge-path {
          transition: stroke 0.3s ease, stroke-width 0.3s ease;
        }
        .react-flow__edge.animated .react-flow__edge-path {
          stroke-dasharray: 5 5;
          animation: dash 1s linear infinite;
        }
        @keyframes dash {
          0% { stroke-dashoffset: 0; }
          100% { stroke-dashoffset: -10; }
        }
        
        /* Dark theme styles for React Flow controls */
        .dark .react-flow__controls {
          background-color: rgba(31, 41, 55, 0.9) !important;
          border-color: rgb(75, 85, 99) !important;
        }
        .dark .react-flow__controls-button {
          background-color: rgba(31, 41, 55, 0.9) !important;
          border-color: rgb(75, 85, 99) !important;
          color: rgb(229, 231, 235) !important;
        }
        .dark .react-flow__controls-button:hover {
          background-color: rgba(55, 65, 81, 0.9) !important;
          color: rgb(255, 255, 255) !important;
        }
        .dark .react-flow__controls-button svg {
          fill: rgb(229, 231, 235) !important;
        }
        .dark .react-flow__controls-button:hover svg {
          fill: rgb(255, 255, 255) !important;
        }
      `})]}):h.jsx("div",{className:`flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700 ${c}`,children:h.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[h.jsx("div",{className:"text-lg font-medium mb-2",children:"No Workflow Data"}),h.jsx("div",{className:"text-sm",children:"Workflow dump is not available."})]})})});function zY(t,e){const[n,r]=k.useState(null),{executors:s,recentlyActive:c,isWorkflowRunning:d}=k.useMemo(()=>{const v={},x=[];let b=e;return t.forEach(A=>{if(A.type==="response.workflow_event.complete"&&"data"in A&&A.data){const I=A.data,_=I.executor_id;if(!_)return;v[_]||(v[_]={executorId:_,state:"pending",timestamp:new Date().toISOString()});const N=v[_],M=I.event_type;M==="ExecutorInvokedEvent"?(N.state="running",N.inputData=I.data,x.includes(_)||x.push(_)):M==="ExecutorCompletedEvent"?(N.state="completed",N.outputData=I.data):M?.includes("Error")||M?.includes("Failed")?(N.state="failed",N.error=typeof I.data=="string"?I.data:"Execution failed"):M?.includes("Cancel")&&(N.state="cancelled"),N.timestamp=new Date().toISOString()}}),{executors:v,recentlyActive:x.slice(-3),isWorkflowRunning:b}},[t,e]),f=k.useCallback(v=>{r(v)},[]),g=k.useCallback(v=>s[v]||null,[s]),y=k.useCallback(v=>t.filter(x=>x.type==="response.workflow_event.complete"&&"data"in x&&x.data?x.data.executor_id===v:!1),[t]);return{isWorkflowRunning:d,selectedExecutorId:n,recentlyActive:c,selectExecutor:f,getExecutorData:g,getExecutorEvents:y}}function Iy({title:t,icon:e,children:n,className:r=""}){return h.jsxs("div",{className:`border rounded-lg p-4 bg-card ${r}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e,h.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:n})]})}function FY({workflow:t,open:e,onOpenChange:n}){const r=t.source==="directory"?h.jsx(cO,{className:"h-4 w-4 text-muted-foreground"}):t.source==="in_memory"?h.jsx(bx,{className:"h-4 w-4 text-muted-foreground"}):h.jsx(lO,{className:"h-4 w-4 text-muted-foreground"}),s=t.source==="directory"?"Local":t.source==="in_memory"?"In-Memory":"Gallery";return h.jsx(Za,{open:e,onOpenChange:n,children:h.jsxs(ec,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsx(nc,{children:"Workflow Details"}),h.jsx(Il,{onClose:()=>n(!1)})]}),h.jsxs("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:[h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(Gu,{className:"h-6 w-6 text-primary"}),h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:t.name||t.id})]}),t.description&&h.jsx("p",{className:"text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"h-px bg-border mb-6"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[h.jsx(Iy,{title:"Start Executor",icon:h.jsx(t5,{className:"h-4 w-4 text-muted-foreground"}),children:h.jsx("div",{className:"font-mono text-foreground",children:t.start_executor_id})}),h.jsx(Iy,{title:"Source",icon:r,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-foreground",children:s}),t.module_path&&h.jsx("div",{className:"font-mono text-xs break-all",children:t.module_path})]})}),h.jsx(Iy,{title:"Environment",icon:t.has_env?h.jsx(CC,{className:"h-4 w-4 text-orange-500"}):h.jsx(vv,{className:"h-4 w-4 text-green-500"}),className:"md:col-span-2",children:h.jsx("div",{className:t.has_env?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400",children:t.has_env?"Requires environment variables":"No environment variables required"})})]}),h.jsx(Iy,{title:`Executors (${t.executors.length})`,icon:h.jsx(xx,{className:"h-4 w-4 text-muted-foreground"}),children:t.executors.length>0?h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:t.executors.map((c,d)=>h.jsx("div",{className:"font-mono text-xs text-foreground bg-muted px-2 py-1 rounded",children:c},d))}):h.jsx("div",{className:"text-muted-foreground",children:"No executors configured"})})]})]})})}function KY({inputSchema:t,onRun:e,isSubmitting:n,workflowState:r}){const[s,c]=k.useState(!1);k.useEffect(()=>{const b=A=>{A.key==="Escape"&&s&&c(!1)};if(s)return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[s]);const d=k.useMemo(()=>{if(!t)return{needsInput:!1,hasDefaults:!1,fieldCount:0};if(t.type==="string")return{needsInput:!t.default,hasDefaults:!!t.default,fieldCount:1,canRunDirectly:!!t.default};if(t.type==="object"&&t.properties){const b=t.properties,A=Object.entries(b),I=A.filter(([,_])=>_.default!==void 0||_.enum&&_.enum.length>0);return{needsInput:A.length>0,hasDefaults:I.length>0,fieldCount:A.length,canRunDirectly:I.length===A.length}}return{needsInput:!1,hasDefaults:!1,fieldCount:0,canRunDirectly:!0}},[t]),f=()=>{if(d.canRunDirectly){const b={};t.type==="string"&&t.default?b.input=t.default:t.type==="object"&&t.properties&&Object.entries(t.properties).forEach(([A,I])=>{I.default!==void 0?b[A]=I.default:I.enum&&I.enum.length>0&&(b[A]=I.enum[0])}),e(b)}else c(!0)},g=()=>r==="running"?"Running...":r==="completed"?"Run Again":r==="error"?"Retry":d.fieldCount===0||d.canRunDirectly?"Run Workflow":"Configure & Run",y=()=>r==="running"?h.jsx(wC,{className:"w-4 h-4 animate-spin"}):r==="error"?h.jsx(DA,{className:"w-4 h-4"}):d.needsInput&&!d.canRunDirectly?h.jsx(Ex,{className:"w-4 h-4"}):h.jsx(Y5,{className:"w-4 h-4"}),v=r==="running",x=r==="error"?"destructive":"primary";return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex items-center",children:h.jsxs("div",{className:"flex",children:[h.jsxs(ht,{onClick:f,disabled:v,variant:x==="destructive"?"destructive":"default",size:"default",className:d.needsInput?"rounded-r-none":"",children:[y(),g()]}),d.needsInput&&h.jsxs(ht,{onClick:()=>c(!0),disabled:v,variant:x==="destructive"?"destructive":"default",size:"default",className:"rounded-l-none border-l-0 px-3",title:"Configure workflow inputs - customize parameters before running",children:[h.jsx(Ex,{className:"w-4 h-4"}),h.jsx("span",{className:"ml-1.5",children:"Inputs"})]})]})}),h.jsx(Za,{open:s,onOpenChange:c,children:h.jsxs(ec,{className:"w-full min-w-[400px] max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-4xl xl:max-w-5xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{className:"px-8 pt-6",children:[h.jsx(nc,{children:"Configure Workflow Inputs"}),h.jsx(Il,{onClose:()=>c(!1)})]}),h.jsx("div",{className:"px-8 py-4 border-b flex-shrink-0",children:h.jsx("div",{className:"text-sm text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"font-medium",children:"Input Type:"}),h.jsx("code",{className:"bg-muted px-3 py-1 text-xs font-mono",children:d.fieldCount===0?"No Input":t.type==="string"?"String":"Object"}),t.type==="object"&&t.properties&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:[Object.keys(t.properties).length," field",Object.keys(t.properties).length!==1?"s":""]})]})})}),h.jsx("div",{className:"px-8 py-6 overflow-y-auto flex-1 min-h-0",children:h.jsx(AG,{inputSchema:t,inputTypeName:"Input",onSubmit:b=>{e(b),c(!1)},isSubmitting:n,className:"embedded"})})]})})]})}function GY({selectedWorkflow:t,onDebugEvent:e}){const[n,r]=k.useState(null),[s,c]=k.useState(!1),[d,f]=k.useState([]),[g,y]=k.useState(!1),[v,x]=k.useState(null),[b,A]=k.useState(""),[I,_]=k.useState(""),[N,M]=k.useState(!1),[U,O]=k.useState(!1),[L,H]=k.useState(!1),G=k.useRef(null),V=k.useRef(null),[$,ee]=k.useState(!1),se=k.useRef({}),ce=k.useRef(null),oe=k.useRef(null),[he,W]=k.useState(()=>{const be=localStorage.getItem("workflowBottomPanelHeight");return be?parseInt(be,10):300}),[J,P]=k.useState(!1),[F,Y]=k.useState(()=>{const be=localStorage.getItem("workflowViewOptions");return be?JSON.parse(be):{showMinimap:!1,showGrid:!0,animateRun:!1}}),[X,B]=k.useState(()=>localStorage.getItem("workflowLayoutDirection")||"LR"),{selectExecutor:Q,getExecutorData:ie}=zY(d,g);k.useEffect(()=>{localStorage.setItem("workflowViewOptions",JSON.stringify(F))},[F]),k.useEffect(()=>{localStorage.setItem("workflowLayoutDirection",X)},[X]),k.useEffect(()=>{const be=()=>{if(G.current){const we=G.current,Ee=we.scrollHeight>we.clientHeight,Me=we.scrollHeight-we.scrollTop-we.clientHeight<100;g&&Me&&Ee&&we.scrollTo({top:we.scrollHeight,behavior:"smooth"})}if(V.current){const we=V.current.scrollHeight>V.current.clientHeight;ee(we)}};return be(),window.addEventListener("resize",be),()=>window.removeEventListener("resize",be)},[b,I,he,g]);const ue=be=>{Y(we=>({...we,[be]:!we[be]}))};k.useEffect(()=>{const be=async()=>{if(t.type==="workflow"){c(!0);try{const we=await fn.getWorkflowInfo(t.id);r(we)}catch(we){r(null),console.error("Error loading workflow info:",we)}finally{c(!1)}}};f([]),y(!1),x(null),A(""),_(""),se.current={},ce.current=null,oe.current=null,be()},[t.id,t.type]);const me=(be,we)=>{x(we),Q(be),se.current[be]&&A(se.current[be])},Oe=k.useMemo(()=>d.filter(be=>be.type==="response.output_item.added"||be.type==="response.output_item.done"||be.type==="response.created"||be.type==="response.in_progress"||be.type==="response.completed"||be.type==="response.failed"||be.type==="response.workflow_event.complete"),[d]),xe=k.useMemo(()=>{const be=[];return Oe.forEach(we=>{if(we.type==="response.output_item.added"||we.type==="response.output_item.done"){const Ee=we.item;Ee&&Ee.type==="executor_action"&&Ee.executor_id&&be.push({executorId:Ee.executor_id,message:we.type==="response.output_item.added"?"Executor started":Ee.status==="completed"?"Executor completed":Ee.status==="failed"?"Executor failed":"Executor processing",timestamp:new Date().toISOString(),status:Ee.status==="completed"?"completed":Ee.status==="failed"?"error":"running"})}else if(we.type==="response.workflow_event.complete"&&"data"in we&&we.data&&typeof we.data=="object"){const Ee=we.data;Ee.executor_id!=null&&be.push({executorId:String(Ee.executor_id),message:String(Ee.event_type||"Processing"),timestamp:String(Ee.timestamp||new Date().toISOString()),status:String(Ee.event_type||"").includes("Completed")?"completed":String(Ee.event_type||"").includes("Error")?"error":"running"})}}),be},[Oe]),le=k.useMemo(()=>g?xe.filter(we=>we.status==="running").slice(-2).map(we=>we.executorId):[],[xe,g]);k.useEffect(()=>{localStorage.setItem("workflowBottomPanelHeight",he.toString())},[he]);const Ce=k.useCallback(be=>{be.preventDefault(),P(!0);const we=be.clientY,Ee=he,Pe=lt=>{const Mt=we-lt.clientY,ge=Math.max(200,Math.min(window.innerHeight*.6,Ee+Mt));W(ge)},Me=()=>{P(!1),document.removeEventListener("mousemove",Pe),document.removeEventListener("mouseup",Me)};document.addEventListener("mousemove",Pe),document.addEventListener("mouseup",Me)},[he]),je=k.useCallback(async be=>{if(!(!t||t.type!=="workflow")){y(!0),f([]),A(""),_(""),se.current={},ce.current=null,oe.current=null,e("clear");try{const we={input_data:be},Ee=fn.streamWorkflowExecutionOpenAI(t.id,we);for await(const Pe of Ee){if((Pe.type==="response.output_item.added"||Pe.type==="response.output_item.done"||Pe.type==="response.created"||Pe.type==="response.in_progress"||Pe.type==="response.completed"||Pe.type==="response.failed"||Pe.type==="response.workflow_event.complete")&&f(Me=>[...Me,Pe]),e(Pe),Pe.type==="response.output_item.added"){const Me=Pe.item;Me&&Me.type==="executor_action"&&Me.executor_id&&(ce.current=Me.executor_id,se.current[Me.executor_id]||(se.current[Me.executor_id]=""))}if(Pe.type,Pe.type==="response.failed"){const Me=Pe.response?.error;Me&&_(typeof Me=="string"?Me:JSON.stringify(Me))}if(Pe.type==="response.workflow_event.complete"&&"data"in Pe&&Pe.data){const Me=Pe.data;if(Me.event_type==="ExecutorInvokedEvent"&&Me.executor_id&&(ce.current=Me.executor_id,se.current[Me.executor_id]||(se.current[Me.executor_id]="")),(Me.event_type==="WorkflowCompletedEvent"||Me.event_type==="WorkflowOutputEvent")&&Me.data){if(typeof Me.data=="string")A(Me.data);else{oe.current=Me.data;const lt=JSON.stringify(Me.data,null,2);A(lt)}ce.current=null}}if(Pe.type==="response.output_text.delta"&&"delta"in Pe&&Pe.delta){const Me=ce.current;Me&&(se.current[Me]||(se.current[Me]=""),se.current[Me]+=Pe.delta,v&&se.current[v.executorId]?A(se.current[v.executorId]):A(se.current[Me]))}if(Pe.type==="error"){_("error"in Pe?String(Pe.error):"Unknown error");break}}y(!1)}catch(we){_(we instanceof Error?we.message:"Unknown error"),y(!1)}}},[t,e,n]);return s?h.jsx(eg,{message:"Loading workflow...",description:"Fetching workflow structure and configuration"}):!n?.workflow_dump&&!xe.length?h.jsx(eg,{message:"Initializing workflow...",description:"Setting up workflow execution environment"}):h.jsxs("div",{className:"workflow-view flex flex-col h-full",children:[h.jsxs("div",{className:"border-b pb-2 p-4 flex-shrink-0",children:[h.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[h.jsx("h2",{className:"font-semibold text-sm truncate",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Gu,{className:"h-4 w-4 flex-shrink-0"}),h.jsx("span",{className:"truncate",children:t.name||t.id})]})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>M(!0),className:"h-6 w-6 p-0 flex-shrink-0",title:"View workflow details",children:h.jsx(wv,{className:"h-4 w-4"})})]}),n&&h.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 flex-shrink-0",children:h.jsx(KY,{inputSchema:n.input_schema,onRun:je,isSubmitting:g,workflowState:g?"running":I?"error":xe.length>0?"completed":"ready",executorHistory:xe,workflowError:I})})]}),t.description&&h.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),h.jsx("div",{className:"flex-1 min-h-0",children:n?.workflow_dump&&h.jsx(BY,{workflowDump:n.workflow_dump,events:Oe,isStreaming:g,onNodeSelect:me,className:"h-full",viewOptions:F,onToggleViewOption:ue,layoutDirection:X,onLayoutDirectionChange:B})}),h.jsx("div",{className:`h-1 cursor-row-resize flex-shrink-0 relative group transition-colors duration-200 ease-in-out ${J?"bg-primary/40":"bg-border hover:bg-primary/20"}`,onMouseDown:Ce,children:h.jsx("div",{className:"absolute inset-x-0 -top-2 -bottom-2 flex items-center justify-center",children:h.jsx("div",{className:`w-12 h-1 rounded-full transition-all duration-200 ease-in-out ${J?"bg-primary shadow-lg shadow-primary/25":"bg-primary/30 group-hover:bg-primary group-hover:shadow-md group-hover:shadow-primary/20"}`})})}),h.jsx("div",{className:"flex-shrink-0 border-t overflow-hidden",style:{height:`${he}px`},children:h.jsx("div",{className:"h-full flex gap-4 p-4",children:v||le.length>0||xe.length>0||b||I?h.jsxs(h.Fragment,{children:[(v||le.length>0||xe.length>0)&&h.jsxs("div",{className:`border border-border rounded bg-card shadow-sm flex flex-col ${b||I?"flex-1":"w-full"}`,children:[h.jsx("div",{className:"border-b border-border px-4 py-3 bg-muted rounded-t flex-shrink-0",children:h.jsx("h4",{className:"text-sm font-medium text-foreground",children:v?`Executor: ${v.name||v.executorId}`:g&&le.length>0?"Current Executor":"Last Executor"})}),h.jsx("div",{className:"p-4 overflow-auto flex-1",children:v?h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${v.state==="running"?"bg-[#643FB2] dark:bg-[#8B5CF6] animate-pulse":v.state==="completed"?"bg-green-500 dark:bg-green-400":v.state==="failed"?"bg-red-500 dark:bg-red-400":v.state==="cancelled"?"bg-orange-500 dark:bg-orange-400":"bg-gray-400 dark:bg-gray-500"}`}),h.jsx("span",{className:"text-sm font-medium capitalize text-foreground",children:v.state}),v.executorType&&h.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",v.executorType,")"]})]}),v.inputData!==void 0&&v.inputData!==null&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-foreground mb-1",children:"Input Data:"}),h.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-24",children:String(typeof v.inputData=="string"?v.inputData:(()=>{try{return JSON.stringify(v.inputData,null,2)}catch{return"[Unable to display data]"}})())})]}),v.outputData!==void 0&&v.outputData!==null&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-foreground mb-1",children:"Output Data:"}),h.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto max-h-24",children:String(typeof v.outputData=="string"?v.outputData:(()=>{try{return JSON.stringify(v.outputData,null,2)}catch{return"[Unable to display data]"}})())})]}),v.error&&h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs font-medium text-destructive mb-1",children:"Error:"}),h.jsx("pre",{className:"text-xs bg-destructive/10 text-destructive p-2 rounded overflow-x-auto",children:v.error})]}),h.jsx("button",{onClick:()=>x(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:" Back to current executor"})]}):(()=>{const be=g&&le.length>0?le[le.length-1]:xe.length>0?xe[xe.length-1].executorId:null;if(!be)return null;const we=ie(be),Ee=xe.find(Pe=>Pe.executorId===be);return h.jsxs("div",{className:"space-y-3 cursor-pointer hover:bg-muted/30 p-2 rounded transition-colors",onClick:()=>{we&&x({executorId:we.executorId,state:we.state,inputData:we.inputData,outputData:we.outputData,error:we.error,name:void 0,executorType:void 0,isSelected:!0,isStartNode:!1,onNodeClick:void 0})},children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${g?"bg-[#643FB2] dark:bg-[#8B5CF6] animate-pulse":Ee?.status==="completed"?"bg-green-500 dark:bg-green-400":Ee?.status==="error"?"bg-red-500 dark:bg-red-400":"bg-gray-400 dark:bg-gray-500"}`}),h.jsx("span",{className:"text-sm font-medium text-foreground",children:be}),Ee&&h.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(Ee.timestamp).toLocaleTimeString()})]}),Ee&&h.jsx("p",{className:"text-sm text-muted-foreground",children:g?"Processing...":Ee.message})]})})()})]}),b&&(()=>{const be=g&&ce.current,we=!g&&v,Ee=be?{border:"border-[#643FB2]/40 dark:border-[#8B5CF6]/40",bg:"bg-[#643FB2]/5 dark:bg-[#8B5CF6]/5",headerBg:"bg-[#643FB2]/10 dark:bg-[#8B5CF6]/10",icon:h.jsx(wC,{className:"w-4 h-4 text-[#643FB2] dark:text-[#8B5CF6] animate-spin"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-[#643FB2]/30 dark:border-[#8B5CF6]/30",buttonHover:"hover:bg-[#643FB2]/10 dark:hover:bg-[#8B5CF6]/10"}:we?{border:"border-blue-500/40 dark:border-blue-500/40",bg:"bg-blue-500/5 dark:bg-blue-500/5",headerBg:"bg-blue-500/10 dark:bg-blue-500/10",icon:h.jsx(wv,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-blue-500/30 dark:border-blue-500/30",buttonHover:"hover:bg-blue-500/10 dark:hover:bg-blue-500/10"}:{border:"border-green-500/40 dark:border-green-400/40",bg:"bg-green-500/5 dark:bg-green-400/5",headerBg:"bg-green-500/10 dark:bg-green-400/10",icon:h.jsx(vv,{className:"w-4 h-4 text-green-500 dark:text-green-400"}),buttonBg:"bg-background dark:bg-background",buttonBorder:"border-green-500/30 dark:border-green-400/30",buttonHover:"hover:bg-green-500/10 dark:hover:bg-green-400/10"};return h.jsxs("div",{className:`border-2 ${Ee.border} rounded ${Ee.bg} shadow flex-1 flex flex-col min-w-0 relative`,children:[h.jsx("div",{className:`border-b ${Ee.border} px-4 py-3 ${Ee.headerBg} rounded-t flex-shrink-0`,children:h.jsxs("div",{className:"flex items-center gap-3",children:[Ee.icon,h.jsx("h4",{className:"text-sm font-semibold text-foreground",children:be?`Output: ${ce.current}`:we?`Output: ${v.executorId}`:"Workflow Complete"})]})}),h.jsx("div",{ref:G,className:"p-4 overflow-auto flex-1 min-h-0 relative",children:h.jsx("div",{className:"text-foreground whitespace-pre-wrap break-words text-sm pb-12",children:b})}),h.jsx("div",{className:"absolute bottom-3 right-3 pointer-events-auto",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:()=>O(!0),className:`h-8 px-3 ${Ee.buttonBg} ${Ee.buttonBorder} ${Ee.buttonHover} shadow-md`,title:"Expand to full view",children:[h.jsx(C0,{className:"w-3.5 h-3.5 mr-1.5"}),"View Full"]})})]})})(),I&&h.jsxs("div",{className:"border-2 border-destructive/70 rounded bg-destructive/5 shadow flex-1 flex flex-col min-w-0 relative",children:[h.jsx("div",{className:"border-b border-destructive/70 px-4 py-3 bg-destructive/10 rounded-t flex-shrink-0",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Bh,{className:"w-4 h-4 text-destructive"}),h.jsx("h4",{className:"text-sm font-semibold text-destructive",children:"Workflow Failed"})]})}),h.jsx("div",{ref:V,className:"p-4 overflow-auto flex-1 min-h-0 relative",children:h.jsx("div",{className:"text-destructive whitespace-pre-wrap break-words text-sm pb-12",children:I})}),h.jsx("div",{className:"absolute bottom-3 right-3 pointer-events-auto",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:()=>H(!0),className:"h-8 px-3 bg-destructive/10 dark:bg-destructive/20 border-destructive/50 text-destructive hover:bg-destructive/20 dark:hover:bg-destructive/30 shadow-md",title:"Expand to full view",children:[h.jsx(C0,{className:"w-3.5 h-3.5 mr-1.5"}),"View Full"]})}),$&&h.jsx("div",{className:"absolute bottom-14 left-1/2 transform -translate-x-1/2 pointer-events-none",children:h.jsxs("div",{className:"bg-destructive/80 text-white px-2 py-1 rounded-full flex items-center gap-1 text-xs animate-bounce",children:[h.jsx(Wz,{className:"w-3 h-3"}),h.jsx("span",{children:"Scroll for more"})]})})]})]}):h.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:h.jsx("p",{children:"Select a workflow node (executor) to see execution details"})})})}),h.jsx(FY,{workflow:t,open:N,onOpenChange:M}),h.jsx(Za,{open:U,onOpenChange:O,children:h.jsxs(ec,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsxs(nc,{className:"flex items-center gap-2",children:[h.jsx(vv,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),"Workflow Results"]}),h.jsx(Il,{onClose:()=>O(!1)})]}),h.jsx("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:h.jsxs("div",{className:"space-y-4",children:[Object.values(se.current).some(be=>be&&be.trim().length>0)?Object.entries(se.current).map(([be,we])=>we&&h.jsxs("div",{className:"border-2 border-emerald-300 dark:border-emerald-600 rounded overflow-hidden",children:[h.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/50 px-4 py-2 border-b border-emerald-300 dark:border-emerald-600",children:h.jsx("h5",{className:"text-sm font-semibold text-emerald-800 dark:text-emerald-200",children:be})}),h.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950/50 p-4",children:h.jsx("div",{className:"text-emerald-700 dark:text-emerald-300 whitespace-pre-wrap break-words text-sm font-mono",children:we})})]},be)):h.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-950/50 rounded border-2 border-emerald-300 dark:border-emerald-600 p-6",children:h.jsx("div",{className:"text-emerald-700 dark:text-emerald-300 whitespace-pre-wrap break-words text-sm font-mono",children:b||"No output available"})}),oe.current&&h.jsxs("div",{className:"border-2 border-blue-300 dark:border-blue-600 rounded overflow-hidden",children:[h.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/50 px-4 py-2 border-b border-blue-300 dark:border-blue-600",children:h.jsx("h5",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200",children:"Workflow Output (Structured)"})}),h.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/50 p-4",children:h.jsx("pre",{className:"text-blue-700 dark:text-blue-300 whitespace-pre-wrap break-words text-xs font-mono",children:JSON.stringify(oe.current,null,2)})})]})]})})]})}),h.jsx(Za,{open:L,onOpenChange:H,children:h.jsxs(ec,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[h.jsxs(tc,{className:"px-6 pt-6 flex-shrink-0",children:[h.jsxs(nc,{className:"flex items-center gap-2",children:[h.jsx(Bh,{className:"w-5 h-5 text-destructive"}),"Workflow Error"]}),h.jsx(Il,{onClose:()=>H(!1)})]}),h.jsx("div",{className:"px-6 pb-6 overflow-y-auto flex-1",children:h.jsx("div",{className:"bg-destructive/5 rounded border-2 border-destructive/70 p-6",children:h.jsx("div",{className:"text-destructive whitespace-pre-wrap break-words text-sm font-mono",children:I})})})]})})]})}function qY({message:t,type:e="info",duration:n=4e3,onClose:r}){const[s,c]=k.useState(!0);k.useEffect(()=>{const g=setTimeout(()=>{c(!1),setTimeout(r,300)},n);return()=>clearTimeout(g)},[n,r]);const d={info:"bg-primary/10 border-primary/20",success:"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",warning:"bg-orange-50 dark:bg-orange-950 border-orange-200 dark:border-orange-800",error:"bg-red-50 dark:bg-red-950 border-red-200 dark:border-red-800"}[e],f={info:"text-primary",success:"text-green-800 dark:text-green-200",warning:"text-orange-800 dark:text-orange-200",error:"text-red-800 dark:text-red-200"}[e];return h.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-start gap-3 p-4 rounded-lg border shadow-lg max-w-md transition-all duration-300 ${s?"opacity-100 translate-x-0":"opacity-0 translate-x-4"} ${d}`,children:[h.jsx("p",{className:`text-sm flex-1 ${f}`,children:t}),h.jsx("button",{onClick:()=>{c(!1),setTimeout(r,300)},className:`flex-shrink-0 hover:opacity-70 transition-opacity ${f}`,children:h.jsx(LA,{className:"h-4 w-4"})})]})}function $Y(){const t=Ke(P=>P.agents),e=Ke(P=>P.workflows),n=Ke(P=>P.selectedAgent),r=Ke(P=>P.isLoadingEntities),s=Ke(P=>P.entityError),c=Ke(P=>P.setAgents),d=Ke(P=>P.setWorkflows),f=Ke(P=>P.selectEntity),g=Ke(P=>P.updateAgent),y=Ke(P=>P.updateWorkflow),v=Ke(P=>P.setIsLoadingEntities),x=Ke(P=>P.setEntityError),b=Ke(P=>P.showDebugPanel),A=Ke(P=>P.debugPanelWidth),I=Ke(P=>P.debugEvents),_=Ke(P=>P.isResizing),N=Ke(P=>P.setShowDebugPanel),M=Ke(P=>P.setDebugPanelWidth),U=Ke(P=>P.addDebugEvent),O=Ke(P=>P.clearDebugEvents),L=Ke(P=>P.setIsResizing),H=Ke(P=>P.showAboutModal),G=Ke(P=>P.showGallery),V=Ke(P=>P.showDeployModal),$=Ke(P=>P.showEntityNotFoundToast),ee=Ke(P=>P.setShowAboutModal),se=Ke(P=>P.setShowGallery),ce=Ke(P=>P.setShowDeployModal),oe=Ke(P=>P.setShowEntityNotFoundToast);k.useEffect(()=>{(async()=>{v(!0),x(null);try{const{agents:F,workflows:Y}=await fn.getEntities();c(F),d(Y);const B=new URLSearchParams(window.location.search).get("entity_id");let Q;if(B&&(Q=F.find(ie=>ie.id===B)||Y.find(ie=>ie.id===B),Q||oe(!0)),!Q)if(Q=F.length>0?F[0]:Y.length>0?Y[0]:void 0,Q){const ie=new URL(window.location.href);ie.searchParams.set("entity_id",Q.id),window.history.replaceState({},"",ie)}else{const ie=new URL(window.location.href);ie.searchParams.delete("entity_id"),window.history.replaceState({},"",ie)}if(Q&&(f(Q),Q.metadata?.lazy_loaded===!1))try{if(Q.type==="agent"){const ie=await fn.getAgentInfo(Q.id);g(ie)}else{const ie=await fn.getWorkflowInfo(Q.id);y(ie)}}catch(ie){console.error(`Failed to load full info for first entity ${Q.id}:`,ie)}v(!1)}catch(F){console.error("Failed to load agents/workflows:",F),x(F instanceof Error?F.message:"Failed to load data"),v(!1)}})()},[c,d,f,g,y,v,x,oe]);const he=k.useCallback(P=>{P.preventDefault(),L(!0);const F=P.clientX,Y=A,X=Q=>{const ie=F-Q.clientX,ue=Math.max(200,Math.min(window.innerWidth*.5,Y+ie));M(ue)},B=()=>{L(!1),document.removeEventListener("mousemove",X),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",X),document.addEventListener("mouseup",B)},[A]),W=k.useCallback(async P=>{if(f(P),P.metadata?.lazy_loaded===!1)try{if(P.type==="agent"){const F=await fn.getAgentInfo(P.id);g(F)}else{const F=await fn.getWorkflowInfo(P.id);y(F)}}catch(F){console.error(`Failed to load full info for ${P.id}:`,F)}},[f,g,y]),J=k.useCallback(P=>{P==="clear"?O():U(P)},[U,O]);if(r)return h.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[h.jsxs("header",{className:"flex h-14 items-center gap-4 border-b px-4",children:[h.jsx("div",{className:"w-64 h-9 bg-muted animate-pulse rounded-md"}),h.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[h.jsx("div",{className:"w-8 h-8 bg-muted animate-pulse rounded-md"}),h.jsx("div",{className:"w-8 h-8 bg-muted animate-pulse rounded-md"})]})]}),h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-lg font-medium",children:"Initializing DevUI..."}),h.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:"Loading agents and workflows from your configuration"})]})})]});if(s){const P=fn.getBaseUrl();return h.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[h.jsx(k0,{agents:[],workflows:[],selectedItem:void 0,onSelect:()=>{},isLoading:!1,onSettingsClick:()=>ee(!0)}),h.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:h.jsxs("div",{className:"text-center space-y-6 max-w-2xl",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"rounded-full bg-muted p-4 animate-pulse",children:h.jsx(rF,{className:"h-12 w-12 text-muted-foreground"})})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Can't Connect to Backend"}),h.jsx("p",{className:"text-muted-foreground text-base",children:"No worries! Just start the DevUI backend server and you'll be good to go."})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"text-left bg-muted/50 rounded-lg p-4 space-y-3",children:[h.jsx("p",{className:"text-sm font-medium text-foreground",children:"Start the backend:"}),h.jsx("code",{className:"block bg-background px-3 py-2 rounded border text-sm font-mono text-foreground",children:"devui ./agents --port 8080"}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Or launch programmatically with"," ",h.jsx("code",{className:"text-xs",children:"serve(entities=[agent])"})]})]}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default:"," ",h.jsx("span",{className:"font-mono",children:P})]})]}),s&&h.jsxs("details",{className:"text-left group",children:[h.jsxs("summary",{className:"text-sm text-muted-foreground cursor-pointer hover:text-foreground flex items-center gap-2",children:[h.jsx(us,{className:"h-4 w-4 transition-transform group-open:rotate-180"}),"Error details"]}),h.jsx("p",{className:"mt-2 text-xs text-muted-foreground font-mono bg-muted/30 p-3 rounded border",children:s})]}),h.jsx(ht,{onClick:()=>window.location.reload(),variant:"default",className:"mt-2",children:"Retry Connection"})]})}),h.jsx(R0,{open:H,onOpenChange:ee})]})}return h.jsxs("div",{className:"h-screen flex flex-col bg-background max-h-screen",children:[h.jsx(k0,{agents:t,workflows:e,selectedItem:n,onSelect:W,onBrowseGallery:()=>se(!0),isLoading:r,onSettingsClick:()=>ee(!0)}),h.jsx("div",{className:"flex flex-1 overflow-hidden",children:G?h.jsx("div",{className:"flex-1 w-full",children:h.jsx(N0,{variant:"route",onClose:()=>se(!1),hasExistingEntities:t.length>0||e.length>0})}):t.length===0&&e.length===0?h.jsx(N0,{variant:"inline"}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"flex-1 min-w-0",children:n?n.type==="agent"?h.jsx(vG,{selectedAgent:n,onDebugEvent:J}):h.jsx(GY,{selectedWorkflow:n,onDebugEvent:J}):h.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Select an agent or workflow to get started."})}),b?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`w-1 cursor-col-resize flex-shrink-0 relative group transition-colors duration-200 ease-in-out ${_?"bg-primary/40":"bg-border hover:bg-primary/20"}`,onMouseDown:he,children:h.jsx("div",{className:"absolute inset-y-0 -left-2 -right-2 flex items-center justify-center",children:h.jsx("div",{className:`h-12 w-1 rounded-full transition-all duration-200 ease-in-out ${_?"bg-primary shadow-lg shadow-primary/25":"bg-primary/30 group-hover:bg-primary group-hover:shadow-md group-hover:shadow-primary/20"}`})})}),h.jsxs("div",{className:"flex-shrink-0 flex flex-col h-[calc(100vh-3.7rem)]",style:{width:`${A}px`},children:[h.jsx(F6,{events:I,isStreaming:!1,onClose:()=>N(!1)}),h.jsx("div",{className:"border-t bg-muted/30 px-3 py-2.5 flex-shrink-0",children:h.jsxs(ht,{onClick:()=>ce(!0),className:"w-full",variant:"outline",size:"sm",children:[h.jsx(fO,{className:"h-3 w-3 mr-2 flex-shrink-0"}),h.jsxs("span",{className:"truncate text-xs",children:["Deployment Guide for ",n?.name||"Agent"]})]})})]})]}):h.jsx("div",{className:"flex-shrink-0",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>N(!0),className:"h-full w-10 rounded-none border-l",title:"Show debug panel",children:h.jsx(G5,{className:"h-4 w-4"})})})]})}),h.jsx(R0,{open:H,onOpenChange:ee}),h.jsx(V6,{open:V,onClose:()=>ce(!1),agentName:n?.name}),$&&h.jsx(qY,{message:"Entity not found. Showing first available entity instead.",type:"info",onClose:()=>oe(!1)})]})}function VY({children:t,attribute:e="class",defaultTheme:n="dark",enableSystem:r=!0,disableTransitionOnChange:s=!0,...c}){return h.jsx(_F,{attribute:e,defaultTheme:n,enableSystem:r,disableTransitionOnChange:s,...c,children:t})}const YY="/assets/ms-symbollockup_signin_light-C1F8axpE.svg",QY="/assets/ms-symbollockup_signin_dark-BLaB1Mw_.svg";function WY({onSignIn:t}){return h.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-6",children:h.jsxs("div",{className:"w-full max-w-md space-y-8 text-center",children:[h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:h.jsx(sF,{className:"h-10 w-10 text-primary"})})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Sign in to DevUI"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Use your Microsoft Entra account to continue. We only request access to your basic profile to personalize the experience."})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs(ht,{type:"button",onClick:t,variant:"ghost","aria-label":"Sign in with Microsoft",className:"flex w-full justify-center p-0 h-auto bg-transparent hover:bg-transparent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary/60 cursor-pointer",children:[h.jsx("img",{src:YY,alt:"","aria-hidden":"true",className:"block dark:hidden w-full max-w-xs select-none",draggable:!1}),h.jsx("img",{src:QY,alt:"","aria-hidden":"true",className:"hidden dark:block w-full max-w-xs select-none",draggable:!1})]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"You may be redirected to Microsoft to complete the sign-in flow."})]})]})})}function XY({children:t}){const e=DU(),{instance:n,accounts:r,inProgress:s}=lA(),[c,d]=k.useState(bh.length===0),[f,g]=k.useState(()=>l6()),[y,v]=k.useState(!1),[x,b]=k.useState(!1),A=k.useRef(void 0),I=k.useMemo(()=>n.getActiveAccount()?.homeAccountId??r[0]?.homeAccountId??null,[r,n]);k.useEffect(()=>{!n.getActiveAccount()&&r.length>0&&n.setActiveAccount(r[0])},[r,n]),k.useEffect(()=>{const N=n.getActiveAccount();N?.username&&(u6(N.username),g(N.username))},[I,n]);const _=bh.join("|");if(k.useEffect(()=>{if(!e||bh.length===0){fn.clearAuthProvider(),fn.clearAccessToken(),d(!0);return}if(s!==kn.None){d(!1),fn.clearAccessToken();return}let N=!1;const M=()=>{A.current!==void 0&&(window.clearTimeout(A.current),A.current=void 0)},U=G=>{if(M(),!G)return;const V=120*1e3,$=Date.now(),ee=Math.max(G-$-V,3e4);A.current=window.setTimeout(()=>{O(!0)},ee)},O=async(G=!1)=>{const V=n.getActiveAccount();if(!V)throw new Error("No active Microsoft Entra account is available for API authentication.");try{const $=await n.acquireTokenSilent({account:V,scopes:bh,forceRefresh:G}),ee=$.expiresOn?.getTime();return fn.setAccessToken($.accessToken,ee),U(ee),{token:$.accessToken,expiresAt:ee}}catch($){throw $ instanceof Co&&(d(!1),await n.acquireTokenRedirect({account:V,scopes:bh})),$}},L=async()=>O();return fn.setAuthProvider(L),fn.clearAccessToken(),d(!1),(async()=>{try{const G=await O();!N&&G?.token&&d(!0)}catch(G){N||d(!1),!(G instanceof Co)&&!N&&console.error("Failed to acquire API access token",G)}})(),()=>{N=!0,M(),d(bh.length===0),fn.clearAuthProvider(L),fn.clearAccessToken()}},[r.length,I,_,s,n,e]),k.useEffect(()=>{if(e){v(!0),b(!1);return}if(y||s!==kn.None)return;if(!f){v(!0);return}let N=!1;return b(!0),n.ssoSilent({..._0,authority:n.getConfiguration().auth.authority,redirectUri:n.getConfiguration().auth.redirectUri,loginHint:f}).then(M=>{N||M.account&&n.setActiveAccount(M.account)}).catch(M=>{N||M instanceof Co||console.warn("Silent SSO failed",M)}).finally(()=>{N||(b(!1),v(!0))}),()=>{N=!0}},[y,s,n,e,f]),e&&!c)return h.jsx(eg,{message:"Preparing secure session...",description:"Negotiating Microsoft Entra access for the DevUI backend.",fullPage:!0});if(s!==kn.None)return h.jsx(eg,{message:"Signing you in...",description:"Completing the Microsoft Entra sign-in flow.",fullPage:!0});if(!e){if(!y||x)return h.jsx(eg,{message:"Looking for an existing Microsoft session...",description:"Checking if you already have an active sign-in.",fullPage:!0});const N=()=>n.loginRedirect(_0);return h.jsx(WY,{onSignIn:N})}return h.jsx(h.Fragment,{children:t})}const GP=document.getElementById("root");if(!GP)throw new Error("Root container element with id 'root' was not found.");const B_=D2.createRoot(GP);_x.initialize().then(()=>{B_.render(h.jsx(k.StrictMode,{children:h.jsx(MU,{instance:_x,children:h.jsx(VY,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:h.jsx(XY,{children:h.jsx($Y,{})})})})}))}).catch(t=>{console.error("Failed to initialize MSAL instance",t),B_.render(h.jsx(k.StrictMode,{children:h.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-6",children:h.jsxs("div",{className:"max-w-md text-center space-y-4",children:[h.jsx("h1",{className:"text-2xl font-semibold",children:"Failed to start authentication"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:"We couldn't initialize Microsoft sign-in. Check your environment variables and reload the page."})]})})}))});
